commit db9161c5edf9d6bd494d902f35c744b39c066910
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:57:23 2007 +0200

    Fixed uninitialized result in dfb_fbdev_pan().


 fbdev.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 3be32aaf85a40fa7d46ce5f91ceb839716a3da8c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:54:26 2007 +0200

    Fixed unitialized values in scaling code.


 stretch_hvx_16.h             |    4 ++--
 stretch_hvx_32.h             |    4 ++--
 stretch_hvx_8.h              |    4 ++--
 stretch_hvx_88.h             |    4 ++--
 stretch_up_down_16.h         |    4 ++++
 stretch_up_down_32.h         |    4 ++++
 stretch_up_down_32_indexed.h |    4 ++++
 stretch_up_down_8.h          |    4 ++++
 stretch_up_down_88.h         |    4 ++++
 9 files changed, 28 insertions(+), 8 deletions(-)



commit 05ea285c5f963fecf80eff262b8b71c08e550fad
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:08:15 2007 +0200

    Fix warnings and indention.


 idirectfbscreen.c |   65 +++++++++++++++++++++++++++---------------------------
 1 file changed, 33 insertions(+), 32 deletions(-)



commit d96503f371880bc0c5a3d7d9ee346d05e5c24734
Merge: 4abe5ca... 29dd8f3...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:01:57 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 29dd8f3790d6ace7ed534c4d52d0328fa0703ff2
Author: Mike Crowe <mac@mcrowe.com>
Date:   Wed Aug 15 00:34:46 2007 +0300

    Fix potential SEGV in linux_input
    
    I've managed to provoke a segfault in DirectFB by unplugging a USB
    input device.
    
    linux_input_EventThread divides the result of reading from the input
    device by sizeof(levt) prior to checking for error. Because the type
    of sizeof may be unsigned the int result of read is promoted
    to unsigned prior to the division. This means that a read error will
    cause readlen to contain a number larger than the size of the array
    causing the following loop to exceed its bounds.
    
    This patch defers the division until the value is known to be positive.

commit f52c0c4236a0571e7f7fd550202343ca23239b7a
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Aug 13 22:18:29 2007 +0300

    Silence some automake warnings.

commit 1223551c76cb94e1ceadad0439f7ffa88cf9170c
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Aug 14 23:53:03 2007 +0300

    Reset besvcnt to 0 prior to disabling the backend scaler.
    
    Sometimes the BES would not turn off with just BESCTL. It seems besvcnt
    not being programmed to zero has something to do with it since resetting
    BESGLOBCTL before BESCTL seems to help.

commit 310477a4caf88878df38365bce8cd9f629a05097
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Aug 13 22:13:15 2007 +0300

    Port mach64 to the new surface core.

commit 1b097dd4188819b828a7542ef6e9efe1e51a27b6
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Aug 14 09:33:45 2007 +0300

    Port matrox to the new surface core.

commit 125aa35304d9b125b67c2a683a5bdf447eb24285
Author: Denis Oliver Kropp <dok@halblang.zion.home>
Date:   Mon Aug 13 18:50:04 2007 -0700

    Fusion 7.0: Messages are aligned on a 4 byte boundary now.


 0 files changed



commit 4abe5cae85d57d66593967c3f19047995cb33f76
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:01:46 2007 +0200

    Fix warnings.


 interfaces/IDirectFBFont/idirectfbfont_dgiff.c |    2 +-
 systems/x11/primary.c                          |    1 -
 2 files changed, 1 insertion(+), 2 deletions(-)



commit 898cbe97a80c88bf082805f39d49535ce27e5672
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 15 13:01:28 2007 +0200

    Calculate binary version from micro-binary age.


 configure.in      |    4 +++-
 rules/nmfile.make |    2 +-
 2 files changed, 4 insertions(+), 2 deletions(-)



commit 23079760c28d2e228da8829782071474b99a6de5
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue Aug 14 20:20:48 2007 +0200

    Format fixes in Voodoo.


 manager.c |   32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)



commit 29dd8f3790d6ace7ed534c4d52d0328fa0703ff2
Author: Mike Crowe <mac@mcrowe.com>
Date:   Wed Aug 15 00:34:46 2007 +0300

    Fix potential SEGV in linux_input
    
    I've managed to provoke a segfault in DirectFB by unplugging a USB
    input device.
    
    linux_input_EventThread divides the result of reading from the input
    device by sizeof(levt) prior to checking for error. Because the type
    of sizeof may be unsigned the int result of read is promoted
    to unsigned prior to the division. This means that a read error will
    cause readlen to contain a number larger than the size of the array
    causing the following loop to exceed its bounds.
    
    This patch defers the division until the value is known to be positive.


 README                                 |    1 +
 inputdrivers/linux_input/linux_input.c |    4 ++--
 2 files changed, 3 insertions(+), 2 deletions(-)



commit f52c0c4236a0571e7f7fd550202343ca23239b7a
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Aug 13 22:18:29 2007 +0300

    Silence some automake warnings.


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit 1223551c76cb94e1ceadad0439f7ffa88cf9170c
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Aug 14 23:53:03 2007 +0300

    Reset besvcnt to 0 prior to disabling the backend scaler.
    
    Sometimes the BES would not turn off with just BESCTL. It seems besvcnt
    not being programmed to zero has something to do with it since resetting
    BESGLOBCTL before BESCTL seems to help.


 matrox.c     |    2 ++
 matrox_bes.c |    7 ++++++-
 2 files changed, 8 insertions(+), 1 deletion(-)



commit 310477a4caf88878df38365bce8cd9f629a05097
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Aug 13 22:13:15 2007 +0300

    Port mach64 to the new surface core.


 configure.in                       |    2 
 gfxdrivers/mach64/mach64.c         |   94 ++++++++++++++++++-------------------
 gfxdrivers/mach64/mach64_overlay.c |   60 ++++++++++++-----------
 gfxdrivers/mach64/mach64_state.c   |   67 ++++++++++++--------------
 4 files changed, 111 insertions(+), 112 deletions(-)



commit 1b097dd4188819b828a7542ef6e9efe1e51a27b6
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue Aug 14 09:33:45 2007 +0300

    Port matrox to the new surface core.


 configure.in                            |    2 
 gfxdrivers/matrox/matrox.c              |  152 ++++++++++++++++----------------
 gfxdrivers/matrox/matrox_bes.c          |   55 +++++------
 gfxdrivers/matrox/matrox_crtc2.c        |   69 +++++++-------
 gfxdrivers/matrox/matrox_screen_crtc2.c |    2 
 gfxdrivers/matrox/matrox_spic.c         |   52 +++++-----
 gfxdrivers/matrox/matrox_state.c        |   69 +++++++-------
 7 files changed, 204 insertions(+), 197 deletions(-)



commit 125aa35304d9b125b67c2a683a5bdf447eb24285
Author: Denis Oliver Kropp <dok@halblang.zion.home>
Date:   Mon Aug 13 18:50:04 2007 -0700

    Fusion 7.0: Messages are aligned on a 4 byte boundary now.


 fusion.c |    3 ++-
 types.h  |    6 +++---
 2 files changed, 5 insertions(+), 4 deletions(-)



commit 7d5bd536ae8efb0bdacc064d99c0537d9af09812
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 18:07:44 2007 +0200

    Rearrange locks to avoid dead locks in certain circumstances.


 debug.c |   40 ++++++++++++++++++++++++++--------------
 1 file changed, 26 insertions(+), 14 deletions(-)



commit 2089ff70b727b8bdbab33f3b03d62a246d506543
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 17:37:23 2007 +0200

    Added universal resource id (unsigned long) that belongs to each surface,
    e.g. the layer id or window id. General purpose surfaces can be given an
    id by using the new flag DSDESC_RESOURCE_ID and setting the resource_id field.
    
    Fixed surface allocation for additional layers. Next to the flag CSTF_LAYER
    the resource id belonging to the surface needs to be DLID_PRIMARY.


 include/directfb.h                               |    9 ++++++++-
 interfaces/IDirectFBFont/idirectfbfont_default.c |    2 +-
 src/core/core.h                                  |    2 +-
 src/core/fonts.c                                 |    4 +++-
 src/core/layer_context.c                         |    7 +++++--
 src/core/surface.c                               |    6 +++++-
 src/core/surface.h                               |    3 +++
 src/core/windows.c                               |    8 ++++----
 src/core/windowstack.c                           |    4 +++-
 src/idirectfb.c                                  |   13 +++++++++----
 systems/fbdev/fbdev_surface_pool.c               |    2 +-
 tools/dfbdump.c                                  |    6 +++---
 wm/default/default.c                             |    1 +
 13 files changed, 47 insertions(+), 20 deletions(-)



commit cd465ade0d737ef4a1e8bce2fc9d798fb83ea91d
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 16:20:40 2007 +0200

    Do FBIOPAN_DISPLAY ioctls directly.


 fbdev.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 061313442046a44af3dd64cb74670f6b392bf102
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 16:07:36 2007 +0200

    Fix transfer of errno from master to slaves when doing ioctls.


 fbdev.c |   16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)



commit 6a0e6404c77a6f11d4bfc946b2d4e5ac0fe553b1
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 02:36:48 2007 +0200

    Fix 64bit implementations of RGB32 source and destination color keying.


 generic_64.h |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 7184b00ffe01756f9a025e9f3bafd79ccdc4edc3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 02:20:04 2007 +0200

    Disable SDL backend by default, enable X11 backend by default.
    
    Support 15 and 16 bit depth server (RGB555 and RGB16).


 configure.in          |    8 ++++----
 systems/x11/primary.c |    7 +++----
 systems/x11/x11.c     |   14 ++++++++++++++
 3 files changed, 21 insertions(+), 8 deletions(-)



commit 152474391fd2046e80d1a84dddb870d033402b99
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 02:03:33 2007 +0200

    Revived DSCAPS_STATIC_ALLOC, but not tested.


 TODO               |    2 +-
 src/core/surface.c |   18 ++++++++++++++----
 2 files changed, 15 insertions(+), 5 deletions(-)



commit 8c01aa7a757623ee5777499cec4b665207080234
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 01:41:09 2007 +0200

    Negotiation prefers up to date buffers, e.g. do not update
    the system memory from the video memory allocation, but use
    the video memory allocation directly.
    
    Debug messages, minor cleanup.


 src/core/core.c                |   28 ++++++++++++++--------------
 src/core/surface_buffer.c      |   19 +++++++++++--------
 systems/fbdev/surfacemanager.c |   28 +++++++++++-----------------
 3 files changed, 36 insertions(+), 39 deletions(-)



commit 297b67d655325fd61514b77945dcb973b57a3d5a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 13 01:38:10 2007 +0200

    Fix includes.


 thread.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit cf4de7cf3677a6252d667342f425f99d8d232043
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Sun Aug 12 22:11:26 2007 +0200

    MERGE of branch surface_core into master!
    
    The new surface core is stable enough, still not
    completely implemented and tested, but I can run my
    working environment.
    
    See TODO for next action items.


 b/TODO                                                             |   25 
 b/configure.in                                                     |   42 
 b/gfxdrivers/Makefile.am                                           |    9 
 b/gfxdrivers/ati128/ati128.c                                       |    2 
 b/gfxdrivers/ati128/ati128_overlay.c                               |   26 
 b/gfxdrivers/ati128/ati128_state.c                                 |    2 
 b/gfxdrivers/cle266/uc_ovl_hwset.c                                 |    8 
 b/gfxdrivers/cle266/unichrome.h                                    |    2 
 b/gfxdrivers/cyber5k/cyber5k.c                                     |    2 
 b/gfxdrivers/cyber5k/cyber5k_underlay.c                            |   12 
 b/gfxdrivers/i810/i810.c                                           |    2 
 b/gfxdrivers/i810/i810_overlay.c                                   |   22 
 b/gfxdrivers/i830/i830.c                                           |    2 
 b/gfxdrivers/i830/i830_overlay.c                                   |    2 
 b/gfxdrivers/mach64/mach64.c                                       |    2 
 b/gfxdrivers/mach64/mach64_overlay.c                               |   18 
 b/gfxdrivers/mach64/mach64_state.c                                 |    2 
 b/gfxdrivers/matrox/matrox_bes.c                                   |   30 
 b/gfxdrivers/matrox/matrox_crtc2.c                                 |   20 
 b/gfxdrivers/matrox/matrox_spic.c                                  |    4 
 b/gfxdrivers/matrox/matrox_state.c                                 |   44 
 b/gfxdrivers/neomagic/neo2200.c                                    |    2 
 b/gfxdrivers/neomagic/neo_overlay.c                                |    6 
 b/gfxdrivers/neomagic/neomagic.c                                   |    2 
 b/gfxdrivers/nsc/nsc.c                                             |    2 
 b/gfxdrivers/nvidia/nvidia.c                                       |    2 
 b/gfxdrivers/nvidia/nvidia_2d.c                                    |    2 
 b/gfxdrivers/nvidia/nvidia_3d.c                                    |    6 
 b/gfxdrivers/nvidia/nvidia_overlay.c                               |   14 
 b/gfxdrivers/nvidia/nvidia_primary.c                               |    2 
 b/gfxdrivers/nvidia/nvidia_state.c                                 |   10 
 b/gfxdrivers/radeon/r100_state.c                                   |   58 
 b/gfxdrivers/radeon/r200_state.c                                   |   58 
 b/gfxdrivers/radeon/r300_state.c                                   |   66 
 b/gfxdrivers/radeon/radeon.c                                       |  150 
 b/gfxdrivers/radeon/radeon.h                                       |    1 
 b/gfxdrivers/radeon/radeon_crtc1.c                                 |    7 
 b/gfxdrivers/radeon/radeon_crtc2.c                                 |   76 
 b/gfxdrivers/radeon/radeon_overlay.c                               |  106 
 b/gfxdrivers/radeon/radeon_state.h                                 |   19 
 b/gfxdrivers/savage/savage.c                                       |    2 
 b/gfxdrivers/savage/savage2000.c                                   |    2 
 b/gfxdrivers/savage/savage3d.c                                     |    2 
 b/gfxdrivers/savage/savage4.c                                      |    2 
 b/gfxdrivers/savage/savage_streams_old.c                           |   30 
 b/gfxdrivers/sis315/sis315.c                                       |    2 
 b/gfxdrivers/sis315/sis315_state.c                                 |    2 
 b/gfxdrivers/tdfx/tdfx.c                                           |    2 
 b/gfxdrivers/unichrome/uc_overlay.c                                |    4 
 b/gfxdrivers/unichrome/uc_ovl_hwset.c                              |    8 
 b/gfxdrivers/unichrome/unichrome.h                                 |    2 
 b/gfxdrivers/vmware/.gitignore                                     |    6 
 b/gfxdrivers/vmware/Makefile.am                                    |   34 
 b/gfxdrivers/vmware/vmware_2d.c                                    |  402 ++
 b/gfxdrivers/vmware/vmware_2d.h                                    |   67 
 b/gfxdrivers/vmware/vmware_gfxdriver.c                             |  128 
 b/gfxdrivers/vmware/vmware_gfxdriver.h                             |   58 
 b/include/directfb.h                                               |    3 
 b/inputdrivers/ps2mouse/ps2mouse.c                                 |    2 
 b/interfaces/IDirectFBFont/Makefile.am                             |   12 
 b/interfaces/IDirectFBFont/idirectfbfont_default.c                 |  128 
 b/interfaces/IDirectFBFont/idirectfbfont_dgiff.c                   |    4 
 b/interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |   40 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   23 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |   37 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |   11 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   21 
 b/interfaces/IDirectFBVideoProvider/Makefile.am                    |    3 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_gif.c   |   22 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |   60 
 b/lib/direct/signals.c                                             |    3 
 b/lib/direct/util.c                                                |    2 
 b/lib/fusion/call.c                                                |    4 
 b/lib/fusion/fusion.c                                              |   22 
 b/lib/fusion/fusion.h                                              |    5 
 b/lib/fusion/lock.h                                                |   17 
 b/lib/fusion/object.c                                              |    1 
 b/lib/fusion/shm/shm.c                                             |   45 
 b/lib/fusion/shm/shm.h                                             |    6 
 b/proxy/dispatcher/idirectfbsurface_dispatcher.c                   |    2 
 b/proxy/requestor/idirectfbsurface_requestor.c                     |    2 
 b/src/core/Makefile.am                                             |   14 
 b/src/core/clipboard.c                                             |  218 -
 b/src/core/clipboard.h                                             |   23 
 b/src/core/colorhash.c                                             |  272 -
 b/src/core/colorhash.h                                             |   24 
 b/src/core/core.c                                                  |  152 
 b/src/core/core.h                                                  |   30 
 b/src/core/core_parts.c                                            |    4 
 b/src/core/core_parts.h                                            |   59 
 b/src/core/coredefs.h                                              |   15 
 b/src/core/coretypes.h                                             |   57 
 b/src/core/fonts.c                                                 |   24 
 b/src/core/gfxcard.c                                               |  585 +-
 b/src/core/gfxcard.h                                               |   64 
 b/src/core/graphics_driver.h                                       |   18 
 b/src/core/input.c                                                 |  195 
 b/src/core/input.h                                                 |    1 
 b/src/core/layer_context.c                                         |  138 
 b/src/core/layer_control.c                                         |    1 
 b/src/core/layer_region.c                                          |  118 
 b/src/core/layers.c                                                |  228 -
 b/src/core/layers.h                                                |   17 
 b/src/core/layers_internal.h                                       |   17 
 b/src/core/local_surface_pool.c                                    |  276 +
 b/src/core/palette.c                                               |   26 
 b/src/core/palette.h                                               |    1 
 b/src/core/prealloc_surface_pool.c                                 |  191 
 b/src/core/screens.c                                               |  259 -
 b/src/core/screens.h                                               |   21 
 b/src/core/screens_internal.h                                      |    2 
 b/src/core/shared_surface_pool.c                                   |  223 +
 b/src/core/state.c                                                 |   11 
 b/src/core/state.h                                                 |   12 
 b/src/core/surface.c                                               |  581 ++
 b/src/core/surface.h                                               |  384 +
 b/src/core/surface_buffer.c                                        |  739 +++
 b/src/core/surface_buffer.h                                        |  169 
 b/src/core/surface_core.c                                          |  214 +
 b/src/core/surface_pool.c                                          |  688 +++
 b/src/core/surface_pool.h                                          |  235 +
 b/src/core/system.c                                                |  218 -
 b/src/core/windows.c                                               |   19 
 b/src/core/windows_internal.h                                      |    3 
 b/src/core/windowstack.c                                           |   64 
 b/src/core/wm.c                                                    |  226 -
 b/src/directfb.c                                                   |    2 
 b/src/display/idirectfbdisplaylayer.c                              |   14 
 b/src/display/idirectfbpalette.c                                   |    2 
 b/src/display/idirectfbsurface.c                                   |  130 
 b/src/display/idirectfbsurface.h                                   |    8 
 b/src/display/idirectfbsurface_layer.c                             |    4 
 b/src/display/idirectfbsurface_window.c                            |   47 
 b/src/gfx/convert.h                                                |   18 
 b/src/gfx/generic/generic.c                                        |  229 -
 b/src/gfx/util.c                                                   |  139 
 b/src/gfx/util.h                                                   |    2 
 b/src/idirectfb.c                                                  |   99 
 b/src/misc/conf.c                                                  |    3 
 b/src/misc/gfx_util.c                                              |  100 
 b/src/windows/idirectfbwindow.c                                    |    9 
 b/systems/fbdev/Makefile.am                                        |   17 
 b/systems/fbdev/agp.c                                              |    2 
 b/systems/fbdev/fbdev.c                                            |  351 -
 b/systems/fbdev/fbdev.h                                            |   14 
 b/systems/fbdev/fbdev_surface_pool.c                               |  407 ++
 b/systems/fbdev/surfacemanager.c                                   |  466 ++
 b/systems/fbdev/surfacemanager.h                                   |   94 
 b/systems/osx/osx.c                                                |    2 
 b/systems/osx/primary.c                                            |   10 
 b/systems/sdl/Makefile.am                                          |   33 
 b/systems/sdl/primary.c                                            |  228 -
 b/systems/sdl/sdl.c                                                |    9 
 b/systems/sdl/sdl.h                                                |   10 
 b/systems/sdl/sdl_surface_pool.c                                   |  339 +
 b/systems/sdl/sdlgfx.c                                             |  300 +
 b/systems/vnc/primary.c                                            |   50 
 b/systems/vnc/vnc.c                                                |    2 
 b/systems/vnc/vncinput.c                                           |    2 
 b/systems/x11/Makefile.am                                          |   14 
 b/systems/x11/primary.c                                            |  358 -
 b/systems/x11/primary.h                                            |   10 
 b/systems/x11/x11.c                                                |  159 
 b/systems/x11/x11.h                                                |   64 
 b/systems/x11/x11_surface_pool.c                                   |  314 +
 b/systems/x11/x11_surface_pool.h                                   |   43 
 b/systems/x11/x11image.c                                           |  192 
 b/systems/x11/x11image.h                                           |   68 
 b/systems/x11/x11input.c                                           |    8 
 b/systems/x11/xwindow.c                                            |   62 
 b/systems/x11/xwindow.h                                            |    3 
 b/tools/Makefile.am                                                |    6 
 b/tools/dfbdump.c                                                  |  451 +-
 b/tools/dfbsummon.c                                                |    2 
 b/tools/directfb-csource.c                                         |    2 
 b/wm/default/default.c                                             |  126 
 b/wm/unique/classes/root.c                                         |   10 
 b/wm/unique/classes/window.c                                       |    4 
 b/wm/unique/context.c                                              |    2 
 b/wm/unique/unique.c                                               |    2 
 b/wm/unique/uniquewm.c                                             |    2 
 b/wm/unique/window.c                                               |    4 
 src/core/surfacemanager.c                                          |  980 ----
 src/core/surfacemanager.h                                          |  136 
 src/core/surfaces.c                                                | 1993 ----------
 src/core/surfaces.h                                                |  388 -
 186 files changed, 10798 insertions(+), 6678 deletions(-)



commit 02e75aff72362c4a1f299da068f9e18c868fe48c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Aug 10 19:18:16 2007 +0200

    Hotfix single app build.


 call.c    |    8 ++++++++
 reactor.c |   29 +++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+)



commit ddc79a29d3ba9546559d1610b6ff7510b0a7431a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Aug 10 02:27:07 2007 +0200

    Fix potential dead lock in dfb_layer_context_get_primary_region().


 layer_context.c |   17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)



commit 73a8dc87fa1a833b10f672b9910cb2f586a3a8d8
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Aug 10 02:26:01 2007 +0200

    Fix potential dead lock in layer context initialization.


 layer_context.c |   15 +++------------
 layer_context.h |    4 ++--
 layer_control.c |   46 ++++++++++++++++++++++++++++++++++++++--------
 3 files changed, 43 insertions(+), 22 deletions(-)



commit f2d1bc51c8ed5db5e0e151b056913f9d2762323a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Aug 10 02:24:42 2007 +0200

    Added fusion_reactor_set_lock_only() which does not lock and
    use it in fusion_object_set_lock() as this is called during
    object initialization.


 object.c  |    2 +-
 reactor.c |   28 ++++++++++++++++++++++++++++
 reactor.h |    3 +++
 3 files changed, 32 insertions(+), 1 deletion(-)



commit 50fee612fadaa3a9534cff99a136192c767e0139
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Aug 10 02:19:10 2007 +0200

    Fix lock order in fusion_shm_pool_destroy().


 pool.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 13f42cb5535512e47e4a54835f7c60e75c260dbd
Merge: c0802f7... 77b5640...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue Aug 7 21:31:07 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 77b564072b8b4afc5aca9107f1ba075f4acf8a98
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue Aug 7 11:49:22 2007 +0200

    Fix size_t/sizeof format correctly with "%zu".

commit 7295da6c9aa8143e526a21f86ce6598a6003d901
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 7 11:34:07 2007 +0200

    Removed volatile keyword from structures.
    Added some asm() code raising memory barrier in critical points.

commit 6f8cd393c54849a1e029de68e16c8d30fe70f6fd
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:14:26 2007 +0200

    Follow API change in DirectHash.

commit d1c7a2c7836029dfa2dce24ba507a3f9e7fca7d8
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:13:18 2007 +0200

    Added direct_serial_check() returning true if the target serial is not higher.

commit bcab4383e5eff57aba0e76b0f99b0568ee883082
Merge: 4eb2645... 0bfa945...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:11:41 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 4eb2645d17dc3126b02b03a79da3ba16805d1aa3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:07:54 2007 +0200

    Changed DirectHash's u32 key to be unsigned long. This allows to use pointers.


 0 files changed



commit c0802f7058b32509ac003c0c7e111e124ccb3c1b
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue Aug 7 21:28:30 2007 +0200

    Fix size_t printf format.


 dfbdump.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 77b564072b8b4afc5aca9107f1ba075f4acf8a98
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue Aug 7 11:49:22 2007 +0200

    Fix size_t/sizeof format correctly with "%zu".


 lib/direct/mem.c       |    2 +-
 lib/fusion/fusion.c    |    2 +-
 lib/fusion/shm/heap.c  |    8 ++++----
 lib/fusion/shmalloc.c  |   20 ++++++++++----------
 src/core/windowstack.c |    2 +-
 5 files changed, 17 insertions(+), 17 deletions(-)



commit 7295da6c9aa8143e526a21f86ce6598a6003d901
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 7 11:34:07 2007 +0200

    Removed volatile keyword from structures.
    Added some asm() code raising memory barrier in critical points.


 lock.c     |   16 +++++++++++++++-
 lock.h     |    2 +-
 property.c |   19 ++++++++++++++++---
 property.h |    2 +-
 ref.h      |    2 +-
 5 files changed, 34 insertions(+), 7 deletions(-)



commit 6f8cd393c54849a1e029de68e16c8d30fe70f6fd
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:14:26 2007 +0200

    Follow API change in DirectHash.


 fonts.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit d1c7a2c7836029dfa2dce24ba507a3f9e7fca7d8
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:13:18 2007 +0200

    Added direct_serial_check() returning true if the target serial is not higher.


 serial.h |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)



commit bcab4383e5eff57aba0e76b0f99b0568ee883082
Merge: 4eb2645... 0bfa945...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:11:41 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 0bfa945e3aee20759afabd9fd6041a58bfbeab70
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Aug 2 14:27:41 2007 +0200

    Added dfb_pixel_to_color( format, pixel, ret_color ) using proper expansion.

commit e88e7a81ffbf05a40c0eb180986c42caa3c6e045
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Aug 2 00:34:34 2007 +0200

    Added generic /dev/mem based system module.
    
    There's no screen or layer registered, a graphics driver is required.
    
    Added options for the module:
      video-phys=<hexaddress>        Physical start of video memory
      video-length=<bytes>           Length of video memory
      mmio-phys=<hexaddress>         Physical start of MMIO area
      mmio-length=<bytes>            Length of MMIO area
      accelerator=<id>               Accelerator ID selecting graphics driver

commit 8ec0f1c3759f6200883c8ca3f0837a12643223d9
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:47:12 2007 +0200

    Print an error and return if no layers are available.

commit 1e3143ddaab9a6deee8d0abf2fce3b808a059889
Merge: e5b17bb... 781d713...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:43:41 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit e5b17bbbe91c4db3c38e06337196b2f6a1d74ff1
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:35:53 2007 +0200

    Readded "%.nm" as an alternative to "nm-n.%".


 0 files changed



commit 4eb2645d17dc3126b02b03a79da3ba16805d1aa3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Aug 6 13:07:54 2007 +0200

    Changed DirectHash's u32 key to be unsigned long. This allows to use pointers.


 hash.c |   26 +++++++++++++-------------
 hash.h |   28 ++++++++++++++--------------
 2 files changed, 27 insertions(+), 27 deletions(-)



commit 0bfa945e3aee20759afabd9fd6041a58bfbeab70
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Aug 2 14:27:41 2007 +0200

    Added dfb_pixel_to_color( format, pixel, ret_color ) using proper expansion.


 convert.c |   78 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 convert.h |    4 +++
 2 files changed, 82 insertions(+)



commit e88e7a81ffbf05a40c0eb180986c42caa3c6e045
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Aug 2 00:34:34 2007 +0200

    Added generic /dev/mem based system module.
    
    There's no screen or layer registered, a graphics driver is required.
    
    Added options for the module:
      video-phys=<hexaddress>        Physical start of video memory
      video-length=<bytes>           Length of video memory
      mmio-phys=<hexaddress>         Physical start of MMIO area
      mmio-length=<bytes>            Length of MMIO area
      accelerator=<id>               Accelerator ID selecting graphics driver


 src/core/system.h       |    3 
 src/misc/conf.c         |  100 +++++++++++++++++++
 src/misc/conf.h         |    6 +
 systems/devmem/devmem.c |  248 ++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 356 insertions(+), 1 deletion(-)



commit 8ec0f1c3759f6200883c8ca3f0837a12643223d9
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:47:12 2007 +0200

    Print an error and return if no layers are available.


 idirectfb.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 1e3143ddaab9a6deee8d0abf2fce3b808a059889
Merge: e5b17bb... 781d713...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:43:41 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 781d713b48d87485a6809d771be7f4c3f052a5a3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Sun Jul 29 14:25:42 2007 +0200

    Fixed different bugs/crashes in the scaling code.
    
    Added RGB32 smooth scaling.


 0 files changed



commit e5b17bbbe91c4db3c38e06337196b2f6a1d74ff1
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Aug 1 22:35:53 2007 +0200

    Readded "%.nm" as an alternative to "nm-n.%".


 trace.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 781d713b48d87485a6809d771be7f4c3f052a5a3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Sun Jul 29 14:25:42 2007 +0200

    Fixed different bugs/crashes in the scaling code.
    
    Added RGB32 smooth scaling.


 generic.c        |  119 ++++++++++++++++++++++++++----------------------
 stretch_hvx_16.h |  136 +++++++++++++++++++++++++++++++++++--------------------
 stretch_hvx_32.h |   81 +++++++++++++++++++++-----------
 stretch_hvx_8.h  |   80 ++++++++++++++++++++------------
 stretch_hvx_88.h |   79 ++++++++++++++++++++-----------
 5 files changed, 308 insertions(+), 187 deletions(-)



commit 774c84357f99c8119df9303a871980767c56dbb5
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 15:23:08 2007 +0200

    Fixed warnings.


 gfxdrivers/i810/i810.c                       |    2 +-
 gfxdrivers/unichrome/uc_overlay.h            |    2 +-
 gfxdrivers/unichrome/uc_ovl_hwmap.c          |    2 +-
 gfxdrivers/unichrome/unichrome.c             |    2 +-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |    6 +++---
 lib/direct/tree.c                            |    8 ++++----
 lib/fusion/hash.c                            |    2 +-
 lib/fusion/hash.h                            |    2 +-
 src/core/colorhash.c                         |    2 +-
 systems/fbdev/fbdev.c                        |    2 +-
 tools/dfbinput.c                             |    2 +-
 tools/dfbscreen.c                            |    2 +-
 12 files changed, 17 insertions(+), 17 deletions(-)



commit 3a3577147d1f1185906d64abdeb34997e3e1ff68
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 15:08:39 2007 +0200

    Follow DFBColorKey change in layer API.


 mach64/mach64_overlay.c |   14 ++++----------
 matrox/matrox_bes.c     |    2 +-
 unichrome/uc_overlay.c  |    2 +-
 unichrome/uc_overlay.h  |    2 +-
 4 files changed, 7 insertions(+), 13 deletions(-)



commit 94c59f30479ffacc3aaa3aa04fe3048141caa542
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 13:27:56 2007 +0200

    Added copyright footer.


 gendoc.pl |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit 313623224d91258e3fdbee90da2ba6ee447b48c8
Merge: 19461c2... 2e28cc7...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 13:27:29 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 2e28cc7ff1127118e136fd5f5a83b44ff5da2761
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 11:51:52 2007 +0200

    Added option "layer-src-key-index".
    
    Added DFBColorKey which is binary compatible with DFBColor for RGB, but
    has an 8 bit color index instead of the alpha value.
    
    Use DFBColorKey instead of DFBColor in the CoreLayerRegionConfig.
    
    Added index argument to core layer configuration functions.

commit 7e6800088fa0c087164cf530d9ac2cf161609997
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 21:16:20 2007 +0200

    Few more debug messages.

commit 6863d69d88569a690909c4767a1687bdf3c08b2d
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:19:58 2007 +0200

    Added source color keying and destination color key protection in 16 bit scaling template.

commit 85b80ad3917d3de1cc2a8d69d27cf4b44895610d
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:20:17 2007 +0200

    Fix warnings.

commit c98eadab4c446c28a19852d39ffb227b9b3c0bb6
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:22:32 2007 +0200

    Don't bail out with other system modules if LINUX_INPUT_USE_FBDEV is not set.

commit f65acb0fd1a06f3b694d25273b7531ab1d97c982
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 20:36:19 2007 +0200

    Added debug messages.

commit 73f20c57998159710eeb609e166122b10581cb24
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 20:36:01 2007 +0200

    Raise max number of shm pools to 16.

commit ec4e5ed6e363b3793d8e90e6fbadd4c4ed6ded3f
Merge: aed1290... 8f28528...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 01:09:06 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit aed1290039fd229db3e735b84e9947ef1175cb45
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 01:08:47 2007 +0200

    Added direct_list_foreach_reverse().


 0 files changed



commit 19461c27471d602daa21ebe2360fce028d82699a
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 13:27:24 2007 +0200

    Added direct_list_foreach_reverse().


 list.h |    5 +++++
 1 file changed, 5 insertions(+)



commit 2e28cc7ff1127118e136fd5f5a83b44ff5da2761
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 25 11:51:52 2007 +0200

    Added option "layer-src-key-index".
    
    Added DFBColorKey which is binary compatible with DFBColor for RGB, but
    has an 8 bit color index instead of the alpha value.
    
    Use DFBColorKey instead of DFBColor in the CoreLayerRegionConfig.
    
    Added index argument to core layer configuration functions.


 include/directfb.h                  |   10 ++++++++++
 src/core/layer_context.c            |   10 ++++++++--
 src/core/layer_context.h            |    6 ++++--
 src/core/layers.h                   |    4 ++--
 src/display/idirectfbdisplaylayer.c |    4 ++--
 src/idirectfb.c                     |   10 +++++++++-
 src/misc/conf.c                     |   23 +++++++++++++++++++++++
 src/misc/conf.h                     |    1 +
 8 files changed, 59 insertions(+), 9 deletions(-)



commit 7e6800088fa0c087164cf530d9ac2cf161609997
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 21:16:20 2007 +0200

    Few more debug messages.


 windows.c |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit 6863d69d88569a690909c4767a1687bdf3c08b2d
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:19:58 2007 +0200

    Added source color keying and destination color key protection in 16 bit scaling template.


 stretch_hvx_16.h |   91 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 91 insertions(+)



commit 85b80ad3917d3de1cc2a8d69d27cf4b44895610d
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:20:17 2007 +0200

    Fix warnings.


 layer_context.c |    3 ---
 1 file changed, 3 deletions(-)



commit c98eadab4c446c28a19852d39ffb227b9b3c0bb6
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 23 13:22:32 2007 +0200

    Don't bail out with other system modules if LINUX_INPUT_USE_FBDEV is not set.


 linux_input.c |    2 ++
 1 file changed, 2 insertions(+)



commit f65acb0fd1a06f3b694d25273b7531ab1d97c982
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 20:36:19 2007 +0200

    Added debug messages.


 palette.c |   40 +++++++++++++++++++++++++++++++++-------
 1 file changed, 33 insertions(+), 7 deletions(-)



commit 73f20c57998159710eeb609e166122b10581cb24
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Wed Jul 18 20:36:01 2007 +0200

    Raise max number of shm pools to 16.


 shm_internal.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ec4e5ed6e363b3793d8e90e6fbadd4c4ed6ded3f
Merge: aed1290... 8f28528...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 01:09:06 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit 8f285284dd14c5c0bb53d85ba3b9fded5c7fd635
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 00:57:30 2007 +0200

    build fixed

commit 4f0f00961139e9c59ab97efd6fa87216fce83a9f
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 18:44:15 2007 +0200

    HD extensions, thanks to Daniel J Laird!

commit 826d7ae1aea550a7cf8312848f26d8111232d609
Merge: cc04f11... fd6854f...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 10:27:16 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit cc04f11f830991c812f77a9e9261a1fb5dd96203
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 10:22:05 2007 +0200

    Extended video provider capabilities, thanks to Daniel J Laird!

commit fd6854fe1b77bf3a9621b098c82f4c36ed2a96c5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 12 12:36:08 2007 +0200

    Declare some structs 'volatile' to prevent bad assumptions by the compiler.
    
    Provided 'builtin-multi' end 'single' implementations of fusion_skirmish_wait() and fusion_skirmish_notify().
    
    Check for a dead owner in FusionProperty too.

commit d9f96a4daa43683e17bb5b90f453a2be762e169b
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 16:47:15 2007 +0200

    Provide the original timestamps from the X events.
    
    Use DIEF_FOLLOW for x/y motion.

commit 7633e99995f0d90d3edd825d71a5e12b2bede278
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 16:30:49 2007 +0200

    Work around a strange issue where XNextEvent() blocks on the
    last event until a newer one is received.
    
    Any X expert who can explain the error to me?

commit 74e90cb10a2627fb58aaca2593105c31fd795537
Merge: ad16899... ddc3298...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 15:51:12 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit ad16899fd45e40fd17d45a9f14afe7aabbf8afc8
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 15:50:38 2007 +0200

    Added true keymap support to X11 input driver.
    
    Read the X11 keymap entries properly and translate to identifier and symbols.
    
    Only send key code in events.
    
    X KeySym to DFBInputDeviceKeySymbol translation might not be complete for everyone.

commit ddc3298c0a0665ba0041b1877ebf8c66752fb67d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 12:11:19 2007 +0200

    Implemented DSBLIT_ROTATE180.

commit 1cd3b70ca91715b396c1d361db1647d4e0e38c66
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 11:25:51 2007 +0200

    Override umask when making directories and sockets.

commit 17132f3fceee231bdd3196b1d3451d6872447b71
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 22:05:09 2007 +0200

    Fix 3/4 byte issue for partial updates.

commit b96e94467bf956a33c11605ef485d8ab47da0936
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:50:57 2007 +0200

    Use an ShmImage with twice the height of the output.
    
    Alternate between bottom and top image and
    do XSync() BEFORE doing the next XShmPutImage().
    
    Only call XShmPutImage() for the updated region.
    
    Removed XFlush() call.
    
    Runs nicely on dual core now.

commit d468b0e68105d494c7799f54feb933887c48f379
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:09:09 2007 +0200

    Minor optimization in 555->565.

commit 5d77a01e94016f979f373bc5ccf21b80b26dc5c6
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:07:24 2007 +0200

    Support conversion from 32 to 16 bit.

commit f6d5eda0164895d2be6c55355f871a81587f064f
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:05:04 2007 +0200

    Added dfb_convert_to_rgb32().
    
    Support 32 bit (depth 24) displays in SDL and X11 backend.

commit b8649c8cae7eb9db2f8f2bfb8ed29c0dc8e5f7a8
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 20:32:07 2007 +0200

    Added dfb_convert_to_rgb16().
    
    Use it in SDL system.
    
    Cleaned up X11 system a bit and made it use dfb_convert_to_rgb16().

commit 4e96b36727571ee0c70fe620d178b4c8b318ef99
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 15:45:51 2007 +0200

    Added IDirectFBDisplayLayer::SetRotation().
    
    Added option "-R <degree>" to dfblayer.

commit 121e8a229f4be2909bdbde8e7be2520a1d090d33
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 15:09:15 2007 +0200

    Added dfb_gfx_back_to_front_copy_180().
    
    Added runtime option "layer-rotate = <degree>" with 0 and 180 supported.
    
    Try it with desktop-buffer-mode=backsystem until graphics drivers support the flag.
    
    I'm committing this with my screen content rotated by 180 degree but not the screen itself.
    Typing and reading is fine, but editing text, especiallusing y del/backspace, is horrible.

commit 7c6330ce36593169e5e740b2bd98ad81c230b461
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 14:40:57 2007 +0200

    Added DSBLIT_ROTATE180 with a basic software implementation.

commit 1f73f307dbcd5272ebad51a78c9c652c4b638f14
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 13:00:45 2007 +0200

    Finalized ARGB4444 smooth scaling support.

commit d8276f7799e60009650e28888e9fcbc024bb7253
Merge: 977ec21... 2b48aaa...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Sat Jul 7 21:17:28 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 977ec21feffd47b27e365e594e0e66c27f342c25
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 13:31:36 2007 +0200

    Big progress on the scaling front.

commit d8d9f23b914c07c3e69680980c4425beeae92634
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Jul 5 23:31:40 2007 +0200

    Added support for ARGB4444, RGB444 and NV16 on a 16 bit RGB16 SDL window.


 0 files changed



commit aed1290039fd229db3e735b84e9947ef1175cb45
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 01:08:47 2007 +0200

    Added direct_list_foreach_reverse().


 list.h |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 8f285284dd14c5c0bb53d85ba3b9fded5c7fd635
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 17 00:57:30 2007 +0200

    build fixed


 directfb.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 4f0f00961139e9c59ab97efd6fa87216fce83a9f
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 18:44:15 2007 +0200

    HD extensions, thanks to Daniel J Laird!


 include/Makefile.am           |    3 +
 include/directfb.h            |   69 ++++++++++++++++++++++++++++++++++++++----
 src/display/idirectfbscreen.c |   46 +++++++++++++++++++++++++++-
 tools/dfbinfo.c               |   37 ++++++++++++++++++----
 4 files changed, 142 insertions(+), 13 deletions(-)



commit 826d7ae1aea550a7cf8312848f26d8111232d609
Merge: cc04f11... fd6854f...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 10:27:16 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit fd6854fe1b77bf3a9621b098c82f4c36ed2a96c5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 12 12:36:08 2007 +0200

    Declare some structs 'volatile' to prevent bad assumptions by the compiler.
    
    Provided 'builtin-multi' end 'single' implementations of fusion_skirmish_wait() and fusion_skirmish_notify().
    
    Check for a dead owner in FusionProperty too.


 0 files changed



commit cc04f11f830991c812f77a9e9261a1fb5dd96203
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jul 16 10:22:05 2007 +0200

    Extended video provider capabilities, thanks to Daniel J Laird!


 include/directfb.h                 |   75 ++++++++++++++++++++++++++++++++++++-
 src/media/idirectfbvideoprovider.c |   23 +++++++++++
 2 files changed, 96 insertions(+), 2 deletions(-)



commit fd6854fe1b77bf3a9621b098c82f4c36ed2a96c5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 12 12:36:08 2007 +0200

    Declare some structs 'volatile' to prevent bad assumptions by the compiler.
    
    Provided 'builtin-multi' end 'single' implementations of fusion_skirmish_wait() and fusion_skirmish_notify().
    
    Check for a dead owner in FusionProperty too.


 lock.c     |  112 +++++++++++++++++++++++++++++++++++--------------------------
 lock.h     |    6 ++-
 property.c |   31 +++++++++++-----
 property.h |    4 +-
 ref.h      |    2 -
 5 files changed, 95 insertions(+), 60 deletions(-)



commit d9f96a4daa43683e17bb5b90f453a2be762e169b
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 16:47:15 2007 +0200

    Provide the original timestamps from the X events.
    
    Use DIEF_FOLLOW for x/y motion.


 x11input.c |   42 ++++++++++++++++++++++++++++++------------
 1 file changed, 30 insertions(+), 12 deletions(-)



commit 7633e99995f0d90d3edd825d71a5e12b2bede278
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 16:30:49 2007 +0200

    Work around a strange issue where XNextEvent() blocks on the
    last event until a newer one is received.
    
    Any X expert who can explain the error to me?


 x11input.c |   31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)



commit 74e90cb10a2627fb58aaca2593105c31fd795537
Merge: ad16899... ddc3298...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 15:51:12 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit ddc3298c0a0665ba0041b1877ebf8c66752fb67d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 12:11:19 2007 +0200

    Implemented DSBLIT_ROTATE180.

commit 1cd3b70ca91715b396c1d361db1647d4e0e38c66
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 11:25:51 2007 +0200

    Override umask when making directories and sockets.


 0 files changed



commit ad16899fd45e40fd17d45a9f14afe7aabbf8afc8
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jul 10 15:50:38 2007 +0200

    Added true keymap support to X11 input driver.
    
    Read the X11 keymap entries properly and translate to identifier and symbols.
    
    Only send key code in events.
    
    X KeySym to DFBInputDeviceKeySymbol translation might not be complete for everyone.


 x11.c      |   10 
 x11input.c |  920 +++++++++++++++++++++++++------------------------------------
 2 files changed, 387 insertions(+), 543 deletions(-)



commit ddc3298c0a0665ba0041b1877ebf8c66752fb67d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 12:11:19 2007 +0200

    Implemented DSBLIT_ROTATE180.


 r100_3d.c |   13 ++++++++++---
 r200_3d.c |   13 ++++++++++---
 r300_3d.c |   16 ++++++++++++----
 radeon.c  |   15 ++++++++++++---
 4 files changed, 44 insertions(+), 13 deletions(-)



commit 1cd3b70ca91715b396c1d361db1647d4e0e38c66
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 10 11:25:51 2007 +0200

    Override umask when making directories and sockets.


 call.c   |    6 +++---
 fusion.c |   14 +++++++++-----
 2 files changed, 12 insertions(+), 8 deletions(-)



commit 17132f3fceee231bdd3196b1d3451d6872447b71
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 22:05:09 2007 +0200

    Fix 3/4 byte issue for partial updates.


 primary.c |    2 +-
 xwindow.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit b96e94467bf956a33c11605ef485d8ab47da0936
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:50:57 2007 +0200

    Use an ShmImage with twice the height of the output.
    
    Alternate between bottom and top image and
    do XSync() BEFORE doing the next XShmPutImage().
    
    Only call XShmPutImage() for the updated region.
    
    Removed XFlush() call.
    
    Runs nicely on dual core now.


 primary.c |  100 +++++++++++++++++++++++++++-----------------------------------
 xwindow.c |    7 ++--
 xwindow.h |    7 +---
 3 files changed, 52 insertions(+), 62 deletions(-)



commit d468b0e68105d494c7799f54feb933887c48f379
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:09:09 2007 +0200

    Minor optimization in 555->565.


 convert.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5d77a01e94016f979f373bc5ccf21b80b26dc5c6
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:07:24 2007 +0200

    Support conversion from 32 to 16 bit.


 convert.h |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)



commit f6d5eda0164895d2be6c55355f871a81587f064f
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 21:05:04 2007 +0200

    Added dfb_convert_to_rgb32().
    
    Support 32 bit (depth 24) displays in SDL and X11 backend.


 src/gfx/convert.h     |   93 ++++++++++++++++++++++++++++++++++++++++++++++++++
 systems/sdl/primary.c |    4 ++
 systems/x11/primary.c |   16 ++++++++
 3 files changed, 112 insertions(+), 1 deletion(-)



commit b8649c8cae7eb9db2f8f2bfb8ed29c0dc8e5f7a8
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 20:32:07 2007 +0200

    Added dfb_convert_to_rgb16().
    
    Use it in SDL system.
    
    Cleaned up X11 system a bit and made it use dfb_convert_to_rgb16().


 src/gfx/convert.h     |   77 +++++++++++++++++++++++
 systems/sdl/primary.c |   51 +++------------
 systems/x11/primary.c |  134 ++++++++++++-----------------------------
 systems/x11/x11.c     |   10 +--
 systems/x11/xwindow.c |  162 +++++++++++++++++++-------------------------------
 systems/x11/xwindow.h |   10 ---
 6 files changed, 202 insertions(+), 242 deletions(-)



commit 4e96b36727571ee0c70fe620d178b4c8b318ef99
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 15:45:51 2007 +0200

    Added IDirectFBDisplayLayer::SetRotation().
    
    Added option "-R <degree>" to dfblayer.


 include/directfb.h                  |   17 +++++++++++
 src/core/core.h                     |    2 -
 src/core/layer_context.c            |   27 ++++++++++++++++++
 src/core/layer_context.h            |    5 ++-
 src/core/layer_region.c             |    2 -
 src/core/layers_internal.h          |    1 
 src/display/idirectfbdisplaylayer.c |   13 ++++++++
 tools/dfblayer.c                    |   54 ++++++++++++++++++++++++++++++------
 8 files changed, 110 insertions(+), 11 deletions(-)



commit 121e8a229f4be2909bdbde8e7be2520a1d090d33
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 15:09:15 2007 +0200

    Added dfb_gfx_back_to_front_copy_180().
    
    Added runtime option "layer-rotate = <degree>" with 0 and 180 supported.
    
    Try it with desktop-buffer-mode=backsystem until graphics drivers support the flag.
    
    I'm committing this with my screen content rotated by 180 degree but not the screen itself.
    Typing and reading is fine, but editing text, especiallusing y del/backspace, is horrible.


 core/layer_region.c |    5 +++-
 gfx/util.c          |   60 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 gfx/util.h          |    1 
 misc/conf.c         |   24 ++++++++++++++++++++
 misc/conf.h         |    2 +
 5 files changed, 91 insertions(+), 1 deletion(-)



commit 7c6330ce36593169e5e740b2bd98ad81c230b461
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 14:40:57 2007 +0200

    Added DSBLIT_ROTATE180 with a basic software implementation.


 include/directfb.h        |    1 
 src/gfx/generic/generic.c |   56 +++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 54 insertions(+), 3 deletions(-)



commit 1f73f307dbcd5272ebad51a78c9c652c4b638f14
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Mon Jul 9 13:00:45 2007 +0200

    Finalized ARGB4444 smooth scaling support.


 generic.c        |    8 +++++---
 stretch_hvx_16.h |    8 ++++++++
 2 files changed, 13 insertions(+), 3 deletions(-)



commit d8276f7799e60009650e28888e9fcbc024bb7253
Merge: 977ec21... 2b48aaa...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Sat Jul 7 21:17:28 2007 +0200

    Merge branch 'master' of git+ssh://git.directfb.org/git/directfb/core/DirectFB

commit 2b48aaa07cbcfe1d2bea3182ffcbaf02269729f6
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 15:27:22 2007 +0200

    Added multifunctional color configuration function dfb_state_set_color_or_index().
    Always tries to set both color and index. If color index is -1, color is used and
    searched in palette of destination surface if present. If color index is valid the
    color is looked up in palette if present.
    
    Added option "layer-bg-color-index = n".

commit 0c01366a6f5b37a1dd00b513e6c62b1056b910b8
Merge: 14ba567... 098b862...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 14:40:23 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit 14ba567e3b00d273f063d0e97f64f00e02aa756c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 14:38:51 2007 +0200

    no-force-slave


 0 files changed



commit 2b48aaa07cbcfe1d2bea3182ffcbaf02269729f6
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 15:27:22 2007 +0200

    Added multifunctional color configuration function dfb_state_set_color_or_index().
    Always tries to set both color and index. If color index is -1, color is used and
    searched in palette of destination surface if present. If color index is valid the
    color is looked up in palette if present.
    
    Added option "layer-bg-color-index = n".


 core/state.c            |   38 ++++++++++++++++++++++++++++++++++++++
 core/state.h            |   12 ++++++++++++
 core/windows_internal.h |    1 +
 core/windowstack.c      |   30 +++++++++++++++++++++++++++++-
 core/windowstack.h      |    7 +++++--
 idirectfb.c             |    1 +
 misc/conf.c             |   37 +++++++++++++++++++++++++++++++------
 misc/conf.h             |    1 +
 8 files changed, 118 insertions(+), 9 deletions(-)



commit 0c01366a6f5b37a1dd00b513e6c62b1056b910b8
Merge: 14ba567... 098b862...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 14:40:23 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit 098b862938c4f577879059f6e0c8e4a17049a45f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 2 12:03:11 2007 +0200

    Added FusionLeave, a message sent from a slave in emergency mode to notify the master
    that local refs belonging to the sender must be removed.

commit 0a2f0b3af5a3f0e0f498e47d55c4d5ddb610242b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 2 11:57:19 2007 +0200

    Forgot a newline.

commit 4160d212709952ae06316a54474e46810b3d8492
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 1 17:19:43 2007 +0200

    Actually fail if a parent window for the newly created one was specified.

commit a5040250b5523b7d0e2464690d158d604517d335
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 1 16:03:33 2007 +0200

    Use fprintf() instead of direct_log_printf() to print config_usage.

commit e206b97ff745eb58824b0eb91997c49eb44adbe5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 30 14:56:42 2007 +0200

    dfb_surface_reformat() no longer fails immediatly if the surface is locked, instead it waits for 3 loops before doing it.

commit 0f7dd53285a56bbf38a02b82b47a7f2ee85a1f09
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 30 14:54:52 2007 +0200

    When using the builtin IPC implementation, chose a pool allocation base address that won't collide
    with those used by other worlds, i.e. the pool base of world N starts 128M after the pool baseof world N-1.
    As a consequence of this the maximum amount of shared memory allocatable by a world is limited to 128M.

commit dcf2a2b7089fd02105f68bba5da3130c1d72f42c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:48:28 2007 +0200

    Added a new Fusion/IPC implementation using standard system calls:
    
     - Skirmish gets implemented by using sched_yield()+usleep, exactly like linuxthreads does with pthread mutexes,
       but it's also capable of automatically unlocking whether the owner process died without doing it.
    
     - Property works like Skirmish, but it doesn't sleep and it doesn't check for a dead owner.
    
     - Dispatching and co. make use of raw unix sockets: there is a local address specific to each fusionee
       (/tmp/fusion.@WORLD_INDEX@/@HEX_FUSION_ID@) and each call (/tmp/fusion.@WORLD_INDEX@/call.@HEX_CALL_ID@.@HEX_CALL_SERIAL@),
       and messages are sent directly from the generator to the socket of the listeners.
       From a network point of view, this is similar to UDP Multicast (e.g. conference or meeting).
    
    The new implementation gets build when --enable-bulti is specified but no usable linux/fusion.h was found
    (however you can edit fusion/build.h to force building it).

commit 21bb8adc7377b8a5be57e9e1a092513ed8cb0da6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:31:18 2007 +0200

    Open log file with mode 0664.
    Automatically flush stderr.

commit 90a53ee2da89805844cd364c52379089d16acc80
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:30:00 2007 +0200

    Added direct_sched_yield().

commit 8f02626a2434d6fd3fbfd14331c72b1450620c62
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Jun 27 00:15:53 2007 +0200

    Fix 64 bit symbol address parsing in trace code.
    
    Fix missing target directory for nm-n files.

commit beab80191a61967d5b1a75e9a468f11265f40d15
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Fri Jun 22 10:45:15 2007 +0300

    Also make sure fix.ypanstep is not zero before using it.

commit 6447b0f8ae8ad7212a8a74e9596f5c19870f7a48
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed Jun 20 23:12:37 2007 +0300

    Make sure fix.xpanstep is not zero before using it.

commit da50bb89855497db778d4fe5c8c951d3a74fb07b
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sun Jun 17 13:25:24 2007 +0300

    Eliminate libsysfs dependency from i2c detection.
    
    Recent changes in sysfs layout broke the i2c detection. Fix the problem
    and remove the dependency on libsysfs. Use of libsysfs is no longer
    recommended by the kernel developers.

commit 1a0ac5594506b71189346be53e84615f09820ac8
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Fri Jun 15 16:19:45 2007 +0200

    Thanks to Daniel Laird for Video Provider Events!

commit 66d8693e2b45db7c26c7d22c70781dce2e2fdbab
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jun 4 13:39:01 2007 +0200

    Implemented StartDrawing/StopDrawing() for states.
    
    When a surface is being rendered to, its graphics
    state is set to DRAWING. Upon Flip() the state is
    flushed.
    
    Each sub surface interface has a reference to its
    parent and a list of its children.
    
    The new mechanism needs to be enabled via "startstop"
    option.
    
    StartDrawing/StopDrawing() can be implemented by the
    graphics driver. e.g. to keep track dirty surfaces
    and defer flipping if it would reveal other's drawing.

commit b630f7539003e04a21d6d7e44023461ecf0e2143
Author: Ben Combee <bcombee@www.directfb.org>
Date:   Fri Jun 15 05:01:59 2007 +0200

    Add --raw option to directfb-csource to allow encoding data files in headers
    
    
    via git-CVS emulator


 0 files changed



commit 14ba567e3b00d273f063d0e97f64f00e02aa756c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 14:38:51 2007 +0200

    no-force-slave


 conf.c |    3 +++
 1 file changed, 3 insertions(+)



commit 977ec21feffd47b27e365e594e0e66c27f342c25
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jul 6 13:31:36 2007 +0200

    Big progress on the scaling front.


 b/src/gfx/generic/Makefile.am                  |   28 +
 b/src/gfx/generic/generic.c                    |  399 ++++++++++++++++++++-----
 b/src/gfx/generic/stretch_hvx_16.h             |  326 ++++++++++++++++++++
 b/src/gfx/generic/stretch_hvx_32.h             |  130 ++++++++
 b/src/gfx/generic/stretch_hvx_8.h              |  127 +++++++
 b/src/gfx/generic/stretch_hvx_88.h             |  131 ++++++++
 b/src/gfx/generic/stretch_up_down_16.h         |   68 ++++
 b/src/gfx/generic/stretch_up_down_32.h         |   68 ++++
 b/src/gfx/generic/stretch_up_down_32_indexed.h |   78 ++++
 b/src/gfx/generic/stretch_up_down_8.h          |   68 ++++
 b/src/gfx/generic/stretch_up_down_88.h         |   68 ++++
 src/gfx/generic/stretch_hvx_rgb16.h            |  253 ---------------
 12 files changed, 1407 insertions(+), 337 deletions(-)



commit d8d9f23b914c07c3e69680980c4425beeae92634
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu Jul 5 23:31:40 2007 +0200

    Added support for ARGB4444, RGB444 and NV16 on a 16 bit RGB16 SDL window.


 primary.c |   73 ++++++++++++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 62 insertions(+), 11 deletions(-)



commit 098b862938c4f577879059f6e0c8e4a17049a45f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 2 12:03:11 2007 +0200

    Added FusionLeave, a message sent from a slave in emergency mode to notify the master
    that local refs belonging to the sender must be removed.


 fusion.c   |   51 +++++++++++++++++++++++++++++++++++++--------------
 protocol.h |   11 +++++++++++
 2 files changed, 48 insertions(+), 14 deletions(-)



commit 0a2f0b3af5a3f0e0f498e47d55c4d5ddb610242b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 2 11:57:19 2007 +0200

    Forgot a newline.


 object.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4160d212709952ae06316a54474e46810b3d8492
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 1 17:19:43 2007 +0200

    Actually fail if a parent window for the newly created one was specified.


 default.c |    3 +++
 1 file changed, 3 insertions(+)



commit a5040250b5523b7d0e2464690d158d604517d335
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 1 16:03:33 2007 +0200

    Use fprintf() instead of direct_log_printf() to print config_usage.


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e206b97ff745eb58824b0eb91997c49eb44adbe5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 30 14:56:42 2007 +0200

    dfb_surface_reformat() no longer fails immediatly if the surface is locked, instead it waits for 3 loops before doing it.


 surfaces.c |   17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)



commit 0f7dd53285a56bbf38a02b82b47a7f2ee85a1f09
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 30 14:54:52 2007 +0200

    When using the builtin IPC implementation, chose a pool allocation base address that won't collide
    with those used by other worlds, i.e. the pool base of world N starts 128M after the pool baseof world N-1.
    As a consequence of this the maximum amount of shared memory allocatable by a world is limited to 128M.


 fusion.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit dcf2a2b7089fd02105f68bba5da3130c1d72f42c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:48:28 2007 +0200

    Added a new Fusion/IPC implementation using standard system calls:
    
     - Skirmish gets implemented by using sched_yield()+usleep, exactly like linuxthreads does with pthread mutexes,
       but it's also capable of automatically unlocking whether the owner process died without doing it.
    
     - Property works like Skirmish, but it doesn't sleep and it doesn't check for a dead owner.
    
     - Dispatching and co. make use of raw unix sockets: there is a local address specific to each fusionee
       (/tmp/fusion.@WORLD_INDEX@/@HEX_FUSION_ID@) and each call (/tmp/fusion.@WORLD_INDEX@/call.@HEX_CALL_ID@.@HEX_CALL_SERIAL@),
       and messages are sent directly from the generator to the socket of the listeners.
       From a network point of view, this is similar to UDP Multicast (e.g. conference or meeting).
    
    The new implementation gets build when --enable-bulti is specified but no usable linux/fusion.h was found
    (however you can edit fusion/build.h to force building it).


 configure.in                 |   16 
 lib/fusion/Makefile.am       |    1 
 lib/fusion/build.h.in        |    1 
 lib/fusion/call.c            |  211 ++++++
 lib/fusion/call.h            |    2 
 lib/fusion/fusion.c          | 1430 +++++++++++++++++++++++++++++++++++++------
 lib/fusion/fusion_internal.h |   52 +
 lib/fusion/lock.c            |  223 ++++++
 lib/fusion/lock.h            |   10 
 lib/fusion/object.c          |    5 
 lib/fusion/property.c        |  160 ++++
 lib/fusion/property.h        |    9 
 lib/fusion/protocol.h        |  109 +++
 lib/fusion/reactor.c         |  888 ++++++++++++++++++++------
 lib/fusion/ref.c             |  251 +++++++
 lib/fusion/ref.h             |   12 
 lib/fusion/shm/heap.c        |   18 
 lib/fusion/shm/pool.c        |  214 ++++++
 lib/fusion/types.h           |    2 
 19 files changed, 3161 insertions(+), 453 deletions(-)



commit 21bb8adc7377b8a5be57e9e1a092513ed8cb0da6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:31:18 2007 +0200

    Open log file with mode 0664.
    Automatically flush stderr.


 log.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 90a53ee2da89805844cd364c52379089d16acc80
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 29 14:30:00 2007 +0200

    Added direct_sched_yield().


 util.h |   28 ++++++++++++++++++++++++----
 1 file changed, 24 insertions(+), 4 deletions(-)



commit 8f02626a2434d6fd3fbfd14331c72b1450620c62
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed Jun 27 00:15:53 2007 +0200

    Fix 64 bit symbol address parsing in trace code.
    
    Fix missing target directory for nm-n files.


 lib/direct/trace.c |   67 ++++++++++++++++++++++++++++++-----------------------
 rules/nmfile.make  |    3 +-
 2 files changed, 40 insertions(+), 30 deletions(-)



commit beab80191a61967d5b1a75e9a468f11265f40d15
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Fri Jun 22 10:45:15 2007 +0300

    Also make sure fix.ypanstep is not zero before using it.


 fbdev.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 6447b0f8ae8ad7212a8a74e9596f5c19870f7a48
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed Jun 20 23:12:37 2007 +0300

    Make sure fix.xpanstep is not zero before using it.


 fbdev.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit da50bb89855497db778d4fe5c8c951d3a74fb07b
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sun Jun 17 13:25:24 2007 +0300

    Eliminate libsysfs dependency from i2c detection.
    
    Recent changes in sysfs layout broke the i2c detection. Fix the problem
    and remove the dependency on libsysfs. Use of libsysfs is no longer
    recommended by the kernel developers.


 Makefile.am    |    1 
 matrox_maven.c |   81 ++++++++++++++++++++++++++++-----------------------------
 2 files changed, 41 insertions(+), 41 deletions(-)



commit 1a0ac5594506b71189346be53e84615f09820ac8
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Fri Jun 15 16:19:45 2007 +0200

    Thanks to Daniel Laird for Video Provider Events!


 include/directfb.h                 |   92 ++++++++++++++++++++++++++++++++++---
 src/input/idirectfbinputbuffer.c   |   42 ++++++++++++++++
 src/media/idirectfbvideoprovider.c |   41 ++++++++++++++++
 3 files changed, 169 insertions(+), 6 deletions(-)



commit 66d8693e2b45db7c26c7d22c70781dce2e2fdbab
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon Jun 4 13:39:01 2007 +0200

    Implemented StartDrawing/StopDrawing() for states.
    
    When a surface is being rendered to, its graphics
    state is set to DRAWING. Upon Flip() the state is
    flushed.
    
    Each sub surface interface has a reference to its
    parent and a list of its children.
    
    The new mechanism needs to be enabled via "startstop"
    option.
    
    StartDrawing/StopDrawing() can be implemented by the
    graphics driver. e.g. to keep track dirty surfaces
    and defer flipping if it would reveal other's drawing.


 core/gfxcard.c                    |   98 ++++++++++++++++++++++++++++---
 core/gfxcard.h                    |  118 +++++++++++++++++++++++++++-----------
 core/state.c                      |    4 +
 core/state.h                      |   46 ++++++++++++++
 display/idirectfbdisplaylayer.c   |    2 
 display/idirectfbsurface.c        |   88 +++++++++++++++++++++++++++-
 display/idirectfbsurface.h        |   11 +++
 display/idirectfbsurface_layer.c  |   21 +++++-
 display/idirectfbsurface_layer.h  |    1 
 display/idirectfbsurface_window.c |   22 ++++++-
 display/idirectfbsurface_window.h |    1 
 gfx/util.c                        |    9 ++
 idirectfb.c                       |    8 +-
 misc/conf.c                       |    7 ++
 misc/conf.h                       |    2 
 windows/idirectfbwindow.c         |    2 
 16 files changed, 382 insertions(+), 58 deletions(-)



commit b630f7539003e04a21d6d7e44023461ecf0e2143
Author: Ben Combee <bcombee@www.directfb.org>
Date:   Fri Jun 15 05:01:59 2007 +0200

    Add --raw option to directfb-csource to allow encoding data files in headers
    
    
    via git-CVS emulator


 directfb-csource.c |  113 +++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 92 insertions(+), 21 deletions(-)



commit 6987c883a18be767085d55e22638520a7d80fbc6
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jun 12 19:39:30 2007 +0200

    Eek, disable smooth scaling until code supports big endian as well.


 generic.c |    2 ++
 1 file changed, 2 insertions(+)



commit 58c1d37bad0e6dc50db4cac3d650caf6bb07722d
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jun 12 19:34:23 2007 +0200

    Fix hi/lo mixup for big/little endian in 32 bit wise 16 bit color keying code.


 template_colorkey_16.h |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit c0142f6bf506d09449cdf9d2ca0250dcb05cf7fc
Merge: 14f3aef... 8bba6d9...
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jun 12 18:57:41 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit 8bba6d96df16e3cd11445995cb6704676151e7c3
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sat Jun 2 22:19:14 2007 +0300

    Check fbdev pan/wrap capabilities for double/triple buffering.

commit 68d8b7ac45293dfc1b03e984a7e5a7b183382313
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Jun 11 00:58:09 2007 +0300

    Fix fbdev_ioctl_call_handler() return value.

commit fa628067a16af972a70cec416ce7b88f9c1bda5f
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sat Jun 2 22:05:18 2007 +0300

    More uses for D_ARRAY_SIZE().

commit aba1f2a73f4870e1bfc0384a06e49c2acb66d884
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 8 15:08:39 2007 +0200

    Use a preallocated surface to render the image
    (this should fix support for destinations that are premultiplied, separated, and co.).


 0 files changed



commit 14f3aef4d4d9fc3f075209a9543b1022f8588493
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jun 12 17:52:39 2007 +0200

    Added layer palette initialization via "layer-palette-<n> = <hexcolor>" option.


 idirectfb.c |   61 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 idirectfb.h |    3 ++
 misc/conf.c |   55 +++++++++++++++++++++++++++++++++++++++++++++++++++++-
 misc/conf.h |    3 ++
 4 files changed, 120 insertions(+), 2 deletions(-)



commit 97c631660fe977d6d8bb5d4ddf86e1ca1d4e8001
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue Jun 12 17:49:43 2007 +0200

    If no alignment is specified (0), default to 8 bytes offset and pitch alignment.
    
    To disable alignment, simply set to 1.


 surfacemanager.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8bba6d96df16e3cd11445995cb6704676151e7c3
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sat Jun 2 22:19:14 2007 +0300

    Check fbdev pan/wrap capabilities for double/triple buffering.


 fbdev.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 68d8b7ac45293dfc1b03e984a7e5a7b183382313
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Mon Jun 11 00:58:09 2007 +0300

    Fix fbdev_ioctl_call_handler() return value.


 fbdev.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit fa628067a16af972a70cec416ce7b88f9c1bda5f
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sat Jun 2 22:05:18 2007 +0300

    More uses for D_ARRAY_SIZE().


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit aba1f2a73f4870e1bfc0384a06e49c2acb66d884
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 8 15:08:39 2007 +0200

    Use a preallocated surface to render the image
    (this should fix support for destinations that are premultiplied, separated, and co.).


 idirectfbimageprovider_dfiff.c |  100 +++++++++++++++--------------------------
 1 file changed, 39 insertions(+), 61 deletions(-)



commit 00a47324bb5988fbc5d368f4730a1fc9ab935636
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sun Jun 3 19:08:39 2007 +0200

    Removed bogus assert.


 call.c |    1 -
 1 file changed, 1 deletion(-)



commit d44cb34fa00fede36e757238f02be6e953855c5a
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sun Jun 3 18:32:59 2007 +0200

    Use sysconfdir.


 Makefile.am |    3 ++-
 conf.c      |    6 +++---
 2 files changed, 5 insertions(+), 4 deletions(-)



commit 69cf22cc7a65ee4251e5d98f505e473490f35536
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sat Jun 2 21:46:07 2007 +0200

    Added YUV palette support.
    
    CorePalette has a second array for YUV entries.
    
    Added IDirectFBPalette::SetEntriesYUV(), GetEntriesYUV() and FindBestMatchYUV().
    
    Either of the APIs can be used, both arrays are kept synchronized.
    
    Drivers can choose.


 include/directfb.h             |   53 +++++++++++++++++++
 src/core/palette.c             |   23 ++++++++
 src/core/palette.h             |    1 
 src/display/idirectfbpalette.c |  111 ++++++++++++++++++++++++++++++++++++++---
 4 files changed, 180 insertions(+), 8 deletions(-)



commit 9c484e1679bdfa922d90d1d5feebc6b0106fdf89
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sat Jun 2 21:43:34 2007 +0200

    ARGB4444_TO_RGB32(pixel)


 convert.h |    5 +++++
 1 file changed, 5 insertions(+)



commit 92eb83fc571dc67d8994c58cb7b8efb18ad32b2f
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sat Jun 2 09:27:45 2007 +0200

    Fixed _fusion_reactor_process_message()'s usage of FUSION_REACTOR_DETACH.


 reactor.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit b1037357aacd70152895826c4b7ed48ea192a1ce
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jun 1 11:54:40 2007 +0200

    Single app core build fixes.


 call.c |    9 ++++++---
 ref.c  |    3 ++-
 2 files changed, 8 insertions(+), 4 deletions(-)



commit 40bb22a6fa39999074cb5d8b635ab6353c66f23d
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Fri Jun 1 09:55:46 2007 +0200

    Added timeout to fusion_skirmish_wait(), 0 means unlimited.


 lock.c  |   12 ++++++++++--
 lock.h  |    3 ++-
 types.h |    6 +++---
 3 files changed, 15 insertions(+), 6 deletions(-)



commit 269df8137fd06a51f4b388432bc8e395265bd1fa
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Thu May 31 17:24:47 2007 +0200

    Replaced dfb_wm_start_desktop() by dfb_wm_post_init().
    
    Removed StartDesktop which had no context pointers from WM API
    and added PostInit with proper context pointers.


 src/core/wm.c        |   27 +++++++++++----------------
 src/core/wm.h        |    8 ++++----
 src/core/wm_module.h |    7 ++++---
 src/directfb.c       |   25 ++-----------------------
 wm/default/default.c |   12 ++++++------
 wm/unique/unique.c   |   14 ++++++++------
 6 files changed, 35 insertions(+), 58 deletions(-)



commit 988f0e78899cd5b88983f3460436740c45f12f39
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed May 30 18:07:55 2007 +0200

    Added DWOP_KEEP_ABOVE and DWOP_KEEP_UNDER.


 directfb.h |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit ee262b3fca03b5aafefbd789b698181dd732f619
Merge: 41e5c47... 0d71e41...
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed May 30 10:01:58 2007 +0200

    Merge branch 'master' of ssh+git://git.directfb.org/git/directfb/core/DirectFB

commit 0d71e415412bbb21e6bed49bd41e32d421b254ca
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 23:10:23 2007 +0200

    Fixes for grayscale PNGs.

commit 67350f49d39c9c168575384279b1a92484c6e6f7
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:52:08 2007 +0200

    Added DFFA_FIXEDCLIP that can be used in addition to fixed advance
    and cuts off glyphs if they are wider than that.

commit bbbd47a34281d756218e6decea0a61844c0a97ea
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:50:28 2007 +0200

    Use direct_list_foreach_safe() for links as well.

commit d25b01b3a74021ba4ecf56219695c3251f4ea76f
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:48:16 2007 +0200

    Check for NULL type earlier.

commit dde7fa2a3bef0143334450641a5c11d524f75337
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:47:40 2007 +0200

    Added "[no-]madv-remove" to get around the auto detection.

commit 1f312b1091a5ef85089f685dfd0fcd7c56ada8ea
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:47:11 2007 +0200

    Added DFB_INCOMPLETE to stringification.

commit c90cd950116b20eb4dcdd0e60352cc91f8df0467
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:45:26 2007 +0200

    Avoid "unused warning" if debug domains are declared, but not used.

commit fb76d8e75e86a194e5b03a377950a33380c79850
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:44:03 2007 +0200

    Added DFB_INCOMPLETE and return it from image providers
    if rendering has been aborted by the render callback.

commit 8218b2a254a0fd4705fc47af35d0be41d73cd19c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:36:26 2007 +0200

    Image providers et al can access memory of memory based data buffers directly now.

commit 8e185ff671d3cd745e66c443c8a658e5d82e9936
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:35:13 2007 +0200

    Use CSLF_FORCE to lock a surface for software StretchBlit().
    
    Check CSLF_FORCE when locking "video-low" surface buffers for
    CPU access and pull buffer into system memory if set.

commit 8646db00b0c5cc7df8fc6430fd8a26660dc7c62a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:29:22 2007 +0200

    Cast to ulong, not u32, to align pointers.

commit 8fc54bcffcdb1dae57a878e1b9b735b336713170
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:24:59 2007 +0200

    Added IDirectFBSurface::SetRenderOptions() as a new state element, but not
    mandatory for graphics drivers. At the moment it's used by the software
    driver to choose smooth or standard scaling.
    
    Added smooth up/down scaling for RGB16.
    
    Added "smooth-upscale" and "smooth-downscale" options to choose a default.

commit 52bb513a1d63912bf67d28caebd97f5b2d888475
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:16:37 2007 +0200

    New option "surface-sentinel" to enable surface sentinels at the end of chunks in video memory.

commit 464e40e8feb90ead4eab2168252f644d71fb53f1
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:07:58 2007 +0200

    List buffers in video memory if "-s" is passed.

commit 48e8de5a110010b4656fc402edf0b18ffa518090
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:06:08 2007 +0200

    Explicit shutdown order of core parts and pools.

commit 8a8141d41681cacbed1eb667ad88ba07d842a660
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:01:55 2007 +0200

    Use a FusionRef as a lock counter.


 0 files changed



commit 41e5c4767107a8cd965617c680ad2c8cd3d9f498
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Wed May 30 09:58:51 2007 +0200

    Export dfb_config_parse_pixelformat().


 conf.c |    6 +++---
 conf.h |    2 ++
 2 files changed, 5 insertions(+), 3 deletions(-)



commit 0e9eba57d87a1e8d0f446de2daa65fc84617e879
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 23:21:30 2007 +0200

    Extend list of custom keys.


 directfb_keyboard.h |   94 ++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 92 insertions(+), 2 deletions(-)



commit 0d71e415412bbb21e6bed49bd41e32d421b254ca
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 23:10:23 2007 +0200

    Fixes for grayscale PNGs.


 idirectfbimageprovider_png.c |   85 +++++++++++++++++++++++++++----------------
 1 file changed, 55 insertions(+), 30 deletions(-)



commit 67350f49d39c9c168575384279b1a92484c6e6f7
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:52:08 2007 +0200

    Added DFFA_FIXEDCLIP that can be used in addition to fixed advance
    and cuts off glyphs if they are wider than that.


 include/directfb.h                           |    3 ++-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   18 ++++++++++++++++++
 2 files changed, 20 insertions(+), 1 deletion(-)



commit bbbd47a34281d756218e6decea0a61844c0a97ea
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:50:28 2007 +0200

    Use direct_list_foreach_safe() for links as well.


 reactor.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit d25b01b3a74021ba4ecf56219695c3251f4ea76f
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:48:16 2007 +0200

    Check for NULL type earlier.


 interface.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit dde7fa2a3bef0143334450641a5c11d524f75337
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:47:40 2007 +0200

    Added "[no-]madv-remove" to get around the auto detection.


 lib/fusion/conf.h   |    1 +
 lib/fusion/fusion.c |   37 +++++++++++++++++++++++--------------
 src/misc/conf.c     |    9 +++++++++
 3 files changed, 33 insertions(+), 14 deletions(-)



commit 1f312b1091a5ef85089f685dfd0fcd7c56ada8ea
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:47:11 2007 +0200

    Added DFB_INCOMPLETE to stringification.


 util.c |    2 ++
 1 file changed, 2 insertions(+)



commit c90cd950116b20eb4dcdd0e60352cc91f8df0467
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:45:26 2007 +0200

    Avoid "unused warning" if debug domains are declared, but not used.


 debug.h |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit fb76d8e75e86a194e5b03a377950a33380c79850
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:44:03 2007 +0200

    Added DFB_INCOMPLETE and return it from image providers
    if rendering has been aborted by the render callback.


 include/directfb.h                                              |    3 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   26 ++++++++--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |   21 +++++---
 3 files changed, 40 insertions(+), 10 deletions(-)



commit 8218b2a254a0fd4705fc47af35d0be41d73cd19c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:36:26 2007 +0200

    Image providers et al can access memory of memory based data buffers directly now.


 idirectfbdatabuffer.h        |   14 ++++++++++++++
 idirectfbdatabuffer_memory.c |   14 ++------------
 2 files changed, 16 insertions(+), 12 deletions(-)



commit 8e185ff671d3cd745e66c443c8a658e5d82e9936
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:35:13 2007 +0200

    Use CSLF_FORCE to lock a surface for software StretchBlit().
    
    Check CSLF_FORCE when locking "video-low" surface buffers for
    CPU access and pull buffer into system memory if set.


 core/surfaces.c       |    2 +-
 gfx/generic/generic.c |    7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)



commit 8646db00b0c5cc7df8fc6430fd8a26660dc7c62a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:29:22 2007 +0200

    Cast to ulong, not u32, to align pointers.


 stretch_hvx_rgb16.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8fc54bcffcdb1dae57a878e1b9b735b336713170
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:24:59 2007 +0200

    Added IDirectFBSurface::SetRenderOptions() as a new state element, but not
    mandatory for graphics drivers. At the moment it's used by the software
    driver to choose smooth or standard scaling.
    
    Added smooth up/down scaling for RGB16.
    
    Added "smooth-upscale" and "smooth-downscale" options to choose a default.


 include/directfb.h                  |   26 +++
 src/core/state.c                    |   13 +
 src/core/state.h                    |   11 +
 src/display/idirectfbsurface.c      |   15 ++
 src/gfx/generic/generic.c           |  116 ++++++++++++++++
 src/gfx/generic/stretch_hvx_rgb16.h |  253 ++++++++++++++++++++++++++++++++++++
 src/misc/conf.c                     |   14 +
 src/misc/conf.h                     |    2 
 8 files changed, 442 insertions(+), 8 deletions(-)



commit 52bb513a1d63912bf67d28caebd97f5b2d888475
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:16:37 2007 +0200

    New option "surface-sentinel" to enable surface sentinels at the end of chunks in video memory.


 core/surfacemanager.c |   14 ++++++++++++++
 core/surfaces.c       |   38 ++++++++++++++++++++++++++++++++++++++
 misc/conf.c           |    7 +++++++
 misc/conf.h           |    1 +
 4 files changed, 60 insertions(+)



commit 464e40e8feb90ead4eab2168252f644d71fb53f1
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:07:58 2007 +0200

    List buffers in video memory if "-s" is passed.


 dfbdump.c |   67 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 67 insertions(+)



commit 48e8de5a110010b4656fc402edf0b18ffa518090
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:06:08 2007 +0200

    Explicit shutdown order of core parts and pools.


 core.c |   34 ++++++++++++++++++++++++----------
 1 file changed, 24 insertions(+), 10 deletions(-)



commit 8a8141d41681cacbed1eb667ad88ba07d842a660
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 29 22:01:55 2007 +0200

    Use a FusionRef as a lock counter.


 core.h     |    2 -
 surfaces.c |   74 ++++++++++++++++++++++++++++++++++++++++++++++++++++---------
 surfaces.h |    2 +
 3 files changed, 67 insertions(+), 11 deletions(-)



commit 7982b09b68f45182d2b98ead917f8c9a831da31a
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 22:52:58 2007 +0200

    Added missing <sys/types.h> include.


 fusion.h |    2 ++
 1 file changed, 2 insertions(+)



commit 0496e6e3a38e01aa5b0fc07472a60776de9d0ffd
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 22:08:17 2007 +0200

    Added direct_thread_get_tid().


 thread.c |    8 ++++++++
 thread.h |    5 +++++
 2 files changed, 13 insertions(+)



commit 1a80a3bad8b8cbba34f8004fb67759b878483c5c
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 22:08:34 2007 +0200

    Added fusion_dispatcher_tid().


 fusion.c |   11 +++++++++++
 fusion.h |    5 +++++
 2 files changed, 16 insertions(+)



commit eea7bfaf9bc0cad1660ed6dea4989c1774f08564
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 19:49:49 2007 +0200

    Added fusion_skirmish_wait() and fusion_skirmish_notify().
    
    When you hold the lock you can wait until you get notified,
    where others can get the lock while you're waiting.
    
    At the moment it requires the notifier to acquire the lock.


 lock.c |   44 ++++++++++++++++++++++++++++++++++++++++++++
 lock.h |    7 +++++++
 2 files changed, 51 insertions(+)



commit a5f613e79af04a098f03b0d9614b9e2fbfe5f0ff
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 18:08:52 2007 +0200

    API break!
    
    Support destructor context pointer.
    
    Added "ctx" argument to fusion_object_pool_create().
    Added "ctx" argument to FusionObjectDestructor.


 lib/fusion/object.c      |    7 +++++--
 lib/fusion/object.h      |    3 ++-
 src/core/layer_context.c |    4 ++--
 src/core/layer_region.c  |    4 ++--
 src/core/palette.c       |    4 ++--
 src/core/surfaces.c      |    4 ++--
 src/core/windows.c       |    4 ++--
 wm/unique/context.c      |    4 ++--
 wm/unique/decoration.c   |    4 ++--
 wm/unique/window.c       |    4 ++--
 10 files changed, 23 insertions(+), 19 deletions(-)



commit 5984bb10163cff00318939c01251e9f5c3acd196
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 17:06:04 2007 +0200

    Keeps API compatibility.
    
    Added fusion_reactor_attach/dispatch_channel() with the older
    calls using channel zero.


 fusion.c          |    2 -
 fusion_internal.h |    1 
 object.h          |   24 ++++++++++++++++++
 reactor.c         |   71 +++++++++++++++++++++++++++++++++++++++++-------------
 reactor.h         |   41 +++++++++++++++++++++++--------
 types.h           |    6 ++--
 6 files changed, 114 insertions(+), 31 deletions(-)



commit 626ad855b335426e44da22f52a70f1c82a6a266b
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 14:33:51 2007 +0200

    Removed call_arg option from dispatch callback. It will be used for something else.


 lib/fusion/reactor.c   |    6 ++----
 lib/fusion/reactor.h   |    1 -
 tests/fusion_reactor.c |    2 +-
 3 files changed, 3 insertions(+), 6 deletions(-)



commit 4ba4f45f8db7e8b7a6145562e0ebfb9d08b3ed10
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 11:48:18 2007 +0200

    Follow FusionCall API changes.


 systems/fbdev/fbdev.c |   37 ++++++++++++++++++++++---------------
 systems/osx/primary.c |   24 +++++++++++++++---------
 systems/osx/primary.h |   13 +++++++++----
 systems/sdl/primary.c |   27 ++++++++++++++++-----------
 systems/sdl/primary.h |   13 +++++++++----
 systems/vnc/primary.c |   24 +++++++++++++++---------
 systems/vnc/primary.h |   13 +++++++++----
 systems/x11/primary.c |   26 +++++++++++++++-----------
 systems/x11/primary.h |   13 +++++++++----
 tests/fusion_stream.c |   16 ++++++++++------
 10 files changed, 129 insertions(+), 77 deletions(-)



commit 259d8890d3103da98c31b39499f6ee22930da9fa
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 10:46:00 2007 +0200

    API break!
    
    Changed call handler function type.
    
    +typedef enum {
    +     FCHR_RETURN,
    +     FCHR_RETAIN
    +} FusionCallHandlerResult;
    +
    +typedef FusionCallHandlerResult (*FusionCallHandler) (int           caller,   /* fusion id of the caller */
    +                                                      int           call_arg, /* optional call parameter */
    +                                                      void         *call_ptr, /* optional call parameter */
    +                                                      void         *ctx,      /* optional handler context */
    +                                                      unsigned int  serial,
    +                                                      int          *ret_val );
    
    The return value defines the library's behaviour after exiting from the handler.
    To return a value immediately, write to *ret_val and return FCHR_RETURN.
    
    If you want to make a call later on to fusion_call_return() yourself, use FCHR_RETAIN.
    
    The new serial value allows to have more than one call pending while calls can
    be returned in any order. The caller is still blocked on its single call, of course.
    
    +DirectResult fusion_call_return ( FusionCall          *call,
    +                                  unsigned int         serial,
    +                                  int                  val );


 lib/fusion/call.c      |   88 ++++++++++++++++++++++++++++++++++++++-----------
 lib/fusion/call.h      |   30 +++++++++++-----
 lib/fusion/object.c    |   18 +++++-----
 lib/fusion/types.h     |    8 ++--
 src/core/input.c       |   18 ++++++----
 tests/fusion_reactor.c |   14 ++++---
 6 files changed, 122 insertions(+), 54 deletions(-)



commit 04d8bd665987909eb07b37e77f51ff2361dc172a
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Mon May 28 10:36:00 2007 +0200

    Additionally check if SOPATH is defined when checking for DFB_DYNAMIC_LINKING
    to do a strange workaround which was needed at some point, but I don't remember
    and plan to remove this.


 core.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e1d40d341a808bdd9112a4fad06f69bd58b5f14b
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sun May 27 12:05:45 2007 +0200

    Added fusion_reactor_set_dispatch_callback() with a test.


 lib/fusion/reactor.c   |   39 +++++++++++++++++++++++++++++++++++
 lib/fusion/reactor.h   |   10 +++++++++
 tests/fusion_reactor.c |   54 +++++++++++++++++++++++++++++++++++++------------
 3 files changed, 90 insertions(+), 13 deletions(-)



commit 98020fc92d03026bde70772bfe01634b8bce9e3b
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Sun May 27 12:05:27 2007 +0200

    Fix zero FusionID in forked process by entering the world after reopening it.


 fusion.c |   27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)



commit 4b253a59842f91db228924d579423594258e0950
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 27 10:07:44 2007 +0200

    Removed limit of 8x8 surfaces:
    apparently it comes from the Rage128 driver but it doesn't apply to Radeon(s).


 radeon.c |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit 8a1f12ee0e8273a36db3b8825edc5cf56fb2f3bc
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed May 23 23:16:08 2007 +0300

    matrox: Add RGB444 and RGB555 support.


 matrox.c       |   16 ++++++++++++++++
 matrox_bes.c   |    3 +++
 matrox_crtc2.c |    3 +++
 matrox_state.c |   16 ++++++++++++++++
 4 files changed, 38 insertions(+)



commit e467eba04f4776ada3c95888b094cde04876f87d
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed May 23 22:23:36 2007 +0300

    mach64: Add RGB444 and RGB555 support.


 mach64.c         |    5 +++++
 mach64_overlay.c |    7 +++++++
 mach64_state.c   |   20 ++++++++++++++++++++
 3 files changed, 32 insertions(+)



commit dfb1d44c61e614974725b48470a3920092d5b1eb
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Wed May 23 22:30:29 2007 +0300

    Plug a memory leak in the PNG image provider.
    
    Thanks to Eugene Everson.


 README                                                         |    1 +
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |    2 ++
 2 files changed, 3 insertions(+)



commit f33776a36ad561d40ede15bb565f91468f05007c
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 22 22:50:13 2007 +0200

    Fix code that controls single/double buffer window
    
    creation for primary surfaces in windowed mode. If
    DSCAPS_FLIPPING is set, it uses one buffer which
    already requires a Flip due to the window. Only if
    DOUBLE is set explicitly, create two buffers.


 idirectfb.c |   20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)



commit c91b87c6cab9e6071b9d7fe7cce0d3399acb2e18
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue May 22 17:54:17 2007 +0200

    Reverted default border mode to CLAMP_LAST.


 r100_state.c |   15 ++++-----------
 r200_state.c |   15 ++++-----------
 r300_state.c |   21 +++++++--------------
 radeon.c     |    6 +++---
 4 files changed, 18 insertions(+), 39 deletions(-)



commit 1822b835b992367da001d2c4292b0f3c15ee72fa
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 22 13:02:12 2007 +0200

    Added advanced window geometry for positioning and scaling of windows
    relative to their own bounds, with ability derive from parent geometry.
    
    DFBWindowGeometryMode: DWGM_DEFAULT, DWGM_FOLLOW, DWGM_RECTANGLE, DWGM_LOCATION.
    DFBWindowGeometry: mode, rectangle, location.
    
    IDirectFBWindow::SetSrcGeometry() and IDirectFBWindow::SetDstGeometry().
    
    Added generic dfb_window_set_config() for simplifying core code and moving
    config handling into interfaces.


 include/directfb.h            |   37 ++++++++++++++++++
 src/core/windows.c            |   26 +++++++++++++
 src/core/windows.h            |   16 +++++++-
 src/windows/idirectfbwindow.c |   82 ++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 160 insertions(+), 1 deletion(-)



commit d82a8e129b09a38e6cc8f966bdd6e2baf2709303
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 22 12:49:55 2007 +0200

    New layer configuration system, staying compatible with older options:
    
      init-layer=<id>                Initialize layer with ID (following layer- options apply)
      layer-size=<width>x<height>    Set the pixel resolution
      layer-format=<pixelformat>     Set the pixel format
      layer-depth=<pixeldepth>       Set the pixel depth
      layer-buffer-mode=(auto|triple|backvideo|backsystem|frontonly|windows)
      layer-bg-none                  Disable background clear
      layer-bg-color=AARRGGBB        Use background color (hex)
      layer-bg-image=<filename>      Use background image
      layer-bg-tile=<filename>       Use tiled background image
      layer-src-key=AARRGGBB         Enable color keying (hex)


 core/layer_region.c |   16 +-
 core/layers.c       |    8 +
 core/layers.h       |    2 
 directfb.c          |  164 -------------------------
 idirectfb.c         |  198 ++++++++++++++++++++++++++++++-
 idirectfb.h         |    6 
 misc/conf.c         |  330 +++++++++++++++++++++++++++++++++++++---------------
 misc/conf.h         |   28 +++-
 8 files changed, 476 insertions(+), 276 deletions(-)



commit cd983756cf48cc5adc54eeaf17a5ca606c4ec4fb
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 22 12:34:42 2007 +0200

    igittigit


 .gitignore                                         |   39 +++++++++++++++++++++
 data/.gitignore                                    |    2 +
 docs/.gitignore                                    |    8 ++++
 docs/html/.gitignore                               |    4 ++
 gfxdrivers/.gitignore                              |    6 +++
 gfxdrivers/ati128/.gitignore                       |    6 +++
 gfxdrivers/cle266/.gitignore                       |    6 +++
 gfxdrivers/cyber5k/.gitignore                      |    6 +++
 gfxdrivers/i810/.gitignore                         |    6 +++
 gfxdrivers/i830/.gitignore                         |    6 +++
 gfxdrivers/mach64/.gitignore                       |    6 +++
 gfxdrivers/matrox/.gitignore                       |    6 +++
 gfxdrivers/neomagic/.gitignore                     |    6 +++
 gfxdrivers/nsc/.gitignore                          |    6 +++
 gfxdrivers/nsc/include/.gitignore                  |    6 +++
 gfxdrivers/nvidia/.gitignore                       |    6 +++
 gfxdrivers/radeon/.gitignore                       |    6 +++
 gfxdrivers/savage/.gitignore                       |    6 +++
 gfxdrivers/sis315/.gitignore                       |    6 +++
 gfxdrivers/tdfx/.gitignore                         |    6 +++
 gfxdrivers/unichrome/.gitignore                    |    6 +++
 include/.gitignore                                 |    6 +++
 inputdrivers/.gitignore                            |    6 +++
 inputdrivers/dbox2remote/.gitignore                |    6 +++
 inputdrivers/dreamboxremote/.gitignore             |    6 +++
 inputdrivers/dynapro/.gitignore                    |    6 +++
 inputdrivers/elo/.gitignore                        |    6 +++
 inputdrivers/gunze/.gitignore                      |    6 +++
 inputdrivers/h3600_ts/.gitignore                   |    6 +++
 inputdrivers/joystick/.gitignore                   |    6 +++
 inputdrivers/keyboard/.gitignore                   |    6 +++
 inputdrivers/linux_input/.gitignore                |    6 +++
 inputdrivers/lirc/.gitignore                       |    6 +++
 inputdrivers/mutouch/.gitignore                    |    6 +++
 inputdrivers/penmount/.gitignore                   |    6 +++
 inputdrivers/ps2mouse/.gitignore                   |    6 +++
 inputdrivers/serialmouse/.gitignore                |    6 +++
 inputdrivers/sonypi/.gitignore                     |    6 +++
 inputdrivers/tslib/.gitignore                      |    6 +++
 inputdrivers/ucb1x00_ts/.gitignore                 |    6 +++
 inputdrivers/wm97xx_ts/.gitignore                  |    6 +++
 interfaces/.gitignore                              |    3 +
 interfaces/IDirectFBFont/.gitignore                |    6 +++
 interfaces/IDirectFBImageProvider/.gitignore       |    6 +++
 interfaces/IDirectFBImageProvider/mpeg2/.gitignore |    6 +++
 interfaces/IDirectFBVideoProvider/.gitignore       |    6 +++
 lib/.gitignore                                     |    2 +
 lib/direct/.gitignore                              |   10 +++++
 lib/fusion/.gitignore                              |    8 ++++
 lib/fusion/shm/.gitignore                          |    6 +++
 lib/voodoo/.gitignore                              |    8 ++++
 patches/.gitignore                                 |    2 +
 proxy/.gitignore                                   |    2 +
 proxy/dispatcher/.gitignore                        |    6 +++
 proxy/requestor/.gitignore                         |    6 +++
 rules/.gitignore                                   |    2 +
 src/.gitignore                                     |    6 +++
 src/core/.gitignore                                |    6 +++
 src/display/.gitignore                             |    6 +++
 src/gfx/.gitignore                                 |    6 +++
 src/gfx/generic/.gitignore                         |    8 ++++
 src/input/.gitignore                               |    6 +++
 src/media/.gitignore                               |    6 +++
 src/misc/.gitignore                                |    6 +++
 src/windows/.gitignore                             |    6 +++
 systems/.gitignore                                 |    2 +
 systems/fbdev/.gitignore                           |    6 +++
 systems/osx/.gitignore                             |    6 +++
 systems/sdl/.gitignore                             |    6 +++
 systems/vnc/.gitignore                             |    6 +++
 systems/x11/.gitignore                             |    6 +++
 tests/.gitignore                                   |    8 ++++
 tools/.gitignore                                   |   22 +++++++++++
 wm/.gitignore                                      |    2 +
 wm/default/.gitignore                              |    6 +++
 wm/unique/.gitignore                               |   11 +++++
 wm/unique/classes/.gitignore                       |    6 +++
 wm/unique/data/.gitignore                          |    7 +++
 wm/unique/devices/.gitignore                       |    6 +++
 79 files changed, 510 insertions(+)



commit 8f5294201ad2e15c566563dfd544816bef601378
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon May 21 21:16:44 2007 +0200

    Set texture border mode to CLAMP_TO_BORDER when using TextureTriangles()
    (for compatibility with Xrender/Cairo).


 r100_state.c  |   26 +++++++++++++++++---------
 r200_state.c  |   28 ++++++++++++++++++----------
 r300_state.c  |   20 ++++++++++++++------
 radeon.c      |    6 +++---
 radeon_regs.h |    2 ++
 5 files changed, 54 insertions(+), 28 deletions(-)



commit 05b15944eb91f14a7dacdc37fc6eed13e3e2983a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat May 19 10:44:12 2007 +0200

    RGB555 support.


 radeon_crtc2.c   |   13 ++++++++-----
 radeon_overlay.c |    9 ++++++---
 2 files changed, 14 insertions(+), 8 deletions(-)



commit 0ab0c8406252846113496a0ed4fcc75f6eccdde5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue May 15 21:24:28 2007 +0200

    Workaround to make forked processes work with fusion:
    if the master forks, release shared memory only when the child exits.


 fusion.c          |   30 ++++++++++++++++++++++++++----
 fusion_internal.h |    1 +
 2 files changed, 27 insertions(+), 4 deletions(-)



commit 130e091f281f290d10a7117a0bb6c512e611bf82
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon May 14 17:26:33 2007 +0200

    Support RGB555 and RGB444.


 r100_state.c  |   45 ++++++++++++++++++++-------------
 r200_state.c  |   41 +++++++++++++++++++-----------
 r300_state.c  |   78 +++++++++++++++++++++++++++++++++-------------------------
 radeon.c      |   12 ++++++++
 radeon_regs.h |    2 +
 5 files changed, 113 insertions(+), 65 deletions(-)



commit 4edc1b1e122742d9b764ef92de97b4cbed014356
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon May 14 14:59:43 2007 +0200

    Optimizations again.


 nvidia.c       |   25 ++++++++++++++++---------
 nvidia_state.c |   47 +++++++++++++++++++++++++----------------------
 2 files changed, 41 insertions(+), 31 deletions(-)



commit 6dccd0b712e9e8aef9e8acbf786231a0e02fe951
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 19:17:51 2007 +0200

    Fixed previous commit (missing some switches).


 nvidia_state.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 7b95216119505437aee894b15a76ee065405f822
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 19:12:59 2007 +0200

    Added support for RGB555.


 nvidia.c       |   12 ++++++++++-
 nvidia_state.c |   60 ++++++++++++++++++++++++++++++++++++++-------------------
 2 files changed, 51 insertions(+), 21 deletions(-)



commit 175996969fa3d1c159d81f3d297691ea78e98b03
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 18:49:23 2007 +0200

    Made DisableAcceleration( DFXL_DRAWSTRING ) work.


 gfxcard.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit a949dea3a711e26bd16bdaf1b60e7a66f675a57e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 17:27:07 2007 +0200

    Still optimizations.


 nvidia_overlay.c |  134 +++++++++++++++++++++++++++++--------------------------
 1 file changed, 72 insertions(+), 62 deletions(-)



commit 79dba40188d55587dee815b29fbc8aecd72d6b6b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 16:28:02 2007 +0200

    Optimizations.


 nvidia_overlay.c |   96 ++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 57 insertions(+), 39 deletions(-)



commit 7dfb4e14a2235945e4fbe1f54e722f925a521591
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 15:27:07 2007 +0200

    Optimizations and cleanup.


 nvidia.c       |   33 +++++++++++++++++-------------
 nvidia_state.c |   61 ++++++++++++++++++++++-----------------------------------
 2 files changed, 43 insertions(+), 51 deletions(-)



commit 6f1c7ee42abeb6c341bf294d4da8fa74f9d1e62e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun May 13 11:25:51 2007 +0200

    Fixed support for premultiplied surfaces.
    Dropped down blits from system memory on the NV20 (crashes on Xbox).


 nvidia.c       |   35 +++++++++++++++--------------------
 nvidia_state.c |   52 +++++++++++++++++++++++++++++++++++-----------------
 2 files changed, 50 insertions(+), 37 deletions(-)



commit d6ec7e5f66faec146df5c279ab6f2e0a66acce13
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 8 22:58:44 2007 +0200

    Added DWDESC_OPTIONS and DWDESC_STACKING to give initial values in the
    DFBWindowDescription using the new fields 'options' and 'stacking'.
    
    Added DWDESC_PARENT to DFBWindowDescriptionFlags and 'parent_id' to
    DFBWindowDescription. This can be used to associate a window to another,
    but it's up to the WM to implement it. In SaWMan this makes the window
    cover exactly the area of the parent window including scaling if needed.
    Associated windows do not get focus or events themselves, but their parent.
    
    Added IDirectFBWindow::SetKeySelection() that selects a mode for filtering
    keys while being focused. The selection defines whether all, none or a
    specific set (list) of keys is selected.
    
    Added DFBWindowKeySelection featuring DWKS_ALL, DWKS_NONE and DWKS_LIST.
    
    Added IDirectFBWindow::GrabUnselectedKeys() and UngrabUnselectedKeys()
    to have a key collector window receiving all keys that the focused
    window did not select.
    
    Added DFBWindowEventFlags featuring DWEF_RETURNED so far, which means that
    the event has been returned, i.e. has not been consumed by the original
    recipient. The DFBWindowEvent field 'flags' has also been added.
    
    Simplified internal dfb_layer_context_create_window() and dfb_window_create()
    and replaced dfb_window_*grab*() by dfb_window_change_grab().
    
    Changed IDirectFB::CreateSurface() behaviour: For primary surfaces in
    windowed mode, only create a window with two buffers if DSCAPS_DOUBLE
    is set, but not DSCAPS_FLIPPING.
    
    Added DWDESC_PARENT to DFBWindowDescriptionFlags and 'parent_id' to
    DFBWindowDescription. This can be used to associate a window to another,
    but it's up to the WM to implement it. In SaWMan this makes the window
    cover exactly the area of the parent window including scaling if needed.


 include/directfb.h                  |  155 +++++++++++++++++++++--------
 src/core/layer_context.c            |   18 +--
 src/core/layer_context.h            |   14 --
 src/core/windows.c                  |  187 ++++++++++++++----------------------
 src/core/windows.h                  |   70 +++++++------
 src/core/windows_internal.h         |    2 
 src/core/wm.c                       |   12 +-
 src/core/wm.h                       |    6 -
 src/display/idirectfbdisplaylayer.c |   63 +++++++-----
 src/idirectfb.c                     |   33 +++---
 src/windows/idirectfbwindow.c       |   65 ++++++++++--
 wm/default/default.c                |  121 +++++++++++++++++++++++
 12 files changed, 479 insertions(+), 267 deletions(-)



commit 1fa85033db594e51e811307775ceaa4b1eee882a
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 8 19:46:09 2007 +0200

    Only use FBDev systme module data in linux input driver if system is built.


 configure.in                           |    4 ++++
 inputdrivers/linux_input/linux_input.c |   14 ++++++++++++++
 2 files changed, 18 insertions(+)



commit 24b48dad33f667887addf612238f446012f05b54
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 8 17:52:13 2007 +0200

    gcc 2.95 fixes


 idirectfb.c                  |    4 ++--
 input/idirectfbinputbuffer.c |   16 ++++++++--------
 2 files changed, 10 insertions(+), 10 deletions(-)



commit d22702f8fb2b31fd67e6586022a7b00bee5625b3
Author: Denis Oliver Kropp <dok@shizo.zion.home>
Date:   Tue May 8 17:37:06 2007 +0200

    Sorted format_strings[].


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 33bf1df595d7392e626cc30bcdd531dbc7173b16
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue May 8 17:21:56 2007 +0200

    RGB444 and RGB555, thanks to Daniel J Laird!


 README                    |    2 
 include/directfb.h        |   10 +++-
 src/core/surfaces.c       |   19 +++++++
 src/gfx/convert.c         |   12 ++++
 src/gfx/convert.h         |   40 ++++++++++++++++
 src/gfx/generic/generic.c |  112 ++++++++++++++++++++++++++++++++++++++++++++--
 src/idirectfb.c           |    2 
 src/misc/conf.c           |    4 +
 src/misc/gfx_util.c       |   10 ++++
 systems/fbdev/fbdev.c     |   57 ++++++++++++++++++-----
 wm/default/default.c      |    8 +++
 11 files changed, 256 insertions(+), 20 deletions(-)



commit bbc5ef93f0fb97e7a9df9bf29c5b04d6cff5d890
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue May 8 16:51:50 2007 +0200

    gcc-2.95 fix


 lock.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 5bd55fa674304859b9dade0849ec0cc6cfb708d3
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue May 8 16:48:07 2007 +0200

    Removed obsolete warning.


 idirectfbimageprovider_png.c |    2 --
 1 file changed, 2 deletions(-)



commit 692d8f9ffa334f41b28bd27c81e7daaf50da40ea
Author: Denis Oliver Kropp <dok@shizo.(none)>
Date:   Tue May 8 16:06:31 2007 +0200

    1.1.0


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2797c2cc4b15e0e94b9dbab6221f9c536b175ac5
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue May 8 03:01:31 2007 +0300

    Pan the layer to follow the mouse cursor (aka. virtual resolution).


 default.c |   14 ++++++++++++++
 1 file changed, 14 insertions(+)



commit 6cde04843dfdbe77b09bc4bc5b56305140b6687c
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Tue May 8 02:59:18 2007 +0300

    Add source rectangle support to fbdev layer.


 fbdev.c |  130 +++++++++++++++++++++++++++++++++++++++++++++++++---------------
 fbdev.h |    4 +
 2 files changed, 105 insertions(+), 29 deletions(-)



commit 9d6fa50384abdce554d4ae54d548865f74b9f2f1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 24 17:11:58 2007 +0200

    Fixed a segfault when freeing reactor nodes.


 reactor.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 6904ef61213633cbbc3b789bbe8fcdca4c2ff87c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Apr 23 19:03:29 2007 +0200

    Clarified some aspects about the behaviour of IDirectFBWindow::Bind().


 directfb.h |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit f7abc96cc2fcee72fd35e7ec4220f05a389b9fd4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Apr 23 16:45:32 2007 +0200

    Implemented IDirectFBWindow::Bind()/Unbind(). :)
    
    The change is backward and binary compatible.


 include/directfb.h            |   25 +++++
 src/core/windows.c            |  200 +++++++++++++++++++++++++++++++++++++++---
 src/core/windows.h            |   16 +++
 src/core/windows_internal.h   |   12 ++
 src/windows/idirectfbwindow.c |   42 ++++++++
 5 files changed, 283 insertions(+), 12 deletions(-)



commit 2735a9544c999369a5000324dbdd550c7c276268
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Sun Apr 8 02:09:39 2007 +0300

    Use D_ARRAY_SIZE() macro where appropriate.


 gfxdrivers/radeon/radeon.c             |    2 +-
 inputdrivers/linux_input/linux_input.c |    4 ++--
 inputdrivers/lirc/lirc.c               |    5 +++--
 lib/direct/signals.c                   |    2 +-
 lib/direct/stream.c                    |    2 +-
 lib/fusion/hash.c                      |    3 ++-
 tools/directfb-csource.c               |    2 +-
 7 files changed, 11 insertions(+), 9 deletions(-)



commit 47d97462a08240236683b4cc3aa77c66bd8ca241
Author: Ville Syrjala <syrjala@sci.fi>
Date:   Thu Apr 12 02:49:39 2007 +0300

    Fix evdev ioctl() parameters.


 linux_input.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit a7d95847288c8c490c4ea4d60e973e2838e5ac2c
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Wed Apr 11 16:13:42 2007 +0200

    Previously, in dfb_thread_destroy() if a thread is neither
    detached not joined, it was just canceled and the struct was
    freed, magic cleared etc.
    
    To avoid an assertion in the cleanup handler of the thread,
    detach it before canceling, don't free its struct etc.


 thread.c |    5 +++++
 1 file changed, 5 insertions(+)



commit db515696b39af71bea30e09d2fd48a1040addd0b
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Wed Apr 11 16:04:37 2007 +0200

    Misc debug messages.


 arena.c  |    9 ++++++---
 fusion.c |   15 +++++++++++++--
 2 files changed, 19 insertions(+), 5 deletions(-)



commit 6299a9a345d38f9b94e6b82d415dbd4554745e15
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Wed Apr 11 16:02:01 2007 +0200

    Fix copy'n'paste error that caused values to be freed if keys should be.


 hash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f76465a11cd72af4dfbbe48f1ed9ec4abc67b045
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Wed Apr 11 16:00:12 2007 +0200

    Fix (un)locking.


 arena.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)



commit e286be1d7ff4149e6ee6b710e6f26d9077182a95
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Mon Apr 2 09:31:33 2007 +0200

    Fixed false assertions...


 state.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 7796a5e3a8b1235f1e78fae540837198858acbcd
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Sun Apr 1 15:32:40 2007 +0200

    Validate clip in dfb_state_update() also if destination
    was just set manually, not via dfb_state_set_destination().


 state.c |   23 +++++++++++++++++------
 1 file changed, 17 insertions(+), 6 deletions(-)



commit d44db9c74b717ae9b7edb51cfd684dc4b88d5c15
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Sat Mar 31 16:36:06 2007 +0200

    Thanks to Thanks to sridewa #sridewa gmail.com#!


 README |    1 +
 1 file changed, 1 insertion(+)



commit 2645d66bd67746e970741839f9d4ec11a9c2c5a6
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Wed Mar 28 12:07:42 2007 +0200

    Clear header structure before (partially) filling it,
    to avoid leaking data from stack into file.
    
    Turn on memory allocation debugging.


 mkdgiff.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit c569762cef58f40fbee123fd5b7ddbd64a813a07
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Sat Mar 24 22:35:31 2007 +0100

    Added missing pthread_rwlock_destroy().


 reactor.c |    1 +
 1 file changed, 1 insertion(+)



commit 330450df944b491bef4d0c49f8567f8f3cc41be9
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Sat Mar 24 12:25:11 2007 +0100

    Fix general dead lock problem with reactors.
    
    - Replace mutex by read/write lock.
    - Write lock during attach/detach()
    - Read lock during dispatch()
    - Only remove reactions from node if write lock is held.
    - Don't link reactions into the node, but allocate an extra link structure, to avoid accessing foreign and probably deallocated memory.
    - In dispatch() if reaction returns RS_REMOVE, just mark the link as dead and don't write to reaction structure, which might be deallocated by the reaction handler.
    - More changes, even more details...


 reactor.c |  182 +++++++++++++++++++++++++++++++++++++++++++++++---------------
 reactor.h |    2 
 2 files changed, 141 insertions(+), 43 deletions(-)



commit fcc80bc32ebf455329130d648e70336e3f3d9b5a
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Fri Mar 23 16:21:44 2007 +0100

    Use FusionHash for arena fields.
    
    Avoids multiple fields with the same name and just replaces the value.
    
    Should also be a faster for arenas with more than three or four fields.
    
    Minor code cleanup in lock_arena().
    
    Added debug domain and messages.


 arena.c |  234 ++++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 118 insertions(+), 116 deletions(-)



commit 7711a22301ebf93904fb3997cba09f5b5e6fe7e8
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Fri Mar 23 16:18:02 2007 +0100

    Added fusion_hash_set_autofree() to enable/disable
    automatic freeing of values and/or keys.


 hash.c |   48 ++++++++++++++++++++++++++++++++----------------
 hash.h |    6 ++++++
 2 files changed, 38 insertions(+), 16 deletions(-)



commit 3663b176f629e2487bc32095dc3c3a9591a1f681
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Fri Mar 23 16:11:41 2007 +0100

    Reinitialize entries in static pool array properly.
    
    Added debug domain and messages to SHMALLOC and friends.


 shm/pool.c |    8 ++++++++
 shmalloc.c |   30 ++++++++++++++++++++++++------
 2 files changed, 32 insertions(+), 6 deletions(-)



commit 0a6c3fd384db48d679f274b31f21fb03db08812e
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Fri Mar 23 15:54:42 2007 +0100

    Fix typo in error message.


 idirectfbimageprovider_png.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c3b24b2df174cdb029d50485c9aed75a62555736
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Fri Mar 23 15:46:30 2007 +0100

    Close file descriptor of shared memory files and be happy with just the
    static mmap() and the filename for using truncate() instead of ftruncate().
    
    
    via git-CVS emulator


 heap.c |   14 +++++++++++---
 pool.c |    4 ++--
 2 files changed, 13 insertions(+), 5 deletions(-)



commit d3a576aef5806c82576abdd8ec936dd0f6832d29
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Fri Mar 23 15:40:11 2007 +0100

    Added direct_thread_detach() and direct_thread_is_detached().
    
    Use pthread cleanup to free the DirectThread structure etc.
    
    
    via git-CVS emulator


 thread.c |   56 +++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 thread.h |   10 ++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)



commit 3fcc94f1f0964fc19d5e228ba4df8a67d1501090
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Fri Mar 23 15:03:59 2007 +0100

    Fix ARGB on RGB16 blending. Use Duff's Device and optimize for 0% and 100% opaque.
    
    
    via git-CVS emulator


 generic.c |   37 +++++++++++++++++++++++--------------
 1 file changed, 23 insertions(+), 14 deletions(-)



commit 8ce787dedf27a17394b73e94a9e0c832593b3260
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Thu Mar 22 11:31:20 2007 +0100

    Fixed RGB24 to RGB16 conversion.
    
    
    via git-CVS emulator


 generic.c |   17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)



commit 848cfefef00b738d736ceac287001da1141de9a5
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Wed Mar 21 00:36:28 2007 +0100

    Use setjmp() before having libpng trying the longjmp().
    This avoids the unwanted abort().
    
    
    via git-CVS emulator


 idirectfbimageprovider_png.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 22779946a4f70a31f8d79be3bac96b635ad5d338
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 18:30:21 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit d2038767ceaab5c746d73c2ff31d753a632f9bd3
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 18:18:55 2007 +0100

    test


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit e1d02c08381e753e2c15106f492f166fe0c525c6
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 18:16:27 2007 +0100

    test


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit 0c7afb4c46387e001cebc9bd68a085965f1d2f29
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 18:12:25 2007 +0100

    test


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit 175927a7e63be7d6e111fa1677fb88f12704ca6b
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 18:10:08 2007 +0100

    Test


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit c70d1312b75d47991e9aeab733aa98b645e67ff7
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 18:02:47 2007 +0100

    test


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit 70f47b5508245a501487fe194d3149d6a924b014
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Tue Mar 20 17:52:43 2007 +0100

    Test


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit f511fe426936a2131835d7efc7c48fb33b372f88
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 17:43:58 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit 8f03a4f0485a1f1160b014fcc7ac4357b46189fa
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 17:42:24 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit bd60a241b6a71be7f7649d8531b7be10a4e77c65
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 17:40:36 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit ddb706580c35327cabdaeae85850c0287694ca16
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 17:38:47 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit 5132c7082d36e19ade81cc9b2fc6874947dd125b
Author: Denis Oliver Kropp <dok@www.directfb.org>
Date:   Tue Mar 20 17:34:33 2007 +0100

    Test
    
    via git-CVS emulator


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit 7750c66985bc64958e10055245d662777f61b6e6
Author: Denis Oliver Kropp <dok@shizo.localdomain>
Date:   Sat Mar 17 00:02:28 2007 +0100

    Revert to old format.


 mkchlog |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit be496f6044188236a2b52859f3d0cccabb96dd4b
Author: Mark Adams <marka@directfb.org>
Date:   Wed Mar 7 10:39:49 2007 +0000

    Fix blitting of planar surfaces (YV12/I420) when a source rectangle is used
    or the source and destination surfaces are different sizes.


 uc_accel.c  |    8 ++++----
 uc_hwset.c  |    7 ++++++-
 unichrome.h |    2 ++
 3 files changed, 12 insertions(+), 5 deletions(-)



commit e7d1e212ec250cd9f8ae43fc2c79b904f6208278
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 4 01:05:28 2007 +0000

    hotfix


 surfacemanager.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 8fbcdaeb947cd5fac4d09e3a76ce2a5322210586
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 23:08:04 2007 +0000

    updated


 ChangeLog |  722 +++++++++++++++++++++++++++++++++++++++++++++++---------------
 NEWS      |   13 +
 TODO      |    7 
 3 files changed, 567 insertions(+), 175 deletions(-)



commit affa1214d3097c2834a4407e98e71c908751fbf8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 22:46:13 2007 +0000

    1.0.0


 configure.in   |    2 +-
 src/directfb.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit b595995119c8fa9fca93c278cc3c90a837f44546
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 21:53:44 2007 +0000

    Fix type punn-ishment.


 dispatcher/idirectfb_dispatcher.c            |   13 ++++++++-----
 dispatcher/idirectfbinputdevice_dispatcher.c |   14 ++++++++++----
 dispatcher/idirectfbwindow_dispatcher.c      |   14 ++++++++++----
 requestor/idirectfb_requestor.c              |   15 +++++++++++----
 requestor/idirectfbinputdevice_requestor.c   |    5 ++++-
 requestor/idirectfbwindow_requestor.c        |    5 ++++-
 6 files changed, 47 insertions(+), 19 deletions(-)



commit e46da95536009730b0d26c8462f0c322efd918df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 20:53:51 2007 +0000

    Updated copyright information.


 README                                                           |   13 ++-
 gfxdrivers/ati128/ati128.c                                       |    9 +-
 gfxdrivers/ati128/ati128.h                                       |    9 +-
 gfxdrivers/ati128/ati128_overlay.c                               |    9 +-
 gfxdrivers/ati128/ati128_state.c                                 |    9 +-
 gfxdrivers/ati128/ati128_state.h                                 |    9 +-
 gfxdrivers/ati128/mmio.h                                         |    9 +-
 gfxdrivers/ati128/regs.h                                         |   27 -------
 gfxdrivers/cle266/uc_primary.c                                   |   10 +-
 gfxdrivers/cyber5k/cyber5k.c                                     |    9 +-
 gfxdrivers/cyber5k/cyber5k.h                                     |    9 +-
 gfxdrivers/cyber5k/cyber5k_alpha.c                               |   11 +--
 gfxdrivers/cyber5k/cyber5k_alpha.h                               |    9 +-
 gfxdrivers/cyber5k/cyber5k_overlay.c                             |    9 +-
 gfxdrivers/cyber5k/cyber5k_overlay.h                             |    9 +-
 gfxdrivers/cyber5k/cyber5k_underlay.c                            |    9 +-
 gfxdrivers/cyber5k/mmio.h                                        |    9 +-
 gfxdrivers/cyber5k/regs.h                                        |   27 -------
 gfxdrivers/i810/i810.c                                           |    4 -
 gfxdrivers/i810/i810.h                                           |    6 +
 gfxdrivers/i810/i810_overlay.c                                   |    6 +
 gfxdrivers/mach64/mach64.c                                       |    9 +-
 gfxdrivers/mach64/mach64.h                                       |    9 +-
 gfxdrivers/mach64/mach64_overlay.c                               |    9 +-
 gfxdrivers/mach64/mach64_state.c                                 |    9 +-
 gfxdrivers/mach64/mach64_state.h                                 |    9 +-
 gfxdrivers/mach64/mmio.h                                         |    9 +-
 gfxdrivers/mach64/regs.h                                         |   27 -------
 gfxdrivers/matrox/matrox.c                                       |    9 +-
 gfxdrivers/matrox/matrox.h                                       |    9 +-
 gfxdrivers/matrox/matrox_3d.c                                    |    9 +-
 gfxdrivers/matrox/matrox_3d.h                                    |    9 +-
 gfxdrivers/matrox/matrox_bes.c                                   |    9 +-
 gfxdrivers/matrox/matrox_crtc2.c                                 |    9 +-
 gfxdrivers/matrox/matrox_screen_crtc2.c                          |    9 +-
 gfxdrivers/matrox/matrox_spic.c                                  |    9 +-
 gfxdrivers/matrox/matrox_state.c                                 |    9 +-
 gfxdrivers/matrox/matrox_state.h                                 |    9 +-
 gfxdrivers/matrox/mmio.h                                         |    9 +-
 gfxdrivers/matrox/regs.h                                         |   27 -------
 gfxdrivers/neomagic/neo2200.c                                    |    9 +-
 gfxdrivers/neomagic/neo_overlay.c                                |    9 +-
 gfxdrivers/neomagic/neomagic.c                                   |    9 +-
 gfxdrivers/neomagic/neomagic.h                                   |    9 +-
 gfxdrivers/nvidia/nvidia.c                                       |    6 -
 gfxdrivers/nvidia/nvidia.h                                       |    6 -
 gfxdrivers/nvidia/nvidia_2d.c                                    |    6 -
 gfxdrivers/nvidia/nvidia_2d.h                                    |    6 -
 gfxdrivers/nvidia/nvidia_accel.h                                 |    6 -
 gfxdrivers/nvidia/nvidia_objects.h                               |    4 -
 gfxdrivers/nvidia/nvidia_regs.h                                  |   28 -------
 gfxdrivers/nvidia/nvidia_state.c                                 |    6 -
 gfxdrivers/nvidia/nvidia_state.h                                 |    6 -
 gfxdrivers/savage/mmio.h                                         |   12 +--
 gfxdrivers/savage/savage.c                                       |   12 +--
 gfxdrivers/savage/savage.h                                       |   12 +--
 gfxdrivers/savage/savage2000.c                                   |   12 +--
 gfxdrivers/savage/savage2000.h                                   |   12 +--
 gfxdrivers/savage/savage3d.c                                     |   12 +--
 gfxdrivers/savage/savage3d.h                                     |   12 +--
 gfxdrivers/savage/savage4.c                                      |   12 +--
 gfxdrivers/savage/savage4.h                                      |   12 +--
 gfxdrivers/savage/savage_bci.h                                   |   12 +--
 gfxdrivers/savage/savage_streams_old.c                           |   11 +--
 gfxdrivers/savage/savage_streams_old.h                           |   13 +--
 gfxdrivers/sis315/sis315_mmio.c                                  |   28 +++++++
 gfxdrivers/sis315/sis315_mmio.h                                  |   28 +++++++
 gfxdrivers/tdfx/tdfx.c                                           |    9 +-
 gfxdrivers/tdfx/tdfx.h                                           |    9 +-
 gfxdrivers/unichrome/uc_primary.c                                |   10 +-
 include/dfb_types.h                                              |   28 +++++++
 include/dfiff.h                                                  |    9 ++
 include/dgiff.h                                                  |    9 ++
 include/directfb.h                                               |    9 +-
 include/directfb_keyboard.h                                      |    9 +-
 include/directfb_util.h                                          |    9 +-
 include/directfb_version.h.in                                    |   12 +--
 include/directfbgl.h                                             |    4 -
 inputdrivers/dbox2remote/dbox2remote.c                           |    9 +-
 inputdrivers/dreamboxremote/dreamboxremote.c                     |   12 +--
 inputdrivers/gunze/dfb-calib.c                                   |   34 +++++++++
 inputdrivers/h3600_ts/h3600_ts.c                                 |    9 +-
 inputdrivers/joystick/joystick.c                                 |    9 +-
 inputdrivers/keyboard/keyboard.c                                 |    9 +-
 inputdrivers/linux_input/linux_input.c                           |    9 +-
 inputdrivers/lirc/lirc.c                                         |    9 +-
 inputdrivers/ps2mouse/ps2mouse.c                                 |    9 +-
 inputdrivers/serialmouse/serialmouse.c                           |    9 +-
 inputdrivers/sonypi/sonypi.c                                     |    9 +-
 inputdrivers/tslib/tslib.c                                       |    4 -
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c                             |    9 +-
 inputdrivers/wm97xx_ts/wm97xx_ts.c                               |   12 +--
 interfaces/IDirectFBFont/idirectfbfont_default.c                 |    9 +-
 interfaces/IDirectFBFont/idirectfbfont_dgiff.c                   |    9 +-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |    9 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_dfiff.c |   11 ++-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |    9 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    9 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    9 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |    9 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_gif.c   |    4 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |    9 +-
 lib/direct/clock.c                                               |    9 +-
 lib/direct/clock.h                                               |    9 +-
 lib/direct/conf.c                                                |    9 +-
 lib/direct/conf.h                                                |    9 +-
 lib/direct/debug.c                                               |    9 +-
 lib/direct/debug.h                                               |    9 +-
 lib/direct/direct.c                                              |    9 +-
 lib/direct/direct.h                                              |    9 +-
 lib/direct/dtest.c                                               |   34 +++++++++
 lib/direct/hash.c                                                |    9 +-
 lib/direct/hash.h                                                |    9 +-
 lib/direct/interface.c                                           |    9 +-
 lib/direct/interface.h                                           |    9 +-
 lib/direct/interface_implementation.h                            |    9 +-
 lib/direct/list.c                                                |    9 +-
 lib/direct/list.h                                                |    9 +-
 lib/direct/log.c                                                 |    6 -
 lib/direct/log.h                                                 |    9 +-
 lib/direct/mem.c                                                 |    9 +-
 lib/direct/mem.h                                                 |    9 +-
 lib/direct/memcpy.c                                              |    6 -
 lib/direct/memcpy.h                                              |    9 +-
 lib/direct/messages.c                                            |    9 +-
 lib/direct/messages.h                                            |    9 +-
 lib/direct/modules.c                                             |    9 +-
 lib/direct/modules.h                                             |    9 +-
 lib/direct/serial.h                                              |    9 +-
 lib/direct/signals.c                                             |    9 +-
 lib/direct/signals.h                                             |    9 +-
 lib/direct/stream.c                                              |    6 -
 lib/direct/stream.h                                              |    6 -
 lib/direct/system.c                                              |    9 +-
 lib/direct/system.h                                              |    9 +-
 lib/direct/thread.c                                              |    9 +-
 lib/direct/thread.h                                              |    9 +-
 lib/direct/trace.c                                               |    9 +-
 lib/direct/trace.h                                               |    9 +-
 lib/direct/tree.c                                                |    9 +-
 lib/direct/tree.h                                                |    9 +-
 lib/direct/types.h                                               |    9 +-
 lib/direct/utf8.c                                                |    9 +-
 lib/direct/utf8.h                                                |    9 +-
 lib/direct/util.c                                                |    9 +-
 lib/direct/util.h                                                |    9 +-
 lib/fusion/arena.c                                               |    9 +-
 lib/fusion/arena.h                                               |    9 +-
 lib/fusion/call.c                                                |    9 +-
 lib/fusion/call.h                                                |    9 +-
 lib/fusion/conf.c                                                |    9 +-
 lib/fusion/conf.h                                                |    9 +-
 lib/fusion/fusion.c                                              |    9 +-
 lib/fusion/fusion.h                                              |    9 +-
 lib/fusion/fusion_internal.h                                     |    9 +-
 lib/fusion/hash.c                                                |   13 +--
 lib/fusion/hash.h                                                |   13 +--
 lib/fusion/lock.c                                                |    9 +-
 lib/fusion/lock.h                                                |    9 +-
 lib/fusion/object.c                                              |    9 +-
 lib/fusion/object.h                                              |    9 +-
 lib/fusion/property.c                                            |    9 +-
 lib/fusion/property.h                                            |    9 +-
 lib/fusion/reactor.c                                             |    9 +-
 lib/fusion/reactor.h                                             |    9 +-
 lib/fusion/ref.c                                                 |    9 +-
 lib/fusion/ref.h                                                 |    9 +-
 lib/fusion/shm/fake.c                                            |    9 +-
 lib/fusion/shm/heap.c                                            |    9 +-
 lib/fusion/shm/pool.c                                            |    9 +-
 lib/fusion/shm/pool.h                                            |    9 +-
 lib/fusion/shm/shm.c                                             |    9 +-
 lib/fusion/shm/shm.h                                             |    9 +-
 lib/fusion/shm/shm_internal.h                                    |    9 +-
 lib/fusion/shmalloc.c                                            |    9 +-
 lib/fusion/shmalloc.h                                            |    9 +-
 lib/fusion/types.h                                               |    9 +-
 lib/fusion/vector.c                                              |    9 +-
 lib/fusion/vector.h                                              |    9 +-
 lib/voodoo/client.c                                              |    9 +-
 lib/voodoo/client.h                                              |    9 +-
 lib/voodoo/conf.c                                                |    9 +-
 lib/voodoo/conf.h                                                |    9 +-
 lib/voodoo/interface.c                                           |    9 +-
 lib/voodoo/interface.h                                           |    9 +-
 lib/voodoo/internal.h                                            |    9 +-
 lib/voodoo/manager.c                                             |    9 +-
 lib/voodoo/manager.h                                             |    9 +-
 lib/voodoo/message.h                                             |    9 +-
 lib/voodoo/server.c                                              |    9 +-
 lib/voodoo/server.h                                              |    9 +-
 lib/voodoo/types.h                                               |    9 +-
 proxy/dispatcher/idirectfb_dispatcher.c                          |    9 +-
 proxy/dispatcher/idirectfb_dispatcher.h                          |    9 +-
 proxy/dispatcher/idirectfbdatabuffer_dispatcher.c                |    9 +-
 proxy/dispatcher/idirectfbdatabuffer_dispatcher.h                |    9 +-
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c              |    9 +-
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.h              |    9 +-
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.c               |    9 +-
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.h               |    9 +-
 proxy/dispatcher/idirectfbfont_dispatcher.c                      |    9 +-
 proxy/dispatcher/idirectfbfont_dispatcher.h                      |    9 +-
 proxy/dispatcher/idirectfbfoo_dispatcher.c                       |    9 +-
 proxy/dispatcher/idirectfbfoo_dispatcher.h                       |    9 +-
 proxy/dispatcher/idirectfbimageprovider_dispatcher.c             |    9 +-
 proxy/dispatcher/idirectfbimageprovider_dispatcher.h             |    9 +-
 proxy/dispatcher/idirectfbinputdevice_dispatcher.c               |   10 +-
 proxy/dispatcher/idirectfbinputdevice_dispatcher.h               |    9 +-
 proxy/dispatcher/idirectfbpalette_dispatcher.c                   |    9 +-
 proxy/dispatcher/idirectfbpalette_dispatcher.h                   |    9 +-
 proxy/dispatcher/idirectfbscreen_dispatcher.c                    |    9 +-
 proxy/dispatcher/idirectfbscreen_dispatcher.h                    |    9 +-
 proxy/dispatcher/idirectfbsurface_dispatcher.c                   |    9 +-
 proxy/dispatcher/idirectfbsurface_dispatcher.h                   |    9 +-
 proxy/dispatcher/idirectfbwindow_dispatcher.c                    |    9 +-
 proxy/dispatcher/idirectfbwindow_dispatcher.h                    |    9 +-
 proxy/requestor/idirectfb_requestor.c                            |    9 +-
 proxy/requestor/idirectfbdatabuffer_requestor.c                  |    9 +-
 proxy/requestor/idirectfbdisplaylayer_requestor.c                |    9 +-
 proxy/requestor/idirectfbdisplaylayer_requestor.h                |    9 +-
 proxy/requestor/idirectfbeventbuffer_requestor.c                 |    9 +-
 proxy/requestor/idirectfbeventbuffer_requestor.h                 |    9 +-
 proxy/requestor/idirectfbfont_requestor.c                        |    9 +-
 proxy/requestor/idirectfbfont_requestor.h                        |    9 +-
 proxy/requestor/idirectfbfoo_requestor.c                         |    9 +-
 proxy/requestor/idirectfbfoo_requestor.h                         |    9 +-
 proxy/requestor/idirectfbimageprovider_requestor.c               |    9 +-
 proxy/requestor/idirectfbinputdevice_requestor.c                 |    9 +-
 proxy/requestor/idirectfbinputdevice_requestor.h                 |    9 +-
 proxy/requestor/idirectfbpalette_requestor.c                     |    9 +-
 proxy/requestor/idirectfbpalette_requestor.h                     |    9 +-
 proxy/requestor/idirectfbscreen_requestor.c                      |    9 +-
 proxy/requestor/idirectfbsurface_requestor.c                     |    9 +-
 proxy/requestor/idirectfbsurface_requestor.h                     |    9 +-
 proxy/requestor/idirectfbwindow_requestor.c                      |    9 +-
 proxy/requestor/idirectfbwindow_requestor.h                      |    9 +-
 src/core/clipboard.c                                             |    9 +-
 src/core/clipboard.h                                             |    9 +-
 src/core/colorhash.c                                             |    9 +-
 src/core/colorhash.h                                             |    9 +-
 src/core/core.c                                                  |    9 +-
 src/core/core.h                                                  |    9 +-
 src/core/core_parts.c                                            |    9 +-
 src/core/core_parts.h                                            |    9 +-
 src/core/core_system.h                                           |    9 +-
 src/core/coredefs.h                                              |    9 +-
 src/core/coretypes.h                                             |    9 +-
 src/core/fonts.c                                                 |    9 +-
 src/core/fonts.h                                                 |    9 +-
 src/core/gfxcard.c                                               |    6 -
 src/core/gfxcard.h                                               |    9 +-
 src/core/graphics_driver.h                                       |    9 +-
 src/core/input.c                                                 |    9 +-
 src/core/input.h                                                 |    9 +-
 src/core/input_driver.h                                          |    9 +-
 src/core/layer_context.c                                         |    9 +-
 src/core/layer_context.h                                         |    9 +-
 src/core/layer_control.c                                         |    9 +-
 src/core/layer_control.h                                         |    9 +-
 src/core/layer_region.c                                          |    9 +-
 src/core/layer_region.h                                          |    9 +-
 src/core/layers.c                                                |    9 +-
 src/core/layers.h                                                |    9 +-
 src/core/layers_internal.h                                       |    9 +-
 src/core/palette.c                                               |    9 +-
 src/core/palette.h                                               |    9 +-
 src/core/screen.c                                                |    9 +-
 src/core/screen.h                                                |    9 +-
 src/core/screens.c                                               |    9 +-
 src/core/screens.h                                               |    9 +-
 src/core/screens_internal.h                                      |    9 +-
 src/core/state.c                                                 |    9 +-
 src/core/state.h                                                 |    9 +-
 src/core/surfacemanager.c                                        |    6 -
 src/core/surfacemanager.h                                        |    9 +-
 src/core/surfaces.c                                              |    9 +-
 src/core/surfaces.h                                              |    9 +-
 src/core/system.c                                                |    9 +-
 src/core/system.h                                                |    9 +-
 src/core/windows.c                                               |    9 +-
 src/core/windows.h                                               |    9 +-
 src/core/windows_internal.h                                      |    9 +-
 src/core/windowstack.c                                           |    9 +-
 src/core/windowstack.h                                           |    9 +-
 src/core/wm.c                                                    |    9 +-
 src/core/wm.h                                                    |    9 +-
 src/core/wm_module.h                                             |    9 +-
 src/directfb.c                                                   |    9 +-
 src/display/idirectfbdisplaylayer.c                              |    9 +-
 src/display/idirectfbdisplaylayer.h                              |    9 +-
 src/display/idirectfbpalette.c                                   |    9 +-
 src/display/idirectfbpalette.h                                   |    9 +-
 src/display/idirectfbscreen.c                                    |    9 +-
 src/display/idirectfbscreen.h                                    |    9 +-
 src/display/idirectfbsurface.c                                   |    9 +-
 src/display/idirectfbsurface.h                                   |    9 +-
 src/display/idirectfbsurface_layer.c                             |    9 +-
 src/display/idirectfbsurface_layer.h                             |    9 +-
 src/display/idirectfbsurface_window.c                            |    9 +-
 src/display/idirectfbsurface_window.h                            |    9 +-
 src/gfx/clip.c                                                   |    9 +-
 src/gfx/clip.h                                                   |    9 +-
 src/gfx/convert.c                                                |    9 +-
 src/gfx/convert.h                                                |    9 +-
 src/gfx/generic/duffs_device.h                                   |    6 -
 src/gfx/generic/generic.c                                        |    6 -
 src/gfx/generic/generic.h                                        |    6 -
 src/gfx/generic/generic_64.h                                     |    6 -
 src/gfx/generic/generic_mmx.h                                    |    6 -
 src/gfx/generic/template_acc_16.h                                |    6 -
 src/gfx/generic/template_acc_32.h                                |    6 -
 src/gfx/generic/template_colorkey_16.h                           |    6 -
 src/gfx/generic/template_colorkey_32.h                           |    6 -
 src/gfx/generic/yuvtbl-gen.c                                     |    4 -
 src/gfx/util.c                                                   |    9 +-
 src/gfx/util.h                                                   |    9 +-
 src/idirectfb.c                                                  |    9 +-
 src/idirectfb.h                                                  |    9 +-
 src/input/idirectfbinputbuffer.c                                 |   10 +-
 src/input/idirectfbinputbuffer.h                                 |    9 +-
 src/input/idirectfbinputdevice.c                                 |    9 +-
 src/input/idirectfbinputdevice.h                                 |   10 +-
 src/media/idirectfbdatabuffer.c                                  |   10 +-
 src/media/idirectfbdatabuffer.h                                  |   12 +--
 src/media/idirectfbdatabuffer_file.c                             |    7 +
 src/media/idirectfbdatabuffer_memory.c                           |   10 +-
 src/media/idirectfbdatabuffer_streamed.c                         |   10 +-
 src/media/idirectfbfont.c                                        |   10 +-
 src/media/idirectfbfont.h                                        |   10 +-
 src/media/idirectfbimageprovider.c                               |   10 +-
 src/media/idirectfbimageprovider.h                               |    9 +-
 src/media/idirectfbvideoprovider.c                               |    8 +-
 src/media/idirectfbvideoprovider.h                               |    6 -
 src/misc/conf.c                                                  |    9 +-
 src/misc/conf.h                                                  |    9 +-
 src/misc/gfx_util.c                                              |    6 -
 src/misc/gfx_util.h                                              |    9 +-
 src/misc/util.c                                                  |    9 +-
 src/misc/util.h                                                  |    9 +-
 src/windows/idirectfbwindow.c                                    |    9 +-
 src/windows/idirectfbwindow.h                                    |    9 +-
 systems/fbdev/agp.c                                              |    6 -
 systems/fbdev/agp.h                                              |    6 -
 systems/fbdev/fbdev.c                                            |    9 +-
 systems/fbdev/fbdev.h                                            |    9 +-
 systems/fbdev/vt.c                                               |    9 +-
 systems/fbdev/vt.h                                               |    9 +-
 systems/osx/osx.c                                                |    9 +-
 systems/osx/osx.h                                                |    9 +-
 systems/osx/osxinput.c                                           |    9 +-
 systems/osx/primary.c                                            |    9 +-
 systems/osx/primary.h                                            |    9 +-
 systems/sdl/primary.c                                            |    9 +-
 systems/sdl/primary.h                                            |    9 +-
 systems/sdl/sdl.c                                                |    9 +-
 systems/sdl/sdl.h                                                |    9 +-
 systems/sdl/sdlinput.c                                           |    9 +-
 systems/vnc/primary.c                                            |   11 +++
 systems/vnc/primary.h                                            |    9 +-
 systems/vnc/vnc.c                                                |    9 +-
 systems/vnc/vnc.h                                                |    9 +-
 systems/x11/primary.c                                            |    9 +-
 systems/x11/primary.h                                            |    9 +-
 systems/x11/x11.c                                                |    9 +-
 systems/x11/x11.h                                                |    9 +-
 systems/x11/x11input.c                                           |    9 +-
 systems/x11/xwindow.c                                            |   28 +++++++
 systems/x11/xwindow.h                                            |   28 +++++++
 tests/fusion_fork.c                                              |   11 ++-
 tests/fusion_reactor.c                                           |   11 ++-
 tests/fusion_stream.c                                            |   34 +++++++++
 tools/dfbdump.c                                                  |    9 +-
 tools/dfbg.c                                                     |    9 +-
 tools/dfbinfo.c                                                  |    9 +-
 tools/dfbinput.c                                                 |    9 +-
 tools/dfblayer.c                                                 |    9 +-
 tools/dfbpenmount.c                                              |    6 +
 tools/dfbproxy.c                                                 |    9 +-
 tools/dfbscreen.c                                                |    9 +-
 tools/dfbsummon.c                                                |    9 +-
 tools/directfb-csource.c                                         |    9 +-
 tools/fusion_bench.c                                             |    9 +-
 tools/fx.c                                                       |   34 +++++++++
 tools/gendoc.pl                                                  |   10 +-
 tools/mkdfiff.c                                                  |   34 +++++++++
 tools/mkdgiff.c                                                  |   34 +++++++++
 tools/raw15toraw24.c                                             |   36 +++++++++-
 tools/raw16toraw24.c                                             |   36 +++++++++-
 tools/raw32toraw24.c                                             |   36 +++++++++-
 wm/default/default.c                                             |    9 +-
 wm/unique/classes/foo.c                                          |    9 +-
 wm/unique/classes/frame.c                                        |    9 +-
 wm/unique/classes/root.c                                         |    9 +-
 wm/unique/classes/window.c                                       |    9 +-
 wm/unique/context.c                                              |    9 +-
 wm/unique/context.h                                              |    9 +-
 wm/unique/decoration.c                                           |    9 +-
 wm/unique/decoration.h                                           |    9 +-
 wm/unique/device.c                                               |    9 +-
 wm/unique/device.h                                               |    9 +-
 wm/unique/devices/keyboard.c                                     |    9 +-
 wm/unique/devices/pointer.c                                      |    9 +-
 wm/unique/devices/wheel.c                                        |    9 +-
 wm/unique/input_channel.c                                        |    9 +-
 wm/unique/input_channel.h                                        |    9 +-
 wm/unique/input_events.h                                         |    9 +-
 wm/unique/input_switch.c                                         |    9 +-
 wm/unique/input_switch.h                                         |    9 +-
 wm/unique/internal.h                                             |    9 +-
 wm/unique/stret.c                                                |    9 +-
 wm/unique/stret.h                                                |    9 +-
 wm/unique/stret_iteration.c                                      |    9 +-
 wm/unique/stret_iteration.h                                      |    9 +-
 wm/unique/stret_test.c                                           |   34 +++++++++
 wm/unique/test_color.c                                           |    9 +-
 wm/unique/test_foo.c                                             |    9 +-
 wm/unique/types.h                                                |    9 +-
 wm/unique/unique.c                                               |    9 +-
 wm/unique/uniquewm.c                                             |    9 +-
 wm/unique/uniquewm.h                                             |    9 +-
 wm/unique/uwmdump.c                                              |    9 +-
 wm/unique/window.c                                               |    9 +-
 wm/unique/window.h                                               |    9 +-
 423 files changed, 2500 insertions(+), 1711 deletions(-)



commit f873d6cc66e68df4056c36e9a42fe0f5377a264c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 20:06:47 2007 +0000

    |     =======================|  DirectFB 1.0.0-rc5  |=======================
    |          (c) 2001-2007  The DirectFB Organization (directfb.org)
    |          (c) 2000-2004  Convergence (integrated media) GmbH
    |        ----------------------------------------------------------------
    
    
    comments?


 directfb.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5dea556e582cc510cad0556df3247b4a6438faf7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 19:57:30 2007 +0000

    Thanks to Ben Combee for adding DIEF_FOLLOW support to SDL Input!


 sdlinput.c |    5 +++++
 1 file changed, 5 insertions(+)



commit d6440af4b9a9538dbf1a2c5f32fa5b2022f93bd6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 19:35:03 2007 +0000

    ignore


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit 67852690cb18711f2605bcc9e523c8f43e53ca64
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 19:33:34 2007 +0000

    Use local memory (D_MALLOC instead of SHMALLOC) if pool is NULL.


 vector.c |   24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)



commit 273e33c9f02e985865526b2713acf4d036fadd95
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 19:32:17 2007 +0000

    typo


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 78e6f0d83458c51eeb3fd28b7b390d9389870b83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 19:00:51 2007 +0000

    Wuah...


 TODO                 |    1 
 docs/directfbrc.5.in |  112 ++++++++++++++++++++++++++++++++++++++++-----------
 2 files changed, 88 insertions(+), 25 deletions(-)



commit db8a2db9657b9629e9c4df7a3ae21ac8e8461a88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 3 11:01:46 2007 +0000

    align output


 dfbdump.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 1a563fcbba64619b2f2a6def77c59a433740d9f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 2 20:39:29 2007 +0000

    Updated.
    
    TODOs for 1.0.0 added, feel free to extend this list :)


 ChangeLog |  225 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   51 ++++++++++++++
 TODO      |    8 ++
 3 files changed, 284 insertions(+)



commit 8f9e8cac1c4836bceef7355309d0fc326cad559a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 2 20:14:44 2007 +0000

    New option "vt-num=<num>" to use given VT instead of current/new one.


 src/misc/conf.c    |   18 ++++++++++++++++++
 src/misc/conf.h    |    2 ++
 systems/fbdev/vt.c |   26 +++++++++++++++++---------
 3 files changed, 37 insertions(+), 9 deletions(-)



commit 2db3166fb667897a7cb838fc64b0cb2deec6fe88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 2 19:51:01 2007 +0000

    RC5


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 490e2a5924847cc6a06c177eb1bcbc48bac5bebb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 2 19:48:20 2007 +0000

    Implemented 1 and 2 bit indexed PNG support.


 idirectfbimageprovider_png.c |   28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)



commit 7bf75e3cc78a0b358f863efea7fe10138fc43230
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 2 17:44:44 2007 +0000

    Show creator of references.


 lib/fusion/ref.c |    3 ++-
 lib/fusion/ref.h |    1 +
 tools/dfbdump.c  |   30 +++++++++++++++---------------
 3 files changed, 18 insertions(+), 16 deletions(-)



commit c3d599f8b31bd9afe856b94223f0933142c42e58
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 21:12:23 2007 +0000

    Don't abort if an unsupported option is found, but give a fat warning.


 conf.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit c39131aa31bcc2bf1b3920a02ab414744e61342f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:59:57 2007 +0000

    Don't deallocate locked buffers on suspend.


 surfacemanager.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 280e77614e48406f14df21e7a52f81dea35981e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:54:56 2007 +0000

    Free previous string when shmfile-group is overridden.
    Don't set a default group.


 lib/fusion/conf.c |    3 +--
 src/misc/conf.c   |    9 ++++++---
 2 files changed, 7 insertions(+), 5 deletions(-)



commit bc86cf3350fed27d8f5a4d2381a3af3bab99d6c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:47:10 2007 +0000

    typo :(


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c5d20401633e1c9385366320af1966c1fb00ef3c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:45:29 2007 +0000

    Surface manager always deallocates all auto video instances when suspending.
    This has the nice side effect of free space being defragmented after resume :)
    
    Added option "[no-]thrifty-surface-buffers" to free sysmem instance on xfer to video memory.


 core/surfacemanager.c |   76 +++++++++++++++++++++++++++++++++++++++++++++-----
 misc/conf.c           |    7 ++++
 misc/conf.h           |    2 +
 3 files changed, 78 insertions(+), 7 deletions(-)



commit 606aeb4bb55672bd5f51932cf1b06ca5f3b10f1a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:23:18 2007 +0000

    Added fast RGB24 to RGB16 conversion (little endian only).


 generic.c |   70 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 70 insertions(+)



commit a4fc36250c63e5f0e79b19d0ddd9ae74d3e57654
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:13:28 2007 +0000

    Added keypad equal support.


 keyboard/keyboard.c       |    6 ++++++
 linux_input/linux_input.c |    6 ++++++
 2 files changed, 12 insertions(+)



commit e841d7c455b9bfce6be4c0a2b2e2d4251f4817be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 20:07:47 2007 +0000

    New option "shmfile-group=<groupname>" to set the group that owns shared memory files.


 lib/fusion/conf.c     |    3 ++-
 lib/fusion/conf.h     |    2 ++
 lib/fusion/shm/heap.c |   14 ++++++++++++++
 src/misc/conf.c       |   10 ++++++++++
 4 files changed, 28 insertions(+), 1 deletion(-)



commit 78a849cf6a1f4b1d8e1503c3a6d6ce3c06af9e78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:59:51 2007 +0000

    This patch adds '--with-message-size=SIZE' to allow fusion messages up to SIZE bytes (default is 1024).


 configure.in          |   11 +++++++++++
 lib/fusion/build.h.in |    1 +
 lib/fusion/fusion.c   |    4 ++--
 3 files changed, 14 insertions(+), 2 deletions(-)



commit b50ddd5b53d12900ee837afa7a69942e0e1334c0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:56:29 2007 +0000

    This patch sets FD_CLOEXEC on the frame buffer device file descriptor.


 fbdev.c |   20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)



commit d6a296f82431342e75627b33e8064048223db751
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:49:56 2007 +0000

    Don't notify WM if cursor opacity didn't actually change.


 windowstack.c |   14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)



commit 26eac7159fc79e061b4a712b5b3d614de4a8ecc4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:48:54 2007 +0000

    This fixes unconditional access to conditionally allocated data, thanks to Ben Combee!


 fonts.c |   13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)



commit cf8d109b1d6c23c9761d370a1d2d1e924b6e5f1d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:44:46 2007 +0000

    Added dfb_gfxcard_get_device_data().


 gfxcard.c |    9 +++++++++
 gfxcard.h |    2 ++
 2 files changed, 11 insertions(+)



commit ab497c32f62c4e0e7c1df7396fdabf7169013ea1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 24 19:40:33 2007 +0000

    Improved robustness of VT switching, e.g. for rapidly switching back and forth.


 src/core/core.c    |   49 +++++++++++++++++++++++++++++++++++++++----------
 systems/fbdev/vt.c |   30 ++++++++++++++++++------------
 2 files changed, 57 insertions(+), 22 deletions(-)



commit 5ed9b956381cbeeea463e2bac37fcee88682de7f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Feb 23 16:10:46 2007 +0000

    Finally found the way to embed MPEG streams within the RMF container.
    Dropped down RTSP seekability (never worked fine).


 stream.c |  520 +++++++++++++++++++++++++++++++++++++++------------------------
 1 file changed, 325 insertions(+), 195 deletions(-)



commit 0253831e77c81ff7cf46b59f56a849b1338507a5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 21 11:05:21 2007 +0000

    Another (binary compatible) API change: added DVSTATE_BUFFERING.


 directfb.h |   18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)



commit 919995193f17be8c217f7ece366ff867903eb0f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 12 11:55:35 2007 +0000

    Just another test app.


 Makefile.am     |    8 
 fusion_stream.c |  505 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 511 insertions(+), 2 deletions(-)



commit 32e5459170f2a9e4ef9f8dfb7d441ccbe03c9379
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 10 23:22:10 2007 +0000

    Thanks to Philip Jgenstedt :philipj 0pera c0m: for fixing the H3600 check!


 README       |    1 +
 configure.in |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 255c93750d1b2d4c17c51ab4aee803edc4c4cb33
Author: Mark Adams <marka@directfb.org>
Date:   Fri Feb 9 14:57:03 2007 +0000

    Attempt to fix problems with redefinition of s64, u64 types.


 uc_overlay.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit d113ba23bedf936ad37115d1f83b3dc0be99fee4
Author: Mark Adams <marka@directfb.org>
Date:   Fri Feb 9 12:16:54 2007 +0000

    Attempt to fix problems with redefinition of s64, u64 types.


 unichrome.c |    2 ++
 1 file changed, 2 insertions(+)



commit 66d84298ec6153da512be376b7394602171701c5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Feb 9 11:32:15 2007 +0000

    Converted old dfb types to new types.


 memcpy.c |   32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)



commit 807ce0aff857ac99042ddd08005ea925e2193459
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 9 01:44:20 2007 +0000

    The uncommitten...


 ChangeLog    |   92 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS         |   19 ++++++++++++
 configure.in |    2 -
 3 files changed, 112 insertions(+), 1 deletion(-)



commit eafaa77fd598efb2e8cdd3111ef8a142e87af1ff
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Feb 7 22:45:43 2007 +0000

    Including linux/unistd.h appears to be unnecessary.


 debug.c |    2 --
 1 file changed, 2 deletions(-)



commit 12a5f5a7f4983122a6189a21e36c73e67c4faed2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 6 21:27:12 2007 +0000

    Don't try to read() if select() returned with EINTR.


 linux_input.c |    3 +++
 1 file changed, 3 insertions(+)



commit ba381d1cc20bce277041ee9fee27e1e0a20609df
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 6 21:21:20 2007 +0000

    Make CODING_STYLE actually follow it's own recommendations ;)


 CODING_STYLE |   40 ++++++++++++++++++++--------------------
 1 file changed, 20 insertions(+), 20 deletions(-)



commit 13a840994684a8975fa3316da05ac26b4a2dbe76
Author: Mark Adams <marka@directfb.org>
Date:   Tue Feb 6 14:46:00 2007 +0000

    Fix video layer flicker when layer is positioned partially off screen.
    Also improve positioning accuracy in this situation (but with a little more
    masking at the screen edge).


 uc_overlay.h   |    5 +++--
 uc_ovl_hwmap.c |   39 ++++++++++++++++++++++++++-------------
 uc_ovl_hwset.c |   12 +++++++-----
 3 files changed, 36 insertions(+), 20 deletions(-)



commit b82c237a827fa1b5a8a0c60bc73210aceffa1b74
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 5 21:50:14 2007 +0000

    Add a configure check for struct input_absinfo.


 configure.in                           |   12 +++++++++++-
 inputdrivers/linux_input/linux_input.c |    2 +-
 2 files changed, 12 insertions(+), 2 deletions(-)



commit 7ea7063ac7a1270d554a3c3ca0c90b0e82f3d7c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 5 11:48:52 2007 +0000

    Many thanks to Vaclav Slavik for these many fixes :-)
    
    * Previously, the process attached itself to a new controlling TTY
    only if vt_switch option was on. This patch changes it to always
    (unless VT handling is completely disabled, of course) attach the
    process to the TTY being used by the app as the new controlling TTY.
    This is because we always need some controlling TTY, without it, there
    could be SIGHUP/SIGCONT signals (see e.g. my post about re-adding
    setpgid() call). Note that the patch moves TIOCSCTTY call outside
    of "if vt-switch" branch, but completely removes TIOCNOTTY - - that's
    because the latter is not needed, setsid() already detached the
    process from controlling TTY. So "vt-switch" now only
    controls "physical" change of the currently active console.
    
    * /dev/tty? files are opened with O_NOCTTY. Linux kernel has a feature
    that if a process without controlling TTY opens a TTY device, it's
    made its controlling TTY, unless you use O_NOCTTY, so this change
    ensure that we only attach to the desired TTY explicitly using
    TIOCSCTTY.
    
    * Moved TIOCSCTTY before KBSETMODE use, otherwise non-root users get
    EPERM from KBSETMODE ioctl(), because you can't do that operation on
    anything other than your controlling TTY normally.
    
    * Removed setpgid() calls, because they interfered with setsid() later
    and weren't really necessary now that other cTTY problems were fixed.
    Ditto for the removed dfb_vt_detach() call (I couldn't find any
    information about why it was there in the first place, but everything
    works without it as far as I can tell).


 fbdev.c |    7 -------
 vt.c    |   19 +++++++++----------
 2 files changed, 9 insertions(+), 17 deletions(-)



commit 1f63064d4fa2ef81f1388a852277ff66c416dafb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Feb 3 11:54:58 2007 +0000

    Avoid cutting away the last pixel of a planar yuv row.


 gfx_util.c |   60 +++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 49 insertions(+), 11 deletions(-)



commit 121d7ca0a14569dbc971865fdf3356cc76c3a004
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Feb 3 11:36:33 2007 +0000

    Changed my email address.


 mkchlog |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 90bf0a5075d84286580525889e0a61ff064c8e0d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Feb 3 11:35:45 2007 +0000

    Distribute autogen.sh.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit e83cc57ed68f395f853d15315b6eb41be508144e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 2 23:10:43 2007 +0000

    Add new lines to work around nested structs being taken by the doc generator.


 directfb.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 00ad661e60b8a4de0ac3b9ae44b635ea4576d94c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Feb 2 18:30:41 2007 +0000

    Display my new email address (the old one may not work in future).


 AUTHORS |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit b548b38e012ca1011a4a016b2931278dee5a431a
Author: Mark Adams <marka@directfb.org>
Date:   Thu Feb 1 18:42:44 2007 +0000

    Allow for improved timing of video layer flips when the FIELD_PARITY option
    is in use.  The improvement is only possible if the kernel framebuffer
    supports it.  If not, we do the best we can but occasional glitches may
    occur under high processor load.


 Makefile.am  |    1 
 uc_ioctl.h   |   35 +++++++++++++++++++++++++++++
 uc_overlay.c |   70 ++++++++++++++++++++++++++++++++++++++++++++---------------
 unichrome.c  |   14 +++++++++++
 unichrome.h  |    1 
 5 files changed, 104 insertions(+), 17 deletions(-)



commit 833344e2caa02f416446e6e8ad45a08d162ee1be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 20:28:50 2007 +0000

    updated for RC3


 ChangeLog |   25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)



commit b87c1df32781e8159ff6b9dee04e1a28ff1137e2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 20:27:21 2007 +0000

    Argh, reading the NEWS I recognized I forgot to change the ambiguous
    fusion_reactor_sync() into fusion_reactor_direct() to make it more clear:
    
    Specify whether local message handlers (reactions) should be called directly.


 lib/fusion/reactor.c |   13 +++++--------
 lib/fusion/reactor.h |    8 +++-----
 src/core/surfaces.c  |    2 +-
 src/core/windows.c   |    2 +-
 4 files changed, 10 insertions(+), 15 deletions(-)



commit bddb52854e01fe4305086c10194ca260e2d8ddaf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 15:47:57 2007 +0000

    updated


 ChangeLog | 1550 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 NEWS      |  150 ++++++
 2 files changed, 1685 insertions(+), 15 deletions(-)



commit d60c89ecf9cfe07a605657bc16ac8ea0718daabb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 04:13:29 2007 +0000

    We should "Support vga16, i.e. add DSPF_LUT4."


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 4b923dfec340950ebd29acd6f52fb2d59d758220
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 01:00:45 2007 +0000

    In drivers including <fbdev/fbdev.h> do that before <dfb_types.h> gets in.


 i810/i810.c                  |    2 +-
 i810/i810_overlay.c          |    2 ++
 i830/i830.c                  |    2 ++
 i830/i830_overlay.c          |    2 ++
 matrox/matrox_screen_crtc2.c |    2 ++
 nsc/nsc_galfns.c             |    8 ++++----
 sis315/sis315.c              |    4 +++-
 unichrome/uc_overlay.c       |    2 ++
 8 files changed, 18 insertions(+), 6 deletions(-)



commit d55bc774043e5ece1d6c2b1efd85bcfe975ac5ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 29 01:00:01 2007 +0000

    Include <asm/types.h> before <dfb_types.h> is included somehow.
    
    This works around the 64bit type clash between <asm/types.h> and <stdint.h> (used by dfb_types.h).
    
    Any help for proper fixes or some explanation would be appreciated!


 agp.c   |    2 ++
 fbdev.c |    2 ++
 fbdev.h |    2 ++
 vt.c    |    2 ++
 4 files changed, 8 insertions(+)



commit 6d6a481e8b42f3a60c01e09061082773ec172b0e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 28 21:24:44 2007 +0000

    In dfb_gfxcard_reserve_memory() show sizes in warning about too less memory,
    also align the requested size according to byte offset alignment or warn if
    that's not specified, yet.


 gfxcard.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 6428590ce4a688bc0ecc8441bd03e0bbdc74c2d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 27 18:03:23 2007 +0000

    Fix fusion_sync() timeout during XDirectFB shutdown.
    
    Apart from other small changes, fusion_sync() returns DFB_OK in case
    the select() call was interrupted (EINTR). Continuously sent signals
    could have cause these timeouts, but I don't know if and why they would
    be there.
    
    It's still a hot fix, as it could be that the call is interrupted with
    data available, couldn't it?
    
    A proper solution could be to support fsync(fusion_fd), but what about
    the timeout?


 fusion.c |   17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)



commit ba6b67234d44eea9c580bf8e9f919f67b670a6d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 27 15:23:48 2007 +0000

    Further minimize impact of a shutdown issue which only seems to happen with
    XDirectFB, e.g. on Ctrl-Alt-BackSpace. The problem is that waiting for the
    dispatcher to process pending messages fails, or at least the detection is
    broken whether there are any pending messages.
    
    Only call fusion_sync() if the pool that is to be destroyed has objects.


 object.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit b8bc3b706492a4dabca1b5801c534fc192351598
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 26 23:32:24 2007 +0000

    Added -lm for sin().


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 16f4e0f72494d8479e1c867066c8ab86b137c06a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Jan 26 08:24:38 2007 +0000

    Revert the previous AiRGB change. Not sure what I was thinking...


 generic.c |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit ad60e033b6c3b35a3e05f9468386ed297bece1ba
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jan 25 21:21:21 2007 +0000

    Source color alpha value wasn't always correctly inverted for AiRGB.


 generic.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit 6a1089a0ae9b1693d1cf6b7b26813e67be22dcfc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 25 02:52:44 2007 +0000

    Use DFBUpdates to manage an update queue and do optimizations like taking
    the bounding box instead of multiple smaller regions if the number of pixels
    in the bounding box is not much higher than the total of the smaller ones.
    
    Even this takes the number of smaller regions into account, because of the
    increasing overhead per region.
    
    Next to performance, the visual experience is enhanced by coalesced updates.
    
    Another advantage is that when multiple regions are updated, first it renders
    all regions and then it flips all regions. Previously, each time the flip was
    done immediately for each rendered region.


 default.c |  252 +++++++++++++++++++++++++++++++++++++++++---------------------
 1 file changed, 167 insertions(+), 85 deletions(-)



commit 5606d17f9ecc4d06b019151198eaacf349ebc7fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 25 01:34:23 2007 +0000

    Fixed missing bounding box update when a newly added update is merged with an existing.


 util.c |    2 ++
 1 file changed, 2 insertions(+)



commit cf76229662140c451c6e6cc39dcfa52bece16444
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jan 24 23:48:21 2007 +0000

    Fixed a bug in dfb_gfxcard_tileblit(). It first removes all completely
    clipped tiles, but then forgets the new dx1 coordinate and starts
    blitting from the original dx1 position.


 gfxcard.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)



commit 97bd3995fb662cfc9933a6fb8ed8505a4423446b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jan 24 22:10:56 2007 +0000

    SMF_CLIP was ignored.


 matrox.c |    3 +++
 1 file changed, 3 insertions(+)



commit 86519ba74b49e52284a611956de71dce43f18618
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 24 03:56:32 2007 +0000

    Cleanup, reorder, rephrase, ...


 TODO |   56 +++++++++++++++++++++-----------------------------------
 1 file changed, 21 insertions(+), 35 deletions(-)



commit 1d5e207f835aec6d8527b387797d718033b5c4c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 24 03:12:35 2007 +0000

    Added fusion_shm_attach_unattached() to attach to pools that have been
    created AFTER fusion_shm_init() attached to pools during fusion_enter().
    
    This can happen easily when starting a number of processes with the new
    "force-slave" option. They'll all block at fusion_enter() until the master
    has completed its fusion_enter().
    
    DirectFB shared memory pools are created by the master after fusion_enter(),
    but during fusion_arena_enter(). Slaves will block at this point again, until
    the master has finished the rest of the setup and returns from entering the
    arena.
    
    When others actually join the arena, right after acquiring the lock for it,
    the new function fusion_shm_attach_unattached() is called to attach to any
    pools created by the master while entering (initializing) the arena.


 arena.c   |    3 +++
 shm/shm.c |   43 +++++++++++++++++++++++++++++++++++++++++++
 shm/shm.h |    2 ++
 3 files changed, 48 insertions(+)



commit 216286888dab1ba8eb54edce240f446e4f745531
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 24 02:04:00 2007 +0000

    Added runtime option "force-slave" to always enter as a slave, waiting for
    the master, if not already there. This feature only works with recent kernel
    module.


 lib/fusion/conf.h   |    1 +
 lib/fusion/fusion.c |    3 +++
 src/misc/conf.c     |    4 ++++
 3 files changed, 8 insertions(+)



commit 144e3ef3691c013bcc2abd2f891ee16b5db69ce6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 24 01:22:53 2007 +0000

    Read DIRECTFB_SESSION variable after reading all files and DFBARGS,
    so only the command line can override the current session.
    
    Still thinking though, if DFBARGS should override DIRECTFB_SESSION...


 conf.c |   13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)



commit 79c52e6bdf260d86f09b0f7289c744819aaf3002
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 23:00:07 2007 +0000

    If trace support and shared libraries are enabled, for each library to install,
    also generate a file containing the output of "nm -n <that library>".
    
    That's the command that is used at runtime via popen().
    
    Now the code first checks if it can fopen() a file with the same name as the
    one passed to "nm -n", but with an "nm-n." prefix.
    
    This is both a performance improvement and a nice solution for (embedded) targets
    without 'nm' being available or fast enough.


 configure.in           |    1 +
 lib/direct/Makefile.am |    3 +++
 lib/direct/trace.c     |   40 +++++++++++++++++++++++++++++-----------
 lib/fusion/Makefile.am |    3 +++
 lib/voodoo/Makefile.am |    3 +++
 rules/nmfile.make      |   10 ++++++++++
 src/Makefile.am        |    3 +++
 7 files changed, 52 insertions(+), 11 deletions(-)



commit 18585f0743fda2c7a42fc0dbf6d2bf336f212546
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 20:56:04 2007 +0000

    Made direct_snputs() static inline.
    
    Removed assertion 'n > 0', instead return NULL if destination can't
    even hold the zero termination character.


 util.c |   24 ------------------------
 util.h |   25 +++++++++++++++++++++++--
 2 files changed, 23 insertions(+), 26 deletions(-)



commit 19efc71ab311496ef3b8b839d26470740c7cca80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 20:49:38 2007 +0000

    Removed <direct/util.h> include.


 debug.h |    1 -
 1 file changed, 1 deletion(-)



commit 457a0207f9cc43be2d581a7726b2f5cfb6290d94
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 20:48:51 2007 +0000

    Added missing <direct/util.h> includes.


 fusion.c   |    1 +
 shm/heap.c |    1 +
 shm/shm.c  |    1 +
 3 files changed, 3 insertions(+)



commit 91239996d0714ac8c1c3e9a450da37f789397826
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 20:26:54 2007 +0000

    Easy part, replacing strncpy() by direct_snputs().
    
    Replacing all relevant snprintf() will be harder...


 gfxdrivers/matrox/matrox_maven.c                               |    4 ++--
 inputdrivers/lirc/lirc.c                                       |    4 ++--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |    3 +--
 lib/direct/stream.c                                            |    2 +-
 lib/direct/trace.c                                             |    4 +---
 lib/fusion/lock.c                                              |    2 +-
 lib/fusion/reactor.c                                           |    2 +-
 lib/fusion/ref.c                                               |    2 +-
 lib/fusion/shm/shm.c                                           |    2 +-
 9 files changed, 11 insertions(+), 14 deletions(-)



commit d2624a70c937219f802e15e09c573cbb374a2086
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 18:47:09 2007 +0000

    Added direct_snputs(s,d,n) to set a string with a maximum size including the
    zero termination. This acts like a strncpy(d,s,n), but always terminates the
    string like snprintf(d,n,"%s",s) which is more or less slower.


 util.c |   24 ++++++++++++++++++++++++
 util.h |    7 +++++++
 2 files changed, 31 insertions(+)



commit 3d2abfc029117b398d12fc718d656739cb05e007
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:46:55 2007 +0000

    When Meta-P is pressed, only show/enable the cursor if it has ever been set.
    
    This fixes the cursor showing up on my Xv enabled Xawtv window (cursor on video layer :).


 default.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 6a5910d4c94d700f47a58af5fbe53cd09c665ab6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:33:38 2007 +0000

    Fixed DIKT_UNICODE detection in DFB_KEY_TYPE(symbol) for values > 255.


 directfb_keyboard.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0f779e4e1ec96f75c560e37b231072ce8d682214
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:26:04 2007 +0000

    Do the same as for surfaces recently: revert to direct local reaction calls.
    Fixes rare glitches in heavy window resizing in LiTE.


 windows.c |    2 ++
 1 file changed, 2 insertions(+)



commit 9a172ce84938ee90f606331e54911af3a78b2fc1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:22:39 2007 +0000

    Reduce timeout in fusion_sync().
    
    At the moment it always seems to fail, but this should be fixed asap.


 fusion.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fef7dc8fc21d33a5350058bd94c274ca25c52c53
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:21:23 2007 +0000

    Already fixed.


 reactor.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 21c5562661535de95b640943fef2004e4e12fd39
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 16:11:30 2007 +0000

    Commented out recent change until it's fixed.


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit de6989fbe17e2f3864589bfefa129c0c4b2b434c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 13:14:54 2007 +0000

    Use direct_list_move_to_front() in lock_node() as the list could be long
    in case an application attaches to a lot of reactors, most probably its own,
    e.g. using a lot of small surfaces.


 reactor.c |    2 ++
 1 file changed, 2 insertions(+)



commit c08e629fb6817d006a9a9082fff12bda1fe08fc3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 23 13:11:46 2007 +0000

    Added direct_list_move_to_front( **list, *link ).


 list.h |   44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)



commit 70ca7950f9b3225744e356c6426bd545981ab07d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 22 21:31:48 2007 +0000

    Eliminate bashism (function keyword).


 directfb-config.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7329e0b5a4e973f6daf92008ce9703f84d73d71d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 22 21:26:11 2007 +0000

    Fix ALUT44 Clear() by calling dfb_state_set_color().


 idirectfbsurface.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 8969c27479e55c1ed5e599495d9d47fb4afb5ab7
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 22 21:20:18 2007 +0000

    Fix glyph rendering to indexed formats by calling dfb_state_set_color().


 gfxcard.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 67de5e89280d2b264f71d9e2dfcf2fa7b28c134c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 22 19:54:29 2007 +0000

    Only use MADV_REMOVE if kernel version is 2.6.19.2 or higher.
    
    Print info message during startup.
    
    Use fallback definition for MADV_REMOVE (9) if headers don't have it. This
    is ok for now, as we're only using it with 2.6.19.2 or higher anyways. It
    would be bad if this feature was unused just because of the headers at build
    time...


 conf.h     |    1 +
 fusion.c   |   46 ++++++++++++++++++++++++++++++++++++++--------
 shm/heap.c |   10 +++++++---
 3 files changed, 46 insertions(+), 11 deletions(-)



commit 38d27ad4f188a6ee1a4ba62290df6c5974722f1f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 22 19:25:54 2007 +0000

    Use cpp templates for 16bpp and 32bpp code.
    - Removes duplicated code.
    - Implements some missing gfx funcs.
    - Fixes missing EXPAND() calls in some acc funcs.
    - Fixes blit direction handling in some 16bpp blit funcs.


 Makefile.am            |    4 
 generic.c              | 2109 ++++---------------------------------------------
 template_acc_16.h      |  331 +++++++
 template_acc_32.h      |  244 +++++
 template_colorkey_16.h |  369 ++++++++
 template_colorkey_32.h |  200 ++++
 6 files changed, 1356 insertions(+), 1901 deletions(-)



commit f3eaefc0cc9fcfe83ae52fd6a87a61790fc7ad16
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 22 03:06:11 2007 +0000

    That's birthday and christmas at once: Glorious MADV_REMOVE! I found you!
    
    If available, the code for freeing blocks in the heap uses
    
    	madvise( ADDRESS(block), blocks * BLOCKSIZE, MADV_REMOVE )
    
    to punch a whole in the tmpfs file (loosing the data) to really free
    the associated physical RAM.
    
    
    You can see the difference in 'ls -l' and 'df'.


 heap.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 66dd3e6aa38f591f146d904cc23a21978b8af132
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 22 02:38:50 2007 +0000

    Good bye shared memory segfault cure handler :)
    
    It'd been so easy. Simply mmap() the whole address range once and
    only ftruncate() for resizing the heap.
    
    No more dynamic remapping, no more pending remap messages...


 heap.c         |   59 +---------------------------
 pool.c         |  116 +--------------------------------------------------------
 shm.c          |   19 ---------
 shm_internal.h |    5 --
 4 files changed, 8 insertions(+), 191 deletions(-)



commit 037867173da06f66f683ff5a4ff745b58dadbb95
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 22 01:24:16 2007 +0000

    Not needed here.


 .cvsignore |    6 ------
 1 file changed, 6 deletions(-)



commit 243628484072c7c6070cb58e3d4f62047c79c1ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 22 01:21:27 2007 +0000

    Replaced 'unlink before (re)open or memset' by a simple O_TRUNC, doooh...


 heap.c |   12 +-----------
 1 file changed, 1 insertion(+), 11 deletions(-)



commit cabc30e828a060cf06ad2b2bda7087e841c77556
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 21 22:39:09 2007 +0000

    Fix version check for automake-1.10.


 autogen.sh |   13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)



commit d6c7ad84ad54362771c37a8ab167c4d908dd6ed7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 21 22:11:25 2007 +0000

    Added a few more formats that make the windowed primary use DWCAPS_ALPHACHANNEL.


 idirectfb.c |    3 +++
 1 file changed, 3 insertions(+)



commit 4005425cc796a538505f689e8653001dfd3182af
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 20 04:04:13 2007 +0000

    Use O_APPEND for FER_SLAVE.


 fusion.c |    2 ++
 1 file changed, 2 insertions(+)



commit 9248605c594822d331733bb57d3028a514ae45fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 14 21:06:45 2007 +0000

    Change minimum pool size (without info table) to 8192 (from 16384).
    A value of 4096 didn't work somehow.


 pool.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit d87e5a6e1950f28530d85ee6d7f7c76d0307ae4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 14 21:03:34 2007 +0000

    Call dfb_windowstack_resize() and dfb_windowstack_repaint_all() later, i.e.
    after the new settings have been written back into the context's config structure.


 layer_context.c |   36 ++++++++++++++++++++----------------
 1 file changed, 20 insertions(+), 16 deletions(-)



commit b14f63813c9fc5dee7737b6ce9986da8bee12f34
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 14 21:02:11 2007 +0000

    Added FCEF_NODIRECT which forces execution of the call in the Fusion
    Dispatch thread even if it's the calling process' own call.


 call.c  |    2 +-
 types.h |    7 ++++---
 2 files changed, 5 insertions(+), 4 deletions(-)



commit 3f64ddc4f1e2ba8a2526b00a8fb09ceacd6975a3
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 11 18:05:24 2007 +0000

    - include <fusion/fusion.h>
    - -framework CoreGraphics is obsolete in OSX 10.4, use ApplicationServices instead


 Makefile.am |    2 +-
 primary.c   |    1 +
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 3549796556d79b5040fef7684a880d25b3925772
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jan 10 18:18:24 2007 +0000

    Some stretch ops didn't start at Xphase.


 generic.c |   22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)



commit 2140dddeea2784c95f63f247badcfe42a424353e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jan 10 18:06:39 2007 +0000

    Fix bugs in RGB18/ARGB1666/ARGB6666 support,
    and eliminate unnecessary gfx functions.


 gfx/convert.c         |    2 
 gfx/convert.h         |   20 -
 gfx/generic/generic.c |  847 +++++++++++++++-----------------------------------
 misc/gfx_util.c       |   44 +-
 4 files changed, 301 insertions(+), 612 deletions(-)



commit 2ffb553edcb8c89c52142bcedfd73356724ff5b5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 10 10:06:36 2007 +0000

    Removed check for sisfb.h.


 configure.in |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 18c76b3613ac42a9a1e79dafb8d648851c994097
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 10 01:57:37 2007 +0000

    Replaced "#ifndef input_absinfo" which doesn't work
    by "#if LINUX_VERSION_CODE < KERNEL_VERSION(2,6,0)".


 linux_input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b17fb847a5a8a8955eec0ed6c2b7863fa670bcc8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 9 23:33:25 2007 +0000

    Make cursor area backing store surface same format as layer.


 default.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 0bde50377717522ef56e6d05587e55161657d699
Author: Marcel Siegert <mws@directfb.org>
Date:   Tue Jan 9 18:34:13 2007 +0000

    added compat defines for touchpad linux input support for
    kernels before 2.6.x;
    should break nothing for now - hopefully :)


 linux_input.c |   31 ++++++++++++++++++++++++++-----
 1 file changed, 26 insertions(+), 5 deletions(-)



commit 875df126b0076169d0ad96d5670e8a93b2169c05
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jan 9 17:24:34 2007 +0000

    Cosmetics.


 generic.c |  363 ++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 181 insertions(+), 182 deletions(-)



commit 03d0e7c2cfe1c44ddeb766167c9e9bff9f9d9030
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 7 22:49:14 2007 +0000

    Don't corrupt the return interface pointer in API methods,
    ie. only set the pointer if the method succeeds.


 idirectfb.c |  143 +++++++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 100 insertions(+), 43 deletions(-)



commit 606026c2b82c22f2bd9bb8a7777c1eaf89b9666a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 7 22:46:03 2007 +0000

    Fix a memory leak.


 idirectfbdatabuffer_file.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 8b164dcd977c3f55e4d88bf1c1785b356dfbf211
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Jan 6 18:09:10 2007 +0000

    Remove a misplaced semicolon.


 linux_input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 34526a3fe61f50f72753325361655f5943a71f9c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 5 17:55:08 2007 +0000

    Nicer shared memory allocation info as in dfbdump.


 shmalloc.c |   18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)



commit e4f5ecc8f753993b2130079020f8ce47655af681
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 5 17:54:51 2007 +0000

    Print shared memory leaks on pool shutdown (debug mode and 'debugshm' option).


 pool.c |    4 ++++
 1 file changed, 4 insertions(+)



commit c5ed38aab5e1b9c94862baf454e3acba27e26ec9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 5 17:53:29 2007 +0000

    Free fake modes on shutdown.


 sdl.c |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)



commit 7f44a10a1856ccb742179baae47f8968e325edde
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 5 17:52:59 2007 +0000

    Added some basic update region management.


 include/directfb_util.h |   54 +++++++++++++++++++++++++
 src/misc/util.c         |  102 ++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 156 insertions(+)



commit ba098e2f65d6b902676b25e63a0ce289d26e62c3
Author: Mark Adams <marka@directfb.org>
Date:   Wed Jan 3 10:42:13 2007 +0000

    Document recommended changes in overlay and AiRGB usage.


 Readme.txt |   26 ++++++++------------------
 1 file changed, 8 insertions(+), 18 deletions(-)



commit 30546551f38405578eaa90ff9cf15fac13beccdc
Author: Mark Adams <marka@directfb.org>
Date:   Tue Jan 2 17:46:19 2007 +0000

    Remove redundant comment.


 uc_accel.c |    4 ----
 1 file changed, 4 deletions(-)



commit 98504be4d8ff16240f0baaff610cbf8235c09138
Author: Mark Adams <marka@directfb.org>
Date:   Tue Jan 2 17:45:58 2007 +0000

    Implemented acceleration for blits involving the AiRGB pixel format.
    
    DSPF_AiRGB is now supported as a source format for most blits and stretch
    blits.  Blits _to_ AiRGB surfaces are also accelerated provided they don't
    require blending.


 uc_accel.h |    4 ++++
 uc_hw.h    |    6 ++++--
 uc_hwmap.c |    9 +++++++--
 uc_hwset.c |    3 ++-
 uc_state.c |   51 ++++++++++++++++++++++++++++++++++++++++++++++++---
 5 files changed, 65 insertions(+), 8 deletions(-)



commit d57ecf551b50302b09e5abaf9d3a12038ef9ca66
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 30 18:26:36 2006 +0000

    Improve touchpad support:
    - Detect touchpads in init.
    - Read min/max coordinates from the device.
    - Add drag support.
    - Clean up the code.


 linux_input.c |  483 +++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 361 insertions(+), 122 deletions(-)



commit cbc098d1f241feecfd3a511bc86ef3ff159c8fb7
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 29 20:31:20 2006 +0000

    Fix some incorrect key mappings. Patch from Stefan Lucke.


 linux_input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit ee675c1efae5b265dff5fb084fcafa017f5b89ad
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Dec 28 11:19:25 2006 +0000

    In IDirectFBSurface_FillRectangles():
    use D_MALLOC/D_FREE instead of malloc/free (thanks to Kamijo Takashi <kamijo@digion.com>).


 idirectfbsurface.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 3f1e06d97b9f0f2539bfcc028e17a1aa90ca133a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 24 14:23:01 2006 +0000

    Avoid locking in HasData().


 idirectfbdatabuffer_file.c |    9 ++-------
 1 file changed, 2 insertions(+), 7 deletions(-)



commit 5ee4aed4a5076543f4706c140de0cdcf10f005f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 22 19:14:42 2006 +0000

    Check bit depth in case of an indexed PNG. Don't assume 8 bit. Added 4 bit
    support.


 idirectfbimageprovider_png.c |   36 +++++++++++++++++++++++++++++-------
 1 file changed, 29 insertions(+), 7 deletions(-)



commit 2e2dd0d00e032a6519538fc26dfe99c1d7e83903
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 20 02:05:32 2006 +0000

    Support DLBM_BACKSYSTEM as a default.


 layer_context.c |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit b35bc079cca2c6f27857cc65a59e166222eb9605
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 20 02:04:07 2006 +0000

    Fall back to /dev/shm if no mount point could be determined.


 shm.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2bb5e7aab54fc6fd2647aff9c7fa515af10fb8e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 20 02:03:04 2006 +0000

    Turn warning into debug.


 heap.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 8baa6c6a3b35ba5ee1676104660b633167a9384a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 14 09:44:22 2006 +0000

    Allow read access to "owned" surfaces.


 surfaces.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 356c9c2b9029109a08bbc8d0f36dad669b907ae5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 13 18:16:30 2006 +0000

    Initialize pointsize register.


 r200_state.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit b34b0f24afe593a81cd4624d7576f390e4a42c94
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 13 18:15:22 2006 +0000

    Must adjust point coordinates by +1.


 r100_3d.c |    3 ++-
 r200_3d.c |    3 ++-
 r300_3d.c |    2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)



commit 620aebc3869d625cf5455c572fe195564eedbec7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Dec 12 20:36:06 2006 +0000

    Check pixelformat when enabling alphachannel (it should be AiRGB, I think).


 uc_primary.c |    3 +++
 1 file changed, 3 insertions(+)



commit f64cf8956260a94dc917689a3b6d4fecafa8e6a5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 11 14:44:25 2006 +0000

    Set RTSP connection type to Close.


 stream.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit e8d8c7b7e59c069c463e6e711ce5d665cabedcbb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 11 13:56:49 2006 +0000

    Implemented seekability over RTSP.


 stream.c |  470 +++++++++++++++++++++++++++++++++++----------------------------
 1 file changed, 266 insertions(+), 204 deletions(-)



commit 72304713577dbef90a1d586145b6d67a3b42358a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 10 00:01:30 2006 +0000

    Fix fusion_hash_iterate() to support a nested fusion_hash_remove() on the
    current item (or others, except the next).


 hash.c |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit c00c96c4f0501036d65eb4f044af7f85a4f729d1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 9 15:35:18 2006 +0000

    Added missing prototype of fusion_hash_size().


 hash.h |    3 +++
 1 file changed, 3 insertions(+)



commit fba1263a10ed786e2ee3684ed67848f47f2b02e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 9 14:47:39 2006 +0000

    Fixed fusion_hash_create() that was not passing the pool pointer to the
    internal function.


 hash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fb8637bf1ed5abb3dd77dfd3d6c9fee98244f149
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Dec 9 11:27:28 2006 +0000

    Autodetect clock skew.


 clock.c |   12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)



commit 4d308b35b0572eb05c1da403f6a8d9fca400c6fd
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 8 12:16:39 2006 +0000

    Fixed a wrong comparison.


 r300_state.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 9acb2361e7e2c057d67cfecc4d28f5fc830913b5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 8 12:15:33 2006 +0000

    Added radeonInvalidateState().


 radeon.c |   29 +++++++++++++++++++++--------
 1 file changed, 21 insertions(+), 8 deletions(-)



commit ab02ecc45130368d8de4ff6c27dfc026d3670e06
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 8 12:14:37 2006 +0000

    Added GraphicsDeviceFuncs::InvalidateState(): notify the driver that
    the current rendering state is no longer valid.


 gfxcard.c |    5 ++++-
 gfxcard.h |    8 +++++++-
 2 files changed, 11 insertions(+), 2 deletions(-)



commit e74fe32d7a028bfdec3e34f0175cb3c8ec09f8e9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 6 14:10:13 2006 +0000

    Dispatch surface's notifications asynchronously.
    
    This change fixes an assertion failure that happens in the following case:
    1. Resize (Downsize) Surface
    ... and immediatly after ...
    2. Blit to Surface


 surfaces.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit a27ab3ff0fd81de547cbccecfb8686f72bfae70a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 6 14:05:13 2006 +0000

    Added fusion_reactor_sync(bool) to specify whether message dispacthing to
    local reactions must be synchronized with global reactions or not
    (i.e. fusion_reactor_sync(false) makes notifications happen immediatly in the dispatcher process).


 reactor.c |   28 ++++++++++++++++++++++++++++
 reactor.h |    9 +++++++++
 2 files changed, 37 insertions(+)



commit e5a3616361f0a3b03dc7c6d0aa6ae0b96b3cdb0e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 6 14:00:27 2006 +0000

    Provided a return value to radeon_waitfifo() and radeon_waitidle().


 radeon.c      |   13 +++++++++----
 radeon_mmio.h |   15 ++++++++++-----
 2 files changed, 19 insertions(+), 9 deletions(-)



commit cdccba6ec52c1b5eb1eeeb89aecb713736877b83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 4 22:52:38 2006 +0000

    Thanks to Vaclav Slavik for fixing loading of mono-only fonts.


 README                                       |    1 +
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   16 +++++++++-------
 2 files changed, 10 insertions(+), 7 deletions(-)



commit 911c44afa750cd93af20717437e1e73ba709994f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 4 17:49:53 2006 +0000

    R300 supports 3D Colorkeying. :)


 r300_state.c  |   51 +++++++++++++++++++++++----------------------------
 radeon.c      |    4 ++--
 radeon_regs.h |    5 +++--
 3 files changed, 28 insertions(+), 32 deletions(-)



commit 91103de9ca26c63125eda9c978915e13d97fdaa8
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 4 11:35:26 2006 +0000

    Implemented r300Blit3D_420, R300StretchBlit_420 and r300TextureTrinangles_420.


 r300_3d.c      |  196 +++++++++++++++++++++++++++++++++++++++++++++++----------
 r300_state.c   |   63 ++++++++++--------
 radeon.c       |   24 ++++--
 radeon_state.h |    5 +
 4 files changed, 222 insertions(+), 66 deletions(-)



commit 1a8122316b26f53e5fd4a932a21ef13e0eb92408
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 3 19:02:05 2006 +0000

    Implemented
     - StretchBlit
     - TextureTriangles
     - Alphablend
     - Deinterlacing
    for the R300 chipset family (thanks to Timon <timon37@interia.pl>).


 Makefile.am     |    3 -
 r300_3d.c       |   96 ++++++++++++++++++++++++++++++++++++++--
 r300_program.h  |    2 
 r300_state.c    |  133 ++++++++++++++++++++++++++++----------------------------
 radeon.c        |   55 ++++++++++++++---------
 radeon_3d.h     |    5 ++
 radeon_regs.h   |    2 
 vertex_shader.h |   83 ++++++++++++++++++++++++++++++++++
 8 files changed, 286 insertions(+), 93 deletions(-)



commit d9c0b1c9475280480f48e4ad3a0061ab3880d238
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Dec 2 09:07:59 2006 +0000

    Allow the DirectFBGL module to Probe the destination surface.


 idirectfbsurface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f9433b8dba5b677ca8936f036d483cbd9cf3591e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Dec 2 09:06:46 2006 +0000

    Workaround for a repeated char (0) within the glyphs table.


 idirectfbfont_default.c |   50 ++++++++++++++++++++++++------------------------
 1 file changed, 26 insertions(+), 24 deletions(-)



commit 420a0afc6b71acf2a046c0f59663f4421d69313d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 1 17:35:44 2006 +0000

    Check for stdbool.h presence during configuration and define DIRECT_BUILD_STDBOOL accordingly.


 configure.in          |    7 ++++++-
 lib/direct/build.h.in |    1 +
 lib/direct/types.h    |   17 ++++++++---------
 3 files changed, 15 insertions(+), 10 deletions(-)



commit 4e6f98284583bba353127dc869c2073142b83af0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 1 14:06:18 2006 +0000

    Added IDirectFBGL::GetProcAddress(), get the address of on OpenGL function
    (required to avoid hard dependency and allow portability between different environments).
    
    Added definition DIRECTFBGL_INTERFACE_VERSION to check interface compatibility.


 directfbgl.h |   14 ++++++++++++++
 1 file changed, 14 insertions(+)



commit 13d1392ed1e0e24c803e54b213666eae3bd261e7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 1 10:43:34 2006 +0000

    Implemented GetID, GetDescription, GetSize, SetPowerMode and WaitForSync.


 dispatcher/idirectfbscreen_dispatcher.c |  110 ++++++++++++++++++++++++++++-
 dispatcher/idirectfbscreen_dispatcher.h |   31 ++++----
 requestor/idirectfbscreen_requestor.c   |  120 ++++++++++++++++++++++++++++----
 3 files changed, 227 insertions(+), 34 deletions(-)



commit e0d89b6dd42eaec32a951809b53692185534a9db
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 1 10:42:27 2006 +0000

    Implemented GetPosition and GetSize.


 dispatcher/idirectfbwindow_dispatcher.c |   44 ++++++++++++++++++++
 requestor/idirectfbwindow_requestor.c   |   68 ++++++++++++++++++++++++++++++--
 2 files changed, 108 insertions(+), 4 deletions(-)



commit b436407dfc07df577c7156771ce8e9fd9ca89738
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Nov 30 17:08:00 2006 +0000

    Added missing methods.


 dispatcher/idirectfbfont_dispatcher.c        |   49 ++++++++
 dispatcher/idirectfbinputdevice_dispatcher.c |   45 +++++++
 dispatcher/idirectfbinputdevice_dispatcher.h |    1 
 dispatcher/idirectfbscreen_dispatcher.c      |   14 ++
 dispatcher/idirectfbwindow_dispatcher.c      |  165 ++++++++++++++++++++++++++-
 dispatcher/idirectfbwindow_dispatcher.h      |    3 
 requestor/idirectfbfont_requestor.c          |   47 +++++++
 requestor/idirectfbinputdevice_requestor.c   |   33 +++++
 requestor/idirectfbwindow_requestor.c        |  129 ++++++++++++++++++++-
 9 files changed, 478 insertions(+), 8 deletions(-)



commit 611b595471da9fc5f007c19f83289bfd260188e9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Nov 30 14:57:49 2006 +0000

    Added missing methods.


 dispatcher/idirectfbsurface_dispatcher.c |  196 +++++++++++++++++++++++++++++--
 dispatcher/idirectfbsurface_dispatcher.h |    4 
 requestor/idirectfbsurface_requestor.c   |  126 +++++++++++++++++++
 3 files changed, 314 insertions(+), 12 deletions(-)



commit 8c344d1fdd92d7be456d6465aef070112bffb285
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 29 11:38:07 2006 +0000

    Added Bop_argb_blend_alphachannel_src_invsrc_Aop_PFI[] as a fast path
    for blending from ARGB with SRCALPHA / INVSRCALPHA.
    Implemented for RGB16 and RGB32 so far.


 generic.c |   84 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 84 insertions(+)



commit 5641b56573b2e5eedbf998aa6bd6c150d7e72e65
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Nov 29 09:32:25 2006 +0000

    C++ fix.


 directfb_util.h |    9 +++++++++
 1 file changed, 9 insertions(+)



commit d36e6023a877717c86c359b93914472a01b3d475
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 28 18:30:19 2006 +0000

    Removed 2.6.18-rc2, added 2.6.18.


 /dev/null                                   |binary
 b/patches/radeonfb-r300fix-2.6.18.patch.bz2 |binary
 2 files changed



commit 50589388c8a9b66637efba874c70e7f19f4d86a3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 28 10:53:42 2006 +0000

    Removed sisfb.h. Put the declarations in sis315_compact.h.


 b/gfxdrivers/sis315/Makefile.am     |    3 
 b/gfxdrivers/sis315/sis315.c        |    4 
 b/gfxdrivers/sis315/sis315.h        |    4 
 b/gfxdrivers/sis315/sis315_compat.h |   79 +++++++++++-
 gfxdrivers/sis315/sisfb.h           |  224 ------------------------------------
 5 files changed, 78 insertions(+), 236 deletions(-)



commit 2454efb92d71fff78af7d3c2804f09a9e64d1bd2
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 26 14:01:26 2006 +0000

    Compare bytes instead of bits when checking for pixelformat compatibility.


 radeon.c |   20 +++++++++-----------
 1 file changed, 9 insertions(+), 11 deletions(-)



commit 20682a6a72f91f385a21d66f91edc077b6a78979
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 26 14:00:02 2006 +0000

    Allow to wait() on a RTSP stream.


 stream.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 080185adf29bc2c3be8e68d934fca3a4c88841c4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 26 13:58:58 2006 +0000

    Be more precise about the behaviour of IDirectFBSurface::Flip().


 directfb.h |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 01c575483b9858703db51d929d61608396ee45d5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Nov 24 23:53:55 2006 +0000

    tslib input driver by Shane Volpe <shanevolpe@gmail.com>. Thanks!
    Support for multiple devices and some coding style cleanups by me.


 configure.in                   |   18 ++
 inputdrivers/Makefile.am       |    5 
 inputdrivers/tslib/.cvsignore  |    6 
 inputdrivers/tslib/Makefile.am |   33 +++++
 inputdrivers/tslib/tslib.c     |  251 +++++++++++++++++++++++++++++++++++++++++
 5 files changed, 312 insertions(+), 1 deletion(-)



commit aed99e3a1e99b997aaa6166185b30fc8b01b156c
Author: Marcel Siegert <mws@directfb.org>
Date:   Fri Nov 24 16:16:09 2006 +0000

    add some personal stuff in .cvsignore
    e.g. kdevelop project files


 .cvsignore |   14 ++++++++++++++
 1 file changed, 14 insertions(+)



commit 594b43580f6bbed705c88de53b09585667e729bb
Author: Marcel Siegert <mws@directfb.org>
Date:   Fri Nov 24 16:10:14 2006 +0000

    add .cvsignore


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit 2bf905595a2999b896b79d61360c2385a07e537e
Author: Marcel Siegert <mws@directfb.org>
Date:   Fri Nov 24 16:09:02 2006 +0000

    add cvsignore


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit 18573a6e1c699d9fa0db336375c7c005658bded2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 24 14:02:55 2006 +0000

    Thanks a lot to Attilio Fiandrotti for adding touchpad support!


 README                                 |    1 
 inputdrivers/linux_input/linux_input.c |  154 +++++++++++++++++++++++++++++++--
 2 files changed, 148 insertions(+), 7 deletions(-)



commit ef443a2d5b45b5451b53edf94ada9525ae93d824
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 24 00:08:14 2006 +0000

    Readded setpgid(0,0) also in system_join().


 fbdev.c |    2 ++
 1 file changed, 2 insertions(+)



commit 765669036f0299d38820dc3101a12faec40bca9e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 23 10:26:13 2006 +0000

    Readded setpgid(0,0) in system_initialize().


 fbdev.c |    2 ++
 1 file changed, 2 insertions(+)



commit 80d78094120294ef382023c37072f621af8a4afd
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 21 16:03:46 2006 +0000

    Need sisfb.h to build.
    Either if sisfb.h is in the include path (i.e. headers come form linux-2.4)
    the driver should not rely on that header because linux-2.6 may be running
    instead and 2.4 and 2.6 versions of sisfb_info are incompatible.


 Makefile.am     |    3 
 sis315.c        |    8 +-
 sis315_compat.h |    2 
 sisfb.h         |  224 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 231 insertions(+), 6 deletions(-)



commit 47d476067194f68435ad01c9cc979a73fd0e204f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 21 14:55:40 2006 +0000

    Fixed warnings (on x86_64).


 fbdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit d5b5b463b0ff6e97d1b543f5eba235b9e3467aaa
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 21 14:36:36 2006 +0000

    Cosmetics.


 configure.in |   62 ++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 34 insertions(+), 28 deletions(-)



commit bd49dc56fb590599aff402b0fb13c99c951a2341
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 21 13:19:35 2006 +0000

    Enable DWOP_SCALE by default for windowed primary surfaces.


 idirectfb.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit e03598c8de76abe339be67ab46dfa83efb0cf1cc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 21 13:18:11 2006 +0000

    In dfb_gfxcard_stretchblit():
    be smart and execute dfb_gfxcard_blit when possible.


 gfxcard.c |    5 +++++
 1 file changed, 5 insertions(+)



commit e54ce388ad0cc5ccd8de3d3008371b0fd648a47b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Nov 20 22:04:44 2006 +0000

    Don't try to immediately allocate the new video instance when reallocating
    a buffer (unless the policy is CSP_VIDEOONLY). Fixes corruption problems
    in XDirectFB caused by window resize failing.


 surfaces.c |   15 ++++++---------
 1 file changed, 6 insertions(+), 9 deletions(-)



commit 0cd7483fae6316eb10da67a4f51c2dadd8a0c9b4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Nov 20 20:52:29 2006 +0000

    v4l2 code still used dfb_surface_soft_lock() without the CoreDFB argument.


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 682a9fa560f2aa2676e22e031f0e8cdbd97538b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 20 11:40:13 2006 +0000

    Readded generic64_memcpy().


 memcpy.c |   72 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 72 insertions(+)



commit 052e2ad9dfbfda4d31dd8c4c59a4add6d0605100
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 19 11:41:44 2006 +0000

    Fix array stride mismatch in FindColorKey(), thanks to Ben Combee!


 idirectfbimageprovider_png.c |   10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)



commit a1e3d13351d026897e388f32eff73b48a8c8170a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 18 11:54:13 2006 +0000

    Fixed incorrect frame delay computation.
    Do not use variadic arguments.


 idirectfbvideoprovider_gif.c |   21 ++++-----------------
 1 file changed, 4 insertions(+), 17 deletions(-)



commit dc692efba341d3dd7060d7822e6da3ebd58739eb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 18 11:08:41 2006 +0000

    Enable passing the actual CoreDFB to all external interfaces
    (excluding DirectFBGL that gets its own IDirectFBSurface).


 idirectfb.c                    |    6 +++---
 media/idirectfbdatabuffer.c    |    2 +-
 media/idirectfbimageprovider.h |    2 ++
 media/idirectfbvideoprovider.c |    3 ++-
 media/idirectfbvideoprovider.h |    3 +++
 5 files changed, 11 insertions(+), 5 deletions(-)



commit 9495ae70670c12631f5f170d08f08c81db4fb3a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 18 10:45:14 2006 +0000

    Added option "no-software" to disable software fallbacks. This is mainly for
    debugging/profiling purpose. It will print out a warning with the operation
    and flags each time a fallback would occur.


 gfx/generic/generic.c |   13 +++++++++++++
 misc/conf.c           |    7 +++++++
 misc/conf.h           |    5 +++--
 3 files changed, 23 insertions(+), 2 deletions(-)



commit 70cdce08db7f11e40a83923ddc971d76ebe69696
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Nov 17 17:28:02 2006 +0000

    Workaround to follow recent API changes (that shouldn't happen between release candidates!!).


 dispatcher/idirectfbdatabuffer_dispatcher.c |    2 +-
 requestor/idirectfb_requestor.c             |    7 ++++---
 requestor/idirectfbdatabuffer_requestor.c   |    2 +-
 3 files changed, 6 insertions(+), 5 deletions(-)



commit aa47c8c6bd7d76fafcb4daec9692f1db0e0543ca
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Nov 17 17:25:49 2006 +0000

    Attempt to make acceleration work on ppc:
    enable acceleration only for formats that have the same pixel size
    as the primary layer (to avoid changing the byte swapper).


 radeon.c |   77 +++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 63 insertions(+), 14 deletions(-)



commit 909a3befdce44240d6a4bfe238b3c4f6b348af48
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 15 02:12:48 2006 +0000

    round 2


 primary.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 2d0fb5e39cd98888f417100c89319ce5c2d74041
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 13 21:42:28 2006 +0000

    Fix SHCALLOC and friends, i.e follow API change.
    
    Can't test myself.


 osx.c     |    4 ++--
 primary.c |   10 +++++-----
 2 files changed, 7 insertions(+), 7 deletions(-)



commit 811f7e113a0c33ea34d88bd017b0c9c0f1682a41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 12 12:19:54 2006 +0000

    Added support for scaled windows.
    
    New window option DWOP_SCALE prevents the surface from being resized when the window
    size on screen changes, i.e. via IDirectFBWindow::Resize() or SetBounds().
    
    The surface can be resized separately using IDirectFBWindow::ResizeSurface() if needed.
    
    New runtime option "scaled=<width>x<height>" scales the window to the specified size
    for 'force-windowed' apps. The surface size will not be affected, still set via "mode=".
    
    
    Try "df_andi --dfb:force-windowed,mode=640x480,scaled=800x600" in a running session!
    
    Also enjoy resizing the window (just scaling differently) using Meta-Ctrl-MouseMotion :)


 include/directfb.h                    |   19 +++++
 src/display/idirectfbsurface_window.c |    4 -
 src/idirectfb.c                       |   15 +++-
 src/misc/conf.c                       |   18 +++++
 src/misc/conf.h                       |    5 +
 src/windows/idirectfbwindow.c         |   25 +++++++
 wm/default/default.c                  |  117 +++++++++++++++++++++++++++-------
 7 files changed, 177 insertions(+), 26 deletions(-)



commit 51e8d6c3b2280fab29de5ecac3e6f9f01cd5f41d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 12 11:33:37 2006 +0000

    Added IDirectFBWindow::SetBounds() to do a move and resize in one step.
    
    Internally this will use existing the WM API that allows changing any
    combination of items in the window configuration. Due to historical reasons
    there has only been one item changed at a time. Now it can happen that both
    flags CWCF_POSITION and CWCF_SIZE are set when calling wm_set_window_config().
    
    The default window manager module got a special function to implement the
    combined move/resize in this case. The older separate move and resize functions
    could be replaced by calling the new function, but that's not done, yet.


 include/directfb.h            |   14 ++++
 src/core/windows.c            |   43 +++++++++++++
 src/core/windows.h            |   10 +++
 src/windows/idirectfbwindow.c |   18 +++++
 wm/default/default.c          |  133 +++++++++++++++++++++++++++++++++++++++---
 5 files changed, 210 insertions(+), 8 deletions(-)



commit 3fab1f8192e5c4c838e2f83e0214778b2705866a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 12 09:54:04 2006 +0000

    Fixed prototype.


 input.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit aeea8d7b2192174bc90bc84d0aa889764916b1b4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 11 09:29:48 2006 +0000

    Skip MMX test on AMD64.


 generic.c |    4 ++++
 1 file changed, 4 insertions(+)



commit d6a4884c465dc7152a1cfebc8dd5d386405280ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 10 21:34:10 2006 +0000

    Support loading of indexed PNG files directly to LUT8 surface.
    
    Provide palette of image via GetSurfaceDescription().


 idirectfbimageprovider_png.c |  177 ++++++++++++++++++++++++++++++++++---------
 1 file changed, 141 insertions(+), 36 deletions(-)



commit cd4c579761c653322422caf32e8b95f015cdf6a1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 10 13:13:30 2006 +0000

    Fixed warning.


 dfbdump.c |    2 ++
 1 file changed, 2 insertions(+)



commit bfe3a678d3399911927b50623eebc6d6315697be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 10 13:06:25 2006 +0000

    #include <unistd.h>


 dfbg.c |    1 +
 1 file changed, 1 insertion(+)



commit 4893a9b7179e7a676d4e51bc696ade21f5316600
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 9 10:59:30 2006 +0000

    Added ability to let only one Fusionee write to a surface,
    set via owner field of CoreSurface.
    
    Had to add CoreDFB* parameter to dfb_surface_software_lock() and
    dfb_surface_hardware_lock() where the owner is being checked.


 interfaces/IDirectFBFont/idirectfbfont_default.c                 |    2 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_dfiff.c |   19 ++-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   13 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |   19 ++-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |   17 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   19 ++-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_gif.c   |   22 +++
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |   22 ++-
 lib/direct/clock.c                                               |   16 ++
 lib/direct/clock.h                                               |    3 
 lib/fusion/shm/heap.c                                            |   15 +-
 src/core/gfxcard.c                                               |    4 
 src/core/input.c                                                 |   10 +
 src/core/layer_context.c                                         |    5 
 src/core/layer_context.h                                         |    3 
 src/core/surfacemanager.h                                        |    6 -
 src/core/surfaces.c                                              |   30 +++--
 src/core/surfaces.h                                              |    8 +
 src/core/windowstack.c                                           |   11 +
 src/core/windowstack.h                                           |    3 
 src/display/idirectfbdisplaylayer.c                              |   15 +-
 src/display/idirectfbdisplaylayer.h                              |    3 
 src/display/idirectfbsurface.c                                   |   15 +-
 src/display/idirectfbsurface.h                                   |    5 
 src/display/idirectfbsurface_layer.c                             |    9 -
 src/display/idirectfbsurface_layer.h                             |    3 
 src/display/idirectfbsurface_window.c                            |    9 -
 src/display/idirectfbsurface_window.h                            |    3 
 src/gfx/generic/generic.c                                        |    4 
 src/idirectfb.c                                                  |   58 ++--------
 src/idirectfb.h                                                  |   30 +++++
 src/media/idirectfbdatabuffer.c                                  |    9 +
 src/media/idirectfbdatabuffer.h                                  |   16 ++
 src/media/idirectfbdatabuffer_file.c                             |    5 
 src/media/idirectfbdatabuffer_memory.c                           |    5 
 src/media/idirectfbdatabuffer_streamed.c                         |    5 
 src/media/idirectfbimageprovider.c                               |    5 
 src/media/idirectfbimageprovider.h                               |    1 
 src/windows/idirectfbwindow.c                                    |    8 +
 src/windows/idirectfbwindow.h                                    |    3 
 systems/osx/primary.c                                            |    2 
 systems/sdl/primary.c                                            |    2 
 systems/vnc/primary.c                                            |    2 
 systems/x11/primary.c                                            |    2 
 wm/default/default.c                                             |   52 +++++---
 wm/unique/uniquewm.c                                             |    2 
 47 files changed, 338 insertions(+), 184 deletions(-)



commit e7da8d24a58774b43821302ddf54ab115e2b247c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 9 10:54:33 2006 +0000

    Removed "Unknown key pressed" message which can happen on supported (via symbol) keys.


 sdlinput.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1e238abcec4aa702384b80a0ea498e17a34d5518
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 5 19:40:45 2006 +0000

    Fix single app build.


 shm_internal.h |    4 ----
 1 file changed, 4 deletions(-)



commit b8b42d3aa866513ea35c3ea746161a8b8c44c1c0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 4 13:25:47 2006 +0000

    Give the WM a chance to provide its own surface.
    
    The WM may link a surface to the window in the PreConfigureWindow() call.


 windows.c |   36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)



commit 1d0967541bf94330595e4dc7b5b6c4409af08798
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 4 13:21:29 2006 +0000

    Removed more.


 surfaces.h |    3 +--
 windows.c  |   10 ----------
 2 files changed, 1 insertion(+), 12 deletions(-)



commit 96dd89fd03f84c0cdb91ed8af87df2831e668453
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 4 13:04:09 2006 +0000

    Removed some obsolete crap.


 src/core/surfaces.c         |    1 -
 src/core/windows.c          |   39 +++------------------------------------
 src/core/windows.h          |   19 -------------------
 src/core/windows_internal.h |    3 ---
 tools/dfbdump.c             |   31 +++++++++++++------------------
 wm/default/default.c        |    5 +----
 wm/unique/context.c         |    9 ++-------
 wm/unique/uwmdump.c         |   31 +++++++++++++------------------
 wm/unique/window.c          |    9 +++------
 9 files changed, 35 insertions(+), 112 deletions(-)



commit 8ae92c06ddd3fa95551fb02194ad08acc63bedf3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 3 00:19:24 2006 +0000

    That was enough for RC3.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e630981153c0c76f88237f37560dcd3e99588198
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 23:56:15 2006 +0000

    Increase row width.


 fonts.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 74f36bfa187ac689ddb0744a98b8fc4385b3c975
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 23:44:54 2006 +0000

    Fixed wrong pixel format index of LUT2.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 559d5759faec519a3956ec8fccc2d5b713e2944b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 23:24:57 2006 +0000

    Make shared memory allocation output use direct_log_printf as for local memory.
    
    Print list of allocations if maximum heap size has been reached.


 shm/heap.c |    1 +
 shmalloc.c |    8 ++++----
 2 files changed, 5 insertions(+), 4 deletions(-)



commit d781a544bb60eb3291ff74567333ddb9befcba47
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 23:06:06 2006 +0000

    Show allocations in both DirectFB shared memory pools with option "-s".
    
    Show FusionID and offset within file/heap.


 dfbdump.c |   70 ++++++++++++++++++++++++++++++++++++++------------------------
 1 file changed, 43 insertions(+), 27 deletions(-)



commit 30edbe51bfb9de91d18a8bc9c282e4f61aa1ce0b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 22:45:10 2006 +0000

    Let "debugmem" option only influence output of allocations, but always track
    them in debug enabled builds.


 mem.c |   17 +----------------
 1 file changed, 1 insertion(+), 16 deletions(-)



commit edc68dcb060bf63c3c67faf14ab1c5e84900b17b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 22:34:47 2006 +0000

    Added options "debugmem" and "debugshm" to turn on local/shared memory allocation
    debugging separately from "debug" option.


 lib/direct/conf.h   |    2 ++
 lib/direct/mem.c    |   22 ++++++++++++++++++----
 lib/fusion/conf.h   |    2 ++
 lib/fusion/fusion.c |    5 +++--
 src/core/core.c     |    5 +++--
 src/misc/conf.c     |   14 ++++++++++++++
 6 files changed, 42 insertions(+), 8 deletions(-)



commit d97ef8adc3ca4d4fa1e48e004acc615c6f111648
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 22:32:38 2006 +0000

    Fixed crash with symbol table lookup code when filename is NULL.


 trace.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit 480000cbe4c3b27c3d543165a3a706a26beced4c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 22:25:10 2006 +0000

    Use direct_memmove() here, too.


 interface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 567660bed608f07d07f0480b04218278ee0af73d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 21:58:50 2006 +0000

    Use memmove() in any overlapping case, don't allow moving downward, because
    the read/write block size of the memcpy() is not known and the difference
    between from and to area is often only a few bytes, e.g. moving trailing items
    after removing an item from an array.


 mem.c    |    2 +-
 memcpy.h |    7 ++++---
 2 files changed, 5 insertions(+), 4 deletions(-)



commit ea7c39df84ae0cd9efd46f79a8cb1d3b08b2bf1d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 21:25:04 2006 +0000

    Include Fusion ID of allocator in debug info.


 shm/heap.c         |   10 ++++------
 shm/shm_internal.h |   11 +++++++----
 shmalloc.c         |   14 ++++++++------
 3 files changed, 19 insertions(+), 16 deletions(-)



commit c0ab69c76ae0c637b7d3c863f71f0e483cc2fd86
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 21:10:07 2006 +0000

    Just for debugging I added the option "-p" to pause() dfbdump.
    
    One could run it as a master and look at the foot print or other
    things that are there before any application specific stuff happens.


 dfbdump.c |    4 ++++
 1 file changed, 4 insertions(+)



commit c6f22948a08317259b5d1ada8cd6c0d8a2ba6673
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 21:06:26 2006 +0000

    Initialize the heap info table to serve for the maximum pool size specified
    at creation of the pool. Previously, the initial table served for 4 MB heap.
    If there were more allocations, the heap info table was reallocated at the
    end of the heap, i.e. at 4 MB making it impossible to ever go back below
    the 4 MB heap size. Next barrier was 8 MB, 16 MB ...these are gone.
    
    Unlink potentially remaining file from a previous session before creating
    the shared memory file in tmpfs.
    
    Removed memset() on the initial heap to take advantage of the actual allocation
    of the pages happening when first accessed. If it's a new file, which it is
    now, it will be zeroed anyways.
    
    The maximum size specified during creation of a pool is now taken as an
    additional size after the heap info table. Previously, it could happen that
    the size was too small to host the fixed sized heap info table.


 shm/heap.c         |   30 +++++++++++++++++++++++++++---
 shm/pool.c         |    8 +++++---
 shm/shm_internal.h |    1 +
 shmalloc.h         |   22 ----------------------
 4 files changed, 33 insertions(+), 28 deletions(-)



commit 057fc7fa22ac6e73c6b20ab75b7a9592f3e6cb33
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 2 20:52:28 2006 +0000

    Fixed two messages not being debug messages.


 debug.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit aeb7f4003cb6a120aeb8894ef808df8383677ff3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Nov 2 13:53:47 2006 +0000

    Fixed hundredths to microseconds conversion.


 idirectfbvideoprovider_gif.c |   33 +++++++++++++++++----------------
 1 file changed, 17 insertions(+), 16 deletions(-)



commit ba55457269f182f614e05d22d7ec709a495a8c98
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Nov 2 11:52:27 2006 +0000

    __inline__ instead of inline (same as typeof).


 list.h   |   12 ++++++------
 memcpy.h |    2 +-
 serial.h |   10 +++++-----
 utf8.h   |    2 +-
 util.h   |   10 +++++-----
 5 files changed, 18 insertions(+), 18 deletions(-)



commit 6b028683917d91cc06221a062bffd75279ae2db1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Nov 2 11:46:12 2006 +0000

    Use __typeof__ instead of typeof because the latter requires standard to be gnu89/gnu99.


 interface.h |    2 +-
 list.h      |    8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 1f536276de06b0628637018ec09821a277fade5a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 1 09:00:12 2006 +0000

    type fixes


 interfaces/IDirectFBFont/idirectfbfont_ft2.c |    2 +-
 src/gfx/generic/generic.c                    |   14 +++++++-------
 2 files changed, 8 insertions(+), 8 deletions(-)



commit b661e583f6e88178367140e4e22f8ba294ee2d50
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 31 11:26:32 2006 +0000

    This was missing from the recent LUT2 commit.
    
    It adds support for LUT2 fonts to the FT2 module.


 idirectfbfont_ft2.c |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit a4abc1531310f4a99be0b482f1ac64bd05253150
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 30 00:37:40 2006 +0000

    Added dgiff.h


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit c43ae3c827623e1f5cd1c934a12b789a56b9f234
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 30 00:12:35 2006 +0000

    shine


 ChangeLog    | 3565 ++++++++++++-----------------------------------------------
 NEWS         |  106 +
 configure.in |    2 
 3 files changed, 841 insertions(+), 2832 deletions(-)



commit b86be9e1819c26487826e45f396e61bcdc39aacf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 30 00:10:11 2006 +0000

    Let'em go...


 matrox/Makefile.am |    1 -
 sis315/Makefile.am |    3 +--
 2 files changed, 1 insertion(+), 3 deletions(-)



commit 41e09f6592d9500783dd6c69346516d657eaee44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 23:26:42 2006 +0000

    Also actually include <linux/sisfb.h> now.


 sis315_compat.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d0a2fd3a61f19ad054be917da489284a340a21c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 23:24:50 2006 +0000

    Change license to LGPL.
    Remove kernel header.
    Build only if <linux/sisfb.h> is found.


 b/configure.in                     |    4 
 b/gfxdrivers/sis315/sis315.c       |   23 ++--
 b/gfxdrivers/sis315/sis315.h       |   23 ++--
 b/gfxdrivers/sis315/sis315_accel.c |   23 ++--
 b/gfxdrivers/sis315/sis315_accel.h |   23 ++--
 b/gfxdrivers/sis315/sis315_state.c |   23 ++--
 b/gfxdrivers/sis315/sis315_state.h |   23 ++--
 gfxdrivers/sis315/sisfb.h          |  173 -------------------------------------
 8 files changed, 75 insertions(+), 240 deletions(-)



commit 7c9f83c3d73516f05dd6375a3d5fc2cf62fc6dc6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 11:16:54 2006 +0000

    Removed GPLed header and made driver build with latest kernel i2c headers.
    
    How about older versions, is there something to be done differently?
    
    Maybe different header files to include?


 b/gfxdrivers/matrox/matrox_maven.c |   34 ++-
 gfxdrivers/matrox/i2c-dev.h        |  361 -------------------------------------
 2 files changed, 29 insertions(+), 366 deletions(-)



commit 34cb23d069898dd800af7d1a7665475a49bb163c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 10:54:42 2006 +0000

    cosmetics


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1ae6b87fbf1c50508a5a69f9b461bab8f0af34b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 10:53:55 2006 +0000

    Changed license to LGPL in these files, thanks to Paul Mackerras |paulus * s amba.org!


 README                              |    1 +
 lib/direct/ppcasm_memcpy.S          |   31 +++++++++++++++++++++++++++----
 lib/direct/ppcasm_memcpy_cachable.S |   31 +++++++++++++++++++++++++++----
 3 files changed, 55 insertions(+), 8 deletions(-)



commit 0263ee03c27b67ee7e71c5ce38bb9de3ea5222f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 29 10:48:35 2006 +0000

    Removed GPL code, mainly optimized x86 memcpy routines. libc seems fastest
    now anyways.


 b/lib/direct/Makefile.am    |    2 
 b/lib/direct/dtest.c        |    4 
 b/lib/direct/memcpy.c       |  467 +-------------------------------------------
 b/src/gfx/generic/generic.c |   48 ++++
 lib/direct/cpu_accel.c      |  229 ---------------------
 lib/direct/cpu_accel.h      |   85 --------
 6 files changed, 60 insertions(+), 775 deletions(-)



commit 794956b6aec1497c236021e40d9d0be1b636fe49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 21:15:22 2006 +0000

    build fix


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 39779d043bc74b0be92014d36fd1c8903d77736a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 20:38:49 2006 +0000

    Breaking the API freeze, but keeping binary compatibility.
    
    This is something that I have forgotten to apply before freezing the API.
    
    Added DSPF_LUT2 being indexed 2 bit per pixel packed, i.e. four pixel in one byte.
    
    Added IDirectFBSurface::SetIndexTranslation() that sets a translation table used for
    fast indexed to indexed pixel format conversion. Negative or undefined values in the
    table will result in no pixel being written.
    
    Added DSBLIT_INDEX_TRANSLATION to do fast indexed to indexed translation, this flag
    is mutual exclusive with all others.
    
    
    So far only LUT2 to LUT8 is supported, used for fast anti-aliased text rendering
    to indexed format. The translation table contains "-1, 36, 37, 38" for example.
    First entry makes the background transparent and the other three are shaded versions
    of the text color.


 include/directfb.h             |   37 ++++++++++++++++++++--
 src/core/gfxcard.c             |   65 ++++++++++++++++++++++-----------------
 src/core/state.c               |   49 ++++++++++++++++++++++++++++-
 src/core/state.h               |   35 +++++++++++++--------
 src/core/surfaces.c            |   19 +++++++++--
 src/core/windows.c             |    7 ++--
 src/display/idirectfbsurface.c |   26 +++++++++++++++
 src/gfx/convert.c              |    5 +++
 src/gfx/generic/generic.c      |   67 +++++++++++++++++++++++++++++++++++++++++
 src/gfx/generic/generic.h      |    3 +
 src/idirectfb.c                |    1 
 src/misc/conf.c                |    4 +-
 wm/default/default.c           |    2 +
 13 files changed, 264 insertions(+), 56 deletions(-)



commit c031ecd3059c82ba3f95681738282ad1ffadd28e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 20:25:16 2006 +0000

    Fix Bop_a8_set_alphapixel_Aop_yuy2() for big endian.


 generic.c |   27 ++++++++++++++++++++++++++-
 1 file changed, 26 insertions(+), 1 deletion(-)



commit 5da12d377c4ec971e345104e5b1c94af85f62667
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 20:23:09 2006 +0000

    In dfb_layer_context_get_primary_region() if increasing the ref count of the
    existing primary region fails, due it being destroyed, wait for a short time
    and try again, probably recreating the region.


 layer_context.c |   99 ++++++++++++++++++++++++++++++++------------------------
 1 file changed, 57 insertions(+), 42 deletions(-)



commit d2ac0696581f9dbd70dfdfc0012c1ccb3357e205
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 20:20:15 2006 +0000

    Don't print an error if an object revived after it's ref count reached
    zero but got increased again before the destructor is called. That applies
    to the multi application core only. In the single application core the
    destructor is called synchronously.


 object.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit fd87ebf9b2320a0a525c537e531aee9896e56432
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 18:47:34 2006 +0000

    No longer create a new process group in dfb_core_create().
    
    No longer use pthread_kill(KILL) which doesn't only kill the specified thread, use pthread_cancel().
    
    Let direct_assert() and others try raise(TRAP) first, then killpg(0,TRAP) and pthread_exit().
    
    At the end of the global signal handler no longer use killpg(0,KILL) but remove all handlers,
    raise(num), abort() and then exit( -num ). But the exit shouldn't be reached.
    
    Register signal handler with empty instead of full blocking mask and use SA_NODEFER except
    for SIGSEGV. Also no longer use SA_RESTART.
    
    Don't take certain locks in core shutdown functions if emergency is true.
    
    Use recursive mutexes in trace support if available.
    
    Check for PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP in configure.


 configure.in         |    6 +++++
 lib/direct/debug.c   |   58 +++++++++++++++++++++------------------------------
 lib/direct/signals.c |   17 ++++++++------
 lib/direct/thread.c  |   13 ++++++-----
 lib/direct/trace.c   |    8 +++++++
 src/core/core.c      |   21 ++++++++++--------
 6 files changed, 68 insertions(+), 55 deletions(-)



commit 73b008e4f20092c61aed03fc2db94722cb249e1c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 28 13:35:54 2006 +0000

    Use other signals than SIGUSR1/SIGUSR2, as defined at the top of the file.


 vt.c |   60 ++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 42 insertions(+), 18 deletions(-)



commit 8ab76006de60ad761be1528e75f7e9898270c1f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 23 09:16:16 2006 +0000

    Define compatibility macros for __ types unless DIRECTFB_NO_CRUFT is defined.


 dfb_types.h |   11 +++++++++++
 1 file changed, 11 insertions(+)



commit 8cce1d2523e84e57aed21d49aed43d78ec68c00e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 23 09:10:14 2006 +0000

    Don't depend on "debug" option when printing interface leakage at exit time.


 interface.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 581797757fb1a966affb1681b19d7fc062397503
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 19 01:22:21 2006 +0000

    Fix software access to chunk less video buffer, was just broken.


 surfacemanager.c |    2 ++
 1 file changed, 2 insertions(+)



commit 595f125c7cabeddeb19ad7a16e7241c52633693b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 17 11:25:05 2006 +0000

    Print warning if object could not be created.


 surfaces.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 6000cbfbe3bda148a91f1fe265040bcee4553c9c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 17 11:24:49 2006 +0000

    Added some D_OOSHM().


 object.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit 1932030c078442763fe859e0966e4ac5c5966850
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 17 09:55:52 2006 +0000

    Renamed CSS_SYSTEM to CSS_NONE.
    
    No longer change buffer storage when system memory instance is valid.
    
    Only set buffer storage once in occupy_chunk() and only clear it once in free_chunk().
    
    This fixes NULL pointer returned by an autovideo lock on video memory instance
    when storage had been set to CSS_SYSTEM while the video instance was still valid.
    In that case (storage != CSS_VIDEO) it returned the auxiliary memory.


 surfacemanager.c |   18 +++---------------
 surfaces.h       |    3 +--
 2 files changed, 4 insertions(+), 17 deletions(-)



commit 0602cf0b7a87d0ee380a8fdea0250555cbeade78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 17 09:52:26 2006 +0000

    Made DFFA_NOCHARMAP work again.
    
    If Unicode/Latin1 failed, try Symbol Encoding and do some 0xf000 magic.


 idirectfbfont_ft2.c |   44 ++++++++++++++++++++++++++++++++++++--------
 1 file changed, 36 insertions(+), 8 deletions(-)



commit bdd04791a1c6232f21668ab48306d0a86fba15c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 15 21:40:43 2006 +0000

    Keep formats sorted!


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 88bd62a8f93e0f039e63ca5c484f26287ce21e00
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 14 13:05:36 2006 +0000

    Thanks to Guillem Jover for fixing the kernel type usage, replaces __u8 by u8 etc.


 gfxdrivers/ati128/ati128.c                                       |   40 
 gfxdrivers/ati128/ati128.h                                       |   12 
 gfxdrivers/ati128/ati128_overlay.c                               |   46 
 gfxdrivers/ati128/ati128_state.c                                 |    6 
 gfxdrivers/ati128/mmio.h                                         |   12 
 gfxdrivers/cle266/hwdoc.txt                                      |    2 
 gfxdrivers/cle266/mmio.h                                         |   14 
 gfxdrivers/cle266/uc_fifo.c                                      |   14 
 gfxdrivers/cle266/uc_fifo.h                                      |    6 
 gfxdrivers/cle266/uc_hwset.c                                     |    2 
 gfxdrivers/cle266/uc_overlay.c                                   |    2 
 gfxdrivers/cle266/uc_overlay.h                                   |   32 
 gfxdrivers/cle266/uc_ovl_hwmap.c                                 |   36 
 gfxdrivers/cle266/uc_ovl_hwset.c                                 |   18 
 gfxdrivers/cle266/uc_probe.c                                     |  404 +-
 gfxdrivers/cle266/uc_probe.h                                     |   54 
 gfxdrivers/cle266/uc_state.c                                     |    4 
 gfxdrivers/cle266/uc_state.h                                     |   44 
 gfxdrivers/cle266/unichrome.c                                    |    8 
 gfxdrivers/cle266/unichrome.h                                    |   74 
 gfxdrivers/cyber5k/cyber5k.c                                     |   40 
 gfxdrivers/cyber5k/cyber5k.h                                     |   14 
 gfxdrivers/cyber5k/mmio.h                                        |   30 
 gfxdrivers/i810/i810.c                                           |    4 
 gfxdrivers/i810/i810.h                                           |   84 
 gfxdrivers/i830/i830.c                                           |   14 
 gfxdrivers/i830/i830.h                                           |  162 
 gfxdrivers/i830/i830_overlay.c                                   |   10 
 gfxdrivers/mach64/mach64.c                                       |   56 
 gfxdrivers/mach64/mach64.h                                       |   12 
 gfxdrivers/mach64/mach64_overlay.c                               |   64 
 gfxdrivers/mach64/mach64_state.c                                 |   38 
 gfxdrivers/mach64/mmio.h                                         |   42 
 gfxdrivers/matrox/matrox.c                                       |  188 
 gfxdrivers/matrox/matrox.h                                       |   10 
 gfxdrivers/matrox/matrox_3d.c                                    |   24 
 gfxdrivers/matrox/matrox_bes.c                                   |   64 
 gfxdrivers/matrox/matrox_crtc2.c                                 |   50 
 gfxdrivers/matrox/matrox_maven.c                                 |   28 
 gfxdrivers/matrox/matrox_maven.h                                 |   12 
 gfxdrivers/matrox/matrox_spic.c                                  |   16 
 gfxdrivers/matrox/matrox_state.c                                 |   62 
 gfxdrivers/matrox/mmio.h                                         |   28 
 gfxdrivers/matrox/regs.h                                         |   10 
 gfxdrivers/neomagic/neo2200.c                                    |   54 
 gfxdrivers/neomagic/neo_overlay.c                                |   18 
 gfxdrivers/neomagic/neomagic.c                                   |    2 
 gfxdrivers/neomagic/neomagic.h                                   |    6 
 gfxdrivers/nvidia/nvidia.c                                       |   18 
 gfxdrivers/nvidia/nvidia.h                                       |   66 
 gfxdrivers/nvidia/nvidia_2d.c                                    |   46 
 gfxdrivers/nvidia/nvidia_3d.c                                    |   50 
 gfxdrivers/nvidia/nvidia_accel.h                                 |   40 
 gfxdrivers/nvidia/nvidia_objects.h                               |   26 
 gfxdrivers/nvidia/nvidia_overlay.c                               |   90 
 gfxdrivers/nvidia/nvidia_primary.c                               |    8 
 gfxdrivers/nvidia/nvidia_regs.h                                  |  488 +-
 gfxdrivers/nvidia/nvidia_state.c                                 |   34 
 gfxdrivers/radeon/r100_3d.c                                      |   36 
 gfxdrivers/radeon/r100_state.c                                   |   64 
 gfxdrivers/radeon/r200_3d.c                                      |   36 
 gfxdrivers/radeon/r200_state.c                                   |   64 
 gfxdrivers/radeon/r300_3d.c                                      |   16 
 gfxdrivers/radeon/r300_state.c                                   |   48 
 gfxdrivers/radeon/radeon.c                                       |   34 
 gfxdrivers/radeon/radeon.h                                       |   84 
 gfxdrivers/radeon/radeon_2d.c                                    |   26 
 gfxdrivers/radeon/radeon_chipsets.h                              |    4 
 gfxdrivers/radeon/radeon_crtc1.c                                 |    2 
 gfxdrivers/radeon/radeon_crtc2.c                                 |   88 
 gfxdrivers/radeon/radeon_mmio.h                                  |   40 
 gfxdrivers/radeon/radeon_overlay.c                               |  122 
 gfxdrivers/radeon/radeon_state.h                                 |    2 
 gfxdrivers/savage/mmio.h                                         |   12 
 gfxdrivers/savage/savage.c                                       |    6 
 gfxdrivers/savage/savage.h                                       |    4 
 gfxdrivers/savage/savage2000.h                                   |    2 
 gfxdrivers/savage/savage3d.c                                     |   12 
 gfxdrivers/savage/savage3d.h                                     |    6 
 gfxdrivers/savage/savage4.c                                      |   12 
 gfxdrivers/savage/savage4.h                                      |    8 
 gfxdrivers/savage/savage_bci.h                                   |    2 
 gfxdrivers/savage/savage_streams_old.c                           |   88 
 gfxdrivers/sis315/sis315.c                                       |   12 
 gfxdrivers/sis315/sis315.h                                       |    4 
 gfxdrivers/sis315/sis315_accel.c                                 |    4 
 gfxdrivers/sis315/sis315_mmio.c                                  |    8 
 gfxdrivers/sis315/sis315_mmio.h                                  |    4 
 gfxdrivers/sis315/sis315_state.c                                 |    8 
 gfxdrivers/sis315/sisfb.h                                        |    2 
 gfxdrivers/tdfx/tdfx.c                                           |   12 
 gfxdrivers/tdfx/tdfx.h                                           |  286 -
 gfxdrivers/unichrome/mmio.h                                      |   12 
 gfxdrivers/unichrome/uc_fifo.c                                   |   14 
 gfxdrivers/unichrome/uc_fifo.h                                   |    6 
 gfxdrivers/unichrome/uc_hwset.c                                  |    2 
 gfxdrivers/unichrome/uc_overlay.c                                |    2 
 gfxdrivers/unichrome/uc_overlay.h                                |   34 
 gfxdrivers/unichrome/uc_ovl_hwmap.c                              |   40 
 gfxdrivers/unichrome/uc_ovl_hwset.c                              |   22 
 gfxdrivers/unichrome/uc_probe.h                                  |    2 
 gfxdrivers/unichrome/uc_spic.c                                   |    6 
 gfxdrivers/unichrome/uc_state.c                                  |    4 
 gfxdrivers/unichrome/uc_state.h                                  |   44 
 gfxdrivers/unichrome/unichrome.c                                 |   10 
 gfxdrivers/unichrome/unichrome.h                                 |   74 
 include/dfb_types.h                                              |   39 
 include/directfb.h                                               |  102 
 inputdrivers/dbox2remote/dbox2remote.c                           |    6 
 inputdrivers/dreamboxremote/dreamboxremote.c                     |    8 
 inputdrivers/ps2mouse/ps2mouse.c                                 |    2 
 inputdrivers/sonypi/sonypi.c                                     |    2 
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c                             |    8 
 inputdrivers/wm97xx_ts/wm97xx_ts.c                               |    8 
 interfaces/IDirectFBFont/idirectfbfont_default.c                 |   10 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |   14 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   64 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    8 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    6 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   14 
 interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.h               |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_gif.c   |   38 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |    4 
 lib/direct/cpu_accel.c                                           |   14 
 lib/direct/cpu_accel.h                                           |    2 
 lib/direct/hash.c                                                |   10 
 lib/direct/hash.h                                                |    8 
 lib/direct/memcpy.c                                              |   36 
 lib/direct/serial.h                                              |    4 
 lib/direct/types.h                                               |    4 
 lib/direct/utf8.h                                                |    8 
 lib/direct/util.c                                                |   32 
 lib/direct/util.h                                                |    6 
 lib/voodoo/manager.c                                             |   28 
 lib/voodoo/message.h                                             |   12 
 lib/voodoo/types.h                                               |    6 
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c              |   18 
 proxy/dispatcher/idirectfbpalette_dispatcher.c                   |    8 
 proxy/dispatcher/idirectfbsurface_dispatcher.c                   |   16 
 proxy/dispatcher/idirectfbwindow_dispatcher.c                    |   14 
 proxy/requestor/idirectfbdisplaylayer_requestor.c                |   18 
 proxy/requestor/idirectfbpalette_requestor.c                     |    8 
 proxy/requestor/idirectfbsurface_requestor.c                     |   16 
 proxy/requestor/idirectfbwindow_requestor.c                      |   12 
 src/core/colorhash.c                                             |    8 
 src/core/colorhash.h                                             |    8 
 src/core/fonts.c                                                 |    8 
 src/core/fonts.h                                                 |    2 
 src/core/gfxcard.c                                               |    2 
 src/core/gfxcard.h                                               |    2 
 src/core/layer_context.c                                         |    6 
 src/core/layer_context.h                                         |   14 
 src/core/layers.h                                                |    4 
 src/core/palette.c                                               |   20 
 src/core/palette.h                                               |    8 
 src/core/state.h                                                 |    4 
 src/core/surfaces.c                                              |   30 
 src/core/surfaces.h                                              |   12 
 src/core/windows.c                                               |    4 
 src/core/windows.h                                               |    6 
 src/core/windows_internal.h                                      |    2 
 src/core/windowstack.c                                           |    4 
 src/core/windowstack.h                                           |    2 
 src/display/idirectfbdisplaylayer.c                              |   18 
 src/display/idirectfbpalette.c                                   |    8 
 src/display/idirectfbsurface.c                                   |   24 
 src/display/idirectfbsurface.h                                   |   16 
 src/gfx/convert.c                                                |    8 
 src/gfx/convert.h                                                |   58 
 src/gfx/generic/generic.c                                        | 1982 +++++-----
 src/gfx/generic/generic.h                                        |   28 
 src/gfx/generic/generic_64.h                                     |   68 
 src/gfx/generic/generic_mmx.h                                    |   52 
 src/gfx/generic/yuvtbl-gen.c                                     |   10 
 src/gfx/generic/yuvtbl.h                                         |   16 
 src/media/idirectfbfont.c                                        |    6 
 src/misc/conf.c                                                  |    2 
 src/misc/gfx_util.c                                              |  146 
 src/misc/gfx_util.h                                              |    4 
 src/windows/idirectfbwindow.c                                    |   14 
 systems/fbdev/agp.c                                              |   10 
 systems/fbdev/fb.h                                               |  148 
 systems/fbdev/fbdev.c                                            |   22 
 tools/dfbg.c                                                     |    2 
 tools/dfbscreen.c                                                |    4 
 tools/dfbsummon.c                                                |    2 
 tools/directfb-csource.c                                         |   12 
 tools/mkdfiff.c                                                  |   12 
 tools/mkdgiff.c                                                  |   14 
 tools/raw32toraw24.c                                             |    4 
 wm/default/default.c                                             |   36 
 wm/unique/internal.h                                             |    2 
 wm/unique/test_color.c                                           |    2 
 wm/unique/window.c                                               |    6 
 194 files changed, 3884 insertions(+), 3881 deletions(-)



commit 676c74dea81f0e11f9ebebff375c676378f2b6f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 12 20:58:07 2006 +0000

    Added missing unistd.h include, thanks to Shane <shanevolpe@gmail.com>!


 README          |    1 +
 tools/mkdfiff.c |    1 +
 2 files changed, 2 insertions(+)



commit dc3a14e04168539a4434ed53f24b3ed6cb11425f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 12 11:23:00 2006 +0000

    Build mkdfiff only if PNG support is enabled.


 Makefile.am |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 17b8e8a124e4128694f33de95fee34507e14ca51
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Oct 10 00:15:22 2006 +0000

    Don't include config.h in direct/types.h. Fix stdbool.h warnings.


 gfxdrivers/ati128/ati128.c              |    2 ++
 gfxdrivers/ati128/ati128_overlay.c      |    2 ++
 gfxdrivers/ati128/ati128_state.c        |    2 ++
 gfxdrivers/cle266/uc_accel.c            |    2 ++
 gfxdrivers/cle266/uc_fifo.c             |    2 ++
 gfxdrivers/cle266/uc_hwmap.c            |    2 ++
 gfxdrivers/cle266/uc_hwset.c            |    2 ++
 gfxdrivers/cle266/uc_overlay.c          |    2 ++
 gfxdrivers/cle266/uc_ovl_hwmap.c        |    2 ++
 gfxdrivers/cle266/uc_ovl_hwset.c        |    2 ++
 gfxdrivers/cle266/uc_state.c            |    2 ++
 gfxdrivers/cle266/unichrome.c           |    2 ++
 gfxdrivers/cyber5k/cyber5k_underlay.c   |    2 ++
 gfxdrivers/i810/i810.c                  |    3 +++
 gfxdrivers/i810/i810_overlay.c          |    2 ++
 gfxdrivers/i830/i830.c                  |    3 +++
 gfxdrivers/i830/i830_overlay.c          |    2 ++
 gfxdrivers/mach64/mach64.c              |    2 ++
 gfxdrivers/mach64/mach64_overlay.c      |    2 ++
 gfxdrivers/mach64/mach64_state.c        |    2 ++
 gfxdrivers/matrox/matrox_bes.c          |    2 ++
 gfxdrivers/matrox/matrox_crtc2.c        |    2 ++
 gfxdrivers/matrox/matrox_screen_crtc2.c |    2 ++
 gfxdrivers/matrox/matrox_spic.c         |    2 ++
 gfxdrivers/matrox/matrox_state.c        |    2 ++
 gfxdrivers/neomagic/neo2200.c           |    2 ++
 gfxdrivers/neomagic/neo_overlay.c       |    2 ++
 gfxdrivers/neomagic/neomagic.c          |    2 ++
 gfxdrivers/nsc/nsc.c                    |    4 +++-
 gfxdrivers/nsc/nsc_galfns.c             |    6 ++++--
 gfxdrivers/nvidia/nvidia_state.c        |    2 ++
 gfxdrivers/savage/savage.c              |    2 ++
 gfxdrivers/savage/savage2000.c          |    2 ++
 gfxdrivers/savage/savage3d.c            |    2 ++
 gfxdrivers/savage/savage4.c             |    2 ++
 gfxdrivers/sis315/sis315.c              |    4 +++-
 gfxdrivers/sis315/sis315_accel.c        |    4 +++-
 gfxdrivers/sis315/sis315_state.c        |    4 +++-
 gfxdrivers/tdfx/tdfx.c                  |    2 ++
 gfxdrivers/unichrome/uc_accel.c         |    2 ++
 gfxdrivers/unichrome/uc_fifo.c          |    2 ++
 gfxdrivers/unichrome/uc_hwmap.c         |    2 ++
 gfxdrivers/unichrome/uc_hwset.c         |    2 ++
 gfxdrivers/unichrome/uc_overlay.c       |    2 ++
 gfxdrivers/unichrome/uc_ovl_hwmap.c     |    2 ++
 gfxdrivers/unichrome/uc_ovl_hwset.c     |    2 ++
 gfxdrivers/unichrome/uc_spic.c          |    2 ++
 gfxdrivers/unichrome/uc_state.c         |    2 ++
 gfxdrivers/unichrome/unichrome.c        |    2 ++
 inputdrivers/dynapro/dynapro.c          |    2 ++
 inputdrivers/elo/elo.c                  |    2 ++
 inputdrivers/gunze/gunze.c              |    2 ++
 inputdrivers/joystick/joystick.c        |    2 ++
 inputdrivers/keyboard/keyboard.c        |    2 ++
 inputdrivers/linux_input/linux_input.c  |    2 ++
 inputdrivers/lirc/lirc.c                |    2 ++
 inputdrivers/mutouch/mutouch.c          |    2 ++
 inputdrivers/penmount/penmount.c        |    2 ++
 inputdrivers/ps2mouse/ps2mouse.c        |    2 ++
 inputdrivers/serialmouse/serialmouse.c  |    2 ++
 inputdrivers/sonypi/sonypi.c            |    2 ++
 inputdrivers/wm97xx_ts/wm97xx_ts.c      |    2 ++
 lib/direct/dtest.c                      |    2 ++
 lib/direct/types.h                      |    4 ----
 src/core/layer_context.c                |    2 ++
 src/core/layer_region.c                 |    2 ++
 systems/x11/xwindow.c                   |    2 ++
 tools/dfbdump.c                         |    2 ++
 tools/dfbsummon.c                       |    2 ++
 69 files changed, 144 insertions(+), 10 deletions(-)



commit c22e82ecfd58992193c6f42727dcdf976811309f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Oct 9 23:53:53 2006 +0000

    Silence a compiler warning.


 fbdev.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit f0701d7a62988f7d19d17407ba41fe7e59e18de1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Oct 9 23:53:15 2006 +0000

    Ignore repeat events for mouse buttons.


 linux_input.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 10a4d8721196a0495d6326a2420fe72bb70e9e47
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Oct 9 23:52:07 2006 +0000

    Disable dithering when doing alpha blended blits. Dithering it is applied
    even when the source pixels are completely transparent. This change makes
    the mouse cursor look sane.


 mach64_state.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 6e26969bcc7a7cae72654c60b316dc2fe41c3827
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 9 20:24:37 2006 +0000

    Added D_WARN() in dfb_gfxcard_reserve_memory() for each case in which allocation fails.


 gfxcard.c |   30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)



commit f2546210359388095a1187e0cff9008be5d2c05f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 9 20:19:21 2006 +0000

    Yuck! The "tmpfs" option was ignored for quite some time.


 shm.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 5e09ca1ddd900cdc99aa84a4031f8d05d2776591
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 9 08:09:39 2006 +0000

    DGIFF - DirectFB Glyph Image File Format
    
    Added a new font module and a tool called mkdgiff to generate .dgiff from .ttf or other.
    
    Purpose of DGIFF is to offload as much as possible from runtime, especially during
    application startup when loading the default or system fonts. mkdgiff uses FreeType2
    to load the glyphs of the font and stores them in one or more ready to use font cache
    rows, up to 2047 pixels wide right now.
    
    The loader creates preallocated surfaces from the mmapped font file. The only copy ever
    made would be when the surface is transfered to video memory for acceleration.
    
    DGIFF supports different sizes of one face in a single file.
    
    You can specify these options on the mkdgiff command line:
    
       -f, --format    <pixelformat>   Choose the pixel format (default A8)
       -s, --sizes     <s1>[,s2...]    Choose sizes to generate glyph images for


 include/dgiff.h                                |   94 ++++
 interfaces/IDirectFBFont/Makefile.am           |   10 
 interfaces/IDirectFBFont/idirectfbfont_dgiff.c |  338 ++++++++++++++
 tools/.cvsignore                               |    1 
 tools/Makefile.am                              |   10 
 tools/mkdgiff.c                                |  579 +++++++++++++++++++++++++
 6 files changed, 1031 insertions(+), 1 deletion(-)



commit 63607c8aa5ae4bedec39cfa0660f80587103d610
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Oct 6 12:09:53 2006 +0000

    readdir_r() instead of readdir().


 modules.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 9f4e4519997401f934575699510ab7eb47a0e915
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Oct 5 12:27:51 2006 +0000

    Fixed username/password parsing.


 stream.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 90b3c513b4ef08d66e61bea85b3f662b45c6afeb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 5 10:03:33 2006 +0000

    Plugged mem leak of AttachedWindow struct when DetachEventBuffer() happens
    after the window has been destroyed.


 input/idirectfbinputbuffer.c |   14 +++++++-------
 windows/idirectfbwindow.c    |    3 ---
 2 files changed, 7 insertions(+), 10 deletions(-)



commit 2d564735169fc46eb91458b390cae7c393d74fe7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 5 07:06:09 2006 +0000

    Use libpng-config if present. Thanks to Gery <gxkahn-et-gmail.com>!


 README       |    1 +
 configure.in |   10 ++++++++++
 2 files changed, 11 insertions(+)



commit 65819c113c1e6869a52edc12393c081f9c752b32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 4 11:44:48 2006 +0000

    Safely cycle through nodes while freeing them.


 hash.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit f5d3dd0d584d8684fbcca32c0c6bbcf3c15b6aa4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 4 10:14:01 2006 +0000

    typo


 wm97xx_ts.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b30e5e41c01f9bebb4c6eea6456aaff7b8d4dd56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 4 10:12:43 2006 +0000

    Fix vendor strings.


 gfxdrivers/ati128/ati128.c         |    2 +-
 inputdrivers/wm97xx_ts/wm97xx_ts.c |    3 +--
 src/core/gfxcard.h                 |    2 +-
 src/core/input.h                   |    2 +-
 src/core/system.h                  |    2 +-
 src/gfx/generic/generic.c          |    3 +--
 6 files changed, 6 insertions(+), 8 deletions(-)



commit cba26f9d02423522819ae8a324e922784dd75707
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 4 10:05:40 2006 +0000

    Fixed vendor string.


 default.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0e600cda403b1859a5084e67ddad67827bd2a846
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 4 10:04:25 2006 +0000

    Fix vendor strings.


 h3600_ts/h3600_ts.c       |    3 +--
 joystick/joystick.c       |    3 +--
 keyboard/keyboard.c       |    3 +--
 linux_input/linux_input.c |    3 +--
 lirc/lirc.c               |    3 +--
 ps2mouse/ps2mouse.c       |    3 +--
 serialmouse/serialmouse.c |    3 +--
 7 files changed, 7 insertions(+), 14 deletions(-)



commit ac94b2ebc28cf6cc28c8c8357e48b9869c1501d9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Oct 3 12:19:15 2006 +0000

    Use readdir_r() instead of readdir().


 interface.c |   10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)



commit 784530e8a32a6074d637b04d8e6a9fe1ca029bd9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Oct 2 15:18:56 2006 +0000

    Replaced the usage of setitimer()+recv() in net_peek() with a single call to select().


 stream.c |   77 +++++++++++----------------------------------------------------
 1 file changed, 14 insertions(+), 63 deletions(-)



commit 829e04ca231c443b7b1606e9bf5d9350fdfe84ea
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Oct 2 12:18:39 2006 +0000

    Print only a debug message if palette could not be retrieved/restored.


 fbdev.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit c3f2b4b997f41e6ecc76ecc355cbd61867dc19d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 2 06:38:06 2006 +0000

    Added option "primary-only" to tell applications only about the primary layer,
    pretending there are no others.


 display/idirectfbscreen.c |   23 +++++++++++++++--------
 idirectfb.c               |   30 +++++++++++++++++++++++-------
 misc/conf.c               |   26 +++++++++++++++-----------
 misc/conf.h               |    7 ++++---
 4 files changed, 57 insertions(+), 29 deletions(-)



commit 7e8dd6149557eb8532bbf037d914b55ebd0505f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 1 09:23:53 2006 +0000

    will


 ChangeLog |23873 +++++++++++++++++++++++++++++++++++++-------------------------
 NEWS      |  243 
 2 files changed, 14743 insertions(+), 9373 deletions(-)



commit abecc74013c02f5d4c7f2beb855aafb706388a07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 1 07:13:19 2006 +0000

    Complete last fix.


 generic.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 73d6d5fdcf3a6da56c7f0f2c0a0bb1003932a4c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 1 07:11:37 2006 +0000

    Fix ARGB1555 color keyed blitting which dropped the alpha channel.


 generic.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit c07792b19ccb7f34d45c75e9e3e36f6ebf8d69df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 1 00:16:09 2006 +0000

    Fixed missing fusion_world_set_fork_action() in single app build.


 fusion.c |   10 ++++++++++
 1 file changed, 10 insertions(+)



commit 4e28d34acf7a2c2da117328350e11565f5dad915
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 1 00:08:51 2006 +0000

    Patch from Stefan Lucke that adds IDirectFBSurface::GetFramebufferOffset().


 include/directfb.h             |    9 +++++++++
 src/display/idirectfbsurface.c |   38 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 47 insertions(+)



commit e0c7700a5fe0fa279a5f0787dde8724e303fb270
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 23:36:31 2006 +0000

    Added IDirectFBDisplayLayer::SwitchContext() that switches between the shared
    and the exclusive context if present.


 include/directfb.h                  |   14 +++++++
 src/display/idirectfbdisplaylayer.c |   69 ++++++++++++++++++++++++++----------
 2 files changed, 64 insertions(+), 19 deletions(-)



commit 08c9f3ddf541cf41bcd0d979aec60d244fea10dd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 23:27:54 2006 +0000

    Patch from Daniel Laird to allow connectors to be selected at the encoders
    without the need to define outputs. Additionally, slow blanking has been added.


 include/directfb.h            |   17 ++++++++++++++---
 src/display/idirectfbscreen.c |    6 ++++++
 tools/dfbinfo.c               |   12 ++++++++++++
 3 files changed, 32 insertions(+), 3 deletions(-)



commit f2b1bb23e7148891e10a81cda7e85e3139e92f67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 23:16:55 2006 +0000

    Added IDirectFBFont::GetStringBreak() to break a text line by line.
    
    Thanks to sridewa <sridewa@gmail.com> for the initial patch!


 include/directfb.h        |   30 ++++++++++++
 src/media/idirectfbfont.c |  113 ++++++++++++++++++++++++++++++++++++++++++----
 2 files changed, 134 insertions(+), 9 deletions(-)



commit f4bba0f41249b146adf0cc892971083882feb257
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 22:46:24 2006 +0000

    Disable hardware cursor in VIA_REG_CURSOR_MODE.
    
    Thanks to Michel van Noorloos <michel.van.noorloos@sioux.nl>!


 README                           |    1 +
 gfxdrivers/unichrome/unichrome.c |    2 ++
 2 files changed, 3 insertions(+)



commit fcd8ccf251bb42ecba4bb97b7e075572f067bdf9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 21:17:43 2006 +0000

    New 3M DynaPro Touchscreen driver, thanks to Pr Degerman <parde@ikp.liu.se>!


 README                           |    2 
 configure.in                     |   16 +
 inputdrivers/Makefile.am         |    5 
 inputdrivers/dynapro/Makefile.am |   27 +++
 inputdrivers/dynapro/dynapro.c   |  346 +++++++++++++++++++++++++++++++++++++++
 5 files changed, 394 insertions(+), 2 deletions(-)



commit 45b09dd67452db159509d5d048dce0232014d007
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 21:16:08 2006 +0000

    Recent vararg patch was missing some of the necessary changes.


 IDirectFBFont/idirectfbfont_default.c                |   11 +++++++++++
 IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    9 ++++++++-
 2 files changed, 19 insertions(+), 1 deletion(-)



commit 569ad4481b1097247324c320a8f0bde4542fb424
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 20:16:14 2006 +0000

    This patch fixes inconsistency in usage of variable arguments.
    
    
    The function Construct is of type:
    typedef DirectResult (*DirectInterfaceGenericConstructFunc)( void *interface,
    .. );
    
    
    One possible implementation of the function looks like this:
    
    static DFBResult
    Construct( IDirectFBImageProvider *thiz,
               IDirectFBDataBuffer    *buffer )


 IDirectFBFont/idirectfbfont_default.c                 |    9 ++------
 IDirectFBFont/idirectfbfont_ft2.c                     |   20 ++++++++++++------
 IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   13 +++++++++--
 IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    4 +--
 IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |   13 +++++++++--
 IDirectFBImageProvider/idirectfbimageprovider_png.c   |   12 +++++++++-
 IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |   13 +++++++++--
 7 files changed, 60 insertions(+), 24 deletions(-)



commit f78f307aef017aa13a7fe6139c8f8001c67806f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 19:56:31 2006 +0000

    Made "Parsing config file..." a debug message.


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit da6484df4cde6564b887b25a4b6a2f84c0f26253
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 19:52:19 2006 +0000

    a bit more chiefly


 directfb.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c63049e0d47c0ae50549e47b485db96033201cd4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 16:15:34 2006 +0000

    Thanks to Stefan Lucke for fixing overlay destination color keying for
    8/15/16 bit primary layer formats and adding a "i8xx_overlay_pipe_b" option!


 gfxdrivers/i830/i830_overlay.c |   35 +++++++++++++++++++++++++++--------
 src/misc/conf.c                |    5 +++++
 src/misc/conf.h                |    1 +
 3 files changed, 33 insertions(+), 8 deletions(-)



commit 4976dd3363743f6416295b8ea3aecb42d664a1d4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 30 16:08:16 2006 +0000

    Rewrote one line interface descriptions.


 directfb.h |   33 ++++++++++++++-------------------
 1 file changed, 14 insertions(+), 19 deletions(-)



commit 752fe9cd5951dfa4103e82ce43bb0e6a64ff3ad9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 29 11:50:25 2006 +0000

    Prepare for version 1.0.0-rc1!
    
    The overdone banner text is a placeholder :-)


 configure.in   |   10 +++++-----
 src/directfb.c |   11 +++++------
 2 files changed, 10 insertions(+), 11 deletions(-)



commit d19b26cbcc7c64c2d3e3ef35c96a5fc8127d2252
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 14:12:16 2006 +0000

    Fix pure release build.


 fusion_reactor.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 2bcb01589f2a037e9117c4d4e21c7fd73f12e9f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 13:50:39 2006 +0000

    Fix warnings.


 stream.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit 4d73cf58a459cb626334b682855208143f9f4e17
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 12:48:32 2006 +0000

    Detach from shm pools when leaving in fusion_shm_deinit().
    
    This fixes mremap errors after reentering a world.


 shm.c |   20 ++++++++++++++++----
 1 file changed, 16 insertions(+), 4 deletions(-)



commit 8b20b296996e9b75b4d8fdf3df7a7f56e63dabbd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 01:16:07 2006 +0000

    Hmm, seems the debug domain is required if DIRECT_BUILD_NETWORK is true.


 stream.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 7c1aa30cbd307be0c8ddd16831bb5dc0ec52db0e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 01:11:13 2006 +0000

    Fixed warning about unused debug domain by commenting it out.


 stream.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 589828e69ef3e438565a824489567f1fa5d61fc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 28 00:35:51 2006 +0000

    Install internal headers.


 Makefile.am     |   30 +++++++++++++++---------------
 shm/Makefile.am |    6 +++---
 2 files changed, 18 insertions(+), 18 deletions(-)



commit d103c23abfd5b8e03c339592e9a29cc73ffdf611
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 22:22:16 2006 +0000

    Add stdbool.h to AC_CHECK_HEADERS.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7474324986816306b116be02da6171bc1aa4b748
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 22:20:37 2006 +0000

    Include config.h if HAVE_CONFIG_H is defined and include stdbool.h if HAVE_STDBOOL_H is defined.
    
    If still no bool is declared after this, show a warning with instructions:
    
    "bool definition herein is not 100% compliant,
     add AC_CHECK_HEADERS(stdbool.h) to your configure.in
     or define HAVE_STDBOOL_H or NO_WARN_STDBOOL."


 types.h |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit f129bd488dce35169972bd087ce9af14206d0212
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 21:46:47 2006 +0000

    No longer unref source after usage by Blit() & Co. This was a recent hotfix
    which dragged down performance and is now reverted.
    
    Instead I added ReleaseSource():
    
    "Release possible reference to source surface.
    
     For performance reasons the last surface that has been used for Blit() and others stays
     attached to the state of the destination surface to save the overhead of reprogramming
     the same values each time.
    
     That leads to the last source being still around regardless of it being released
     via its own interface. The worst case is generation of thumbnails using StretchBlit()
     from a huge surface to a small one. The small thumbnail surface keeps the big one alive,
     because no other blitting will be done to the small surface afterwards.
    
     To solve this, here's the method applications should use in such a case."


 include/directfb.h             |   18 ++++++++++++++++++
 src/display/idirectfbsurface.c |   31 +++++++++++++------------------
 2 files changed, 31 insertions(+), 18 deletions(-)



commit b65a672a1f7c7dbf383342b43dfbb4a997fba441
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 21:11:39 2006 +0000

    In addition to DIRECT_FORCE_DEBUG one can use DIRECT_ENABLE_DEBUG now.


 direct/debug.h     |    4 ++--
 direct/interface.h |    2 +-
 direct/mem.h       |    2 +-
 fusion/shmalloc.h  |    2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)



commit 0827bec7e8c2204d5eade78160fca072244ad383
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 21:09:15 2006 +0000

    Only duplicate used portion of array in direct_trace_copy_buffer(), set limit from 256 to 200.


 trace.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit 5d3038ca4179c3b3c61e0e92108cb722c8eb35fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 20:17:04 2006 +0000

    Added global function pointer __DFB_CoreRegisterHook with __DFB_CoreRegisterHookCtx
    to allow application level layer (and screen) implementations building on top of
    existing layers.
    
    The callback happens during DirectFBCreate(), right after the driver's register
    calls, the application can call dfb_screens_register() and dfb_layers_register(),
    right before all registered implementations get activated.


 gfxcard.c |    7 +++++++
 gfxcard.h |    6 ++++++
 2 files changed, 13 insertions(+)



commit 15d1b138554de065f15d99915ab28e0df97f36d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 19:42:36 2006 +0000

    Fix build when including header in C++ code.


 lib/direct/interface.h |    2 +-
 src/core/surfaces.h    |    8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 5534352f92b46262262d62c259d9cd5e489757ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 26 19:41:28 2006 +0000

    Rework structure of wm_update_cursor() implementation, fixing a failing assertion.


 default.c |  132 +++++++++++++++++++++++++++++---------------------------------
 1 file changed, 63 insertions(+), 69 deletions(-)



commit 31473a446d3f1214cff1baf5164116cf2d24503b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Sep 26 10:28:35 2006 +0000

    Fixed warnings about uninitialized variable.


 stream.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 4be72123e955acf5898c82fd78bf53a00f38f8d4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 25 12:40:14 2006 +0000

    Faster response matching (use only sscanf()).


 stream.c |   42 ++++++++++++++++++------------------------
 1 file changed, 18 insertions(+), 24 deletions(-)



commit 3b7000cfd50009c13a1935123bcdb23fb97ac65a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Sep 24 19:46:56 2006 +0000

    Fixed FTP response handling.


 stream.c |   27 +++++++++++++++------------
 1 file changed, 15 insertions(+), 12 deletions(-)



commit 53ae0ec80c73a0dacb247205626d730e79c4bf55
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Sep 24 17:53:14 2006 +0000

    Added:
     - BSWAP16 and BSWAP32 macros
     - direct_base64_encode (moved from Direct/Stream) and direct_base64_decode
     - direct_md5_sum


 util.c |  213 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 util.h |   20 ++++++
 2 files changed, 233 insertions(+)



commit 5a748d95c9265d383f94712ff0d475605732724a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Sep 24 17:51:13 2006 +0000

    Added option --enable-netork to enable/disable building network protocols handlers.
    
    Reworked Direct/Stream to gain more efficiency.
    
    Added rtsp:// protocol support to Direct/Stream.
    This implementation supports both Standard and RealMedia protocol.
    It works by outputting either raw packets (e.g. audio/mpeg stream) or
    a RMF (.rm) container stream.


 configure.in          |   12 
 lib/direct/build.h.in |    1 
 lib/direct/stream.c   | 1500 +++++++++++++++++++++++++++++++++-----------------
 lib/direct/stream.h   |    3 
 4 files changed, 1034 insertions(+), 482 deletions(-)



commit fd3a08be1eaffd0b0c78122b225ceb098d849f8c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 22 08:17:20 2006 +0000

    In trim(): check if e > s.


 stream.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e7b3cd88bd86ff5c2770fcb78ec1822f32601753
Author: Mike Emmel <memmel@directfb.org>
Date:   Wed Sep 20 16:03:17 2006 +0000

    Adding support for the 18bpp format family
    these have 6 bits per pixel and use 3 bytes.
    This format is used in  embedded platform lcd controllers.


 include/directfb.h        |   12 
 src/core/surfaces.c       |    3 
 src/gfx/convert.c         |   14 
 src/gfx/convert.h         |   18 
 src/gfx/generic/generic.c | 1196 ++++++++++++++++++++++++++++++++++++++++++++++
 src/idirectfb.c           |    3 
 src/misc/conf.c           |    3 
 src/misc/gfx_util.c       |   37 +
 systems/fbdev/fbdev.c     |   42 +
 9 files changed, 1327 insertions(+), 1 deletion(-)



commit 4c759e6f2649f78c2d628b048b9a33f5924dba15
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 18 17:42:14 2006 +0000

    In trim(): clear to zero trailing spaces.


 stream.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit dbb8aed829ee1e85d0c80f44c8f3f79755528ca6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 18 13:51:48 2006 +0000

    unsv:// protocol support (acronymous for http://).


 stream.c |    9 +++++----
 stream.h |    1 +
 2 files changed, 6 insertions(+), 4 deletions(-)



commit 1a35f3d6c2e5075406a125959218466d9e550d4a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 18 10:16:14 2006 +0000

    Treat http headers case-insensitive and accept any kind of spaces within them.


 stream.c |   39 ++++++++++++++++++++++++---------------
 1 file changed, 24 insertions(+), 15 deletions(-)



commit 36fc07b13d69d589fea3950e09ecfa787ef2b5cf
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 18 09:32:33 2006 +0000

    Support Icecast protocol within http.


 stream.c |   23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)



commit 803832c6588dc7b28cc434a0005ffd7a1021d5dd
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Sep 17 13:08:14 2006 +0000

    Added direct_stream_mime(): returns mime description of the stream.


 stream.c |   41 ++++++++++++++++++++++++++++++-----------
 stream.h |    6 ++++++
 2 files changed, 36 insertions(+), 11 deletions(-)



commit 1881c7fa64e27dcc9359d54eb93ab8e97163d903
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 14 16:45:55 2006 +0000

    Fix DrawLine() for horizontal and vertical lines in negative direction.


 idirectfbsurface.c |   40 +++++++++++++++++++++++++++++++---------
 1 file changed, 31 insertions(+), 9 deletions(-)



commit 590157b49e3bb76fd49cdfb50a693727d877ff03
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Sep 13 21:35:43 2006 +0000

    Recalculate buffer offset when field blit mode changes.


 matrox.c       |   14 ++++++++------
 matrox.h       |    5 ++++-
 matrox_state.c |   16 +++++++++++-----
 matrox_state.h |    6 +++---
 4 files changed, 26 insertions(+), 15 deletions(-)



commit 8c1195fb29618bdf92047a01e5b3b80a2e491fc9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 13 14:26:44 2006 +0000

    Removed false assertions.


 generic.c |    5 -----
 1 file changed, 5 deletions(-)



commit 5d40076446d95bd07fa3a4f45d9e705fb8123e4f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 18:57:13 2006 +0000

    Fixed prototype.


 mem.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2a9ee4f0a54c07d9d840fc8da0e6136418b17eb9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 18:09:55 2006 +0000

    Eliminate need for linking against libdirectfb.


 Makefile.am |    2 +-
 mkdfiff.c   |   12 +++++++++---
 2 files changed, 10 insertions(+), 4 deletions(-)



commit 40773ff57fc612c16be262df2a85443875661a6a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 17:17:23 2006 +0000

    Align pitch of system memory buffers to be a multiple of 8 instead 4.
    
    Add extra 16 bytes at the end of a buffer as a dummy area for optimized
    routines, e.g. to avoid segfaults due to prefetching.


 surfacemanager.c |    3 +++
 surfaces.c       |   10 ++++++++--
 2 files changed, 11 insertions(+), 2 deletions(-)



commit cbe590f1452e64c2607ef302692a0f8f717e9b40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 15:40:24 2006 +0000

    Moved clipping from dfb_clip_stretchblit() to gStretchBlit() doing all
    clipping, phase and offset calculations in place, well, handling the phase
    of clipped stretching at all (initial .16 value for iteration) hasn't been
    there before.
    
    Before that, clipping suffered from rounding and off-by-one errors due to
    going back to integer in between.
    
    Accesses out of surface bounds and jumping images are gone. Jumping was
    visible when the same image was stretched with the same source and
    destination rectangle each time, but with randomly changing clip rectangles.


 core/gfxcard.c        |    2 
 gfx/clip.c            |    8 +-
 gfx/generic/generic.c |  168 +++++++++++++++++++++++++++++---------------------
 gfx/generic/generic.h |    3 
 4 files changed, 106 insertions(+), 75 deletions(-)



commit d5ffae06a16ca4fb8dac83c94ad7208c86454f7c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 15:04:56 2006 +0000

    First shot at DFIFF - DirectFB Fast Image File Format
    
    Includes mkdfiff tool and a very simple and fast image provider.
    
    Loading of a 32x32 icon, for example, was about six times faster
    than with the PNG loader.


 include/Makefile.am                                              |    3 
 include/dfiff.h                                                  |   53 +
 interfaces/IDirectFBImageProvider/Makefile.am                    |    9 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_dfiff.c |  331 ++++++++
 tools/.cvsignore                                                 |    1 
 tools/Makefile.am                                                |    5 
 tools/mkdfiff.c                                                  |  403 ++++++++++
 7 files changed, 803 insertions(+), 2 deletions(-)



commit 2d628eeb77b84c10dc736b89fbd6d0983652dac7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 11 15:01:25 2006 +0000

    New capabilities for setting destination size limit. If the rectangle is
    too big, first try clip, then try again and eventually fall back to software.


 core.h    |    2 +-
 gfxcard.c |   46 ++++++++++++++++++++++++++++++++++++----------
 gfxcard.h |    7 ++++++-
 3 files changed, 43 insertions(+), 12 deletions(-)



commit 820f76fed710224756a4aa070c327c825b08c937
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 6 19:08:17 2006 +0000

    Just added some debug.


 idirectfb.c |   69 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 69 insertions(+)



commit 6781895cd4e31a5a1d076cf55f5fa75e5df50d99
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 6 19:08:05 2006 +0000

    Fixed problem with remaining layer context.


 directfb.c |   67 +++++++++++++++++++++----------------------------------------
 1 file changed, 24 insertions(+), 43 deletions(-)



commit 027c5d8a5dd0ddaecb353941ca109239294a0627
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 3 14:29:18 2006 +0000

    Speed up DrawString() by 7-10% (as seen so far) bypassing the hash table
    for indices < 128, storing them in a fast array.


 fonts.c   |   11 +++++++++++
 fonts.h   |    1 +
 gfxcard.c |    8 ++++++--
 3 files changed, 18 insertions(+), 2 deletions(-)



commit 1ff295081aeed3488ef9a556775cc6bedbcee154
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 3 12:11:58 2006 +0000

    Return RS_REMOVE in test reaction.


 fusion_reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fab18c68d21b1c8a164957b22d9b148a62499e49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 3 12:11:26 2006 +0000

    Added fusion_reactor_destroy() like fusion_reactor_free() but without
    freeing the shared structure etc.
    
    No longer (need to) access the shared structure during local message
    processing in the Fusion dispatcher.
    
    Other cleanups.


 fusion.c          |    2 
 fusion_internal.h |    7 +-
 reactor.c         |  144 ++++++++++++++++++++++++++++++------------------------
 reactor.h         |    5 +
 4 files changed, 91 insertions(+), 67 deletions(-)



commit 342a45e0e0db54869e31a0569372ac42c95ec8ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 3 11:54:39 2006 +0000

    Small test for problem with pending messages from destroyed reactors.


 .cvsignore       |    1 
 Makefile.am      |    5 +
 fusion_reactor.c |  153 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 158 insertions(+), 1 deletion(-)



commit bd892048bcc61267fa2a59831c21c98431cec355
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 26 11:50:04 2006 +0000

    Patch adds fusion_skirmish_lock_count() to utilize the recently added ioctl.


 lock.c |   25 +++++++++++++++++++++++++
 lock.h |    5 +++++
 2 files changed, 30 insertions(+)



commit d9deb140c0946c0ed64bdb9e2c3656d3e0838f41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 26 11:00:50 2006 +0000

    Added diaeresis dead key combinations.
    Cast all characters to unsigned ones.


 input.c |  144 +++++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 80 insertions(+), 64 deletions(-)



commit 137d1ec812fc7d1a2de7b254aea20be0d3905a23
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 26 10:39:29 2006 +0000

    Mask out alpha bits properly using 0x7FFF in 15bit color keyed blit.
    
    Also avoid crossing 32bit boundaries with one access in 16bit color keyed blit.


 generic.c |   96 ++++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 57 insertions(+), 39 deletions(-)



commit 34c9aaf5e1494cc9f9c18ada18ce3262d17d136c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 26 09:34:18 2006 +0000

    Added DFBResult return value to graphics driver's EngineSync() and WaitSerial()
    to be able to return DFB_TIMEDOUT or other errors. In these cases the core resets
    the accelerator via EngineReset() and takes care of state invalidation etc.
    
    dfb_gfxcard_sync() and dfb_gfxcard_waitserial() also lease the graphics property,
    i.e. there are no more concurrent calls to the driver, e.g. FillRectangle() along
    with EngineSync().


 gfxdrivers/ati128/ati128.c       |    4 +
 gfxdrivers/cyber5k/cyber5k.c     |    4 +
 gfxdrivers/i810/i810.c           |    4 +
 gfxdrivers/i830/i830.c           |    4 +
 gfxdrivers/mach64/mach64.c       |    4 +
 gfxdrivers/matrox/matrox.c       |    4 +
 gfxdrivers/neomagic/neo2200.c    |    4 +
 gfxdrivers/nsc/nsc.c             |    6 +-
 gfxdrivers/nvidia/nvidia.c       |    4 +
 gfxdrivers/radeon/radeon.c       |    4 +
 gfxdrivers/savage/savage2000.c   |    4 +
 gfxdrivers/savage/savage3d.c     |    4 +
 gfxdrivers/savage/savage4.c      |    4 +
 gfxdrivers/sis315/sis315.c       |    6 +-
 gfxdrivers/tdfx/tdfx.c           |    4 +
 gfxdrivers/unichrome/unichrome.c |    6 +-
 src/core/gfxcard.c               |  114 ++++++++++++++++++++++++++++-----------
 src/core/gfxcard.h               |    8 +-
 18 files changed, 138 insertions(+), 54 deletions(-)



commit 1b1c2fde21ffdc0005bcf9eb8d0399d7e5be3019
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 26 09:00:47 2006 +0000

    Added some D_ASSERTs checking for properly clipped coordinates.


 generic.c |   15 +++++++++++++++
 1 file changed, 15 insertions(+)



commit 1e42184c518b0a711c26fbd773b0e0ca2175e0b7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 19 22:30:20 2006 +0000

    Removed call to dfb_gfxcard_sync() in dfb_fbdev_pan().
    
    The core takes care of that.


 fbdev.c |    2 --
 1 file changed, 2 deletions(-)



commit df0a87c357997c35df2b6d07ba30cbba2a4e8439
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 19 13:02:15 2006 +0000

    Enable VC_32BIT_SWAP on big-endian machines.


 r100_state.c  |    4 ++++
 r200_state.c  |    6 +++++-
 radeon_regs.h |    5 +++--
 3 files changed, 12 insertions(+), 3 deletions(-)



commit 3ad326aeaba5fa93e7f75ac3fce527f918382293
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 19 13:01:04 2006 +0000

    Use radeon_out32() to emit vertices.


 r100_3d.c |   24 ++++++++++++------------
 r200_3d.c |   24 ++++++++++++------------
 r300_3d.c |   32 ++++++++++++++++----------------
 3 files changed, 40 insertions(+), 40 deletions(-)



commit 0e1b344147c0cae81a38902a2435a803b90a9551
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 14 23:04:52 2006 +0000

    In case of no hardware clipping but rectangle filling, if in DrawRectangle()
    the whole rectangle outline was outside the clipping area, the clipping area
    was drawn in the software fallback code.


 gfxcard.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit f59f89a64adf427d30cc247a211e58c5dd803d80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 14 09:19:32 2006 +0000

    Implemented experimental fork() handling in Fusion.
    
    Added FusionForkAction being FFA_CLOSE by default, which can be changed to
    FFA_FORK with a call to fusion_world_set_fork_action() for each Fusionee/World.
    
    Added test program "fusion_fork" to demonstrate and test the new feature.


 Makefile.am                  |    5 +
 TODO                         |    5 -
 configure.in                 |   10 ++
 lib/fusion/fusion.c          |  129 ++++++++++++++++++++++++++++++++++
 lib/fusion/fusion.h          |   11 ++
 lib/fusion/fusion_internal.h |    2 
 lib/fusion/types.h           |    4 -
 tests/.cvsignore             |    5 +
 tests/Makefile.am            |   14 +++
 tests/fusion_fork.c          |  163 +++++++++++++++++++++++++++++++++++++++++++
 10 files changed, 342 insertions(+), 6 deletions(-)



commit ce1bd1db0ed2b6caf294da52575054d335753ad2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 14 09:05:53 2006 +0000

    Fixed warning.


 dfbpenmount.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fc4be0f1dadbd02495b86f7cc3e17ae9b72b7b55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 8 18:37:24 2006 +0000

    In dfb_surfacemanager_deallocate() make sure no hardware read or write
    access on the buffer is pending before freeing the chunk :-P


 surfacemanager.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit afe93525dd2c03adbb96cf253c5a773237610930
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 7 11:39:50 2006 +0000

    Added DIEF_FOLLOW to DFBInputEventFlags which indicates that another event
    will follow immediately.
    
    In the mouse driver this is used to "link" the x/y axis motion events.
    
    The window manager no longer sends two motion events (x/0, 0/y) for
    one x/y mouse movement (x and y axis at once)!
    
    Zig-zag cursor/window movement and double event/update rate are gone :)


 include/directfb.h                     |    3 -
 inputdrivers/linux_input/linux_input.c |    4 +
 inputdrivers/ps2mouse/ps2mouse.c       |   96 ++++++++++++++++-----------------
 wm/default/default.c                   |   23 ++++++-
 4 files changed, 72 insertions(+), 54 deletions(-)



commit d9a11536a82666b67c2873a17f67feaf629f4391
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 7 08:55:26 2006 +0000

    Clean up error handling in system_initialize() and fix bug with shared
    memory (de)allocation.


 fbdev.c |  148 +++++++++++++++++++++++++++++++++++++++-------------------------
 fbdev.h |    4 +
 2 files changed, 94 insertions(+), 58 deletions(-)



commit 4c2ad20ec72d985c98fb224a276b39b6ed7b0bc0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 7 08:52:26 2006 +0000

    Finally decided to catch horizontal/vertical lines in
    DrawLine() and optimize them using rectangle filling.


 idirectfbsurface.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit 1441f1e2e890e52453a9f534237f548e42275dd5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 5 13:41:55 2006 +0000

    Check for PTHREAD_MUTEX_RECURSIVE declaration.


 configure.in      |    8 +++++++-
 lib/direct/util.c |    4 +---
 2 files changed, 8 insertions(+), 4 deletions(-)



commit 63b8dc4f3dc25e229187ba4f8adb7d65213bca66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 5 10:43:51 2006 +0000

    Fixed root cause for negative coordinates.
    
    Thought I committed that a few days ago...


 default/default.c |    2 +-
 unique/unique.c   |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit f0053bacf7d8b6685b21903f86c6f61af511084c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 5 10:37:48 2006 +0000

    Made 'key' argument of IDirectFBWindow::*Property() constant.
    
    Cosmetics.


 include/directfb.h            |    6 ++--
 src/core/wm.c                 |   34 ++++++++++++++-----------
 src/core/wm.h                 |   12 ++++-----
 src/core/wm_module.h          |    6 ++--
 src/windows/idirectfbwindow.c |   41 +++++++++++++++++++------------
 wm/default/default.c          |   55 ++++++++++++++++++++----------------------
 wm/unique/unique.c            |   50 +++++++++++++++++++-------------------
 7 files changed, 109 insertions(+), 95 deletions(-)



commit 32fc98f444b442d802e4777e62f8b0cfb9dd787c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 5 10:00:12 2006 +0000

    Workaround for (default) window manager passing negative rectangle to dfb_gfxcard_blit().


 src/gfx/util.c       |    5 ++++-
 wm/default/default.c |    8 ++++++++
 2 files changed, 12 insertions(+), 1 deletion(-)



commit e80c9279635ed1dd16241201e28fc19c97fe6195
Author: Mike Emmel <memmel@directfb.org>
Date:   Sat Aug 5 01:59:11 2006 +0000

    /tmp/cvsIa7FG7


 include/directfb.h            |   28 ++++++++++++++
 src/core/wm.c                 |   70 ++++++++++++++++++++++++++++++++++-
 src/core/wm.h                 |   44 +++++++++++++++++++++-
 src/core/wm_module.h          |   34 +++++++++++++++--
 src/windows/idirectfbwindow.c |   52 ++++++++++++++++++++++++++
 wm/default/default.c          |   83 +++++++++++++++++++++++++++++++++++++-----
 wm/unique/unique.c            |   82 ++++++++++++++++++++++++++++++++++++-----
 7 files changed, 368 insertions(+), 25 deletions(-)



commit d239530a079a266a55ab22057f4dc70e153c5fd9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 4 21:05:09 2006 +0000

    Check if window is destroyed and return DFB_DESTROYED in all functions
    which would have called the WM, because a destroyed window is no longer
    known to the WM and the WM's window data structure is deallocated.


 windows.c |  134 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 134 insertions(+)



commit 4b7976bb244fae7eaaca7e5236219bfdd42a2f46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 4 16:29:19 2006 +0000

    Added "name" parameter to fusion_ref_init() like others already have.
    
    Gives nice debugging in /proc/fusion/../refs now :)


 lib/fusion/arena.c   |    2 +-
 lib/fusion/object.c  |    2 +-
 lib/fusion/ref.c     |   35 ++++++++++++++++++++++++++---------
 lib/fusion/ref.h     |    1 +
 tools/fusion_bench.c |    2 +-
 5 files changed, 30 insertions(+), 12 deletions(-)



commit f23da51a0c291e976d524e6cbd98c81e0c5e849d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 17:57:56 2006 +0000

    Unref attached window on destroy event.


 idirectfbinputbuffer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 70e3596f5ab2d22f146d1c6e0d4a0fbc83cad888
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 17:20:00 2006 +0000

    This is my latest development version of the radeon driver.
    Main changes affect the R300, which now supports FillTriangles() and DSDRAW_BLEND.


 Makefile.am    |    2 
 r100_state.c   |   70 +++---
 r200_state.c   |   77 ++++--
 r300_3d.c      |  322 ++++++++++++++++++++++++++++
 r300_program.h |  149 +++++++++++++
 r300_state.c   |  641 +++++++++++++++++++++++++++++++++++++++------------------
 radeon.c       |  379 ++++++++++++---------------------
 radeon.h       |   18 +
 radeon_3d.h    |   21 +
 radeon_regs.h  |   49 ++--
 radeon_state.h |    6 
 11 files changed, 1217 insertions(+), 517 deletions(-)



commit 40da4bef4cdb8a674d2b3be8945f83229780e1f9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 17:03:49 2006 +0000

    No longer unref the window in IDirectFBWindow_React().


 idirectfbwindow.c |   15 +++------------
 1 file changed, 3 insertions(+), 12 deletions(-)



commit 097955a4b08aa174145e48aae46eed57db8da9aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 3 16:49:07 2006 +0000

    Return DFB_LOCKED in fusion_ref_up() if EAGAIN is received (ref is zero locked).
    
    Added D_UNIMPLEMENTED() message to single app version of fusion_ref_inherit().


 ref.c |    4 ++++
 1 file changed, 4 insertions(+)



commit f45a2fdfc2194c59a10cef47085ce528ba8477b4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 13:48:23 2006 +0000

    Debug already destroyed windows in dfb_window_destroy().


 windows.c |    1 +
 1 file changed, 1 insertion(+)



commit 6b8aa0d5240f2af69ff4d71751ee137e5ddad8b2
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 13:46:45 2006 +0000

    Undone last change: do not destroy the window, but always unref it (to destroy the fusion object).


 idirectfbwindow.c |    7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)



commit d60d9cabb5c6f9c0cf0904831a45e2386aab37ea
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 3 13:14:40 2006 +0000

    IDirectFBEventBuffer references attached windows and IDirectFBWindow always
    destroyes the window on release: this way releasing the event buffer before
    the window no longer causes an assertion failure.


 input/idirectfbinputbuffer.c |   17 +++++++++++++++--
 windows/idirectfbwindow.c    |    8 ++++++--
 2 files changed, 21 insertions(+), 4 deletions(-)



commit 98ac58d1e6621c9bf4928637ed46a5e6e7bd3d93
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 2 09:52:47 2006 +0000

    Implemented Bop_4_to_Aop and Sacc_to_Aop_a4.


 generic.c |   40 ++++++++++++++++++++++++++++++++++++++--
 1 file changed, 38 insertions(+), 2 deletions(-)



commit 23fd8a929012e8d0827efafaa26c4f82f766b2cd
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 2 09:51:00 2006 +0000

    DSPF_A8 and DSPF_RGB332 were writing (dx+len) pixels instead of (len).


 gfx_util.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit fe3288451d6e3fe70c94233cabd6d01caf7c07f1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 1 13:46:39 2006 +0000

    Enable using recursive mutexes when PTHREAD_MUTEX_RECURSIVE || __USE_UNIX98 are defined.


 util.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5e14aa5189b2be1ce47a6a6391ee343280323cca
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 1 09:35:07 2006 +0000

    Fixed compilation failure with gcc-2.95.


 gfxdrivers/unichrome/uc_overlay.c |    5 +++--
 inputdrivers/penmount/penmount.c  |    2 +-
 src/gfx/generic/generic.c         |    2 +-
 tools/dfbpenmount.c               |   31 +++++++++++++++++++------------
 4 files changed, 24 insertions(+), 16 deletions(-)



commit f52a9b083cbbb60870e8b415802e3082c86800dd
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 31 16:39:41 2006 +0000

    Handle NULL subsurface's rectangle.


 idirectfbsurface.c        |   17 +++++++++++------
 idirectfbsurface_layer.c  |   17 +++++++++++------
 idirectfbsurface_window.c |   17 +++++++++++------
 3 files changed, 33 insertions(+), 18 deletions(-)



commit 0a15bc4dab135cd06871adb799838042c1b3f65d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 31 11:12:41 2006 +0000

    Remember if a subsurface was created with a NULL rectangle, in this case
    treat it as normal surface in case of parent resizement.
    This is actually a workaround, because it won't work in the following situation:
      surface->GetSubSurface( rect, &surface1 );
      surface1->GetSubSurface( NULL, &surface2 );
      // surface2 won't fit surface1 on resizement
    
    
    Fixed window manager's isets stuff:
      IDirectFBSurface_Construct() takes a DFBInsets argument
      that will be used to compute the clipping rectangle for the current area.


 display/idirectfbsurface.c        |   59 ++++++++++++++++++++++----------
 display/idirectfbsurface.h        |    9 +++-
 display/idirectfbsurface_layer.c  |   45 ++++++++++++++----------
 display/idirectfbsurface_window.c |   70 +++++++++++++++++---------------------
 idirectfb.c                       |    6 ++-
 5 files changed, 111 insertions(+), 78 deletions(-)



commit fb3523ead498371e93718b6b7550220496fe092f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 31 10:59:38 2006 +0000

    If a channel has no bits, don't care about their position :)


 fbdev.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit d18117e7adb52a172af3f382a9489b8e1b6d51f5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 31 10:58:28 2006 +0000

    Added dfb_rectangle_subtract(): subtract insets to rectangle.


 directfb_util.h |   17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)



commit a697f328d93845c37642ab0ae55b6482c7802429
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 29 10:27:34 2006 +0000

    Allocate the accumulator only if it will be used.


 generic.c |   11 ++++++++++-
 generic.h |    2 ++
 2 files changed, 12 insertions(+), 1 deletion(-)



commit ee57c56d78e6ff64c6648039183e723933f67847
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 27 22:07:04 2006 +0000

    Make sure pool is mapped properly before actually doing the malloc/realloc/free.
    
    Now the lock order "shm shared lock -> shm pool lock" should not be violated,
    because _fusion_shmalloc_cure() should not be called in a malloc/realloc/free
    context anymore.


 pool.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit ce3e45a6b8db169432f933bf2e545796ed11ce84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 27 21:04:33 2006 +0000

    Fix deadlock caused by lock twists.


 pool.c |   27 +++++++++++----------------
 1 file changed, 11 insertions(+), 16 deletions(-)



commit 67e04b3abad99a5d8d11237505b544eebadcad66
Author: Mark Adams <marka@directfb.org>
Date:   Thu Jul 27 15:36:18 2006 +0000

    Added PCI ID for CN700.


 uc_probe.h |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit afa584564ab4296cd1b4f7d03c71c90c465a0c90
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 27 13:00:48 2006 +0000

    Removed (erroneously set) flag VF_RADEON_MODE in r200DoDrawRectangle3D().


 r200_3d.c |    1 -
 1 file changed, 1 deletion(-)



commit 3dbb6d54df8dc23f11a69c276292e7fb2240bc78
Author: Mark Adams <marka@directfb.org>
Date:   Wed Jul 26 16:45:35 2006 +0000

    Now saves PCI ID for use elsewhere (comments said it did before but it
    didn't).


 unichrome.c |    1 +
 1 file changed, 1 insertion(+)



commit 84497be99cdfb491a9c26c61bde5b0df531cbf46
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 24 10:43:47 2006 +0000

    Print device name all uppercase.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 46d0cc6874b598cf77df8dc177fbec4819a94054
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 16:49:35 2006 +0000

    Due to increasing amount of debug messages the default is "no-debug" now.
    
    It makes more sense to only enable wanted debug domains by hand, e.g. "debug=core/font".
    
    Otherwise, "debug" option still works, too.


 conf.c |    4 ----
 1 file changed, 4 deletions(-)



commit 73556cd75075ce3c4e9555f126fbb7e72cbd9be5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 23 14:10:38 2006 +0000

    Store delayTime in microsecs and use gettimeofday() instead of ftime().


 idirectfbvideoprovider_gif.c |   21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)



commit 2689ae02df370edf2fddf18a802c775fff73ed64
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 13:54:01 2006 +0000

    Include <linux/compiler.h> only if present.


 configure.in                                                   |    2 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)



commit 406a3ad580bdf166726fc1845b3550d42b95bdbe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 13:51:08 2006 +0000

    Fixed warning about unused debug domain by commenting it out.


 hash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ff5d776bf66d2bedffb38d5e762220e652a79844
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 13:11:08 2006 +0000

    Plug brand new leakage of glyph data.


 fonts.c |   31 +++++++++++++++++++++++++++++++
 1 file changed, 31 insertions(+)



commit 42ba63c0efeb91ab13923e41484fda863677ed9f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 23 12:46:42 2006 +0000

    Moved DirectFBGL header to the proper location.
    
    We need the header here since the DirectFBGL interface is strongly
    integrated within DirectFB and we want to support external implementations.


 docs/html/Makefile.am |    3 -
 include/Makefile.am   |    3 -
 include/directfbgl.h  |  104 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 108 insertions(+), 2 deletions(-)



commit f09a398ba83aff7141df6851cebce4288756c534
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 12:46:21 2006 +0000

    Line length is 120 :)


 CODING_STYLE |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 24adf00bb9d8037bffa34f4c213aa625752c0d4f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 23 12:24:45 2006 +0000

    First attempt to give some hints on the coding style.


 CODING_STYLE |   69 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 69 insertions(+)



commit 1ea4ceae0c1923cfb3832f2619389dd25424c7cd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 11:38:59 2006 +0000

    Increased core ABI after recent changes in FusionObject.


 core.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3175121fdc1b9ebeba9151f76815887fe3714f17
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 23 11:01:06 2006 +0000

    Finalized code, not only cosmetics, fixed const/non-const, missing return
    values, suggested braces, assertions, complete error handling etc...


 hash.c   |  565 ++++++++++++++++++++++++++++++++-------------------------------
 hash.h   |    9 -
 object.c |  147 ++++++++++------
 3 files changed, 389 insertions(+), 332 deletions(-)



commit a647aec39a924cee7e7805e1118fa82df98ccb54
Author: Mike Emmel <memmel@directfb.org>
Date:   Sat Jul 22 20:24:28 2006 +0000

    New fusion hash and property support for object


 Makefile.am |    2 
 hash.c      |  526 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 hash.h      |  166 ++++++++++++++++++
 object.c    |   99 +++++++++++
 object.h    |   17 +
 types.h     |    1 
 6 files changed, 808 insertions(+), 3 deletions(-)



commit 095175591a5ed516d60e9dd6a46e08613a5622e7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 22 18:46:29 2006 +0000

    Implemented font cache limit, currently hardcoded to five rows, each row
    stores a number of glyphs.
    
    When the maximum number is reached it will reuse the least recently used
    row, kicking out glyphs that have been on it.
    
    Doing that on a glyph basis would require some more work and has a greater overhead.


 interfaces/IDirectFBFont/idirectfbfont_default.c |   41 ++-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c     |   14 -
 src/core/fonts.c                                 |  259 ++++++++++++++++++-----
 src/core/fonts.h                                 |   56 +++-
 4 files changed, 285 insertions(+), 85 deletions(-)



commit f46dce7c4f05e7415f7b4bbfa9806da1ecada242
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 22 15:07:53 2006 +0000

    Added patch to radeonfb fixing support for R300 chipsets (it also adds new devices).


 README.radeonfb-r300fix               |    2 ++
 radeonfb-r300fix-2.6.17.patch.bz2     |binary
 radeonfb-r300fix-2.6.18-rc2.patch.bz2 |binary
 3 files changed, 2 insertions(+)



commit a922650a4ffc47ea5fba1369d798150c842818b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 22 14:46:59 2006 +0000

    Fixed warnings.


 gfxdrivers/i830/i830.c |    6 +++---
 src/core/windows.c     |    2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)



commit 85e6caefe8c595a16dccd2e1d3e380945596cf7b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 22 11:19:09 2006 +0000

    Simply use a hash for glyph infos instead of a tree with an array for
    the first 127 keys (fast indices)...


 interfaces/IDirectFBFont/idirectfbfont_default.c |   13 +++-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c     |   10 +++
 src/core/fonts.c                                 |   60 ++++++++++++++---------
 src/core/fonts.h                                 |    4 -
 src/core/gfxcard.c                               |    8 ---
 5 files changed, 60 insertions(+), 35 deletions(-)



commit 46b6f75bb024019d95c76d0146dd6e10c609af51
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jul 21 20:50:23 2006 +0000

    Avoid writing to R300_TX_OFFSET_1, radeonfb must be patched before doing it.


 r300_state.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit b9d8aa6313893e0738b9694fbc5a6bc235b9450c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jul 21 20:13:44 2006 +0000

    Use different settings for R300 and non-R300 when setting MC_FB_LOCATION.


 radeon.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit cea99f8a346ff1ba379cd5a9626b658577da28b3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jul 21 18:09:52 2006 +0000

    Need to set MC_FB_LOCATION at offset 0 to avoid crash with R300s.


 radeon.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 452c3817945dc530079e25137eb1b2db3f3b1135
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 20 13:19:46 2006 +0000

    Replaced direct_stream_fopen() by direct_stream_fileno().
    Added direct_stream_dup() (increase stream's reference counter).


 stream.c |   35 +++++++++++++++++++++--------------
 stream.h |   12 ++++++++----
 2 files changed, 29 insertions(+), 18 deletions(-)



commit c13d5cea603f305f0e76300dff857d14cff44d29
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 20 13:17:13 2006 +0000

    Dropped support for GIF87 (can't be animated).


 idirectfbvideoprovider_gif.c |    7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)



commit 077f1ae89cf73f2171774b2469805c8c932514da
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 19 12:28:40 2006 +0000

    Notify speed change to video thread.


 idirectfbvideoprovider_gif.c |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit e85c861bda261c169e5d2ffcd68c637a57d55c60
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 19 10:10:32 2006 +0000

    Added Animated GIF video provider.
    (I put it here, instead of DirectFB-extra, because it may be usefull for animated cursors).


 configure.in                                                   |    3 
 interfaces/IDirectFBVideoProvider/Makefile.am                  |   20 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_gif.c | 1075 ++++++++++
 3 files changed, 1096 insertions(+), 2 deletions(-)



commit 9cc7558c5b6484a107fc231a7e5879927aa96905
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 19 01:48:11 2006 +0000

    Local 'local reactions' are no longer processed
    before dispatching further via the kernel device.
    
    This causes all local reactions within each Fusionee to
    be called by the Fusion Dispatcher only, in chronological order.
    
    It's a fundamental change in runtime behaviour which might break
    some code that relies on the synchronous execution of some of the
    local reactions, the dispatcher's own.


 reactor.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit e69ef63383b5f6d8536d568b23c5f4d15519a264
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 18 17:05:08 2006 +0000

    Show which surfaces are preallocated.


 dfbdump.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit 5cd415372b356750e72ab4d1c130dad622e9c07b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 18 01:07:13 2006 +0000

    Before every graphics operation, i.e. in dfb_gfxcard_state_check(),
    clip the state's clipping region to the destination surface dimension.
    
    In debug mode too big clipping regions will still show a failing D_ASSUME,
    while other errors like x1 > x2 or x < 0 will break with a failing D_ASSERT.


 gfxcard.c |   33 +++++++++++++++++++++++++++++----
 1 file changed, 29 insertions(+), 4 deletions(-)



commit 52b0a995a642e3e5f14732f2fcc2e1e0773340e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 17 23:13:29 2006 +0000

    Fix warning in non-debug build by putting an '#if D_DEBUG_ENABLED' around
    the static const table of strings used only in the debug message further below.


 radeon.c |    2 ++
 1 file changed, 2 insertions(+)



commit 524f9a21099d0037d4e28fa427d0feea63501d63
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 17 13:12:21 2006 +0000

    Removed return value from DVFrameCallback.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7ddb76e6dd224a85005d4ef6a6642ae4d9cf9196
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 17 13:10:45 2006 +0000

    Declare PCI regs locally (avoid inclusion of <linux/pci_regs.h>).


 agp.c |   15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)



commit ac91f7c11b55222bcbf3a2f72eb5281dd1d59c61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 16 21:06:50 2006 +0000

    Added option --rgbformat which in contrast to the --format option
    only is effective if the image doesn't require an alpha channel.
    
    That's useful e.g. with RGB16 for opaque and ARGB for blended images,
    when the primary format will be RGB16.
    
    So far directfb-csource either used ARGB/RGB32 automatically,
    or it always used RGB16 or whatever you specified via --format.


 directfb-csource.c |   37 ++++++++++++++++++++++++++-----------
 1 file changed, 26 insertions(+), 11 deletions(-)



commit 10c3e898329f470e7c35e05783bab5f335514c3b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 16 10:15:29 2006 +0000

    Rewritten cursor handling (software cursor) to use a surface instead of a window.
    
    The window manager module gets notified about all kinds of updates regarding the cursor.
    
    All window manager modules use the same code for now, using backing store for the region under
    the cursor. This avoids revealing window content that hasn't been commited via Flip(), yet.
    
    It should also be faster as it no longer depends on the windows that are covered by the cursor.


 src/core/windows.c          |   18 -
 src/core/windows_internal.h |   28 +--
 src/core/windowstack.c      |  391 ++++++++++++++++++++++-------------------
 src/core/wm.c               |   29 +--
 src/core/wm.h               |  410 ++++++++++++++++++++++----------------------
 src/core/wm_module.h        |   15 -
 wm/default/default.c        |  395 ++++++++++++++++++++++++++++++++++++------
 wm/unique/context.c         |  190 ++++++++++++++------
 wm/unique/internal.h        |    8 
 wm/unique/unique.c          |  198 ++++++++++++++++++---
 10 files changed, 1117 insertions(+), 565 deletions(-)



commit 1d3e3e027e01b77c61e51e5a320202225e04cc69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 16 10:15:00 2006 +0000

    Added some assertions to dfb_gfxcard_blit()
    checking for a properly clipped source rectangle.


 gfxcard.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 8a99e6e2825b17c27214ff9d87f1b226b1818509
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jul 16 08:29:43 2006 +0000

    Add DFB_RECTANGLE_CONTAINS_POINT and DFB_REGION_CONTAINS_POINT macros to directfb_util.h


 directfb_util.h |    5 +++++
 1 file changed, 5 insertions(+)



commit d41c702d3967f667a78b69918bb3abe589405f22
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 16 08:28:35 2006 +0000

    Added dfb_gfx_copy_to() as an extension of dfb_gfx_copy().
    
    The advantages are
    - destination offset can be different from source offset
    - blitting from the back buffer is available
    
    The latter was a must for the backing store based software cursor.


 util.c |   28 ++++++++++++++++++++++++++--
 util.h |    1 +
 2 files changed, 27 insertions(+), 2 deletions(-)



commit 8f90d901bef3bb9976a86db4cf2dd109448f1ca2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 16 08:25:47 2006 +0000

    Show base address of each file to allow offset calculation 'by hand' within
    dynamically loaded modules, i.e. where ldd doesn't help.


 trace.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 27527bfaa451fe99444e11ad62915790f9f94a2c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 13 12:56:16 2006 +0000

    Handle driver's functions return value.


 gfxcard.c |  113 ++++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 67 insertions(+), 46 deletions(-)



commit 6cbfd93bed9ced28a17c380eae4836e2913a3412
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jul 13 10:59:49 2006 +0000

    Ignore callback result when rendering buffered image data.


 idirectfbimageprovider_jpeg.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit ab1e80eaa80ebe6f8feec30dd02cba262a25c420
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 12 16:37:31 2006 +0000

    Follow changes.
    
    Added support for streaming databuffers.


 idirectfbimageprovider_jpeg.c |  311 ++++++++++++++++--------------------------
 1 file changed, 124 insertions(+), 187 deletions(-)



commit 01e59378c3a712a3336d44684f8d9fc487e080f4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 12 16:36:52 2006 +0000

    Follow changes.


 idirectfbimageprovider_gif.c   |   28 +++++++++++++++++++---------
 idirectfbimageprovider_mpeg2.c |   26 ++++++++++++++++++--------
 idirectfbimageprovider_png.c   |   26 ++++++++++++++++++--------
 3 files changed, 55 insertions(+), 25 deletions(-)



commit ccd66054ff53b59bfadcd6f00c53bed4715931fa
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 12 16:35:57 2006 +0000

    dfb_scale_linear_32() and dfb_copy_buffer_32() take a DFBRegion argument
    specifing the destination clipping region (passing a NULL region means that
    destination rectangle was already clipped).
    
    This change allow to render images on a portion of the surface preserving
    the original scale factor.


 gfx_util.c |   61 ++++++++++++++++++++++++++++++++++++++++++++++++-------------
 gfx_util.h |    4 ++--
 2 files changed, 50 insertions(+), 15 deletions(-)



commit c11392025a92412d2510c32a6cf4c4243f9f0866
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 10 22:39:57 2006 +0000

    After resizing the hash free old array.


 hash.c |    2 ++
 1 file changed, 2 insertions(+)



commit b7f248610db8264cfdc3650737d8958c5e2d23f4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 10 09:38:11 2006 +0000

    Put AGP aperture start location after frambuffer memory location.


 radeon.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 1d9c363691a204b164e85982d305d74f20f2f4c4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jul 10 08:46:22 2006 +0000

    Use CONFIG_APER_* to set MC_FB_LOCATION. Otherwise my M6 will hang when
    using the overlay.


 radeon.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2178fb52619977f82aa360400e02c8bc7270530a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 9 15:40:16 2006 +0000

    DVPLAY_NORMAL renamed DVPLAY_NOFX.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 034b697ffda0627f4cfcf61ef3877071ad3338a2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Jul 8 19:47:48 2006 +0000

    Fixed planar data copy. Added more pixelformat for v4l2.


 idirectfbvideoprovider_v4l.c |   90 ++++++++++++++++++++++++-------------------
 1 file changed, 52 insertions(+), 38 deletions(-)



commit 74d1ca9bcfb57703fbf0ed718abb36c55346439b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Jul 8 19:31:45 2006 +0000

    Removed some useless code and made wait_for_buffer() static.


 idirectfbvideoprovider_v4l.c |   30 ++++--------------------------
 1 file changed, 4 insertions(+), 26 deletions(-)



commit 4e4518f49d440e2f2969f88877184aa7fbc3553a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Jul 8 16:12:22 2006 +0000

    Reduced ifdef clutter.


 idirectfbvideoprovider_v4l.c |   45 ++++++++++++++++---------------------------
 1 file changed, 17 insertions(+), 28 deletions(-)



commit 5f5a5ed7108fadcbd36ebbb1150418abe6a4e23d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 4 09:23:06 2006 +0000

    Moved modification of caps depending on policy into static inline helper
    function dfb_surface_caps_apply_policy(policy, &caps).


 surfaces.c |   11 +----------
 surfaces.h |   20 ++++++++++++++++++++
 2 files changed, 21 insertions(+), 10 deletions(-)



commit 7435837e15f1a86658a49b40c39b01ee7ae09bbc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 4 09:21:37 2006 +0000

    Removed another warning.


 nvidia_overlay.c |    1 -
 1 file changed, 1 deletion(-)



commit b6ded019dda2a19996a88d2c3c640dc6afb3f223
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 4 09:11:44 2006 +0000

    Fixed failing assumptions due to late initialization of dfb_sdl_core after
    call to dfb_fbdev_read_modes() used for faking video modes, added recently.


 sdl.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 77abe4afdb0aa456f33c50c912b62a9bcb9c58e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 3 16:40:40 2006 +0000

    Fixed warnings.


 inputdrivers/penmount/penmount.c |    6 -
 lib/direct/debug.c               |    3 
 lib/direct/serial.h              |    3 
 lib/voodoo/manager.c             |    2 
 systems/sdl/primary.c            |    2 
 systems/sdl/sdlinput.c           |  225 ---------------------------------------
 6 files changed, 9 insertions(+), 232 deletions(-)



commit 9da576fcedb3294a9f5779deaf211f46f2598ae8
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jul 2 20:43:18 2006 +0000

    libdirect - fix memory leak that occured when creating a stream failed


 stream.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 3f5e907d23e9977999e6a013656ec7ca9135d5a7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 29 16:55:38 2006 +0000

    Link libdirect into fx for debug.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit 8ae52fa3aeb060410de61500139c8faad1c61083
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jun 29 10:22:52 2006 +0000

    Dropped down YUV->RGB on the RV250.


 radeon.c |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit 9eee9af41559b3645d4953b7b876a4ac5c8f495d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jun 29 09:55:51 2006 +0000

    Get the device id from the PCI config space.


 nvidia.c |   96 +++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 51 insertions(+), 45 deletions(-)



commit 827e539061bb87b926f66908fea3fdaa57f6d840
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jun 28 17:13:56 2006 +0000

    Avoid to set the overlay memory limit, it's already done by the kernel.


 nvidia_overlay.c |    8 --------
 1 file changed, 8 deletions(-)



commit d7d018ac8c1d76281fa94f8f273ba9941c373b25
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jun 28 17:12:58 2006 +0000

    Basic acceleration for ALUT44.
    Check for source and destination's palette equality.


 nvidia.c       |   55 ++++++++++++++++++++++++++++++++++++++++++++++++-------
 nvidia_state.c |    6 ++++++
 2 files changed, 54 insertions(+), 7 deletions(-)



commit 32699b0c8c5cdf40f4658e43173c7dec6cacbeea
Author: Ben Combee <bcombee@directfb.org>
Date:   Wed Jun 28 16:46:54 2006 +0000

    Change another set of declarations to prototypes to avoid use-time warnings, this time in DFB's core


 gfxcard.h |   20 ++++++++++----------
 screens.h |    2 +-
 system.h  |   36 ++++++++++++++++++------------------
 3 files changed, 29 insertions(+), 29 deletions(-)



commit 59ea034507fa4bf4b59be66a87353d3777d1c405
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 28 15:58:12 2006 +0000

    Use DFBSurfaceLockFlags instead of unsigned int flags in prototype of locking functions.
    
    Thanks to Nils Magnus Larsgard <nmlarsgaard@atmel.no>!


 README                    |    1 +
 src/core/surfacemanager.h |   12 ++++++++----
 2 files changed, 9 insertions(+), 4 deletions(-)



commit 521b092a58b42333ffd0b54b14cb382f0e0272a8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 28 15:53:59 2006 +0000

    Very basic program to emulate/illustrate the pixel pipeline, blitting flags etc.
    No 100% guarantee that itself is correct, but in the end it will serve as a
    verification for software/hardware driver.


 .cvsignore  |    2 
 Makefile.am |    5 -
 fx.c        |  261 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 266 insertions(+), 2 deletions(-)



commit 16bbc2a20be137f39891e849b41f67f2bbccc1b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 28 15:50:32 2006 +0000

    Just a rough diagram (overview) I made a while back.
    
    While it lacks some explanations, it's a good help reading the code.


 GeneFX.odp |binary
 GeneFX.pdf |binary
 2 files changed



commit 57cb1d5d04c95f76b878395141bd1b16c0aaa414
Author: Ben Combee <bcombee@directfb.org>
Date:   Wed Jun 28 08:29:41 2006 +0000

    Turn void function declarations into true prototypes in libdirect


 clock.h                    |    4 ++--
 direct.h                   |    4 ++--
 interface.h                |    6 +++---
 interface_implementation.h |   12 ++++++------
 memcpy.h                   |    4 ++--
 signals.h                  |    6 +++---
 system.h                   |    4 ++--
 thread.h                   |    4 ++--
 trace.h                    |    4 ++--
 tree.h                     |    2 +-
 10 files changed, 25 insertions(+), 25 deletions(-)



commit d94635495570ce9ef975dc4f3f876f61bb1d1d6b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 27 21:16:26 2006 +0000

    Applied a patch from Marko Mkel <marko.makela@hut.fi> fixing build
    problems with gcc (GCC) 4.1.2 20060613 (prerelease) (Debian 4.1.1-5).


 README                           |    1 +
 gfxdrivers/matrox/matrox_3d.c    |    1 +
 gfxdrivers/matrox/matrox_maven.c |    1 +
 3 files changed, 3 insertions(+)



commit d0cdeced1f24a031a7837cd365706421791f0309
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 25 13:53:09 2006 +0000

    Fail if a blitting function between surfaces with different palettes is requested.


 radeon.c |   23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)



commit 02d5d94561490e4c81d4ad6c82241b9d3187d94c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 25 13:50:45 2006 +0000

    Check if palettes are equal when blitting indexed formats.


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 3c98e7c650ced57002a39e97858f3f2f4a773dfc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 25 13:49:00 2006 +0000

    Added dfb_palette_equal(): check if two palettes are equal.


 palette.c |   27 +++++++++++++++++++++++++++
 palette.h |    3 +++
 2 files changed, 30 insertions(+)



commit 2ecc8ab0ba278b27ce45961fbc50eb0153ef2f9c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 24 14:08:01 2006 +0000

    Made predefined palette entries in DFBSurfaceDescription const.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 472251c4955b2b5bde4c388306f5308f94e109a0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 24 12:50:02 2006 +0000

    Added IDirectFBVideoProvider::GetVolume() (for completeness).


 include/directfb.h                 |   19 +++++++++++++++----
 src/media/idirectfbvideoprovider.c |    8 ++++++++
 2 files changed, 23 insertions(+), 4 deletions(-)



commit 79e81a14355c6cead7c82ee56e05183976e8da14
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 24 10:14:14 2006 +0000

    Added dfb_screens_at_translated() and dfb_screen_id_translated().
    Set the primary screen according to the primary layer.


 core/screens.c            |   49 ++++++++++++++++++++++++++++++++++++++++++++++
 core/screens.h            |    7 ++++++
 display/idirectfbscreen.c |    4 ++-
 idirectfb.c               |   11 +++-------
 4 files changed, 63 insertions(+), 8 deletions(-)



commit 8edf62d2036ce4fea290f2b9e7838ed8f7b27bec
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jun 24 10:10:38 2006 +0000

    Added IDirectFBVideoProvider::SetVolume().


 include/directfb.h                 |   11 +++++++++++
 src/media/idirectfbvideoprovider.c |    8 ++++++++
 2 files changed, 19 insertions(+)



commit afec34d3acfbcf78204dbe1e3d41cf81bb3349e5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 23 17:59:03 2006 +0000

    Added IDirectFBVideoProvider::SetPlaybackFlags(),
          IDirectFBVideoProvider::SetSpeed(),
          IDirectFBVideoProvider::GetSpeed() (preplace trick mode methods).
    
    Added IDirectFBScreen::GetSize(): fast way to detect screen size
    without the need of scanning layers in search of the underlay
    (usefull when working with overlays).


 include/directfb.h                 |  108 ++++++++++++++++++-------------------
 src/display/idirectfbscreen.c      |   26 ++++++++
 src/media/idirectfbvideoprovider.c |   26 ++++----
 3 files changed, 94 insertions(+), 66 deletions(-)



commit 435956a0f1c89b882d76d8ee41136d32805b4b98
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 23 06:01:37 2006 +0000

    More Porter/Duff rules (SRC_ATOP,DST_ATOP,ADD,XOR).


 include/directfb.h             |   28 ++++++++++++++++------------
 src/display/idirectfbsurface.c |   16 ++++++++++++++++
 2 files changed, 32 insertions(+), 12 deletions(-)



commit e51000bc963406518d1132834e3f0ae05db5d17d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jun 22 19:44:55 2006 +0000

    Increased bytepitch alignment to match field blitting requirements.


 matrox.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit c9347d3778cf38bdaf1afd18c7420191849f5aa1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jun 22 12:31:35 2006 +0000

    Replaced tabs by spaces.


 radeon_overlay.c |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)



commit 3f9801f4f6df0256caa9ab3a3ae28032249ea41b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jun 22 12:30:39 2006 +0000

    When enabling DLOP_ALPHACHANNEL on the underlay, do not fail if the overlay
    level is still set to 1.


 radeon_crtc1.c |   25 ++++++++++---------------
 radeon_crtc2.c |   18 ++++--------------
 2 files changed, 14 insertions(+), 29 deletions(-)



commit 0b0b9f37b5f5641ba2ba515d9530412443c6d601
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jun 22 00:36:11 2006 +0000

    Field based blitting.


 matrox.c       |  844 +++++++++++++++++++++++++++++++++++++++++++++++++++++----
 matrox.h       |    5 
 matrox_state.c |  197 +++++++------
 3 files changed, 914 insertions(+), 132 deletions(-)



commit cb767ad5712b10192ec421a0322e796202e7f3dd
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jun 22 00:04:23 2006 +0000

    Added DSCAPS_SEPARATED support to BES, CRTC2 and SPIC.


 matrox.h       |    2 ++
 matrox_bes.c   |   35 ++++++++++++++++++++++++++++-------
 matrox_crtc2.c |   18 ++++++++++++++----
 matrox_spic.c  |   13 +++++++++----
 4 files changed, 53 insertions(+), 15 deletions(-)



commit b8cf8d2a18c084121f3e18ad7640200339f24784
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jun 22 00:02:05 2006 +0000

    Fixed pixelpitch alignment for YUY2/UYVY.


 matrox.c |    3 +++
 1 file changed, 3 insertions(+)



commit 32723da73f98a9114389d5f4fa3ae6961597f2fb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jun 21 09:20:59 2006 +0000

    Treat fbdev format 8/16,8/8,8/0,0/0 as ARGB when ARGB was requested
    (that because framebuffer drivers generally ignore the alpha channel).


 fbdev.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit d239aec02d7d00dea64cbbe47c20f9d852652b62
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 20 19:34:51 2006 +0000

    PAL-60 support (or at least close enough for my TV).


 gfxdrivers/matrox/matrox_crtc2.c        |   62 +++++++--
 gfxdrivers/matrox/matrox_maven.c        |  206 ++++++++++++++++++++++----------
 gfxdrivers/matrox/matrox_screen_crtc2.c |    8 -
 gfxdrivers/matrox/matrox_spic.c         |    6 
 include/directfb.h                      |    3 
 src/misc/conf.c                         |   11 +
 src/misc/conf.h                         |    2 
 7 files changed, 212 insertions(+), 86 deletions(-)



commit d4ed9134426b8a23ea098eb36a5b8e5e65581c60
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 20 12:10:21 2006 +0000

    Populating screen API a bit more, thanks to Daniel Laird <danieljlaird@hotmail.com>!


 include/Makefile.am           |    3 +++
 include/directfb.h            |   27 ++++++++++++++++++++++-----
 src/display/idirectfbscreen.c |    3 +++
 3 files changed, 28 insertions(+), 5 deletions(-)



commit f71d0dcd9c5eb88eb36a903b8479987c8ac039e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 20 12:08:21 2006 +0000

    Trick modes thanks to Daniel Laird <danieljlaird@hotmail.com>!


 README                             |    1 
 include/directfb.h                 |   58 +++++++++++++++++++++++++++++++++++--
 src/media/idirectfbvideoprovider.c |   17 ++++++++++
 3 files changed, 73 insertions(+), 3 deletions(-)



commit d888005e053ee8b7225cc0e1139fffb38fab572c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jun 20 10:11:58 2006 +0000

    Added the possibility to use the underlay as an OSD.
    It works exactly the same way as in the unichrome driver:
     - Set the overlay level to -1;
     - Enable DLOP_ALPHACHANNEL on the underlay.


 Makefile.am      |    1 
 radeon.c         |   46 ++------------
 radeon.h         |   15 +++-
 radeon_crtc1.c   |  175 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 radeon_crtc2.c   |   31 +++++++--
 radeon_overlay.c |   83 ++++++++++++++++++++++----
 6 files changed, 290 insertions(+), 61 deletions(-)



commit 95f01e68149593bf2ecfb6f32d2f6e36ccf24a29
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 18 19:52:46 2006 +0000

    Cosmetics.


 matrox_maven.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9f3a968772b0679336908839619bdd1b86baac1d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 18 19:52:19 2006 +0000

    Removed unnecessary headers and libs.


 Makefile.am           |    1 -
 matrox.c              |   15 ++++-----------
 matrox_3d.c           |    3 ++-
 matrox_bes.c          |   13 -------------
 matrox_crtc2.c        |   16 +---------------
 matrox_maven.c        |   14 ++++----------
 matrox_screen_crtc2.c |   15 ++++++---------
 matrox_spic.c         |   15 ---------------
 matrox_state.c        |    2 --
 9 files changed, 17 insertions(+), 77 deletions(-)



commit 9b52d2b4f9f07dac7243de54545f3c67eeed099a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Jun 17 16:21:24 2006 +0000

    Silenced some compiler warnings.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    1 -
 src/directfb.c                                                  |   10 +++++-----
 src/display/idirectfbsurface_window.c                           |    1 -
 src/gfx/generic/generic.c                                       |    8 ++++----
 4 files changed, 9 insertions(+), 11 deletions(-)



commit 7cdcda360372afe14227794900630e159ac62583
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 15 18:59:17 2006 +0000

    Fixed prototypes.


 surfaces.h |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit f4153d9c676a31ec6c31954cbcfe6016bb17ee48
Author: Mike Emmel <memmel@directfb.org>
Date:   Wed Jun 14 18:52:55 2006 +0000

    Added the StartDesktop hook to run a advanced complex wm
    Note I made a change to unique it was not handing out the window for the cursor
    this broke code that thought with a valid id it would get a window
    it sets it to null and returns DFB_OK
    Denis you make want to check this but we don't want to return DFB_OK I think if
    we set the window to null


 src/core/wm.c        |   13 +++++++++++++
 src/core/wm.h        |   10 ++++++++--
 src/core/wm_module.h |    2 ++
 src/directfb.c       |   25 +++++++++++++++++++++++++
 wm/default/default.c |   11 ++++++-----
 wm/unique/unique.c   |    6 ++++++
 6 files changed, 60 insertions(+), 7 deletions(-)



commit d96b3e16aba1b882bf5e4b4193728b7f38443959
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 14 07:06:03 2006 +0000

    Some changes that decrease system memory usage for surface buffers,
    especially where graphics memory is available.
    
    
    Allocate system instance of auto-video buffers on first access,
    not immediately during creation of the surface.
    
    Deallocate system memory when buffer is written to in video memory.
    Reallocate it if the buffer is kicked out of video memory.
    
    Implemented "suspended" surface buffers, temporarily deallocated.
    No valid instance at all until it's resumed.
    
    Added dfb_surface_buffer_suspend/resume().
    Added SBF_SUSPENDED.
    
    Cleaned up some surface manager and surface locking functions.


 surfacemanager.c |  268 ++++++++++++++++++++++------------------
 surfaces.c       |  360 ++++++++++++++++++++++++++++++++++++++-----------------
 surfaces.h       |  101 ++++++++-------
 3 files changed, 457 insertions(+), 272 deletions(-)



commit 929f70068fb2cf45af8cc395ec593f848e90ae99
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 13 14:13:17 2006 +0000

    Added DFB_SUSPENDED error meaning "The requested object is suspended!".


 include/directfb.h |    3 ++-
 lib/direct/util.c  |    2 ++
 2 files changed, 4 insertions(+), 1 deletion(-)



commit fd15a66f7da9452d396a93650433d5cf8860b298
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 13 14:11:02 2006 +0000

    Fixed dfb_window_create(). Alpha blended windows have been broken due to
    wrong order of code segments.


 windows.c |   81 ++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 42 insertions(+), 39 deletions(-)



commit 1eba7234aa3870fe44f1a77d4fb796f7b3c0c01a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 13 10:48:41 2006 +0000

    cosmetics


 generic.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit a906bc47e075c31eef9023f2ac1931eb56bce3f3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 13 10:47:18 2006 +0000

    Thanks Mike! Looks like I took the last but one diff that I made when taking
    over these changes...


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a59198e49e6d71ff426091b95d74a2350ba57a8e
Author: Mike Emmel <memmel@directfb.org>
Date:   Mon Jun 12 21:35:19 2006 +0000

    Fixed unclosed comment that broke the build


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 202dfb7eceefe5fa0d090dedb03467d38cdde943
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 12 17:31:44 2006 +0000

    Added IDirectFBDisplayLayer::SetClipRegions().
    
    If supported, this method sets the clipping regions that are used to
    to enable or disable visibility of parts of the layer. The number of
    regions is stated in the display layer description. The layer will be
    shown only in these regions or except in these regions.


 include/directfb.h                  |   66 +++++++++++++++++++++------------
 src/core/core.h                     |    2 -
 src/core/layer_context.c            |   72 ++++++++++++++++++++++++++++++++----
 src/core/layer_context.h            |    5 ++
 src/core/layer_region.c             |    6 +++
 src/core/layers.h                   |   35 ++++++++++-------
 src/display/idirectfbdisplaylayer.c |   21 ++++++++++
 7 files changed, 160 insertions(+), 47 deletions(-)



commit d6d31c32bb95b58d453acb9a999e72492225ddda
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jun 11 20:29:59 2006 +0000

    Added GetPosition to Surface it was missing I needed it and
    it seems innocous and consistent.
    If there is a problem we can discuss on the list


 include/directfb.h             |    9 +++++++++
 src/display/idirectfbsurface.c |   21 +++++++++++++++++++++
 2 files changed, 30 insertions(+)



commit d387aaea9a3705653792033fce76037a5fa3fb74
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jun 11 18:23:09 2006 +0000

    Redid XServer to open display outside window
    and save it in the dfb_x11 main struct
    this gets rid of a lot of race conditions and problems
    also starts toward setting up the driver for optional rootless operation


 primary.c  |    2 --
 x11.c      |   18 ++++++++++++------
 x11.h      |    3 ++-
 x11input.c |   20 +++++++-------------
 xwindow.c  |   26 ++++++++++----------------
 5 files changed, 31 insertions(+), 38 deletions(-)



commit dceff0bf9a18f0a0d44a1bef86877400a1639d98
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 11 17:55:10 2006 +0000

    Disable writing to the R300_TX_CNTL register
    because radeonfb doesn't map that range of the mmio.


 radeon.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit d8bdd086a1b7a40fde33c9c4392dfa4ea3c267a8
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jun 11 16:44:34 2006 +0000

    Missed file


 idirectfbdisplaylayer.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit dd1fde38a5532d719a130c5555ba4a578b6cdbef
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jun 11 16:33:00 2006 +0000

    /tmp/cvsRBHEMO


 src/core/windows.c                    |   62 +++++++++++++++++++++-------------
 src/core/wm.c                         |   57 ++++++++++++++++++++++++++-----
 src/core/wm.h                         |   14 +++++++
 src/core/wm_module.h                  |   12 ++++++
 src/display/idirectfbsurface_window.c |   23 +++++++++++-
 src/windows/idirectfbwindow.c         |   24 ++++++++++---
 wm/default/default.c                  |   24 +++++++++++++
 wm/unique/unique.c                    |   24 +++++++++++++
 8 files changed, 203 insertions(+), 37 deletions(-)



commit 4a68f1b26b0fc9c705e13cc65988564150bb7e07
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 4 20:34:04 2006 +0000

    Avoid negative array indices.


 convert.h            |   10 +++++-----
 generic/yuvtbl-gen.c |   12 ++++--------
 generic/yuvtbl.h     |    7 ++-----
 3 files changed, 11 insertions(+), 18 deletions(-)



commit a0793d8fca9bf7c31b063f85c02fd08581d3e7d0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 4 20:29:04 2006 +0000

    Silence warnings.


 linux_input.c |    1 +
 1 file changed, 1 insertion(+)



commit 8e02ad194ba004d9b37fe7e427b10aeed01cf1ec
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:53:42 2006 +0000

    Add accessor for debugging fusion ref-count problems


 object.h |    7 +++++++
 1 file changed, 7 insertions(+)



commit ac80ac727942d7e71b41c01b02132184ddcccd84
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:52:22 2006 +0000

    Update graphics ops to immediately unref source surfaces allowing quicker memory reuse


 idirectfbsurface.c |   18 ++++++++++++++++++
 1 file changed, 18 insertions(+)



commit c4e66c057a1b06e644ed2153b3a34306a655d07d
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:51:20 2006 +0000

    Update SDL input handling to better emulate keymaps


 sdlinput.c |   55 ++++++++++++++++++++++++++-----------------------------
 1 file changed, 26 insertions(+), 29 deletions(-)



commit 6c5862a82d94f3d27d1c968b3eec1a231beaf01f
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:50:10 2006 +0000

    new libdirect function to duplicate a file descriptor as needed, making sure new filedes isn't mapped to stdin, stdout, or stderr


 util.c |   22 ++++++++++++++++++++--
 util.h |    5 +++++
 2 files changed, 25 insertions(+), 2 deletions(-)



commit 1263c28fd977a24a2dd45f146c5f9e7134485325
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:48:34 2006 +0000

    directfb-csource tool now makes strucs and bitmap data const, helps with use in shared libs


 directfb-csource.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 082b950db08724dee40a1a80fefc07b92a08f4e4
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:47:54 2006 +0000

    Add ability to tell image provider to abort rendering


 include/directfb.h                                              |    7 +++
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |    7 +++
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   18 +++++++---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |   15 ++++++--
 4 files changed, 37 insertions(+), 10 deletions(-)



commit 051aa4f862d2e0fe1a6a4e0639c013a14b4a541d
Author: Ben Combee <bcombee@directfb.org>
Date:   Sun Jun 4 17:47:01 2006 +0000

    Blit to misaligned surface fix


 generic.c |   82 ++++++++++++++++++++++++++++++++++++++------------------------
 1 file changed, 51 insertions(+), 31 deletions(-)



commit 1a7a4bb161cdb42c2ce4d5c96b9c782a45442aa9
Author: Mike Emmel <memmel@directfb.org>
Date:   Sat Jun 3 18:57:52 2006 +0000

    Both
    IDirectFB_GetDisplayLayer
    and
    IDirectFBDisplayLayer_SetConfiguration
    cause a xwindow to be created
    this causes the first window to be destroyed
    and a second to be created with the new configuration.
    There are a number of problems here and the code
    needs to be reworked to not create the window or at least not
    display it because were changing configurations or enumerating layers.
    There are several conceptual problems here.
    but at least we won't get two windows with one not used


 primary.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 9c7848b6e84521b7a07e48f44e6290eecbd504a7
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Jun 2 17:50:31 2006 +0000

    Added some more checks for race condition between input and connecting to
    the display
    this should have a lock I think


 x11input.c |    3 +++
 1 file changed, 3 insertions(+)



commit 9915bb2814e5cb057b74a1a98212a978e72c27b1
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun May 28 05:24:42 2006 +0000

    Added scrollwheel patch


 x11input.c |   53 ++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 48 insertions(+), 5 deletions(-)



commit c8cac4cace7c77ea25598e4b044c2418699745f6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat May 27 13:05:53 2006 +0000

    Applied patch by Christer Palm <christer.palm@pulsen.se>: fixes word swapping on PPC.


 radeon_mmio.h |   26 +++++++++++++++++++-------
 1 file changed, 19 insertions(+), 7 deletions(-)



commit 045c214d2a5a91c5ea4b3bf8972533d809ef881e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 26 08:19:52 2006 +0000

    Added 4 bit packed alpha pixel format DSPF_A4, e.g. for fonts.


 include/directfb.h                               |    7 ++-
 interfaces/IDirectFBFont/idirectfbfont_default.c |    7 +++
 interfaces/IDirectFBFont/idirectfbfont_ft2.c     |   12 ++++++
 src/core/surfaces.c                              |    1 
 src/gfx/convert.c                                |    3 +
 src/gfx/generic/generic.c                        |   46 +++++++++++++++++++++++
 src/idirectfb.c                                  |    1 
 src/misc/conf.c                                  |    3 +
 src/misc/gfx_util.c                              |    7 +++
 9 files changed, 83 insertions(+), 4 deletions(-)



commit 714d543c30311d7466a99de9c13d1dabbec111ec
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu May 18 15:26:17 2006 +0000

    Added IDirectFBInputDevice::DetachEventBuffer() and IDirectFBWindow::DetachEventBuffer() to
    detach an event buffer from an interface.


 include/directfb.h               |   16 +++++++++++++
 src/input/idirectfbinputbuffer.c |   46 +++++++++++++++++++++++++++++++++++++++
 src/input/idirectfbinputbuffer.h |    4 +++
 src/input/idirectfbinputdevice.c |   11 ++++++++-
 src/windows/idirectfbwindow.c    |   13 +++++++++++
 5 files changed, 89 insertions(+), 1 deletion(-)



commit 29cf44cd57b81d4a6ed870d2bb687f6b0a66b552
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue May 16 18:55:07 2006 +0000

    Wait for correct amount of fifo entries.


 matrox_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c365ba8cf8822535607627af61a52062ba01aa1e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri May 12 19:50:00 2006 +0000

    - Don't touch console blanking when using graphics-vt.
    - Disable cursor on startup.


 fbdev.c |    8 ++++----
 vt.c    |   13 ++++++++++---
 2 files changed, 14 insertions(+), 7 deletions(-)



commit 3a5cdbc71a905bba703ba6a148f4881eae0129f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 6 23:59:43 2006 +0000

    Fake video modes by reading fb.modes, just like the fbdev backend.


 sdl.c |   91 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 sdl.h |    2 +
 2 files changed, 89 insertions(+), 4 deletions(-)



commit 0e2795f29ae7c1009739243ff2c486dfcfd2e8d1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 6 23:44:19 2006 +0000

    Added new debug domain Core/Graphics.
    
    Added two debug messages to dfb_gfxcard_drawglyph().


 gfxcard.c |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)



commit dd2e0972d382568051958952f3a298a98b4192f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 6 23:43:08 2006 +0000

    Fixed occasionally invisible DrawGlyph(), parameter and local variable name
    changes were not complete and an uninitialized local variable was checked
    instead of the parameter.


 idirectfbsurface.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit fe061852e95b8adefc335c66739c4ee90a67f1c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 6 23:29:18 2006 +0000

    Fixed (serious) warnings.


 dfbinput.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit df086edaac6a3e04cfa9c68760927b24594a19fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 6 15:25:42 2006 +0000

    Welcome 0.9.26
    
    Added support for other encodings than UTF8. Encodings are (or can be) provided
    with each font implementation. This model reduces code sharing slightly, but
    allows higher efficiency via optimized combination of decoding and translation.
    
    Every encoding just has a name and an ID, where the name can be chosen freely,
    except for DTEID_UTF8 which is always available and has the name "UTF8".
    
    Added interface methods
    - IDirectFBFont::EnumEncodings() enumerates all provided encodings.
    - IDirectFBFont::FindEncoding() looks up an encoding directly by its name.
    - IDirectFBFont::SetEncoding() for local methods and as a default for surfaces.
    - IDirectFBSurface::SetEncoding() chooses an encoding for the text routines, will be
      overwritten by SetFont() which takes the default encoding of the new font.
    
    Reworked all loops dealing with strings, characters and glyph information.
    
    Implemented UTF8 and "Latin1" encoding in FT2 font loader. Nice demonstration how
    different encodings can be used, while still having a single glyph cache, which is
    no longer based on character codes, but on their raw indices.
    
    ---
    
    Added dfb_font_register_encoding( id, name, funcs ) that is called by the font
    module to register implementations. The 'id' can be DTEID_UTF8 or DTEID_OTHER,
    where in the latter case the actual id will be allocated dynamically.
    
    Added CoreEncodingFuncs only containing GetCharacterIndex() and DecodeText() to
    do character to index translation and text decoding (including translation).
    
    Other functions like GetGlyphInfo() or GetKerning() take raw indices instead
    of unicode character codes now.
    
    In the case of DTEID_UTF8 it's allowed in an implementation to
    just provide GetCharacterIndex() and let the core do the DecodeText(),
    but that would cause one GetCharacterIndex() call per decoded unicode
    character. So implementing both functions is advisable.
    
    If nothing is registered for DTEID_UTF8 at all, the core will
    pass the raw unicode characters to GetGlyphInfo(), RenderGlyph() etc.
    That's the old behaviour, fully compatible with old modules. It's
    also a good choice if you want to avoid the character translation,
    having an efficient font module which is based natively on unicode
    characters only.
    
    When registering an encoding implementation using DTEID_OTHER,
    both GetCharacterIndex() and DecodeText() must be provided.
    
    Added dfb_font_decode_character() to get the raw index of a single character
    and dfb_font_decode_text() which decodes an encoded sequence of characters,
    stores all their indices in the provided array and returns the amount.
    Both functions have a parameter to select the encoding for the operation.
    
    ---
    
    Changed DirectTree's fast key range from 32-128 to 0-128 as we are no longer
    having ASCII values but zero based glyph indices.
    
    Added some debug messages and domains, like Core/Font.
    
    Cleanups.


 configure.in                                 |    2 
 include/directfb.h                           |  157 +++++++++++------
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |  188 +++++++++++++++-----
 lib/direct/tree.c                            |   15 -
 lib/direct/tree.h                            |    2 
 src/core/fonts.c                             |  201 +++++++++++++++++++++
 src/core/fonts.h                             |  126 ++++++++++---
 src/core/gfxcard.c                           |  201 ++++++++++-----------
 src/core/gfxcard.h                           |   11 -
 src/display/idirectfbsurface.c               |  169 ++++++++++++------
 src/display/idirectfbsurface.h               |    1 
 src/media/idirectfbfont.c                    |  249 +++++++++++++++++++--------
 src/media/idirectfbfont.h                    |    8 
 13 files changed, 962 insertions(+), 368 deletions(-)



commit 4e3161e6c83d761e010f27de7b2cb5060fcfed66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 5 23:07:23 2006 +0000

    First and fully working implementation of dead key handling using static
    tables for mapping of dead keys and following symbols to the combined symbol.


 input.c |  108 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 105 insertions(+), 3 deletions(-)



commit a24387318b5601a03ed5be8767157d0cb17f2750
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 5 23:04:08 2006 +0000

    Added support for dead keys.


 keyboard/keyboard.c       |   24 ++++++++++++++++++++++++
 linux_input/linux_input.c |   26 +++++++++++++++++++++++++-
 2 files changed, 49 insertions(+), 1 deletion(-)



commit 9622c691964ba82cd069fbc29f66511c67afe758
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 5 23:01:45 2006 +0000

    Show hex values for symbols without an enum entry.


 dfbinput.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 53bea559fec69effbbaea2c8bfbbfa6ae17624df
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri May 5 12:31:14 2006 +0000

    Disable host-to-video hardware blit for simple blits without format conversion.
    Added nvEngineReset().


 nvidia.c |   37 +++++++++++++++++++++++++++++++++----
 1 file changed, 33 insertions(+), 4 deletions(-)



commit c569028afb8cc3efd9b5a8836c9395f2fb2cc01c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 3 07:38:51 2006 +0000

    regenerated


 ChangeLog |  400 ++++----------------------------------------------------------
 1 file changed, 26 insertions(+), 374 deletions(-)



commit 82f09f8eed7f95ad7634c7f31064fef0aefe845f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 3 07:37:05 2006 +0000

    Fix build problem by swapping two includes.


 i830.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b18fae799efcbd5ed68b11d940e0752002a56ca4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 3 07:35:48 2006 +0000

    More EXTRA_DIST stuff.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit f5e3029aa3f1ff17aa167f6249d6f0fcb291389e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 3 07:34:53 2006 +0000

    Added "fake.c" also to EXTRA_DIST...


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 131e98d705e1d076c9bab9b3aef29f56c93602cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 2 22:41:06 2006 +0000

    New changelog and news.


 ChangeLog | 2319 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 NEWS      |  245 ++++++
 2 files changed, 2523 insertions(+), 41 deletions(-)



commit 66cc6b43047cb9943335853556d54201cad80845
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 19:11:14 2006 +0000

    #include <dfb_types.h>


 fb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 74626c64f90d54d1e885a22a4a49c84a365da357
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 19:09:28 2006 +0000

    This patch is similar in spirit as the v4l one. Includes the fb.h
    header into the sources so the definitions can be used freely.
    Also this would make the 'accelerators.h' file obsolete.


 b/configure.in                      |   31 +--
 b/gfxdrivers/ati128/Makefile.am     |    1 
 b/gfxdrivers/ati128/ati128.c        |    4 
 b/gfxdrivers/cle266/Makefile.am     |    1 
 b/gfxdrivers/cle266/unichrome.c     |    4 
 b/gfxdrivers/cyber5k/Makefile.am    |    1 
 b/gfxdrivers/cyber5k/cyber5k.c      |    4 
 b/gfxdrivers/i810/i810.c            |    2 
 b/gfxdrivers/i830/i830.c            |    2 
 b/gfxdrivers/mach64/Makefile.am     |    1 
 b/gfxdrivers/mach64/mach64.c        |    4 
 b/gfxdrivers/matrox/matrox.c        |    4 
 b/gfxdrivers/matrox/matrox_3d.c     |    4 
 b/gfxdrivers/matrox/matrox_bes.c    |    3 
 b/gfxdrivers/nvidia/nvidia.c        |   12 -
 b/gfxdrivers/radeon/radeon.c        |    3 
 b/gfxdrivers/savage/Makefile.am     |    1 
 b/gfxdrivers/savage/savage.c        |    4 
 b/gfxdrivers/sis315/sis315.c        |    4 
 b/gfxdrivers/sis315/sis315_compat.h |    2 
 b/gfxdrivers/tdfx/Makefile.am       |    1 
 b/gfxdrivers/tdfx/tdfx.c            |    4 
 b/gfxdrivers/unichrome/unichrome.c  |    4 
 b/src/core/Makefile.am              |    1 
 b/systems/fbdev/Makefile.am         |    1 
 b/systems/fbdev/fb.h                |  365 ++++++++++++++++++++++++++++++++++++
 b/systems/fbdev/fbdev.c             |    3 
 b/systems/fbdev/fbdev.h             |    3 
 b/systems/fbdev/vt.c                |    3 
 src/core/accelerators.h             |  245 ------------------------
 30 files changed, 412 insertions(+), 310 deletions(-)



commit 72af467dd5112597fb5d1a3be31a61494a558388
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 18:51:52 2006 +0000

    Thanks to Andreas Jochens <aj@andaco.de> for this patch that "fixes
    a build failure on amd64 due to types clashing by including 'dfb_types.h'
    instead of 'asm/types.h' (needs to be applied after the fbdev one, or just
    ignore the error from the missing file)".


 README                          |    1 +
 gfxdrivers/cyber5k/cyber5k.h    |    2 +-
 gfxdrivers/cyber5k/mmio.h       |    2 +-
 gfxdrivers/i810/i810.c          |    2 +-
 gfxdrivers/i810/i810.h          |    2 +-
 gfxdrivers/i830/i830.c          |    3 +--
 gfxdrivers/i830/i830.h          |    2 +-
 gfxdrivers/i830/i830_overlay.c  |    4 ++--
 gfxdrivers/nsc/nsc.c            |    4 ++--
 gfxdrivers/sis315/sis315_mmio.h |    2 +-
 10 files changed, 12 insertions(+), 12 deletions(-)



commit 7ee805737c46c557c0363218ee800ea90ac70d03
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 18:44:20 2006 +0000

    This patch includes the V4L header files into the directfb sources, so
    it can use the features even when building on a kernel that does not
    support them. That at least makes life easier for distributions. It's
    also safer for the developers, because then you can use the
    definitions freely.


 configure.in                                                   |   18 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    4 
 interfaces/IDirectFBVideoProvider/videodev.h                   |  353 +++
 interfaces/IDirectFBVideoProvider/videodev2.h                  |  897 ++++++++++
 4 files changed, 1255 insertions(+), 17 deletions(-)



commit 84008f26a9f6033b0e579e1877c99e919bf6b682
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 18:39:38 2006 +0000

    Thanks to Jeff Bailey <jbailey@ubuntu.com> for this patch that "removes
    unneeded unconditonal <sys/io.h> includes".


 i830/i830.h       |    1 -
 savage/savage3d.c |    1 -
 savage/savage4.c  |    1 -
 3 files changed, 3 deletions(-)



commit 193d22aaa28f3b6c83e1d6011a690cae7b1f1430
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 18:37:58 2006 +0000

    Thanks to Jeff Bailey <jbailey@ubuntu.com> for this patch that "fixes
    a build failure on ia64, by using syscall() instead of _syscall0
    as the later is not supported there".


 README              |    1 +
 lib/direct/system.c |   23 ++++++++---------------
 2 files changed, 9 insertions(+), 15 deletions(-)



commit 00487fa87bc6b9876d78d54b1406bf4d91d1464b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 1 18:34:21 2006 +0000

    Thanks to Colin Watson <cjwatson@debian.org> and Guillem Jover <guillem@debian.org>
    for this patch that "fixes the link dependencies for the plugins.
    So that stuff like library symbol reduction in debian-installer can
    work properly".


 README                                        |    2 ++
 gfxdrivers/ati128/Makefile.am                 |    4 ++++
 gfxdrivers/cle266/Makefile.am                 |    5 +++++
 gfxdrivers/cyber5k/Makefile.am                |    4 ++++
 gfxdrivers/i810/Makefile.am                   |    4 ++++
 gfxdrivers/i830/Makefile.am                   |    5 ++++-
 gfxdrivers/mach64/Makefile.am                 |    4 ++++
 gfxdrivers/matrox/Makefile.am                 |    5 ++++-
 gfxdrivers/neomagic/Makefile.am               |    4 ++++
 gfxdrivers/nsc/Makefile.am                    |    4 ++++
 gfxdrivers/nvidia/Makefile.am                 |    8 +++++++-
 gfxdrivers/radeon/Makefile.am                 |    4 ++++
 gfxdrivers/savage/Makefile.am                 |    4 ++++
 gfxdrivers/sis315/Makefile.am                 |    4 ++++
 gfxdrivers/tdfx/Makefile.am                   |    4 ++++
 gfxdrivers/unichrome/Makefile.am              |    5 +++++
 inputdrivers/dbox2remote/Makefile.am          |    4 ++++
 inputdrivers/dreamboxremote/Makefile.am       |    4 ++++
 inputdrivers/elo/Makefile.am                  |    4 ++++
 inputdrivers/h3600_ts/Makefile.am             |    4 ++++
 inputdrivers/joystick/Makefile.am             |    4 ++++
 inputdrivers/keyboard/Makefile.am             |    4 ++++
 inputdrivers/linux_input/Makefile.am          |    4 ++++
 inputdrivers/lirc/Makefile.am                 |    4 ++++
 inputdrivers/mutouch/Makefile.am              |    4 ++++
 inputdrivers/ps2mouse/Makefile.am             |    4 ++++
 inputdrivers/serialmouse/Makefile.am          |    4 ++++
 inputdrivers/sonypi/Makefile.am               |    4 ++++
 inputdrivers/ucb1x00_ts/Makefile.am           |    4 ++++
 inputdrivers/wm97xx_ts/Makefile.am            |    4 ++++
 interfaces/IDirectFBFont/Makefile.am          |    9 ++++++++-
 interfaces/IDirectFBImageProvider/Makefile.am |   18 +++++++++++++++---
 interfaces/IDirectFBVideoProvider/Makefile.am |    5 +++++
 systems/fbdev/Makefile.am                     |    5 +++++
 systems/osx/Makefile.am                       |   10 ++++++++++
 systems/sdl/Makefile.am                       |   14 ++++++++++++--
 systems/vnc/Makefile.am                       |    9 +++++++++
 systems/x11/Makefile.am                       |   10 ++++++++++
 wm/default/Makefile.am                        |    5 +++++
 wm/unique/Makefile.am                         |    5 ++++-
 40 files changed, 206 insertions(+), 10 deletions(-)



commit 3e1fb630755394a5925424dfb0b6a1da102e40c0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Apr 18 09:00:08 2006 +0000

    Return shifted symbols for DIKI_0-9 and DIKI_LESS_SIGN.


 x11input.c |   26 ++++++++++++++++++++++----
 1 file changed, 22 insertions(+), 4 deletions(-)



commit f57b308f0ef39b66415677346975431e11157211
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Apr 12 10:29:07 2006 +0000

    Updated the manual page.


 directfbrc.5.in |   66 +++++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 56 insertions(+), 10 deletions(-)



commit bfd15b30f7ad17e44244d713cb0b2ef99b48ee3c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Apr 8 13:21:57 2006 +0000

    Compute the Low Destination ColorKey taking int account a dithered color conversion.


 radeon_overlay.c |   25 +++++++++++++++++--------
 1 file changed, 17 insertions(+), 8 deletions(-)



commit d3f2b39dec3b2ad9a421b967cc7aabe5958f2ec5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Apr 8 13:20:06 2006 +0000

    Fix: blitting A8 surfaces with colorization to AYUV is supported.


 radeon.c |   27 +++++++++++++++------------
 1 file changed, 15 insertions(+), 12 deletions(-)



commit 738efe52d87657b942bc9efd6443b6233b69565f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 7 19:24:26 2006 +0000

    DIKI_ALTGR is gone. The key right to the space bar is the right alt key.
    No matter which map is loaded, the identifiers are just named hardware keys,
    where you really specify the physical entity on your keyboard. In this case
    it's always DIKI_ALT_R, no matter if it's mapped to DIKS_ALTGR or DIKS_ALT.
    On standard keyboards it's also always the same hardware key code, no matter
    if you by a German keyboard with AltGr or a U.$. one with Alt.
    
    Changed the input core logic for keeping track of modifiers. If DIKI_ALT_R
    is pressed, also look at the symbol to decide if DIMM_ALT or DIMM_ALTGR is
    to be added/removed.
    
    Now application developers don't need to check for both DIKI_ALTGR and
    DIKI_ALT_R if they want to check for the key right next to the space bar :)


 include/directfb_keyboard.h            |    1 
 inputdrivers/linux_input/linux_input.c |    3 +-
 src/core/input.c                       |   34 +++++++++++++++------------------
 systems/sdl/sdlinput.c                 |    7 ++----
 systems/x11/x11input.c                 |    3 --
 5 files changed, 21 insertions(+), 27 deletions(-)



commit 5932ee83906262524c3b029c8dfad42191a19d09
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Apr 7 15:10:28 2006 +0000

    Fixed Cb/Cr offset computation (height*pitch/4 is different from height/2*pitch/2 if height is odd).


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit bc988ff64737032f69d6ca95011850488e62abd5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Apr 7 15:07:58 2006 +0000

    Fixed incorrect Cr offset computation in dfb_copy_buffer_32().


 gfx_util.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 39a4fe8ed0d50d287a425be7ac64296df6f77782
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Apr 7 12:29:13 2006 +0000

    Fixed memory leak: dfb_state_destroy() was still freeing gfxs->Aacc instead of gfxs->ABstart.


 state.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e1104068434774eb31cb2d7207172837a95e52f4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Apr 7 09:39:15 2006 +0000

    Added acceleration for AYUV, but color conversion is not supported because
    radeon supports AVYU instead of AYUV.


 r100_state.c  |   10 ++++++++++
 r200_state.c  |   10 ++++++++++
 r300_state.c  |   10 ++++++++++
 radeon.c      |   24 ++++++++++++++++++++++++
 radeon_regs.h |    6 +++---
 5 files changed, 57 insertions(+), 3 deletions(-)



commit 0494597af04300ddf93ec5b0e1b4ffe7833b3e78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 6 23:15:52 2006 +0000

    Added missing inputdrivers/penmount/Makefile.


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit ad0d296161775933eacca9dca67c792d0faa41d9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 17:46:14 2006 +0000

    Fixed a wrong pointer.


 gfx_util.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 05673fc0681e1df121c945d9029785d25d390ec0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 13:29:17 2006 +0000

    Almost completed AYUV support (lacks colorkeying).


 generic.c |   92 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 87 insertions(+), 5 deletions(-)



commit 892c5099f3678b6cbad93cfbbd6969dd2fb6797f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 13:05:03 2006 +0000

    Fixed AYUV span writing.


 gfx_util.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit 106e3d8bdd9e8d92d307d36f87b644c00ddb519b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 13:03:53 2006 +0000

    Check for penmount input driver.


 configure.in |   13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)



commit 54ae63e6ff1bdddf3ff842074d3927730abd178a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 12:44:24 2006 +0000

    Replaced error message about access failed to /proc/bus/pci/devices with a debug message.


 fbdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 861f5b0aed6bf2633d639d3c837032870d61c214
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 6 12:42:59 2006 +0000

    Replaced freetype-config by $FREETYPE_CONFIG.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit bf894a1471500feb5f39fbe34e8c2de59f91e8a5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 6 12:00:34 2006 +0000

    Added DSPF_AYUV, a 32bit packed AYUV format for graphics,
    being the counterpart of ARGB in the YUV color space.


 include/directfb.h        |    7 +++++--
 src/core/surfaces.c       |    1 +
 src/gfx/convert.c         |    7 +++++++
 src/gfx/convert.h         |    5 +++++
 src/gfx/generic/generic.c |   27 +++++++++++++++++++++++++++
 src/idirectfb.c           |    2 ++
 src/misc/conf.c           |    1 +
 src/misc/gfx_util.c       |   10 ++++++++++
 wm/default/default.c      |    2 ++
 9 files changed, 60 insertions(+), 2 deletions(-)



commit 4868de1074f49c45eef191df4e8a129518f65eff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 5 23:34:29 2006 +0000

    Removed r100 and r200 driver in favor of the latest and greatest Radeon driver.


 b/configure.in                 |   28 
 b/gfxdrivers/Makefile.am       |   17 
 gfxdrivers/r100/Makefile.am    |   34 
 gfxdrivers/r100/r100.c         | 1822 -------------------------
 gfxdrivers/r100/r100.h         |  123 -
 gfxdrivers/r100/r100_mmio.h    |  135 -
 gfxdrivers/r100/r100_overlay.c |  865 ------------
 gfxdrivers/r100/r100_regs.h    | 2361 ---------------------------------
 gfxdrivers/r100/r100_state.c   |  809 -----------
 gfxdrivers/r100/r100_state.h   |   57 
 gfxdrivers/r200/.cvsignore     |    6 
 gfxdrivers/r200/Makefile.am    |   35 
 gfxdrivers/r200/README         |   28 
 gfxdrivers/r200/r200.c         | 1780 -------------------------
 gfxdrivers/r200/r200.h         |  125 -
 gfxdrivers/r200/r200_crtc1.c   |  137 -
 gfxdrivers/r200/r200_mmio.h    |  135 -
 gfxdrivers/r200/r200_overlay.c |  873 ------------
 gfxdrivers/r200/r200_regs.h    | 2897 -----------------------------------------
 gfxdrivers/r200/r200_state.c   |  825 -----------
 gfxdrivers/r200/r200_state.h   |   57 
 21 files changed, 3 insertions(+), 13146 deletions(-)



commit e4bd6e3b474b0b254e764bc535db7d084018e4dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 5 23:29:01 2006 +0000

    Applied patch from Christian Krause <krause.chr@gmail.com> that allows
    usage of the option "mouse-source" without "mouse-gpm-source".


 ps2mouse.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit 59b321d5b167cb91c0c9e8780ddd46c9028e0697
Author: Nikita Egorov <nikego@directfb.org>
Date:   Tue Apr 4 15:01:43 2006 +0000

    Added input driver for PenMount 9509 serial touchscreen.


 inputdrivers/Makefile.am          |    5 
 inputdrivers/penmount/.cvsignore  |    6 
 inputdrivers/penmount/Makefile.am |   26 ++
 inputdrivers/penmount/penmount.c  |  357 ++++++++++++++++++++++++++++++++++++++
 src/misc/conf.c                   |   13 +
 src/misc/conf.h                   |    2 
 tools/Makefile.am                 |    5 
 tools/dfbpenmount.c               |  219 +++++++++++++++++++++++
 8 files changed, 632 insertions(+), 1 deletion(-)



commit b1933e0cf278ec9d7f6a55b4d8eb593c67fb3cf1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Apr 4 05:26:58 2006 +0000

    Fix negative line width handling in fill_tri().


 gfxcard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 84ba3971285041762e2af83e2d41d2e8d6d7332d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 2 12:50:38 2006 +0000

    Thanks to Andy Stewart for fixing the hash table reallocation which didn't
    check for collisions during reinsertion.


 hash.c |   12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)



commit 7a5310428d8784285d32dc353177fea6ea9f4677
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 2 12:40:53 2006 +0000

    Fix wrong signedness in IDirectFBSurface_GetClip().


 idirectfbsurface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 206274287105126859013256e3d7062d4a9a3520
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 2 12:18:18 2006 +0000

    Fixed errors and warnings.


 uc_overlay.h   |    2 +-
 uc_ovl_hwmap.c |    2 +-
 unichrome.c    |    4 +++-
 3 files changed, 5 insertions(+), 3 deletions(-)



commit 844a82586f477151d58f8ae4f9c64d26e14c8021
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 30 12:38:09 2006 +0000

    Fix errors given by including the header in a C++ code.


 state.h |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 5bebc73b6ea7094d9654220e0a349a4d8a7ab830
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 26 14:27:00 2006 +0000

    Fixed bogus "fbdev driver possibly buggy" warning if the video memory is too
    small to set the mode properly, i.e. when vyres is clipped by the driver.


 fbdev.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 4d5ae5061ea6c681969463c18a4d018f154442be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 26 11:45:48 2006 +0000

    Fixed (unused) macro EXPAND_7to8.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 11c9529d4b70281aa3790561d95e916627b861e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 26 11:33:36 2006 +0000

    Read up to 64 events with one read().
    
    Combine motion events if they follow each other immediately and would
    cause a lag or buffer overrun otherwise.


 linux_input.c |   64 ++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 60 insertions(+), 4 deletions(-)



commit 0e9a0ac8d78df9b666d065479e70e7a56c0370ca
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Mar 22 13:12:22 2006 +0000

    Try to get vendor/device id from mmio.


 radeon.c      |   27 ++++++++++++++++-----------
 radeon_mmio.h |   12 ++++++++++++
 radeon_regs.h |    7 ++++---
 3 files changed, 32 insertions(+), 14 deletions(-)



commit 217a73989ba858b1cdb47d6affa1925455a048e9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Mar 22 10:38:09 2006 +0000

    Initialize interface pointers (loaded module may not be up to date with the interface version).


 idirectfbimageprovider.c |   68 ++++++++++++++++++++
 idirectfbvideoprovider.c |  157 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 225 insertions(+)



commit 163bd788abba21335958a90899edfe3e48415a9e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Mar 22 10:35:42 2006 +0000

    Warn if the device id detection fails.


 radeon.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit 2df87b81d3235fce9c162b2ba5ad4dbe88055d33
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Mar 21 11:41:45 2006 +0000

    Follow changes.


 gfxdrivers/radeon/radeon_crtc2.c   |   18 ------------
 gfxdrivers/radeon/radeon_overlay.c |   22 --------------
 systems/fbdev/fbdev.c              |   55 +++++--------------------------------
 3 files changed, 8 insertions(+), 87 deletions(-)



commit e96e2ae11a0cfa730d26bf9b2e1b9be4c3b677e1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Mar 21 11:40:35 2006 +0000

    Centralized the selection of the default resolution/pixelformat.


 directfb.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 61 insertions(+), 15 deletions(-)



commit 051ce5fc92328cb961534983083ce60351c84ef3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Mar 20 14:27:21 2006 +0000

    Imported the new Unified Radeon driver, with a lot of improvements and new features:
     - supports smooth page flipping
     - supports seconday head output
     - supports overlay on secondary head
     - improved overlay RGB rendering
     - improved R100/R200 3d functions performance
     - fixed 2d/3d engines syncronization
    
    TODO:
     - 3d acceleration on R300 chipsets
     - TV output


 b/gfxdrivers/radeon/Makefile.am       |   21 
 b/gfxdrivers/radeon/r100_3d.c         |  699 +++++
 b/gfxdrivers/radeon/r100_state.c      |  766 +++++
 b/gfxdrivers/radeon/r200_3d.c         |  692 +++++
 b/gfxdrivers/radeon/r200_state.c      |  784 +++++
 b/gfxdrivers/radeon/r300_state.c      |  767 +++++
 b/gfxdrivers/radeon/radeon.c          | 1854 ++++++++++---
 b/gfxdrivers/radeon/radeon.h          |  222 +
 b/gfxdrivers/radeon/radeon_2d.c       |  397 ++
 b/gfxdrivers/radeon/radeon_2d.h       |   38 
 b/gfxdrivers/radeon/radeon_3d.h       |   75 
 b/gfxdrivers/radeon/radeon_chipsets.h |  169 +
 b/gfxdrivers/radeon/radeon_crtc2.c    | 1033 +++++++
 b/gfxdrivers/radeon/radeon_mmio.h     |  184 -
 b/gfxdrivers/radeon/radeon_overlay.c  | 1291 ++++++---
 b/gfxdrivers/radeon/radeon_regs.h     | 4612 +++++++++++++++++++++++++++++++---
 b/gfxdrivers/radeon/radeon_state.h    |  191 -
 gfxdrivers/radeon/radeon_state.c      |  239 -
 18 files changed, 12333 insertions(+), 1701 deletions(-)



commit a47cf485b09a9e92a892321bf225251ff5e0823f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Mar 20 14:20:13 2006 +0000

    Added dfb_gfxcard_surface_{enter/leave}(), called when a software access to
    video memory begins/finishes.
    
    Needed by the Radeon driver to swap pixels on big-endian machines
    (actually the method doesn't work fine when surfaces are locked for long time).


 gfxcard.c        |   18 +++++++++++++++++-
 gfxcard.h        |   15 ++++++++++++++-
 surfacemanager.c |   32 +++++++++++++++++++++++---------
 surfaces.c       |   27 ++++++++++++++++++++++-----
 surfaces.h       |    3 ++-
 5 files changed, 78 insertions(+), 17 deletions(-)



commit cc555969fcb9ca6181fa53dfade137a23110982f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 20 01:26:50 2006 +0000

    Fix inverted module directory condition.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5ca055496904f9edd97abb2fec7e9cb5c9cf2d98
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 20 00:35:35 2006 +0000

    Manage UCB1x00 Touchscreen driver build as others, enabled by default on arm.


 configure.in |   15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)



commit a0df9c7eb6fc447d5097c55cd8b6d1a8085b3996
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 20 00:27:09 2006 +0000

    In case of an error in dfb_surface_dump() only release the palette if non-NULL.


 surfaces.c |   12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)



commit 23596187016e9f002248814cd3b1015e946243ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 20 00:19:59 2006 +0000

    Allow NULL argument in direct_free().


 mem.c |    3 +++
 1 file changed, 3 insertions(+)



commit 5aa3fdb2dbdebbca51252e49af5546cfb41c8c5a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 19 21:44:13 2006 +0000

    Replaced the enum based bool definition by a typedef to __u8.
    Defined false and true via macros like stdbool.h does.
    
    Before that the sizeof bool didn't match the real one.


 types.h |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit 221162d18d7702d649443ee757c59a5a14b5bb0f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 19 21:23:19 2006 +0000

    Don't return a bitmask but a real boolean value in dfb_gfxcard_state_check().


 gfxcard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e1b6815022f8cabca6c67a87cd9f170ae6218ca1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 19 00:47:56 2006 +0000

    fixed


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 34beea7207f699703952228d2081b89fcf39bfe8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 19 00:30:16 2006 +0000

    Change the module directory only for builds that don't *support* debug.


 configure.in |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit e2b9cf4522a3abaefb48a929c689d7b19a8f0e8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 14 23:25:52 2006 +0000

    Include <linux/pci_regs.h> only if it exists, otherwise include <linux/pci.h>.


 configure.in        |    2 +-
 systems/fbdev/agp.c |    4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)



commit d235d766d95bc746fbd3e4d80f725561ac62a0de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 10 17:07:05 2006 +0000

    Added FusionCall to each input device for maintenance via master,
    driver calls etc. using new CoreInputDeviceCommand enum.
    
    Added dfb_input_device_reload_keymap() implemented via the new call passing
    the CIDC_RELOAD_KEYMAP command. The master will reload the whole keymap via
    driver API.
    
    Added debug domain "Core/Input" with some debug messages.
    
    Added a new tool called "dfbinput" which features keymap dump/reload so far.


 src/core/core.h   |    2 
 src/core/input.c  |  189 +++++++++++++++++++++++++++-----
 src/core/input.h  |    2 
 tools/.cvsignore  |    1 
 tools/Makefile.am |    5 
 tools/dfbinput.c  |  318 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 487 insertions(+), 30 deletions(-)



commit c973fa3f2ef2dcdc1b7e4e3890f1b81d6ce35e9f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 10 12:58:03 2006 +0000

    Check for device->shared in dfb_input_dispatch() to catch early birds :)


 input.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 7a64e09458fbf660d631a1e130ad1f58529632dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 10 12:39:07 2006 +0000

    Include <linux/pci_regs.h> instead of <linux/pci.h>.
    
    Fixes build for me. If it fails with older headers we need to add a check.


 agp.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7b2ccd9601870eb9ceb963bc6df2f2c5b503d9a5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 10 12:30:42 2006 +0000

    Fixed autoconf detection. Don't know exactly what, but I guess
    it got confused with the output of a newer wrapper script.


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d1cc303f91368155d7c8a7ceab91cac2a0c8b075
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 10 12:24:56 2006 +0000

    Allow pending reactions (in local dispatcher queue) to be executed
    after the shared reactor part has been destroyed. This fixes for example
    occasionally missing DWET_DESTROYED events.


 reactor.c |   46 +++++++++++++++++++++++-----------------------
 1 file changed, 23 insertions(+), 23 deletions(-)



commit ac26da5f8e1a8387031c80987788d46d54c38074
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 1 04:23:11 2006 +0000

    Added FusionCallExecFlags parameter to fusion_call_execute().
    
    Use the flag FCEF_ONEWAY in the SDL backend to not wait for the
    call being executed, otherwise a deadlock could occur. The return
    value is meaningless anyways. Queued updates will be merged on the
    receiving side (master) to avoid a lag and improve performance.


 lib/fusion/call.c      |   25 +++++++++++++++----------
 lib/fusion/call.h      |   23 ++++++++++++-----------
 lib/fusion/types.h     |   19 ++++++++++++++-----
 systems/fbdev/fbdev.c  |    2 +-
 systems/sdl/primary.c  |   27 +++++++++++++--------------
 systems/vnc/primary.c  |    8 ++++----
 systems/x11/primary.c  |   10 ++++++----
 systems/x11/x11.c      |    2 ++
 systems/x11/x11input.c |    2 ++
 9 files changed, 69 insertions(+), 49 deletions(-)



commit c34a83b83c64a1866076b8a7cbfa02c9a45fe855
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 22 08:27:02 2006 +0000

    Make compiler happy.


 fusion.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 61e157e0572a6bfc8adc457d9bea10db81782805
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 15 16:17:27 2006 +0000

    Added a parameter to fusion_enter() - FusionEnterRole - to specify either
    FER_ANY, FER_MASTER or FER_SLAVE. If the world can't be entered playing the
    specified role, an error message is printed and DFB_UNSUPPORTED is returned.


 lib/fusion/fusion.c    |   86 ++++++++++++++++++++++++++++++++++++++-----------
 lib/fusion/fusion.h    |   12 +++++-
 src/core/core.c        |    2 -
 tools/fusion_bench.c   |    2 -
 wm/unique/stret_test.c |    2 -
 5 files changed, 79 insertions(+), 25 deletions(-)



commit 033c177bf046450e8d9e1b049c7d1b49abe5a0ef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 15 16:14:54 2006 +0000

    Added D_ASSERT( object->state != FOS_ACTIVE ) to fusion_object_destroy().
    
    Only objects in state FOS_INIT or FOS_DEINIT are allowed to be destroyed directly.


 object.c |    1 +
 1 file changed, 1 insertion(+)



commit 7b69a56bfa1e86aa7de8be2f4d873afffc038c23
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 12 03:44:35 2006 +0000

    Fixed build.


 trace.c |    7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)



commit f78abae42ad90072ccab068ba005c32ea7c41d7d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 11 16:47:22 2006 +0000

    Fixed destination offset when no scaling is used, thanks to otokawa.


 idirectfbimageprovider_jpeg.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 5eab7d24de9bf791bc83ed56155afa1c36f48f68
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 10 13:25:51 2006 +0000

    Added symbol resolving support for static binaries.


 trace.c |   44 ++++++++++++++++++++++++++------------------
 1 file changed, 26 insertions(+), 18 deletions(-)



commit e7cf0a183f2b4ac619d68d834570fbb18f3d3366
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 10 13:21:36 2006 +0000

    In Probe() call FT_Done_Face() only if FT_New_Face() succeeded, otherwise
    random segfaults can occur.


 idirectfbfont_ft2.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit f51f94061e29da5048952d8631dfb36298bbc382
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 15:47:59 2006 +0000

    When AGP support is enabled, turn off pci gart and turn on bus mastering.


 r100/r100.c |   10 +++++++---
 r200/r200.c |    7 +++++--
 2 files changed, 12 insertions(+), 5 deletions(-)



commit 2a0c71a3c99b098569e151cef01ef15474b2381d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 7 12:17:14 2006 +0000

    Increased ABI version to avoid problems :)


 core.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b5334b8279ffbacd63b0c0ec2bcb0df454f755a4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 10:05:38 2006 +0000

    Check if dfb_agp_join() fails.


 agp.c   |   10 +++++-----
 fbdev.c |   13 ++++++++++++-
 2 files changed, 17 insertions(+), 6 deletions(-)



commit 550d0482ebf5324b5ad04e510dfb6f732ef17b73
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 09:35:38 2006 +0000

    Follow API changes.


 osx/osx.c |   18 ++++++++++++++++++
 sdl/sdl.c |   18 ++++++++++++++++++
 vnc/vnc.c |   18 ++++++++++++++++++
 x11/x11.c |   18 ++++++++++++++++++
 4 files changed, 72 insertions(+)



commit 51d7213d0c4f02f8371f9cc7a9210c201d34349b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 09:34:32 2006 +0000

    Added support for surfaces stored in AGP memory.


 r100/r100.c         |   26 +++++++++++++++++------
 r100/r100.h         |    3 +-
 r100/r100_overlay.c |   55 +++++++++++++++++++++++++++++++------------------
 r100/r100_state.c   |   20 +++++++++++------
 r200/r200.c         |   38 ++++++++++++++++++++++------------
 r200/r200.h         |    1 
 r200/r200_overlay.c |   58 +++++++++++++++++++++++-----------------------------
 r200/r200_state.c   |   22 ++++++++++++-------
 8 files changed, 136 insertions(+), 87 deletions(-)



commit 5d67f5110cf61e0e3b1ec3abe1474cdb518022ec
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 09:33:34 2006 +0000

    Use internal AGP access.


 b/gfxdrivers/nvidia/Makefile.am |    4 
 b/gfxdrivers/nvidia/nvidia.c    |   66 +++----
 b/gfxdrivers/nvidia/nvidia.h    |    5 
 gfxdrivers/nvidia/nvidia_agp.c  |  351 ----------------------------------------
 gfxdrivers/nvidia/nvidia_agp.h  |   40 ----
 5 files changed, 33 insertions(+), 433 deletions(-)



commit 759d3d256c7fe0cf840c83d04380b81f2b82fac5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 09:32:09 2006 +0000

    Added AGP support.


 Makefile.am |    8 
 agp.c       |  506 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 agp.h       |   53 ++++++
 fbdev.c     |   48 +++++
 fbdev.h     |    5 
 5 files changed, 618 insertions(+), 2 deletions(-)



commit b4dbcde5d2c6251755ffb1abbdd7a1c53586ae70
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 7 09:30:41 2006 +0000

    Added support for surfaces stored in auxiliray memory (PCI/AGP/PCIE).
    
    Added support for Surface Managers with a variable number of heaps.


 core/core_system.h    |   12 +
 core/gfxcard.c        |   86 ++++++++++-
 core/gfxcard.h        |   32 ++--
 core/surfacemanager.c |  377 ++++++++++++++++++++++++++++++++------------------
 core/surfacemanager.h |   11 +
 core/surfaces.c       |    8 -
 core/surfaces.h       |   12 +
 core/system.c         |   24 +++
 core/system.h         |   14 +
 misc/conf.c           |   42 +++++
 misc/conf.h           |    4 
 11 files changed, 470 insertions(+), 152 deletions(-)



commit b411dae7cec0c9065e2eba4e204085617e7810ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 5 17:31:03 2006 +0000

    Install the new header file.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit e39705caa934a584fe7101b1e8183d35ff2fbf63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 5 17:30:27 2006 +0000

    Moved misc/util.h to include/directfb_util.h to use it in applications.
    
    More to come :)


 include/directfb_util.h |  300 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/misc/util.h         |  273 -------------------------------------------
 2 files changed, 303 insertions(+), 270 deletions(-)



commit 27a505c4ed1d2ece73a0daf0b1863bcb0c68fc7c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 5 16:03:06 2006 +0000

    Added new runtime option:
    
    fatal-level=<level>
      Abort on NONE, ASSERT (default) or ASSUME (incl. assert)
    
    
    Finally added documentation of "[no]-vt" :)


 docs/directfbrc.5.in |    8 ++++++++
 lib/direct/conf.c    |    4 +++-
 lib/direct/conf.h    |    8 ++++++++
 lib/direct/debug.c   |   26 ++++++++++++++++++++------
 src/misc/conf.c      |   16 ++++++++++++++++
 5 files changed, 55 insertions(+), 7 deletions(-)



commit 0152edecf64afb473b5c297a2cebebeb5ce1f3ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 5 16:00:04 2006 +0000

    Do the shmalloc benchmark once with debug and once without.


 fusion_bench.c |   26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)



commit 2644c58611042a2c57cdbaa459767bf73b48c21e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 2 18:59:25 2006 +0000

    Made debug/release versions binary compatible, being able to link
    dynamically against both or even run in the same session.
    
    This enables single hybrid SDKs for debug and release platforms.
    
    To achieve this all "debug support code" is in the library, whether
    itself uses debug mechanisms or not.
    
    But the option "--disable-debug-support" builds a "pure release" lib
    to save a few kb in binary size, but basically no runtime overhead.
    
    The shared memory pools accept a new option at creation, that is
    whether to debug allocations. This is stored in the pool info and
    anyone joining the pool must follow it (for the pool).
    
    Except pure release versions which can't join debug enabled pools.
    
    Another limitation is that debug enabled applications cannot link
    against pure release libraries, but a debug enabled application
    can be linked statically against its debug/release library and run
    in a pure release session.
    
    There shouldn't be other limitations and you'll warnings/errors
    before anything crashes etc.
    
    The default for the "debug" option is true in debug enabled libs
    and false in release (debug disabled, but supported) libs. This
    option currently determines if shared memory pools are debug enabled.
    
    Happy mixing :)


 configure.in                  |   18 +++++-
 lib/direct/build.h.in         |    1 
 lib/direct/conf.c             |    5 +
 lib/direct/debug.c            |    4 -
 lib/direct/debug.h            |    5 +
 lib/direct/interface.c        |    2 
 lib/direct/interface.h        |   24 +++++++-
 lib/direct/mem.c              |   16 ++---
 lib/direct/mem.h              |   10 ++-
 lib/fusion/fusion.c           |   17 +++++-
 lib/fusion/shm/fake.c         |   19 ++++---
 lib/fusion/shm/pool.c         |   31 ++++++++---
 lib/fusion/shm/pool.h         |    1 
 lib/fusion/shm/shm_internal.h |    2 
 lib/fusion/shmalloc.c         |  114 ++++++++++++++++++++++++++++++++++++------
 lib/fusion/shmalloc.h         |   37 +++++++------
 src/core/Makefile.am          |    2 
 src/core/core.c               |   14 +----
 src/core/core.h               |    2 
 tools/fusion_bench.c          |    2 
 wm/unique/stret_test.c        |    2 
 21 files changed, 246 insertions(+), 82 deletions(-)



commit 7e03efde3ab18d63eb23863e8eb6db6d0f1a2a41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 2 18:26:21 2006 +0000

    Use D_DEBUG_ENABLED instead of DIRECT_BUILD_DEBUG.


 classes/foo.c    |    2 +-
 classes/root.c   |    2 +-
 classes/window.c |    2 +-
 stret.c          |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)



commit 2e3877f35ba6ca291562a4ce8cf119abf6fb36dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 2 17:20:04 2006 +0000

    Fixed failing assertion due to a race condition between shutdown and update.
    
    Added debug domain "SDL/Updates" and lots of debugging messages.


 primary.c |   73 +++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 61 insertions(+), 12 deletions(-)



commit e91706ef22d8ff39e7f04f4879a060ac3fe7390c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 1 23:10:13 2006 +0000

    Decoupled screen updates from Fusion Dispatcher.
    
    Updates are handled in a separate thread; they're accumulated rather than
    queued in case an update is already pending.


 primary.c |   91 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 sdl.c     |   15 ++++++++++
 sdl.h     |   12 ++++++++
 3 files changed, 107 insertions(+), 11 deletions(-)



commit 241c6ecaed03c832de3b06dc1aebae0d3febee64
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 1 18:57:23 2006 +0000

    Fixed warning (signedness).


 nvidia.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d603b491aa02f25ecb3e457606af745e73a8fd98
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 1 18:55:37 2006 +0000

    Workaround broken(?) 2.6.16 headers.


 joystick/joystick.c       |    7 +++++++
 linux_input/linux_input.c |   12 +++++++++++-
 2 files changed, 18 insertions(+), 1 deletion(-)



commit eebc3b866e5c7c10849da0e21c802fcb21a30c16
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 1 13:39:25 2006 +0000

    Avoid sending s/t coordinates when drawing only shapes.


 r100.c       |  103 ++++++++++++++++++++++++++++++-----------------------------
 r100_state.c |    8 +---
 2 files changed, 56 insertions(+), 55 deletions(-)



commit dfb96eae46811476f104847689c91976d4e4bb8f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 1 10:24:44 2006 +0000

    Add fb_offset to the dma offset.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e9c54218d3d26941a18fdb1830e706fc9dc605df
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 1 09:35:12 2006 +0000

    No longer change the value of MC_FB_LOCATION unless an IGP chipset is used
    (old radeonfb doesn't set the register correctly on IGPs).


 r200.c |   54 ++++++++++++++++++++++++++++++++----------------------
 1 file changed, 32 insertions(+), 22 deletions(-)



commit 8232568b4d550dfe3f6f7904f57e49a0dfaa27b6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 1 09:32:37 2006 +0000

    Imported the new R100 driver.


 configure.in                   |   22 
 gfxdrivers/Makefile.am         |    7 
 gfxdrivers/r100/Makefile.am    |   34 
 gfxdrivers/r100/r100.c         | 1799 +++++++++++++++++++++++++++++++
 gfxdrivers/r100/r100.h         |  122 ++
 gfxdrivers/r100/r100_mmio.h    |  135 ++
 gfxdrivers/r100/r100_overlay.c |  850 ++++++++++++++
 gfxdrivers/r100/r100_regs.h    | 2361 +++++++++++++++++++++++++++++++++++++++++
 gfxdrivers/r100/r100_state.c   |  807 ++++++++++++++
 gfxdrivers/r100/r100_state.h   |   57 
 10 files changed, 6189 insertions(+), 5 deletions(-)



commit a1b1fd67e9739674e05ee02cfca29f98cab580a9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 28 11:41:29 2006 +0000

    Added a patch that allows to mmap AGP memory without root privileges.


 agpgart-noroot-2.6.10.patch.bz2 |binary
 1 file changed



commit f82fbb027f259719919c46bcbae0395efe91b2d5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 28 11:39:15 2006 +0000

    Open log file in append mode.


 log.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2420e8994dc3b9d5ec10cd1241816028595bcc02
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 28 11:38:13 2006 +0000

    Added option [no-]dma (disabled by default).


 conf.c |   10 +++++++++-
 conf.h |    2 ++
 2 files changed, 11 insertions(+), 1 deletion(-)



commit 8cef104e7238329be949e72b77c8412d87f80ddc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 28 11:36:56 2006 +0000

    Version 0.6 of the NVidia driver:
    - Added support for AGP
    - Added support for DMA using AGP or Framebuffer memory.
    
    Currently DMA is not faster than PIO, therefore it's disabled by default.


 b/gfxdrivers/nvidia/Makefile.am      |   11 
 b/gfxdrivers/nvidia/nvidia.c         |  636 ++++++++++++++++++-----------------
 b/gfxdrivers/nvidia/nvidia.h         |   94 +++--
 b/gfxdrivers/nvidia/nvidia_2d.c      |  292 +++++++---------
 b/gfxdrivers/nvidia/nvidia_2d.h      |    3 
 b/gfxdrivers/nvidia/nvidia_3d.c      |  166 ++++-----
 b/gfxdrivers/nvidia/nvidia_3d.h      |    3 
 b/gfxdrivers/nvidia/nvidia_accel.h   |  246 +++++++++++++
 b/gfxdrivers/nvidia/nvidia_agp.c     |  351 +++++++++++++++++++
 b/gfxdrivers/nvidia/nvidia_agp.h     |   40 ++
 b/gfxdrivers/nvidia/nvidia_objects.h |  160 ++++++++
 b/gfxdrivers/nvidia/nvidia_overlay.c |    3 
 b/gfxdrivers/nvidia/nvidia_primary.c |   11 
 b/gfxdrivers/nvidia/nvidia_regs.h    |  431 ++++++++++++++---------
 b/gfxdrivers/nvidia/nvidia_state.c   |  282 ++++++++-------
 b/gfxdrivers/nvidia/nvidia_state.h   |    2 
 gfxdrivers/nvidia/nvidia_mmio.h      |  158 --------
 17 files changed, 1857 insertions(+), 1032 deletions(-)



commit b7d7a76043950102126d000aaa24043ee8f3f7e0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jan 27 13:35:02 2006 +0000

    Check for integrated GPUs.


 r200.c |   62 +++++++++++++++++++++++++++++++++++---------------------------
 r200.h |    1 +
 2 files changed, 36 insertions(+), 27 deletions(-)



commit dff1a5effe84809feb612662a859b84a7714ee4a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 25 14:40:14 2006 +0000

    Reset MC_FB_LOCATION to avoid problems with X (thanks to Michel Danzer).


 r200.c |   16 +++++++---------
 1 file changed, 7 insertions(+), 9 deletions(-)



commit ec0ab004c4a40f8a07aa376da03bb65423ae0bfc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 21:19:23 2006 +0000

    Finally fixed the "random-crashes-when-blitting-from-system-memory" problem.


 nvidia.c       |   43 ++++++++++++++++---------------------------
 nvidia_state.c |    2 +-
 2 files changed, 17 insertions(+), 28 deletions(-)



commit 0772894a73e146ef55a0f8c2dd19102993a572dc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 17:00:02 2006 +0000

    Print less cryptic debugging messages.


 nvidia_mmio.h |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 9b4b1a0c0046a3c2d3b246ef2d35132014177f98
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 11:35:33 2006 +0000

    Fixed a potential memleak.


 log.c |    1 +
 1 file changed, 1 insertion(+)



commit 0ddf560300d58300b0dd8060c3d591992dab7e0a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 11:33:18 2006 +0000

    Fail during probe() if the framebuffer device doesn't provide access to MMIO.


 r200/r200.c     |    5 ++++-
 radeon/radeon.c |    5 ++++-
 2 files changed, 8 insertions(+), 2 deletions(-)



commit 3fa3f80704f3067c04bd8afaf2528fde8e20728d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 11:32:00 2006 +0000

    Fixed a typo.


 r200_regs.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 3c4e3d1b45e4f452ea6ec69fe670b4bbedf19878
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 23 11:31:17 2006 +0000

    Fixed wrong register in R200_SET_YUV422_COLOR().


 r200_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 410aab6f33e6d132713657420d408372379f155c
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jan 22 03:54:52 2006 +0000

    removed extra return


 sdlinput.c |    1 -
 1 file changed, 1 deletion(-)



commit 0ebcf50d3c945a40bed265e548668df61a6f4eba
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Jan 22 03:54:12 2006 +0000

    copied shift fixed for id to char from sdl to x11 driver to fix symbols sent when shift is down


 x11input.c |   61 ++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 50 insertions(+), 11 deletions(-)



commit d3d032ff58dca4aa22ca023eb2b89f8a24485c39
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 19 16:42:26 2006 +0000

    Fixed wrong enum names used (missing E in DVSTATE_).


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 90500310dc14cc5747c4309c056085afbbf4f57b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 19 13:56:14 2006 +0000

    Speed up FillRectangle, Blit and StretchBlit by using the RECTANGLE_LIST primitive
    instead of QUAD_LIST [~15% faster]. :)


 r200.c |   18 ++++++++----------
 1 file changed, 8 insertions(+), 10 deletions(-)



commit 4a1f56c517bb83655cb6340dbc2bfee4eb120a9f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 18 17:31:54 2006 +0000

    Use the POINT primitive to fill rectangles with size=1 (i.e. to draw points) [~60% faster].


 r200.c |   27 +++++++++++++++++++--------
 1 file changed, 19 insertions(+), 8 deletions(-)



commit 76c0abb70404bd03ece844054d67ec192acb2b33
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 15 19:13:27 2006 +0000

    Follow API changes.


 idirectfbvideoprovider_v4l.c |   43 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)



commit 4d123961453d876db72d881331f164a9cfdf1ba3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 15 19:12:11 2006 +0000

    Added IDirectFBVideoProvider::GetStatus() to get the status of the playback;
    this method replaces the previous end-of-playback detection method using GetPos().
    
    Be more explicit about the coordinates system used by IDirectFBVideoProvider::SendEvent().


 directfb.h |   24 ++++++++++++++++++++++--
 1 file changed, 22 insertions(+), 2 deletions(-)



commit 10064fbb3b81d8b3b1e313e494323d5743687e23
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 14 15:14:00 2006 +0000

    Added IDirectFBVideoProvider::GetStreamDescription() to query informations about the stream.


 directfb.h |   55 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 55 insertions(+)



commit 0045fc110a08f826cda49e5f5adc122aed23d97a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 8 06:42:52 2006 +0000

    Fixed disabling video4linux provider.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 460f44a2c1fa84ac8ef6aa811b598d65498daa2e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 7 15:08:13 2006 +0000

    Added DFBEventBufferStats containing various counters for the event queue,
    e.g. total number of events, number of window events, motion events etc.
    
    These reflect the current content of the queue, i.e. dequeueing decrements.
    
    Added IDirectFBEventBuffer::EnableStatistics() to enable/disable collection.
    
    Added IDirectFBEventBuffer::GetStatistics() to query current statistics.


 include/directfb.h               |   54 ++++++++++
 src/input/idirectfbinputbuffer.c |  201 +++++++++++++++++++++++++++++++++++++++
 2 files changed, 255 insertions(+)



commit 524844576fb90d9a10c521c61237e09e1c54c872
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 6 19:57:38 2006 +0000

    Added IDirectFBSurface::GetClip().


 include/directfb.h             |   14 +++++++++++++-
 src/display/idirectfbsurface.c |   19 +++++++++++++++++++
 2 files changed, 32 insertions(+), 1 deletion(-)



commit 73ee7d922a2ed6c0a809e7bdca85e95d2178e864
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Jan 6 17:39:28 2006 +0000

    Added Alex Lau's patch


 sdlinput.c |   83 ++++++++++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 72 insertions(+), 11 deletions(-)



commit 9dccd6c4ea61bfe695151dca34de2751c6c86398
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jan 6 11:26:02 2006 +0000

    Implemented IDirectFBDataBuffer::Finish().


 dispatcher/idirectfbdatabuffer_dispatcher.c |   42 +++++++++++++++++++++++++++-
 dispatcher/idirectfbdatabuffer_dispatcher.h |   21 +++++++-------
 requestor/idirectfbdatabuffer_requestor.c   |   24 +++++++++++++++-
 3 files changed, 75 insertions(+), 12 deletions(-)



commit 6a6d9324dd2086d0486bd66e561f8ecca4cf41d5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 5 18:50:30 2006 +0000

    Use getaddrinfo() to resolve hostname.


 client.c |  105 ++++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 57 insertions(+), 48 deletions(-)



commit 796b4bff740d390138bf2dca28b3d3fcd0a19433
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 5 18:31:18 2006 +0000

    Use getaddrinfo() to resolve host.


 log.c |  135 ++++++++++++++++++++++++++++++++----------------------------------
 1 file changed, 66 insertions(+), 69 deletions(-)



commit 2d68cdfd03b66feedf80f799e577c7f095ed9ca8
Author: Mike Emmel <memmel@directfb.org>
Date:   Thu Jan 5 15:08:23 2006 +0000

    Added fix for keyboard id conver from Alex Lau


 sdlinput.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2fca19d866f2211c2a864b9a0df4fd33da4d997f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 5 12:04:45 2006 +0000

    Added UDP support.
    
    In parse_url(), use memcpy() instead of strncpy() and null-terminate the string
    (from strncpy manual page: "if there is no null byte among the first n bytes of src,
     the result will not be null-terminated").


 stream.c |  135 ++++++++++++++++++++++++++++++++++++++++++++-------------------
 stream.h |    5 +-
 2 files changed, 98 insertions(+), 42 deletions(-)



commit a25bf8eff6583f2c487bb6c3a3abd5b1a44acfca
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 4 12:02:44 2006 +0000

    Completed support for YCbCr formats.


 gfx_util.c |  523 +++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 375 insertions(+), 148 deletions(-)



commit 82f5dc648b10b60043430e08d2c47cf8f086e608
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 2 11:36:59 2006 +0000

    Allow to control background and cursor in exclusive cooperative level.


 idirectfbdisplaylayer.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit 7fd998c896da7506f0736c382e2b313d11643de1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 1 11:49:04 2006 +0000

    If the surface is locked, dfb_surface_reformat() fails returning DFB_LOCKED to avoid deadlocks.


 surfaces.c |   21 ++++++++-------------
 1 file changed, 8 insertions(+), 13 deletions(-)



commit 55ebb159dbcc4672d8607e186899e5ed1bbd18a4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 1 11:01:01 2006 +0000

    Almost completed support for Planar YUV formats (lacks colorkeying).


 generic.c     | 1870 ++++++++++++++++++++++++++++++++++++++--------------------
 generic.h     |   13 
 generic_64.h  |   14 
 generic_mmx.h |   12 
 4 files changed, 1260 insertions(+), 649 deletions(-)



commit a14abfd35a828f896a5a1239aa9964ad1e25b5c0
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Dec 30 18:41:52 2005 +0000

    Fixed a small bug in key translations


 sdlinput.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit 98cc030ec67cf2efd759f39e65763879810e1996
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Dec 30 18:22:06 2005 +0000

    Changed key handling in SDL driver to match the X11 driver which seems correct


 sdlinput.c |  439 ++++++++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 305 insertions(+), 134 deletions(-)



commit c70df84879a87b3e9ef3e237e244002034b39506
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Dec 30 11:45:15 2005 +0000

    - replaced strdupa()/strndupa() by alloca() and strcpy()/strncpy()
    (avoid GNU extensions)


 stream.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 9b06988bf6a133252be2e800f24f7d04102f5a0c
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Dec 30 00:09:32 2005 +0000

    include <sys/stat.h>, required for fstat on some OS


 stream.c |    1 +
 1 file changed, 1 insertion(+)



commit 068d9406127980d1477392361255ddd0e5ad13c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 29 04:21:10 2005 +0000

    Lock surface manager in dfb_surface_unlock() to make lock counter
    decrement atomic! I'm not sure, but I think I just hit that one,
    because the lock counter was one for an unknown reason and resizing
    a window blocked.


 surfaces.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 45f4421662ff4489500f35cdd719d18da4a3d198
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 29 03:29:19 2005 +0000

    Implemented requestor/dispatcher FillSpans().


 dispatcher/idirectfbsurface_dispatcher.c |   37 +++++++++++++++++++++++++++++++
 dispatcher/idirectfbsurface_dispatcher.h |    1 
 requestor/idirectfbsurface_requestor.c   |   20 ++++++++++++++++
 3 files changed, 58 insertions(+)



commit fdb690aca93b76297eca6d348992ec09129820b9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 29 03:14:29 2005 +0000

    Implemented requestor/dispatcher FillRectangles().


 dispatcher/idirectfbsurface_dispatcher.c |   34 +++++++++++++++++++++++++++++++
 dispatcher/idirectfbsurface_dispatcher.h |    1 
 requestor/idirectfbsurface_requestor.c   |   18 ++++++++++++++++
 3 files changed, 53 insertions(+)



commit bb9bcb6be49309ae5e3267c952c07df73c8fb1ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 29 02:35:19 2005 +0000

    Commented out -Wno-strict-aliasing for now. Need to add a check for the gcc version!


 configure.in |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 54be67b7daf0d144a49ae32bb90e3a114f91c20d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 28 02:23:55 2005 +0000

    Added debug messages.


 idirectfbsurface.c        |  116 ++++++++++++++++++++++++++++++++++++++++++++--
 idirectfbsurface_window.c |   34 +++++++++++--
 2 files changed, 142 insertions(+), 8 deletions(-)



commit b3712b434f3c2a1438228931605cf638d7a7a61a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 28 02:22:44 2005 +0000

    Fixed warnings.


 gfxdrivers/i830/i830_overlay.c                   |    4 ++--
 interfaces/IDirectFBImageProvider/mpeg2/getpic.c |   12 ++++++------
 2 files changed, 8 insertions(+), 8 deletions(-)



commit 95115bc9640e5d0bc5fb0a9e70e053b83d3b9c17
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Dec 27 13:58:33 2005 +0000

    typo.


 nvidia.c      |    4 ++--
 nvidia_regs.h |    6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 3e4475dc8c866b707f75c2d93c4c8dd03f52ea6b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Dec 27 13:57:48 2005 +0000

    Removed GetScreenSize() hook.


 nvidia_primary.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 68d52235e70b7da723f22c0c7d021e9b078f76a4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Dec 24 10:50:11 2005 +0000

    Use dfb_system_current_mode() instead of reading CRTC mode registers.


 r200_overlay.c |   47 ++++++++++++++---------------------------------
 1 file changed, 14 insertions(+), 33 deletions(-)



commit 7c349ff8afd7211f58dfee3a3a2d1e236602b499
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 23 15:23:26 2005 +0000

    Ignore return value from IDirectFBDataBuffer::PeekData().


 idirectfbvideoprovider.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit f564ee10a516fd7d120a64892d302072c744ebdc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 23 02:47:53 2005 +0000

    Set FD_CLOEXEC flag on Fusion device.


 fusion.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 4aa020538620c9e54566b07d76ff15bcf7d1674e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 23 01:03:18 2005 +0000

    Don't depend on pure existence of "freetype-config" if FREETYPE_CFLAGS
    and FREETYPE_LIBS are already exported prior to running configure.


 configure.in |   18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)



commit 97416def2b6f522764dc8a0dbf278419ba451d14
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 23 00:53:34 2005 +0000

    Don't just return DFB_OK to fake fusion_shm_pool_create().
    
    Allocate fake struct, do D_MAGIC stuff, count attach and assert in detach.
    
    
    Fixes the failing assertion in fbdev_shutdown() as the pool pointer was NULL.


 fake.c |   40 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)



commit 6dc3445519b6640562fa49e07602b7722b665fe8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 23 00:48:22 2005 +0000

    Let D_OOSHM() be defined to D_OOM() in non-multi app fusion again.


 shmalloc.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e2128019f581d2879b9400e47674c92cb94a5a58
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 23 00:47:38 2005 +0000

    Fixed double D_OOSHM().


 device.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit be95bcee0c74ee939c27452020db7fd24ebfcbfb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 18 14:01:36 2005 +0000

    Check if already locked and return DFB_LOCKED in Lock().
    
    Automatically unlock when fully released, i.e. in Destruct().


 idirectfbsurface.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit 3070e619d07331f30ad9b9adbf91f6d0c9dee3fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 18 14:00:07 2005 +0000

    Added lots of debug messages.


 surfaces.c |   98 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 94 insertions(+), 4 deletions(-)



commit 5d63e417f0a706b63a1ee7cb06859e9328854408
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 18 12:54:35 2005 +0000

    Added DSDESC_NONE and DSDESC_ALL.


 directfb.h |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit ef2121f762acb71491bf9ba891c5cfa8172de374
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 18 02:03:32 2005 +0000

    Make handlers_lock a recursive mutex again to fix a deadlock during signal
    handling recently introduced. Pressing Ctrl-C works again.


 signals.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 9b1afeb0bbf558b3c123ff9d05a043ef5e94d4e4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 17 05:38:56 2005 +0000

    Applied patch containing a hotfix for the "concurrent-render-resize" problem.
    Thanks to Ryan Burns <rburns@mvista.com>!
    
    This is an intermediate (dirty) solution before the new surface core is finished.


 README              |    1 +
 src/core/surfaces.c |   19 ++++++++++++++++++-
 2 files changed, 19 insertions(+), 1 deletion(-)



commit 85cfc4f00e84be9dd141b218ae82a3d6e033d912
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 17 05:35:42 2005 +0000

    Allow empty flags in IDirectFBDisplayLayer::SetColorAdjustment().
    
    Added DCAF_ALL.


 include/directfb.h                  |    3 ++-
 src/display/idirectfbdisplaylayer.c |    5 ++++-
 2 files changed, 6 insertions(+), 2 deletions(-)



commit b7e5ae27b0a81fbb51370232e6acf2ffefc1535d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Dec 15 14:32:06 2005 +0000

    Replaced size_t by ssize_t.


 stream.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit a60888bdab8aef741387fdc2eb7729969f4ce05b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 14 15:55:43 2005 +0000

    Disable elo by default.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 823f9e457f69ffde4df0e874b5a913bcfff2217e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 13 16:30:03 2005 +0000

    Check mixer/encoder/output indices.


 idirectfbscreen.c |   27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)



commit ab1ba46972ff484cd40457e0075eb6abb72ea5fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 13 16:08:41 2005 +0000

    Show version number.
    
    Use <TITLE> tag much better.


 docs/html/Makefile.am |    2 +-
 tools/gendoc.pl       |   16 +++++++++-------
 2 files changed, 10 insertions(+), 8 deletions(-)



commit 4f369a3c1c7fa73de05b73ce04da53a550796131
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 10 16:56:16 2005 +0000

    Don't build gunze by default. It seems to miss proper detection code.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c54ca76b4857f2314228bfc55f021b29d145d128
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 10 16:00:54 2005 +0000

    Use a separate shared memory pool for surface buffer data.


 src/core/core.c       |   35 +++++++++++++++++--
 src/core/core.h       |    5 ++
 src/core/surfaces.c   |    9 ++---
 src/core/surfaces.h   |    3 +
 systems/fbdev/fbdev.c |   90 +++++++++++++++++++++-----------------------------
 systems/fbdev/fbdev.h |    4 ++
 tools/dfbdump.c       |    3 -
 7 files changed, 87 insertions(+), 62 deletions(-)



commit 50ed492c997131277dddaee19d13d6f0e0a41fc0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 9 19:46:54 2005 +0000

    Delete trailing whitespace.


 generic.c |  289 ++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 144 insertions(+), 145 deletions(-)



commit 350f73e37a19dd7007667a7596a15fa796efc012
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 9 19:04:54 2005 +0000

    Added framework to support all colorkeying combinations.


 generic.c |  165 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 146 insertions(+), 19 deletions(-)



commit 4d1359263ff409819439010012c29be0b22cfcab
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 9 16:15:38 2005 +0000

    Removed duplicate Duff's device definitions.


 Makefile.am    |    1 
 duffs_device.h |   89 ++++++++++++++++++++++
 generic.c      |  224 +++++++++++++++------------------------------------------
 3 files changed, 149 insertions(+), 165 deletions(-)



commit f0b0aab3360605ad01a61888a9b80f1d2279f9f3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 15:43:44 2005 +0000

    This patch adds fusion_reactor_sized_dispatch():
    
    Dispatch a message to any attached reaction with a given size. Instead of
    using the size defined by the reactor, the caller can specify the size of
    the data.


 reactor.c |   18 +++++++++++++++++-
 reactor.h |   12 ++++++++++++
 2 files changed, 29 insertions(+), 1 deletion(-)



commit 231ab3e06e8ddf09c5935275630b0f590defeb67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 15:24:05 2005 +0000

    Another patch, this one brings D_DEBUG_ENTER and D_DEBUG_EXIT to ease debug
    messages for tracing function calls.


 debug.c |   90 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 debug.h |   24 +++++++++++++++++
 2 files changed, 114 insertions(+)



commit 866c04d5bb4a907ac0e1631d1d5c10fbbc9179c2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 15:15:09 2005 +0000

    If the domain being registered contains a slash, but didn't exactly match an entry
    in directfbrc, check to see if the domain is descended from an entry in directfbrc,
    e.g. 'ui/field/messages' matches 'ui' or 'ui/field'.


 debug.c |   24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)



commit a8d04182e628a32420c696f491f68b248a995ae1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 15:00:11 2005 +0000

    Allow trailing comments.


 conf.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit f368d2e423efffdf8bdc2fae6c4c7d69ead13516
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 14:59:31 2005 +0000

    Use more D_OOSHM().


 gfxdrivers/cle266/unichrome.c    |    2 +-
 gfxdrivers/unichrome/unichrome.c |    4 +++-
 lib/fusion/shmalloc.h            |    2 +-
 lib/fusion/vector.c              |    4 ++--
 src/core/clipboard.c             |    4 ++--
 src/core/layer_context.c         |    4 +++-
 src/core/palette.c               |    2 +-
 src/core/screens.c               |    2 +-
 src/core/surfaces.c              |    4 ++--
 src/core/wm.c                    |    8 +++++---
 systems/osx/osx.c                |    2 +-
 systems/osx/primary.c            |    4 ++--
 systems/sdl/primary.c            |    4 ++--
 systems/sdl/sdl.c                |    2 +-
 systems/vnc/primary.c            |    4 ++--
 systems/vnc/vnc.c                |    2 +-
 systems/x11/primary.c            |    4 ++--
 systems/x11/x11.c                |    2 +-
 wm/unique/device.c               |    6 +++---
 wm/unique/input_channel.c        |    2 +-
 wm/unique/input_switch.c         |    4 ++--
 wm/unique/stret.c                |    4 ++--
 22 files changed, 41 insertions(+), 35 deletions(-)



commit b460ee004020e1d02f092c4a71d8b3bec2814cff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 14:57:01 2005 +0000

    Fixed warnings.


 elo.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 77eba9bae5ee19cb222c80be2c74028861ea214a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 14:55:39 2005 +0000

    Added -Wno-strict-aliasing.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e231543297cfea4d58101bbc4a52d557a9002b0e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 14:36:56 2005 +0000

    Don't toggle lock states repeatedly when holding a lock key.


 input.c |   41 +++++++++++++++++++++++++++++------------
 1 file changed, 29 insertions(+), 12 deletions(-)



commit 40c2c5d069aa7ef57d0f464fe113c637ccd92e79
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 9 14:33:01 2005 +0000

    Install internal headers for now.


 Makefile.am |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 541da61289915f76a01d6eeba7b8bcde17ff37ff
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 9 12:59:36 2005 +0000

    Use front_buffer in SetRegion() and back_buffer in FlipRegion().


 matrox_bes.c   |   12 +++++++-----
 matrox_crtc2.c |   14 ++++++++------
 matrox_spic.c  |   12 +++++++-----
 3 files changed, 22 insertions(+), 16 deletions(-)



commit fe4ff9bd077562ce36e92626cbaa87395790ece5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Dec 9 12:40:52 2005 +0000

    G200 BES doesn't support color adjustments.


 matrox_bes.c |   24 ++++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)



commit 354e60d06e53326bc5b3c93dbe7ae127625b2d17
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 8 21:46:30 2005 +0000

    Don't advertise DFXL_STRETCHBLIT when it hasn't been checked.


 mach64.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit db5bc68d97a833872e6d5746b1d172c5bc62e17d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 8 20:36:27 2005 +0000

    Added missing DSPF_ARGB case.


 matrox_bes.c |    1 +
 1 file changed, 1 insertion(+)



commit b8b3b4328cb882a4c95cb252e07a3fc2c855b570
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 8 20:33:04 2005 +0000

    - Fixed color keying mask.
    - G100 doesn't have TEXCTL2 so TEXTRANS must be used to disable color keying.


 matrox.c       |    5 ++---
 matrox_state.c |   39 ++++++++++++++++-----------------------
 2 files changed, 18 insertions(+), 26 deletions(-)



commit 843fcd7be3f1280c170729e167e2b56d74eec3f1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 8 20:13:27 2005 +0000

    Fixed YUY2/UYVY and texture LUT state handling.


 matrox.c       |   25 +++++++++++++------------
 matrox.h       |    2 --
 matrox_state.c |   16 ++++++----------
 3 files changed, 19 insertions(+), 24 deletions(-)



commit b84d51c57bd4619ba91e8d63714d8295264167ca
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 8 19:13:13 2005 +0000

    Fixed rectangle intersect functions.


 util.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit b151b155b7f037384bf9533de525b3932cdaaca4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 7 19:19:55 2005 +0000

    test


 README |    1 -
 1 file changed, 1 deletion(-)



commit 113e1bc1cf038619ccc14f371e97639fe96501fa
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Dec 6 02:32:02 2005 +0000

    Fixes for G100 with SDRAM.


 matrox.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit fac82aaf020f2cddf4960982223e92e11982ce85
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 4 21:06:46 2005 +0000

    Added Gunze Touchscreen driver, thanks to Nathanael D. Noblet <nathanael@gnat.ca>!


 AUTHORS                        |    1 
 README                         |    1 
 configure.in                   |   22 +
 inputdrivers/Makefile.am       |    5 
 inputdrivers/gunze/.cvsignore  |    6 
 inputdrivers/gunze/Makefile.am |   27 +
 inputdrivers/gunze/dfb-calib.c |  435 +++++++++++++++++++++++++++++++
 inputdrivers/gunze/gunze.c     |  569 +++++++++++++++++++++++++++++++++++++++++
 8 files changed, 1062 insertions(+), 4 deletions(-)



commit 0085667e71a981a82656e0b2baf72d318e293cce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 1 18:55:12 2005 +0000

    cvs test


 README |    1 +
 1 file changed, 1 insertion(+)



commit 54a05e7bf30a9644c37b261a785eb86bc51adfd3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 1 18:52:33 2005 +0000

    test2


 README |    1 -
 1 file changed, 1 deletion(-)



commit 0662da8f5de561ff5b0344a95b1eddbfe63f7df0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 1 18:48:21 2005 +0000

    cvs test


 README |    1 +
 1 file changed, 1 insertion(+)



commit a80b270fcadc6532254e4e07c5d45dfa0eb1753e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 12:58:42 2005 +0000

    Fixed a cut-and-paste bug.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 86a3bdfc78094bea23eb533b25c9dc2ae2e4b75d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 11:38:08 2005 +0000

    Limited support for DSBLIT_SRC_PREMULTIPLY.


 matrox.c       |   36 ++++++++++++++++++++++++++++--------
 matrox_state.c |   12 +++++++++---
 2 files changed, 37 insertions(+), 11 deletions(-)



commit c91d670c62da02987df268c5623b57c655a4cf07
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 11:07:33 2005 +0000

    Support for DSDRAW_SRC_PREMULTIPLY.


 matrox.c       |   12 ++--
 matrox_state.c |  170 ++++++++++++++++++++++++++++++---------------------------
 2 files changed, 100 insertions(+), 82 deletions(-)



commit 2ccdb5f94dafcaaa820fabebef550e42d0b1ee42
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 10:52:50 2005 +0000

    Completely untested PPC support.


 matrox.c |   10 ++++++++++
 mmio.h   |   12 ++++++++++++
 2 files changed, 22 insertions(+)



commit 8cc254dd99e2116e9171e542741fc08ee54baf00
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 10:41:37 2005 +0000

    Added support for DSDRAW_SRC_PREMULTIPLY and DSBLIT_SRC_PREMULTCOLOR.


 mach64.c       |   30 ++++++++-------
 mach64.h       |   13 +++---
 mach64_state.c |  108 +++++++++++++++++++++++++++++++++++++++++----------------
 mach64_state.h |    4 ++
 4 files changed, 106 insertions(+), 49 deletions(-)



commit 5b3d80ffe8c9d64551cdfaff54bba4f8e7e006ad
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 10:10:40 2005 +0000

    Use DITHER_EN and SCALE_PIX_EXPAND only when color bits < 24.


 mach64_state.c |   21 ++++++++++++++++-----
 1 file changed, 16 insertions(+), 5 deletions(-)



commit e01fb997733015324b158976df32cbf288ebbc8a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 10:08:40 2005 +0000

    Avoid chip lockups with destination color keying.


 mach64.c |  102 +++++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 73 insertions(+), 29 deletions(-)



commit 24df2355bb907366b3dbd5d443badfc751aeb3ea
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 09:24:18 2005 +0000

    Enabled SCALE_Y2R_TEMP.


 mach64_overlay.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ad6fe6cc01b2bbb8dac1668e8b063d6de5337d7d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 09:22:05 2005 +0000

    OVERLAY_EXCLUSIVE registers aren't supported on rev. A chips.


 mach64_overlay.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit 22efa76598be431fc82963a23b10d80ed87bcb46
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 09:17:47 2005 +0000

    Check the chip type in ovSetColorAdjustment().


 mach64_overlay.c |    3 +++
 1 file changed, 3 insertions(+)



commit 8ce0dae79b5991010300e09b111f4e67b9d03da4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 09:13:51 2005 +0000

    Fixed color keying on 264VT2.


 mach64_overlay.c |   24 +++++++++++++++++++++---
 1 file changed, 21 insertions(+), 3 deletions(-)



commit 4c168edd661a7af01e6a00fb8c73967628b03642
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Dec 1 08:59:46 2005 +0000

    Fixed surface size limits.


 mach64_overlay.c |   26 +++++++-------------------
 1 file changed, 7 insertions(+), 19 deletions(-)



commit 2fb6bceccb5c74f6ad4956f6b9a2059fd617871f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Nov 26 14:32:26 2005 +0000

    Don't overwrite the last char of info->desc.name with EVIOCGNAME.


 linux_input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 782df7dad8eae7f8d95dc106fcca75facab86250
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Nov 26 13:45:58 2005 +0000

    Minor cleanup.


 mach64_state.c |   58 ++++++++++++++++++++++++++++-----------------------------
 1 file changed, 29 insertions(+), 29 deletions(-)



commit 4dc2827318b27c3c4da6dab75c7dc14dc7b04019
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Nov 26 13:42:12 2005 +0000

    Fixed scaler/texture color key for chips < 3D Rage Pro.


 mach64.h       |    3 --
 mach64_state.c |   63 ++++++++++++++++++++++++++++++++++++++++++---------------
 2 files changed, 47 insertions(+), 19 deletions(-)



commit a104f56c4f131d5efefbb14cb6303cfd6d54163f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 24 12:35:38 2005 +0000

    Added DIRECT_SIGNAL_ANY as a replacement for the magic -1.


 signals.c |    2 +-
 signals.h |    5 +++++
 2 files changed, 6 insertions(+), 1 deletion(-)



commit 3223f341a7c0b81d6218a469f28c1fe54fee1907
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 23 17:18:53 2005 +0000

    test of new server


 README |    1 -
 1 file changed, 1 deletion(-)



commit 939a5c784979d266f9f1324e73f7c59d760cebf0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 23 14:18:58 2005 +0000

    Removed dependency on -D_GNU_SOURCE when including <direct/util.h>:
    
    Made direct_util_recursive_pthread_mutex_init() non-static-inline.
    
    Removed DIRECT_UTIL_RECURSIVE_PTHREAD_MUTEX_INITIALIZER and replaced all
    of its occurences by PTHREAD_MUTEX_INITIALIZER. These didn't need to be
    recursive. If there's a recursive mutex required, you can still use the
    utility function direct_util_recursive_pthread_mutex_init().
    
    Removed -D_GNU_SOURCE from direct.pc and directfb-config.


 directfb-config.in                           |    2 +-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |    2 +-
 lib/direct/debug.c                           |    2 +-
 lib/direct/direct.c                          |    2 +-
 lib/direct/direct.pc.in                      |    2 +-
 lib/direct/interface.c                       |    4 ++--
 lib/direct/mem.c                             |    2 +-
 lib/direct/modules.h                         |   14 +++++++-------
 lib/direct/signals.c                         |    2 +-
 lib/direct/thread.c                          |    4 ++--
 lib/direct/trace.c                           |    4 ++--
 lib/direct/util.c                            |   24 ++++++++++++++++++++++++
 lib/direct/util.h                            |   25 +------------------------
 lib/fusion/fusion.c                          |    2 +-
 src/core/core.c                              |    2 +-
 src/gfx/util.c                               |    6 +++---
 wm/unique/device.c                           |    2 +-
 wm/unique/stret.c                            |    2 +-
 18 files changed, 52 insertions(+), 51 deletions(-)



commit fb2086a780330031274279555e7511b0a26e83f4
Author: Mark Adams <marka@directfb.org>
Date:   Tue Nov 15 16:00:47 2005 +0000

    Silence warning.


 uc_ovl_hwset.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5d615d198e095608edbb0f55cbb7c0fc6babce88
Author: Mark Adams <marka@directfb.org>
Date:   Tue Nov 15 15:51:15 2005 +0000

    Overhaul of LEVELS, OPACITY and primary ALPHACHANNEL features which were
    previously only partially implemented and did not work together.
    
    The video overlay and the primary layer now both support the OPACITY option
    and either can be on top.  The order is determined by the 'level' assigned
    to the video layer.  The primary also supports an alpha channel which is
    useful when the video layer is positioned behind.
    
    The old DFB_CLE266_UNDERLAY environment variable switch has been removed.


 Readme.txt     |   13 +++++++------
 uc_overlay.c   |   21 +++++++++++++++++++--
 uc_overlay.h   |    5 ++++-
 uc_ovl_hwset.c |    9 +++++++++
 uc_primary.c   |   30 ++++++++++++++++--------------
 unichrome.c    |    7 +++----
 unichrome.h    |    4 ++++
 7 files changed, 62 insertions(+), 27 deletions(-)



commit a4377c63d838ae49e81653600bf6e9d5639ecd91
Author: Mark Adams <marka@directfb.org>
Date:   Thu Nov 10 10:26:15 2005 +0000

    New acceleration:
    - ARGB4444 as source and destination pixel format for all supported
    operations.


 uc_hw.h    |    2 ++
 uc_hwset.c |    8 ++++++++
 uc_state.c |    2 ++
 3 files changed, 12 insertions(+)



commit f1ac90cc099d900d33645be4c185bde492b3eb11
Author: Mark Adams <marka@directfb.org>
Date:   Tue Nov 8 19:31:21 2005 +0000

    Added missing fifo space checks and corrected an excessive allocation.


 uc_accel.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit f5ddab4126ee2d8bbfc056c6dc855aa927dfb92a
Author: Mark Adams <marka@directfb.org>
Date:   Tue Nov 8 19:29:11 2005 +0000

    Fix 'unexpected pixel format' errors.


 uc_hw.h        |    7 +++++++
 uc_ovl_hwmap.c |    4 ++++
 2 files changed, 11 insertions(+)



commit dff7a5cbf96393921c6a18aed6337e6e72fbbe2b
Author: Mark Adams <marka@directfb.org>
Date:   Fri Nov 4 17:11:38 2005 +0000

    Documentation updated to reflect the features and limitations of the
    current code.


 Readme.txt |   43 ++++++++++++++++++++++++++++++++-----------
 1 file changed, 32 insertions(+), 11 deletions(-)



commit f41c1d5e9953fefaa0367c069a25608ed7b9989f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 16:16:45 2005 +0000

    - Fixed Mystique vs. Mystique 220 detection.
    - Made device_info->name a bit more verbose.


 matrox.c |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)



commit ee2bc368905168d1141523553867199e126997af
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 16:13:13 2005 +0000

    Remove unused variable.


 matrox_spic.c |    1 -
 1 file changed, 1 deletion(-)



commit 9150ceaa6a75b17486b736c13a4256c3fe158be0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 16:08:09 2005 +0000

    - Don't touch hardware in SetRegion() if nothing changed.
    - Separated spic_calc_buffer() out of spic_set_buffer().


 matrox_spic.c |   94 +++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 55 insertions(+), 39 deletions(-)



commit 0d9335f3cfabba7c5c7d542ad974e8b4441973c3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 15:26:28 2005 +0000

    Setting VIDRST bits is pointless as the hardware ignores them.


 matrox_crtc2.c |    2 --
 1 file changed, 2 deletions(-)



commit a05184933fbd88a6c301f63fb879fe8fa0e71baf
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 15:11:14 2005 +0000

    Forgot to include misc/util.h for dfb_region_intersect().


 matrox_bes.c |    1 +
 1 file changed, 1 insertion(+)



commit bca23d880c5e4f13af6d167af82cab66e3bedf4c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 15:08:46 2005 +0000

    - Disable BES if the destination region is completely off-screen.
    - Renamed current_mode to mode because it's shorter :)


 matrox_bes.c |   59 +++++++++++++++++++++++++++++------------------------------
 1 file changed, 29 insertions(+), 30 deletions(-)



commit 07222c75c9b465ec04cdb1d6daa13ba934fab806
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Nov 1 11:56:24 2005 +0000

    - Allow surface height up to 2048 with DLOP_DEINTERLACING.
    - Limit surface width with DLOP_DEINTERLACING to guarantee BESPITCH < 4096.
    - Disable vertical filtering when surface width > 1024.


 matrox_bes.c |   20 +++++++++++++++-----
 1 file changed, 15 insertions(+), 5 deletions(-)



commit d5b53c231dee836fc200e5169fb48238df337125
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Oct 31 11:41:23 2005 +0000

    Added SendEvent().


 idirectfbvideoprovider_v4l.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit ff618c647fb60c799e6890e216fca27f41678304
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Oct 30 18:17:32 2005 +0000

    Added IDirectFBVideoProvider::SendEvent() to send a window or input event
    to video providers that supports interactivity (DVCAPS_INTERACTIVE).
    
    For cursor events, coordinates must be in the destination rectangle space.


 directfb.h |   27 +++++++++++++++++++--------
 1 file changed, 19 insertions(+), 8 deletions(-)



commit 127b8c524353fe3197ff1a49deab248067a8739d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 02:20:54 2005 +0000

    Show "1k" again for '0 < bytes < 1024'.


 dfbdump.c |   18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)



commit cec48179f09d30197ddc61a09d48b9a9c775d771
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 02:12:06 2005 +0000

    Fixed warnings.


 gfxdrivers/i810/i810.c              |    6 ++++++
 gfxdrivers/unichrome/uc_overlay.h   |    2 +-
 gfxdrivers/unichrome/uc_ovl_hwmap.c |    2 +-
 inputdrivers/mutouch/mutouch.c      |    8 ++++----
 4 files changed, 12 insertions(+), 6 deletions(-)



commit 6e510a6e2e7f2f8579c72664a10e907c5c1a8990
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 02:03:11 2005 +0000

    Fixed warnings.


 gfxcard.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 23c57785394db1b1f4be09e92efe66e2486ac175
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 01:57:17 2005 +0000

    Fixed warning: dereferencing type-punned pointer will break strict-aliasing rules


 manager.c |   15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)



commit 114d8e1c738215497e7c66b3c2b2921a1217bd74
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 01:47:18 2005 +0000

    Avoid tons of warnings by using D_MAGIC_SET_ONLY instead of D_MAGIC_SET.


 message.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 321594863aa186845180a836149dcea9d01172c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 01:46:40 2005 +0000

    Added D_MAGIC_SET_ONLY which is D_MAGIC_SET without assuming that the magic
    hasn't been set already. Useful to avoid compiler warnings when acting on
    uninitialized structures on the stack.


 debug.h |    6 ++++++
 1 file changed, 6 insertions(+)



commit 8b4d2210a9b6b5e4ea2937a83e08ca3fbabbb9b8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 29 00:40:56 2005 +0000

    0.9.25
    
    
    Using the new Fusion Kernel API 2.0
    - Parallel Fusion Worlds in one process via extended API
    - Multiple Shared Memory Pools in one world via new API
    - No race condition between (potential master) processes starting in parallel
    
    Fusion APIs have been extended to support different worlds and pools.
    
    Pass CoreDFB to graphics drivers as a new argument to driver_init_driver().


 b/configure.in                          |    4 
 b/gfxdrivers/ati128/ati128.c            |    3 
 b/gfxdrivers/cle266/uc_fifo.c           |   14 
 b/gfxdrivers/cle266/uc_fifo.h           |    4 
 b/gfxdrivers/cle266/unichrome.c         |    7 
 b/gfxdrivers/cle266/unichrome.h         |    1 
 b/gfxdrivers/cyber5k/cyber5k.c          |    3 
 b/gfxdrivers/i810/i810.c                |    3 
 b/gfxdrivers/i830/i830.c                |    3 
 b/gfxdrivers/mach64/mach64.c            |    3 
 b/gfxdrivers/matrox/matrox.c            |    3 
 b/gfxdrivers/neomagic/neomagic.c        |    3 
 b/gfxdrivers/nsc/nsc.c                  |    5 
 b/gfxdrivers/nvidia/nvidia.c            |    3 
 b/gfxdrivers/r200/r200.c                |    5 
 b/gfxdrivers/radeon/radeon.c            |    3 
 b/gfxdrivers/savage/savage.c            |    3 
 b/gfxdrivers/sis315/sis315.c            |    5 
 b/gfxdrivers/tdfx/tdfx.c                |    3 
 b/gfxdrivers/unichrome/uc_fifo.c        |   14 
 b/gfxdrivers/unichrome/uc_fifo.h        |    4 
 b/gfxdrivers/unichrome/unichrome.c      |    9 
 b/gfxdrivers/unichrome/unichrome.h      |    1 
 b/lib/fusion/Makefile.am                |   12 
 b/lib/fusion/arena.c                    |  162 +++--
 b/lib/fusion/arena.h                    |    3 
 b/lib/fusion/call.c                     |   87 +--
 b/lib/fusion/call.h                     |    7 
 b/lib/fusion/fusion.c                   |  884 +++++++++++++++++++++++---------
 b/lib/fusion/fusion.h                   |   47 +
 b/lib/fusion/fusion_internal.h          |   75 ++
 b/lib/fusion/lock.c                     |   52 -
 b/lib/fusion/lock.h                     |   24 
 b/lib/fusion/object.c                   |   84 ++-
 b/lib/fusion/object.h                   |   23 
 b/lib/fusion/property.c                 |   72 +-
 b/lib/fusion/property.h                 |   18 
 b/lib/fusion/reactor.c                  |  168 +++---
 b/lib/fusion/reactor.h                  |    3 
 b/lib/fusion/ref.c                      |  152 ++---
 b/lib/fusion/ref.h                      |   28 -
 b/lib/fusion/shm/.cvsignore             |    6 
 b/lib/fusion/shm/Makefile.am            |   29 +
 b/lib/fusion/shm/fake.c                 |  110 +++
 b/lib/fusion/shm/heap.c                 |  812 +++++++++++++++++++++++++++++
 b/lib/fusion/shm/pool.c                 |  816 +++++++++++++++++++++++++++++
 b/lib/fusion/shm/pool.h                 |   67 ++
 b/lib/fusion/shm/shm.c                  |  251 +++++++++
 b/lib/fusion/shm/shm.h                  |   39 +
 b/lib/fusion/shm/shm_internal.h         |  266 +++++++++
 b/lib/fusion/shmalloc.c                 |  566 ++++++++++++++++++++
 b/lib/fusion/shmalloc.h                 |   62 +-
 b/lib/fusion/types.h                    |   35 +
 b/lib/fusion/vector.c                   |   13 
 b/lib/fusion/vector.h                   |   31 -
 b/src/core/clipboard.c                  |   33 -
 b/src/core/colorhash.c                  |    9 
 b/src/core/core.c                       |  385 +++++++++----
 b/src/core/core.h                       |   10 
 b/src/core/core_parts.c                 |   39 -
 b/src/core/fonts.c                      |    2 
 b/src/core/gfxcard.c                    |   78 +-
 b/src/core/gfxcard.h                    |    3 
 b/src/core/graphics_driver.h            |    3 
 b/src/core/input.c                      |   37 -
 b/src/core/layer_context.c              |   10 
 b/src/core/layer_context.h              |    2 
 b/src/core/layer_region.c               |   16 
 b/src/core/layer_region.h               |    2 
 b/src/core/layers.c                     |   26 
 b/src/core/layers_internal.h            |    4 
 b/src/core/palette.c                    |   10 
 b/src/core/palette.h                    |    4 
 b/src/core/screens.c                    |   43 -
 b/src/core/state.c                      |    5 
 b/src/core/state.h                      |    5 
 b/src/core/surfacemanager.c             |   56 +-
 b/src/core/surfacemanager.h             |    3 
 b/src/core/surfaces.c                   |   33 -
 b/src/core/surfaces.h                   |    4 
 b/src/core/windows.c                    |    4 
 b/src/core/windows.h                    |    2 
 b/src/core/windows_internal.h           |   16 
 b/src/core/windowstack.c                |   12 
 b/src/core/wm.c                         |   29 -
 b/src/display/idirectfbsurface.c        |    2 
 b/src/gfx/util.c                        |    6 
 b/systems/fbdev/fbdev.c                 |  280 +++++-----
 b/systems/fbdev/fbdev.h                 |    2 
 b/systems/osx/osx.c                     |    4 
 b/systems/sdl/primary.c                 |   19 
 b/systems/sdl/sdl.c                     |   10 
 b/systems/vnc/primary.c                 |   13 
 b/systems/vnc/vnc.c                     |    8 
 b/systems/x11/primary.c                 |   13 
 b/systems/x11/x11.c                     |    8 
 b/tools/dfbdump.c                       |   66 +-
 b/tools/fusion_bench.c                  |   57 +-
 b/wm/default/default.c                  |   30 -
 b/wm/unique/context.c                   |   21 
 b/wm/unique/context.h                   |    5 
 b/wm/unique/decoration.c                |    4 
 b/wm/unique/decoration.h                |    2 
 b/wm/unique/device.c                    |   35 -
 b/wm/unique/device.h                    |    3 
 b/wm/unique/input_channel.c             |   19 
 b/wm/unique/input_channel.h             |    3 
 b/wm/unique/input_switch.c              |   72 +-
 b/wm/unique/internal.h                  |   10 
 b/wm/unique/stret.c                     |   10 
 b/wm/unique/stret.h                     |    1 
 b/wm/unique/stret_test.c                |   44 -
 b/wm/unique/unique.c                    |   15 
 b/wm/unique/uniquewm.c                  |   28 -
 b/wm/unique/uwmdump.c                   |    4 
 b/wm/unique/window.c                    |   22 
 b/wm/unique/window.h                    |    5 
 lib/fusion/fusion_shmalloc.c            |  496 -----------------
 lib/fusion/shmalloc/.cvsignore          |    6 
 lib/fusion/shmalloc/Makefile.am         |   22 
 lib/fusion/shmalloc/shcalloc.c          |   67 --
 lib/fusion/shmalloc/shfree.c            |  217 -------
 lib/fusion/shmalloc/shmalloc.c          |  712 -------------------------
 lib/fusion/shmalloc/shmalloc_internal.h |  217 -------
 lib/fusion/shmalloc/shrealloc.c         |  162 -----
 125 files changed, 5396 insertions(+), 3319 deletions(-)



commit 562028d388d8e9f26cb2e5f4850e389ab74af5c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 28 21:09:21 2005 +0000

    Avoid division by zero if no video memory is available.


 dfbsummon.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9ab7016f71d61059f190afccd579414a45c07fdf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 28 21:06:46 2005 +0000

    Added D_OOM() message if thread structure can't be allocated.


 thread.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit e2c4691f4bb46223ae2ba42a90eed56de50320d1
Author: Mark Adams <marka@directfb.org>
Date:   Thu Oct 27 15:56:28 2005 +0000

    Added support for DLOP_FIELD_PARITY.  For this to work, the kernel
    framebuffer must support an extension of the WAITFORVSYNC ioctl that
    allows waiting for the top or bottom field.


 Makefile.am  |    3 ++-
 uc_overlay.c |   31 +++++++++++++++++++++++++------
 uc_overlay.h |    8 ++++++--
 3 files changed, 33 insertions(+), 9 deletions(-)



commit faaa1555d999ee67338a5945d8b16aefef0f6c3d
Author: Mark Adams <marka@directfb.org>
Date:   Thu Oct 27 10:38:17 2005 +0000

    New accelerations:
    - YV12, I420, YUY2 and AiRGB simple blits
    - AiRGB 2D drawing


 uc_accel.c  |   74 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 uc_hwset.c  |   13 ++++++++++
 uc_state.c  |   49 +++++++++++++++++++++++++++++++++------
 unichrome.h |    2 +
 4 files changed, 129 insertions(+), 9 deletions(-)



commit 3e6f19d3b6cd1d9b7f3b0880d0b8adf316ad6f03
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 10:43:36 2005 +0000

    Disable broken SetColorAdjustment implementation (already partly disabled).
    Remove color keying diagnostic.


 uc_overlay.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 5aa72ae237fea0b35e3a47806c007ae961eb3064
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 10:37:45 2005 +0000

    Round to nearest when positioning up-scaled YV12/I420 video to reduce
    error.


 uc_ovl_hwmap.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 1c48072fcf7c9c2009863d893f00041b32f25b38
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 10:34:55 2005 +0000

    Fix YV12/I420 video layer corruption on revision 0x11 hardware.


 uc_ovl_hwmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b8d2cfd4d1190de40980e7a167fb139639d977eb
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 09:37:28 2005 +0000

    Fix bug setting SUBP_CONTROL_STRIDE register in uc_spic_set_buffer.  Sadly
    subpicture layer still doesn't work.


 uc_spic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6b95bde969c8ceb3389a1bf35fabf8aa6dd2d39c
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 09:34:45 2005 +0000

    Fix hardware revision number detection and allow override via new config
    option unichrome-revision=<rev>.  The revision number can only be
    auto-detected if the process runs as root.
    
    Added simple script to determine revision number for addition to
    directfbrc.


 find_revision.sh |   26 ++++++++++++++++++++++++++
 unichrome.c      |   17 ++++++++++++++---
 2 files changed, 40 insertions(+), 3 deletions(-)



commit c0c00a4b6f797dc976da1e23344f2d6831dc0f94
Author: Mark Adams <marka@directfb.org>
Date:   Wed Oct 26 09:26:44 2005 +0000

    Added config option unichrome-revision=<rev> to manually set the hardware
    revision number for the unichrome driver.  This cannot be determined
    automatically unless the process runs as root.


 docs/directfbrc.5.in |    4 ++++
 src/misc/conf.c      |   18 ++++++++++++++++++
 src/misc/conf.h      |    3 +++
 3 files changed, 25 insertions(+)



commit 2bdf900f76a13d528b9a838473587559b4f3a56a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 07:33:08 2005 +0000

    Silence compiler warning.


 matrox.c |    1 -
 1 file changed, 1 deletion(-)



commit a93779d8d48a4e0f018dc836bb5e0177678cadc2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 07:26:16 2005 +0000

    - Finally remove DLOP_FLICKER_FILTERING.
    - Don't reinitialize the whole TV encoder when changing field parity.
    - Misc. cleanups.


 matrox_crtc2.c        |   43 +++++++++++++++++++++++--------------------
 matrox_screen_crtc2.c |    2 +-
 2 files changed, 24 insertions(+), 21 deletions(-)



commit 4c0e111298a16efc15daefd3eb2134dec7d3c308
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 07:23:16 2005 +0000

    Allow DSPF_ARGB surface + misc. cleanups.


 matrox_bes.c |   57 ++++++++++++++++++++++++++++++---------------------------
 1 file changed, 30 insertions(+), 27 deletions(-)



commit 53c13af3a58670b652798431656600a5ac34bec4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 06:33:46 2005 +0000

    PCI device ID cleanup.


 matrox.c |   36 ++++++++++++++++++------------------
 matrox.h |   15 ++++++++-------
 2 files changed, 26 insertions(+), 25 deletions(-)



commit 58e392a7a1caff7f60e658ad12bba894fb63e8e3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 06:13:51 2005 +0000

    Prefer /dev/shm over other tmpfs mount points with the same size.


 shmalloc.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit b74f892dbd0fe5ece7af3b35eb793772e3b1293e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 06:09:39 2005 +0000

    In dfb_surfacemanager_allocate() do dfb_gfxcard_sync() only if hardware has
    read from the buffer about to be kicked out. The call to
    dfb_surfacemanager_assure_system() should already take care of the hardware
    write case.
    
    Change dfb_surfacemanager_assure_system() to call dfb_gfxcard_wait_serial()
    instead of dfb_gfxcard_sync() since we're only interested whether the
    hardware has written to the buffer.


 surfacemanager.c |   16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)



commit b1b36f59a95bd1fc321bf099bc8e3b9501f1f13f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 26 05:38:38 2005 +0000

    Added FlushReadCache() to the graphics driver API.
    
    Used in the matrox driver to flush the direct access read cache.


 gfxdrivers/matrox/matrox.c |   10 ++++++++++
 gfxdrivers/matrox/regs.h   |    2 ++
 src/core/gfxcard.c         |    8 ++++++++
 src/core/gfxcard.h         |    9 ++++++++-
 src/core/surfacemanager.c  |    1 +
 src/core/surfaces.c        |    2 ++
 6 files changed, 31 insertions(+), 1 deletion(-)



commit 6cc6de1ded1ccec798424d205947b2eefba2d151
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 25 14:45:30 2005 +0000

    Include "libobject.make" for static builds in distribution.


 Makefile.am       |    3 ++-
 configure.in      |    2 ++
 rules/.cvsignore  |    2 ++
 rules/Makefile.am |    1 +
 4 files changed, 7 insertions(+), 1 deletion(-)



commit e24732ab81e9244437c2159f2bd47572e4cef81d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:20:42 2005 +0000

    updated


 ChangeLog |  117 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   14 +++++++
 2 files changed, 131 insertions(+)



commit 23fcd1ec07ffbb070855899fca9963674a5ef9a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:11:53 2005 +0000

    0.9.24


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c356add186f08cd9254417d42b453d3b4c8dc5bd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:11:42 2005 +0000

    Fixed warnings.


 idirectfbimageprovider_gif.c  |    2 +-
 idirectfbimageprovider_jpeg.c |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 86d310934852aad912f3333418c847446c5d04f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:11:29 2005 +0000

    one more missing header added


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ea39d94aa9635422ecc260dc56ac2068bb7ee8c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:06:30 2005 +0000

    Fixed a warning.


 surfaces.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f9bda56c9a1a63a44d8eaad1de046e3465d1f833
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 17:01:08 2005 +0000

    Removed all checks for FB_ACCEL_* as fallbacks are in core/accelerators.h now.
    
    Don't build cle266 by default as it's obsolete because of the unichrome driver.


 configure.in |  195 +++++++----------------------------------------------------
 1 file changed, 24 insertions(+), 171 deletions(-)



commit b29482db505d6865c2e968f71e4165e0d483a725
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:58:19 2005 +0000

    Added missing includes of <core/accelerators.h>.


 matrox_3d.c  |    1 +
 matrox_bes.c |    1 +
 2 files changed, 2 insertions(+)



commit 050ef126dc428aac716ac37306034c2e591d39b3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:47:31 2005 +0000

    No need for linux/wm97xx.h anymore.


 configure.in                       |    3 +--
 inputdrivers/wm97xx_ts/wm97xx_ts.c |    2 --
 2 files changed, 1 insertion(+), 4 deletions(-)



commit 2c115a96033a43f3450c216c665c7b031b23a3f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:42:46 2005 +0000

    Don't use fusion_reactor_free() too early in case of an error in init_devices().
    
    Thanks to "Jakub Bogusz <qboosh@pld-linux.org>" for this and other patches.


 README           |    2 ++
 src/core/input.c |    1 -
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 7afd787e8762a18e6a2fe6c6942237896512b194
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:40:46 2005 +0000

    Added missing headers to SOURCES.


 dispatcher/Makefile.am |   22 +++++++++++-----------
 requestor/Makefile.am  |   12 ++++++------
 2 files changed, 17 insertions(+), 17 deletions(-)



commit f8c70edfcdbda3275c041d08d73a0fba5bf2d973
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:40:31 2005 +0000

    Added missing types.h to SOURCES.


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 2ea2b5c32c37b046146e29710051536f41e2e15d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 24 16:40:14 2005 +0000

    Added sisfb.h to SOURCES. Removed check for sisfb.h.


 configure.in                  |    9 ++++++++-
 gfxdrivers/sis315/Makefile.am |    3 ++-
 2 files changed, 10 insertions(+), 2 deletions(-)



commit d64523c0733df61bfeb0568477dfd366ec465984
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Oct 24 13:46:13 2005 +0000

    IDirectFBVideoProvider::GetPos() returns DFB_EOF to notify end-of-playback.
    After stream has reached the end, the next call to PlayTo() restarts playback from the beginning.


 directfb.h |    2 ++
 1 file changed, 2 insertions(+)



commit 409199cfa6eb957d5367b4ece165a9e1d940820f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 23:38:50 2005 +0000

    no more patches


 /dev/null               |binary
 b/patches/Makefile.am   |    2 --
 b/patches/README.fusion |   32 +-------------------------------
 3 files changed, 1 insertion(+), 33 deletions(-)



commit d47823532f67be7a8ede71c45ceff60105751ecf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 22:54:48 2005 +0000

    Seems that sisfb.h is still required.


 configure.in |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit acbc6c626c79779ebfc0631ac7efa7228dcba126
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 18:01:07 2005 +0000

    New changelog and summary for 0.9.23 :)


 ChangeLog | 2572 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |  206 ++++
 2 files changed, 2778 insertions(+)



commit 4efa1d4d6c4f14c84fb0559f5360a5c39a09bfb1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Oct 18 14:37:39 2005 +0000

    Plug a leak and add a comment about freetype bugs.


 idirectfbfont_ft2.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit b0ee0b88ece091c7264ccb7c77f100d6c97bcadd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 10:57:32 2005 +0000

    Oops, somehow I managed to apply another patch with something already added :)


 fbdev.c |   14 --------------
 1 file changed, 14 deletions(-)



commit 241e7cafec1ba50600b5a63e7b2161c35ef82974
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 10:04:52 2005 +0000

    Added support for DSPF_ARGB4444.


 fbdev.c |   14 ++++++++++++++
 1 file changed, 14 insertions(+)



commit 25e6a28ef699fbda53b1a5ea77cc3a0848f4c39b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 10:04:21 2005 +0000

    If during window creation the pixel format for windows with an alpha channel is
    unspecified, don't always take DSPF_ARGB, but the layer's format if it has alpha.


 windows.c |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit c7e0c35446f43ed0e1168649bee6e81ed2e2ca06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 10:02:20 2005 +0000

    During flip using blitting, wait for pending writes to the back buffer
    before issuing the blit command from back to front buffer to avoid lags
    caused by too much queued commands.


 layer_region.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 8c2c8492949a6c40466fbfafb5ec90faba13b65f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 10:00:27 2005 +0000

    For PNGs with alpha don't always suggest DSPF_ARGB, but the primary layer
    format if it has alpha.


 idirectfbimageprovider_png.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit bb4148c9341306abb40e85e56f54bf63524c685b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 09:59:30 2005 +0000

    Don't abort if checking for LEDs fails.


 linux_input.c |   15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)



commit 134706f3b347f420d618a6a73446d2f05987d3a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 18 09:56:45 2005 +0000

    Simplified regex a bit.


 mknames.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e95a6dc94119fcc4cc1efb1e82d3e6c29a99448e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Oct 17 18:00:06 2005 +0000

    Fixed segmentation fault when loading OpenType fonts.


 idirectfbfont_ft2.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit da18a5a083d72ce667707cccca33c43e368b93e4
Author: Mike Emmel <memmel@directfb.org>
Date:   Sun Oct 16 05:12:41 2005 +0000

    Removed the depth hard code to 24 and open the display in primary.c
    to get its real depth.  Note this needs to be done a cleaner way since
    we open close the display then reopen but its right.


 primary.c |   25 +++++++++++++++++++++----
 xwindow.c |   11 +++--------
 xwindow.h |    1 -
 3 files changed, 24 insertions(+), 13 deletions(-)



commit 88c65e1f8bec846962a70e50e4520526752a702c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Oct 15 08:26:06 2005 +0000

    Ignore a return value of DFB_EOF from IDirectFBDataBuffer::PeekData().


 idirectfbvideoprovider.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b168dacec35907a42d732c7fd8aded89cc356f3a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Oct 12 08:46:49 2005 +0000

    Reduce probing context header to 64 bytes.


 idirectfbvideoprovider.c |    4 ++--
 idirectfbvideoprovider.h |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 096ffa1348773d66ab6b28084810a709d45c5516
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 28 20:24:47 2005 +0000

    Added Probe and Construct function pointer typedefs for casting to make g++ happy.


 interface.h                |    7 +++++--
 interface_implementation.h |    4 ++--
 2 files changed, 7 insertions(+), 4 deletions(-)



commit d99b70fe738a76be1ef2c2877d697b185d46fe52
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 28 19:00:42 2005 +0000

    Thanks to Damian Kowalewski <damian.kowalewski@mail.mcgill.ca> for fixing
    artifacts produced by clipped triangles.


 README             |    1 +
 src/core/gfxcard.c |   23 ++++++++++++-----------
 2 files changed, 13 insertions(+), 11 deletions(-)



commit 4c9f55bdeb484c5cec188a7ff5406c01d2fa71a6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 26 14:04:51 2005 +0000

    Support streamed data buffers.


 idirectfbimageprovider_gif.c |  120 +++++++++++++++++++++----------------------
 1 file changed, 60 insertions(+), 60 deletions(-)



commit 5aabb8c117129096ace4c06af537ef987c593b4a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 26 10:40:11 2005 +0000

    Follow IDirectFBDataBuffer changes.


 idirectfbimageprovider_png.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 01491e0f5126c49ae6447f855ea56a67c9c0cdf9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 26 10:39:15 2005 +0000

    Added IDirectFBDataBuffer::Finish(): used to notify a streaming databuffer that
    the end-of-file has been reached.
    
    After the method has been called, PutData() fails with DFB_UNSUPPORTED
    while GetData() returns DFB_EOF unless there is still data to be fetched.


 include/directfb.h                       |   12 ++++++++-
 src/media/idirectfbdatabuffer.c          |    7 +++++
 src/media/idirectfbdatabuffer_file.c     |   35 ++++++++------------------
 src/media/idirectfbdatabuffer_memory.c   |   17 +++++++++---
 src/media/idirectfbdatabuffer_streamed.c |   41 ++++++++++++++++++++++++++-----
 5 files changed, 76 insertions(+), 36 deletions(-)



commit 391e596c93564cf9e9bdd9d9a597623962a77fdc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 26 10:27:54 2005 +0000

    direct_stream_peek() and direct_stream_read() return DFB_BUFFEREMPTY if there is
    no data available.


 stream.c |   34 +++++++++++++++++++---------------
 1 file changed, 19 insertions(+), 15 deletions(-)



commit 28c7cd7a6f055a0eab248301292c66c1c47eb51c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 25 20:00:39 2005 +0000

    Applied patch from "Stefan Lucke <stefan@lucke.in-berlin.de>" for better
    touchscreen/smartpad detection.


 linux_input.c |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit 2088c11908d06f6aa5c2682fed700ca78621d57a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 24 15:53:31 2005 +0000

    In pipe_read(): decrement 'length' when reading from the cache.


 stream.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit e32905316fce51d6ad37c39f7676ed852334202f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 24 08:54:43 2005 +0000

    Lock the mutex before seeking.


 idirectfbdatabuffer_file.c |   11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)



commit d710d0c92f6e9a04ac84b0058fa65eb5699389d5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 24 08:53:33 2005 +0000

    API change: direct_stream_seek() takes an absolute offset as argument instead of a relative one.


 stream.c |   36 ++++++++++++++++--------------------
 stream.h |    4 ++--
 2 files changed, 18 insertions(+), 22 deletions(-)



commit 6fd8dd70d1cf10d1ead2261278d976cf07a6f4fe
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 24 08:30:59 2005 +0000

    Return DFB_INVARG from direct_stream_seek() if absolute offset is negative.


 stream.c |    3 +++
 1 file changed, 3 insertions(+)



commit 46b1feb847f4772643194ffad07396112da41b60
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 23 13:44:00 2005 +0000

    Use nanosleep() instead of usleep().


 idirectfbdatabuffer_file.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit d0fdd0b973f1969225d886da9a4857c28964e50a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 23 13:42:53 2005 +0000

    Actually do no fail if IDirectFBDataBuffer::PeekData() returns DFB_BUFFEREMPTY,
    opened file could be a device (e.g. /dev/video).


 idirectfbvideoprovider.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 803a6227862c3217b76937318a10a5c1f3e52dbb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 23 09:47:54 2005 +0000

    Follow changes.


 idirectfbvideoprovider_v4l.c |   25 ++++++++++++++++---------
 1 file changed, 16 insertions(+), 9 deletions(-)



commit e8d7705fd6c2e06c182cfa8fe072fba556bd8197
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 23 09:46:55 2005 +0000

    Create Video Providers from DataBuffers.
    
    Added IDirectFBDataBuffer::CreateVideoProvider().


 include/directfb.h                 |    8 +++
 src/idirectfb.c                    |   28 ++++-------
 src/media/Makefile.am              |    3 -
 src/media/idirectfbdatabuffer.c    |   17 ++++++
 src/media/idirectfbvideoprovider.c |   90 +++++++++++++++++++++++++++++++++++++
 src/media/idirectfbvideoprovider.h |   21 ++++++--
 6 files changed, 145 insertions(+), 22 deletions(-)



commit cac69da8b6257148ea5b8601a7fdc7bf6856d060
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 22 16:37:24 2005 +0000

    Added priority to video mode definition.
    
    Search for mode with highest priority.


 src/core/system.h     |    2 ++
 systems/fbdev/fbdev.c |   10 +++++++---
 2 files changed, 9 insertions(+), 3 deletions(-)



commit a2f07cf35b0463f1795072a219a949c5d42e0c88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 22 15:11:30 2005 +0000

    Added CoreSystemCapabilities with one capability until now: CSCAPS_ACCELERATION.
    Probe for graphics drivers if this capability is set. Removed implicit version of
    this check (the check for the accelerator).


 src/core/gfxcard.c    |   14 ++++++--------
 src/core/system.c     |    6 ++++++
 src/core/system.h     |   38 +++++++++++++++++++++++++-------------
 systems/fbdev/fbdev.c |    1 +
 4 files changed, 38 insertions(+), 21 deletions(-)



commit 23d1c3d515cfd36677a9fea1a98544b217e2e691
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 22 14:44:29 2005 +0000

    Support fractional font sizes in API and FreeType2 Font Loader.


 include/directfb.h                           |   10 +++++++++-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   20 ++++++++++++++++----
 2 files changed, 25 insertions(+), 5 deletions(-)



commit ef3c4c8a1a61731be81df3f9ed571389a2633c03
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 22 13:44:32 2005 +0000

    Reverted change of bool until I found out why it breaks the R200 driver
    and possibly others (no hw blitting anymore).


 types.h |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit 45caa29ae93df5b75f0319526a50da3dc329f211
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 22 12:59:35 2005 +0000

    Fix wrong size of bool.


 types.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit fb784c0af2c563b7b57db6e914bcd551768ca3b1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Sep 22 09:22:01 2005 +0000

    fbdev->shared->current_mode is now static and gets updated according to current var
    when the video mode changes.
    This way dfb_system_current_mode() always return the effective video mode.


 fbdev.c |   87 +++++++++++++++++++++++++++++-----------------------------------
 fbdev.h |    2 -
 2 files changed, 41 insertions(+), 48 deletions(-)



commit a75f8d4fbf32a37e711fa93d789078e6a564493c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 21 16:13:40 2005 +0000

    Use DirectStream.


 idirectfbdatabuffer_file.c |  188 ++++++++++++++++++++-------------------------
 1 file changed, 86 insertions(+), 102 deletions(-)



commit 32d48a32a0203ad2624b8079f7f8ca69d2b6abbb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 21 16:10:11 2005 +0000

    Added DirectStream, a wrapper for accessing files locally and through network (http, ftp and generic tcp).
    The API is derived from the IDirectFBDataBuffer interface.


 Makefile.am |    2 
 stream.c    | 1446 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 stream.h    |  115 ++++
 types.h     |    1 
 4 files changed, 1564 insertions(+)



commit 6fe70d12cc3daeab6d463ff9cb1c2124d0591e35
Author: Martin Ltken <ml@directfb.org>
Date:   Mon Sep 19 22:48:27 2005 +0000

    Small change just to be able to get help from DFB people


 xwindow.c |   11 ++++++++---
 xwindow.h |    1 +
 2 files changed, 9 insertions(+), 3 deletions(-)



commit a4c9b7fa573350905697dfe720aab3026eef0302
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 14 17:26:44 2005 +0000

    Another patch from Mark Adams <mark147m@gmail.com> removing the check for
    a real file name in CreateVideoProvider() to support Xine's MRLs.


 idirectfb.c |    3 ---
 1 file changed, 3 deletions(-)



commit 3ef6c7983ada2802909dbc20e6336941561a2898
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 14 16:42:48 2005 +0000

    If the master application only accesses the BES layer, current VideoMode is NULL;
    in that case rely on the default VideoMode.


 matrox_bes.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit 8018e8cc61b997aa7ae08781bde8a4be8a38c42e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 14 16:05:51 2005 +0000

    Dropped down YUV Source Colorkeying.


 r200.c |   33 +++++++++++++--------------------
 1 file changed, 13 insertions(+), 20 deletions(-)



commit 18c3709af853431a53fb77d59866574242be4042
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 14 11:02:30 2005 +0000

    Applied patch from "Mark Adams <mark147m@gmail.com>" fixing a rare crash
    in the single application core. Thanks!


 README           |    1 +
 lib/fusion/ref.c |    5 ++++-
 2 files changed, 5 insertions(+), 1 deletion(-)



commit 318f510a4b0e57f316ae633013e4ace127e1e109
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 14 08:36:30 2005 +0000

    Added new input event flag DIEF_REPEAT indicating a repeated key or button press.
    
    Make usage of it in the linux_input driver.
    
    
    Thanks to "Marko Mkel <marko.makela@hut.fi>" for the initial version of the patch.


 include/directfb.h                     |    3 ++-
 inputdrivers/linux_input/linux_input.c |    3 +++
 2 files changed, 5 insertions(+), 1 deletion(-)



commit 3da874e2803d3271aac79eff7ac65443a5f9e6ab
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Sep 11 15:27:37 2005 +0000

    Planar YCbCr deinterlacing.


 generic.c |   84 ++++++++++++++++++++++++++++----------------------------------
 1 file changed, 39 insertions(+), 45 deletions(-)



commit 8b592375042eeac3c2006e94889cea37cdaa9e73
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 7 10:18:02 2005 +0000

    Fixed rendering to A8 surfaces (color must be replaced by alpha since the destination format is set to RGB8).
    
    Workaround to make byte-swapping work properly on big-endian machines (better than nothing for now).


 r200.c       |   12 +++++-
 r200.h       |    1 
 r200_state.c |  103 +++++++++++++++++++++++++++++++++++++++++------------------
 3 files changed, 83 insertions(+), 33 deletions(-)



commit 2ccdbf17b6d05c02e19a2c4c7c65b1405d40c09e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Sep 6 12:51:15 2005 +0000

    RGB24 byte swapping on big-endian hosts happened when the destination format was RGB32,
    probably because of a patch applied for a different revision of gfx_util.c.


 gfx_util.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 9836c81537583f27b45fdbe331b19d837777a961
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 3 10:41:58 2005 +0000

    New supported values for mouse-protocol: PS/2, IMPS/2.


 directfbrc.5.in |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 6c1a672d1e7773004e481db516e0f4a15c2e2983
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 3 10:40:07 2005 +0000

    Display help for the following options: mouse-source and mouse-gpm-source.


 conf.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit 89ceb472a2d785f60d21ccc18879549462c6dcae
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 3 10:38:47 2005 +0000

    Added GPM support.
    The moouse-protocol option specifies the protocol for
    the mice or the repeater (supported values: PS/2 and IMPS/2).


 ps2mouse.c |   59 ++++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 52 insertions(+), 7 deletions(-)



commit da3efadfd6ac7c7a26cd2c3f68117c6245a900cf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 2 20:09:11 2005 +0000

    Suppressed some debug.


 reactor.c |    4 ++++
 1 file changed, 4 insertions(+)



commit d3dadc1b045cdc58d3c3b0b1ef6a28996353b8c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 2 19:59:56 2005 +0000

    Fixed an evil dead lock that only occured by moving a window with one of
    my new mice, having superior precision generating lots of events, thanks
    for spotting this bug, Logitech :)


 reactor.c |   17 ++++-------------
 1 file changed, 4 insertions(+), 13 deletions(-)



commit 8af84ef7b2a96b0539099778701d0d59b0e8098b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 30 15:41:36 2005 +0000

    Added universal event class for custom usage with variable size.
    
    New structure DFBUniversalEvent has a 'clazz' and a 'size' member. The clazz
    is always DFEC_UNIVERSAL and the size is at least sizeof(DFBUniversalEvent).
    There are no other members, but any amount of additional data may follow
    according to the specified size. Best usage would be to derive from the struct.
    
    The pipe mode currently doesn't support universal events, because the event
    size (write()/read() block size) is fixed to sizeof(DFBEvent).


 include/directfb.h               |   25 +++++++++---
 src/input/idirectfbinputbuffer.c |   77 +++++++++++++++++++++++++++------------
 2 files changed, 73 insertions(+), 29 deletions(-)



commit 2b2a778a7691fc737baea0b6974257f84b1f5f69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 29 09:19:05 2005 +0000

    Added direct_thread_set_name() for setting the name of threads that haven't
    been created by direct_thread_create().
    
    Use direct_thread_set_name() in direct_initialize() setting "Main Thread"
    if direct_thread_self_name() returns NULL.


 direct.c |    3 +++
 thread.c |   44 ++++++++++++++++++++++++++++++++++++++++++++
 thread.h |    5 +++++
 3 files changed, 52 insertions(+)



commit 9f07b205a7d81fb702fdd1a8431331a0ebcf13d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 29 09:17:06 2005 +0000

    Added duff's device for 8 bit color keying.


 generic.c |   96 +++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 79 insertions(+), 17 deletions(-)



commit 23d409e357ecc5ebe63ed3760cbc5aa81ab831eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 29 09:15:52 2005 +0000

    Added RGB332 and LUT8 support to dfb_surface_dump().


 surfaces.c |   54 +++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 49 insertions(+), 5 deletions(-)



commit 91492126ab383d76f9724199803207bd1d89fb8e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 29 09:15:03 2005 +0000

    Added 'const' to DFBPaletteDescription\'s entries.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 73255756d8d06eb95308ee9b67c5897f18ff3c57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 27 15:08:04 2005 +0000

    Added low level logging abstraction.
    
    direct_log_create() is used to setup logging for the following types:
    - DLT_STDERR  writes all messages to stderr
    - DLT_FILE    writes all messages to a file
    - DLT_UDP     sends all messages via UDP to a specific host and port
    
    direct_log_destroy() is obvious :)
    
    direct_log_printf() is a printf fashioned funtion to write a message.
    
    direct_log_set_default() sets the default log that is used when
    no valid log is passed to direct_log_printf(), as done by all legacy
    code for now. If the default is also invalid, stderr is used.
    
    Added runtime options "log-file = <name>" and "log-udp = <host>:<port>"
    for configuring the default log.
    
    
    On the receiver side start e.g.: "netcat -l -p <port> -u"


 docs/directfbrc.5.in   |    8 +
 lib/direct/Makefile.am |    2 
 lib/direct/conf.h      |    2 
 lib/direct/debug.c     |   44 ++----
 lib/direct/debug.h     |    5 
 lib/direct/dtest.c     |   59 ++++++++
 lib/direct/log.c       |  325 +++++++++++++++++++++++++++++++++++++++++++++++++
 lib/direct/log.h       |   74 +++++++++++
 lib/direct/messages.c  |   37 +----
 lib/direct/signals.c   |   69 +++-------
 lib/direct/trace.c     |   19 +-
 lib/direct/types.h     |    1 
 src/directfb.c         |   28 ++--
 src/misc/conf.c        |   47 +++++--
 14 files changed, 586 insertions(+), 134 deletions(-)



commit 8ea8a38285bd3b9ede95baeb60cbc74db6a2178f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 27 14:07:48 2005 +0000

    Added missing include.


 mem.h |    1 +
 1 file changed, 1 insertion(+)



commit 67536932c229b35ae28c602acd335550a8987bb6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 27 14:05:03 2005 +0000

    Fixed a warning.


 lib/fusion/object.c |    2 +-
 src/misc/gfx_util.c |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 8ca22f8333488c6a8c38b8b387dca245942d67d0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 26 10:02:30 2005 +0000

    Take into consideration DSDRAW_DST_COLORKEY and DSDRAW_XOR when drawing strings.


 gfxcard.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 440a3261fc1054fa01f1861c53ac8aba7d1fc52a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 26 10:00:58 2005 +0000

    DSBLIT_XOR.


 gfxdrivers/r200/r200.c       |    7 ++++---
 gfxdrivers/r200/r200_state.c |   15 ++++++++++-----
 src/gfx/generic/generic.c    |   37 ++++++++++++++++++++++++++++++++++---
 3 files changed, 48 insertions(+), 11 deletions(-)



commit 1bceb7e2417646a1bfe720bdfa261371e3dc67d9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 26 09:59:31 2005 +0000

    Added DSBLIT_XOR.


 directfb.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 8ef2c046d6cadfa7acedf4009e73acefd4cf8d2e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 23 15:26:47 2005 +0000

    - FillTriangle,DrawRectangle,DrawLine (with Xor and Alpha Blend) on YUY2/UYVY/YV12/I420.
    - DrawString (A8 fonts) on YUY2/UYVY/YV12/I420.
    - Blit with Source Colorkey on YV12/I420.


 r200.c       |  793 +++++++++++++++++++++++++++++++++++++++++++----------------
 r200.h       |   14 -
 r200_state.c |  188 ++++++++-----
 3 files changed, 709 insertions(+), 286 deletions(-)



commit e0dc4ad4951668639c47e0415c7cdd64b62e6787
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 23 15:25:20 2005 +0000

    dfb_color_to_pixel() returns (y@0, cb@8, cr@16) for I420/YV12.


 convert.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 83f515d8a2441416f9083bb5e4e75bfe42e1311c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 22 21:08:11 2005 +0000

    Added fusion_object_get() that gets a pool and an object id and returns
    the appropriate object with a local reference added to it. If the object
    is not found DFB_IDNOTFOUND is returned, or any abnormal other error from
    locking or referencing.
    
    Added FusionObjectID to replace plain int usage.
    
    Added D_MAGIC_* to FusionObjectPool.
    
    Added more D_MAGIC_ASSERT for FusionObject.
    
    Simplified fusion_object_pool_enum() using direct_list_foreach().


 object.c |   74 +++++++++++++++++++++++++++++++++++++++++++++++++++------------
 object.h |   20 +++++++++++------
 2 files changed, 74 insertions(+), 20 deletions(-)



commit 51677e66aeddb7258a5c49c484ff0aa0e860b7ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 18 13:20:00 2005 +0000

    Fixed build_clipped_rectangle_outlines() to handle special cases
    where width and/or height is/are one or two.


 gfxcard.c |   48 +++++++++++++++++++++++++++---------------------
 1 file changed, 27 insertions(+), 21 deletions(-)



commit cc504446887022abd12e104d00b4954c9c3f1060
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 18 11:18:11 2005 +0000

    Added dfb_region_region_union().


 util.h |   19 +++++++++++++++++++
 1 file changed, 19 insertions(+)



commit 15739b12f389e38456ef802adce072111b6b7e99
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 18 11:13:43 2005 +0000

    Fixed a bug in direct_list_remove()!
    
    If the last item is removed while other items exist, the first
    item's "prev" pointer was not updated (pointing to the last element).
    
    
    Cast to (typeof(elem)) instead of (void*), to make C++ compiler happy.


 list.h |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit ce858d75ccfbc9ad837faaa57f966fb98499e770
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 15 13:40:54 2005 +0000

    Lot of improvements and new features.
    
    Engine:
      - Fixed all cache related problems.
      - No longer _exit if a timeout occurs, try a reset instead.
    
    Acceleration:
      - Added support for the following formats: LUT8, ALUT44, ARGB2554, AiRGB.
      - Speed up font rendering by bypassing the TCL.
    
    Overlay:
      - Fixed support for very high resolutions (dotclock >= 175Mhz).
    
    
    Switched to version 0.2.


 r200.c         |  225 +++++++++++++++++++++++++++++++--------------------------
 r200.h         |    6 +
 r200_mmio.h    |   24 ++----
 r200_overlay.c |   56 +++++++++-----
 r200_regs.h    |    5 +
 r200_state.c   |   76 ++++++++++++++-----
 6 files changed, 241 insertions(+), 151 deletions(-)



commit 15eca8fd93a57335fc624f96e9897f64cf652e1c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 12 11:03:15 2005 +0000

    Do not try to load the driver if the accelerator is -1.


 gfxcard.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit fbf15dbbba6398850b54112ace094d019351a44a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 12 11:00:56 2005 +0000

    system_get_accelerator() returns -1 if mmio memory lenght is 0.


 fbdev.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 5c54a533eb0af58a23ea7e2cd3dac77c1b714828
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 11 06:43:30 2005 +0000

    Fixed a typo.


 nvidia_regs.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8caa3202616c1bb7ff9f497d4a99d3225717ab1f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 11 06:42:52 2005 +0000

    Missing copyright.


 nvidia_state.c |   28 ++++++++++++++++++++++++++++
 nvidia_state.h |   28 ++++++++++++++++++++++++++++
 2 files changed, 56 insertions(+)



commit a373338efcc3a3cc295e549891b0df2018e5642b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 9 13:15:42 2005 +0000

    Fixed bug due to negative coordinates when the overlay goes outside the top/left border of the screen.


 nvidia_overlay.c |   59 +++++++++++++++++++++++++++++++++++++++++--------------
 nvidia_regs.h    |   10 +++++++++
 2 files changed, 54 insertions(+), 15 deletions(-)



commit 7c87cb4ce653263bcd8417cd649303abf820c696
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 9 08:17:28 2005 +0000

    - Re-enabled the CCF_READSYSMEM flag on NV5/NV10 only for TextureTriangles().
    - Made deinterlacing work properly with TextureTriangles().
    - Pay attention to the DSCAPS_SEPARATED flag.


 nvidia.c       |   50 ++++++++++++++++++++++++++++++--------------------
 nvidia.h       |    1 +
 nvidia_3d.c    |   53 ++++++++++++++++++++++++++++++++++-------------------
 nvidia_state.c |   32 ++++++++++++++++++--------------
 4 files changed, 83 insertions(+), 53 deletions(-)



commit e65a7482c140d3075755cdbc5456d06a3fef1365
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 8 13:04:24 2005 +0000

    Fixed planar source cropping.


 r200_overlay.c |   78 ++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 45 insertions(+), 33 deletions(-)



commit a8b9045c367c8f4341a142f1fd47a7523a75b9f5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 8 13:03:54 2005 +0000

    Pay attention to the DSCAPS_SEPARATED flag.


 r200_state.c |   22 +++++++++++++++-------
 1 file changed, 15 insertions(+), 7 deletions(-)



commit 0283d7888a6468b2aa51a6fa3dbb11726ebe8f5c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Aug 7 10:27:24 2005 +0000

    StretchBlit() improvements:
         When the suppplied blittingflags require to read from the destination,
         source is scaled to the accumulator on start, otherwise scaling happens
         when the pixels in the accumulator are written to the destination.
         This way StretchBlit() is faster if source has not to be blended togheter
         with the destination.


 generic.c |  530 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 generic.h |    4 
 2 files changed, 521 insertions(+), 13 deletions(-)



commit 61d13145259257f408fe12b82e755416518bfbcb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Aug 6 08:26:17 2005 +0000

    Allow YV12/I420 deinterlacing.


 r200.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 55a9c0172952261608a133571e7657a672ef057d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 4 20:45:28 2005 +0000

    Added -D_GNU_SOURCE as this script currently covers libdirect, too.


 directfb-config.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 34317d738cf3573ce0668050ad45ab962b3ee1c4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 3 10:56:59 2005 +0000

    Option 'pci-id' renamed 'busid' (however 'pci-id' still works).


 conf.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 1698125f7e2452378385a0c09da77150a76a8931
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 3 10:01:18 2005 +0000

    If JFIF or Exif header detection failed, try detecting by filename extension.


 idirectfbimageprovider_jpeg.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit 6d85625c8956224f67ac5afc7b17b5e2b8a68206
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 3 09:21:41 2005 +0000

    Include <core/accelerators.h>.


 ati128/ati128.c   |    2 ++
 cyber5k/cyber5k.c |    2 ++
 i810/i810.c       |    4 ++--
 i830/i830.c       |    2 ++
 mach64/mach64.c   |    2 ++
 matrox/matrox.c   |    2 ++
 nvidia/nvidia.c   |   11 +++--------
 savage/savage.c   |    2 ++
 sis315/sis315.c   |    4 +++-
 tdfx/tdfx.c       |    2 ++
 10 files changed, 22 insertions(+), 11 deletions(-)



commit 07d5f258209578ac1e0042ca66fee68758a7786e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 3 09:14:56 2005 +0000

    Added a list of supported accelerators.
    This avoid relaying on <linux/fb.h>, that could be a very old header,
    and gives the possibility to add accelerators for other systems.


 Makefile.am    |    1 
 accelerators.h |  245 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 246 insertions(+)



commit 0255ed695e5dbbe6c315cd2e2d67b6dce38491e5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 2 20:54:46 2005 +0000

    If there is not enough video memory for textures buffer,
    do not fail returning DFB_NOVIDEOMEMORY but simply disabable 3D acceleration.


 nvidia.c |   38 ++++++++++++++++++++++----------------
 1 file changed, 22 insertions(+), 16 deletions(-)



commit d9fd90296c25d0bb23e1130751748faaa3cf65e4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 2 17:00:01 2005 +0000

    Deinterlacing.


 nvidia.c       |   17 +++++++++++------
 nvidia.h       |    1 +
 nvidia_2d.c    |   28 ++++++++++++++++++++++++----
 nvidia_state.c |   32 +++++++++++++++++++++++++-------
 4 files changed, 61 insertions(+), 17 deletions(-)



commit f17881a6b2aa4a136b1bfaa8238a248a491db8bb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 2 14:06:08 2005 +0000

    Deinterlacing.


 r200.c       |   21 ++++++++++++++++++++-
 r200_state.c |   34 +++++++++++++++++++++++-----------
 2 files changed, 43 insertions(+), 12 deletions(-)



commit 564c13062a64164957b7b42c213b2650b228d2d5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 2 09:04:15 2005 +0000

    Replaced dfb_screens_register_primary() by dfb_screens_hook_primary().


 nvidia.c         |   11 +++++----
 nvidia.h         |    6 +++--
 nvidia_primary.c |   61 +++++++++----------------------------------------------
 3 files changed, 20 insertions(+), 58 deletions(-)



commit e497b8db39401cb53eea365f06ebf122733dad9d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 2 08:11:53 2005 +0000

    Dacc_xor() at 64bit.


 generic.c    |    8 +++++---
 generic_64.h |   25 +++++++++++++++++++++++++
 2 files changed, 30 insertions(+), 3 deletions(-)



commit 6664180f2be3869a20528a4101d70c3bca14a13e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 1 07:39:23 2005 +0000

    Added some functions optimized for 64bit architectures.


 Makefile.am  |    3 
 generic.c    |   40 ++++++++++++
 generic_64.h |  182 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 223 insertions(+), 2 deletions(-)



commit e55c57064b29ebfa1869b013d89928b85330eda2
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 31 18:07:59 2005 +0000

    Optimizations on generic64_memcpy().


 memcpy.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit 81f6bc57b18a62d5202a42f497aff9531e59d959
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 31 14:42:51 2005 +0000

    Cast pointers to long instead of __u32.


 generic.c |   38 +++++++++++++++++++-------------------
 1 file changed, 19 insertions(+), 19 deletions(-)



commit 9267d12ac866903e7eef86fb8448a249dc62dc7b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 31 11:04:41 2005 +0000

    Fixed missing debugging symbols on AMD64.


 memcpy.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit 70aa8a73b99722f7d0cd5d8c1be89dbafac29ec6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 31 09:34:22 2005 +0000

    MMX and SSE support on AMD64.


 configure.in           |    1 +
 lib/direct/cpu_accel.c |   17 +++++++++++++++--
 2 files changed, 16 insertions(+), 2 deletions(-)



commit e98ffa98f573af7acd1ec242e695f1f6a5fd686f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jul 31 09:31:53 2005 +0000

    Ported to AMD64.


 generic_mmx.h |   94 ++++++++++++++++++++++++++++++----------------------------
 1 file changed, 49 insertions(+), 45 deletions(-)



commit 48f53c73335d7889d1290d13fb56972fc8d9655b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 30 16:53:46 2005 +0000

    Check if we are compiling for AMD64.


 configure.in |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit ba704c43aa62f6c7a25e35da3cf4d37fdba59f2c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 30 16:52:32 2005 +0000

    Enable X86 memcpy()s on AMD64.
    Added a generic memcpy() for 64bit Architectures.


 memcpy.c |   86 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 81 insertions(+), 5 deletions(-)



commit 50ffd957cba94eae6b88f88189653e64360eba7e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 30 09:13:49 2005 +0000

    dfb_screens_hook_primary() instead of dfb_screen_register_primary().


 r200/r200.c       |    7 ++--
 r200/r200.h       |    7 +++-
 r200/r200_crtc1.c |   41 +------------------------
 radeon/radeon.c   |   87 +++++++-----------------------------------------------
 4 files changed, 24 insertions(+), 118 deletions(-)



commit e638f9948b39ac33fc8ba26a4745c26c84ee9c29
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jul 30 09:11:55 2005 +0000

    Added dfb_screens_hook_primary().


 screens.c |   43 +++++++++++++++++++++++++++++++++++++++++++
 screens.h |   13 +++++++++++++
 2 files changed, 56 insertions(+)



commit 4a16d536c24c9952360ec4ca6d10558111860a33
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jul 28 12:30:44 2005 +0000

    call $(AR) not ar. Fixes nothing yet since AR is always ar, for some strange reason.


 libobject.make |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 153900c7f98b453c1d2c9b7e010914137d53aa03
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 27 14:09:41 2005 +0000

    Use dfb_system_get_deviceid() instead of accessing FBDev system's private data.


 nvidia/nvidia.c |   16 ++++++++--------
 r200/r200.c     |   13 +++++++------
 radeon/radeon.c |   11 +++++++----
 3 files changed, 22 insertions(+), 18 deletions(-)



commit c77022f1a3e26d008ac3a067fff46316a3537409
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 27 14:07:04 2005 +0000

    Added dfb_system_get_busid() and dfb_system_get_deviceid().


 src/core/core_system.h |   10 +++++++++-
 src/core/system.c      |   33 +++++++++++++++++++++++++++++++++
 src/core/system.h      |   13 ++++++++++++-
 systems/fbdev/fbdev.c  |   16 ++++++++++++++++
 systems/osx/osx.c      |   13 +++++++++++++
 systems/sdl/sdl.c      |   13 +++++++++++++
 systems/vnc/vnc.c      |   13 +++++++++++++
 systems/x11/x11.c      |   13 +++++++++++++
 8 files changed, 122 insertions(+), 2 deletions(-)



commit bd2930fc462e706c5851e830319f206a3a6854d1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jul 27 14:05:09 2005 +0000

    Call pthread_mutexattr_settype( &attr, PTHREAD_MUTEX_RECURSIVE ) when __USE_UNIX98 is defined
    (PTHREAD_MUTEX_RECURSIVE is not a definition in LinuxThreads).


 util.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ac59b8b44b21b9f17d39bb0c5e725d0c8307ff4d
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 26 21:30:11 2005 +0000

    On KallistiOS:
    - do not call killpg()
    - do not include dlfcn.h


 debug.c     |    8 ++++----
 interface.c |    2 ++
 2 files changed, 6 insertions(+), 4 deletions(-)



commit bbb4a2e18a6899fa92064a28bb577a5ed784516b
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 26 21:07:08 2005 +0000

    - only call pthread_mutexattr_settype() when PTHREAD_MUTEX_RECURSIVE is defin is defined


 util.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit feb728448e1fae2597921497a9f762f7eacf9380
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 26 20:58:50 2005 +0000

    when compiling for KallistiOS define __* types another way.


 configure.in        |    4 ++++
 include/dfb_types.h |   16 ++++++++++++++++
 2 files changed, 20 insertions(+)



commit b80dab075edcbbf07734c9fdf7fe67845afa7878
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 26 16:47:15 2005 +0000

    - dont check for libpthread when compiling for KallistiOS


 configure.in |   28 +++++++++++++++++++---------
 1 file changed, 19 insertions(+), 9 deletions(-)



commit 2d0fd8679712ef7725205f0d21f7a5cad842f800
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 26 15:19:39 2005 +0000

    some more BSD compatibility for linking statically


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e5736dc9c4a5c494790e009bc4e4289329a4b089
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 26 13:49:12 2005 +0000

    Added ARGB4444 support, untested.


 fbdev.c |   15 +++++++++++++++
 1 file changed, 15 insertions(+)



commit c7ff8b2a5bad2917322bc643d007ecb2de948685
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 24 17:55:06 2005 +0000

    Fixed wrong signature of DirectFBInit() and dfb_config_init().
    
    -DirectFBInit( int *argc, char **argv[] )
    +DirectFBInit( int *argc, char *(*argv[]) )


 include/directfb.h |    4 ++--
 src/directfb.c     |    2 +-
 src/misc/conf.c    |    2 +-
 src/misc/conf.h    |    2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)



commit 5c99371dbd110ce88404346988e19f72809f88a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 24 17:42:39 2005 +0000

    Was missing.


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit e8ca623d7526e68517fa5a06b1465fb7f4657d6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 24 17:29:52 2005 +0000

    Replaced old code by using direct_try_open().
    
    Fixes double negative in error message.


 fbdev.c |   29 ++++++-----------------------
 1 file changed, 6 insertions(+), 23 deletions(-)



commit d88a02e219cc1f076004123a4313f2f0567e4bbf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 24 17:09:40 2005 +0000

    Added translation of
    - KEY_FASTFORWARD
    - KEY_SOUND
    - KEY_QUESTION
    - KEY_EMAIL
    - KEY_CANCEL


 linux_input.c |   37 +++++++++++++++++++++++++++++++------
 1 file changed, 31 insertions(+), 6 deletions(-)



commit 46a7ab8ba61d441aa851fb3d03195e63b9b602ea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 21 21:43:35 2005 +0000

    Protect against bogus siginfo_t pointer by checking if it's smaller than 0x100.


 signals.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8fada1177e1daadc52a085490c6f6bcadcfc0834
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 21 21:34:03 2005 +0000

    New configure option "--with-sysroot=DIR" lets you prepend a path to
    the runtime library/module paths.


 configure.in                                  |    7 +++++++
 interfaces/IDirectFBFont/Makefile.am          |    2 +-
 interfaces/IDirectFBImageProvider/Makefile.am |    2 +-
 interfaces/IDirectFBVideoProvider/Makefile.am |    2 +-
 lib/direct/Makefile.am                        |    4 ++--
 lib/fusion/Makefile.am                        |    4 ++--
 lib/fusion/shmalloc/Makefile.am               |    4 ++--
 lib/voodoo/Makefile.am                        |    4 ++--
 proxy/dispatcher/Makefile.am                  |    2 +-
 proxy/requestor/Makefile.am                   |    2 +-
 src/Makefile.am                               |    4 ++--
 src/core/Makefile.am                          |    4 ++--
 12 files changed, 24 insertions(+), 17 deletions(-)



commit ddcddb348a919152e81bbd8d67fc198fc415a013
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 19 08:58:30 2005 +0000

    Oops, written fbdev->shared->device.model instead of fbdev->shared->device.vendor.


 radeon.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 87f5fa10efe469cc86d35cc3ca3c3c3e66bf25b0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Jul 19 08:53:21 2005 +0000

    Applied patch by Vadim Catana <vcatana@registru.md> with some modifications due to last changes.


 radeon.c         |  139 ++++++++++++++++++++++++++++++++++++++++++++++++++++---
 radeon.h         |   16 ++++++
 radeon_overlay.c |   18 +++++++
 3 files changed, 167 insertions(+), 6 deletions(-)



commit 69a08d4c0471ce53943864fdf0b57ac66d4348d2
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jul 18 19:07:19 2005 +0000

    - BSD compatibility: changed "cp -af" to "cp -pf"


 lib/direct/Makefile.am |    2 +-
 lib/fusion/Makefile.am |    2 +-
 lib/voodoo/Makefile.am |    2 +-
 wm/unique/Makefile.am  |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)



commit 5dafc702460aff8b2895763f66ef3ba31e42a497
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jul 18 18:56:00 2005 +0000

    - specify path when calling "find", improves BSD compatibility when linking statically


 lib/direct/Makefile.am |    2 +-
 lib/fusion/Makefile.am |    2 +-
 lib/voodoo/Makefile.am |    2 +-
 wm/unique/Makefile.am  |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)



commit 1d66c37a83b4d748ae848840ee0d7dbc89fd0be4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 16:28:19 2005 +0000

    No longer need to link against libsysfs.


 Makefile.am |    1 -
 1 file changed, 1 deletion(-)



commit 26ca622aa686781a088facd147ca50ced7dd5fbb
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 16:27:28 2005 +0000

    Use informations stored in FBDevShared to detect chipset architecture.


 nvidia.c |  140 ++++++++++++++++++---------------------------------------------
 1 file changed, 40 insertions(+), 100 deletions(-)



commit e96da2dc220a1b582368d6f74eb13fd2a81d0d67
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 16:26:21 2005 +0000

    Use informations stored in FBDevShared to detect chipset identifier.
    
    No longer need to link against libsysfs.


 Makefile.am |    1 
 r200.c      |   71 ++++--------------------------------------------------------
 2 files changed, 5 insertions(+), 67 deletions(-)



commit 4bbf6043c12d660353980d57c04a388961c57e2f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 16:24:38 2005 +0000

    Added option 'pci-id' to specify the graphics card bus id (unused if sysfs support is enabled).


 conf.c |   19 +++++++++++++++++++
 conf.h |    6 ++++++
 2 files changed, 25 insertions(+)



commit 19aed80be4aa696d97ac3a170b05b4b8cacb6811
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 16:22:57 2005 +0000

    The FBDev system is now responsible of retrieving the PCI Bus, Card Vendor and Device identifiers.
    These informations are stored in the FBDevShared structure.


 Makefile.am |    3 +
 fbdev.c     |  105 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 fbdev.h     |   11 ++++++
 3 files changed, 118 insertions(+), 1 deletion(-)



commit b7d88f51038bfee28999acbbd4488837657710a4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jul 18 09:35:56 2005 +0000

    Overlay supports deinterlacing.
    Enable Gouraud shading for TextureTriangles() by default.
    Rewritten chipset probe function (faster).


 r200.c         |  126 +++++-------
 r200.h         |    1 
 r200_mmio.h    |    3 
 r200_overlay.c |  579 +++++++++++++++++++++++++++++++++------------------------
 r200_state.c   |   74 ++++---
 5 files changed, 442 insertions(+), 341 deletions(-)



commit 66e7126ad6f6b80cc48d2549d9450ff3f6219ab8
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Jul 15 17:43:40 2005 +0000

    Added vncserver url http://libvncserver.sourceforge.net to config warning


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4b7b953d5643b18787aa6de11b6e15abf9f841ac
Author: Mike Emmel <memmel@directfb.org>
Date:   Fri Jul 15 17:33:10 2005 +0000

    Initial checkin of the vnc backend please let me know asap if I've broken anything.
    Known bugs: The cursor support is munged


 configure.in            |   28 +
 src/core/system.h       |    3 
 systems/Makefile.am     |    9 
 systems/vnc/Makefile.am |   46 ++
 systems/vnc/primary.c   | 1096 ++++++++++++++++++++++++++++++++++++++++++++++++
 systems/vnc/primary.h   |   43 +
 systems/vnc/vnc.c       |  232 ++++++++++
 systems/vnc/vnc.h       |   45 +
 systems/vnc/vncinput.c  |  124 +++++
 9 files changed, 1624 insertions(+), 2 deletions(-)



commit 42ecca08e6e709f0b7224c451af0a2a926d133aa
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jul 15 13:30:19 2005 +0000

    When a layer is re-configured for deinterlaing, the corresponding IDirectFBSurface's capabilities aren't updated to include DSCAPS_INTERLACED flag; therefore test for DSCAPS_INTERLACED flag on the wrapped CoreSurface's capabilities in SetField().


 idirectfbsurface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2c6f8ba4b41a81b0f92ba3dd44de0c20963b0a2e
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Sun Jul 10 16:26:50 2005 +0000

    there's no more need to look for sisfb.h


 configure.in |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 72e427039a3ca1363e5d8d88cdc9eb6ea6ffa3bb
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Sun Jul 10 16:25:41 2005 +0000

    compatibility stuff for newer fb driver versions


 sis315.c        |   43 +++++++++++---
 sis315.h        |    6 +
 sis315_compat.h |   10 ---
 sisfb.h         |  171 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 212 insertions(+), 18 deletions(-)



commit 5f051dfd18bc883ea1b02b0c15c52d48021f1841
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 10 00:11:37 2005 +0000

    Fixed another warning.


 idirectfbfont.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 12b84cd92ff27815878ba78b4a4b407fcc13ea60
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 10 00:06:40 2005 +0000

    Fixed signedness warning.


 manager.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit fd89d932c541d6f58071d74f6cec928eb021ce3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 8 06:33:44 2005 +0000

    Use "signed char" explicitly to fix kerning on PPC, thanks to Uli!


 idirectfbfont_ft2.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 9dc3b8ca38aa49ce6ad94a3a4e92ae065f443786
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 1 21:17:05 2005 +0000

    Added:
    
    #define D_FLAGS_ASSERT(flags,f)    D_ASSERT( D_FLAGS_ARE_IN(flags,f) )
    
    static inline int direct_util_align( int value, int alignment )


 util.h |   19 +++++++++++++++++++
 1 file changed, 19 insertions(+)



commit 4e2c8c2c55792002b9f2afffc00e6541b985dd03
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 1 21:15:33 2005 +0000

    Fixed direct_try_open() not always honoring error_msg parameter.


 util.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 1612a12f08391e0ba0544e550b4672eaf77694eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 24 09:19:59 2005 +0000

    Added "Claudio Ciccani <klan82@cheapnet.it>" to main authors,
    welcome number five and thanks for your appreciated work :-)


 AUTHORS |    1 +
 1 file changed, 1 insertion(+)



commit 5149df555c64d9eaff82be596ba3e7215ff13229
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jun 22 21:48:20 2005 +0000

    make w key work. it was missing in the translation code


 x11input.c |    1 +
 1 file changed, 1 insertion(+)



commit 3d5830470cb937129c910d86646b01a245c8f256
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 20 20:13:58 2005 +0000

    Fixed warnings.


 devices/keyboard.c |    6 ++++++
 devices/pointer.c  |    4 ++++
 devices/wheel.c    |    6 ++++++
 test_foo.c         |    2 ++
 unique.c           |    2 ++
 5 files changed, 20 insertions(+)



commit 26add1263a82c1e3afe26214e194a1614e83cd26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 17 00:20:01 2005 +0000

    Fixed mouse motion compression to eliminate massive input lag, e.g. cursor movement.


 x11input.c |   65 +++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 38 insertions(+), 27 deletions(-)



commit 37b2730d7f8eb85afee130cb7e547738da3a8387
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 17 00:10:57 2005 +0000

    Commented out locks as they shouldn't be needed, but cause a dead lock.


 x11input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 5c9e7b15656acbb8eabe71c6deb84611ea4b09ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 16 22:13:43 2005 +0000

    Fixed typo.


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0ec583a0c98d4c54d1b20c2677cbf3349d44eebb
Author: Martin Ltken <ml@directfb.org>
Date:   Thu Jun 16 20:58:36 2005 +0000

    Disabled default X11 cursor


 xwindow.c |   23 +++++++++++++++++++++--
 xwindow.h |    5 +++++
 2 files changed, 26 insertions(+), 2 deletions(-)



commit e181bb7b3f76f56fdcff2ce055a756d59b117618
Author: Martin Ltken <ml@directfb.org>
Date:   Thu Jun 16 20:18:53 2005 +0000

    Removed printf(ML: spam


 x11.c      |    7 -------
 x11input.c |   20 +-------------------
 xwindow.c  |    4 ++--
 3 files changed, 3 insertions(+), 28 deletions(-)



commit ebdb54b2406dac2093fb1f56213add6b3f4e57c8
Author: Martin Ltken <ml@directfb.org>
Date:   Thu Jun 16 19:24:53 2005 +0000

    Fix input mask and missing input y-axis in mouse input


 x11input.c |    4 ++--
 xwindow.c  |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 1b08d287b092e90159a06fcf6c265c5aedc645d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 14 12:49:53 2005 +0000

    Fixed formatting.


 Makefile.am |   36 +++++++++++++++++-------------------
 1 file changed, 17 insertions(+), 19 deletions(-)



commit e702230692348ed50c59808040db79f6e558848b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 14 08:31:11 2005 +0000

    Make sure that "dtest" is excluded from static lib.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e14e1dd7d70a4d7a5da9dd26a92acfb1afbba71a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 14 01:00:03 2005 +0000

    Option "-s" additionally shows the shared memory file size, now.


 dfbdump.c |    2 ++
 1 file changed, 2 insertions(+)



commit d28a12f0512ff8f1a810328262be6a60ef18e20e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 14 00:59:07 2005 +0000

    Put shared memory file size into heap structure for tracking.


 shmalloc.c          |    8 ++++++--
 shmalloc_internal.h |    2 ++
 2 files changed, 8 insertions(+), 2 deletions(-)



commit 3924365b5ed08e5b4ec5a3926f22948e678647cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 10 18:38:08 2005 +0000

    Limit number of weights to 64 in x and y direction for down scaling.
    Without this limitation down scaling to 1x1 or similar could take minutes
    on embedded platforms.


 gfx_util.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 43b15696735f1836f3572fa6b7d0e5d7c53af5b3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 10 08:23:46 2005 +0000

    Rendering A8 font onto A8 should be fixed now.


 generic.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit 10f1b356a0678fcacbbe4d5b0c189b86307de813
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 8 20:04:43 2005 +0000

    Removed Bop_8_Kto_Aop overkill.


 generic.c |  177 +-------------------------------------------------------------
 1 file changed, 3 insertions(+), 174 deletions(-)



commit 8a7d402bc0b709e0329da8f90f30dc8160b3616f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 8 18:26:48 2005 +0000

    Use double quotes if header is in same directory.


 idirectfbsurface_layer.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 11ab42ed3296a4cd698df888fa2f6817a24421a5
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 5 10:33:01 2005 +0000

    Rewrite of the nvidia driver.
    
    Driver structure:
    - Follows a common driver template (i.e. Matrox driver);
    - Added a basic list of registers.
    
    Hardware support:
    - Overlay supports Deinterlacing;
    - WaitForSync no longer burns the CPU (but actually requires a 2.6 kernel);
    - Decide texture buffer size according to available video memory
      (<= 16MB -> 512Kb; 32MB -> 1024Kb; >= 64MB -> 2048Kb).
    
    Switch to version 0.5.


 Makefile.am      |    6 
 nvidia.c         | 1897 +++++++++++++++++++------------------------------------
 nvidia.h         |  463 +------------
 nvidia_2d.c      |  178 +++--
 nvidia_2d.h      |    4 
 nvidia_3d.c      |   98 +-
 nvidia_3d.h      |    3 
 nvidia_mmio.h    |   96 ++
 nvidia_overlay.c |  326 +++++----
 nvidia_primary.c |  185 ++---
 nvidia_regs.h    | 1551 ++++++++++++++++++++++++++++++++++++++++++++
 nvidia_state.c   |  658 +++++++++++++++++++
 nvidia_state.h   |   30 
 13 files changed, 3510 insertions(+), 1985 deletions(-)



commit 2c59b963d12aa4f43663c07385f6a73f0a90b14f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 2 18:27:18 2005 +0000

    Started work on the decoration framework.


 IDEAS        |   11 +++
 Makefile.am  |    2 
 STRET        |    7 +-
 decoration.c |  189 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 decoration.h |  131 ++++++++++++++++++++++++++++++++++++++++
 internal.h   |  143 +++++++++++++++++++++++++-------------------
 types.h      |    3 
 uniquewm.c   |   20 +++++-
 8 files changed, 441 insertions(+), 65 deletions(-)



commit 009dc5d39dc6c46118561f351c38089bdb76ab75
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 2 11:00:49 2005 +0000

    Applied path from Sylvain Meyer <sylvain.meyer@worldonline.fr>, thank you!
    
            Hi,
    
        I did a small patch to fix minor issues with i830 gfxdriver. Now the
    driver can more nicely live with the linux intelfb driver. Now it can be
    used even when intelfb has accel set to 1, just in configuring in
    /etc/fb.modes "accel false" to disable console acceleration when
    DirectFB is working. To work, the last intelfb patch is needed. I just
    sended it to linux-fbdev mailing list and Andrew Morton and it should be
    in the next mm series of linux kernels.
        I also fixed the ovlSetColorAdjustment function and now brightness,
    contrast and saturation settings are enabled.
    
    Regards
    Sylvain


 README                         |    2 ++
 gfxdrivers/i830/i830.c         |   37 ++++++++++++++++++++++++++-----------
 gfxdrivers/i830/i830_overlay.c |   30 ++++++++++++++++++++++--------
 3 files changed, 50 insertions(+), 19 deletions(-)



commit 33081a8e6db1e587b54bcde5a6daa961ed726987
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 2 10:37:12 2005 +0000

    fixed warnings


 r200_regs.h |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 0c7a6efd8ec219e2996f62b40adbb1bbb648198d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 2 10:34:08 2005 +0000

    Fixed warnings.
    
    Changed statement with no effect (comparison) into an assignment.


 sdlinput.c |  172 -------------------------------------------------------------
 1 file changed, 1 insertion(+), 171 deletions(-)



commit f3ae3806a88b6adc71a09952f4f508430e993823
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 2 10:33:17 2005 +0000

    Temporarily add "-I/usr/X11R6/include" when checking for "X11/X.h".


 configure.in |    3 +++
 1 file changed, 3 insertions(+)



commit 6d443af1c64d3123d81c8f52e3d4cdea69cf563b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 1 12:03:49 2005 +0000

    Fixed A8 font rendering onto areas that are not black.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 56d0ada371c14b9f249f447272fd36f4d1055f6d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jun 1 09:45:27 2005 +0000

    Acceleration for YV12/I420:
      Drawing Functions:  FillRectangle
      Blitting Functions: Blit,StretchBlit,TextureTriangles
      Drawing Flags:      XOR
      Blitting Flags:     BLEND_COLOR_ALPHA


 r200.c         |  807 ++++++++++++++++++++++++++++++++++++++++-----------------
 r200.h         |   15 -
 r200_overlay.c |    7 
 r200_regs.h    |   66 +++-
 r200_state.c   |  307 ++++++++++++---------
 5 files changed, 821 insertions(+), 381 deletions(-)



commit d31dd0add4e2cf5263bc719e9fd8dbcd7a23d28e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 31 07:02:18 2005 +0000

    Hot fix crash during initialization.


 x11input.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit c2783ae43904e03b5f5f2c7bd29f1121a189c2f5
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 22:49:44 2005 +0000

    - now RGB16 really works (and ARGB1555)


 README    |    7 +++----
 primary.c |    3 ++-
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 664a475dbe0d0cb449ae871555abfd26697fc78b
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 21:50:45 2005 +0000

    - support for pixelformats other than ARGB


 README    |    9 ++++-----
 primary.c |    2 +-
 2 files changed, 5 insertions(+), 6 deletions(-)



commit a7e2d5564bfc2eea94cb0f8c95098ed03348e7e8
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 21:26:37 2005 +0000

    - added XInitThreads() call
    - added README
    - disable x11 system by default


 configure.in           |    4 ++--
 systems/x11/README     |   13 +++++++++++++
 systems/x11/x11.c      |    2 ++
 systems/x11/x11input.c |    3 +++
 4 files changed, 20 insertions(+), 2 deletions(-)



commit f372777c73acd1a562a7def9e6b783527b8edce8
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 20:03:20 2005 +0000

    added -I/usr/X11R6/include to X11_CFLAGS


 configure.in |    2 ++
 1 file changed, 2 insertions(+)



commit 2980dba3676336d8b2e5da460cbf5f609486c777
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 16:55:22 2005 +0000

    - fix to make separated input driver work


 primary.c  |    1 -
 x11.h      |    3 +++
 x11input.c |    4 ++--
 xwindow.c  |    8 +++++---
 4 files changed, 10 insertions(+), 6 deletions(-)



commit 41bcb86a5ce284b8d95ec32cd4215177f3d6659e
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 14:08:58 2005 +0000

    forgot $(X11_DIR)


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1ce7281f393d260f48669615e7b9b4d077c8301d
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 30 13:57:44 2005 +0000

    - added X11 system from Martin Luetken (nitram at lutken dot dk), thank you!
    TODO: add support for non-24bpp modes


 configure.in            |   26 +
 src/core/system.h       |    1 
 systems/Makefile.am     |    6 
 systems/x11/.cvsignore  |    6 
 systems/x11/Makefile.am |   53 +++
 systems/x11/primary.c   |  637 +++++++++++++++++++++++++++++++++++++++++++++
 systems/x11/primary.h   |   43 +++
 systems/x11/x11.c       |  248 +++++++++++++++++
 systems/x11/x11.h       |   43 +++
 systems/x11/x11input.c  |  669 ++++++++++++++++++++++++++++++++++++++++++++++++
 systems/x11/xwindow.c   |  196 ++++++++++++++
 systems/x11/xwindow.h   |   49 +++
 12 files changed, 1975 insertions(+), 2 deletions(-)



commit 7610d5e0af22b232a5c9c1b156b646fd04069f0d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed May 25 09:40:44 2005 +0000

    Always flush cache when switching to 2d/3d engine.
    Disable 0-1 pixel clamp.
    Set framebuffer location according to rdev->fb_offset.


 r200.c         |   59 +++++++++++++++++++++++++++++++++------------------------
 r200_overlay.c |    2 -
 r200_state.c   |    6 +----
 3 files changed, 38 insertions(+), 29 deletions(-)



commit 759f598fa39811e0f805089886341e88f0c87189
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 22 20:56:46 2005 +0000

    Added "bool error_msg" parameter to direct_try_open(). Used to suppress
    the error messages when fusion_init() probes for a new world.


 direct/util.c   |   12 +++++++-----
 direct/util.h   |    2 +-
 fusion/fusion.c |    5 ++---
 3 files changed, 10 insertions(+), 9 deletions(-)



commit 7d1a353886b857e9915d6cf355768751af8a8dc0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri May 20 16:48:01 2005 +0000

    Added errorcode DFB_EOF.


 include/directfb.h |    3 ++-
 lib/direct/util.c  |    2 ++
 2 files changed, 4 insertions(+), 1 deletion(-)



commit 61fd3505622e262051ddebcb275af1e6b0f883d5
Author: Mike Emmel <memmel@directfb.org>
Date:   Mon May 16 01:44:39 2005 +0000

    Changed fake keyboard mapping to actually work
    the old code was sending codes not unicode chars
    This is simpler but correct and lite works now
    so I am going ahead and checking in.


 sdlinput.c |  114 ++++++++++++++++++++++++++++---------------------------------
 1 file changed, 53 insertions(+), 61 deletions(-)



commit fa3bbf08c1890f971e62d66ac0445071ba61b597
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 15 00:27:27 2005 +0000

    Some fixes related to touchpads.


 linux_input.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit b658a4c972b4f817b730e499c7422cc78aefbcc0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 11 09:39:04 2005 +0000

    Merged back multi app fixed from i830 driver. Not tested! Compiles at least...


 i810.c         |  517 ++++++++++++++++++++++++++++++++-------------------------
 i810.h         |  127 +++++++++++---
 i810_overlay.c |  293 ++++++++++++++------------------
 3 files changed, 532 insertions(+), 405 deletions(-)



commit cb5b1fda6c5c39a01aa1365d9c0aca40e259f95a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 9 18:29:52 2005 +0000

    Use the window stack of new contexts.


 idirectfbdisplaylayer.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 104772d2d3b422a3e274fa37cf22c686c9c234d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 9 18:19:49 2005 +0000

    It's allowed to create and use windows in exclusive mode,
    showing the own windows only, of course.
    
    Changed EnableCursor() to be allowed in exclusive mode, too.


 idirectfbdisplaylayer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d65695f814a21eeba45eb64e8fa0ff028091f33d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 6 11:04:49 2005 +0000

    test


 README |    1 +
 1 file changed, 1 insertion(+)



commit 732497b3359f0dae5731c7ccfc8db2787bfd0a26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 6 11:02:22 2005 +0000

    test


 README |    1 +
 1 file changed, 1 insertion(+)



commit f89763d7dd06fb39b8fb6a8ae0600c0a8eb23c12
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 5 11:18:42 2005 +0000

    Try old style device names, too.


 fusion.c |   17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)



commit 5e6750dce07d521e78c5113bc3e10bffcaa36c07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 5 11:17:08 2005 +0000

    Fixed multi application support, but it only works with root privileges so far.


 i830.c         |  244 ++++++++++++++++++++++++++++++++++++---------------------
 i830.h         |   65 ++++++++-------
 i830_overlay.c |    4 
 3 files changed, 195 insertions(+), 118 deletions(-)



commit 78f1268876451d527107e987f9652841b793bffe
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu May 5 10:09:29 2005 +0000

    do not build i830 and savage driver if sys/io.h is not available


 configure.in |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit b0f8fffd3b3d8b830fc85c49df6e1c65e6bbff05
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed May 4 16:16:04 2005 +0000

    Improved Dacc_YCbCr_to_RGB_MMX.
    Cosmetics.


 generic_mmx.h |  315 +++++++++++++++++++++++++++++++---------------------------
 1 file changed, 173 insertions(+), 142 deletions(-)



commit 8a2d5984b2cb204035b7d15ad3192011aef9f2ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 3 06:55:10 2005 +0000

    small fix


 directfb-config.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b43af50859f73e181393d470679bf5cf0d4ab795
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 3 06:48:33 2005 +0000

    Added options "--system=" and "--wm=".
    
    Enhanced help text.


 directfb-config.in |   76 ++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 64 insertions(+), 12 deletions(-)



commit f2d3d6d7dfb011c58dc6dc2c39b35c5d2025e411
Author: Marcel Siegert <mws@directfb.org>
Date:   Mon May 2 19:47:34 2005 +0000

    added 2 special keys for dm 500 remote-control;


 dreamboxremote.c |    2 ++
 1 file changed, 2 insertions(+)



commit 5af316dd5e494fe50d7529cb7cb8a25f77bd3431
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Apr 30 14:17:22 2005 +0000

    Use tables generated by yuvtbl-gen for YCbCr<->RGB conversion (essential for colorkeying).


 convert.h |   38 +++++++++++++++++++++++---------------
 1 file changed, 23 insertions(+), 15 deletions(-)



commit efe1c9d3639d97791087c12564ea4ad09358690e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Apr 30 14:14:40 2005 +0000

    Completed support for YUV422:
    apart from Colorization, all blitting/drawing flags are supported
    and we can convert YUY2<->UYVY.
    
    RGB->YCbCr is supported, too.


 generic.c     | 3022 +++++++++++++++++++++++++++++++++++++---------------------
 generic.h     |   25 
 generic_mmx.h |  317 +++---
 yuvtbl-gen.c  |  105 +-
 yuvtbl.h      |  154 ++
 5 files changed, 2380 insertions(+), 1243 deletions(-)



commit b35609b62a21ad8f5470f34de23688b3578ace27
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 25 09:09:08 2005 +0000

    Commented out usage of DST_PREMUTIPLY and DEMULTIPLY for now.


 default.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8d06837618e40a8bf3828db72f3d23d9a73c0e11
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Apr 22 15:34:30 2005 +0000

    Fixed YUV422 clipping and blitting coordinates.
    Simple blits with src colorkey.


 r200.c       |   45 ++++++++++++++++++++++++++++++---------------
 r200_state.c |   38 ++++++++++++++++++++++++++------------
 2 files changed, 56 insertions(+), 27 deletions(-)



commit 641cff3727a03c0b8aa21079861374d3a04bee40
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Apr 20 09:18:19 2005 +0000

    Fixed a bug in dfb_window_set_opaque (config.opaque.y1 instead of config.opaque.y2).
    SetOpaqueRegion works again now.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 065afbf721c52b45ea536915af6c0fab05635540
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 19 17:45:16 2005 +0000

    Fixed 2d<->3d engine switching.


 r200.c       |   76 +++++++++++++++++++++++++++++++++++++++++------------------
 r200.h       |    7 ++++-
 r200_mmio.h  |    8 ++----
 r200_state.c |   57 ++++++++++++++++++++++++--------------------
 4 files changed, 94 insertions(+), 54 deletions(-)



commit 22955115b0b1be536020b5b0ab45078bcde34424
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 12 14:18:59 2005 +0000

    Commented out checks that avoided hw state updates also when they're needed.


 layer_context.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 852f0ca9dbbf988c2e9c7d1fe40e3b32560aa8b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 12 14:05:16 2005 +0000

    Use iopl(3) and check the return result before doing port IO.
    
    FIXME: Check out how setting via MMIO works.


 neo_overlay.c |   28 +++++++++++++++++++++++++---
 1 file changed, 25 insertions(+), 3 deletions(-)



commit 3b1dd3accd70bb2c430e4f7505a86f7b176dddf0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 12 13:45:17 2005 +0000

    Removed opacity from layer context, using opacity within region config only, fixes missing updates.


 layer_context.c   |    4 ++--
 layers_internal.h |    3 ---
 2 files changed, 2 insertions(+), 5 deletions(-)



commit da974b0cb430b5141c414e21add1b119d8a72bd5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 12 13:39:16 2005 +0000

    Show max. axis and button if appropriate.
    linux_input currently reports wrong values (num-1 instead of the highest one).


 dfbinfo.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit bb4e9d0377ef3eabbbf46ae22f232b8275b42e14
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 12 13:17:37 2005 +0000

    Modify surface's capabalities according to layer options after clearing them (not before!).


 layer_context.c |   13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)



commit 241d650b3f13f7bc58765feb675e98faec1ec3ec
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Apr 9 09:42:58 2005 +0000

    DLOP_OPACITY.


 r200_overlay.c |   88 ++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 54 insertions(+), 34 deletions(-)



commit 19d6e2152b49657c045ad9e5b2a671a698c5c0e2
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Apr 7 13:10:45 2005 +0000

    Sleep while waiting for vertical retrace.


 r200_crtc1.c |   20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)



commit 97efc5f68495a30da5b8321dc4b9d94b7c5a72a7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 7 07:09:30 2005 +0000

    Added DFBAccelerationMask to directfb_strings.h.


 Makefile.am |    3 +++
 1 file changed, 3 insertions(+)



commit f0de4f581629674756c12ee4c78c4b57e04dd063
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 7 06:33:38 2005 +0000

    Added DFBSurfaceDrawingFlags to directfb_strings.h.


 Makefile.am |    3 +++
 1 file changed, 3 insertions(+)



commit 67890d66a5266ea58787a0df069164a8610b30de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 6 21:39:18 2005 +0000

    Replaced driver vendor "convergence integrated media GmbH" by "directfb.org".


 cyber5k/cyber5k.c   |    2 
 matrox/matrox.c     |    4 
 neomagic/neomagic.c |    2 
 nvidia/nvidia.c     |  350 ++++++++++++++++++++++++++--------------------------
 savage/savage.c     |   24 +--
 tdfx/tdfx.c         |    2 
 6 files changed, 192 insertions(+), 192 deletions(-)



commit 30ddbe9d6368a95aa6dd91f2cdcb5571d9fa5574
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 6 20:52:35 2005 +0000

    Replaced IDirectFB::GetCardCapabilities() by GetDeviceDescription()
    and DFBCardCapabilities by DFBGraphicsDeviceDescription which contains
    additional information like device and driver name, version etc.


 include/directfb.h                      |   51 ++++++++++++++++++++++----------
 proxy/dispatcher/idirectfb_dispatcher.c |   24 +++++++--------
 proxy/dispatcher/idirectfb_dispatcher.h |    2 -
 proxy/requestor/idirectfb_requestor.c   |   10 +++---
 src/core/gfxcard.c                      |   29 ++++++++++++++++--
 src/core/gfxcard.h                      |   12 ++++---
 src/idirectfb.c                         |   31 +++++++++++++------
 tools/dfbsummon.c                       |   10 +++---
 8 files changed, 114 insertions(+), 55 deletions(-)



commit 41ed91edb7afeb274d679f120820e589829f0d37
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 6 18:23:48 2005 +0000

    Removed a pre-0.9.0 artifact: CardResult.


 gfxcard.h |    8 --------
 1 file changed, 8 deletions(-)



commit 2563d559165dd9dccbe49e7264e06315a7054ea4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Apr 6 17:50:39 2005 +0000

    Added support for ARGB1555,RGB16,RGB32 and ARGB.


 r200_overlay.c |  127 ++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 73 insertions(+), 54 deletions(-)



commit 3ce4b48b4d6dcb259eace2372ce6783646261bb7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Apr 6 12:35:50 2005 +0000

    ARGB4444 supported as destination format.
    DSBLIT_SRC_PREMULTCOLOR.
    Fiexd overlay coordinates for RV250 and newer (offset x by 8).


 r200.c         |  101 ++++++++++++++++++++++++++++++---------------------
 r200.h         |   13 ++++++
 r200_overlay.c |   32 ++++++++++------
 r200_state.c   |  111 ++++++++++++++++++++++++++++++++++++++-------------------
 r200_state.h   |    5 ++
 5 files changed, 170 insertions(+), 92 deletions(-)



commit 6b7838034a93668e8fe83e1a40f72ad7189e3f33
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 6 05:33:35 2005 +0000

    D_ARRAY_SIZE() is a signed int now (for simplicity).


 util.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 18715d24665697ba1cdf69ba8566b6200830d229
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 5 17:24:56 2005 +0000

    Dropped down RS200/RS250 chipsets (R100 based).
    Added RS300/RS350.


 README |   14 ++++++--------
 r200.c |   20 +++++++++-----------
 2 files changed, 15 insertions(+), 19 deletions(-)



commit a2afb7f3712abfe799389641c9e37db83ed34f02
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 5 10:37:08 2005 +0000

    Still on destination colorkey: green and blue were inverted.


 r200_overlay.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f5c6c9c41902c93c6b8499aa18cbf31a5cccd393
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 5 10:03:28 2005 +0000

    Fixed destination colorkey calculation.


 r200_overlay.c |   68 +++++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 45 insertions(+), 23 deletions(-)



commit a7d313bc62f7c4cbc32c40d8bcfc7711ef2ff7d9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Apr 5 08:56:35 2005 +0000

    Removed DLCAPS_SRC_COLORKEY and DLCAPS_DEINTERLACING, they were tests.


 r200_overlay.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit 3e408bd2ba0b41f377c4aca6b3a9357fb03876e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 5 08:29:33 2005 +0000

    Fixed minor typo (replaced "," by ";" in for statement).


 r200.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 880393adf42681de7c1a2837396f84c2c5eb78d9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Apr 4 20:30:49 2005 +0000

    New driver for ATI Radeon R200 based cards.
    
    Accelerates FillRectangle,FillTriangle,DrawRectangle,DrawLine,
                Blit,StretchBlit,TextureTriangles.
    Supported Drawing Flags: Blend, Xor.
    Supported Blitting Flags: Alphablend, Coloralpha, Colorize.
    
    Supported Destination Formats: A8, RGB332, ARGB1555, RGB16, RGB32, ARGB, YUY2, UYVY.
    Supported Source Formats: A8, RGB332, ARGB4444, ARGB1555, RGB16, RGB32, ARGB, YUY2, UYVY.
    
    Overlay supports YUY2/UYVY/YV12/I420 formats, color adjustments and DST_COLORKEY.


 configure.in                   |   26 
 gfxdrivers/Makefile.am         |   10 
 gfxdrivers/r200/.cvsignore     |    6 
 gfxdrivers/r200/Makefile.am    |   36 
 gfxdrivers/r200/README         |   30 
 gfxdrivers/r200/r200.c         |  957 +++++++++++++
 gfxdrivers/r200/r200.h         |   81 +
 gfxdrivers/r200/r200_crtc1.c   |  166 ++
 gfxdrivers/r200/r200_mmio.h    |  142 ++
 gfxdrivers/r200/r200_overlay.c |  704 ++++++++++
 gfxdrivers/r200/r200_regs.h    | 2843 +++++++++++++++++++++++++++++++++++++++++
 gfxdrivers/r200/r200_state.c   |  560 ++++++++
 gfxdrivers/r200/r200_state.h   |   54 
 13 files changed, 5612 insertions(+), 3 deletions(-)



commit a821c072642d5e859140a6550761eb73f68b60f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 2 21:22:11 2005 +0000

    If the font format is ARGB, use premultiplied font surfaces.
    Extracted common font state code into setup_font_state().


 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   11 +
 src/core/fonts.c                             |   19 +-
 src/core/fonts.h                             |    1 
 src/core/gfxcard.c                           |  176 +++++++++------------------
 wm/default/default.c                         |    2 
 5 files changed, 83 insertions(+), 126 deletions(-)



commit bc1a3eb661a1db8ca9efea45996bf35eb75538e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 1 07:07:10 2005 +0000

    Use DECALDIS for A8 with colorizing though.


 matrox_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5d4f5409ce683ef88fafe25b3a159c11735fff77
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 1 07:00:42 2005 +0000

    Implemented DSBLIT_SRC_PREMULTCOLOR using the Color ALU. If it's already
    used for colorizing, simply modulate the color values with the alpha,
    otherwise overwrite them.
    
    Set DECALDIS if and only if TMODULATE is NOT set.


 matrox.c       |   21 +++++++++++-------
 matrox.h       |   13 ++++++-----
 matrox_state.c |   65 ++++++++++++++++++++++++++++++++++++++++++++-------------
 matrox_state.h |    9 +++++--
 4 files changed, 77 insertions(+), 31 deletions(-)



commit 7a4f301c3be38cb9c512e8c63477b2f21a12fe68
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 21:24:36 2005 +0000

    If the destination has premultiplied alpha do real Porter/Duff SRC_OVER
    composition for glyphs.


 gfxcard.c |   89 +++++++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 68 insertions(+), 21 deletions(-)



commit 6fcbacbae9e210f2ae294b73aaba7b1cd485b430
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 21:10:30 2005 +0000

    Changed Bop_a8_set_alphapixel_Aop_argb() to be a fast path for real SRC_OVER
    DrawString() that uses DSBLIT_SRC_PREMULTIPLY and DSBLIT_BLEND_ALPHACHANNEL
    with SrcBlend = ONE and DstBlend = INVSRCALPHA. Other formats will follow.
    
    Fixed DSDRAW_SRC_PREMULTIPLY if used used without blending.
    
    Implemented DSBLIT_SRC_PREMULTCOLOR.
    
    Added optimization for drawing blended with Src = ONE, Dst = ZERO.


 generic.c |  109 +++++++++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 77 insertions(+), 32 deletions(-)



commit afce0acbceaeb08afdb8deb313b6050a489e8884
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 20:53:11 2005 +0000

    s/0/DSCAPS_NONE/


 display/idirectfbdisplaylayer.c |    2 +-
 idirectfb.c                     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit 8fce05739333086d0300c81733f51234c3ffa68c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 14:05:43 2005 +0000

    Take over DSCAPS_PREMULTIPLIED from the configuration.


 fbdev.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 25dde4b7ecd26d7268184a3a3de1c60a58211cbb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 14:04:22 2005 +0000

    Use DLCONF_SURFACE_CAPS if DSCAPS_PREMULTIPLIED is
    requested for a fullscreen primary.


 idirectfb.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 5981ec02e12d608029257d95c1d13cc22f76830b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 13:24:37 2005 +0000

    Implement window opacity (Ac) for premultiplied windows
    by using DSBLIT_SRC_PREMULTCOLOR.


 default.c |   20 +++++++++-----------
 1 file changed, 9 insertions(+), 11 deletions(-)



commit 349072fb98934ce246f7624b6a45b28cf439c4b7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 13:21:52 2005 +0000

    Added DSBLIT_SRC_PREMULTCOLOR which modulates the source color with the
    color alpha value only.


 directfb.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit a9ea5dacf7a8a1f443e80fbf30b4e941bcdef4f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 08:58:31 2005 +0000

    Changed an assertion in _fusion_reactor_process_message() to an assumption for now.


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c1dde73d573555705119fd170174dc583b232e20
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 08:53:56 2005 +0000

    Added D_MAGIC_ASSUME.


 debug.h |    6 ++++++
 1 file changed, 6 insertions(+)



commit 3742de423610c8c436d6904db29ac3c79b401648
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 08:26:52 2005 +0000

    Added notes about the coefficient 'Ac' not always working properly, yet.


 default.c |   13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)



commit 24178e5190498d0e1fc89894623a90af400a1fb3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 07:45:42 2005 +0000

    Support premultiplied cursor shapes.


 windowstack.c |    2 ++
 1 file changed, 2 insertions(+)



commit 07c2da34296a12adc33fe89d5f20348487534579
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 31 07:43:13 2005 +0000

    Show 'premultiplied' surface capability.


 dfbdump.c |    3 +++
 1 file changed, 3 insertions(+)



commit 08b853e5cec53d1081702cdf879be8d976f65c8b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 30 16:31:47 2005 +0000

    Fixed recent 24bit fix. Maybe the patch applied at the wrong offset?


 surfaces.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 5cc35122fda7bccfb294948ecc8ce308254c1ae3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 30 15:56:24 2005 +0000

    reverted (wrong file commited)


 generic.c |   41 +++++++++++++++++++++--------------------
 1 file changed, 21 insertions(+), 20 deletions(-)



commit a06091abaae11be3cf935aabc1a2a89d2859c808
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 30 15:54:45 2005 +0000

    Premultiply image data when loading into premultiplied alpha surfaces.


 gfx/generic/generic.c |   41 ++++++++++++++++++--------------------
 misc/gfx_util.c       |   53 +++++++++++++++++++++++++++-----------------------
 2 files changed, 49 insertions(+), 45 deletions(-)



commit 9434edc4676c577286f2cfa105c96b78bd49da60
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 30 12:39:16 2005 +0000

    Handle (non)premultiplied window and layer surfaces.
    Always use compliant Porter/Duff SRC_OVER.
    
    Different compositing methods are used depending on the destination format.
    
    
    DESTINATION WITH ALPHA
    
    /*
    Cd = destination color  (non-premultiplied)
    Ad = destination alpha
    
    Cs = source color       (non-premultiplied)
    As = source alpha
    
    Ac = color alpha
    
    cd = Cd * Ad            (premultiply destination)
    cs = Cs * As            (premultiply source)
    
    The full equation to calculate resulting color and alpha (premultiplied):
    
    cx = cd * (1-As*Ac) + cs * Ac
    ax = Ad * (1-As*Ac) + As * Ac
    */
    
    dfb_state_set_src_blend( state, DSBF_ONE );
    
    /* Need to premultiply source? */
    if (! (window->surface->caps & DSCAPS_PREMULTIPLIED))
    .     flags |= DSBLIT_SRC_PREMULTIPLY;
    
    /* Need to premultiply/demultiply destination? */
    if (! (state->destination->caps & DSCAPS_PREMULTIPLIED))
    .     flags |= DSBLIT_DST_PREMULTIPLY | DSBLIT_DEMULTIPLY;
    
    
    DESTINATION WITHOUT ALPHA
    
    /*
    We can avoid DSBLIT_SRC_PREMULTIPLY for destinations without an alpha channel
    by using another blending function, which is more likely that it's accelerated
    than premultiplication at this point in time.
    
    This way the resulting alpha (ax) doesn't comply with SRC_OVER,
    but as the destination doesn't have an alpha channel it's no problem.
    
    As the destination's alpha value is always 1.0 there's no need for
    premultiplication. The resulting alpha value will also be 1.0 without
    exceptions, therefore no need for demultiplication.
    
    cx = Cd * (1-As*Ac) + Cs * As*Ac  (still same effect as above)
    ax = Ad * (1-As*Ac) + As * As*Ac  (wrong, but discarded anyways)
    */
    
    if (window->surface->caps & DSCAPS_PREMULTIPLIED)
    .     dfb_state_set_src_blend( state, DSBF_ONE );
    else
    .     dfb_state_set_src_blend( state, DSBF_SRCALPHA );


 default.c |   56 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 56 insertions(+)



commit 3ae97148f35c2c7b1b17227e4de5a779cfa96931
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 29 11:11:23 2005 +0000

    Added dfb_gfxcard_invalidate_state() which sets the state pointer to NULL
    and therefore forces a full SetState() before the next operation is executed.


 gfxcard.c |    8 ++++++++
 gfxcard.h |    1 +
 2 files changed, 9 insertions(+)



commit 172da343256298842822cf5271e96712728e1ef2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 29 10:42:16 2005 +0000

    Fixed plane multiplier of NV16.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 236c0f4c2f7bf60392a757c05d43388fcb22ef85
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 27 19:33:45 2005 +0000

    Added DirectFBSurfaceBlittingFlagsNames.


 Makefile.am |    3 +++
 1 file changed, 3 insertions(+)



commit 83b29735dff50a759a274f6cb55eb1a8e16c445c
Author: Marcel Siegert <mws@directfb.org>
Date:   Sun Mar 20 20:21:01 2005 +0000

    build fix for default wm
    __u8 p was declared at wrong place;


 default.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 0a4827266e63816c853634b3c1e7873aee7fc4e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 20 13:08:04 2005 +0000

    Applied patch from Mark Salter <msalter@redhat.com> to fix 24bit support
    on big endian platforms. Thanks!


 README               |    1 +
 src/core/surfaces.c  |    6 ++++++
 src/misc/gfx_util.c  |    6 ++++++
 wm/default/default.c |   12 ++++++++----
 4 files changed, 21 insertions(+), 4 deletions(-)



commit a3b664abec79c239ba78a7e1b6c65a2454dd777f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 20 13:02:51 2005 +0000

    Applied patch from Ivan Daniluk <ivan@shvydko.ua>:
    
    Hi!
    Recently I've got strange behavior with MuTouch input. The trouble was in
    packet reading routine - in some cases(very fast touch-untouch) packet was
    read in two passes and was interpeted as two events with wrong coordinates.
    In attached patch I've added filling packet with data until it's size grows to
    desired packet size.
    As well, added syncronization check for each packet - it will prevent some
    weird situations on misconfigured devices.
    
    Cheers,
    --
    Ivan Daniluk


 mutouch.c |   16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)



commit 7f042827957f8ee4f17b768d6a49bc0c868e10ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 20 12:59:49 2005 +0000

    Maximum number of simultaneously pressed keys increased from 8 to 16.
    
    Thanks to Ivan Daniluk <ivan@shvydko.ua>.


 README               |    1 +
 wm/default/default.c |   16 +++++++++-------
 2 files changed, 10 insertions(+), 7 deletions(-)



commit 17894090d21ffcba620c4bf28b334ea56ec37d97
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 20 12:58:34 2005 +0000

    Use D_DEBUG_AT.


 core.c |   18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)



commit 6be13f5c78a9d646642585d78cb85474001a1d2e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 18 23:33:01 2005 +0000

    TODO
    
    Move config system to libdirect with more features.
    
    Write well documented driver skeletons.
    
    Add core cursor component with animated shape support and better integrated
    changes caused by entering different windows.


 TODO |    7 +++++++
 1 file changed, 7 insertions(+)



commit 3b32a47605451693ea0b5b4bd81210de9f954dec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 18 23:30:31 2005 +0000

    Hotfix to show the cursor after entering a window with a cursor that is made
    invisible by another application.


 idirectfbwindow.c |    2 ++
 1 file changed, 2 insertions(+)



commit aa1a1b12f2171d5bf8c0686a36d5f1f1f00c6b99
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 17 10:28:40 2005 +0000

    Allow predefinition of FREETYPE_CFLAGS and FREETYPE_LIBS outside of configure.


 configure.in |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit c677d13005edbfcb3036cd7ccbc4a1bb9e87a0d7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Mar 12 09:49:41 2005 +0000

    Added macros to convert ARGB1555,RGB16,RGB32 to ARGB2554,ARGB4444.


 convert.h |   28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)



commit 0ba7ce64a05cbf8ef5521d928665d8f2232b3d21
Author: Mike Emmel <memmel@directfb.org>
Date:   Thu Mar 10 17:43:37 2005 +0000

    Hide the SDL cursor so DirectFB one shows


 primary.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit e11edb46b9308e4adfdba94b05114cd10e76c2fd
Author: Mike Emmel <memmel@directfb.org>
Date:   Wed Mar 9 17:57:39 2005 +0000

    Added support for fake scancodes this needs to probably move to a more generic layer so it can be used by backends that don't provide scancodes.


 sdlinput.c |  197 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 194 insertions(+), 3 deletions(-)



commit 41d3c4d990b121f04aeecb61d1b7438b5185fcbd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 9 15:21:55 2005 +0000

    Build driver only if FB_ACCEL_I830 is defined in <linux/fb.h>.
    
    Probe for FB_ACCEL_I830 in the driver.


 configure.in           |    4 ++--
 gfxdrivers/i830/i830.c |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit d4c0b18ccae20b075efe11cbcc970588177ec176
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Mar 9 10:38:38 2005 +0000

    Made the driver work with the new nvidiafb framebuffer driver.
    StretchBlit() on A8,LUT8,RGB332 (>= NV20).


 nvidia.c         |  120 +++++++++++++++++++++++++++++++++++++++++++------------
 nvidia.h         |    9 +++-
 nvidia_overlay.c |    5 --
 3 files changed, 104 insertions(+), 30 deletions(-)



commit 4a48af0d9fae66b86b47a723b39704f8f735c209
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 7 21:45:46 2005 +0000

    Cosmetics.


 mmio.h |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit abb420e29a0f063d3ced3c78ed9d1f26f411878f
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 7 21:37:49 2005 +0000

    Some mach64_waitfifo() calls were missing.


 mach64.c |    4 ++++
 1 file changed, 4 insertions(+)



commit df07da0371b6a4ebc2a8cbbb9a6254a6b57d896c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 7 21:34:15 2005 +0000

    Reset HW_DEBUG in EngineReset().


 mach64.c |   19 ++++++++++---------
 mach64.h |    1 +
 2 files changed, 11 insertions(+), 9 deletions(-)



commit 29aba4d3d46d404803741113392387735c1b00a9
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 7 21:25:23 2005 +0000

    Reset otherwise unused registers in SetRegion() when CLRCF_ALL is set instead of InitLayer().


 mach64_overlay.c |   45 ++++++++++++++++++++++++++++-----------------
 1 file changed, 28 insertions(+), 17 deletions(-)



commit 4188f67e31d54c46f03c1759422639302d96a75b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Mar 4 14:25:56 2005 +0000

    FillRectangle(),DrawRectangle(),FillTriangle(),DrawLine(),Blit() on LUT8,RGB332 and A8.
    StretchBlit(),TextureTriangles(),[DrawString()],Alphablend and Colorize from A8 (>= NV10).
    Alphachannel blend for ARGB1555.


 nvidia.c    |  611 ++++++++++++++++++++++++++++++++++++++++++++++++++----------
 nvidia_3d.c |   48 ++--
 2 files changed, 544 insertions(+), 115 deletions(-)



commit 02702315c30b0e29a450d1a6c82a9b220a7484d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 4 13:34:46 2005 +0000

    Implemented destination color keying.


 i810_overlay.c |   22 +++++++++++++++++++++-
 1 file changed, 21 insertions(+), 1 deletion(-)



commit 3ea54379117258e7781f218b7aa965fac848bc3a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 3 17:33:24 2005 +0000

    Fixed AltGr.


 linux_input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 65aca601076923a8f217664eb486c165dd1372ee
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Mar 3 11:07:00 2005 +0000

    Always use alphamode = ALPHACHANNEL.


 matrox_state.c |   18 +++++-------------
 1 file changed, 5 insertions(+), 13 deletions(-)



commit b97fd4a79e6948bf83d3f28a23e82e0fa42dea3b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Mar 2 23:36:17 2005 +0000

    Don't care about LOG_MAX_INC.


 mach64.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit 8f0f3e61c75b11a8c012985ebfaf01c8706a5636
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Mar 2 21:10:49 2005 +0000

    Fixed pixelformat=NV21 option.


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fad49386821bc431bc960e8f6571f9cce0b1a35c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Mar 2 21:02:57 2005 +0000

    Fixed inverted YV12 colors.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6440e30ed0457e09fdd8d20ac00ff562a5ad0193
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 2 12:45:57 2005 +0000

    Keep the original display offset if no mode has been set,
    e.g. just running "dfbinfo".


 fbdev.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 73b9b419dbe9967fc982008aa38a386c4b12a089
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 2 12:42:16 2005 +0000

    When restoring the video mode during shutdown, set xoffset and yoffset to 0.
    
    This fixes wrong scroll offset after quitting a DirectFB master started as
    a normal user from a console.


 fbdev.c |    3 +++
 1 file changed, 3 insertions(+)



commit fd83d2275755b7b9272f6c390ca73d89faeb0dc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 2 12:36:24 2005 +0000

    Improved description of required permissions to devices etc.


 README |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit 8a0bc0d96394f13d0ba78edd3c5d8e3b67419349
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 1 15:53:42 2005 +0000

    Big acceleration code update:
    - Scaler/3D acceleration now works on older GT chips. Tested on Rage II+
      and IIC.
    - Splitted SetState() to GX/CT/VT and GT variants.
    - Added scaler source size check. Limits found empirically.
    - Removed explicit fast fill/block write code. Use the automatic feature
      found in 3D Rage Pro and newer chips instead.
    - ARGB4444 support for GT chips.


 mach64.c       |  671 ++++++++++++++++++++++++++++++++++++++++++++-------------
 mach64.h       |   38 ++-
 mach64_state.c |  282 ++++++++++++++++++-----
 mach64_state.h |    9 
 4 files changed, 785 insertions(+), 215 deletions(-)



commit b9311e7a29e8ea613bf87d67cacc4459ba5be555
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 1 15:49:47 2005 +0000

    Big overlay code update:
    - 3D Rage and 264VT(2) apparently have somewhat different overlay/scaler
      registers. Details were taken from the XFree86 ati driver.
    - Improved surface size and format limitations. Limits were found
      empirically and since I don't have every mach64 chip in existence some
      limits may still be wrong.
    - Take ECP (scaler/overlay clock) diviver into account in horizontal
      scaling.
    - Added support for doublescanned and interlaced display modes.
    - Check updated flags in SetRegion() and try to update only the
      necessary registers.
    - Don't advertise DCAF_BRIGHTNESS and DCAF_SATURATION on older chips.
    - Added support for DLOP_DEINTERLACING.


 mach64_overlay.c |  477 +++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 329 insertions(+), 148 deletions(-)



commit 18fd75329b1eed28a7d48b0fc7f1ffa5936cd9d3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 1 15:46:01 2005 +0000

    Made LCD register access work on 3D Rage LT.


 mach64_overlay.c |    5 +++--
 mmio.h           |   36 ++++++++++++++++++++++++++++++------
 2 files changed, 33 insertions(+), 8 deletions(-)



commit 6cc9ffff512c32b84fe3198b26e6d4a86431b8e6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 1 15:44:50 2005 +0000

    Improved chip type detection.


 mach64.c         |  156 +++++++++++++++++++++++++++++++++++++++++++++----------
 mach64.h         |   18 +++++-
 mach64_overlay.c |    6 +-
 3 files changed, 150 insertions(+), 30 deletions(-)



commit 52321fdf56ba0c4c877ef8317b61e707f82fb2b1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 1 15:42:55 2005 +0000

    Cleaned up register definitions and added all known register names.


 mach64.c         |   51 +--
 mach64_overlay.c |   23 -
 mach64_state.c   |   14 
 mmio.h           |   22 +
 regs.h           |  785 +++++++++++++++++++++++++++++++++++++++++--------------
 5 files changed, 654 insertions(+), 241 deletions(-)



commit a8024d861d8cfad53c5c933064c14a74204357b6
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 28 10:31:44 2005 +0000

    Added support for system to video memory blits.
    Improved TextureTriangles() performance.
    NV30 supports StretchBlit(), blit with format conversion, alphablend and colorize.
    Switch to version 0.4.


 b/gfxdrivers/nvidia/Makefile.am      |    1 
 b/gfxdrivers/nvidia/nvidia.c         |  775 ++++++++++++++++++++---------------
 b/gfxdrivers/nvidia/nvidia.h         |  150 ++++--
 b/gfxdrivers/nvidia/nvidia_2d.c      |  329 +++++++++-----
 b/gfxdrivers/nvidia/nvidia_2d.h      |   10 
 b/gfxdrivers/nvidia/nvidia_3d.c      |   44 +
 b/gfxdrivers/nvidia/nvidia_3d.h      |    2 
 b/gfxdrivers/nvidia/nvidia_mmio.h    |    2 
 b/gfxdrivers/nvidia/nvidia_overlay.c |   74 +--
 b/gfxdrivers/nvidia/nvidia_primary.c |   13 
 gfxdrivers/nvidia/nvidia_tables.h    |  252 -----------
 11 files changed, 868 insertions(+), 784 deletions(-)



commit d4e3db4fdcec5ac5098a5766c93e40473a799969
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 28 10:26:14 2005 +0000

    Added support for system to video memory blits in hardware.


 gfxcard.c  |    2 +-
 gfxcard.h  |    5 +++--
 surfaces.c |    4 ++--
 3 files changed, 6 insertions(+), 5 deletions(-)



commit fa6d3ad547ea5bf6d69144310b962e0522545eb9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 28 09:47:07 2005 +0000

    0.9.23 /o\


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 54719ef051990718ddb5b002d38a49cf338d6588
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 28 09:40:58 2005 +0000

    Added IDirectFBSurface::DisableAcceleration( DFBAccelerationMask mask ):
    
    If any function in the mask is set, acceleration will not be used for it.
    Default is DFXL_NONE.
    
    
    Added D_FLAGS_INVALID to check if a flag set contains invalid flags.


 include/directfb.h             |   11 +++++++++++
 lib/direct/util.h              |    1 +
 src/core/gfxcard.c             |   15 +++++++++++++++
 src/core/state.h               |    1 +
 src/display/idirectfbsurface.c |   15 +++++++++++++++
 5 files changed, 43 insertions(+)



commit c77446ff9485e5aec0f0acd15f58a63225420b4b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 28 09:11:59 2005 +0000

    Fixed D_FLAGS_ARE_IN.


 util.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f30c82bc7f789121f7041fe54a0c721edae33d93
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 27 18:43:52 2005 +0000

    Added DLCAPS_LEVEL to layer capabilities,
    thanks to Stefan Lucke <stefan@lucke.in-berlin.de>.


 uc_overlay.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e630e09d4d858f11cc5ceca7ad595f2b4a415481
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Feb 27 17:49:44 2005 +0000

    Updated to linux 2.6.10.


 rivafb-nv2030fix-2.6.10.patch.bz2 |binary
 1 file changed



commit 3cc3d7af1229362fe15be04e9b746fc10ec17c59
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Feb 27 12:13:38 2005 +0000

    Updated patch.
    Fixed NV30 initialization.


 /dev/null                                  |binary
 b/patches/rivafb-nv2030fix-2.6.9.patch.bz2 |binary
 2 files changed



commit 42327305b6ce45781f50c1de139c455ce237554d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Feb 27 10:57:01 2005 +0000

    Made DIKS_PRINT work.


 linux_input.c |    3 +++
 1 file changed, 3 insertions(+)



commit a72ec467bf90d01037fd39a2973e130b188aae17
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Feb 27 10:43:44 2005 +0000

    Don't try to use already grabbed devices.


 linux_input.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit bf9f78dd373dfdafcc84ee9bef93505085adc53f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 24 14:52:00 2005 +0000

    Remove directfb_keynames.h and directfb_strings.h during "make fistclean".


 Makefile.am |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 8d9e4b13fd5fd33d2de5ace53d4c41857db0e7c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 24 14:35:30 2005 +0000

    Put all builddir includes in front of the srcdir includes.
    
    Still need to know if something like EXTRA_NODIST exists.


 Makefile.am             |    4 ++--
 display/Makefile.am     |    7 ++++---
 gfx/Makefile.am         |    7 ++++---
 gfx/generic/Makefile.am |    7 ++++---
 input/Makefile.am       |    7 ++++---
 media/Makefile.am       |    7 ++++---
 misc/Makefile.am        |    7 ++++---
 windows/Makefile.am     |    7 ++++---
 8 files changed, 30 insertions(+), 23 deletions(-)



commit da4f0a83a314bafd31de8427f08406281edcd017
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 24 14:13:11 2005 +0000

    Use "$(top_srcdir)/include/" prefix to file argument of mknames.sh.
    
    Thanks to LUDER Jacques <JACQUES.LUDER@THALES-TRANSPORTSERVICES.COM>.


 Makefile.am |   39 ++++++++++++++++++++-------------------
 1 file changed, 20 insertions(+), 19 deletions(-)



commit e33942c6deb94c490914593d362dda87cbef15e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 24 14:05:05 2005 +0000

    Summarized changes for 0.9.22 and generated new ChangeLog.


 ChangeLog | 1204 +++++++++++++++++++++++++++++++++++---------------------------
 NEWS      |  154 +++++++
 2 files changed, 850 insertions(+), 508 deletions(-)



commit 086837c7119bc3650dcb6b122da593808d853fe8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 24 14:03:44 2005 +0000

    Fixed EXTRA_DIST.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 073536ce77de3eedebd66d52b41346c958f900c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 23 12:24:15 2005 +0000

    Show the correct device in error messages.


 h3600_ts.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 9b5dad02d6fae560a2e7b9f746a7c9120ae915fc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 23 10:57:33 2005 +0000

    Added option "h3600-device", keeping the default of "/dev/ts".
    
    Added option "mut-device" which must be used to enable the driver.


 inputdrivers/h3600_ts/h3600_ts.c |    4 ++--
 inputdrivers/mutouch/mutouch.c   |   10 ++++++----
 src/misc/conf.c                  |   26 ++++++++++++++++++++++++++
 src/misc/conf.h                  |    4 ++++
 4 files changed, 38 insertions(+), 6 deletions(-)



commit 1c04008cf36c0689fe4ce15f745c3f6489302e3c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 23 10:09:20 2005 +0000

    Put this around bool enum declaration instead of #ifndef __cplusplus:
    
    #if !defined(__cplusplus) && !defined(__bool_true_false_are_defined)


 types.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3363495835d87a1316d6bbd23a797b5276d8dc28
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 23 10:06:14 2005 +0000

    Restore color adjustment when (re)activating a context.


 layer_context.c |   15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)



commit 33286a9809a0b41bf2c92df8dae4bea6300148c7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 22 14:13:32 2005 +0000

    Swap video buffers in single buffermode, too.


 nvidia_overlay.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 583bbb005a3a321a7cea9eece0e804a15503f4f1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 22 14:12:49 2005 +0000

    Activate the most recent context instead of the primary context when the current context is removed.


 layer_control.c |    8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)



commit b3d08c2d1edc7138b92b2debabb2dacaee6ee872
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 22 12:57:05 2005 +0000

    Added IDirectFBDisplayLayer::SetScreenRectangle().
    
    Rearranged some function pointers in IDirectFBDisplayLayer.


 include/directfb.h                  |  209 +++++++++++++++++++-----------------
 src/core/layer_context.c            |   42 +++++++
 src/core/layer_context.h            |    3 
 src/display/idirectfbdisplaylayer.c |   56 ++++++---
 4 files changed, 197 insertions(+), 113 deletions(-)



commit 2630f8fee3791fe334322ade26f96c1c873843ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 22 12:28:39 2005 +0000

    Added DSECAPS_BRIGHTNESS, DSECAPS_CONTRAST, DSECAPS_HUE, DSECAPS_SATURATION.
    
    Added DSECONF_ADJUSTMENT to DFBScreenEncoderConfigFlags.
    Added 'DFBColorAdjustment adjustment' to DFBScreenEncoderConfig.


 include/directfb.h            |   14 ++++++++++++--
 src/display/idirectfbscreen.c |    3 +++
 2 files changed, 15 insertions(+), 2 deletions(-)



commit bc1710e8b12c7ad14e723e81a3cb4a92f5837668
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 22 12:26:05 2005 +0000

    Check capabilities in SetScreenLocation(), SetScreenPosition() and SetLevel().


 idirectfbdisplaylayer.c |   11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)



commit c4e04163827fff873a12604f34e3aba023343312
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 22 11:40:34 2005 +0000

    Do not round up X coordinate for 422 formats.


 nvidia_2d.c |   32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)



commit ac35fd91cc772169109e54502c5a333e07876d3c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 22 11:31:27 2005 +0000

    Fixed DLCAPS_ALL.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 244e11fced4d3996f6b45bf9bb7008fe6fc833a0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 22 09:53:08 2005 +0000

    YUY2/UYVY FillRectangle(), Blit() and StretchBlit().


 matrox.c       |  136 +++++++++++++++++++++++++++++++++++++++++++++++++--------
 matrox.h       |    2 
 matrox_state.c |   40 +++++++++++++++-
 3 files changed, 158 insertions(+), 20 deletions(-)



commit 87c020414496a5727e484b9055657b1a40b17af7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 21 21:07:03 2005 +0000

    Removed DrawRectangle(),FillTriangle(),DrawLine() for YUY2/UYVY (don't work properly).
    Added an hack to do StretchBlit() on YUV422 (result is almost acceptable).


 nvidia.c    |   76 +++++++++++++++++++++++++++++++++++++++++-------------------
 nvidia.h    |    3 +-
 nvidia_2d.c |   57 ++++++++++++++++++++++++++++++++++-----------
 3 files changed, 98 insertions(+), 38 deletions(-)



commit a4a8f50ac360a9666a89d65e0c4614fc3627b30d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 21 13:36:36 2005 +0000

    Implemented hw window resizing.


 default.c |   32 ++++++++++++++++++++++++--------
 1 file changed, 24 insertions(+), 8 deletions(-)



commit 338a7e914999c16669ccfb80b4506dbc6e74acb1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 21 12:06:30 2005 +0000

    Propagate error to application if window movement failed.


 default.c |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)



commit 9913d1eb31b8b8562bf544ac8151fce835379174
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 21 11:36:01 2005 +0000

    Handle error if dfb_layer_region_set_configuration() failed to move a hw window.


 default.c |   12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)



commit 9137fccebf1fdb3afb3555c97dd815ad6fef612e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 21 09:10:25 2005 +0000

    No longer return a surface stored in system memory for YUY2 and UYVY;
    return directly the video surface instead


 nvidia_overlay.c |  323 ++++++++++++++++++++++++-------------------------------
 1 file changed, 146 insertions(+), 177 deletions(-)



commit 12d9d6dbc6e30545bf2b8035b937051694ac1788
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 21 09:08:56 2005 +0000

    Added FillRectangle(),DrawRectangle(),FillTriangle(),DrawLine(),Blit()
    (without effects) for YUY2 and UYVY.


 nvidia.c |   64 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 63 insertions(+), 1 deletion(-)



commit f510b808528b4184031b69927a87e38c36abf8c0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Feb 21 09:07:09 2005 +0000

    Optimized Bop_yuy2_Sto_Aop() and Bop_uyvy_Sto_Aop().


 generic.c |   36 ++++++++++++++++--------------------
 1 file changed, 16 insertions(+), 20 deletions(-)



commit 8b79c24cc4b81dc53e562f81399d328bfa71f9b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 21 00:22:05 2005 +0000

    Added DLCAPS_SCREEN_POSITION and DLCAPS_SCREEN_SIZE.
    These are set if DLCAPS_SCREEN_LOCATION is set and vice versa.
    
    Unscalable layers just have DLCAPS_SCREEN_POSITION.
    
    
    Store normalized and pixel based destination area
    in a layer context.
    
    Added CoreLayerLayoutMode which defines incorporation of
    configuration based size changes and destination area values.
    
    +     CLLM_LOCATION,      /* Keep normalized area. */
    +     CLLM_CENTER,        /* Center layer after resizing destination area. */
    +     CLLM_POSITION,      /* Keep pixel position, but resize area. */
    +     CLLM_RECTANGLE      /* Keep pixel based area. */
    
    
    Default for layers with DLCAPS_SCREEN_POSITION only is CENTER,
    otherwise it's LOCATION.
    
    After calling SetScreenPosition(), mode is POSITION.
    
    After calling SetScreenLocation(), mode is LOCATION.
    
    
    Moved core abi definition to header file.


 ChangeLog                  |   75 +++++++++++++++++++++++++++++++++++++++++++++
 include/directfb.h         |    3 +
 src/core/core.c            |    2 -
 src/core/core.h            |    4 ++
 src/core/layer_context.c   |   56 ++++++++++++++++++++++++---------
 src/core/layers.c          |    7 ++++
 src/core/layers_internal.h |   14 +++++++-
 tools/dfbdump.c            |    6 +--
 8 files changed, 145 insertions(+), 22 deletions(-)



commit e2b17de96abd7eb75375f10b07774d2653de1d6e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 22:08:39 2005 +0000

    - Dropped I420/YV12 support for old chips.
    - NV12/NV21 Blit() for >= G200.
    - NV12/NV21 StretchBlit() for >= G400.
    - Accelerated I420/YV12/NV12/NV21 FillRectangle().
    - Separated all planar stuff to their own functions.
    - Tried to make CheckState() functions a bit better looking.


 matrox.c       |  667 ++++++++++++++++++++++++++++++++++++++++-----------------
 matrox.h       |   10 
 matrox_state.c |  134 +++++++----
 regs.h         |    5 
 4 files changed, 558 insertions(+), 258 deletions(-)



commit 7e91278bbade3d3519ce180c79d36442045bd847
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 15:39:13 2005 +0000

    - Defined constants for CRTC2 register values.
    - Alpha ramp support for CRTC2.
    - Added support for progressive chroma on CRTC2.
    - Added support for progressive half-height sub-picture.


 matrox_crtc2.c |  194 +++++++++++++++++++++++++--------------------------------
 matrox_spic.c  |   99 +++++++++++++----------------
 regs.h         |   76 ++++++++++++++++++++++
 3 files changed, 208 insertions(+), 161 deletions(-)



commit 8791331bdb4d1bfc72caf26f86ea29583ee3c6f6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 15:25:26 2005 +0000

    Cosmetics.


 matrox_maven.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 5d4d46263f1ecb76f63bda2a27f336284791a2ea
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 15:22:33 2005 +0000

    Added comment about flicker filter not working.


 matrox_maven.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit f69791a8182d9d74462d8b74fcdb3f571cc83108
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 13:33:56 2005 +0000

    init_region_config() forgot to initialize surface_caps.


 layer_context.c |   13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)



commit 60f105be89e2a28314df9306c96791e9999ecea2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 18 06:45:48 2005 +0000

    Replaced argb-font and a1-font options with a more flexible font-format option.


 gfxdrivers/mach64/mach64.c                       |    3 -
 gfxdrivers/matrox/matrox.c                       |    3 -
 interfaces/IDirectFBFont/idirectfbfont_default.c |   37 +++++++++++++-
 interfaces/IDirectFBFont/idirectfbfont_ft2.c     |   58 ++++++++++++++++++----
 src/core/fonts.c                                 |    3 -
 src/misc/conf.c                                  |   60 ++++++++++++++++-------
 src/misc/conf.h                                  |    9 ---
 7 files changed, 134 insertions(+), 39 deletions(-)



commit d14a396442960d201c97f50a7aa21c52aff99a8b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 17 12:59:10 2005 +0000

    Added IDirectFBSurface::FillRectangles().
    
    Generated new ChangeLog.


 ChangeLog                      |  940 +++++++++++++++++++++++++++++++++++++++++
 include/directfb.h             |   20 
 src/display/idirectfbsurface.c |  130 +++--
 3 files changed, 1047 insertions(+), 43 deletions(-)



commit f9790702e9e429b27f3fe22156253420ee0b7e69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 17 10:12:48 2005 +0000

    Take the largest one, if multiple tmpfs are found!


 shmalloc.c |   30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)



commit 2c6c2130401cca7230e8ea17ed74c677ad14e90f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 17 09:28:23 2005 +0000

    More than two months ago I made this progress with Unique. I wanted to make
    it usable again before commiting, but I think it's better not to wait any
    longer ;)
    
    These tons of changes are mostly implementation of things described in IDEAS.


 docs/ReferenceMaps.txt       |    4 
 wm/unique/.cvsignore         |    1 
 wm/unique/IDEAS              |    3 
 wm/unique/Makefile.am        |   13 
 wm/unique/classes/foo.c      |   43 ++
 wm/unique/classes/window.c   |   28 +
 wm/unique/context.c          |  910 ++-----------------------------------------
 wm/unique/context.h          |   20 
 wm/unique/device.c           |  119 ++++-
 wm/unique/device.h           |   63 ++
 wm/unique/devices/keyboard.c |  113 ++++-
 wm/unique/devices/pointer.c  |  194 ++++++++-
 wm/unique/devices/wheel.c    |  101 ++++
 wm/unique/input_channel.c    |  195 +++++++++
 wm/unique/input_channel.h    |   72 +++
 wm/unique/input_events.h     |   25 +
 wm/unique/input_switch.c     |  517 ++++++++++++++++++++++++
 wm/unique/input_switch.h     |   43 +-
 wm/unique/internal.h         |  111 ++---
 wm/unique/stret.c            |   26 +
 wm/unique/stret.h            |  118 +++--
 wm/unique/test_foo.c         |  225 ++++++++++
 wm/unique/types.h            |    2 
 wm/unique/unique.c           |   10 
 wm/unique/window.c           |  670 ++++++++++++++++++-------------
 25 files changed, 2263 insertions(+), 1363 deletions(-)



commit 822d8f25a03e7cb3d7e5df3468e6e873544f3e67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 17 09:09:27 2005 +0000

    Work around compiler error when building with trace support (gcc 3.3.5):
    
    generic_mmx.h: In function `Sop_argb_Sto_Dacc_MMX':
    generic_mmx.h:172: error: can't find a register in class `GENERAL_REGS' while reloading `asm'
    
    Added "__attribute__((no_instrument_function))" to that function.
    
    IIRC it didn't work with 3.4 or others.


 generic_mmx.h |    1 +
 1 file changed, 1 insertion(+)



commit 779679d4a12bcafc51d8d774ddc57e5056159519
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 17 08:47:48 2005 +0000

    Make "graphics-vt" the default.


 conf.c |    1 +
 1 file changed, 1 insertion(+)



commit fba207430411bfccf9c2b9e6d84c07bc94fa7ff9
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 17 02:10:04 2005 +0000

    dfb_surface_reconfig() was still leaking video memory via depth buffer.


 surfaces.c |   10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)



commit fabf5c26350b175f9b4754210757db7d7ef11f6a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Feb 16 08:45:31 2005 +0000

    Fixed YUV422 handling on big-endian architectures.


 convert.h         |   15 ++
 generic/generic.c |  332 +++++++++++++++++++++++++++++++++---------------------
 2 files changed, 218 insertions(+), 129 deletions(-)



commit 4ba580227b8457295bd2a704326771727c57fc49
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 15 09:16:03 2005 +0000

    Removed macro ARGB_TO_ARGB4444.


 nvidia_3d.c |    4 ----
 1 file changed, 4 deletions(-)



commit e11271add05790ad7c11c8f64bb0011b9680b17c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Feb 15 09:14:48 2005 +0000

    Fixed bug in Sop_yuy2_to_Dacc_MMX and Sop_uyvy_to_Dacc_MMX:
    forgot to check if counter is zero.


 generic_mmx.h |   14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)



commit b3c480ae69985e965e6a95d9fa6963e143864ada
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 15 08:31:02 2005 +0000

    Added DLCAPS_PREMULTIPLIED indicating that a display layer
    can display surfaces with premultiplied alpha.
    
    Added DSCAPS_PREMULTIPLIED indicating that the surface has premultiplied alpha.
    
    Added DLCONF_SURFACE_CAPS and field 'surface_caps' to DFBDisplayLayerConfig
    to specify any combination of the flags: DSCAPS_INTERLACED, DSCAPS_SEPARATED
    or DSCAPS_PREMULTIPLIED.
    
    Added CLRCF_SURFACE_CAPS and field 'surface_caps' to CoreLayerRegionConfig in
    the display layer driver API.
    
    HW Windows created with DWDESC_SURFACE_CAPS and DSCAPS_PREMULTIPLIED
    in 'desc.surface_caps' are created as premultiplied layer regions.


 include/directfb.h       |   93 ++++++++++++++++++++++-------------------------
 src/core/core.c          |    2 -
 src/core/gfxcard.h       |    2 -
 src/core/layer_context.c |   29 ++++++++++++++
 src/core/layer_region.c  |    3 +
 src/core/layers.h        |   39 ++++++++++---------
 src/core/windows.c       |    7 ++-
 7 files changed, 103 insertions(+), 72 deletions(-)



commit 45b4f6a01032b5716f49e3fe3e77e27c5d8cfd4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 15 08:21:40 2005 +0000

    Implemented BatchBlit() on both sides.


 dispatcher/idirectfbsurface_dispatcher.c |   33 +++++++++++++++++++++++++++++++
 requestor/idirectfbsurface_requestor.c   |   12 +++++++++--
 2 files changed, 43 insertions(+), 2 deletions(-)



commit 10ba719856cf2ffba8e33b14676122e276e1948f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 14 20:34:25 2005 +0000

    Hot fix cross compiling by commenting out rule for building "yuvtbl.h".


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 606d97d421644d744ebe592766bc7fc9d48ff591
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 14 20:18:18 2005 +0000

    Changed CbCr to CrCb in the comment of DSPF_NV21.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4f2611df876a499532e3d5fdbd37041a60d36b19
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 14 20:06:18 2005 +0000

    Missed a few cases of NV21.


 core/surfaces.c |    1 +
 gfx/convert.c   |    3 +++
 idirectfb.c     |    1 +
 misc/conf.c     |    1 +
 misc/gfx_util.c |    1 +
 5 files changed, 7 insertions(+)



commit 20ccaace8712a2eae7f61e69f46af8935c719185
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 14 20:03:14 2005 +0000

    Hopefully fix cross compile by keeping yuvtbl.h in CVS and after make clean.


 Makefile.am |    2 
 yuvtbl.h    |  155 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 156 insertions(+), 1 deletion(-)



commit b30c3a48d2970d21d1c798f8da5cdb53f53b5157
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 14 19:52:19 2005 +0000

    - Added NV12/NV21/NV16 blitting and rectangle filling.
    - Made YV12<->I420 blitting possible.
    - Round chroma width and height up. It seems better than rounding down.


 generic.c |  325 +++++++++++++++++++++++++++++++++++++++++++++++---------------
 generic.h |    6 -
 2 files changed, 253 insertions(+), 78 deletions(-)



commit be603c7972416523a77bdce3d9a28af5580745b5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 14 15:23:27 2005 +0000

    - DSPF_NV21 support.
    - G200 can handle NV12/NV21.
    - Check for odd width/height with YUV formats.


 matrox_bes.c |   45 +++++++++++++++++++++++++++++----------------
 1 file changed, 29 insertions(+), 16 deletions(-)



commit 2d1ccaecf430cbd55fa1ceb310a8119eb23e5684
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 14 15:12:26 2005 +0000

    Added DSPF_NV21 and made dfb_surfacemanager_assure_*() handle NV?? formats.


 include/directfb.h        |    7 ++++--
 src/core/surfacemanager.c |   52 ++++++++++++++++++++++++++++++++++++++--------
 src/gfx/generic/generic.c |   45 ++++++++++++++++++++++++++-------------
 3 files changed, 78 insertions(+), 26 deletions(-)



commit e4f427c2034c821aeea17a41e6d0a9b38fcbbf84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 12 08:32:39 2005 +0000

    Remove legacy.


 /dev/null         |binary
 b/tools/gendoc.pl |   10 ----------
 2 files changed, 10 deletions(-)



commit 25880f9fbd42b5a35ae608cf32a89ebeb7e7f7f8
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 10 19:34:48 2005 +0000

    Disabled DH add-on detection since it doesn't always work.


 matrox_maven.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 95754ac86ddeb704014757faee9374ce009d12f0
Author: Marcel Siegert <mws@directfb.org>
Date:   Thu Feb 10 16:39:31 2005 +0000

    added dreamboxremote directory
    added dreamboxremote driver mainly based on dbox2remote
    adjusted Makefile for inputdrivers


 Makefile.am                     |    5 
 dreamboxremote/.cvsignore       |    6 
 dreamboxremote/Makefile.am      |   27 +++
 dreamboxremote/dreamboxremote.c |  321 ++++++++++++++++++++++++++++++++++++++++
 4 files changed, 359 insertions(+)



commit b0fb1c512362a778516c624092c67acc472a3e10
Author: Marcel Siegert <mws@directfb.org>
Date:   Thu Feb 10 16:09:08 2005 +0000

    added dreamboxremote configure option for inputdrivers


 configure.in |   17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)



commit abdb26e42eb7cd2d42247bf75fec3f34c63554c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 15:37:46 2005 +0000

    Moved alpha ramp setting from DFBDisplayLayerConfig
    to IDirectFBSurface::SetAlphaRamp() for usage with hw windows.


 include/directfb.h             |   51 +++++++++++++++++++++++------------------
 src/core/core.c                |    2 -
 src/core/layer_context.c       |   32 ++++++-------------------
 src/core/layer_region.c        |   12 +++++++++
 src/core/layers.c              |    8 ------
 src/core/surfaces.c            |   25 +++++++++++++++++++-
 src/core/surfaces.h            |    7 ++++-
 src/core/windows.c             |   18 ++++++++------
 src/display/idirectfbsurface.c |   20 +++++++++++++++-
 9 files changed, 110 insertions(+), 65 deletions(-)



commit 19509c3fc437e73e6ba4492be897a04f553e6352
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 13:45:47 2005 +0000

    More method link substitution (enum and struct entries).


 gendoc.pl |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 863c4efc22599044fc8318f5db1c2ae364f4dbe6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 13:39:45 2005 +0000

    Fixed parsing of DFBBoolean by allowing "!" in enum value assignment.


 gendoc.pl |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 80da068b80d8bef7b5b12cbb30f7acc5e8079b69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 13:28:31 2005 +0000

    Fixed warnings due to unused debug domains depending on architecture.


 cpu_accel.c |    4 +++-
 memcpy.c    |    2 ++
 2 files changed, 5 insertions(+), 1 deletion(-)



commit 268f4f125b047e4cbdfeebdd6c3a3d945dabc54a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 12:02:58 2005 +0000

    Keep a list of all realized (added) regions to remove them during
    emergency shutdown, e.g. signal received or missing deinit of master app.
    
    Converted layer related debug messages to use debug domain "Core/Layers".


 layer_context.c   |   17 +++++---
 layer_control.c   |   19 ++++-----
 layer_region.c    |  111 ++++++++++++++++++++++++++++++++++++++++++------------
 layers.c          |   35 +++++++++++++++--
 layers_internal.h |    2 
 5 files changed, 142 insertions(+), 42 deletions(-)



commit 4531cfb5e595c413e602ff497fd1585388a77898
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 10 12:00:35 2005 +0000

    Added i830 driver (overlay support only) for Servision Ltd.
    (http://www.servision.net/)
    
    Note, due to unsolved conflicts regarding ring buffer usage
    you have to load the "intelfb" module with the parameter "accel=0".


 configure.in                   |   24 +
 gfxdrivers/Makefile.am         |    7 
 gfxdrivers/i830/.cvsignore     |    6 
 gfxdrivers/i830/Makefile.am    |   31 +
 gfxdrivers/i830/i830.c         |  541 ++++++++++++++++++++++++++++
 gfxdrivers/i830/i830.h         |  400 +++++++++++++++++++++
 gfxdrivers/i830/i830_overlay.c |  768 +++++++++++++++++++++++++++++++++++++++++
 7 files changed, 1776 insertions(+), 1 deletion(-)



commit e4bdc6f4d7c26d2fa61e8bd59268aaf7144dfda0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 7 12:34:20 2005 +0000

    Perform additional check (returned phys. fb base) before considering the
    fb driver to be the one that it's expected to be.


 nsc.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit 3b16b3f4b995de66a06e6c564bdfcd98c476487e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 4 12:56:59 2005 +0000

    Activate DWOP_ALPHACHANNEL for other non indexed alpha formats, too.


 windows.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit f4aa13bef0350c0a332bf0126d9eee7c24b01990
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 4 12:40:10 2005 +0000

    Honor DWCAPS_ALPHACHANNEL for creation of hw window.


 windows.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit bcd417d65a39dcac3a1403244430a457f102fe66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 4 10:51:27 2005 +0000

    Added yuvtbl.h


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit f122362997cd7ccbeca815700e9a24e4ce0ab472
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 4 10:48:20 2005 +0000

    Create layer regions for hw windows in single buffered mode, unless
    explicitly configured using DSCAPS_DOUBLE/TRIPLE or DWCAPS_DOUBLEBUFFER.
    
    This is a preliminary solution, because by default a window surface should
    require a Flip() to make changes visible.


 windows.c |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit ee5a5de8a1c74b8ecfb317d59e9e15ae67b8eeae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 4 09:59:36 2005 +0000

    Removed an assumption.


 windows.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)



commit cd86de7338e6edc894cc5be1bd6ad551e6960b61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 3 18:38:03 2005 +0000

    Replaced spaces by tabs for indentation.


 gfxdrivers/ati128/Makefile.am        |    4 ++--
 gfxdrivers/cyber5k/Makefile.am       |    2 +-
 gfxdrivers/i810/Makefile.am          |    4 ++--
 gfxdrivers/mach64/Makefile.am        |    4 ++--
 gfxdrivers/matrox/Makefile.am        |    4 ++--
 gfxdrivers/neomagic/Makefile.am      |    4 ++--
 gfxdrivers/nsc/Makefile.am           |    6 +++---
 gfxdrivers/radeon/Makefile.am        |    4 ++--
 gfxdrivers/savage/Makefile.am        |    2 +-
 gfxdrivers/sis315/Makefile.am        |    4 ++--
 gfxdrivers/tdfx/Makefile.am          |    4 ++--
 inputdrivers/dbox2remote/Makefile.am |    4 ++--
 inputdrivers/elo/Makefile.am         |    4 ++--
 inputdrivers/h3600_ts/Makefile.am    |    4 ++--
 inputdrivers/joystick/Makefile.am    |    4 ++--
 inputdrivers/keyboard/Makefile.am    |    4 ++--
 inputdrivers/linux_input/Makefile.am |    4 ++--
 inputdrivers/lirc/Makefile.am        |    4 ++--
 inputdrivers/mutouch/Makefile.am     |    4 ++--
 inputdrivers/ps2mouse/Makefile.am    |    4 ++--
 inputdrivers/serialmouse/Makefile.am |    4 ++--
 inputdrivers/sonypi/Makefile.am      |    4 ++--
 inputdrivers/ucb1x00_ts/Makefile.am  |    4 ++--
 inputdrivers/wm97xx_ts/Makefile.am   |    4 ++--
 24 files changed, 47 insertions(+), 47 deletions(-)



commit 39e46bc4c00cf7b93cd91ff7900f42abe85136ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 2 14:30:44 2005 +0000

    Added yuvtbl-gen.c to EXTRA_DIST.


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 638fbcf88a88c59922e3c6093546d7fcb26ce763
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 2 12:18:29 2005 +0000

    Added generic.c's dependency on yuvtbl.h manually.
    
    Removed generated file from CVS.


 b/src/gfx/generic/Makefile.am |    2 
 src/gfx/generic/yuvtbl.h      |  155 ------------------------------------------
 2 files changed, 2 insertions(+), 155 deletions(-)



commit 759573e7049736d0142b114d2b14506cca7b9994
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jan 26 10:53:13 2005 +0000

    - do not dispatch events if unknown or JS_EVENT_INIT are received. Fixes
      crash upon initialization under some conditions
    - added missing newline to debug output


 joystick.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 7e4710cdac97da4bef495d55493cf7e5fbc10727
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Jan 21 15:53:16 2005 +0000

    Fixed DH add-on detection code.


 matrox_maven.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit 6bc8e647b685b84459eb05f96927dcbba165ad92
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 19 21:30:14 2005 +0000

    Added IDirectFBDisplayLayer::SetScreenPosition( int x, int y ) which
    sets the position of the layer on the screen specified in pixels.


 include/directfb.h                  |   12 ++++++++++
 src/core/layer_context.c            |   40 ++++++++++++++++++++++++++++++++++++
 src/core/layer_context.h            |    4 +++
 src/display/idirectfbdisplaylayer.c |   14 ++++++++++++
 4 files changed, 70 insertions(+)



commit 71000ee9a0d4fe04b5bf5c6900abd7e020a04dec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 19 15:09:18 2005 +0000

    Don't choose between reallocation and allocation based on the region's state,
    but simply check if the region's surface pointer is non NULL.


 layer_context.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit cd76e79e2f61088e1dc2d8e06f0a7b3a6609e01a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 19 15:06:35 2005 +0000

    Write luma plane at least when loading images to YV12, I420, NV12 or NV16.


 gfx_util.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 8a837ebafad6ad57c263bacba81b09997bb3ecb2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 19 12:15:45 2005 +0000

    Fixed a video memory leak in dfb_surface_reconfig() that happened if a
    surface with multiple buffers is configured to have less, e.g. switching
    a layer from DLBM_TRIPLE to DLBM_FRONTONLY.


 surfaces.c |   23 +++++++++--------------
 1 file changed, 9 insertions(+), 14 deletions(-)



commit c11c96362685921426c3b2e029fece42a93df630
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 18 11:57:27 2005 +0000

    Reset the destination rectangle upon layer resizing, centered on the screen.


 layer_context.c |   45 ++++++++++++++++++++++++++++-----------------
 1 file changed, 28 insertions(+), 17 deletions(-)



commit c642890d0645cb121527e79010a9a8c457dc1a83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 18 09:38:22 2005 +0000

    During reallocation of the layer surface, disable automatic palette
    switching in the region surface listener. Otherwise the palette got
    set before the region is configured to indexed format.


 layer_context.c |    7 ++++++-
 layer_region.c  |    4 ++--
 2 files changed, 8 insertions(+), 3 deletions(-)



commit 1b4c1dcb21cd69ae1ddd19ad2be1ba8c470695ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 18 09:36:39 2005 +0000

    Added debug message to dfb_surface_reformat().
    
    Generate RGB332 palette for LUT8 and RGB121 for ALUT44.


 surfaces.c |   36 ++++++++++++++++++++++++++++--------
 1 file changed, 28 insertions(+), 8 deletions(-)



commit 65e714480cbbaa0c0583b0375c733afff305adad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 18 09:35:14 2005 +0000

    Added dfb_pixelformat_name(format) to be used for (debug) messages.


 convert.c |   68 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 convert.h |    2 +
 2 files changed, 70 insertions(+)



commit 5821777de0aa4b518cbf469b868220faf3d12911
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 17 11:07:10 2005 +0000

    Fixed a logic bug which allowed CreateSurface() to succeed even though
    dfb_layer_context_set_configuration() returned an error.


 idirectfb.c |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit b450e8b93bdccba17f4fa54bc573af4e1e2f0c89
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jan 17 11:01:29 2005 +0000

    Cleaned up the way CreateSurface() determines the primary surface
    pixelformat and size. Previously the behavior varied depending on
    cooperative level and the force-desktop option.
    
    New behavior:
    1. DSDESC_{WIDTH,HEIGTH,PIXELFORMAT}
    2. SetVideoMode()
    3. mode= and pixelformat= options
    4. current layer config


 idirectfb.c |  135 ++++++++++++++++++++++++------------------------------------
 1 file changed, 55 insertions(+), 80 deletions(-)



commit e90fb3897677d60a1dc62477a0defbb0f27bc8c6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 16 20:50:51 2005 +0000

    Added support for G400 dual head add-on.


 matrox_maven.c |   40 +++++++++++++++++++++++++++++++---------
 matrox_maven.h |    1 +
 2 files changed, 32 insertions(+), 9 deletions(-)



commit 1c179e6e293f5790714371774e71a0891690a8ce
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 16 20:06:20 2005 +0000

    Reset PLNWT.


 matrox.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 2de23409a80df4261d95b2069ed574a4ec057b0c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jan 16 20:00:59 2005 +0000

    Added ARGB4444 support.


 matrox.c       |   22 ++++++++++++++++++++++
 matrox_state.c |   11 +++++++++++
 2 files changed, 33 insertions(+)



commit 4a01d4cbe48648c6cb702c307c1246525b1c5593
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 16 17:19:05 2005 +0000

    Propagate horizontal destination coordinate to refine hack.


 gfx_util.c |   23 ++++++++++++-----------
 1 file changed, 12 insertions(+), 11 deletions(-)



commit d7a6bab2b84089b3084cf0fc247e0351f2ae8a65
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 16 16:57:39 2005 +0000

    Force alignment to even coordinates if blitting YUY2 or UYVY.


 generic.c |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit 7d708e8315f4f33d74b1181f120eefe7cfd3b4de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 16 16:45:37 2005 +0000

    Added ugly hack to load images to YUY2 or UYVY surfaces.


 gfx_util.c |   20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)



commit 18d7324d91e92dfc93a31a93352b68b1aa1fc99b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 15 16:28:12 2005 +0000

    Set default alpha ramp in default layer configuration.


 layers.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 83cd5e1cea60eccbb725cb7f7f67b855c2b5264e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 15 16:24:19 2005 +0000

    Added DLCAPS_ALPHA_RAMP:
    
    Alpha values for formats with one or two alpha bits
    can be chosen, i.e. using ARGB1555 or ARGB2554 the
    user can define the meaning of the two or four
    possibilities. In short, this feature provides a
    lookup table for the alpha of these formats.
    
    
    Added "__u8 alpha_ramp[4]" to DFBDisplayLayerConfig along
    with DLCONF_ALPHA_RAMP in DFBDisplayLayerConfigFlags:
    
    Alpha values for 1 or 2 bit lookup.
    See description of DLCAPS_ALPHA_RAMP.
    Either all four values or the first and the
    last one are used, depending on the format.
    Default values are: 0x00, 0x55, 0xaa, 0xff.


 include/directfb.h       |   96 ++++++++++++++++++++++-------------------------
 src/core/layer_context.c |   26 ++++++++++++
 src/core/layer_region.c  |   12 +++++
 src/core/layers.h        |   29 +++++++-------
 4 files changed, 99 insertions(+), 64 deletions(-)



commit 8d3f1213a88f54528c879a34ec695d147d3cd196
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 14 21:47:15 2005 +0000

    Added missing case for ARGB2554 and ARGB4444 to dfb_color_to_pixel().


 convert.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 1011a73c382ae5b896e83c4ca3edb78587eb0a09
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 14 21:46:45 2005 +0000

    Show the layer level if supported.


 dfblayer.c |   50 ++++++++++++++++++++++++++++++++++----------------
 1 file changed, 34 insertions(+), 16 deletions(-)



commit 962c3fdaee7d217543a4304a91f355dcdf56c3f0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 13 21:01:21 2005 +0000

    Additional small optimizations.


 nvidia.c    |   49 +++++++++++++++++++++++++++++++------------------
 nvidia.h    |    3 +--
 nvidia_2d.c |   54 +++++-------------------------------------------------
 nvidia_3d.c |   45 +++++++++++++++++----------------------------
 4 files changed, 54 insertions(+), 97 deletions(-)



commit 87547d374baeef4bc41ed8d3bfbf66f5d3bb26e3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 13 14:43:20 2005 +0000

    Further optimizations: reset drawing/blitting operation only when operation mode changes.


 nvidia.c    |  441 +++++++++++++++++++++++-------------------------------------
 nvidia.h    |   12 -
 nvidia_2d.c |   44 ++++-
 nvidia_3d.c |   25 ++-
 4 files changed, 233 insertions(+), 289 deletions(-)



commit 207587aaa1d6f59c91ef5093d52d501197ce9914
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 12 00:14:58 2005 +0000

    Forgot to mention in previous commit:
    
    Bumped version number to 0.9.22.


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit 02f01709a406fcad61a41c505883a30b8ec83710
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 12 00:10:14 2005 +0000

    Added ARGB2554 and ARGB4444.
    
    Implemented all mandatory software driver snippets for these formats
    and any conversion or image loading routines.
    
    Only the optimized A8 font rendering routine (optional) is
    unimplemented, i.e. Bop_a8_set_alphapixel_Aop_argb2554/4444.


 configure.in              |    2 
 include/directfb.h        |   10 
 src/core/surfaces.c       |   44 +
 src/gfx/convert.c         |    4 
 src/gfx/convert.h         |   44 +
 src/gfx/generic/generic.c | 1044 +++++++++++++++++++++++++++++++++++-----------
 src/idirectfb.c           |    2 
 src/misc/conf.c           |    4 
 src/misc/gfx_util.c       |    8 
 tools/directfb-csource.c  |   10 
 wm/default/default.c      |   17 
 11 files changed, 930 insertions(+), 259 deletions(-)



commit 78b8f11d59443b0d0659924f677ad18f8f6ce123
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 11 15:17:02 2005 +0000

    Accept NV12 and NV16 in CreateSurface().


 idirectfb.c |    2 ++
 1 file changed, 2 insertions(+)



commit 6dd10e932f9b3bb17428b88c1affcf1166d5583e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 10 20:35:35 2005 +0000

    Copy definition of TS_EVENT like the ucb1x00 driver does.
    
    Please report if this fails with Linux 2.6 header files.


 wm97xx_ts.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit b2a9c88d27a9f080755ac2fdc9db92bc34ce1c4c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 10 20:33:06 2005 +0000

    Use tab instead of spaces.


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 7e4e970c6ec323b9ed1a18a5e8a23c28afb5f95a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 10 20:32:38 2005 +0000

    Added yuvtbl-gen.


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit 8b6b9e3fa587b0465df01caa6642309372a2a88b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 10 20:32:13 2005 +0000

    Fixed typo to avoid rebuilding the sources every time.
    
    Added clean-local rule to remove the binary and the header file.


 Makefile.am |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 21bf368ffcd4d5e358f06bab1603d448b53372c4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Jan 10 19:07:35 2005 +0000

    Fixed StretchBlit clipping.


 nvidia.c    |   16 ++++++++++------
 nvidia.h    |    2 ++
 nvidia_2d.c |   10 ++++++----
 3 files changed, 18 insertions(+), 10 deletions(-)



commit 9ef873fbbf3cc6627b34165be982ec6f24e25f4e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 9 18:50:54 2005 +0000

    Enable dithering by default.


 nvidia.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 6479022bd613e02cd31cd39795b4efee8683382e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 9 12:05:52 2005 +0000

    Added basic support for drawing with alphablend on NV20.
    Great performance improvements: it's possible to move a translucent window
    at 32bpp while the cpu stays idle.


 nvidia.c    |  335 +++++++++++++++++++++++++++++++-----------------------------
 nvidia.h    |    3 
 nvidia_2d.c |   28 ++++-
 3 files changed, 204 insertions(+), 162 deletions(-)



commit 08d6d07342e676adbafdc8502c38013f937d4207
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jan 9 12:02:36 2005 +0000

    Killed a FIXME: detect screen resolution from registers.


 nvidia_primary.c |   54 +++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 39 insertions(+), 15 deletions(-)



commit 42947e6e73593e24b9f4b18cd3476ee13d9cb758
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 6 20:48:04 2005 +0000

    YUV to YUV conversion is not supported.


 generic.c |   22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)



commit 2e9c502f876c31f81e600e1aeef2141036c0710f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jan 6 20:47:19 2005 +0000

    Removed an unused array.


 generic_mmx.h |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit 32821a45d84866210f85f3a9c4765e50ffbd9a2c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jan 5 10:40:05 2005 +0000

    Added support for YUY2/UYVY->RGB conversion (with src colorkeying):
    we use four lookup tables generated at compilation time by yuvtbl-gen.
    Make sure accumulator is aligned to 8.


 convert.c             |    9 
 generic/Makefile.am   |   10 
 generic/generic.c     |  602 +++++++++++++++++++++++++++++++++++++++++++-------
 generic/generic.h     |    1 
 generic/generic_mmx.h |  120 +++++++++
 generic/yuvtbl-gen.c  |  122 ++++++++++
 generic/yuvtbl.h      |  155 ++++++++++++
 7 files changed, 938 insertions(+), 81 deletions(-)



commit 3897203bcf29d4614bf9976d8047a6b939dc0d44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 4 11:39:27 2005 +0000

    Try to fix kerning bug on PPC using explicit type casts.


 idirectfbfont_ft2.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 4ac5b602ed638e9791c3c51319b6056eda18acd8
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Jan 1 14:48:04 2005 +0000

    Found the way to make NVScaledImageFromMemory (used for StretchBlit, Alphablend, Color Conversion)
    work on NV20 chipset:
    it was another rivafb bug, therefore the rivafb-nv20fix-* patch is absolutely required.


 gfxdrivers/nvidia/nvidia.c              |   20 +++++++++-----------
 gfxdrivers/nvidia/nvidia.h              |    2 +-
 gfxdrivers/nvidia/nvidia_2d.c           |    2 +-
 gfxdrivers/nvidia/nvidia_2d.h           |    2 +-
 gfxdrivers/nvidia/nvidia_3d.c           |    2 +-
 gfxdrivers/nvidia/nvidia_3d.h           |    2 +-
 gfxdrivers/nvidia/nvidia_mmio.h         |    2 +-
 gfxdrivers/nvidia/nvidia_primary.c      |    2 +-
 gfxdrivers/nvidia/nvidia_tables.h       |    2 +-
 patches/rivafb-nv20fix-2.4.28.patch.bz2 |binary
 patches/rivafb-nv20fix-2.6.9.patch.bz2  |binary
 11 files changed, 17 insertions(+), 19 deletions(-)



commit 31ce60f3a312ff6fa9902f613d34e5cee050b58d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 29 14:33:40 2004 +0000

    Thanks to "Mws <mws@twisted-brains.org>" for this patch that adds a
    configure option "--with-inputdrivers=<...>"!


 README                   |    1 
 configure.in             |  228 +++++++++++++++++++++++++++++++++++------------
 inputdrivers/Makefile.am |   30 +++++-
 3 files changed, 199 insertions(+), 60 deletions(-)



commit fa2805c536c7e8683993e115f45ea5f2831ca39f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 29 10:38:07 2004 +0000

    Write objects configuration during device initialization and do not override rivafb objects.
    
    Added expertimental Alphablend support on Riva TNT.
    
    Fixed NV20 and GeForce3 Xbox support, Blit() should work on the latter now.
    
    Added experimental support for NV30 chipsets.
    
    General cleanup.


 nvidia.c         |  633 ++++++++++++++++++++++++++++++++++---------------------
 nvidia.h         |   96 +++++---
 nvidia_2d.c      |   40 ---
 nvidia_overlay.c |   35 +--
 nvidia_primary.c |    9 
 5 files changed, 489 insertions(+), 324 deletions(-)



commit 306c69ae8b3af716607b4c487b1678c09d7e52ba
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Dec 22 10:26:59 2004 +0000

    2.4 kernels don't have EVIOCGLED.


 linux_input.c |    4 ++++
 1 file changed, 4 insertions(+)



commit e8aeaa0da4dbb72a0f57603a7ac86bd84a75c929
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 22 07:18:27 2004 +0000

    Changed date.


 directfbrc.5.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8809181f7c68fdc396c065540d132a02cc615694
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Dec 22 01:53:29 2004 +0000

    Fixed a typo.


 linux_input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f3d055b0e96f18743023bd780ee597b287e769ae
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Dec 20 20:03:16 2004 +0000

    drop SDL support on osx, fix osx system for release. still in a very early
    stage, but working somehow.


 README       |    3 ---
 README.OSX   |   37 ++++---------------------------------
 configure.in |   17 ++++++++++-------
 3 files changed, 14 insertions(+), 43 deletions(-)



commit f164f010e6ad38b7d2f7f565c517fad33b16647a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 13:21:43 2004 +0000

    Commented out two messages for release.


 matrox_screen_crtc2.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit ecb877b6c296ec04bbb8d399b8486554ac1e43f3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 08:52:54 2004 +0000

    Updated instructions.


 README.fusion |   27 +++++++++++++++++----------
 1 file changed, 17 insertions(+), 10 deletions(-)



commit f005c736b8174b2c0acbe460d4e26835447afb6f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 08:48:39 2004 +0000

    New patches.


 /dev/null                                    |binary
 b/patches/Makefile.am                        |    5 ++---
 b/patches/fusion-full-linux-2.4.28.patch.bz2 |binary
 b/patches/fusion-full-linux-2.6.9.patch.bz2  |binary
 4 files changed, 2 insertions(+), 3 deletions(-)



commit babf6a1a85a132a72b2838faa04ac234900a96cd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 07:53:43 2004 +0000

    Spelling, wording and phrasing fixes ;)


 NEWS |   34 ++++++++++++++++++----------------
 1 file changed, 18 insertions(+), 16 deletions(-)



commit 57d3df846505acfa19b3a494d5be0710225ee871
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 07:32:20 2004 +0000

    Wrote "summary" of changes between 0.9.20 and 0.9.21 ;)


 ChangeLog | 1223 +++++++++++++++++++++++++++++++++++++-------------------------
 NEWS      |  433 +++++++++++++++++++++
 2 files changed, 1182 insertions(+), 474 deletions(-)



commit b5adab0b60a42f80359f9657fde5d4e07781a51d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 04:06:17 2004 +0000

    Added Andreas Oberritter <obi@tuxbox.org> (SiS 315 gfx driver).


 AUTHORS |    1 +
 1 file changed, 1 insertion(+)



commit e9ee6fb77ee88eefb6a1c45cbe4019e5279169b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 20 01:37:07 2004 +0000

    Readded ".o" files.


 inputdrivers/dbox2remote/Makefile.am          |    4 ++--
 inputdrivers/elo/Makefile.am                  |    4 ++--
 inputdrivers/h3600_ts/Makefile.am             |    4 ++--
 inputdrivers/joystick/Makefile.am             |    4 ++--
 inputdrivers/keyboard/Makefile.am             |    4 ++--
 inputdrivers/linux_input/Makefile.am          |    4 ++--
 inputdrivers/lirc/Makefile.am                 |    4 ++--
 inputdrivers/mutouch/Makefile.am              |    4 ++--
 inputdrivers/ps2mouse/Makefile.am             |    4 ++--
 inputdrivers/serialmouse/Makefile.am          |    4 ++--
 inputdrivers/sonypi/Makefile.am               |    4 ++--
 inputdrivers/ucb1x00_ts/Makefile.am           |    4 ++--
 inputdrivers/wm97xx_ts/Makefile.am            |    4 ++--
 interfaces/IDirectFBFont/Makefile.am          |    4 ++--
 interfaces/IDirectFBImageProvider/Makefile.am |    4 ++--
 interfaces/IDirectFBVideoProvider/Makefile.am |    4 ++--
 systems/fbdev/Makefile.am                     |    4 ++--
 wm/default/Makefile.am                        |    4 ++--
 wm/unique/Makefile.am                         |    4 ++--
 19 files changed, 38 insertions(+), 38 deletions(-)



commit 2bdf35b538a9653eda5efd8f6f510f64bcdd7897
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Dec 20 00:40:49 2004 +0000

    compile fixes.


 osx.c      |    4 ++--
 osxinput.c |    6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)



commit e18bb7a97ae20aeca1d7f26c8e4f8628b2272e52
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 18 13:02:26 2004 +0000

    Rearranged a few keycodes to match reality.


 linux_input.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit d81a4f14f084aede935560b13d4f8aca5272b62a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 18 10:49:58 2004 +0000

    - Support more axes
    - Invert Z axis


 linux_input.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit 85aca7a39c8f91918f3d968e164cd0e1fa7bb071
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 18 10:42:47 2004 +0000

    Copied keymap support from the keyboard driver.


 Makefile.am   |    5 -
 linux_input.c |  247 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 244 insertions(+), 8 deletions(-)



commit fd23182e7bc36203e2cc82f01d46432bec47d70a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 18 10:00:46 2004 +0000

    Cosmetics.


 linux_input.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit d6f76fd50d532e3a1965eca6327966bc2c2465d4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Dec 18 09:57:33 2004 +0000

    Added keyboard LED support.


 linux_input.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 69 insertions(+), 7 deletions(-)



commit 86ab20b6a430b2e9c40ac6d0df86c00618aa137e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Dec 14 15:47:27 2004 +0000

    Respect endianess when converting surface to texture.
    Fixed a typo.


 nvidia.c    |    4 ++--
 nvidia_3d.c |    8 ++++++++
 2 files changed, 10 insertions(+), 2 deletions(-)



commit d88c83301e090cec60c5b30eca3870d389362d2c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Dec 13 09:58:17 2004 +0000

    Separated GeForce3 XBox from common NV20 and disabled all blitting functions on this chipset.


 nvidia.c |  142 +++++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 nvidia.h |    9 ++-
 2 files changed, 131 insertions(+), 20 deletions(-)



commit 173d83c017024890b000afb095244b5244ba0a58
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 11 19:38:35 2004 +0000

    Reduced kerning cache size by 50% and slightly increased performance.


 idirectfbfont_ft2.c |   58 ++++++++++++++++++++++++++++++++++------------------
 1 file changed, 39 insertions(+), 19 deletions(-)



commit e61be81dad8b9f38830b9a66ed2bdc7addd872e7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 11 16:32:38 2004 +0000

    Fixed warnings.


 input_switch.c |    3 +++
 1 file changed, 3 insertions(+)



commit aac195fdfdffb9e1ab7b3cf7fcd0feaf64cdfdd2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 11 16:16:53 2004 +0000

    Don't check for directfb-csource at all, if UniQuE is disabled.


 configure.in |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)



commit 043d032fca661e82734265747b9fb4a886f7ac85
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 10 22:21:58 2004 +0000

    Fixed segfault in Sop_argb_Sto_Dacc_MMX() when DirectFB is compiled with trace support:
    use edx instead of ebx.


 generic_mmx.h |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 126e2434788b540bff2f33a69e7a1c6be02fa851
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 10 11:12:55 2004 +0000

    Wait idle before setting alpha and color (Beta1 and Beta4).


 nvidia.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 7186e37c3ed0de54551751a86e5701b0ee7271d7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Dec 9 21:41:51 2004 +0000

    Avoid division by zero during performance monitoring report.


 nvidia.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 9640bc762ed937d688fd1dafb3989380d62e5ead
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Dec 9 20:35:44 2004 +0000

    Set nv_waitidle() cycles limit to 10000000.
    No longer compile in unsed tables.


 nvidia_mmio.h   |   13 +++++++++++--
 nvidia_tables.h |    3 ++-
 2 files changed, 13 insertions(+), 3 deletions(-)



commit 619dd70ee965543aeb46907b951e9e958973b1da
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Dec 9 16:23:00 2004 +0000

    Added support for A8,YUY2 and UYVY surfaces in dfb_surface_dump().


 surfaces.c |  120 +++++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 94 insertions(+), 26 deletions(-)



commit 4e9adf954c6fb8152847521893e586e43b70a3db
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 8 14:20:06 2004 +0000

    Use ScaledImageFromMemory 0x77 instead of 0x89 for NV10/NV20.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c02bb37a31a8eb1748d9d2c57ca84aa09a0d4cea
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Dec 8 10:42:15 2004 +0000

    Fixed bug when negative coordinates are passed to drawing/blitting functions.
    
    Fixed bug with ARGB destination surfaces: alpha component was not set correctly.
    
    Added Alphachannel Blend support (!!!!).


 nvidia.c         |  496 ++++++++++++++++++++++++++++++-------------------------
 nvidia.h         |    1 
 nvidia_2d.c      |  108 +++++++----
 nvidia_3d.c      |   45 ++++
 nvidia_overlay.c |   10 -
 5 files changed, 383 insertions(+), 277 deletions(-)



commit ab55bd5771567852c31356e07a1c837338295d6d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 5 18:40:34 2004 +0000

    Revert to previous method in CheckState() and return if DFXL_TEXTRIANGLES is
    passed to nv20CheckState().


 nvidia.c |   17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)



commit 9c3fd2e37db283bc0560d81259aec2f323fabd90
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 5 18:15:46 2004 +0000

    Cleanup & some bugfixes:
    acceleration was not set correctly in CheckState().


 nvidia.c |   35 ++++++++++++-----------------------
 1 file changed, 12 insertions(+), 23 deletions(-)



commit 2c66f03231b16d2ce212c6090666ae0b3382f587
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 5 17:58:33 2004 +0000

    DFXL_TEXTRIANGLES was not checked in IDirectFBSurface::GetAccelerationMask().


 idirectfbsurface.c |    1 +
 1 file changed, 1 insertion(+)



commit ac58751959db1eb9da1a358d2b984203bc33ac85
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Dec 5 11:02:41 2004 +0000

    Moved surface-to-texture conversion functions to nvidia_3d.c.
    
    Surface-to-texture conversion is now performed each time DFXL_TEXRIANGLES is acquired.
    
    Source and Destination Blend Functions were not set when DFXL_TEXTRIANGLES was acquired; fixed.


 nvidia.c    |  116 +++++++++++++++++---------------------------------------
 nvidia.h    |    5 +-
 nvidia_3d.c |  123 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 nvidia_3d.h |   78 --------------------------------------
 4 files changed, 163 insertions(+), 159 deletions(-)



commit f5a467b3b0c6b755ba3331596ecb834dcfd13eea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 4 19:13:20 2004 +0000

    Added support for DSPF_NV12, untested.


 matrox_bes.c |   15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)



commit 186294b2dac5ef47aaff287962da9af26c53cfab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 4 16:53:32 2004 +0000

    Stay with FourCC definitions and use NV12 for YC420.
    
    I used NV16 for YC422, but that was just a guess, because I didn't
    find any FourCC matching this format.


 include/directfb.h  |    4 ++--
 src/core/surfaces.c |    6 ++++--
 2 files changed, 6 insertions(+), 4 deletions(-)



commit 8579792b7d763b436ec4028770c88d7a0c9e11ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 4 14:09:21 2004 +0000

    Hot fixed most annoying problems with device probing:
    
    - Just use one of "/dev/psaux" and "/dev/misc/psaux" if both are available.
    - Don't try them at all if uname() yields release "2.5.*" or "2.6.*".


 ps2mouse.c |   74 +++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 53 insertions(+), 21 deletions(-)



commit 51dc3cc5c48a84f76a8b7ef5a03c6306205f9ca6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Dec 4 13:45:04 2004 +0000

    Added dummy functions for encoder and output configurations.


 matrox_screen_crtc2.c |   72 +++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 68 insertions(+), 4 deletions(-)



commit f55f49ebfe02e90301db52509f5d05a754e44ec3
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 3 18:25:05 2004 +0000

    Reserve unusable memory at the of framebuffer during device initialization;
    kernel patches are no longer required.


 /dev/null                     |binary
 b/gfxdrivers/nvidia/nvidia.c  |   58 ++++++++++++++++++++++++++++++++++++------
 patches/README.rivafb-smemlen |   10 -------
 3 files changed, 50 insertions(+), 18 deletions(-)



commit edb6fc01c563e83203231d9a8a13655a92d6e15d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 3 14:26:55 2004 +0000

    Set video buffers limit to avoid problems width old rivafb (2.4.x kernels).


 nvidia_overlay.c |   11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)



commit 2a86c04dfaf373086725c1e38c3c5b0ed9965888
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 12:22:37 2004 +0000

    Added option "-L, --level <level>".


 dfblayer.c |   39 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 39 insertions(+)



commit bcceb61c45ecf935e50853ace896d8e5520f9a8f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Dec 3 09:58:30 2004 +0000

    Giant cleanup and rewite of the objects configuration routines:
    we use runtime configuration istead of fixed tables now.


 nvidia.c         |  312 +++++++++++++-----------
 nvidia.h         |  705 +++++++++++++++++++++++++------------------------------
 nvidia_2d.c      |  116 ++++-----
 nvidia_3d.c      |  101 +++----
 nvidia_mmio.h    |   49 ++-
 nvidia_overlay.c |    1 
 nvidia_tables.h  |  154 ------------
 7 files changed, 638 insertions(+), 800 deletions(-)



commit e74a1f75b442900607e433e08ae827e3d9da7b30
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 08:24:21 2004 +0000

    Added dfb_color_to_argb().
    
    Made dfb_color_to_aycbcr() and dfb_color_to_argb() static inline.


 convert.c |   15 ---------------
 convert.h |   23 +++++++++++++++++++++--
 2 files changed, 21 insertions(+), 17 deletions(-)



commit 3d9d2238259c1c2b8f01b1336ae977c9a350a7d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 08:10:32 2004 +0000

    Updated some comments.


 directfb.h |   51 ++++++++++++++++++---------------------------------
 1 file changed, 18 insertions(+), 33 deletions(-)



commit 70b7becc5e692ff2faf394ed1a7789aa2d26185a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 08:00:51 2004 +0000

    Added comment to DFBSurfacePixelFormat.


 directfb.h |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 82e6a73123504b7f01b17043299d91acfd866e8c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 07:56:11 2004 +0000

    Show index of types and definitions on the index page.


 gendoc.pl |   49 ++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 42 insertions(+), 7 deletions(-)



commit a4cba0d3c143321acf7032538f6a495eb19f9224
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 07:15:15 2004 +0000

    Added two planar YUV formats:
    
    DSPF_YC420  8 bit Y plane followed by one 16 bit quarter size CbCr [15:0] plane
    
    DSPF_YC422  8 bit Y plane followed by one 16 bit half width CbCr [15:0] plane


 directfb.h |   22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)



commit 0926b621d6d71a85ee773081bbaec9b7c72f21eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 3 06:18:13 2004 +0000

    Updated.


 ChangeLog |18811 ++++++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 14626 insertions(+), 4185 deletions(-)



commit 9a4fdb7b1c0c3952d021a2dc308da133442c578c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 1 08:51:08 2004 +0000

    Added DLCAPS_SOURCES which indicates that the layer supports multiple
    sources that can be selected, e.g. from frame buffer (surface) or from
    hardware decoders (using buffers outside of the frame buffer).
    
    Added DFBDisplayLayerSourceID with pre-defined DLSID_SURFACE.
    
    Added number of supported sources to DFBDisplayLayerDescription.
    
    Added DFBDisplayLayerSourceDescription containing the ID and a name.
    
    Added DLCONF_SOURCE along with a field in DFBDisplayLayerConfig to
    select the source to be used.
    
    Added IDirectFBDisplayLayer::GetSourceDescriptions().
    
    Added InitSource() to the layer driver API.
    
    Added source_id to CoreLayerRegionConfig
    and CLRCF_SOURCE_ID to CoreLayerRegionConfigFlags.
    
    Added layer sources to dfbinfo.


 include/directfb.h                  |   48 ++++++++++++++++++++++++++++++------
 src/core/gfxcard.h                  |    2 -
 src/core/layer_context.c            |   18 ++++++++++++-
 src/core/layer_control.c            |   17 ++++++++++++
 src/core/layer_control.h            |    4 +++
 src/core/layers.c                   |   45 +++++++++++++++++++++------------
 src/core/layers.h                   |   16 +++++++++++-
 src/core/layers_internal.h          |   23 +++++++++++------
 src/display/idirectfbdisplaylayer.c |   29 ++++++++++++++++++---
 tools/dfbinfo.c                     |   40 ++++++++++++++++++++++++++++--
 10 files changed, 200 insertions(+), 42 deletions(-)



commit e497e3b0caeba1b6e3ef12389209d30376855489
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 30 11:36:49 2004 +0000

    Fixed TextureTriangles() bug in desktop mode.


 nvidia.c        |   22 +++++++++++++---------
 nvidia.h        |    1 -
 nvidia_tables.h |   16 ++++++++--------
 3 files changed, 21 insertions(+), 18 deletions(-)



commit 0eba4f14bfd9f5001444f47e7158894e2314bbb9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 28 23:34:02 2004 +0000

    Code lifting.


 layer_context.c |   73 ++++++++++++++++++++++++++------------------------------
 layer_context.h |   51 ++++++++++++++++++++-------------------
 2 files changed, 61 insertions(+), 63 deletions(-)



commit b354ffaa08303d895ea7342e7f5ea743248066b7
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 28 22:21:34 2004 +0000

    Depth buffer pitch was set wrong.


 nvidia.c |    8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)



commit 491a26eedbaad62f4b1e01b807c749ad60095728
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 28 21:23:43 2004 +0000

    Missed a bit in DSECONF_ALL.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9db390788d2815de7921c1a4faacfc19446f6914
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 28 21:09:14 2004 +0000

    Added assertions before calling Set*Config() during initialization.
    
    Hotfix missing functions in the Matrox driver.


 gfxdrivers/matrox/matrox_screen_crtc2.c |    4 ++--
 src/core/screens.c                      |    2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)



commit 30cb8ed0d9837d8d571b0c22a1f019ba55ae2f42
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 28 20:00:24 2004 +0000

    Forgot to add nvidia_mmio.h.


 nvidia_mmio.h |   78 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 78 insertions(+)



commit 102afe0c8c3e07de057b15d9fe0c375492460b7a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 28 16:40:48 2004 +0000

    Added TextureTriangles(): it's very slow, texture size is limited
    to 512x512, it's somewhat buggy in desktop mode... but we have it!!
    
    Added nv_out8(), nv_out16(), nv_out32(), nv_in8(), nv_in16(), nv_in32().
    
    General cleanup.


 Makefile.am      |    1 
 nvidia.c         |  467 ++++++++++++++++++++++++++++++++++++++-----------------
 nvidia.h         |   93 ++++------
 nvidia_2d.c      |    4 
 nvidia_3d.c      |  133 +++++++++++++--
 nvidia_3d.h      |   82 +++++++++
 nvidia_overlay.c |   10 -
 nvidia_primary.c |   42 ++--
 8 files changed, 590 insertions(+), 242 deletions(-)



commit 6a1e2e8aed45938713547ba18d9cc6ea5708010d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 05:58:45 2004 +0000

    Added "__u32 dfb_color_to_aycbcr( const DFBColor *color )".


 convert.c |   15 +++++++++++++++
 convert.h |    2 ++
 2 files changed, 17 insertions(+)



commit aed78e08a49ca7639c95aeb81d1ff29b915f8607
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 05:56:40 2004 +0000

    Fixed two comments after name change.


 directfb.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8577b27c798c1342da0b90b8332604b119e311d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 04:36:39 2004 +0000

    Fixed a warning.


 shmalloc.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 816fed6cf263be91949e2b77534d36d9198b5bae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 04:32:43 2004 +0000

    Changed all test picture mode names using shorter versions.


 directfb.h |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit 37097b6cf718853682d465b76bc63b753345f95d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 04:15:27 2004 +0000

    Added 'test_color' to DFBScreenEncoderConfig.
    Added DSECONF_TEST_COLOR to DFBScreenEncoderConfigFlags.
    
    Added test picture mode DSETP_SINGLE_COLOR using color from configuration.


 directfb.h |   22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)



commit 52ae011519cce3a35ce8536ea92a0b90978bebc0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 03:47:04 2004 +0000

    Prefer full matches in enum parsing, e.g. always have "yc" be "DSOS_YC", but
    still allow "ycb" for "DSOS_YCBCR" or "m" for "DSETP_MULTI_COLOR".


 dfbscreen.c |   29 +++++++++++++++++++----------
 1 file changed, 19 insertions(+), 10 deletions(-)



commit 5405362fead1aaab8061ec777332837b1e61f9b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 27 03:13:35 2004 +0000

    Use D_DERROR instead of D_ERROR in two cases.


 layer_context.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 331aed7a8763d3c3e19ec11d0221f2e8330ed140
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 26 22:23:51 2004 +0000

    Allow empty layer lists like "," to select no layer.


 dfbscreen.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 61df803041a0aa635bffa651fe5a590791308399
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 26 22:20:58 2004 +0000

    Set each mixer's, encoder's or output's default configuration.


 screens.c |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit 32de10a3f5c32cd66384866d283e966274daa16b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 26 22:18:41 2004 +0000

    Changed DSOS_UNKNOWN to DSOS_NONE, e.g. for disabling the encoder.


 Makefile.am |    2 +-
 directfb.h  |    4 +++-
 2 files changed, 4 insertions(+), 2 deletions(-)



commit 1de546246cffad4ae2d23bd478ccd04d1329921c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 25 22:55:05 2004 +0000

    Added "--enable-unique", disabled by default.


 configure.in   |   10 ++++++++++
 wm/Makefile.am |    8 +++++++-
 2 files changed, 17 insertions(+), 1 deletion(-)



commit feb5b218670fa60c294d37854047587a54b30feb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 25 22:17:52 2004 +0000

    Fixed background color output format (printf).


 dfbscreen.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3de5c4432c2489686b80f85a959df7549ebcf21e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 25 21:16:25 2004 +0000

    ID mask is 32 bit.


 dfbscreen.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 5f4133e3e7d95c40763689d616ee9cb0fb7990e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 25 20:48:55 2004 +0000

    Added direct_util_count_bits(), slow version,
    but optimized for bit sets with lower bits set only.


 util.h |   19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)



commit d7060c3471b03b2de7028c929d3ab1a200c13121
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 25 18:33:30 2004 +0000

    Added mixer configuration options.


 dfbscreen.c |  112 +++++++++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 104 insertions(+), 8 deletions(-)



commit e9523a6d2c5a142b197b31347aeee4574e2564cf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 24 09:45:05 2004 +0000

    Fixed warning.


 dfbscreen.c |    2 --
 1 file changed, 2 deletions(-)



commit b723ae8b479ade002c1a3cb3eaa4aa11e2cefa91
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 24 09:42:06 2004 +0000

    Added configuration tool for mixers, encoders and outputs.


 .cvsignore  |    1 
 Makefile.am |    5 
 dfbscreen.c |  550 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 555 insertions(+), 1 deletion(-)



commit 385b378513d01dd81d86b411d7f2a59f45a10bb2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 24 04:36:45 2004 +0000

    Added 'name' to mixer, encoder and output description.
    
    Renamed 'num_layers' to 'sub_num'.


 include/directfb.h |   41 ++++++++++++++++++++++++++++-------------
 tools/dfbinfo.c    |    8 ++++----
 2 files changed, 32 insertions(+), 17 deletions(-)



commit 7bdeb52ccb44cd80476740fc633c1181d5c9cf0a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 24 04:35:03 2004 +0000

    Handle recently added DSECONF_OUT_SIGNALS and DSECONF_SCANMODE.


 idirectfbscreen.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit ce2ab980906ba9b4e0e49ccba32fe6b3b7e79637
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 24 04:21:53 2004 +0000

    Added name generation for DFBScreenMixerTree,
    DFBScreenEncoderTestPicture and DFBScreenEncoderScanMode.


 Makefile.am |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 518fbc02bbc97ed41c2cafc8ab9169b56416db34
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 23 19:11:43 2004 +0000

    Fixed warning.


 input.c |    2 ++
 1 file changed, 2 insertions(+)



commit 87eb53fc7272a8e3a67d3ac10243d4cd8603aaca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 22 18:09:43 2004 +0000

    Segfault should be fixed now.


 radeon.c |   34 +++++++++++++++++++++++++++++++++-
 1 file changed, 33 insertions(+), 1 deletion(-)



commit 1a6e108cd59262453be6a83e2cadb870bddff5f4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Nov 22 16:16:14 2004 +0000

    Limit waitfifo cycles to 65536.
    Yet some small optimizations.


 nvidia.c    |    8 ++++----
 nvidia.h    |   13 +++++++++----
 nvidia_2d.c |    4 +---
 3 files changed, 14 insertions(+), 11 deletions(-)



commit 8c7e4a682e25a60ddf05350f2c25b2afbc7fdbd6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 22 06:35:46 2004 +0000

    Commented out an assertion.


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 41a988541f9ce81c5de566727a8139bd79ba9197
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 21 18:01:57 2004 +0000

    It seems that NVScreenBlit 0x5F doesn't support ARGB format;
    revert to NVScreenBlit 0x1F and use NVScaledImage to apply effects (ColorAlphaBlend, Colorize).


 nvidia_2d.c     |    5 ++---
 nvidia_tables.h |    2 +-
 2 files changed, 3 insertions(+), 4 deletions(-)



commit 9a77a18c4fe360c0681d09167e0f3c5eba8b1f64
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 20 23:57:54 2004 +0000

    Added a parameter to "fusion_skirmish_init()" and "fusion_reactor_init()" to
    set the name of the skirmish or reactor using the ioctl FUSION_ENTRY_SET_INFO.
    
    Use the new parameter for all skirmishs and reactors ever created.
    
    ---
    
    Don't create a skirmish for each reactor's global reactions, but use a single
    skirmish for all reactors which is created during Fusion's initialization.
    
    Added "fusion_reactor_set_lock()" to use another skirmish for the global
    reactions of the reactor.
    
    Added "fusion_object_set_lock()" to set the skirmish for the global reactions
    of the object's reactor, while default is the skirmish used to lock the pool.
    
    Use the skirmish of layer contexts and layer regions for their object reactors.
    
    ---
    
    Heavily cleaned up code of FusionReactor and added lots of debug messages and
    comments. You should add "no-debug = fusion/reactor" to disable these loads
    of debug messages, while still showing other messages if "debug" is used.
    
    Documented all functions in the FusionReactor header file.
    
    Cleaned up FusionObject code and debug messages.
    
    Added some assertions and assumptions to the shared memory code.
    
    Added debug domain for FusionReactor and FusionSkirmish.
    
    Renamed function type definition "React" to "ReactionFunc".
    
    ---
    
    Added "dfb_input_add_global()" and "dfb_input_set_global()" to register global
    reactions at run time, e.g. from another library or module in which case the
    static reaction table can't be initialized with the address of those functions.
    
    Cleaned up input core code, e.g. by replacing the "inlined" singly linked list
    code by using a "DirectLink" and the "direct_list_*()" functions, or by adding
    magic assertions etc.
    
    Removed InputDevice and replaced all remaining occurences by CoreInputDevice.
    
    ---
    
    Build all graphics drivers by default again.


 configure.in                           |   17 
 inputdrivers/dbox2remote/dbox2remote.c |    6 
 inputdrivers/elo/elo.c                 |    6 
 inputdrivers/h3600_ts/h3600_ts.c       |    6 
 inputdrivers/joystick/joystick.c       |    6 
 inputdrivers/keyboard/keyboard.c       |    6 
 inputdrivers/linux_input/linux_input.c |    6 
 inputdrivers/lirc/lirc.c               |    6 
 inputdrivers/mutouch/mutouch.c         |    6 
 inputdrivers/ps2mouse/ps2mouse.c       |    6 
 inputdrivers/serialmouse/serialmouse.c |    6 
 inputdrivers/sonypi/sonypi.c           |    6 
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c   |    6 
 inputdrivers/wm97xx_ts/wm97xx_ts.c     |    6 
 lib/fusion/arena.c                     |    5 
 lib/fusion/fusion.c                    |   66 +--
 lib/fusion/fusion_internal.h           |    2 
 lib/fusion/lock.c                      |   66 +--
 lib/fusion/lock.h                      |   11 
 lib/fusion/object.c                    |  179 +++++---
 lib/fusion/object.h                    |   23 -
 lib/fusion/reactor.c                   |  681 +++++++++++++++++++--------------
 lib/fusion/reactor.h                   |  105 +++--
 lib/fusion/shmalloc/shmalloc.c         |   58 +-
 src/core/clipboard.c                   |    2 
 src/core/colorhash.c                   |    2 
 src/core/core.c                        |    2 
 src/core/core_system.h                 |    4 
 src/core/coredefs.h                    |    7 
 src/core/coretypes.h                   |    6 
 src/core/gfxcard.h                     |   12 
 src/core/input.c                       |  480 ++++++++++++-----------
 src/core/input.h                       |   70 +--
 src/core/input_driver.h                |    4 
 src/core/layer_context.c               |    5 
 src/core/layer_region.c                |   11 
 src/core/layers.c                      |    5 
 src/core/palette.c                     |    2 
 src/core/screens.c                     |    5 
 src/core/surfacemanager.c              |    2 
 src/core/surfaces.c                    |    2 
 src/core/system.c                      |    4 
 src/core/system.h                      |    6 
 src/core/windows.c                     |    2 
 src/core/windowstack.c                 |    8 
 src/idirectfb.c                        |   18 
 src/input/idirectfbinputbuffer.c       |    8 
 src/input/idirectfbinputbuffer.h       |    2 
 src/input/idirectfbinputdevice.c       |    4 
 src/input/idirectfbinputdevice.h       |    4 
 systems/fbdev/fbdev.c                  |    4 
 systems/osx/osx.c                      |    4 
 systems/osx/osxinput.c                 |   10 
 systems/sdl/sdl.c                      |    6 
 systems/sdl/sdlinput.c                 |   12 
 tools/fusion_bench.c                   |   20 
 wm/unique/context.c                    |    2 
 wm/unique/device.c                     |   12 
 wm/unique/device.h                     |    4 
 wm/unique/window.c                     |    2 
 60 files changed, 1181 insertions(+), 863 deletions(-)



commit 38bc8efde3f629608b716da8efcd5105ab41c79d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 20 22:00:13 2004 +0000

    Added debug domain.


 idirectfbwindow.c |   34 +++++++++++++++++++---------------
 1 file changed, 19 insertions(+), 15 deletions(-)



commit 05c817cbdc3db176607b769708e4ce5fbf8d73bd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 20 21:52:43 2004 +0000

    Renamed "direct_list_contains()" to "direct_list_contains_element_EXPENSIVE()"
    to ensure that developers know that they shouldn't use it in non-debug code.
    
    Added "direct_list_count_elements_EXPENSIVE()".


 list.h |   44 +++++++++++++++++++++++++++++++++++---------
 1 file changed, 35 insertions(+), 9 deletions(-)



commit 3bc0ed3ecf3e4f9e736a9b0c795382b900781309
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 20 21:40:53 2004 +0000

    Added TraceFlags to each frame, featuring TF_DEBUG which indicates that
    the function of the current frame wrote at least one debug message.
    
    Added "direct_trace_debug_indent()" which sets the flag TF_DEBUG for the
    current frame and returns the current debug message indention level by
    examining the stack, counting any upper frames that produced debug output.
    
    Increased maximum trace depth to 256.
    
    
    Here is an example:
    
    (-) [SDL Input  18.814] (18246) Fusion/Reactor:    fusion_reactor_dispatch( 0x20007ee0 [1], msg_data 0xbf5ffa54, self true, globals 0x400a1720)
    (-) [SDL Input  18.815] (18246) Fusion/Reactor:        fusion_reactor_dispatch( 0x20007c00 [17], msg_data 0xbf5ff814, self true, globals 0x4009f7d4)
    (-) [SDL Input  18.815] (18246) IDirectFBWindow:           IDirectFBWindow_React()
    (-) [  NO NAME  18.815] (18239) Core/Windows:      dfb_window_resize (0x2013db00) [  -2,  27 -  616x 460 -> 99x40]
    (-) [  NO NAME  18.815] (18239) WM/Default:            resize_window( 99, 40 )
    (-) [  NO NAME  18.815] (18239) Fusion/Reactor:            fusion_reactor_dispatch( 0x20007000 [0], msg_data 0x400c872c, self false, globals (nil))
    (-) [  NO NAME  18.815] (18239) Fusion/Reactor:            fusion_reactor_dispatch( 0x20007be0 [18], msg_data 0xbffff500, self true, globals 0x400a1880)
    (-) [  NO NAME  18.834] (18239) Fusion/Reactor:            fusion_reactor_dispatch( 0x20007c00 [17], msg_data 0xbffff5e0, self true, globals 0x4009f7d4)
    (-) [  NO NAME  18.834] (18239) IDirectFBWindow:               IDirectFBWindow_React()


 debug.c |   12 ++++++++++--
 trace.c |   54 ++++++++++++++++++++++++++++++++++++++++++++++++------
 trace.h |    2 ++
 3 files changed, 60 insertions(+), 8 deletions(-)



commit bf254e5aca4a6e384c303a8a95021d43751a876c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 20 21:18:07 2004 +0000

    Added parameter "write_front" to dfb_surface_flip_buffers() which is useful
    for triple buffering. If true, the new back buffer will be the front buffer.
    Drivers should detect if the current front buffer is not being shown already,
    in which case the idle buffer might be still shown and should not be written
    to.


 gfxdrivers/ati128/ati128_overlay.c     |    2 +-
 gfxdrivers/cle266/uc_overlay.c         |    2 +-
 gfxdrivers/cyber5k/cyber5k_underlay.c  |    2 +-
 gfxdrivers/i810/i810_overlay.c         |   12 ++++++------
 gfxdrivers/mach64/mach64_overlay.c     |    2 +-
 gfxdrivers/matrox/matrox_bes.c         |    2 +-
 gfxdrivers/matrox/matrox_crtc2.c       |    2 +-
 gfxdrivers/matrox/matrox_spic.c        |    2 +-
 gfxdrivers/neomagic/neo_overlay.c      |    2 +-
 gfxdrivers/nvidia/nvidia_overlay.c     |   32 ++++++++++++++++----------------
 gfxdrivers/nvidia/nvidia_primary.c     |   10 +++++-----
 gfxdrivers/radeon/radeon_overlay.c     |    6 +++---
 gfxdrivers/savage/savage_streams_old.c |    2 +-
 gfxdrivers/unichrome/uc_overlay.c      |    2 +-
 gfxdrivers/unichrome/uc_spic.c         |    2 +-
 src/core/layer_region.c                |    2 +-
 src/core/surfaces.c                    |   19 ++++++++++++-------
 src/core/surfaces.h                    |    2 +-
 src/display/idirectfbsurface.c         |    2 +-
 src/display/idirectfbsurface_window.c  |    2 +-
 systems/fbdev/fbdev.c                  |    2 +-
 systems/osx/primary.c                  |    2 +-
 systems/sdl/primary.c                  |    2 +-
 23 files changed, 60 insertions(+), 55 deletions(-)



commit 758081449905c2bd7c1b5d758e3c23f866f10c9b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 20 17:59:20 2004 +0000

    Added experimental support for Colorizing.


 nvidia.c |   19 ++++++++++++++++---
 1 file changed, 16 insertions(+), 3 deletions(-)



commit 0c934aa3bad7b03057e0d24aa64eb8ea227eb70d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 20 10:45:28 2004 +0000

    Accidentally byteoffset_alignment was reset to 128.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6d7fead382acb0673acd5794a9eb60cd7e28a75b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 20 10:38:24 2004 +0000

    General clean-up and optimization.
    Use strict chipset/architecture detection.


 nvidia.c         |  587 +++++++++++++++++++++++++++++--------------------------
 nvidia.h         |    1 
 nvidia_primary.c |   49 +---
 3 files changed, 335 insertions(+), 302 deletions(-)



commit 31ad26aeec0a381d401d19d25f38cc387b7f34ea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 19 23:38:58 2004 +0000

    Thanks to Stefan Lucke <stefan@lucke.in-berlin.de>:
    
    Hi,
    
    the follow patch enables reporting of destination colorkey capability.
    So apps (like vdr-softdevice) can test this in order to
    set layer options correct.


 README                            |    1 +
 gfxdrivers/unichrome/uc_overlay.h |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)



commit a09ec2f607336d1e02b05eb8e109f6486a150d54
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 18 05:36:34 2004 +0000

    Added DFBScreenEncoderScanMode for interlaced/progressive output.
    
    Added DSECAPS_SCANMODE and DSECONF_SCANMODE.


 directfb.h |   17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)



commit 7d7c2e49ff1ddb7102dd1ed15f0e9ba9c07c429a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 18 05:09:43 2004 +0000

    Added output signals to encoder caps and configuration.
    
    Added YCbCr to output signals.


 include/directfb.h |   18 +++++++++++-------
 tools/dfbinfo.c    |   19 ++++++++++++++++---
 2 files changed, 27 insertions(+), 10 deletions(-)



commit 5fc17831e8a90389ddcb57bf51f0aa6b2e85ab58
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 14 10:20:44 2004 +0000

    Added "D_OOSHM()" which is the same as "D_OOM()" in single app build.
    
    Only in multi app build it prints the warning "out of shared memory"
    and gives DFB_NOSHAREDMEMORY if used as a (return) value.


 shmalloc.h |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 1b192843e225a0028afd4530aff47a8d795b72e4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 14 10:15:31 2004 +0000

    Added "D_OOM()" which prints the warning "out of memory".
    
    
    It can be used solely or with a return in front:
    
    :	D_OOM();
    :	return DFB_NOSYSTEMMEMORY;
    
    Can be written as:
    
    :	return D_OOM();


 messages.h |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 939614a213f3a0ded84e7f75c0d853a8b0dc1544
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 14 10:13:24 2004 +0000

    Added "static inline bool direct_list_contains( list, link )".
    
    In direct_list_remove(): "D_ASSERT( direct_list_contains( *list, link ) )".


 list.h |   25 +++++++++++++++++++++++--
 1 file changed, 23 insertions(+), 2 deletions(-)



commit ac8807f8445134892619fc4fdb7d7d1b5c3d6ad3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 14 10:07:38 2004 +0000

    Added DFB_NOSHAREDMEMORY error code.


 include/directfb.h |    3 ++-
 lib/direct/util.c  |    2 ++
 2 files changed, 4 insertions(+), 1 deletion(-)



commit 7118e45b0cf532d473a7d670e473e3ec086c2302
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 13 04:53:30 2004 +0000

    Working on implementation of UniqueInputSwitch.


 b/wm/unique/IDEAS              |    1 
 b/wm/unique/Makefile.am        |    4 
 b/wm/unique/classes/window.c   |    2 
 b/wm/unique/context.c          |   36 +++++-
 b/wm/unique/device.c           |   85 ++++++++++++--
 b/wm/unique/device.h           |   51 ++++++--
 b/wm/unique/devices/keyboard.c |    6 +
 b/wm/unique/devices/pointer.c  |    6 +
 b/wm/unique/devices/wheel.c    |    6 +
 b/wm/unique/input_events.h     |   94 +++++++++++++++
 b/wm/unique/input_switch.c     |  245 +++++++++++++++++++++++++++++++++++++++++
 b/wm/unique/input_switch.h     |   54 +++++++++
 b/wm/unique/internal.h         |   10 +
 wm/unique/events.h             |   94 ---------------
 14 files changed, 569 insertions(+), 125 deletions(-)



commit 076b2df147b991f13e99b33c46b28ec781ba8e55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 13 02:17:46 2004 +0000

    Create an instance of each device class and
    connect sources matching certain capabilities.
    
    Added magic to WMShared.


 classes/foo.c |    2 -
 context.c     |   83 +++++++++++++++++++++++++++++++++++++++++++++++++---------
 device.c      |    2 -
 internal.h    |    4 ++
 unique.c      |    8 +++++
 uniquewm.c    |   27 ++++++++++--------
 window.c      |   14 ++++-----
 7 files changed, 105 insertions(+), 35 deletions(-)



commit 2368c36a52beccf37794ccbb45f6ff431515cbf9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 13 02:15:52 2004 +0000

    Added DFBInputDeviceCapabilities parameter to dfb_input_enumerate_devices().


 core/input.c       |    7 ++++---
 core/input.h       |    5 +++--
 core/windowstack.c |    2 +-
 idirectfb.c        |    6 +++---
 4 files changed, 11 insertions(+), 9 deletions(-)



commit b9ed525415145a6ffda4fce809f2e58181af4703
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 13 01:30:41 2004 +0000

    Wrote about UniqueInputSwitch and UniqueInputChannel. Updated UniqueCursor.


 IDEAS |   22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)



commit 489dd07038d10673255781c4d59e10b88bd9f9f3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 23:58:50 2004 +0000

    Increased lower domain field width from 16 to 18.


 debug.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5fc5e89aca1b8c4954c49ccc0c314b2b43e4342f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 23:53:50 2004 +0000

    Added debug domain "Core/SurfaceMgr".


 surfacemanager.c |   35 +++++++++++++++--------------------
 1 file changed, 15 insertions(+), 20 deletions(-)



commit 5f25f78470595462a1dd73587b311a8881096809
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 23:47:33 2004 +0000

    Added debug domain and a message in dfb_surface_create() including the
    name of the pixel format.


 surfaces.c |   54 +++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 43 insertions(+), 11 deletions(-)



commit e54470da77b92d070825c434efb21d7aeb2e834c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 23:46:43 2004 +0000

    Added D_DEBUG_ENABLED which is defined depending on three other macros.
    It's defined to be 1, if the D_DEBUG* macros produce code. Useful for
    embracing code that it's just required for the debugging output.


 debug.h |    4 ++++
 1 file changed, 4 insertions(+)



commit 6512c128f47a3613af2405d8f16e0a9736dcf042
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 20:59:40 2004 +0000

    "make distcheck" works again.


 lib/direct/Makefile.am     |    2 +-
 lib/fusion/Makefile.am     |    2 +-
 lib/voodoo/Makefile.am     |    2 +-
 tools/Makefile.am          |    4 ++--
 wm/unique/Makefile.am      |    1 +
 wm/unique/data/Makefile.am |    2 +-
 6 files changed, 7 insertions(+), 6 deletions(-)



commit 83adb9ad138de068b61ee13de5b81c34b4f7445b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 12 17:53:57 2004 +0000

    Worked on the design and began with its implementation.


 configure.in                  |    1 
 src/core/coretypes.h          |    3 
 src/core/input.c              |   42 +++++
 src/core/input.h              |    3 
 wm/unique/FLOW                |   15 +
 wm/unique/IDEAS               |   42 +++++
 wm/unique/Makefile.am         |    5 
 wm/unique/context.c           |   21 ++
 wm/unique/device.c            |  335 ++++++++++++++++++++++++++++++++++++++++++
 wm/unique/device.h            |   85 ++++++++++
 wm/unique/devices/.cvsignore  |    6 
 wm/unique/devices/Makefile.am |   20 ++
 wm/unique/devices/keyboard.c  |   86 ++++++++++
 wm/unique/devices/pointer.c   |   86 ++++++++++
 wm/unique/devices/wheel.c     |   86 ++++++++++
 wm/unique/events.h            |   94 +++++++++++
 wm/unique/internal.h          |  114 +++++++++++---
 wm/unique/types.h             |   16 +-
 wm/unique/uniquewm.c          |  143 +++++++++++++++--
 wm/unique/window.c            |    6 
 20 files changed, 1153 insertions(+), 56 deletions(-)



commit 064c7d839e50c94f224f2ba91d07a69638b4b6c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 11 20:08:08 2004 +0000

    Comment out ".o" here.


 IDirectFBFont/Makefile.am          |    2 +-
 IDirectFBImageProvider/Makefile.am |    2 +-
 IDirectFBVideoProvider/Makefile.am |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)



commit 5ee75de3e1cc595c8e89b2b6529bb43a8cea96be
Author: Andreas Kotes <count@directfb.org>
Date:   Thu Nov 11 19:18:13 2004 +0000

    apply more fixes


 IDirectFBFont/Makefile.am          |    2 +-
 IDirectFBImageProvider/Makefile.am |    2 +-
 IDirectFBVideoProvider/Makefile.am |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)



commit ce1ca42ca9c15ef969b3c7a71252216deee9769b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 11 16:34:32 2004 +0000

    nother try


 inputdrivers/dbox2remote/Makefile.am |    2 +-
 inputdrivers/elo/Makefile.am         |    2 +-
 inputdrivers/h3600_ts/Makefile.am    |    2 +-
 inputdrivers/joystick/Makefile.am    |    2 +-
 inputdrivers/keyboard/Makefile.am    |    2 +-
 inputdrivers/linux_input/Makefile.am |    2 +-
 inputdrivers/lirc/Makefile.am        |    2 +-
 inputdrivers/mutouch/Makefile.am     |    2 +-
 inputdrivers/ps2mouse/Makefile.am    |    2 +-
 inputdrivers/serialmouse/Makefile.am |    2 +-
 inputdrivers/sonypi/Makefile.am      |    2 +-
 inputdrivers/ucb1x00_ts/Makefile.am  |    2 +-
 inputdrivers/wm97xx_ts/Makefile.am   |    2 +-
 systems/fbdev/Makefile.am            |    2 +-
 wm/default/Makefile.am               |    2 +-
 wm/unique/Makefile.am                |    2 +-
 16 files changed, 16 insertions(+), 16 deletions(-)



commit c1c84c8bea2615d43f4e43e1c131fc284da3d349
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 11 13:56:49 2004 +0000

    Commented out ".o" files here until build problems are fixed.


 inputdrivers/dbox2remote/Makefile.am |    2 +-
 inputdrivers/elo/Makefile.am         |    2 +-
 inputdrivers/h3600_ts/Makefile.am    |    2 +-
 inputdrivers/joystick/Makefile.am    |    2 +-
 inputdrivers/keyboard/Makefile.am    |    2 +-
 inputdrivers/linux_input/Makefile.am |    2 +-
 inputdrivers/lirc/Makefile.am        |    2 +-
 inputdrivers/mutouch/Makefile.am     |    2 +-
 inputdrivers/ps2mouse/Makefile.am    |    2 +-
 inputdrivers/serialmouse/Makefile.am |    2 +-
 inputdrivers/sonypi/Makefile.am      |    2 +-
 inputdrivers/ucb1x00_ts/Makefile.am  |    2 +-
 inputdrivers/wm97xx_ts/Makefile.am   |    2 +-
 systems/fbdev/Makefile.am            |    2 +-
 wm/default/Makefile.am               |    2 +-
 wm/unique/Makefile.am                |    2 +-
 16 files changed, 16 insertions(+), 16 deletions(-)



commit 9e0e490838b44d0eacc15709c6f631e5d94c9f14
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 10 23:34:54 2004 +0000

    Use core functions for the wm hack implementation to keep the core's opinion
    about the window configuration in sync with ours.
    This workaround will be obsolete soon.


 context.c |   26 +++++++-------------------
 1 file changed, 7 insertions(+), 19 deletions(-)



commit f92df569d5ce6d3377e011b241c58b69c0e5ef29
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Nov 9 18:50:10 2004 +0000

    Fixed ram amount detection on Xbox (thanks to Oliver Schwartz).


 nvidia.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 1e157c6042bc1fa46da166f1e975eefafd23643c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 09:39:39 2004 +0000

    Code cosmetics.


 context.c |   17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)



commit 8c6cb4e8a7a52a0a03c5015ff34fdef46a8cc4db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 08:06:22 2004 +0000

    Use colorizing for the borders. The color can be changed with "test_color".
    
    Some fixes.


 classes/foo.c |   47 +++++++++++++++++++++++++++++++++++++++--------
 context.c     |    2 +-
 unique.c      |   12 ++++++++++++
 window.c      |   26 +++++++++++++++++++-------
 4 files changed, 71 insertions(+), 16 deletions(-)



commit 0e1a7cd82b22d04bd8a6c2035f5194aea130e0a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 07:37:56 2004 +0000

    Added debug domain.
    
    Added debug message in dfb_window_resize().


 windows.c |   16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)



commit d1c71218d539f6f493926ecae5c3bf5d9b1e9a66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 07:36:27 2004 +0000

    Fixed wrong assertions in dfb_region_from_rectangle().


 util.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 9fcd8bddb3965962e85e1048ed54b15d5f4be458
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 04:47:40 2004 +0000

    Removed obsolete Reaction structs from CardState.


 gfxcard.h |    2 +-
 state.h   |    3 ---
 wm.h      |    2 +-
 3 files changed, 2 insertions(+), 5 deletions(-)



commit eee48a56b8c74b19c499f56307771f37b50543f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 04:21:36 2004 +0000

    Simplified Flip().


 idirectfbsurface.c |   45 ++++++++++++++++++++-------------------------
 1 file changed, 20 insertions(+), 25 deletions(-)



commit 0cf9dd0dc7a265e5efe30eaf909a0a53281325b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 04:03:14 2004 +0000

    Simplified Flip() here, too.
    
    Added "const" to the region parameter of dfb_window_repaint().


 core/windows.c                    |    2 +-
 core/windows.h                    |    2 +-
 display/idirectfbsurface_window.c |   26 +++++++++++---------------
 3 files changed, 13 insertions(+), 17 deletions(-)



commit dc86a5b0b0aa47dcab63df5171922b24e2342891
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 03:54:47 2004 +0000

    Simplified Flip() a lot.


 idirectfbsurface_layer.c |   37 ++++++++++++-------------------------
 1 file changed, 12 insertions(+), 25 deletions(-)



commit 64f4b8c62d5859359eb285ac7cf36ecaf56f890c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 03:36:40 2004 +0000

    Removed influence on layer context reference count which caused the
    cursor window reference count to be one greater in the output than
    the layer context reference count, because during window dump the
    context reference was increased.


 dfbdump.c |   21 ++++++++++++++++++---
 1 file changed, 18 insertions(+), 3 deletions(-)



commit 94b605ce88d584258a9823e94eb1b7c42da59537
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 03:22:52 2004 +0000

    Forgot dfb_font_drop_destination() in IDirectFBSurface_Destruct().


 idirectfbsurface.c |   17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)



commit 7d0e56baf7a5c8b206c3e7aa8bbd2b9156ab816f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 03:05:39 2004 +0000

    Fixed invalid clipping region of sub surfaces
    created outside of the physical surface's area.
    
    Thanks to DFB_REGION_ASSERT() in dfb_state_lock()  :-)


 display/idirectfbsurface.c |   37 +++++++++++++------------------------
 display/idirectfbsurface.h |    9 +++++++--
 misc/util.h                |    3 +++
 3 files changed, 23 insertions(+), 26 deletions(-)



commit f64144067fe8a2843ea8e1cafc71aa9a100ca5fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 02:35:16 2004 +0000

    Added -D_GNU_SOURCE.


 direct.pc.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 17ebdfb372b4b420be3e0c00f928845ad731e75b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 02:28:03 2004 +0000

    Use DirectSerial for CoreSurface, increased by dfb_surface_notify_listeners().
    
    Removed the surface listeners attached by dfb_state_set_destination() and
    dfb_state_set_source().
    
    Store the serial of the source and destination surface in each state.
    
    Added dfb_state_update() which does the work of the removed listeners
    if direct_serial_update() returns true. Updating the source is optional.
    Only surfaces set via dfb_state_set_*() are handled.
    
    Use dfb_state_update() in dfb_gfxcard_state_acquire() and gAcquire().
    
    Use dfb_state_set_destination() for the font's state to avoid setting up the
    accelerators destination settings for each DrawString().
    
    Added dfb_font_drop_destination() being called by IDirectFBSurface::SetFont()
    and IDirectFBSurface_Destruct() and unsets the font's state destination if it
    matches the specified surface. This avoids late deallocation of the surface
    when the font's state destination is changed for another reason.


 core/core.c                |    2 
 core/fonts.c               |  130 +++++++++++++++++++----------------
 core/fonts.h               |   30 +++++---
 core/gfxcard.c             |   36 ++++-----
 core/gfxcard.h             |   12 +--
 core/state.c               |  163 +++++++++++++++++++++------------------------
 core/state.h               |  110 +++++++++++++++++-------------
 core/surfaces.c            |    7 +
 core/surfaces.h            |    6 +
 core/system.h              |    2 
 core/wm.h                  |    2 
 display/idirectfbsurface.c |   21 ++++-
 gfx/generic/generic.c      |   32 ++++----
 13 files changed, 308 insertions(+), 245 deletions(-)



commit 815aa7030956c56581aefc73dc3a8204be7a460e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 01:57:34 2004 +0000

    Added DirectSerial providing a 64 bit serial number
    while the implementation uses two unsigned 32 bit integers.
    
    Measurements have shown that (at least on my Athlon Thunderbird 1.33)
    emulating the 64 bit value myself is 50% to 100% faster
    than simply using the builtin 64 bit code of the compiler.
    
    The following static inline functions are defined:
    - direct_serial_init()      initialize serial to zero, set magic
    - direct_serial_deinit()    right now it only clears the magic
    - direct_serial_increase()  advance serial number by one
    - direct_serial_copy()      set serial to the value of another
    - direct_serial_update()    returns false if the serial is up to date
                                with another, otherwise returns true
                                after updating the serial


 Makefile.am |    1 
 serial.h    |  100 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 types.h     |    1 
 3 files changed, 102 insertions(+)



commit 11dd34edd2627c0ff8a01339c567828877589290
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 9 00:44:48 2004 +0000

    Added D_FLAGS_ARE_IN(flags,f) to check that any set flags are contained in 'f'.


 util.h |    1 +
 1 file changed, 1 insertion(+)



commit e9b82464e93b2b11b2af088e089d10014abce543
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Nov 8 17:39:02 2004 +0000

    Work around on ram amount detection on Xbox.


 nvidia.c |    2 ++
 1 file changed, 2 insertions(+)



commit bce285dde29a1bab7dc6dea9bee08742b4511d3e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Nov 8 14:13:20 2004 +0000

    Fixed offset mask calculation.


 nvidia.c |   27 +--------------------------
 1 file changed, 1 insertion(+), 26 deletions(-)



commit 60f54769167e9289a426620d6a13287a92ee5db8
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Nov 8 13:42:05 2004 +0000

    Memory alignment set to 64.
    Use offset mask according to the effective memory size.


 nvidia.c         |   49 ++++++++++++++++++++++++++++++++++++++-----------
 nvidia.h         |    2 ++
 nvidia_overlay.c |    9 +++++----
 nvidia_primary.c |    6 ++----
 4 files changed, 47 insertions(+), 19 deletions(-)



commit ea6f27ec0621dc2653c955a11c2deabb58e31af5
Author: Michael Natterer <mitch@directfb.org>
Date:   Mon Nov 8 12:32:28 2004 +0000

    - link stret_test against $(top_builddir)/src/libdirectfb.la
    - removed trailing whitespace


 Makefile.am |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 7b23fba83d9b3683c8865f69b4fdd2a4d5c12859
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 8 00:36:10 2004 +0000

    Hotfix missing fusion_ref_inherit() in single app fusion.


 ref.c |   10 ++++++++++
 1 file changed, 10 insertions(+)



commit fead4b726fb52e5a0aef6aea465ef32c0a90cdea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 8 00:31:19 2004 +0000

    Fix compile error with single app core.


 ref.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 5723501ac7c5cc6d755f727d71c0b19a1b3749a9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Nov 7 16:12:47 2004 +0000

    Scan only devices on bus 1 and following (fixes wrong detection with nForce boards).


 nvidia.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit 99088b057afb83c2d58def1d4e89b41833784b3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 14:44:25 2004 +0000

    Optionally, stret_region_at() can look for a specific region class only.
    
    Added some safety to unique_context_window_at() in case other regions
    have SRF_INPUT set while not being UCI_WINDOW or UCI_FOO. It doesn't use
    the feature above, though.


 context.c |   12 ++++++++++--
 stret.c   |   12 ++++++++----
 stret.h   |    3 ++-
 3 files changed, 20 insertions(+), 7 deletions(-)



commit 1a3d6fbee3b62af9c591871bf4ab8945351d43e9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 14:18:33 2004 +0000

    Fixed failing assumption due to missing stret_iteration_abort() in region_update().


 stret.c |    2 ++
 1 file changed, 2 insertions(+)



commit d54cb26f75520e9bf00764ee767069005c884705
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 14:06:14 2004 +0000

    Added option "no-decorations".


 src/misc/conf.c    |   10 +++++++++-
 src/misc/conf.h    |    2 ++
 wm/unique/window.c |    2 +-
 3 files changed, 12 insertions(+), 2 deletions(-)



commit 0a26336da079447f016ad12421ed0abad6a7dfbd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 13:29:19 2004 +0000

    Fixed update of frames with opaque content.


 stret.c           |    6 +++---
 stret_iteration.c |   14 +++++++++++++-
 stret_iteration.h |   15 +++++++++------
 stret_test.c      |    2 +-
 window.c          |    4 ++--
 5 files changed, 28 insertions(+), 13 deletions(-)



commit 68ec27cf94fe07d705a58fc3825db7ba3abc808e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 12:27:51 2004 +0000

    Fixed missing updates when undecorated windows are resized.


 window.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 48ab92e77d81a06140eae7a8491274c3ae6cf934
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 12:06:01 2004 +0000

    Added global reactions to be notified, when a context or window is destroyed.
    The reactions are in the wm module. Therefore wrapper functions had to be
    added in the wm library, to avoid linking the library against the module.
    The wrappers are using callbacks passed to the library during module init.


 context.c  |    6 --
 context.h  |    5 +
 internal.h |   21 +++++++
 unique.c   |  161 +++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 uniquewm.c |   40 +++++++++++++++
 window.c   |   28 ++++++++++
 window.h   |   15 ++++-
 7 files changed, 244 insertions(+), 32 deletions(-)



commit ae7302082ef95a9aef3cedf967c808462a89dbc7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 12:00:27 2004 +0000

    Unlink layer region in window_destructor(), not in dfb_window_destroy().


 windows.c |   18 +++++++-----------
 1 file changed, 7 insertions(+), 11 deletions(-)



commit c3a2645ae7c41d1f4aff7f5da7def6e5a91711c2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 10:19:17 2004 +0000

    Show list of windows in uwmdump.


 uniquewm.c |   12 ++++++
 uniquewm.h |    6 +++
 uwmdump.c  |  109 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 3 files changed, 121 insertions(+), 6 deletions(-)



commit 19429a502d9b0cd3eee8c1141c22e7295a290fc0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 7 09:15:20 2004 +0000

    Use new Fusion API for entering the world.
    
    Added fusion_ref_inherit() using the new ioctl FUSION_REF_INHERIT.
    
    Added fusion_object_inherit() to inherit the local reference count
    from another object of any type.
    
    Fixed the global reference cycle "Layer Context, Layer Region,
    Cursor Window" by removing the global reference to the Cursor Window,
    which now inherits local references from the Layer Context, i.e. if the
    last application releases the stack, the cursor gets destroyed :-)
    
    Fixed the global reference cycle of "Layer Context, Layer Region,
    Unique Context" using the same technique.
    
    Added "docs/ReferenceMaps.txt" which explains references
    and visualizes different cases of inter object referencing.
    
    -
    
    Split unique window manager code into the objects UniqueContext
    and UniqueWindow. The wm module only uses the unique wm library,
    nothing is implemented in the module any longer. Moved all stuff
    from StackData and WindowData to UniqueContext and UniqueWindow
    respectively. Added methods to these new objects to implement
    the current functionality for now.
    
    Added the ability to create a StReT Region with multiple levels.
    Actually, there's a variable number of children vectors now. This
    eliminates the usage of invisible StReT Regions all having the same
    size to emulate the levels. Creation of a Region needs specification
    of the number of provided levels, now. Additionally, the level to
    be added to within the parent must be specified.
    
    The Root Region consists of these UniqueRootLevel's:
    - UNRL_DESKTOP     Icons, redirected fullscreen apps (force-desktop)
    - UNRL_USER        User windows (currently available stacking classes)
    - UNRL_SYSTEM      Dock/Panel, Glass, Expos, Clipboard, Virtual Keyboard, IMs
    - UNRL_CURSOR      Cursor shape and attached objects, e.g. Drag'N'Drop
    - UNRL_SCREEN      Display Locking, Screensaver
    
    The Frame Region consists of these UniqueFrameLevel's:
    - UNFL_BACKGROUND  Background for blended content, effects, decorations
    - UNFL_CONTENT     The actual DirectFB Window, i.e. its content
    - UNFL_FOREGROUND  Decorations, effects, any other content overlay
    
    Added "uwmdump" in the flavor of "dfbdump", but not showing much, yet.
    
    Added debug domain and messages to StReT Iteration code, along with support
    for the new level feature.
    
    Enhanced "stret_test" to check for correct implementation of multiple levels.
    
    -
    
    Added a CoreWindowConfig containing position, size, opacity, stacking,
    options, events, color key and opaque region.
    
    Added dfb_wm_set_window_config() to change any combination of the different
    settings with one call. Current implementations, however, simply iterate over
    each entry, e.g. still two window stack updates for changing position and size.
    
    Removed dfb_wm_move_window(), dfb_wm_resize_window(), dfb_wm_set_opacity()
    and dfb_wm_set_options().
    
    Added dfb_wm_set_active() to notify the window manager about layer context
    switches, e.g. switching to a full screen application.
    
    In dfb_layer_context_activate() and dfb_layer_context_deactivate(): replaced
    calls to dfb_windowstack_repaint_all() and dfb_wm_flush_keys()
    by dfb_wm_set_active().
    
    Replaced dfb_window_set_options() by dfb_window_change_options() which takes
    two bit masks: one for clearing bits and one for setting bits afterwards.
    
    Added dfb_window_change_events() in the same flavor.
    
    -
    
    Added debug domain to the main file of fusion.
    
    Minor API cleanups, e.g. adding return values (DFBResult).


 docs/ReferenceMaps.txt                |  127 +
 lib/fusion/fusion.c                   |   37 
 lib/fusion/object.h                   |   13 
 lib/fusion/ref.c                      |   31 
 lib/fusion/ref.h                      |    8 
 src/core/core.c                       |    4 
 src/core/coretypes.h                  |    1 
 src/core/gfxcard.c                    |    2 
 src/core/layer_context.c              |   32 
 src/core/layer_context.h              |    8 
 src/core/layers.c                     |    8 
 src/core/layers.h                     |    2 
 src/core/windows.c                    |  316 +++-
 src/core/windows.h                    |   97 +
 src/core/windows_internal.h           |   23 
 src/core/windowstack.c                |   93 -
 src/core/windowstack.h                |    1 
 src/core/wm.c                         |   87 -
 src/core/wm.h                         |   66 
 src/core/wm_module.h                  |   44 
 src/display/idirectfbsurface_window.c |    5 
 src/windows/idirectfbwindow.c         |  122 -
 tools/dfbdump.c                       |   17 
 wm/default/default.c                  |  441 +++---
 wm/unique/.cvsignore                  |    1 
 wm/unique/Makefile.am                 |   18 
 wm/unique/STRET                       |   29 
 wm/unique/classes/foo.c               |   24 
 wm/unique/classes/root.c              |   10 
 wm/unique/classes/window.c            |   25 
 wm/unique/context.c                   | 1247 ++++++++++++++++-
 wm/unique/context.h                   |   67 
 wm/unique/internal.h                  |  129 +
 wm/unique/stret.c                     |   91 -
 wm/unique/stret.h                     |    4 
 wm/unique/stret_iteration.c           |   62 
 wm/unique/stret_iteration.h           |    1 
 wm/unique/stret_test.c                |   16 
 wm/unique/types.h                     |    3 
 wm/unique/unique.c                    | 2470 ++--------------------------------
 wm/unique/uniquewm.c                  |   16 
 wm/unique/uwmdump.c                   |  174 ++
 wm/unique/window.c                    | 1387 +++++++++++++++++++
 wm/unique/window.h                    |  126 +
 44 files changed, 4437 insertions(+), 3048 deletions(-)



commit 0c23dc54c9a9bc625ba821b90feeaeb8445f67b8
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Nov 6 13:33:39 2004 +0000

    Attempt to make the driver work with GeForce3/4 and XBox.


 nvidia.c         |  284 ++++++++++++++++++++++++++++++++++++++++++-------------
 nvidia.h         |   12 +-
 nvidia_2d.c      |    4 
 nvidia_overlay.c |   20 ++-
 nvidia_primary.c |   20 +--
 5 files changed, 255 insertions(+), 85 deletions(-)



commit 61f28b7d386332698e1dab4df0bb43a0208d3430
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:16:31 2004 +0000

    Added DWET_NONE.
    
    Clarified two statements.


 directfb.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 66f665d11701633bc367af5c13070b92a71349a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:14:06 2004 +0000

    Added
    - DFB_RECTANGLE_VALS(r)
    - DFB_REGION_VALS(r)
    - DFB_REGION_VALS_FROM_RECTANGLE_VALS(x,y,w,h)
    - DFB_REGION_INIT_FROM_RECTANGLE_VALS(x,y,w,h)
    - dfb_rectangle_from_rectangle_plus_insets(dest,source,insets)
    - dfb_region_region_intersects(r1,r2)


 util.h |   34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)



commit fc227db2ca95117307b2f22ddd5df5ab3f23e1da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:10:08 2004 +0000

    Some debug messages in Destruct().


 idirectfbdisplaylayer.c |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit 994af0398a72e7b0f9300abd6e1f963274039842
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:07:38 2004 +0000

    More debug messages during pool destruction.


 object.c |   10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)



commit dc6ea7a11c3294f0aadfe853a9aece51e99d7c4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:06:30 2004 +0000

    Send SIGKILL to the process group instead of the received signal at the
    end of the handler.


 signals.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c7aec808f65ad07c39c09c9c885df31845b959d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:05:26 2004 +0000

    Fix endless recursion if warning about the number of frames
    is printed while printing a stack trace.


 trace.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 9f56d78b1b1e4e9d09208c92773048154f3611d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 6 08:03:20 2004 +0000

    Added D_MAGIC_ASSERT_IF which doesn't fail if the pointer is NULL.


 debug.h |   73 +++++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 40 insertions(+), 33 deletions(-)



commit 66ce447fb6c36197cd002a34835280ecdcbee8b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 5 20:44:15 2004 +0000

    Build tools before wm.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 481c314144166b7b22174e4d42023bf558f334d4
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Nov 5 17:51:39 2004 +0000

    Partial rewrite of the nVidia driver:
         - all drawing blend functions are supported,
         - StretchBlit supports RGB16 now,
         - added a really fast Flip() function,
         - experimental WaitForSync() support.
    
    Switch to version 0.3.


 Makefile.am      |   23 -
 nvidia.c         |  863 +++++++++++++++++++++++++++++--------------------------
 nvidia.h         |  209 ++++++-------
 nvidia_2d.c      |  254 ++++++++++++++++
 nvidia_2d.h      |   49 +++
 nvidia_3d.c      |  194 ++++++++++++
 nvidia_3d.h      |   32 ++
 nvidia_primary.c |  236 +++++++++++++++
 nvidia_tables.h  |  264 +++++++++++++++-
 9 files changed, 1592 insertions(+), 532 deletions(-)



commit db650aca44d4868d3de12d7eb747388e4d659a8c
Author: Michael Natterer <mitch@directfb.org>
Date:   Fri Nov 5 14:26:10 2004 +0000

    - renamed conditional DIRECTFB_CSOURCE to BUILD_DIRECTFB_CSOURCE
    - check for directfb-csource in PATH if we are cross compiling or
      building --without-tools
    - use the directfb-csource from PATH only in the above cases and use
      the one from $(top_builddir)/tools otherwise.


 configure.in               |   13 ++++++++++++-
 docs/Makefile.am           |    2 +-
 tools/Makefile.am          |    2 +-
 wm/unique/data/Makefile.am |   12 +++++++++++-
 4 files changed, 25 insertions(+), 4 deletions(-)



commit 0b04d88319b79642092304c728c4b3bf4fa4471f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 5 13:07:08 2004 +0000

    Use old allocation behaviour, but fix the static assignment of Sacc and Dacc.


 generic.c |   98 +++++++++++++++++++++++++++++---------------------------------
 1 file changed, 46 insertions(+), 52 deletions(-)



commit 6f8a1aff2f008a6d5b53ec87b6f1b0f145aa397f
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Nov 5 11:04:08 2004 +0000

    BugFix:
    since gfxs->Sacc of gfxs->Dacc may point to gfxs->Aacc, allocate
    the accumulation buffer when the Swrast histance is created and use
    realloc to resize.


 generic.c |   95 +++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 51 insertions(+), 44 deletions(-)



commit 92b71fd51b0490cc463666ef6d0b6307e1cd3c49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 5 01:45:48 2004 +0000

    Removed FusionResult using DirectResult instead.


 lib/fusion/arena.c                    |   54 ++++++-------
 lib/fusion/arena.h                    |    8 +-
 lib/fusion/call.c                     |   50 ++++++------
 lib/fusion/call.h                     |    8 +-
 lib/fusion/fusion.c                   |   12 +--
 lib/fusion/fusion.h                   |    2 
 lib/fusion/lock.c                     |   52 ++++++-------
 lib/fusion/lock.h                     |   10 +-
 lib/fusion/object.c                   |   28 +++----
 lib/fusion/object.h                   |   34 ++++----
 lib/fusion/property.c                 |   78 +++++++++----------
 lib/fusion/property.h                 |   16 ++--
 lib/fusion/reactor.c                  |   84 ++++++++++-----------
 lib/fusion/reactor.h                  |   12 +--
 lib/fusion/ref.c                      |  134 +++++++++++++++++-----------------
 lib/fusion/ref.h                      |   20 ++---
 lib/fusion/types.h                    |   16 ----
 lib/fusion/vector.c                   |   26 +++---
 lib/fusion/vector.h                   |   10 +-
 src/core/core.c                       |    8 +-
 src/core/core.h                       |    6 -
 src/core/input.c                      |    8 +-
 src/core/input.h                      |    8 +-
 src/core/layer_context.c              |    4 -
 src/core/layer_context.h              |    4 -
 src/core/layer_region.c               |    4 -
 src/core/layer_region.h               |    4 -
 src/core/surfaces.c                   |    2 
 src/core/surfaces.h                   |    2 
 src/core/windowstack.c                |    4 -
 src/core/windowstack.h                |    4 -
 src/display/idirectfbsurface.c        |    2 
 src/display/idirectfbsurface_window.c |    2 
 systems/fbdev/fbdev.c                 |    2 
 tools/dfbdump.c                       |    6 -
 tools/fusion_bench.c                  |    8 +-
 wm/unique/uniquewm.c                  |    2 
 wm/unique/uniquewm.h                  |    2 
 38 files changed, 360 insertions(+), 376 deletions(-)



commit 367016d1af6378321c528f08c66ec17e2d55dfb1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Nov 4 15:35:21 2004 +0000

    Primary mouse should actually be a mouse.


 linux_input.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 63291c3f80c39beecd0084379f33b26905bd8e6e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 4 05:46:21 2004 +0000

    Thanks to Bryce Nichols <bryce@bnichols.org> for reducing the hardware
    rounding errors in 16 bit mode by rendering the upper left and lower right
    triangle pair instead of the upper right and lower left.


 README                          |    1 +
 gfxdrivers/cle266/uc_accel.c    |    8 ++++----
 gfxdrivers/unichrome/uc_accel.c |    8 ++++----
 3 files changed, 9 insertions(+), 8 deletions(-)



commit 30bb86d7011b05b7fd6e6176c6ccd0fbe7d8a0e3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 2 16:12:38 2004 +0000

    Added missing includes.


 messages.c |    2 ++
 1 file changed, 2 insertions(+)



commit 7c8473d0795aa5ef859d946303fada9a39056faf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 2 16:11:51 2004 +0000

    Moved D_FORMAT_PRINTF to <direct/messages.h> again.


 messages.h |    8 +++++++-
 util.h     |    2 --
 2 files changed, 7 insertions(+), 3 deletions(-)



commit f0d5db467127dfe01338ebcaf5e29ed2d8b519b8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 2 15:55:11 2004 +0000

    Renamed DIRECT_BUILD_NOTEXT to DIRECT_BUILD_TEXT.
    
    Exclude debug message functions from the library
    if DIRECT_BUILD_TEXT is false.
    
    Always enable magic handling macros, because
    - just setting and clearing the magic in non-debug mode doesn't hurt
    - DIRECT_FORCE_DEBUG works for magic assertions again
    
    Renamed all flag manipulation macros, using the prefix "D_FLAGS_" now.
    
    Moved D_FORMAT_PRINTF(n) and D_CONST_FUNC to <direct/util.h>.
    
    Added D_ARRAY_SIZE(array).


 configure.in                |    6 +--
 lib/direct/build.h.in       |    2 -
 lib/direct/debug.c          |   12 +++++++
 lib/direct/debug.h          |   23 +++++---------
 lib/direct/messages.c       |    2 -
 lib/direct/messages.h       |   31 +++++++++-----------
 lib/direct/thread.c         |    4 +-
 lib/direct/types.h          |    8 -----
 lib/direct/util.h           |   21 +++++++++++--
 src/core/gfxcard.c          |    2 -
 src/core/layer_context.c    |   10 +++---
 src/core/layer_region.c     |   68 ++++++++++++++++++++++----------------------
 src/core/windows.c          |   12 +++----
 wm/default/default.c        |    2 -
 wm/unique/stret.c           |   16 +++++-----
 wm/unique/stret_iteration.c |    2 -
 16 files changed, 117 insertions(+), 104 deletions(-)



commit 74955c65a1b512a8a0cbd809f1cf65c862eaa570
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 23:09:12 2004 +0000

    Ensure minimum region sizes at least (1x1).


 unique.c |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit a55745305b000efb3d3fe1f70823e76119f6f7ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 22:49:29 2004 +0000

    Added dfb_window_set_options() which calls the new window manager function
    SetOptions() to keep track of and control changes.
    
    Update region flags when the window options are changed.
    
    Update window border region layout when the window is resized.


 src/core/windows.c            |   16 +++
 src/core/windows.h            |    7 +
 src/core/windowstack.c        |    9 -
 src/core/wm.c                 |   13 ++
 src/core/wm.h                 |   10 +
 src/core/wm_module.h          |    6 +
 src/windows/idirectfbwindow.c |    2 
 wm/default/default.c          |   15 ++
 wm/unique/stret.c             |   15 ++
 wm/unique/stret_iteration.c   |    6 +
 wm/unique/stret_iteration.h   |   10 +
 wm/unique/unique.c            |  217 +++++++++++++++++++++++++++++++-----------
 12 files changed, 256 insertions(+), 70 deletions(-)



commit 57f946df5673e8a55501051c4ede1cd5c22b884a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 18:37:25 2004 +0000

    Fixed author parsing (did the cvs log format change?).


 mkchlog |    9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)



commit a351585cc9167aa6e2602dd86f8caab708930465
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Nov 1 16:57:29 2004 +0000

    If core/state.h includes gfx/generic/generic.h then generic.h must be
    installed.


 Makefile.am |    5 +++++
 1 file changed, 5 insertions(+)



commit 360070605ec1f6c2ad8193a706a32baad1984f84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 10:13:41 2004 +0000

    Pass the CoreLayer to IDirectFBWindow_Construct() which
    doesn't require the internal layer header anymore, removed FIXME.


 display/idirectfbdisplaylayer.c |    4 ++--
 windows/idirectfbwindow.c       |    5 ++---
 windows/idirectfbwindow.h       |    2 +-
 3 files changed, 5 insertions(+), 6 deletions(-)



commit beda24ea9fa888264b1f6a38306a909fee53326c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 10:00:11 2004 +0000

    Allocate accumulators dynamically, removed FIXME.
    
    Accumulators are allocated upon first usage.
    Subsequent usage can only grow the accumulators.
    
    Sizes allocated are 256 at least, otherwise power of two. This should
    guarantee that there are very few (re)allocations, even in the worst case.


 core/state.c          |   10 ++++++++--
 core/state.h          |    4 +++-
 gfx/generic/generic.c |   35 +++++++++++++++++++++++++++++++++++
 gfx/generic/generic.h |   11 ++++++-----
 4 files changed, 52 insertions(+), 8 deletions(-)



commit b27f104b1bfcf071554e5a9e89c2225453da5ce5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 09:13:31 2004 +0000

    Implemented Sacc_toK_Aop_rgb24() correctly, removed FIXME.


 generic.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit fcabef16dded69b6a5e4d08d33ed49fb8d64c54d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 09:06:59 2004 +0000

    Added Sop_rgb332_SKto_Dacc(), removed FIXME.


 generic.c |   30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)



commit 1144015f65718c33dbd79086cc5832af738089de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 08:59:08 2004 +0000

    Killed another FIXME: Implement Bop_a8_set_alphapixel_Aop_rgb332() correctly.


 generic.c |   18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)



commit e14006b2865d67eef93f607ad4b290de1e293fe5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 08:16:14 2004 +0000

    Removed a FIXME: Pass a valid core to dfb_core_is_master() and turn
    the assumption "core != NULL" into an assertion.


 src/core/core.c        |    6 +-----
 systems/osx/osx.c      |    8 +++++++-
 systems/osx/osxinput.c |   14 +++++++-------
 systems/osx/primary.c  |   24 +++++++++++++-----------
 systems/sdl/primary.c  |   23 ++++++++++++-----------
 systems/sdl/sdl.c      |    9 +++++++--
 6 files changed, 47 insertions(+), 37 deletions(-)



commit 6f9a2176b2c3aac4946381828adadecd679d88cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 07:55:59 2004 +0000

    Implemented software clipping for hardware accelerated DrawRectangle().
    
    Use hardware accelerated FillRectangle() if DrawRectangle() is not accelerated.


 core/gfxcard.c |  135 ++++++++++++++++++++++++++++++++++++---------------------
 gfx/clip.h     |    9 +++
 2 files changed, 96 insertions(+), 48 deletions(-)



commit 0a5cfe68edceb68509b90c60ca36245f4495a5c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 07:01:45 2004 +0000

    Replace gDrawLine() usage by gFillRectangle() in
    software based rectangle outline drawing code.


 gfxcard.c |   44 +++++++++++++++++++++++++++-----------------
 1 file changed, 27 insertions(+), 17 deletions(-)



commit 29cb9ae3a4b122dfc4c30796efaaec3a87df3a68
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 06:34:43 2004 +0000

    First version of builtin window borders implemented by the "foo" class.
    This is just for testing and will be replaced by a more flexible approach.
    
    Use *much* simpler and cleaner recursive code for stret_region_visible() and
    stret_region_update() by separating their linear components from the recursive.
    
    Added functions for StReT iteration using one struct to hold the current state.
    This code is the linear part of the recursive functions mentioned above.
    
    Added small test program for StReT iteration code.
    
    Added default StReT region class to be used for "containing-only" regions
    which don't have any input or output themselves (only their children).
    
    Added stret_region_at() used in window_at_pointer().
    
    Added stret_region_get_size() and stret_region_data().


 b/configure.in                |    1 
 b/wm/unique/.cvsignore        |    1 
 b/wm/unique/Makefile.am       |   27 +
 b/wm/unique/classes/foo.c     |   96 +++----
 b/wm/unique/classes/frame.c   |   96 -------
 b/wm/unique/classes/root.c    |   10 
 b/wm/unique/context.c         |    2 
 b/wm/unique/data/.cvsignore   |    7 
 b/wm/unique/data/Makefile.am  |   21 +
 b/wm/unique/data/foo_e.png    |binary
 b/wm/unique/data/foo_n.png    |binary
 b/wm/unique/data/foo_ne.png   |binary
 b/wm/unique/data/foo_nw.png   |binary
 b/wm/unique/data/foo_s.png    |binary
 b/wm/unique/data/foo_se.png   |binary
 b/wm/unique/data/foo_sw.png   |binary
 b/wm/unique/data/foo_w.png    |binary
 b/wm/unique/internal.h        |   42 +++
 b/wm/unique/stret.c           |  570 +++++++++++++++---------------------------
 b/wm/unique/stret.h           |   16 +
 b/wm/unique/stret_iteration.c |  152 +++++++++++
 b/wm/unique/stret_iteration.h |   61 ++++
 b/wm/unique/stret_test.c      |  109 ++++++++
 b/wm/unique/unique.c          |  113 +++++++-
 b/wm/unique/uniquewm.c        |   61 ++++
 wm/unique/foo.h               |  356 --------------------------
 26 files changed, 869 insertions(+), 872 deletions(-)



commit 6298ace03112c3a6b5d5a11f715bf710553afa9c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 06:12:22 2004 +0000

    Added DWCAPS_NODECORATION, e.g. used for the cursor window.
    
    Preliminary and testing, might be changed.


 include/directfb.h     |    3 ++-
 src/core/windowstack.c |    4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)



commit 7cedf18f34f517c9e0fe992521efa7271f1eb1f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 06:10:38 2004 +0000

    Replaced dfb_gfxcard_fillrectangle() by dfb_gfxcard_fillrectangles().


 src/core/gfxcard.c             |   74 ++++++++++++++++++++++++-----------------
 src/core/gfxcard.h             |    2 -
 src/display/idirectfbsurface.c |    6 +--
 src/gfx/util.c                 |    2 -
 wm/default/default.c           |   16 ++++----
 5 files changed, 57 insertions(+), 43 deletions(-)



commit cd460b4a513ea758887f10b48d869c84160b72cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 1 05:53:09 2004 +0000

    Added dfb_rectangle_region_intersects().
    
    Added 'const' to dfb_region_intersects() parameter.
    
    Added some DFB_REGION_ASSERT where appropriate.


 core/state.h |    4 +-
 misc/util.h  |  102 ++++++++++++++++++++++++++++++++++++++---------------------
 2 files changed, 70 insertions(+), 36 deletions(-)



commit d7b3a6c73e52830617e085c532cf0ea696f79eb9
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Oct 31 14:33:51 2004 +0000

    Re-enable double/triple buffering.


 nvidia_overlay.c |  167 ++++++++++++++++++++++++++++---------------------------
 1 file changed, 87 insertions(+), 80 deletions(-)



commit 31b8cfbc1dfb0b84e61c8b53cf215257fb51027e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 30 20:02:46 2004 +0000

    Removed StReT stuff from default window manager module.
    
    Forked a new window manager module with the new StReT stuff.
    
    The new window manager consists of the wm module that is plugged into
    DirectFB and a library that contains the wm implementation. This library
    can be linked into programs, like in the "test_color" example which
    changes the global window border color. This test will be removed and
    replaced by a more sophisticated configuration system.


 b/configure.in                          |    2 
 b/src/core/windows.c                    |   19 
 b/src/core/windows.h                    |    4 
 b/src/core/windowstack.c                |    7 
 b/src/core/wm.c                         |  153 -
 b/src/core/wm.h                         |   22 
 b/src/core/wm_module.h                  |   11 
 b/src/display/idirectfbsurface_window.c |    2 
 b/src/windows/idirectfbwindow.c         |    4 
 b/wm/Makefile.am                        |    2 
 b/wm/default/Makefile.am                |    4 
 b/wm/default/default.c                  |  915 ++++++-----
 b/wm/unique/.cvsignore                  |    7 
 b/wm/unique/Makefile.am                 |   99 +
 b/wm/unique/classes/.cvsignore          |    6 
 b/wm/unique/classes/Makefile.am         |   21 
 b/wm/unique/classes/foo.c               |  145 +
 b/wm/unique/classes/frame.c             |  145 +
 b/wm/unique/classes/root.c              |  205 ++
 b/wm/unique/classes/window.c            |  139 +
 b/wm/unique/context.c                   |  128 +
 b/wm/unique/context.h                   |   80 +
 b/wm/unique/foo.h                       |  356 ++++
 b/wm/unique/internal.h                  |  152 +
 b/wm/unique/stret.c                     |  904 +++++++++++
 b/wm/unique/stret.h                     |  124 +
 b/wm/unique/test_color.c                |  220 ++
 b/wm/unique/types.h                     |   42 
 b/wm/unique/unique.c                    | 2550 ++++++++++++++++++++++++++++++++
 b/wm/unique/uniquewm.c                  |  213 ++
 b/wm/unique/uniquewm.h                  |   41 
 wm/default/stret.c                      |  723 ---------
 wm/default/stret.h                      |  116 -
 33 files changed, 6188 insertions(+), 1373 deletions(-)



commit 5110b85cf2f58c5d686a14d078494c1edbfe4ab7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 30 19:52:05 2004 +0000

    Added fusion_object_globalize() doing the often used combination of
    fusion_object_link() and fusion_object_unref(), i.e. increasing the global
    reference counter and decreasing the local reference counter.


 object.h |   18 ++++++++++++++++++
 1 file changed, 18 insertions(+)



commit d4186985036bf3aac3fe22cfcd6dd70621463e8f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 30 19:50:45 2004 +0000

    Align debug output of domains.


 debug.c |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)



commit 030682f88cc0bcb344cb007fff52281f1d2e40f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 30 19:50:12 2004 +0000

    Added debug domain.


 object.c |   13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)



commit eb3b21e5dcfcb66e2bcffb42af6c73118bcc6147
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 30 17:38:46 2004 +0000

    Commented out call to missing Gal_set_source_transparency().


 nsc.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 07993fffa1496b0d7b6bd2a1145ee378aa1ba941
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 28 01:32:17 2004 +0000

    Use RTLD_NOW to detect undefined symbols before the module is used at all.


 interface.c |    4 ++--
 modules.c   |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit f7a63c08fcba8c08b42eea1eedd6a9b12beed5fb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 23:40:31 2004 +0000

    No longer show MMX in core info line, but show debug / trace build.


 core.c |   16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)



commit 7a5d89ba08bd57b4763ce04b5fbf9b3641438247
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 23:33:33 2004 +0000

    Fixed missing MMX initialization in slaves, only the master used MMX before :O
    
    Fixed missing card capabilities in slaves with acceleration enabled,
    if the master has acceleration disabled.


 gfxcard.c |   20 +++++++++++++++-----
 1 file changed, 15 insertions(+), 5 deletions(-)



commit 1aad6a601f842a1c58c276ce359bb9f27862a71c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 20:28:13 2004 +0000

    In shared memory summary also show the total amount without pixel buffers.


 dfbdump.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 001260835423a2df1763936666824fc0ec020283
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 17:49:49 2004 +0000

    Added DFB_VERSIONMISMATCH error code.
    
    Added DFBInsets specifying a distance from each
    edge of a rectangle: left, top, right, bottom.


 include/directfb.h |   15 ++++++++++++++-
 lib/direct/util.c  |    2 ++
 2 files changed, 16 insertions(+), 1 deletion(-)



commit 9eb68b9b08579e8fab6b6b2ee099aa79eeecbe56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 17:46:51 2004 +0000

    More convenience:
    
    DFB_RECTANGLE_ASSERT(r) and DFB_REGION_ASSERT(r) fail if 'r' is NULL
    or if the coordinates are illegal, e.g. negative width or x1 > x2 etc.
    
    DFB_RECTANGLE_ASSERT_IF(r) and DFB_REGION_ASSERT_IF(r) don't fail
    if 'r' is NULL, but fail if 'r' is set with illegal coordinates.
    
    DFB_REGION_VALS_TRANSLATED(r,x,y)  (r)->x1 + x, (r)->y1 + y, (r)->x2 + x, (r)->y2 + y
    DFB_REGION_INIT_TRANSLATED(r,x,y)  { DFB_REGION_VALS_TRANSLATED(r,x,y) }
    
    DFB_REGION_VALS_INTERSECTED(r,X1,Y1,X2,Y2) in addition to
    the existing DFB_REGION_INIT_INTERSECTED(r,X1,Y1,X2,Y2).


 util.h |   44 ++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 40 insertions(+), 4 deletions(-)



commit 9a5ec2cfebc9ca9591abf645d17a6528c6030086
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 27 17:38:00 2004 +0000

    Exclude D_MAGIC_ASSERT & Co from DIRECT_FORCE_DEBUG enabled macros,
    because the magic value might not be set by other code compiled without
    debug macros.


 debug.h |   24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)



commit c1613c8ddfa4d3c15618d9e0e7f1ad1e2ea4d84e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 27 03:31:30 2004 +0000

    Fixed typo: DSOS_YC -> DSOC_YC.


 matrox_screen_crtc2.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fbde562b5c4e094f6d103e07a49f5d008106b64f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 16:10:33 2004 +0000

    Rewrote the recursive window stack update code in a reusable form.
    
    Those regions of the window stack being transparent, opaque, shaped etc.
    had been each window itself, but the new code allows to have a complete
    hierarchie of those regions.
    
    Therefore, the new code is all about the 'StReT', the Stack Region Tree.
    
    Right now, there's one StReT Region for each Window, but window borders
    are coming soon and each Window's StReT Region will be embedded into the
    border's StReT Region, either as a child or a sibling.
    
    Currently, DWOP_OPAQUE_REGION is not working. The complicated code for
    opaque sub parts has been removed. Instead another StReT Region has to
    be created as an opaque child region of the transparent.


 src/core/wm.c          |  138 ++++---
 src/core/wm.h          |   22 -
 src/core/wm_module.h   |   18 
 wm/default/Makefile.am |    4 
 wm/default/default.c   |  934 ++++++++++++++++++++++++-------------------------
 wm/default/stret.c     |  723 +++++++++++++++++++++++++++++++++++++
 wm/default/stret.h     |  116 ++++++
 7 files changed, 1425 insertions(+), 530 deletions(-)



commit f8fe6ebbdb53e84cfc0bc3cc651eab0b181819b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:49:14 2004 +0000

    Added some macros and static inline functions for convenience:
    
    DFB_RECTANGLE_VALS_FROM_REGION(r)   (r)->x1, (r)->y1, (r)->x2-(r)->x1+1, (r)->y2-(r)->y1+1
    DFB_RECTANGLE_INIT_FROM_REGION(r)   { DFB_RECTANGLE_VALS_FROM_REGION(r) }
    
    DFB_REGION_VALS_FROM_RECTANGLE(r)   (r)->x, (r)->y, (r)->x+(r)->w-1, (r)->y+(r)->h-1
    DFB_REGION_INIT_FROM_RECTANGLE(r)   { DFB_REGION_VALS_FROM_RECTANGLE(r) }
    
    DFB_REGION_INIT_INTERSECTED(r,X1,Y1,X2,Y2)  {
    (r)->x1 > (X1) ? (r)->x1 : (X1),  (r)->y1 > (Y1) ? (r)->y1 : (Y1),
    (r)->x2 < (X2) ? (r)->x2 : (X2),  (r)->y2 < (Y2) ? (r)->y2 : (Y2)
    }
    
    dfb_rectangle_translate(), dfb_region_translate(), dfb_rectangle_resize(),
    dfb_region_resize(), dfb_region_intersects(), dfb_region_clip().
    
    Removed obsolete dfb_get_millis() and dfb_get_micros().


 util.c |   24 -----------------
 util.h |   87 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 83 insertions(+), 28 deletions(-)



commit 2b8dac1f42e36f8f4422c5c8b8319117da90115c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:44:20 2004 +0000

    Cleaned up tile blitting a bit.
    
    Two steps added for performance:
    - Check if anything is drawn at all before looping through tiles.
    - Modify coordinates to exclude fully clipped tiles from loops.


 core/gfxcard.c             |   73 ++++++++++++++++++++++++++++++++-------------
 core/gfxcard.h             |    2 -
 display/idirectfbsurface.c |   12 +++----
 3 files changed, 60 insertions(+), 27 deletions(-)



commit b7b651e02dbd72bd8e22b7a7edab0f86d7594b38
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:41:02 2004 +0000

    Follow const change.


 nvidia_overlay.c |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit 67077e82fee78226644eba2ddd639f3a8e047603
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:40:26 2004 +0000

    Added "const" to UpdateRegion()'s "region" parameter.


 src/core/layer_region.c |    2 +-
 src/core/layer_region.h |    2 +-
 src/core/layers.h       |    2 +-
 src/gfx/util.c          |    2 +-
 src/gfx/util.h          |    2 +-
 systems/osx/primary.c   |   44 ++++++++++++++++++++++++++------------------
 systems/sdl/primary.c   |   12 +++++++++---
 7 files changed, 40 insertions(+), 26 deletions(-)



commit 53795be1d6baff38e9630887ba5b441c980de171
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:37:20 2004 +0000

    Use direct_clock_get_millis() instead of dfb_get_millis().


 fusion_bench.c |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)



commit de8b5719dbda68c5c52fc2ce4ecb03bd96120183
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:33:05 2004 +0000

    Added an assumption to D_MAGIC_SET that the magic value is not set already.


 debug.h |    1 +
 1 file changed, 1 insertion(+)



commit 583f014cf9de90e08d72958a6e7d08970afb0bab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 26 15:31:43 2004 +0000

    Added D_DERROR(ret,message) which acts like D_PERROR(message), but takes
    a DirectResult (DFBResult) instead of using errno.


 messages.c |   22 ++++++++++++++++++++++
 messages.h |    9 +++++++++
 2 files changed, 31 insertions(+)



commit dc498e8cd3020a4482113a9c718ce7aad4909ca1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 23 16:37:10 2004 +0000

    Hopefully fix single buffered window updates again.


 idirectfbsurface_window.c |   14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)



commit f58308d86655010799c6c17c0220a0df659d02ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 23 14:52:00 2004 +0000

    Create regions with opacity 0.
    
    Implement SetOpacity using DLOP_OPACITY, if available.


 src/core/windows.c   |   28 ++++++++++++++++++++++------
 wm/default/default.c |   20 +++++++++++++-------
 2 files changed, 35 insertions(+), 13 deletions(-)



commit 6a4ce6fbbe9d584744b07775e918d8ed939ea370
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 23 14:04:09 2004 +0000

    Inherit DLOP_ALPHACHANNEL from layer context config only if the region that
    is to be created for the window has a pixelformat with alpha.


 windows.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit d0caaac3324667bc72f89b58024c04021d4d751e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 23 13:08:06 2004 +0000

    Starting revival of DLBM_WINDOWS.
    
    A layer regions is now created for each window in the desired size and
    pixel format.
    
    Moving windows (regions) around is working, too.
    
    Flipping the window surface flips the layer region.


 src/core/windows.c                    |  155 +++++++++++++++++++++++++++-------
 src/display/idirectfbsurface_window.c |   14 +--
 wm/default/default.c                  |   15 ++-
 3 files changed, 147 insertions(+), 37 deletions(-)



commit cb9c07f7c7c33f70f972bca573b0443035061c0c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 23 01:19:11 2004 +0000

    Use debug domains.


 hash.c    |   19 +++++++++++--------
 modules.c |    8 +++++---
 signals.c |   16 +++++++++-------
 thread.c  |   16 +++++++++-------
 4 files changed, 34 insertions(+), 25 deletions(-)



commit 2eb33ae1e66d5fbeb9c3465b9be99ed7b783ab41
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 20 20:02:18 2004 +0000

    Added texture LUT support and some other 8bpp improvements.


 matrox.c       |   40 +++++++++++++++++++++++++++++++++++++--
 matrox.h       |    2 +
 matrox_state.c |   58 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 regs.h         |    1 
 4 files changed, 99 insertions(+), 2 deletions(-)



commit 7429ea957c5408f66f5201cad7eaeabaab2387d8
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 20 18:48:01 2004 +0000

    The fb.offset trick should only be used on G400/G450/G550.


 matrox.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 62e4c3d7165350c6fa67cb958392becbeaba4691
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 20 16:30:18 2004 +0000

    FIxed mixup of true and false for DIRECT_BUILD_GETTID.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 3679007f7faf73df5e14620276b48b3343c93f41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 16 02:17:05 2004 +0000

    Removed newline.


 object.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 49711caa4aea6e445a119680b8163509d7a900c8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 16 01:54:59 2004 +0000

    Made bug messages much more verbose.


 object.c |   14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)



commit 23d3e3acd74dd88da8754d773165e1750a90bc54
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 16 00:44:11 2004 +0000

    With "--disable-gettid" one can enforce usage of getpid(),
    e.g. on broken systems where gettid() simply segfaults,
    though the system call is in <linux/unistd.h>.


 configure.in          |   11 +++++++++++
 lib/direct/build.h.in |    1 +
 lib/direct/system.c   |    3 ++-
 3 files changed, 14 insertions(+), 1 deletion(-)



commit 21b0e45b5959b29cac98314059461549a2058fa4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 16 00:12:46 2004 +0000

    Forgot to increment core abi.


 core.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d1187d5755d900a5ccf5a8c67312aed120e7edce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 16 00:11:30 2004 +0000

    Changed color hash size from 2777 to 823.


 colorhash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4e52452ae9e46ca2faa6abbfc8c760acf8d2d559
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 22:51:20 2004 +0000

    Old debug messages (D_DEBUG) should be grouped in domains (D_DEBUG_AT).


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 99081b0c02f8acf9739b81b4c0c3ab48459ac7d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 14:38:09 2004 +0000

    Wait for only the last write operation queued for a buffer,
    if the software needs to access it.


 surfaces.c |   17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)



commit 83942cc150d57499d696687054011c49714bf708
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 14:05:56 2004 +0000

    Show TV Standards only if supported.


 dfbinfo.c |   16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)



commit 764ef719755c598af031a8e0cec8017949b9c66a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 13:53:53 2004 +0000

    Store the serial of the most recent accelerated graphics operation that has
    been queued for writing to a surface buffer.
    
    dfb_layer_region_flip_update() is no longer waiting for an idle accelerator,
    if the buffer that is becoming the front has or had a write operation queued.
    
    Instead it waits exactly for the last operation that is or was about to write
    to this buffer ;)
    
    If WaitSerial() is not supported by the driver and/or hardware, the fallback,
    of course, is to wait for each and every operation to finish.


 core.c         |    2 +-
 gfxcard.c      |   18 ++++++++++++++----
 gfxcard.h      |    2 +-
 layer_region.c |    3 ++-
 surfaces.h     |    3 +++
 5 files changed, 21 insertions(+), 7 deletions(-)



commit 3da67648121d97caa3f40efa6fa04f09f3bfa4f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 01:13:52 2004 +0000

    Fixed a newline.


 dfbinfo.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit af632aedeac24b708d976f7471960e34aacecec2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 00:59:26 2004 +0000

    Added supported output signals to encoder description.


 directfb.h |  149 ++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 75 insertions(+), 74 deletions(-)



commit 12f8d877abc8afd008522d87eabbd7bf8ffcb451
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 00:38:05 2004 +0000

    Minor fix to mixer info.


 dfbinfo.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a361ac0c9162a9b72262dec4ca44a99999e9f03e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 00:35:52 2004 +0000

    Added DFB_DISPLAYLAYER_IDS_MAX.


 include/directfb.h |    7 ++++++-
 tools/dfbinfo.c    |   18 ++++++++++--------
 2 files changed, 16 insertions(+), 9 deletions(-)



commit ba69d611e30c10ea39a8592a743ca66cb195e132
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 15 00:31:14 2004 +0000

    Added some notes about --enable-multi, --enable-debug and --enable-trace.


 README |   25 +++++++++++++++++++++----
 1 file changed, 21 insertions(+), 4 deletions(-)



commit 4d14d1e65213338b35a481cee9a73fa277aedfab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 23:52:10 2004 +0000

    Fixed segfault during cleanup in single app core.


 windows.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 84878f5474de957f4c3762867e38a4cb89b372e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 22:56:57 2004 +0000

    Reduced layer id mask from 64 to 32 bit.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 97471a2f2a1b9530f56f2f047220e69e43203737
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 22:56:42 2004 +0000

    I thought I already removed that...


 build.h |   34 ----------------------------------
 1 file changed, 34 deletions(-)



commit f64f088f9f8a644d553eac192117f8f83bb8f4a4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 22:51:39 2004 +0000

    Removed superfluous argument.


 dfbinfo.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 53089c1b9f0296def114871821183e0dfb341bef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 22:38:36 2004 +0000

    Show mixers, too.


 dfbinfo.c |   65 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 64 insertions(+), 1 deletion(-)



commit fad9dd12d34b948b843b0babd27f9439ab1e4009
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 14 21:58:33 2004 +0000

    Fixed DSECAPS_MIXER_SEL.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5d6e2dafb08197bbdd3c76b5cd9a54d48f335a61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 13 17:12:04 2004 +0000

    Added DirectFBScreenMixerCapabilitiesNames.


 Makefile.am |    3 +++
 1 file changed, 3 insertions(+)



commit f516b416953109ff1bdb56f53b63f7bca9918968
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 13 16:26:30 2004 +0000

    Clear description on the stack.


 screens.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6313a485a793a94544854261708035571ccbfc7f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 13 16:20:57 2004 +0000

    Added some assumptions about the combination of capabilities and number
    of mixers, encoders and outputs.


 screens.c |   31 +++++++++++++++++++++++--------
 1 file changed, 23 insertions(+), 8 deletions(-)



commit 535918aa3386a1b5808d194fa26f9515ceea5e83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 13 13:09:23 2004 +0000

    Added an assertion.


 screens.c |    1 +
 1 file changed, 1 insertion(+)



commit 4dcea3a508d6774ee5c06f2f83f71e6dd196c9b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 13 02:49:58 2004 +0000

    Applied patch from "Oskar Liljeblad <oskar@osk.mine.nu>"
    which adds the configure option "--disable-sonypi-jogdial".


 README       |    1 +
 configure.in |   19 ++++++++++++++-----
 2 files changed, 15 insertions(+), 5 deletions(-)



commit ca58ee9095009ba221522a60e1186c40280097c7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 10 08:51:49 2004 +0000

    Thanks to "Tom Bridgwater <genuss@gmail.com>" for pointing out a
    memory leak during vector resizing.


 vector.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit dd6c4be9f9d1fc4988189fd4195f0e9c0734a916
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 10 05:17:29 2004 +0000

    Added "nowrap" to title.


 gendoc.pl |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 85f75711418b5624f472cf34b5d26f8d69a1d5b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 02:28:43 2004 +0000

    Fixed missing "-ldl".


 configure.in |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit fbfe7ebb2bdd109a6767c56152628170151f94dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 02:26:26 2004 +0000

    Commented out static/shared settings for Cygwin. For a strange reason
    the settings are always made.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 864eb8f86c833a0efc1a8a6b685c5b822efa5f73
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 00:55:16 2004 +0000

    Use strrchr() instead of basename(), because <libgen.h> is not present in Cygwin.


 directfb-csource.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit a3bddc90e844a0a9acd7832e01af061587ebc0c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 00:53:21 2004 +0000

    Removed apparently unused <sys/user.h> which is not present in Cygwin.


 fusion_internal.h |    1 -
 1 file changed, 1 deletion(-)



commit f3d1da4c340f9dbfe6864a72780213095c4061fb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 00:13:49 2004 +0000

    Added ".o" support.


 directfb-config.in                   |    2 +-
 inputdrivers/dbox2remote/Makefile.am |    8 ++++++++
 inputdrivers/elo/Makefile.am         |    8 ++++++++
 inputdrivers/h3600_ts/Makefile.am    |    8 ++++++++
 inputdrivers/joystick/Makefile.am    |    8 ++++++++
 inputdrivers/keyboard/Makefile.am    |    8 ++++++++
 inputdrivers/linux_input/Makefile.am |    8 ++++++++
 inputdrivers/lirc/Makefile.am        |    8 ++++++++
 inputdrivers/mutouch/Makefile.am     |    8 ++++++++
 inputdrivers/ps2mouse/Makefile.am    |    8 ++++++++
 inputdrivers/serialmouse/Makefile.am |    8 ++++++++
 inputdrivers/sonypi/Makefile.am      |    8 ++++++++
 inputdrivers/ucb1x00_ts/Makefile.am  |    8 ++++++++
 inputdrivers/wm97xx_ts/Makefile.am   |    8 ++++++++
 14 files changed, 105 insertions(+), 1 deletion(-)



commit 47bd8332625db0d9c44429463e7d474ea859f1f2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 9 00:00:44 2004 +0000

    Added ".o" support for gfxdrivers.


 directfb-config.in               |    4 ++--
 gfxdrivers/ati128/Makefile.am    |   12 +++++++++++-
 gfxdrivers/cle266/Makefile.am    |    8 ++++++++
 gfxdrivers/cyber5k/Makefile.am   |    8 ++++++++
 gfxdrivers/i810/Makefile.am      |    8 ++++++++
 gfxdrivers/mach64/Makefile.am    |    8 ++++++++
 gfxdrivers/matrox/Makefile.am    |    8 ++++++++
 gfxdrivers/neomagic/Makefile.am  |    8 ++++++++
 gfxdrivers/nsc/Makefile.am       |   10 +++++++++-
 gfxdrivers/nvidia/Makefile.am    |   14 +++++++++++---
 gfxdrivers/radeon/Makefile.am    |    8 ++++++++
 gfxdrivers/savage/Makefile.am    |    8 ++++++++
 gfxdrivers/sis315/Makefile.am    |    8 ++++++++
 gfxdrivers/tdfx/Makefile.am      |    8 ++++++++
 gfxdrivers/unichrome/Makefile.am |    8 ++++++++
 15 files changed, 121 insertions(+), 7 deletions(-)



commit d147ceb5b907a65deb98c3b59de55cc47f29bdb2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 23:51:42 2004 +0000

    Added missing ".o" for OSX.
    
    Added missing "if BUILD_STATIC" to SDL.


 osx/Makefile.am |   14 ++++++++++++++
 sdl/Makefile.am |    4 ++++
 2 files changed, 18 insertions(+)



commit 56a1c5e824903c7492c7d5d800e5d732f38bb8b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 23:39:23 2004 +0000

    Use new ".o" versions for all modules except input and graphics, which
    don't have ".o" versions, yet.
    
    New option "--voodoo" prints out all modules for statically linking in Voodoo.


 directfb-config.in |   74 +++++++++++++++++++++++++++++++----------------------
 1 file changed, 44 insertions(+), 30 deletions(-)



commit b38bb6323c2862d448f2c9c10294918a9a4cf755
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 23:10:36 2004 +0000

    Added ".o" versions here, too.


 dispatcher/Makefile.am |   16 ++++++++++++++++
 requestor/Makefile.am  |   17 +++++++++++++++++
 2 files changed, 33 insertions(+)



commit f0c5bb5211e8f8c68173875a424489d4693f1a47
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 23:01:56 2004 +0000

    In static build mode, add an ".o" version of the ".a" module file.
    
    Applications can link statically against the ".o" files without having
    to specify an extra linker option for each module, e.g. "-Wl,-udirectfb_sdl".
    
    The same support will follow for gfxdriver, inputdrivers and proxy modules.


 interfaces/IDirectFBFont/Makefile.am          |    7 +++++++
 interfaces/IDirectFBImageProvider/Makefile.am |    8 ++++++++
 interfaces/IDirectFBVideoProvider/Makefile.am |    6 ++++++
 rules/libobject.make                          |    9 +++++++++
 systems/fbdev/Makefile.am                     |    6 ++++++
 systems/sdl/Makefile.am                       |   15 ++++++++++++++-
 wm/default/Makefile.am                        |    8 ++++++++
 7 files changed, 58 insertions(+), 1 deletion(-)



commit d897f15b75a3f9275511ed91d7fa2ff12be91e40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 22:40:22 2004 +0000

    Detect cygwin, default to static builds and don't require libdl.


 configure.in |   34 +++++++++++++++++++++++++---------
 1 file changed, 25 insertions(+), 9 deletions(-)



commit f72307ea5869a4ed49ed305d9a53ddd1ae2d19fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 21:17:47 2004 +0000

    Include <linux/compiler.h> to fix compilation of 2.6.8.1 <linux/videodev.h>.


 idirectfbvideoprovider_v4l.c |    2 ++
 1 file changed, 2 insertions(+)



commit 2258eaf46d681cea4cf7dc647859bdcefd13d329
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 8 20:58:58 2004 +0000

    When specified use the pixelformat of the surface description
    to create a windowed primary surface.


 idirectfb.c |   29 +++++++++++------------------
 1 file changed, 11 insertions(+), 18 deletions(-)



commit 26d39894366afee2d5faffbb1f10fb1b492519f8
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Oct 6 16:51:30 2004 +0000

    Added sysfs support.


 Makefile.am |    5 +-
 nvidia.c    |  126 +++++++++++++++++++++++++++++++++++++++---------------------
 2 files changed, 85 insertions(+), 46 deletions(-)



commit 94520969d3e0659c23e7e1c4432b47b9f87ac100
Author: Andreas Kotes <count@directfb.org>
Date:   Mon Sep 27 13:22:24 2004 +0000

    revise accidental commits


 gfxdrivers/radeon/radeon.c       |    2 +-
 inputdrivers/ps2mouse/ps2mouse.c |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 0bee6d2d618c8255f9e74b4925769f24ca351534
Author: Andreas Kotes <count@directfb.org>
Date:   Mon Sep 27 13:21:12 2004 +0000

    input device stuff


 TODO                             |    6 +++++-
 gfxdrivers/radeon/radeon.c       |    2 +-
 inputdrivers/ps2mouse/ps2mouse.c |    4 ++--
 3 files changed, 8 insertions(+), 4 deletions(-)



commit d05e9f6175c229a3e7f9e40c2cf445673c1fa417
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 27 13:00:44 2004 +0000

    Removed two obsolete entries.


 BUGS |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)



commit 847e473ed1f5b603392c223368669b2911d277b0
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 27 08:35:15 2004 +0000

    Added nvidia_tables.h.


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 92f123078c92f0888bae19a0d2b5de2fe31e0fbc
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 24 07:08:33 2004 +0000

    Fixed PVIDEO limit (maximum memory offset is 0x07FFFFC0).


 nvidia.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 048ace6341f78ec00d3490efeac15e9add447911
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 23 06:54:18 2004 +0000

    State handling hot-fixed and optimized.
    
    Corrected all pixel format settings in the tables, but StretchBlit()
    still doesn't seem to work with RGB16.


 nvidia.c        |  184 ++++++++++++++++++++++++++++++++------------------------
 nvidia.h        |    9 ++
 nvidia_tables.h |   34 +++++-----
 3 files changed, 131 insertions(+), 96 deletions(-)



commit 7e75f79353cdcf719b9a3c1c6d143a958422a431
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 22 10:22:12 2004 +0000

    Added "<Meta>-<BackSpace>" debugging shortcut for
    dumping the stack of each thread of the master process.


 input.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 4d40e2d7bdc5ed0729ef341e0526298153611eb5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 22 10:19:47 2004 +0000

    Show file descriptor debug messages only if heavy debug mode is on.


 idirectfbinputbuffer.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 2e3cffdf684c454b69185c12cb83af37374e7726
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 20 07:58:05 2004 +0000

    Always update alpha value when blitting/drawing flags are set.


 nvidia.c |  208 ++++++++++++++++++---------------------------------------------
 1 file changed, 60 insertions(+), 148 deletions(-)



commit 0695114645cc9d8e3eb7843f088404eed9d8554c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 11 12:00:32 2004 +0000

    SetSourceRectangle works now.


 nvidia_overlay.c |   28 ++++++++++++----------------
 1 file changed, 12 insertions(+), 16 deletions(-)



commit 316c5021c6edf470689ef3fa9e6a20a577c54326
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Sep 9 18:00:26 2004 +0000

    Small adjustments.


 nvidia_overlay.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit 9c4891499c8e092ab62ee83ec343b398d32210ac
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Sep 9 14:14:58 2004 +0000

    Added support for Destination ColorKey.


 nvidia_overlay.c |  129 ++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 76 insertions(+), 53 deletions(-)



commit 12330221f61b86dc1305f02951f1ae495bcdb0bf
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Sep 9 09:15:35 2004 +0000

    Many corrections.


 nvidia_overlay.c |  168 ++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 100 insertions(+), 68 deletions(-)



commit d7b01e0701dac8e42c4162c715816c5bb152c623
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Sep 7 12:43:29 2004 +0000

    Added README for rivafb-smemlen patch.


 README.rivafb-smemlen |   10 ++++++++++
 1 file changed, 10 insertions(+)



commit a3ca961253036221a8f4fc1ba9b97f3adde13008
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 6 11:09:38 2004 +0000

    Still on StretchBlit source point: not the best way, but works.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit eb5392f197b9d4e5c1cca466289f95c2d677f405
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 6 10:29:34 2004 +0000

    Workaround on StretchBlit source point.


 nvidia.c |   46 ++++++++++++++++++++++++----------------------
 1 file changed, 24 insertions(+), 22 deletions(-)



commit 9c77c849c96cf509974ea62780f1a92c691373ed
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Sep 6 08:46:36 2004 +0000

    Added missing ';'.


 nvidia.h |   29 ++++++++++++++---------------
 1 file changed, 14 insertions(+), 15 deletions(-)



commit 495b05375e7364fedb16a30117a4a977e3a3cdf1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 6 02:05:50 2004 +0000

    Fixed Sop_argb1555_to_Dacc() which didn't evaluate the alpha bit.
    
    This should fix blending and other effects from and/or to ARGB1555.


 generic.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 386bff2285fe26efb285b23761a58499e460e1ae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 6 01:06:57 2004 +0000

    Fixed destination color keying for RGB16. Two pixels are compared at once,
    but if only one pixel matched, it wasn't written.
    
    Implemented destination color keying for ARGB1555.


 generic.c |   81 +++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 67 insertions(+), 14 deletions(-)



commit 34986942f75ee05a60049d4dc3e03f01188956d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 6 00:37:15 2004 +0000

    Fixed Bop_rgb15_SKto_Aop(), that's in english:
    
    StretchBlit with color keying from ARGB1555 to ARGB1555 dropped the alpha bit!


 generic.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit b057d533c103acde02df60c4900df90828bbb967
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sat Sep 4 11:11:59 2004 +0000

    Small fixes.


 nvidia.c        |   29 +++++++++++------------------
 nvidia_tables.h |   12 ++++++++++++
 2 files changed, 23 insertions(+), 18 deletions(-)



commit 9540a7fd004bc635d1f9b0a11dcacaed755f9013
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 4 03:15:02 2004 +0000

    Thanks to "Tom Bridgwater <genuss@gmail.com>" for this nice patch that
    adds support for SDL wheel events translated to relative Z axis motion
    events (like all drivers with wheel support).


 README                 |    1 +
 systems/sdl/sdlinput.c |   14 ++++++++++++++
 2 files changed, 15 insertions(+)



commit 51dc332295490261709738df409957714a01b4c7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 3 16:36:27 2004 +0000

    Added 'Claudio Ciccani <klan82@cheapnet.it>' to "Thanks To" section
    and "Helping Developers" for the nVidia driver. Keep up the good work ;)


 AUTHORS |    1 +
 README  |    1 +
 2 files changed, 2 insertions(+)



commit 092fb9dd484fdc1deb50593542260da97e37ad58
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Sep 3 15:19:20 2004 +0000

    Set alpha value only when using transparency.


 nvidia.c |    7 +++++--
 nvidia.h |    3 ++-
 2 files changed, 7 insertions(+), 3 deletions(-)



commit cdc5232f68567f946586b338f566319cb8acfb4c
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Sep 1 17:07:58 2004 +0000

    Implemented alphablending (coloralpha for blitting and srcalpha/invsrcalpha for drawing).


 nvidia.c |  300 ++++++++++++++++++++++++++++++++++++++++++++-------------------
 nvidia.h |   20 +++-
 2 files changed, 228 insertions(+), 92 deletions(-)



commit 8e6c64b05387e80d91a7ea51964d32506a354c1b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 31 07:40:10 2004 +0000

    Perform PVIDEO initialization.


 nvidia.c |  267 ++++++++++++++++++++++++---------------------------------------
 nvidia.h |   28 +++---
 2 files changed, 121 insertions(+), 174 deletions(-)



commit 3286a4b852ac735f90f1a8eee0c855ced2b6f36e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Tue Aug 31 07:39:02 2004 +0000

    Added UpdateRegion and support for adjusting Brightness, Contrast, Saturation and Hue.


 nvidia_overlay.c |  271 ++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 181 insertions(+), 90 deletions(-)



commit 854e7343e20b617e46f775567fb0454cc8e459e1
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 30 15:56:46 2004 +0000

    This patch fixes a bug in rivafb:
    the driver returns all videoram as usable memory while 128 Kb at the end are not usable.


 rivafb-smemlen-linux-2.4.26.patch.bz2 |binary
 1 file changed



commit f2fa8d46fd669926f2078028d04d7fbd32be0f04
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Aug 27 06:31:45 2004 +0000

    Disable draw/blending until we have more.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 93041ba7e24756812419e73e47eb986428062f6a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 26 17:17:42 2004 +0000

    Added support for YUY2 and UYVY on primary layer.


 nvidia.c        |   52 +++++++++++++++++++++++++++++++++++++++++++---------
 nvidia_tables.h |   14 ++++++++++++++
 2 files changed, 57 insertions(+), 9 deletions(-)



commit ccfb3c37aac2436519f26f830c75ce4a369b5c21
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Aug 26 14:13:29 2004 +0000

    StretchBlit supports ARGB1555 now.
    Added support for blit with conversion (ARGB1555,RGB32,ARGB to all).


 nvidia.c        |  125 ++++++++++++++++++++++++++++++++++----------------------
 nvidia.h        |    9 +---
 nvidia_tables.h |    8 +--
 3 files changed, 84 insertions(+), 58 deletions(-)



commit 825dd975904d25d3c21d64982702faace6004376
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Aug 25 21:24:32 2004 +0000

    Now StretchBlit works at least at 32bpp.
    Initial support for blending functions (only DSBF_ZERO).
    Some fixes and clean-up.


 nvidia.c        |  600 +++++++++++++++++++++++++++++---------------------------
 nvidia.h        |  157 +++++++++-----
 nvidia_tables.h |  151 ++++++++++++++
 3 files changed, 571 insertions(+), 337 deletions(-)



commit 08cdc18274eccc65c8978908c72fbfec81aac32d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 23 11:29:48 2004 +0000

    Removed debug printf().


 fbdev.c |    2 --
 1 file changed, 2 deletions(-)



commit b7ec3e8259c0a499e940cf4fc539183ad549813a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 23 10:06:48 2004 +0000

    Start with object ID '1' to reserve '0'.


 object.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0764135cdef22742ebe01a1cd70bb4eba300569b
Author: Claudio Ciccani <klan@directfb.org>
Date:   Mon Aug 23 08:47:27 2004 +0000

    Added support for ARGB1555, RGB32 and ARGB.


 nvidia.c |  334 ++++++++++++++++++++++++++++++++++++++++++---------------------
 nvidia.h |  140 +++++++++++++-------------
 2 files changed, 296 insertions(+), 178 deletions(-)



commit 903b1915fb87581a85c22101b5fae4d5edccbfab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:26:51 2004 +0000

    Added CLRCF_SURFACE and CLRCF_PALETTE to avoid setting the video mode each time the palette is changed, especially with df_palette example.


 src/core/layer_context.c |    2 ++
 src/core/layer_region.c  |    4 ++--
 src/core/layers.h        |    5 ++++-
 systems/fbdev/fbdev.c    |   10 ++++++----
 4 files changed, 14 insertions(+), 7 deletions(-)



commit 0501dfb8e54e86c2b3732c6ffea3257b1ab37860
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:18:51 2004 +0000

    Added some D_ASSUME to check the clipping region in dfb_gfxcard_state_check().


 gfxcard.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 114ba86e1c64c8cdb4321caf740568391b16fcc9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:16:58 2004 +0000

    Show stack trace upon timeout waiting for empty read buffer.


 fusion.c |    3 +++
 1 file changed, 3 insertions(+)



commit 87932454370e833e1305721add6b802057494aa6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:15:36 2004 +0000

    Use CoreLayerRegionConfigFlags instead of DFBDisplayLayerConfigFlags.


 neo_overlay.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 5d379c4b61874dc3f6ded589c8f9c2e860ce85bd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:10:10 2004 +0000

    Removed empty besAddRegion(). It's not required.


 matrox_bes.c |   11 -----------
 1 file changed, 11 deletions(-)



commit 51aacaa25a47346a09a8d137f483f1018dde0642
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 22 22:06:22 2004 +0000

    Ported to new driver API.


 cyber5k.c          |    6 +
 cyber5k_underlay.c |  195 +++++++++++++++++++++--------------------------------
 2 files changed, 82 insertions(+), 119 deletions(-)



commit ee528e1c29f18791f4eb5c7d82adc93ee98d3dc7
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Aug 19 15:42:09 2004 +0000

    - support for cursor keys


 osxinput.c |   10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)



commit 616cad7dda601c2a20a75ef774ecefb518db4d6b
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Aug 19 14:29:05 2004 +0000

    - support for key repeat
    - support for the left mouse button (no mouse motion)


 osxinput.c |   91 +++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 80 insertions(+), 11 deletions(-)



commit 171919f4ca0ddb0f05e4aebb3821f97bfc8750ec
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Aug 19 13:55:10 2004 +0000

    - allocate four more bytes for images beeing loaded and scaled, this is
      a workaround for a longstanding off-by-one bug in the scaling code
      in src/misc/gfx_util.c which seems to tap one pixel behind the allocated
      memory. this fixes problems on darwin/osx which has obviously more preceise
      memory protection.


 idirectfbimageprovider_gif.c |    7 +++++--
 idirectfbimageprovider_png.c |    5 ++++-
 2 files changed, 9 insertions(+), 3 deletions(-)



commit 5a1548653580114cb0f005833a34c280ced7605f
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 18 17:04:46 2004 +0000

    just assign the charCodeMask to the key symbol for now.


 osxinput.c |   14 +++-----------
 1 file changed, 3 insertions(+), 11 deletions(-)



commit 7c7229870507c287ef18806c2d985b2b452d62fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 18 16:01:25 2004 +0000

    Added shmalloc/shfree benchmark.


 fusion_bench.c |   52 ++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 46 insertions(+), 6 deletions(-)



commit 8f78bc8cd09a3316fbf950e1f094a3cb1d73761f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 18 15:59:25 2004 +0000

    Added direct_pagesize() which returns the value from <asm/page.h> if present,
    otherwise it falls back to sysconf() which is not suitable for cross compiling.
    
    Use direct_pagesize() in fbdev code and reenable the new mmio code.


 configure.in          |    2 +-
 lib/direct/system.c   |   13 ++++++++++++-
 lib/direct/system.h   |    1 +
 systems/fbdev/fbdev.c |   11 ++++++-----
 4 files changed, 20 insertions(+), 7 deletions(-)



commit bd892091fca1549bf4bedcb09933c61735982094
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 18 15:19:34 2004 +0000

    added support for FRONTONLY primary surfaces. this writes directly to the framebuffer. (df_dok works somehow now)


 osxinput.c |    2 +-
 primary.c  |   56 +++++++++++++++++++++++++++++++++++++++++++++-----------
 2 files changed, 46 insertions(+), 12 deletions(-)



commit 86127909ee3fb059eaf1f9d965b65b2520a6d123
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 17 19:58:03 2004 +0000

    A small debug printf, sorry.


 fbdev.c |    2 ++
 1 file changed, 2 insertions(+)



commit 9e64bb54c068f6060616297f8dde82794d845fd0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 17 17:02:07 2004 +0000

    Better style of using references.


 gendoc.pl |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit 8cd0f1851f1ddc01e7456a45ffc0a08dbe891758
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Aug 17 11:24:34 2004 +0000

    forgot this file


 osxinput.c |  241 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 241 insertions(+)



commit cbe9cfd0446bfa8c6fcd18b7cbc805566eec9b5d
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Aug 17 11:23:54 2004 +0000

    - added native osx system. yes osx support without SDL.
    
    what works:
    - fullscreen
    - mode switching
    - keyboard (keys a-z only)
    
    TODO:
    - make all keys working
    - support frontonly modes
    - cleanups
    - joystick support
    - mouse support
    - window mode


 README                  |   14 -
 README.OSX              |   59 +++-
 configure.in            |   23 +
 include/directfb.h      |    5 
 src/core/system.h       |    1 
 systems/Makefile.am     |    8 
 systems/osx/.cvsignore  |    6 
 systems/osx/Makefile.am |   35 ++
 systems/osx/osx.c       |  225 ++++++++++++++++++
 systems/osx/osx.h       |   42 +++
 systems/osx/primary.c   |  571 ++++++++++++++++++++++++++++++++++++++++++++++++
 systems/osx/primary.h   |   43 +++
 12 files changed, 999 insertions(+), 33 deletions(-)



commit dd69544f332c1d05c9d6859942ddf12e395d0af5
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 17 11:20:43 2004 +0000

    fixed typo


 README.OSX |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9f90b6afdf794932392ff9a506bef4c18c68c3ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 16 15:35:44 2004 +0000

    Temporarily comment out mmio alignment patch for debugging.


 fbdev.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 5234526f633b1fc1eb0e78ae794aa23ea0265db8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 16 15:13:59 2004 +0000

    Added parentheses to conditional statement in system_map_mmio() to be sure.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0ea07c711878b7711671da189b48eff2bc2fb2c4
Author: Andreas Kotes <count@directfb.org>
Date:   Sun Aug 15 13:35:48 2004 +0000

    fix message


 joystick.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 54a2b593e44cb9801a85532e174fe4a993e05f66
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Aug 13 13:12:25 2004 +0000

    do not report unknown event for JS_EVENT_INIT. print note about calibrating
    the joystick using 'jscal' instead.


 joystick.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 4aac0769b2702918e60818b1fb54b6a318d41e78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 13 10:37:41 2004 +0000

    Why has dfbsummon been in non-installed LINUX_ONLY_TOOLS?


 Makefile.am |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit e34adb81a0e92aaa47471e3c376e5bdd2b5fecc4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Aug 13 08:53:26 2004 +0000

    Fix for mmio alignment on mach64.


 fbdev.c |   10 ++++++++--
 fbdev.h |    2 ++
 2 files changed, 10 insertions(+), 2 deletions(-)



commit 28eb2c80f4f10ee9afaaf726a2f7f0178caefdb8
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Aug 13 04:37:09 2004 +0000

    Open /dev/tty and /dev/tty0 as read-only.
    
    dfb_vt->fd wasn't being closed with no-vt-switch.


 vt.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit d5ca83dec701550826dc8adc5037f8fbb1064c9f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 10 10:10:29 2004 +0000

    Fixed NULL pointer check in dfb_gfxcard_wait_serial().


 gfxcard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ff188ec45bd74ca2ec2396452aec6a6fdef47434
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 9 18:36:35 2004 +0000

    Added crtc2GetScreenSize().


 matrox_screen_crtc2.c |   16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)



commit 1c1ea4d1d9938d1889b086c56e0fd3b00592ced6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 9 18:34:21 2004 +0000

    Added GetScreenSize() to the screen API to get rid off the "no video
    mode set yet" warning.


 src/core/layer_context.c |   42 ++++++++++++++++++++++++++++++++++++++++--
 src/core/layers.c        |   22 ----------------------
 src/core/layers.h        |    2 --
 src/core/screen.c        |   17 +++++++++++++++++
 src/core/screen.h        |    7 +++++++
 src/core/screens.h       |   14 ++++++++++++++
 systems/fbdev/fbdev.c    |   45 +++++++++++++++++++++++++++++++++++++++++----
 systems/sdl/primary.c    |   31 ++++++++++++++++++++++++++++++-
 8 files changed, 149 insertions(+), 31 deletions(-)



commit 2e3efaeb9f93b4c4abf58963e7a7f6f5f12d3c63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 9 16:19:52 2004 +0000

    Added new drawing function "FillSpans" which gets an y start value and
    an array of "DFBSpan"s containing 'x' and 'width' of each span.
    
    It's implemented in the core right now, using FillRectangle() of the
    drivers. For maximum performance we could add a FillSpans() function
    to the drivers.


 include/directfb.h             |   22 +++++++++++++++++++++
 src/core/gfxcard.c             |   40 +++++++++++++++++++++++++++++++++++++++
 src/core/gfxcard.h             |    2 +
 src/display/idirectfbsurface.c |   42 +++++++++++++++++++++++++++++++++++++++++
 4 files changed, 106 insertions(+)



commit f9fdf1bda973bd8c7e3272c1d951b1ecf0e3787d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 9 10:25:24 2004 +0000

    Wait for the accelerator earlier, i.e. at the beginning of Flip(),
    but wait for the one before the previous one.


 core/windows_internal.h           |    3 ++-
 display/idirectfbsurface_window.c |   13 ++++++++-----
 2 files changed, 10 insertions(+), 6 deletions(-)



commit 57f6b5975a3adbd64f3d3492efd2cd644404a01b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Aug 8 19:53:03 2004 +0000

    More cropping fixes.


 matrox_bes.c |   30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)



commit 63afd5369435f37da08a7f58853fc797620daf13
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 6 19:26:30 2004 +0000

    Moved storage of serial to window temporarily.


 core/windows_internal.h           |    4 ++++
 display/idirectfbsurface_window.c |    6 +++---
 2 files changed, 7 insertions(+), 3 deletions(-)



commit fd878fc3d7cc5efaf0bb483e1c8957b6e9a45cf7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 6 14:50:31 2004 +0000

    Added DSFLIP_PIPELINE for advanced synchronization with the accelerator,
    currently implemented for Flip() on window surfaces.
    
    This feature is especially for accelerators with a command buffer that
    can store more graphics operations than required to render one frame.
    
    
    Behind the scenes:
    
    Added CoreGraphicsSerial which stores the "serial" of a certain graphics
    operation and the "generation" of serials to handle more than 4 Giga Ops
    in one session.
    
    Added GetSerial() and WaitSerial() to the graphics driver API.
    
    GetSerial() returns the serial of the last queued graphics operation.
    
    WaitSerial() waits until the operation with the specified serial is finished.
    
    Added CoreGraphicsSerial to CardState. It's updated by dfb_gfxcard_unlock(),
    i.e. after issuing an operation using this state.
    
    At the end of Flip() the current graphics serial is stored and
    the previously stored serial is being waited for.


 include/directfb.h                    |    2 ++
 src/core/coretypes.h                  |    2 ++
 src/core/gfxcard.c                    |   29 +++++++++++++++++++++--------
 src/core/gfxcard.h                    |   20 +++++++++++++++++++-
 src/core/state.h                      |   12 ++++++++++++
 src/display/idirectfbsurface_window.c |    7 +++++++
 6 files changed, 63 insertions(+), 9 deletions(-)



commit 2ebecce1eb1d7ba026bb604c67d234719e2c4606
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 12:50:43 2004 +0000

    Removed "-Wno-strict-aliasing" until a check for the gcc version is added.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5aba21cfed1871d077bee1cdc70bc7c83555b429
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 12:42:31 2004 +0000

    Delegate writes to the file descriptor to a new thread called 'EventBufferFeed'
    to avoid dead locks in case the write() blocks.


 idirectfbinputbuffer.c |  100 ++++++++++++++++++++++++++++++++-----------------
 1 file changed, 66 insertions(+), 34 deletions(-)



commit ec6bcdc9473997b48ce68f0e2b3cbd5175f0e702
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Aug 5 10:28:51 2004 +0000

    describe workaround, better do not read it.


 README.OSX |    3 +++
 1 file changed, 3 insertions(+)



commit 1e9966fcc8de3bac17eaa860f58a8c19481b9b38
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Aug 5 10:26:31 2004 +0000

    found out why input is not working on OSX, added the following to
    README.OSX:
    
       You will notice that input does not work, that's because it seems to be
       neccessary to process input events in the thread that set the video mode.
       (under linux it works anyway but we seem to violate the specs)
    
       see http://www.libsdl.org/pipermail/sdl/2004-February/060190.html


 README.OSX |   16 +++++++---------
 1 file changed, 7 insertions(+), 9 deletions(-)



commit b422f914168d70077f97cfc6292c86e86456c0da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 08:16:37 2004 +0000

    Added "-Wno-strict-aliasing".


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit efce9da93639ec6162c56270e6e01ecfbac34602
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 08:05:35 2004 +0000

    Fixed gcc 3.4 warnings due to missing "const".


 direct/mem.c             |   10 +++++-----
 direct/mem.h             |   20 ++++++++++----------
 fusion/fusion_shmalloc.c |   40 ++++++++++++++++++++--------------------
 fusion/shmalloc.h        |   20 ++++++++++----------
 4 files changed, 45 insertions(+), 45 deletions(-)



commit b3c2d6becb841d0773266d095754c08a376c25c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 08:05:13 2004 +0000

    Remove "--force" again, because it removes the file "COPYING".


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 32e337f1b5d34393984ee127e6718f7c86cdcc88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 5 07:51:00 2004 +0000

    Added "--force" to automake arguments for easier version hopping.


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4e2130a673ed7c9c6bc8a0153f75960c48a54cfa
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 4 16:28:19 2004 +0000

    added some hacks for better OSX/SDL compatibility
    - added sdl libs to directfb.pc for OSX
    - added dirty "#define main SDL_main" to directfb.h for OSX, this suck because
      i have to undef it again in libdirect headers where directfb.h is still
      included.
    - added README.OSX containing instructions how to compile DirectFB on OSX
    - updated README regarding OSX support


 README                 |    3 --
 README.OSX             |   50 +++++++++++++++++++++++++++++++++++++++++++++++++
 configure.in           |    7 +++++-
 directfb.pc.in         |    2 -
 include/directfb.h     |    5 ++++
 lib/direct/interface.h |    5 ++++
 lib/direct/types.h     |    7 ++++++
 tools/Makefile.am      |    6 ++---
 8 files changed, 78 insertions(+), 7 deletions(-)



commit d5b07a6e386e7bd5ce07b6e905c6ed87c0f9c1dd
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Aug 4 00:32:32 2004 +0000

    Screen registration was missing from system_join().


 sdl.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit b6e454e10e9ddeda8b6ec801f68c78ca46b7cba4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 3 20:56:03 2004 +0000

    Don't use this driver if "no-vt" option is used.


 keyboard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9cfca31df635281553ca167bdbe337dc42302be0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Aug 1 21:44:18 2004 +0000

    Fixed vertical cropping.


 matrox_bes.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit 7eac2cfeff2e132884c8eb6b1a993b110b6c46d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 30 14:22:30 2004 +0000

    Added all missing va_end().


 debug.c    |   13 ++++++++++---
 messages.c |   14 ++++++++++++++
 2 files changed, 24 insertions(+), 3 deletions(-)



commit a612dd72d1914f5ee3702b23ca6dfbf607773175
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 18:37:49 2004 +0000

    Added (disabled) debug messages before and after write().


 idirectfbinputbuffer.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit a4c7cfd9b29f3a52bf9f6a25361d08409ff314ef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 18:21:34 2004 +0000

    Fixed debug messages.


 thread.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit fc5609928469c137dd65f9eee999fb9c5916abac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 17:44:22 2004 +0000

    Don't wait for Fusion Dispatch Thread during emergency shutdown.


 lib/direct/thread.c  |   11 +++++++----
 lib/fusion/fusion.c  |   32 +++++++++++++++++---------------
 lib/fusion/fusion.h  |    4 +++-
 src/core/core.c      |    2 +-
 tools/fusion_bench.c |    2 +-
 5 files changed, 29 insertions(+), 22 deletions(-)



commit ca092ab16f19a58ac0464ab1e6e9a470d6c639eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 17:35:23 2004 +0000

    Added DSFLIP_NONE and enhanced documentation of all other DFBSurfaceFlipFlags.


 directfb.h |   18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)



commit c300b97da974cd23d7b0e7e976b76c8b0dbea8fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 16:06:44 2004 +0000

    PostEvent() is the only method that is functional in pipe mode.


 directfb.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 535163f993d7ec106daab4ddc9eac47a3dd43dcf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 15:59:56 2004 +0000

    Added much text to CreateFileDescriptor() documentation.
    
    Made CreateFileDescriptor() turn the IDirectFBEventBuffer in pipe-only mode
    in which all other methods return DFB_UNSUPPORTED.


 include/directfb.h               |   14 +++++-
 src/input/idirectfbinputbuffer.c |   85 ++++++++++++++++++++++++++++++++-------
 2 files changed, 81 insertions(+), 18 deletions(-)



commit 411f56f725c7e251f64ee1d7f33d19f1081321f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 15:11:10 2004 +0000

    Use socketpair() instead of pipe() to allow bigger buffers.


 idirectfbinputbuffer.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit a3098043441927ae0c5bf6b36da277cfc701d16c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 28 09:28:10 2004 +0000

    While in WM mode pass through all keys except WM keys again.


 default.c |   54 +++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 43 insertions(+), 11 deletions(-)



commit 6eeeea6785d6f1434e0d6c8449dd667006ca3b4a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 27 17:24:18 2004 +0000

    Fixed sticky WM mode if Alt or Ctrl are released before Meta.


 default.c |  151 +++++++++++++++++++-------------------------------------------
 1 file changed, 47 insertions(+), 104 deletions(-)



commit 7d0e1d74789c65fc6bc90ede0d284452b69e1fe8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 27 15:50:21 2004 +0000

    Support OpenGL on sub surfaces ;)


 idirectfbsurface.c |    7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)



commit e2bdb6b2a5bc23af565650ad759f89bbfde01770
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 26 12:52:46 2004 +0000

    Thanks a lot to Ed Millard <emillard@direcway.com> for this patch:
    
    DIRECTFB PATCH
    
    The DirectFB patch implements hardware blitting on  GX1 graphics though
    it is constrained, by hardware, to only blit surfaces whose width
    matches the stride of the frame buffer.  In other cases it reverts to
    the generic software blit.  The current driver in CVS only implements
    hardware blit on GX2 graphics which doesn't  have this stride
    limitation.
    
    The hardware accelerated functions for line, rectangle and fill have
    been modified to honor  dst_offset for Y so they work properly with
    double buffering.  In the current CVS version these don't honor
    dst_offset and are working on the wrong buffer in double buffered mode
    half the time.  X offset is not currently implemented in this patch
    which is focused on making double buffering work.
    
    GEODE COMPRESSION BUFFER
    
    The patch is disabling the Geode's compression buffer when the DirectFB
    nsc driver is initialized.  This may be a potential drag on performance
    since it increases memory traffic on the video memory during refresh.
    The compression buffer is very problematic for DirectFB since it is
    unaware of it location in video memory.  For example at 1024x768 the
    compression buffer is mapped right at the start of the second buffer.
    You will see display artifacts if its not disabled and you will usually
    crash the box as DirectFB overwrites the compression buffer with
    randomness. In the future the compression buffer could be moved to the
    end of video memory and video ram could be limited to prevent it from
    overwriting it.
    
    VIDEO HARDWARE INTERACTION
    
    Moving the compression buffer to the end of video RAM can result in
    conflicts if you are using video hardware since the geode_v driver in
    geode_v4l2-2.3.2  also uses video memory.  In fact geode_v is currently
    putting its video buffers in video memory in an area that will also
    overlap the second buffer in double buffered mode at 1024x768.  This
    problem can be remedied by changing geodedrv.c memory buffer offset to:
    
    #define MULTIBUFF_OFFSET          0x0
    
    This puts the video buffer at the very end of video memory.  It is
    currently offset from the end of video memory by approximately 512K
    which causes it to interfere with DirectFB double buffering at
    1024x768.
    
    If you set MULTIBUFF_OFFSET  to 0, shut off the compression buffer and
    limit DirectFB video ram to 3 MB you can run DirectFB double buffered
    at 1024x768 and play video at the same time.
    
    -- Ed Millard


 README               |    1 
 gfxdrivers/nsc/nsc.c |  103 +++++++++++++++++++++++++++++++++++++++++----------
 2 files changed, 85 insertions(+), 19 deletions(-)



commit 629403203197b163a4d010ef71b81023eeffe2c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 19 11:08:17 2004 +0000

    Fixed usage of DIRECT_UTF8_SKIP in GetStringWidth.


 idirectfbfont.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4550b673f89f1e32ffeda84dc132a51861110790
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 14 09:08:29 2004 +0000

    Added prefix "ret_" to all output parameters.
    
    Added "const" where appropriate.


 include/directfb.h                                             |  256 ++++------
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    5 
 proxy/dispatcher/idirectfb_dispatcher.c                        |   12 
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c            |   16 
 proxy/requestor/idirectfb_requestor.c                          |   12 
 proxy/requestor/idirectfbdisplaylayer_requestor.c              |   14 
 src/core/layer_context.c                                       |   95 +--
 src/core/layer_context.h                                       |   16 
 src/display/idirectfbdisplaylayer.c                            |   14 
 src/idirectfb.c                                                |   12 
 10 files changed, 219 insertions(+), 233 deletions(-)



commit 8d5b0c2defe380aa6eb0f70ca1b9bb6779b6d850
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 14 07:16:16 2004 +0000

    Use DirectList for events.


 idirectfbinputbuffer.c |  139 ++++++++++++++++++++++++-------------------------
 1 file changed, 70 insertions(+), 69 deletions(-)



commit b668d0db33012cc44bc24a54f5e4ad4b1b772d4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 14 04:48:28 2004 +0000

    Automatically generate links if comments include function names,
    e.g.: "... IDirectFB::GetDisplayLayer() ..."
    
    Minor code cleanup.


 include/directfb.h |   31 +++++----
 tools/gendoc.pl    |  173 +++++++++++++++++++++++++++++++++--------------------
 2 files changed, 126 insertions(+), 78 deletions(-)



commit aee2cfce4fdddba5e7afb756eaa01ecc2eedb060
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 14 00:58:06 2004 +0000

    Added callback definitions to types page.
    
    Added css for removing the underline from links.
    
    Fixed margin for interface abstracts.


 gendoc.pl |  155 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 153 insertions(+), 2 deletions(-)



commit f0064d59d0eae23167386a724754f88dfed4ddd2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 13 22:42:58 2004 +0000

    Clear key code if CapsLock has been changed to Meta.


 input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2532c69c99dc33474fa8e78bbeb46cd06174835d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 13 22:25:47 2004 +0000

    Fixed capslock-meta which is a bit more complicated to implement in the core.


 input.c |   11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)



commit 2c5dab220baaf5e23835355202f31b0855b00454
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 13 15:34:37 2004 +0000

    Moved handling of "capslock-meta" to the input core.


 inputdrivers/keyboard/keyboard.c |    3 +--
 src/core/input.c                 |   10 ++++++++++
 2 files changed, 11 insertions(+), 2 deletions(-)



commit d4e98ec9f5f8f042d203851a27f00a0a73f10d35
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 13 11:12:39 2004 +0000

    Added option "no-vt" which disables usage of VT code completely.


 src/misc/conf.c       |  209 ++++++++++++++++++++------------------------------
 src/misc/conf.h       |    2 
 systems/fbdev/fbdev.c |   91 ++++++++++++---------
 3 files changed, 141 insertions(+), 161 deletions(-)



commit ab796a5028b54b71a1dba10d6ad1637ea380c0fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 12 21:15:25 2004 +0000

    Simplified direct_list_foreach usage.


 thread.c |   11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)



commit a818de8efaff52c9d742a8ce9900a24928547558
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 17:38:24 2004 +0000

    Put keyboard types to the end of the types page by moving the filename to
    the end of the gendoc.pl command line.


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f64f7821758317cdc0b2b6d484e67d8c04ef8de5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 17:31:12 2004 +0000

    Suppress some macros by using "@internal" within the comment.
    
    Added comments to DFB_DISPLAYLAYER_IDS_* macros.


 directfb.h |   30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)



commit 1449be0c1cc185819b504589d8242b19dd8ad6b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 17:30:16 2004 +0000

    Improved comment parsing: options can be embedded via "@<name>[=<value>]" at
    the beginning of a line (after the asterisk though).
    
    Suppress some macros by using "@internal" within the comment.


 gendoc.pl |  118 +++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 60 insertions(+), 58 deletions(-)



commit fa099ed411ca2986d818325ffe96fd2861858b4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 16:37:28 2004 +0000

    Improved layout of types page.
    Added macros to types page.


 gendoc.pl |   78 +++++++++++++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 57 insertions(+), 21 deletions(-)



commit cedf45ffe7a41d53d3885c0d3070a3f3f4ac7f41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 15:47:31 2004 +0000

    Fixed hyper link generation for "const" parameters.


 gendoc.pl |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit 8f60a8d6793ad0a98b0ab00f02ebff2c46951b86
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 14:45:54 2004 +0000

    Allow sub surfaces to be used a texture by adjusting the texture coordinates.


 idirectfbsurface.c |   57 +++++++++++++++++++++++++++++++++++++++++++----------
 1 file changed, 47 insertions(+), 10 deletions(-)



commit 1859f8c8c84bfa7a011837412f14808ae82601da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 9 12:45:01 2004 +0000

    "vt-switching" is true by default now.


 conf.c |    1 +
 1 file changed, 1 insertion(+)



commit 89180c26ea827653942657cc1d42dc524a6ee6d1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 27 23:52:01 2004 +0000

    Corrected a mishap from RGB_TO_YCBCR() change.


 generic.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 547114fd6731429a535b809cb2de0880736e8a25
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 27 15:15:33 2004 +0000

    Increment trapezoid trailing edge x coordinates.


 mach64.c |    2 ++
 1 file changed, 2 insertions(+)



commit 89c233a306acdeb24b3f335709a21aca1a02e904
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 27 15:06:50 2004 +0000

    Call dfb_gfxcard_sync() before FlipRegion() only if hardware has written to the back buffer.


 layer_region.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit a36337ccaeb5483c61e97da55163b850b65973cb
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 27 14:55:32 2004 +0000

    Made RGB <-> YCbCr conversion use integer arithmetic.


 gfxdrivers/matrox/matrox_spic.c |   12 +++++-------
 lib/direct/util.h               |    6 +++++-
 src/gfx/convert.h               |   37 +++++++++++++++++++++++++++----------
 src/gfx/generic/generic.c       |   22 +++++++++-------------
 4 files changed, 46 insertions(+), 31 deletions(-)



commit f49b0750c11e31b67d0f931d55d4cf84c89f1c1a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Thu Jun 24 08:13:35 2004 +0000

    Save some instructions in YUY2/UYVY scaling functions.


 generic.c |   16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)



commit c140da1858423e2f4684a3fb2f09a2595891530d
Author: Claudio Ciccani <klan@directfb.org>
Date:   Wed Jun 23 16:33:31 2004 +0000

    Blit 32 bits at once when scaling YUV4:2:0.


 generic.c |   84 ++++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 49 insertions(+), 35 deletions(-)



commit 3e8b52f63c1b39f5330d03d70535b2f6eb0dc516
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 22 19:08:09 2004 +0000

    Added IDirectFBDisplayLayer::SetSourceRectangle() to configure layer source
    cropping. Includes the relevant changes to mach64 and matrox drivers.


 gfxdrivers/mach64/mach64_overlay.c  |   20 +++++++-----
 gfxdrivers/matrox/matrox_bes.c      |   51 +++++++++++++++++--------------
 include/directfb.h                  |   13 ++++++++
 src/core/layer_context.c            |   58 +++++++++++++++++++++++++++++++++---
 src/core/layer_context.h            |    3 +
 src/display/idirectfbdisplaylayer.c |   21 +++++++++++++
 6 files changed, 131 insertions(+), 35 deletions(-)



commit 10e0c896caf5ec281355144d9ae462cf7b0be993
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 22 07:51:59 2004 +0000

    Added convenience macros and inline functions for setting state members.


 src/core/gfxcard.c             |   56 +++++------
 src/core/state.h               |   42 ++++++++
 src/display/idirectfbsurface.c |  207 ++++++++++++++---------------------------
 wm/default/default.c           |   75 ++++++--------
 4 files changed, 175 insertions(+), 205 deletions(-)



commit 4db272c7c57c68a178155c91ba1fd6df1c25a9c2
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jun 21 22:17:22 2004 +0000

    include <sys/signal.h> for sigset_t on non-linux systems.
    (needed by darwin)


 conf.h |    4 ++++
 1 file changed, 4 insertions(+)



commit 772eb702f5340cb8c2193ea595d343ed6c84334d
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 17 14:02:15 2004 +0000

    shut up CVS


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit 1a54a1f320f081e5860d45b8606034ca50a9f955
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jun 16 14:17:22 2004 +0000

    removed compiled module, remove windows-style <CR><LF> in Readme.txt


 /dev/null                         |binary
 b/gfxdrivers/unichrome/Readme.txt |   30 +++++++++++++++---------------
 2 files changed, 15 insertions(+), 15 deletions(-)



commit d5807ce153d02febe4c646186a0d9527ee1b115a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Jun 14 23:45:24 2004 +0000

    Bresenham line parameters must be calculated differently for the 2D and 3D engines.


 mach64.c |   69 ++++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 55 insertions(+), 14 deletions(-)



commit 6bd147d69849b232285e4b3eb2de71fbb6d58a81
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 14 14:47:57 2004 +0000

    typo


 layer_context.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 344c1378aa7193cc2b59335dd7f8db484278c698
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 14 14:46:44 2004 +0000

    Update source rectangle in region config accordingly.


 layer_context.c |   12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)



commit bf2c03472904994e6da4067a3244013fc19ca363
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 14 13:37:52 2004 +0000

    Show module name in error message if file name is (null) due to static linkage.


 modules.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit c1aeb277c13ad5d4f6e2768bfc9e29f6aac2f660
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 14 12:21:04 2004 +0000

    Thanks to "Antonino A. Daplas" <adaplas@pol.net> for porting the driver
    according to internal API changes.


 configure.in                   |    2 
 gfxdrivers/i810/i810.c         |   17 --
 gfxdrivers/i810/i810_overlay.c |  256 ++++++++++++++---------------------------
 3 files changed, 96 insertions(+), 179 deletions(-)



commit 95f4735ee883bec7156f5c084fff054c51f09b5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 14 12:05:05 2004 +0000

    Include C++ symbols in "nm" parsing code.


 trace.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit eeacea40bef656d3d348449bed46ab625814d19d
Author: Andreas Robinson <andors@directfb.org>
Date:   Mon Jun 14 12:04:33 2004 +0000

    VIA Unichrome driver added.


 configure.in |   22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)



commit 25253d8547f20e451da7ae94e7bb142610582f1e
Author: Andreas Robinson <andors@directfb.org>
Date:   Mon Jun 14 11:56:25 2004 +0000

    Unichrome directory added.


 Makefile.am |    7 +++++++
 1 file changed, 7 insertions(+)



commit 2ad75b36b5d9945cb55f28e19e096629c4a82e8d
Author: Andreas Robinson <andors@directfb.org>
Date:   Mon Jun 14 11:53:35 2004 +0000

    Initial import of the renamed CLE266 driver. New features: support for multiple north bridges, the DVD subpicture layer and destination color keying in the video layer


 Makefile.am    |   33 +
 Readme.txt     |   89 +++
 mmio.h         |   43 +
 regs2d.h       |  197 ++++++
 regs3d.h       | 1641 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 uc_accel.c     |  502 +++++++++++++++++
 uc_accel.h     |  119 ++++
 uc_fifo.c      |  196 ++++++
 uc_fifo.h      |  268 +++++++++
 uc_hw.h        |   93 +++
 uc_hwmap.c     |  352 ++++++++++++
 uc_hwset.c     |  420 ++++++++++++++
 uc_overlay.c   |  324 +++++++++++
 uc_overlay.h   |   88 +++
 uc_ovl_hwmap.c |  590 ++++++++++++++++++++
 uc_ovl_hwset.c |  269 +++++++++
 uc_primary.c   |  174 ++++++
 uc_probe.h     |   40 +
 uc_spic.c      |  189 ++++++
 uc_state.c     |  267 +++++++++
 uc_state.h     |   68 ++
 ucio.c         |  424 ++++++++++++++
 ucio.mk        |   46 +
 ucio.o         |binary
 unichrome.c    |  556 +++++++++++++++++++
 unichrome.h    |  141 ++++
 vidregs.h      |  499 +++++++++++++++++
 27 files changed, 7628 insertions(+)



commit 02a39fcf81219512ebc7d14da990737e420cdfe3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 13 20:47:14 2004 +0000

    Forgot to initialize a variable.


 mach64_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e509c705cfc62378c144eed5393a97135dd95a65
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Jun 13 20:35:56 2004 +0000

    Fixed yet another alpha channel problem. Non-blended scaler/texture blits
    didn't copy the alpha channel.


 mach64.c       |    7 +++----
 mach64_state.c |   37 ++++++++++++++++++++++++-------------
 2 files changed, 27 insertions(+), 17 deletions(-)



commit 69248e96d7dae4a058f1bc4cb8001fe3724ec78e
Author: Claudio Ciccani <klan@directfb.org>
Date:   Sun Jun 13 09:39:48 2004 +0000

    Some improvements in YUV scaling functions.


 generic.c |   24 ++++++++----------------
 1 file changed, 8 insertions(+), 16 deletions(-)



commit 6b9783f7705f437c600cfe94b54f4294f03a0a6a
Author: Claudio Ciccani <klan@directfb.org>
Date:   Fri Jun 11 19:55:26 2004 +0000

    Implemented stretchblitting for YUV.


 generic.c |  127 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 120 insertions(+), 7 deletions(-)



commit 260d8c2362d2929ab25db3a86fb9bf6673ecd7fb
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Jun 10 01:43:20 2004 +0000

    Wrong alpha value was being written to the destination.
    
    Bumped driver version to 0.13.


 mach64.c |    4 ++--
 regs.h   |   10 +++++++++-
 2 files changed, 11 insertions(+), 3 deletions(-)



commit 10dd6ee2ec0f246289e506755dc2dd47ccaa458d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jun 9 18:39:46 2004 +0000

    Added support for power-of-two pitch allocations.
    
    Enabled mach64 texture engine code.


 gfxdrivers/mach64/mach64.c       |   11 ++++++++---
 gfxdrivers/mach64/mach64_state.c |    6 ++----
 lib/direct/util.h                |   10 ++++++++++
 src/core/gfxcard.h               |    6 +++++-
 src/core/surfacemanager.c        |   15 +++++++++++++++
 5 files changed, 40 insertions(+), 8 deletions(-)



commit e1aceff61c244dc646f432b1873c10339624ab6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 9 15:31:31 2004 +0000

    Added "#ifndef __cplusplus" around bool declaration.


 types.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a27a27a1a94a9e4335c4676f19df6f1d4e237213
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 9 14:42:49 2004 +0000

    Fix non-debug builds.


 debug.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b99118a46014e21c7ee7c3f1e3c2f558e2b596f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 9 12:02:14 2004 +0000

    Added option "[no-]trace".


 lib/direct/conf.c  |    1 +
 lib/direct/conf.h  |    5 +++--
 lib/direct/trace.c |   30 +++++++++++++++++++++++-------
 src/misc/conf.c    |   10 +++++++++-
 4 files changed, 36 insertions(+), 10 deletions(-)



commit 81f0f838c513d9538fbf8247cd4b179bebdeed59
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 9 11:19:11 2004 +0000

    Implemented debug domains which can be enabled/disabled separately.
    
    But still a lot of code has to be changed to use domains!
    
    The new macro "D_DEBUG_DOMAIN (identifier, name, description)" is used to
    define a debug domain which is used via "D_DEBUG_AT (identifier, ...)".
    
    The user can select debug output now, e.g.:
    
    no-debug
    debug = direct
    no-debug = direct/memcpy
    
    This disables debug messages in general,
    but enables all "Direct/" messages except "Direct/Memcpy".
    
    The other way around:
    
    debug
    no-debug = direct
    debug = direct/memcpy
    
    This enables debug messages in general,
    but disables all "Direct/" messages except "Direct/Memcpy".


 lib/direct/clock.c     |    5 +-
 lib/direct/cpu_accel.c |    5 +-
 lib/direct/debug.c     |  120 +++++++++++++++++++++++++++++++++++++++++++++++++
 lib/direct/debug.h     |   79 +++++++++++++++++++++-----------
 lib/direct/direct.c    |   14 +++--
 lib/direct/memcpy.c    |    6 +-
 src/misc/conf.c        |   10 +++-
 7 files changed, 200 insertions(+), 39 deletions(-)



commit b14e0ec540bfdbdda959a344789f0d01d22810a2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Jun 9 00:52:59 2004 +0000

    Added texture engine blitting code. The texture engine requires a power of two source pitch so the code is still disabled.


 mach64.c       |  166 +++++++++++++++++++++++++++++++++++++++++++++++----------
 mach64.h       |    4 +
 mach64_state.c |   21 ++++++-
 regs.h         |   10 +++
 4 files changed, 171 insertions(+), 30 deletions(-)



commit 8b1b25dfab1e51b20537d601242dcaef81e2c9b3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 23:01:33 2004 +0000

    Mask x and y coordinate values. Fixes problems with negative coordinates.


 mach64.c |   23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)



commit 7fe49524155576faa3eacef7dd07fe7aaa746ed3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 22:52:42 2004 +0000

    Some cleanups, mainly cosmetic.


 mach64.c       |   36 +++++++++++++++++++------
 mach64_state.c |   27 +++++++------------
 regs.h         |   81 +++++++++++++++++++++++++++------------------------------
 3 files changed, 76 insertions(+), 68 deletions(-)



commit 605276fb0dc30ec2b464d977780e7cb78ed4bd4a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 22:48:05 2004 +0000

    Fixed GetAccelerationMask( DFXL_DRAWSTRING ).


 gfxcard.c |    2 ++
 1 file changed, 2 insertions(+)



commit e61b9126c67d07090e62c35934be56503d2f8483
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 19:00:29 2004 +0000

    Implemented missing blending modes.


 generic.c     |  219 +++++++++++++++++++++++++++++++++++++++++++++++-----------
 generic.h     |    1 
 generic_mmx.h |    4 -
 3 files changed, 183 insertions(+), 41 deletions(-)



commit 6b381d4ee31f2bbc9705a04753253da4685c2a8a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 18:51:01 2004 +0000

    Check for illegal blending modes in ati128, mach64 and matrox drivers.


 ati128/ati128.c |   19 ++++++++++++++++++-
 mach64/mach64.c |   31 +++++++++++++++++++++++++++++++
 matrox/matrox.c |   50 ++++++++++++++++++++++++++++++++++++++++++++++++++
 matrox/matrox.h |    2 ++
 4 files changed, 101 insertions(+), 1 deletion(-)



commit dce4be52d3af6916d554022a8e136d45043069f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 10:26:26 2004 +0000

    Another tiny fix.


 trace.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit ff294df8db6d9717fbc238673f5ceb16c1888dd9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 10:16:34 2004 +0000

    Minor fixes.


 trace.c |   29 ++++++++++++++++-------------
 1 file changed, 16 insertions(+), 13 deletions(-)



commit 6803f282d6b488d60dd7216a70d4bd3d9e9f3a5d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 09:42:35 2004 +0000

    Moved fusion_reactor_attach() after ABI version check to fix the failing
    D_MAGIC_ASSERT() and print the default ABI version error instead.


 fusion.c                     |    6 ++++--
 shmalloc/shmalloc.c          |   19 +++++++++++++------
 shmalloc/shmalloc_internal.h |    7 ++++---
 3 files changed, 21 insertions(+), 11 deletions(-)



commit ce00db0008ae037f6946365c31f6590e4c76b8d4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 09:30:56 2004 +0000

    If the file passed to load_symbols() is not existent, lookup the full
    executable path via "/proc/self/exe" and compare its basename with the
    file name of the object for which the symbol table should be loaded.
    
    Avoid recursive (most probably endless) calls to direct_trace_print_stack().


 trace.c |   30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)



commit 3a99032c58e37451d9ccdc2567f9a36e68d11259
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 08:38:11 2004 +0000

    Fixed format strings.


 lib/voodoo/manager.c                                 |   32 +++++++++----------
 proxy/dispatcher/idirectfb_dispatcher.c              |    2 -
 proxy/dispatcher/idirectfbdatabuffer_dispatcher.c    |    2 -
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c  |    2 -
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.c   |    2 -
 proxy/dispatcher/idirectfbfont_dispatcher.c          |    2 -
 proxy/dispatcher/idirectfbfoo_dispatcher.c           |    2 -
 proxy/dispatcher/idirectfbimageprovider_dispatcher.c |    2 -
 proxy/dispatcher/idirectfbinputdevice_dispatcher.c   |    2 -
 proxy/dispatcher/idirectfbpalette_dispatcher.c       |    2 -
 proxy/dispatcher/idirectfbscreen_dispatcher.c        |    2 -
 proxy/dispatcher/idirectfbsurface_dispatcher.c       |    2 -
 proxy/dispatcher/idirectfbwindow_dispatcher.c        |    2 -
 src/core/wm.c                                        |    2 -
 14 files changed, 29 insertions(+), 29 deletions(-)



commit 52fb37e5bdfe27a85dc0fc52dae0d545ebb39ef1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 08:22:43 2004 +0000

    Apply format & argument checking to message & logging functions.


 debug.h    |    4 ++--
 messages.h |   18 +++++++++++-------
 2 files changed, 13 insertions(+), 9 deletions(-)



commit 664521f07fc248cacc6e845c2e54edb6a93705f7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 07:56:22 2004 +0000

    When building shared AND static, filter out ".libs" for static libraries with newer libtool.


 lib/direct/Makefile.am |    2 +-
 lib/fusion/Makefile.am |    2 +-
 src/Makefile.am        |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)



commit 97086ad9e7474a4ca1f3da911f9fb2b62eb4489d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 06:54:31 2004 +0000

    Replaced double with float.


 gfx_util.c |   23 +++++++++++------------
 1 file changed, 11 insertions(+), 12 deletions(-)



commit 684f705cabbb41354e2c633c5071b560668aa58b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 06:35:21 2004 +0000

    Cosmetics.


 gfxdrivers/matrox/matrox.c |    3 +--
 src/core/windows.h         |    3 +--
 wm/default/default.c       |   22 +++++++---------------
 3 files changed, 9 insertions(+), 19 deletions(-)



commit 5ee8d3241d7980284b2d488ff2cb4cd3ebd6a237
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 8 05:59:02 2004 +0000

    Corrected CLRCF_ALL.


 layers.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 33180cea6683bae181fc0bab5eabf30dae3d3515
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jun 8 00:07:55 2004 +0000

    Fixed triple buffering.


 surfaces.c |    1 -
 1 file changed, 1 deletion(-)



commit 9f376b09b3f99800b01ce551065da1777c125ddb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 4 11:38:15 2004 +0000

    Initialize addrlen.


 server.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ed5881be57ae35c3475206983175f1f973e39311
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 4 11:07:17 2004 +0000

    Code moved to wm.


 window_display.c |  606 -------------------------------------------------------
 1 file changed, 606 deletions(-)



commit 94c0b384cf29380074db0ffb76c1063fb70d78dd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 3 15:47:19 2004 +0000

    Fix scope of y.


 idirectfbimageprovider_jpeg.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8f42360aea036d8a37409ebc5dc62ce1d19fdda2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 3 04:32:19 2004 +0000

    Over 20% of all added code lines ("+..." in this diff) are "D_ASSERT(...)"  ;)
    
    
    Finished first version of modularized window management including the WM API.
    
    All wm specific stuff from the core has been moved to the "default" wm module.
    The refactored code is heavily cleaned up and easier to overview or understand.
    
    Some parts are much simpler now, e.g. using a single fusion_vector_*() line
    instead of several lines of code dealing with (re)allocation, moving etc.
    
    Another example is the merge of all seven restacking function implementations,
    being a single function now that uses fusion_vector_move() after calculating
    the new index based on different combinations of its three parameters that all
    seven cases can be mapped to.
    
    Changed parameter order of fusion_vector_foreach() to "element, index, vector".
    
    Added fusion_vector_foreach_reverse() processing the elements in reversed order.
    
    Changed fusion_vector_index_of() to return "INT_MIN >> 2" instead of "-1"
    if the element wasn't found. In case the return value isn't checked by the
    caller, this will most likely generate a bad address at least.
    
    Added fusion_vector_has_elements() as a more
    readable alternative to !fusion_vector_is_empty().
    
    Added fusion_vector_move() to move an element from one index to another.
    
    Added DFB_ITEMNOTFOUND with string "Appropriate item not found!".
    
    Added magic to DirectLink being asserted whenever possible in direct_list_*().
    
    Changed direct_list_foreach*() to allow variables that are no DirectLink*:
    
    Foo *foo;
    direct_list_foreach( foo, list ) {
    }
    
    versus:
    
    DirectLink *l;
    direct_list_foreach( l, list ) {
         Foo *foo = (Foo*) l;
    }


 include/directfb.h            |    3 
 lib/direct/list.h             |   53 -
 lib/direct/util.c             |    2 
 lib/fusion/vector.c           |   45 
 lib/fusion/vector.h           |   62 -
 src/core/Makefile.am          |    1 
 src/core/core.c               |    2 
 src/core/input.c              |    3 
 src/core/layer_context.c      |   43 
 src/core/layer_control.c      |   13 
 src/core/window_display.c     |    3 
 src/core/windows.c            |  991 ++++++---------------
 src/core/windows.h            |   12 
 src/core/windows_internal.h   |   74 -
 src/core/windowstack.c        |  141 ---
 src/core/windowstack.h        |   18 
 src/core/wm.c                 |  272 +++++
 src/core/wm.h                 |  255 ++++-
 src/core/wm_module.h          |  108 ++
 src/idirectfb.c               |    2 
 src/windows/idirectfbwindow.c |   38 
 tools/dfbdump.c               |   23 
 wm/default/default.c          | 1926 ++++++++++++++++++++++++++++++++++++++----
 23 files changed, 2861 insertions(+), 1229 deletions(-)



commit 5a196b611d1a72a7d4dafd3e152bbb2d4268cdaa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 2 17:06:49 2004 +0000

    Implemented SetRenderCallback().


 idirectfbimageprovider_jpeg.c |   30 +++++++++++++++++++++++++++++-
 idirectfbimageprovider_png.c  |    8 +++++++-
 2 files changed, 36 insertions(+), 2 deletions(-)



commit fcc9698bfb052820db5f21ff5be21bbc0afc0b57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 1 23:09:31 2004 +0000

    First step towards pluggable window management:
    
    Added wm module framework as a new core part similar to core systems.
    Added option "wm=<wm>" to select the window manager module to use.
    
    Moved input event handling to wm module.
    
    Everything should work as before.
    The "default" wm module implements the recent behaviour.


 Makefile.am                 |    1 
 configure.in                |    3 
 directfb-config.in          |    4 
 src/core/Makefile.am        |    7 
 src/core/core.c             |    4 
 src/core/system.h           |    2 
 src/core/windows.c          |   21 
 src/core/windows_internal.h |    9 
 src/core/windowstack.c      |  776 ------------------------------
 src/core/windowstack.h      |   10 
 src/core/wm.c               |  433 ++++++++++++++++
 src/core/wm.h               |  154 +++++
 src/core/wm_module.h        |  115 ++++
 src/misc/conf.c             |   14 
 src/misc/conf.h             |    2 
 wm/.cvsignore               |    2 
 wm/Makefile.am              |    3 
 wm/default/.cvsignore       |    6 
 wm/default/Makefile.am      |   20 
 wm/default/default.c        | 1135 ++++++++++++++++++++++++++++++++++++++++++++
 20 files changed, 1926 insertions(+), 795 deletions(-)



commit 51685c17447a6b40adc1aa925af71a610ba3f819
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 1 21:49:17 2004 +0000

    Use repeat mode for power-of-two textures.


 matrox_state.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 82d72d044a6d965aa17013eef32faf132800e888
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 1 21:48:06 2004 +0000

    Removed outdated script, use directfb-config instead.


 b/tools/Makefile.am            |    1 
 tools/dfb_static_build_example |  100 -----------------------------------------
 2 files changed, 101 deletions(-)



commit d01b432155b48829ce156d08639d7165b38a717b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 1 11:14:18 2004 +0000

    Implemented TextureTriangles().


 dispatcher/idirectfbsurface_dispatcher.c |   35 +++++++++++++++++++++++++++++++
 requestor/idirectfbsurface_requestor.c   |   22 +++++++++++++++++--
 2 files changed, 55 insertions(+), 2 deletions(-)



commit 97630b619dd1caeae52903ae7a6ee13b8ac1aebf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 1 11:03:50 2004 +0000

    Fixed missing buffer format in dfb_surface_create_preallocated().


 surfaces.c |    1 +
 1 file changed, 1 insertion(+)



commit c8e98c239062a130a90145ae6167c57a48dca59f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 27 08:39:51 2004 +0000

    Added optional 'indices' parameter to TextureTriangles() for indexed setup.
    
    Added method documentation:
    
    Maps a <b>texture</b> onto triangles being built
    from <b>vertices</b> according to the chosen <b>formation</b>.
    
    Optional <b>indices</b> can be used to avoid rearrangement of vertex lists,
    otherwise the vertex list is processed consecutively, i.e. as if <b>indices</b>
    contains ascending numbers starting at zero.
    
    The number of <b>indices</b> (if non NULL) or the number of <b>vertices</b> is
    specified by <b>num</b> and has to be three at least. If the chosen <b>formation</b>
    is DTTF_LIST it also has to be a multiple of three.


 include/directfb.h                             |   14 +++++++++++++-
 proxy/dispatcher/idirectfbsurface_dispatcher.c |    1 +
 proxy/requestor/idirectfbsurface_requestor.c   |    1 +
 src/display/idirectfbsurface.c                 |   20 ++++++++++++++++----
 4 files changed, 31 insertions(+), 5 deletions(-)



commit e5de307b0c1531a004a7796ffd654cc4fe9f5993
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 26 23:53:57 2004 +0000

    Fixed __NR_gettid related preprocessor conditions.


 system.c |   13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)



commit 342f9b61b4969c187f16206f342d54a6b6be7313
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 26 10:38:46 2004 +0000

    Honor $(DESTDIR) when removing old header files, thanks to
    Kristof Pelckmans <kristof.pelckmans@antwerpen.be> for spotting.


 direct/Makefile.am |    2 +-
 fusion/Makefile.am |    4 ++--
 voodoo/Makefile.am |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)



commit ca0fbd7ff3b25d7b77105e8fc12fdefc6cf70536
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 26 05:06:29 2004 +0000

    Some fixes.


 surfaces.c |   40 +++++++++++++++++++++++-----------------
 1 file changed, 23 insertions(+), 17 deletions(-)



commit 1ab80e24df984fd77e6d7e4833b81da146bb4988
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 25 18:17:04 2004 +0000

    Changed HAVE_V4L2 to DFB_HAVE_V4L2.


 configure.in                                                   |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   40 +++++-----
 2 files changed, 21 insertions(+), 21 deletions(-)



commit 0a5534411d38008aaad6cbcc1055dfa317389e84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 25 14:21:08 2004 +0000

    Fixed bug with Z buffer bits != RGB bits.


 matrox_state.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 3beaf31b84bff8eb9b04a18121db1fb82c3f011d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 25 14:08:31 2004 +0000

    Fixed dfb_surface_reconfig().


 surfaces.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 05098202905db122564265a5b96729aaa65d209e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 25 13:57:34 2004 +0000

    Changed include order.


 keyboard/keyboard.c       |    3 ++-
 linux_input/linux_input.c |   14 +++++++-------
 2 files changed, 9 insertions(+), 8 deletions(-)



commit 8890d5131ef1ce1c1d75d0f1522647ee5151dd83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 25 12:48:05 2004 +0000

    Clear depth buffer with all bits set.
    
    Use z compare function LTE instead of GT.
    
    Multiply Z value by 65535.0f in the driver.
    
    Remove Z value offset.
    
    Added correct InvWScale for a nearVal of 1.0f.


 gfxdrivers/matrox/matrox_3d.c |   42 ++++++++++++++++++++++++++++++++++--------
 src/gfx/util.c                |    5 +++++
 2 files changed, 39 insertions(+), 8 deletions(-)



commit 35fc3a37e603988c4cc26f531ee934c6ec7ee684
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 24 11:56:23 2004 +0000

    Fix off by one that caused a segfault.


 layer_context.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8492716849b66718e63287f571fa3863eefa2d90
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 24 10:44:02 2004 +0000

    V4L2 has to be enabled explicitly via "--enable-video4linux2".


 configure.in                                                   |   21 +++++++---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    4 -
 2 files changed, 18 insertions(+), 7 deletions(-)



commit 0de45b1a5a4398aeb8476eb3aa9957c6f77bb2bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 21 09:33:28 2004 +0000

    Preliminary depth buffer support.
    
    Specify DSCAPS_DEPTH to have a depth buffer allocated and used,
    currently hard coded to 16 bit.
    
    Some cleanups.


 gfxdrivers/matrox/matrox.h       |    2 
 gfxdrivers/matrox/matrox_3d.c    |   53 ++++--
 gfxdrivers/matrox/matrox_state.c |   15 -
 gfxdrivers/matrox/regs.h         |    5 
 include/directfb.h               |   17 +-
 src/core/core.c                  |    2 
 src/core/surfacemanager.c        |   20 +-
 src/core/surfaces.c              |  324 ++++++++++++++++++++++++++-------------
 src/core/surfaces.h              |   10 +
 src/core/windows.c               |    2 
 src/display/idirectfbsurface.c   |    7 
 src/gfx/generic/generic.c        |    4 
 src/gfx/util.c                   |   60 ++++++-
 src/gfx/util.h                   |    1 
 src/idirectfb.c                  |   12 +
 src/misc/util.c                  |   33 +++
 src/misc/util.h                  |    3 
 systems/fbdev/fbdev.c            |    5 
 18 files changed, 421 insertions(+), 154 deletions(-)



commit 42f6c0331fa5e610c1baf6e264d811059fe003fb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 11:31:28 2004 +0000

    Added pc file.


 voodoo.pc.in |   11 +++++++++++
 1 file changed, 11 insertions(+)



commit dcf71b630b6eeae724f02dd1d4c0e0622d5829dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 11:30:56 2004 +0000

    Don't allow GetWindow() on the cursor window.
    
    Added more "$(top_builddir)/lib".


 configure.in                 |    1 +
 include/directfb.h           |    2 +-
 lib/fusion/fusion.pc.in      |    4 ++--
 lib/voodoo/.cvsignore        |    1 +
 lib/voodoo/Makefile.am       |    3 +++
 proxy/dispatcher/Makefile.am |    1 +
 proxy/requestor/Makefile.am  |    1 +
 src/core/layer_context.c     |    7 +++++--
 src/core/layers.c            |    2 +-
 9 files changed, 16 insertions(+), 6 deletions(-)



commit 869921f4a15f31c4e34a3e2d837cb0e6fd9cc28b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 11:25:24 2004 +0000

    Moved new stuff into separate file.


 Makefile.am |    2 
 matrox.c    |  512 -----------------------------------------------------
 matrox_3d.c |  570 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 matrox_3d.h |   35 +++
 4 files changed, 608 insertions(+), 511 deletions(-)



commit 753db174215c1c9632ca7c7d19f460ab4c4af932
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Wed May 19 10:52:03 2004 +0000

    changed argument of SISFB_SET_AUTOMAXIMIZE from unsigned long to unsigned int


 sis315.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 89bc6aa53001df78979448dd1f9f216322480e42
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 10:46:53 2004 +0000

    Got textured triangles fully working.
    
    Fractional bits of Q are now 20 instead of 16, so the driver
    version is not run time compatible with previous versions.
    
    Finally have a working mga_log2() again.
    
    Adjusted card limitations, added byte pitch alignment.
    
    Added some safety to calculation of register values (use masks etc.).
    
    Cleanups and optimizations, a few assertions added.


 Makefile.am    |    2 
 matrox.c       |  384 +++++++++++++++++++++++++++++++--------------------------
 matrox.h       |   13 +
 matrox_state.c |   47 +++++-
 4 files changed, 260 insertions(+), 186 deletions(-)



commit a2fa0d5605327c5cb5503b41049d351b1176afb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 03:25:33 2004 +0000

    Corrected scaling of NPOT textures.


 matrox.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 0e7bf78c415059b27cde21a1de4344024c0654df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 19 03:21:38 2004 +0000

    Enabled anisotropic filtering in TextureTriangles().
    
    Removed NOPERSPECTIVE flag, adjusted mga_log2().
    
    NPOT textures still have wrong scaling.


 matrox.c       |    8 ++++----
 matrox.h       |    2 +-
 matrox_state.c |    6 +++---
 3 files changed, 8 insertions(+), 8 deletions(-)



commit ff19077eda60deac44402a15894b951b586ba820
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 18 22:42:52 2004 +0000

    Implemented matroxTextureTriangles().


 matrox.c |  489 +++++++++++++++++++++++++++++++++++++++++++++++++++++----------
 regs.h   |    2 
 2 files changed, 418 insertions(+), 73 deletions(-)



commit 2606be70cd5f0bdc239c18763afb8534dde1c5df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 18 14:40:55 2004 +0000

    Moved Voodoo headers to public directory.
    
    Remove old include directories during "make install"
    (directfb-internal/direct or /fusion or /voodoo).
    I know that's evil, but...


 direct/Makefile.am |    6 ++++++
 fusion/Makefile.am |    7 +++++++
 voodoo/Makefile.am |    9 +++++++--
 3 files changed, 20 insertions(+), 2 deletions(-)



commit 418bd2b4bd3143147da5bd46722ee2dda3960198
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 18 01:11:55 2004 +0000

    Include shmalloc in SUBDIRS for single app, too.
    This is to clean the directory via "make clean" after switching from
    multi to single app.


 Makefile.am          |    2 --
 shmalloc/Makefile.am |    3 ++-
 2 files changed, 2 insertions(+), 3 deletions(-)



commit 2871c0321683c87643946130e536c6fa3ff6e74d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 17 08:02:00 2004 +0000

    Implemented GetID(), GetDescription() and GetKeymapEntry().


 dispatcher/idirectfbinputdevice_dispatcher.c |   44 ++++++++++++---
 requestor/idirectfbinputdevice_requestor.c   |   78 ++++++++++++++++++++++++---
 2 files changed, 109 insertions(+), 13 deletions(-)



commit 2626e4824d622af2af5221ab7489ef6143804eb5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat May 15 17:38:25 2004 +0000

    Updated matroxfb patches for linux-2.6.6.


 matroxfb-full-memory-linux-2.6.6.patch.bz2 |binary
 matroxfb-g400-clock-2.6.6.patch.bz2        |binary
 2 files changed



commit ca169d37a174d9950bcfe2eb4e447b3723702709
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 19:48:08 2004 +0000

    Applied patch from Henning Glawe <glaweh@physik.fu-berlin.de>:
    
    - fix the 'Makefile.am's to include $(top_builddir)/lib, so the
      construct 'mkdir blah; cd blah; ../configure; make ' works again
    
    - include the rest of the tools in libdirectfb-bin


 README                                              |    1 +
 debian/libdirectfb-bin.files                        |    3 +++
 gfxdrivers/ati128/Makefile.am                       |    1 +
 gfxdrivers/cle266/Makefile.am                       |    1 +
 gfxdrivers/cyber5k/Makefile.am                      |    1 +
 gfxdrivers/i810/Makefile.am                         |    1 +
 gfxdrivers/mach64/Makefile.am                       |    1 +
 gfxdrivers/matrox/Makefile.am                       |    1 +
 gfxdrivers/neomagic/Makefile.am                     |    1 +
 gfxdrivers/nsc/Makefile.am                          |    1 +
 gfxdrivers/nvidia/Makefile.am                       |    1 +
 gfxdrivers/radeon/Makefile.am                       |    1 +
 gfxdrivers/savage/Makefile.am                       |    1 +
 gfxdrivers/sis315/Makefile.am                       |    1 +
 gfxdrivers/tdfx/Makefile.am                         |    1 +
 inputdrivers/dbox2remote/Makefile.am                |    1 +
 inputdrivers/elo/Makefile.am                        |    1 +
 inputdrivers/h3600_ts/Makefile.am                   |    1 +
 inputdrivers/joystick/Makefile.am                   |    1 +
 inputdrivers/keyboard/Makefile.am                   |    1 +
 inputdrivers/linux_input/Makefile.am                |    1 +
 inputdrivers/lirc/Makefile.am                       |    1 +
 inputdrivers/mutouch/Makefile.am                    |    1 +
 inputdrivers/ps2mouse/Makefile.am                   |    1 +
 inputdrivers/serialmouse/Makefile.am                |    1 +
 inputdrivers/sonypi/Makefile.am                     |    1 +
 inputdrivers/ucb1x00_ts/Makefile.am                 |    1 +
 inputdrivers/wm97xx_ts/Makefile.am                  |    1 +
 interfaces/IDirectFBFont/Makefile.am                |    1 +
 interfaces/IDirectFBImageProvider/Makefile.am       |    1 +
 interfaces/IDirectFBImageProvider/mpeg2/Makefile.am |    1 +
 interfaces/IDirectFBVideoProvider/Makefile.am       |    1 +
 lib/direct/Makefile.am                              |    1 +
 lib/fusion/Makefile.am                              |    1 +
 lib/fusion/shmalloc/Makefile.am                     |    1 +
 lib/voodoo/Makefile.am                              |    1 +
 src/Makefile.am                                     |    1 +
 src/core/Makefile.am                                |    1 +
 src/display/Makefile.am                             |    1 +
 src/gfx/Makefile.am                                 |    1 +
 src/gfx/generic/Makefile.am                         |    1 +
 src/input/Makefile.am                               |    1 +
 src/media/Makefile.am                               |    1 +
 src/misc/Makefile.am                                |    1 +
 src/windows/Makefile.am                             |    1 +
 systems/fbdev/Makefile.am                           |    1 +
 systems/sdl/Makefile.am                             |    1 +
 tools/Makefile.am                                   |    2 ++
 48 files changed, 51 insertions(+)



commit 4141bc3d519ca8f2b34ce93e4500f0fdf4ee8d2e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 18:05:21 2004 +0000

    Fixed debug messages.
    
    Added direct_initialize() and direct_shutdown() calls to the test program.


 direct.c |    4 ++--
 dtest.c  |    5 +++++
 2 files changed, 7 insertions(+), 2 deletions(-)



commit b9d01dfbf01b7f80857b6683057960b70a69a206
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 17:47:34 2004 +0000

    Increased read size for header and data, adjusted loop.
    
    Added some debug messages.


 idirectfbimageprovider_png.c |   20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)



commit f2c70b6f72d0e68eb1b313dccfc46ca5759ada19
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 17:45:47 2004 +0000

    Fixed streaming buffer which was broken by the list structure change.
    It uses direct_list_append() and direct_list_foreach_safe() now.


 idirectfbdatabuffer_streamed.c |   29 +++++------------------------
 1 file changed, 5 insertions(+), 24 deletions(-)



commit 1994b6bf3699eaa3ca101a5bdf2db7712e99adc1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 16:48:49 2004 +0000

    Moved signal handling to libdirect.


 b/lib/direct/Makefile.am |    2 
 b/lib/direct/conf.c      |    3 
 b/lib/direct/conf.h      |   13 -
 b/lib/direct/direct.c    |   87 +++++++++
 b/lib/direct/direct.h    |   39 ++++
 b/lib/direct/signals.c   |  425 ++++++++++++++++++++++++++++++++++++++++++++++-
 b/lib/direct/signals.h   |   26 ++
 b/lib/direct/types.h     |    1 
 b/lib/fusion/fusion.c    |   41 ++++
 b/src/core/Makefile.am   |    2 
 b/src/core/core.c        |   37 +++-
 b/src/misc/conf.c        |    9 
 b/src/misc/conf.h        |    3 
 b/systems/fbdev/fbdev.c  |    1 
 src/core/sig.c           |  343 -------------------------------------
 src/core/sig.h           |   48 -----
 16 files changed, 663 insertions(+), 417 deletions(-)



commit 8951f8859fec145a1d91d0a9f0e03b075b1f330c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 16:36:14 2004 +0000

    Added <Meta>-<Escape> description:
    
    Press Escape to return from fullscreen mode to the desktop.
    (currently not advisable if the fullscreen app is still flipping)


 README |    2 ++
 1 file changed, 2 insertions(+)



commit 6cef9e240831e46afca9895d0279227ef507c877
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 12:16:02 2004 +0000

    Implemented IDirectFB::GetInputDevice().
    
    Added Dispatcher and Requestor for IDirectFBInputDevice and
    implemented CreateEventBuffer() and AttachEventBuffer().
    
    Replaced some old copyright headers.


 dispatcher/Makefile.am                         |    7 
 dispatcher/idirectfb_dispatcher.c              |   35 +
 dispatcher/idirectfbdatabuffer_dispatcher.c    |    7 
 dispatcher/idirectfbdisplaylayer_dispatcher.c  |    7 
 dispatcher/idirectfbeventbuffer_dispatcher.c   |    7 
 dispatcher/idirectfbfont_dispatcher.c          |    7 
 dispatcher/idirectfbfoo_dispatcher.c           |    7 
 dispatcher/idirectfbimageprovider_dispatcher.c |    7 
 dispatcher/idirectfbinputdevice_dispatcher.c   |  538 +++++++++++++++++++++++++
 dispatcher/idirectfbinputdevice_dispatcher.h   |   58 ++
 dispatcher/idirectfbpalette_dispatcher.c       |    7 
 dispatcher/idirectfbwindow_dispatcher.c        |    7 
 requestor/Makefile.am                          |    7 
 requestor/idirectfb_requestor.c                |   26 +
 requestor/idirectfbdatabuffer_requestor.c      |    7 
 requestor/idirectfbdisplaylayer_requestor.c    |    7 
 requestor/idirectfbdisplaylayer_requestor.h    |    7 
 requestor/idirectfbeventbuffer_requestor.c     |    7 
 requestor/idirectfbeventbuffer_requestor.h     |    7 
 requestor/idirectfbfont_requestor.c            |    7 
 requestor/idirectfbfont_requestor.h            |    7 
 requestor/idirectfbfoo_requestor.c             |    7 
 requestor/idirectfbfoo_requestor.h             |    7 
 requestor/idirectfbimageprovider_requestor.c   |    7 
 requestor/idirectfbinputdevice_requestor.c     |  362 ++++++++++++++++
 requestor/idirectfbinputdevice_requestor.h     |   44 ++
 requestor/idirectfbpalette_requestor.c         |    7 
 requestor/idirectfbpalette_requestor.h         |    7 
 requestor/idirectfbsurface_requestor.h         |    7 
 requestor/idirectfbwindow_requestor.c          |    7 
 requestor/idirectfbwindow_requestor.h          |    7 
 31 files changed, 1165 insertions(+), 73 deletions(-)



commit a5d7a35dcab5560d49014e28ec57423058ae563e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 10:27:10 2004 +0000

    Link against libvoodoo and libdirect.


 dispatcher/Makefile.am |   15 +++++++++++++++
 requestor/Makefile.am  |   25 +++++++++++++++----------
 2 files changed, 30 insertions(+), 10 deletions(-)



commit a68ffc843b64a8cda6c5351e5ae86ba200ad309d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 10:12:19 2004 +0000

    Implemented all remaining IDirectFBFont methods.


 dispatcher/idirectfbfont_dispatcher.c |  111 +++++++++++++++++++++++++
 requestor/idirectfbfont_requestor.c   |  147 ++++++++++++++++++++++++++++++----
 2 files changed, 244 insertions(+), 14 deletions(-)



commit 579f6ac7da39a5f49517ced5c84a35ae4fa94d1e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 14 08:43:42 2004 +0000

    Implemented GetAscender().


 dispatcher/idirectfbfont_dispatcher.c |   21 +++++++++++++++++++++
 requestor/idirectfbfont_requestor.c   |   32 +++++++++++++++++++++++++++++---
 2 files changed, 50 insertions(+), 3 deletions(-)



commit b40d72aa3f92b25d57cbd90dbc17de84e6f24b70
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 13 20:58:50 2004 +0000

    Implemented IDirectFBSurface::GetVisibleRectangle().


 dispatcher/idirectfbsurface_dispatcher.c |   22 ++++++++++++++++++++++
 requestor/idirectfbsurface_requestor.c   |   27 ++++++++++++++++++++++++---
 2 files changed, 46 insertions(+), 3 deletions(-)



commit 131d5d361128fa2e571dbe149f995f769dd37e7e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 13 19:03:05 2004 +0000

    Implemented IDirectFB::CreateEventBuffer()
    and IDirectFBWindow::AttachEventBuffer(), phew... ;)
    
    Renamed voodoo_manager_register() to voodoo_manager_register_local()
    and voodoo_manager_lookup() to voodoo_manager_lookup_local().
    
    Added voodoo_manager_register_remote() and voodoo_manager_lookup_remote().


 lib/voodoo/manager.c                                 |  139 ++++++++++++++-----
 lib/voodoo/manager.h                                 |   72 +++++----
 proxy/dispatcher/Makefile.am                         |    7 
 proxy/dispatcher/idirectfb_dispatcher.c              |   35 ++++
 proxy/dispatcher/idirectfbdatabuffer_dispatcher.c    |    2 
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c  |    2 
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.c   |   46 +++---
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.h   |   19 ++
 proxy/dispatcher/idirectfbfont_dispatcher.c          |    2 
 proxy/dispatcher/idirectfbfoo_dispatcher.c           |    2 
 proxy/dispatcher/idirectfbimageprovider_dispatcher.c |    4 
 proxy/dispatcher/idirectfbpalette_dispatcher.c       |    2 
 proxy/dispatcher/idirectfbscreen_dispatcher.c        |    2 
 proxy/dispatcher/idirectfbsurface_dispatcher.c       |   14 -
 proxy/dispatcher/idirectfbwindow_dispatcher.c        |   44 +++++-
 proxy/requestor/idirectfb_requestor.c                |   45 +++++-
 proxy/requestor/idirectfbeventbuffer_requestor.c     |   23 ---
 proxy/requestor/idirectfbeventbuffer_requestor.h     |   52 +++++++
 proxy/requestor/idirectfbwindow_requestor.c          |   51 +++++-
 19 files changed, 416 insertions(+), 147 deletions(-)



commit 9d07571c402debbb3e24963283537b8ba962cce1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 13 19:00:33 2004 +0000

    Forgot to commit the description of <Meta>-'S'.


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1f191e8d43c43e068370e7169609a74c252b50e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 11 12:03:36 2004 +0000

    Allow per file debug mode forcing via definition of DIRECT_FORCE_DEBUG.


 debug.c |    4 ----
 debug.h |    5 +++--
 2 files changed, 3 insertions(+), 6 deletions(-)



commit 00854ecc0aa9ee8a8e8d9c615205332bf17ccccd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 11 04:21:18 2004 +0000

    Changed <Meta>-'S' to raise the lowest window, e.g. to revert a <Meta>-'A'.


 windowstack.c |   18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)



commit bab7379a565a586d792b1e7bac2a1ca3b6f93ef0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 11 03:51:16 2004 +0000

    Added DFXL_DRAWSTRING that is set by dfb_gfxcard_drawstring_check_state() when
    it is called by IDirectFBSurface::GetAccelerationMask() for the current font.


 include/directfb.h             |    7 +++-
 src/core/gfxcard.c             |   66 +++++++++++++++++++++++++++++++++++------
 src/core/gfxcard.h             |    1 
 src/core/state.h               |   58 ++++++++++++++++++++++--------------
 src/display/idirectfbsurface.c |   16 ++++++---
 5 files changed, 110 insertions(+), 38 deletions(-)



commit e65890898b0e10e2edfa0b6a3d34799349c7e774
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 9 23:38:05 2004 +0000

    Added #ifndef around ABS and SIGN.


 util.h |    5 +++++
 1 file changed, 5 insertions(+)



commit d832fca05530f36776848b1a272122b46359486c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 9 21:48:23 2004 +0000

    Wrong variable name.


 directfb.pc.in          |    2 +-
 lib/fusion/fusion.pc.in |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit 5ac7f9c109d32ae9d2ac188eb68fcfab9164df2a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 9 19:31:31 2004 +0000

    Added pkg-config files for libdirect and libfusion.
    
    direct/ and fusion/ headers are installed to the public include directory, now.
    
    Added a simple figure of the DirectList's structure.


 .cvsignore                 |    1 
 configure.in               |    2 
 directfb.pc.in             |    3 
 docs/direct/DirectList.eps |  392 +++++++++++++++++++++++++++++++++++++++++++++
 docs/direct/DirectList.pdf |binary
 docs/direct/DirectList.sxd |binary
 lib/direct/.cvsignore      |    1 
 lib/direct/Makefile.am     |    7 
 lib/direct/direct.pc.in    |   10 +
 lib/fusion/.cvsignore      |    1 
 lib/fusion/Makefile.am     |    6 
 lib/fusion/fusion.pc.in    |   11 +
 12 files changed, 428 insertions(+), 6 deletions(-)



commit 5f1e8b422f714148cb079a239d29cf4668e05f05
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 6 04:42:07 2004 +0000

    Even nicer.


 fbdev.c |   67 ++++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 34 insertions(+), 33 deletions(-)



commit 23cc3a2e3c17b8c9637366ecf0274ccb9e80adc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 6 04:30:34 2004 +0000

    Print error message if the given mode (via "mode=" option) is not supported.


 fbdev.c |   48 ++++++++++++++++++++++++++++++++----------------
 1 file changed, 32 insertions(+), 16 deletions(-)



commit 1c1b08ad535b9b7c7fbb16991d4e41309b08b996
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 21:28:36 2004 +0000

    Added message "DSDESC_PALETTE and DSDESC_PREALLOCATED not supported yet".


 idirectfb_requestor.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 97752cc3a01c49ca818a4ca25b5e8166934fa840
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 20:56:10 2004 +0000

    Increased color hash size.


 colorhash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ec74d4066d9b8f1dc9209ec616999024f8b626a6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 19:55:00 2004 +0000

    Migrated module management.


 b/lib/direct/Makefile.am     |    2 
 b/lib/direct/conf.h          |   10 -
 b/lib/direct/modules.c       |  380 +++++++++++++++++++++++++++++++++++++++++++
 b/lib/direct/modules.h       |   91 ++++++++++
 b/lib/direct/types.h         |    2 
 b/src/core/Makefile.am       |    2 
 b/src/core/core_system.h     |    6 
 b/src/core/coretypes.h       |    3 
 b/src/core/gfxcard.c         |   27 +--
 b/src/core/gfxcard.h         |    3 
 b/src/core/graphics_driver.h |   21 +-
 b/src/core/input.c           |   17 -
 b/src/core/input.h           |    3 
 b/src/core/input_driver.h    |   16 -
 b/src/core/system.c          |   18 +-
 b/src/core/system.h          |    5 
 b/src/misc/conf.c            |   12 -
 b/src/misc/conf.h            |    2 
 src/core/modules.c           |  375 ------------------------------------------
 src/core/modules.h           |   84 ---------
 20 files changed, 546 insertions(+), 533 deletions(-)



commit 894b2e4787ca0556e2f3b75a06bf171a3bad89b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 19:02:49 2004 +0000

    Added direct_list_append() and changed the list structure to have
    the first element's 'prev' pointing to the last element of the list ;)
    
    Made direct_list_*() functions static inline.
    
    Added DirectThreadInitHandler which can be installed/uninstalled using
    direct_thread_add_init_handler() and direct_thread_remove_init_handler().
    The registered init handler function is called at the beginning of new threads.
    
    Use DirectThread all over the place.
    Install init handler that calls dfb_system_thread_init().


 b/inputdrivers/dbox2remote/dbox2remote.c                         |   21 
 b/inputdrivers/elo/elo.c                                         |   18 
 b/inputdrivers/h3600_ts/h3600_ts.c                               |   20 
 b/inputdrivers/joystick/joystick.c                               |   20 
 b/inputdrivers/keyboard/keyboard.c                               |   22 
 b/inputdrivers/linux_input/linux_input.c                         |   21 
 b/inputdrivers/lirc/lirc.c                                       |   20 
 b/inputdrivers/mutouch/mutouch.c                                 |   18 
 b/inputdrivers/ps2mouse/ps2mouse.c                               |   16 
 b/inputdrivers/serialmouse/serialmouse.c                         |   29 -
 b/inputdrivers/sonypi/sonypi.c                                   |   20 
 b/inputdrivers/ucb1x00_ts/ucb1x00_ts.c                           |   16 
 b/inputdrivers/wm97xx_ts/wm97xx_ts.c                             |   16 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   25 
 b/lib/direct/list.c                                              |   26 
 b/lib/direct/list.h                                              |   54 +
 b/lib/direct/messages.h                                          |   15 
 b/lib/direct/thread.c                                            |  105 +++
 b/lib/direct/thread.h                                            |   43 -
 b/lib/direct/types.h                                             |   13 
 b/src/core/Makefile.am                                           |    2 
 b/src/core/core.c                                                |   38 -
 b/src/core/coretypes.h                                           |    1 
 b/systems/fbdev/vt.c                                             |   16 
 b/systems/fbdev/vt.h                                             |    2 
 b/systems/sdl/sdlinput.c                                         |   20 
 src/core/thread.c                                                |  282 ----------
 src/core/thread.h                                                |   88 ---
 28 files changed, 371 insertions(+), 616 deletions(-)



commit 19793d56446fbd7500c941dd0405ecfdd3e1befc
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 5 17:54:30 2004 +0000

    no longer include <linux/cache.h> and define __KERNEL__ which led to problems with some kernels, define cache size macros ourserlves.


 ppcasm_memcpy_cachable.S |   13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)



commit e8a985fec62da49df5c9aaecb363d357241f43ca
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 5 16:54:21 2004 +0000

    remove unneccessary #includes


 ppcasm_memcpy_cachable.S |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 42b58de2e5b82826a48dad1c41c21a5754cd867d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 08:07:30 2004 +0000

    Removed obsolete stuff.


 internal.h |    6 --
 manager.c  |    4 -
 message.h  |  145 -------------------------------------------------------------
 server.c   |    3 -
 4 files changed, 3 insertions(+), 155 deletions(-)



commit dae42f97a074efc2418a6e118dabf1bba7ceedab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 02:04:37 2004 +0000

    Implemented SetVideoMode().


 lib/direct/interface.c                  |    2 ++
 proxy/dispatcher/idirectfb_dispatcher.c |   28 ++++++++++++++++++++++++++++
 proxy/requestor/idirectfb_requestor.c   |   21 +++++++++++++++++++--
 3 files changed, 49 insertions(+), 2 deletions(-)



commit 63bdca7dd126c4a0f0c9e2766ef5f5d5fedef952
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 5 00:46:24 2004 +0000

    Flush output buffer automatically after waiting 50 ms for explicit flush.


 manager.c |   15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)



commit d697db2f759215dda1c7b08ce4607c5c51fdab74
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 23:31:48 2004 +0000

    Wait for response in Flip() if flags contain DSFLIP_WAIT.


 idirectfbsurface_requestor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6e2128e172c179cab8089c9cf377c27cbac7cb5d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 23:23:03 2004 +0000

    Don't use VREQ_QUEUE for Flip().


 idirectfbsurface_requestor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 01a2da6b309059c1a98b0be541c23cacb6a89af6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 23:14:24 2004 +0000

    Added flag VREQ_QUEUE which has the effect that voodoo_manager_request()
    doesn't wake up the output flushing thread. It's used for all drawing related
    requests to increase the rendering throughput by avoiding small send()s.
    
    Experimentally using IPTOS_LOWDELAY.


 lib/voodoo/client.c                          |    5 -
 lib/voodoo/manager.c                         |  104 ++++++++++++++++++++-------
 lib/voodoo/message.h                         |    3 
 lib/voodoo/server.c                          |   14 +--
 proxy/requestor/idirectfbsurface_requestor.c |   44 +++++------
 5 files changed, 108 insertions(+), 62 deletions(-)



commit b210ce7ae2f3b7e6df8667586d82b5c243c7eb75
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 18:05:08 2004 +0000

    Added interface instance tracking in debug mode,
    showing remaining instances at exit time (like it's done for allocated memory).
    
    Added DIRECT_UTIL_RECURSIVE_PTHREAD_MUTEX_INITIALIZER.


 interfaces/IDirectFBFont/idirectfbfont_ft2.c |    2 
 lib/direct/interface.c                       |  160 ++++++++++++++++++++++++++-
 lib/direct/interface.h                       |  110 +++++++++++-------
 lib/direct/mem.c                             |    3 
 lib/direct/thread.c                          |    3 
 lib/direct/trace.c                           |    5 
 lib/direct/util.h                            |    7 +
 lib/fusion/reactor.c                         |    2 
 lib/voodoo/manager.c                         |    9 +
 lib/voodoo/server.c                          |    4 
 src/core/core.c                              |   11 +
 src/gfx/util.c                               |   18 +--
 12 files changed, 273 insertions(+), 61 deletions(-)



commit b5438f94a2ab7f3e5774fd66e6d9013c4607b5c0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 16:38:50 2004 +0000

    Link executables against libfusion and libdirect explicitly.


 Makefile.am |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)



commit 86bcba1e00ed0e615d90add6401d49f68e60cbdb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 16:25:51 2004 +0000

    Added thread names to debug output, stack traces etc.
    
    Added direct_thread_self(), direct_thread_get_name(thread)
    and direct_thread_self_name().


 lib/direct/debug.c                               |   41 ++++---
 lib/direct/messages.c                            |    8 +
 lib/direct/system.c                              |    1 
 lib/direct/thread.c                              |  128 +++++++++++++++++------
 lib/direct/thread.h                              |   15 ++
 lib/direct/trace.c                               |   27 +++-
 lib/fusion/fusion.c                              |    2 
 proxy/requestor/idirectfbeventbuffer_requestor.c |    2 
 8 files changed, 173 insertions(+), 51 deletions(-)



commit f001b12fba0e4f740dd96a0e3563a4bee77ec610
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 14:05:02 2004 +0000

    Added configure option "--enable-voodoo", default is no.


 Makefile.am       |    6 +++++-
 configure.in      |    7 +++++++
 lib/Makefile.am   |    6 +++++-
 tools/Makefile.am |    6 +++++-
 4 files changed, 22 insertions(+), 3 deletions(-)



commit 55f6903bb0007a20357b37034ad2a1f83f755f16
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 12:53:02 2004 +0000

    Implemented GetOpacity().


 dispatcher/idirectfbwindow_dispatcher.c |   22 ++++++++++++++++++++++
 requestor/idirectfbwindow_requestor.c   |   32 +++++++++++++++++++++++++++++---
 2 files changed, 51 insertions(+), 3 deletions(-)



commit dd6f6012e196f231cc0e9a903c2ba2d108251954
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 12:30:24 2004 +0000

    Further implementation.


 dispatcher/idirectfbwindow_dispatcher.c |  211 ++++++++++++++++++++++++++++++++
 requestor/idirectfbsurface_requestor.c  |    2 
 requestor/idirectfbwindow_requestor.c   |  132 +++++++++++++++-----
 3 files changed, 315 insertions(+), 30 deletions(-)



commit e18d3829ea6cb399cae7f4054e86080e0a9f30b5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 12:28:54 2004 +0000

    Use TCP_NODELAY, increased buffer and max. message size.


 client.c  |    6 ++++++
 manager.c |   18 ++++++++++--------
 server.c  |   12 +++++++++++-
 3 files changed, 27 insertions(+), 9 deletions(-)



commit 191ef7eb9935f9ce75d15e286add59c54567e6e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 4 12:27:33 2004 +0000

    Implemented hash table resizing.


 hash.c |   30 +++++++++++++++++++++++++++++-
 1 file changed, 29 insertions(+), 1 deletion(-)



commit 6efcdc4da28ecb44dd9e8284fafdf9de69a619d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 14:59:08 2004 +0000

    Ongoing Voodoo... got DFBTerm running.


 include/directfb.h                                   |    2 
 lib/voodoo/interface.c                               |    6 
 lib/voodoo/interface.h                               |    2 
 proxy/dispatcher/Makefile.am                         |   12 
 proxy/dispatcher/idirectfb_dispatcher.c              |  126 +--
 proxy/dispatcher/idirectfbdatabuffer_dispatcher.c    |    4 
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.c  |  576 ++++++++++++++
 proxy/dispatcher/idirectfbdisplaylayer_dispatcher.h  |   76 +
 proxy/dispatcher/idirectfbeventbuffer_dispatcher.c   |    2 
 proxy/dispatcher/idirectfbfont_dispatcher.c          |   31 
 proxy/dispatcher/idirectfbfoo_dispatcher.c           |    2 
 proxy/dispatcher/idirectfbimageprovider_dispatcher.c |    2 
 proxy/dispatcher/idirectfbpalette_dispatcher.c       |    6 
 proxy/dispatcher/idirectfbscreen_dispatcher.c        |    2 
 proxy/dispatcher/idirectfbsurface_dispatcher.c       |   16 
 proxy/dispatcher/idirectfbwindow_dispatcher.c        |  769 +++++++++++++++++++
 proxy/dispatcher/idirectfbwindow_dispatcher.h        |   81 ++
 proxy/requestor/Makefile.am                          |   14 
 proxy/requestor/idirectfb_requestor.c                |   36 
 proxy/requestor/idirectfbdatabuffer_requestor.c      |    6 
 proxy/requestor/idirectfbdisplaylayer_requestor.c    |  524 ++++++++++++
 proxy/requestor/idirectfbdisplaylayer_requestor.h    |   43 +
 proxy/requestor/idirectfbeventbuffer_requestor.c     |   77 +
 proxy/requestor/idirectfbfont_requestor.c            |   45 -
 proxy/requestor/idirectfbfoo_requestor.c             |    8 
 proxy/requestor/idirectfbimageprovider_requestor.c   |    6 
 proxy/requestor/idirectfbpalette_requestor.c         |    6 
 proxy/requestor/idirectfbscreen_requestor.c          |    6 
 proxy/requestor/idirectfbsurface_requestor.c         |   17 
 proxy/requestor/idirectfbwindow_requestor.c          |  657 ++++++++++++++++
 proxy/requestor/idirectfbwindow_requestor.h          |   43 +
 src/display/idirectfbdisplaylayer.c                  |    6 
 32 files changed, 3069 insertions(+), 140 deletions(-)



commit a2744e73568d7b1475fd7146c8f91ed5d6d6db76
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 10:53:34 2004 +0000

    Argh.


 idirectfb_dispatcher.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 333f553eeac0e1dde6982a2a6b95c74ea4bdc225
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 10:36:21 2004 +0000

    Added requestor template.


 idirectfbfoo_requestor.c |  125 +++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 125 insertions(+)



commit c6e9685ae1f0205cfda025e447e13fb259c99cff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 10:32:21 2004 +0000

    Added more cancelation points to event buffer feeding thread.


 idirectfb_dispatcher.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 2ca894baedf945849e1e5a2f751b65f843c48a44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 10:31:31 2004 +0000

    Start debug output with upper case.


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2ca51d1e4ff5981fd998a0944f2b328d556b8884
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 3 10:30:50 2004 +0000

    Link against libfusion.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0ba4c4ac1fc2c918b1310188930e68605cdbe959
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 30 02:25:12 2004 +0000

    Improved and cleaned up thread loops, resulting in better performance.


 manager.c |  181 +++++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 105 insertions(+), 76 deletions(-)



commit 4adb447e964d75fd2adb2d13a27ac313122a6d30
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Apr 29 23:12:11 2004 +0000

    if we do not have <linux/unistd.h> include <unistd.h> for getpid


 system.c |    1 +
 1 file changed, 1 insertion(+)



commit ebe125822d3450a82a9d30843641fbd91480b6d9
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Apr 29 23:08:57 2004 +0000

    include pthread.h which is required for pthread_sigmask() on BSD


 signals.c |    1 +
 1 file changed, 1 insertion(+)



commit 4def0b9f0497bc400a81a5874ab52c46e142b1b7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 21:50:11 2004 +0000

    Fix gcc 2.95 build.


 idirectfbsurface_requestor.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 675d78194aa08c849a0f3015f95bf7441cc5a333
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 19:08:35 2004 +0000

    VOODOO
    
    Added network transparency to DirectFB ;)
    
    The concept is quite simple and working great. Each interface has two
    new implementations: "Requestor" on client side and "Dispatcher" on
    server side. Between them is a very small libvoodoo which manages network
    connections and provides fast and powerful message encoding and decoding.
    
    Each Dispatcher instance gets an ID which is also managed by libvoodoo.
    The Requestor sends a request message for each method call, specifying the
    remote instance ID and the method that is to be called. Parameters are appended
    to that message before it gets sent to the server. On the server side the
    Dispatcher interface is looked up in a hash table using the instance ID.
    After fetching the parameters from the message without copying any data
    except for some rare cases, the Dispatcher calls the "real" implementation.
    
    Some requests have a corresponding response and some don't, e.g. all drawing
    related methods return immediately after sending out the request. Methods
    that require a response block until the response is received. Each response
    contains at least the result (DFBResult). Further response data is appended
    to the response message and returned to the application after being processed
    by the Requestor.
    
    Not every Dispatcher is server side and not every Requestor is client side.
    IDirectFBEventBuffer and IDirectFBDataBuffer have a client side Dispatcher
    and a server side Requestor. The server has to send events to the client side
    by making a PostEvent request (without response). It also has to fetch data
    via requests to the client side data buffer (with response), e.g. while
    it is dispatching a RenderTo request. The client will send its compressed
    data (PNG for example) over network to the server ;)
    
    Another advantage is that existing applications can be used without changes.
    
    The setup is quite simple: There's a new program called "dfbproxy" which
    just waits for incoming connections (currently port 2323). It doesn't even
    call DirectFBCreate() before clients request that.
    
    Running applications via the proxy is done by passing "--dfb:remote=<host>".
    
    Notes about performance: If DirectFB is built with debug mode disabled,
    df_dok produces nearly the same results over ethernet. Running both the
    client and the server on the same machine is slightly slower right now.
    
    Notes about the implementation status: A lot of Requestor and Dispatcher
    methods are not implemented yet, but many demos are running already.
    IDirectFBDisplayLayer, IDirectFBWindow and IDirectFBInputDevice are missing
    completely so far. IDirectFBFont has to be changed to use data buffers, too.
    Currently the filename is transmitted over network and the font file is
    loaded from the file system of the server.
    
    
    OTHER CHANGES
    
    Print a warning message in dfb_screen_rectangle()
    when dfb_system_current_mode() returns NULL, e.g. during initialization.
    
    Moved fbdev and sdl modules from src/core/ to systems/.
    
    Added a magic to public interface structs,
    i.e. use D_MAGIC_SET/ASSERT/CLEAR to detect life cycle problems.
    
    Added "const" to some parameters in the public API.
    
    Added a minimalistic hash table implementation for usage with IDs as keys.
    
    Added direct_clock_set_start() that is called by Fusion's initialization
    to synchronize time stamps of debug messages.
    
    Changed D_MAGIC to enable spells with less than eight characters;
    this macro generates a magic based on the string (spell) passed to it.
    
    Added DirectResult which is the DFBResult outside of DirectFB.
    
    Added message macro D_UNIMPLEMENTED which prints a warning once.
    
    Added a name argument to direct_thread_create(),
    printed during creation and termination of threads.
    
    Moved fusion_pthread_recursive_mutex_init() to libdirect,
    being called direct_util_recursive_pthread_mutex_init().


 b/BUGS                                                           |    1 
 b/Makefile.am                                                    |   14 
 b/TODO                                                           |    2 
 b/autogen.sh                                                     |   13 
 b/configure.in                                                   |  143 
 b/directfb-config.in                                             |    2 
 b/directfb.pc.in                                                 |    2 
 b/gfxdrivers/i810/Makefile.am                                    |    3 
 b/gfxdrivers/i810/i810.c                                         |  108 
 b/gfxdrivers/i810/i810_overlay.c                                 |    2 
 b/gfxdrivers/matrox/Makefile.am                                  |    3 
 b/gfxdrivers/matrox/matrox.c                                     |    2 
 b/gfxdrivers/matrox/matrox_crtc2.c                               |    2 
 b/gfxdrivers/matrox/matrox_maven.c                               |   14 
 b/gfxdrivers/matrox/matrox_screen_crtc2.c                        |    2 
 b/gfxdrivers/matrox/matrox_spic.c                                |    3 
 b/gfxdrivers/nsc/Makefile.am                                     |    1 
 b/gfxdrivers/nsc/nsc_galfns.c                                    |    4 
 b/gfxdrivers/radeon/Makefile.am                                  |    3 
 b/gfxdrivers/radeon/radeon.c                                     |    8 
 b/gfxdrivers/sis315/Makefile.am                                  |    3 
 b/gfxdrivers/sis315/sis315.c                                     |    5 
 b/include/dfb_types.h                                            |    8 
 b/include/directfb.h                                             |   54 
 b/inputdrivers/keyboard/Makefile.am                              |    3 
 b/inputdrivers/keyboard/keyboard.c                               |    4 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |   13 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   22 
 b/lib/Makefile.am                                                |    2 
 b/lib/direct/Makefile.am                                         |    2 
 b/lib/direct/clock.c                                             |   18 
 b/lib/direct/clock.h                                             |    4 
 b/lib/direct/debug.h                                             |   38 
 b/lib/direct/hash.c                                              |  226 +
 b/lib/direct/hash.h                                              |   60 
 b/lib/direct/interface.c                                         |   33 
 b/lib/direct/interface.h                                         |  104 
 b/lib/direct/interface_implementation.h                          |   17 
 b/lib/direct/memcpy.c                                            |    4 
 b/lib/direct/messages.c                                          |   12 
 b/lib/direct/messages.h                                          |   51 
 b/lib/direct/thread.c                                            |   84 
 b/lib/direct/thread.h                                            |   14 
 b/lib/direct/types.h                                             |   25 
 b/lib/direct/util.c                                              |   83 
 b/lib/direct/util.h                                              |   30 
 b/lib/fusion/fusion.c                                            |    4 
 b/lib/fusion/lock.c                                              |    3 
 b/lib/fusion/lock.h                                              |   21 
 b/lib/fusion/property.c                                          |    3 
 b/lib/fusion/reactor.c                                           |    7 
 b/lib/fusion/ref.c                                               |    3 
 b/lib/fusion/shmalloc/shmalloc.c                                 |    2 
 b/lib/voodoo/.cvsignore                                          |    7 
 b/lib/voodoo/Makefile.am                                         |   67 
 b/lib/voodoo/build.h                                             |   34 
 b/lib/voodoo/build.h.in                                          |   34 
 b/lib/voodoo/client.c                                            |  178 
 b/lib/voodoo/client.h                                            |   43 
 b/lib/voodoo/conf.c                                              |   37 
 b/lib/voodoo/conf.h                                              |   42 
 b/lib/voodoo/interface.c                                         |  111 
 b/lib/voodoo/interface.h                                         |   49 
 b/lib/voodoo/internal.h                                          |   60 
 b/lib/voodoo/manager.c                                           | 1250 ++++++
 b/lib/voodoo/manager.h                                           |   67 
 b/lib/voodoo/message.h                                           |  398 +
 b/lib/voodoo/server.c                                            |  336 +
 b/lib/voodoo/server.h                                            |   45 
 b/lib/voodoo/types.h                                             |   65 
 b/proxy/.cvsignore                                               |    2 
 b/proxy/Makefile.am                                              |    3 
 b/proxy/dispatcher/.cvsignore                                    |    6 
 b/proxy/dispatcher/Makefile.am                                   |   71 
 b/proxy/dispatcher/idirectfb_dispatcher.c                        | 1052 +++++
 b/proxy/dispatcher/idirectfb_dispatcher.h                        |   72 
 b/proxy/dispatcher/idirectfbdatabuffer_dispatcher.c              |  590 ++
 b/proxy/dispatcher/idirectfbdatabuffer_dispatcher.h              |   45 
 b/proxy/dispatcher/idirectfbeventbuffer_dispatcher.c             |  259 +
 b/proxy/dispatcher/idirectfbeventbuffer_dispatcher.h             |   43 
 b/proxy/dispatcher/idirectfbfont_dispatcher.c                    |  299 +
 b/proxy/dispatcher/idirectfbfont_dispatcher.h                    |   42 
 b/proxy/dispatcher/idirectfbfoo_dispatcher.c                     |  174 
 b/proxy/dispatcher/idirectfbfoo_dispatcher.h                     |   47 
 b/proxy/dispatcher/idirectfbimageprovider_dispatcher.c           |  272 +
 b/proxy/dispatcher/idirectfbimageprovider_dispatcher.h           |   38 
 b/proxy/dispatcher/idirectfbpalette_dispatcher.c                 |  380 +
 b/proxy/dispatcher/idirectfbpalette_dispatcher.h                 |   40 
 b/proxy/dispatcher/idirectfbscreen_dispatcher.c                  |  382 +
 b/proxy/dispatcher/idirectfbscreen_dispatcher.h                  |   51 
 b/proxy/dispatcher/idirectfbsurface_dispatcher.c                 | 1362 ++++++
 b/proxy/dispatcher/idirectfbsurface_dispatcher.h                 |   75 
 b/proxy/requestor/.cvsignore                                     |    6 
 b/proxy/requestor/Makefile.am                                    |   80 
 b/proxy/requestor/idirectfb_requestor.c                          |  809 +++
 b/proxy/requestor/idirectfbdatabuffer_requestor.c                |  459 ++
 b/proxy/requestor/idirectfbeventbuffer_requestor.c               |  237 +
 b/proxy/requestor/idirectfbfont_requestor.c                      |  290 +
 b/proxy/requestor/idirectfbfont_requestor.h                      |   43 
 b/proxy/requestor/idirectfbfoo_requestor.h                       |   43 
 b/proxy/requestor/idirectfbimageprovider_requestor.c             |  244 +
 b/proxy/requestor/idirectfbpalette_requestor.c                   |  325 +
 b/proxy/requestor/idirectfbpalette_requestor.h                   |   43 
 b/proxy/requestor/idirectfbscreen_requestor.c                    |  388 +
 b/proxy/requestor/idirectfbsurface_requestor.c                   |  983 ++++
 b/proxy/requestor/idirectfbsurface_requestor.h                   |   47 
 b/src/Makefile.am                                                |    2 
 b/src/core/Makefile.am                                           |   14 
 b/src/core/core.c                                                |    1 
 b/src/core/fonts.c                                               |    2 
 b/src/core/gfxcard.h                                             |    2 
 b/src/core/layers.c                                              |    2 
 b/src/core/layers.h                                              |    1 
 b/src/core/state.c                                               |    3 
 b/src/core/surfaces.c                                            |    4 
 b/src/core/windows.c                                             |    4 
 b/src/core/windowstack.c                                         |    4 
 b/src/directfb.c                                                 |  143 
 b/src/display/idirectfbpalette.c                                 |    2 
 b/src/display/idirectfbsurface_layer.c                           |    1 
 b/src/idirectfb.c                                                |   22 
 b/src/input/idirectfbinputbuffer.c                               |   13 
 b/src/input/idirectfbinputbuffer.h                               |    4 
 b/src/media/idirectfbdatabuffer_file.c                           |   12 
 b/src/media/idirectfbdatabuffer_streamed.c                       |    2 
 b/src/media/idirectfbimageprovider.c                             |    8 
 b/src/misc/conf.c                                                |   24 
 b/src/misc/conf.h                                                |    5 
 b/src/misc/util.c                                                |    2 
 b/systems/.cvsignore                                             |    2 
 b/systems/Makefile.am                                            |   15 
 b/systems/fbdev/.cvsignore                                       |    6 
 b/systems/fbdev/Makefile.am                                      |   27 
 b/systems/fbdev/fbdev.c                                          | 2056 ++++++++++
 b/systems/fbdev/fbdev.h                                          |   94 
 b/systems/fbdev/vt.c                                             |  534 ++
 b/systems/fbdev/vt.h                                             |   76 
 b/systems/sdl/.cvsignore                                         |    6 
 b/systems/sdl/Makefile.am                                        |   33 
 b/systems/sdl/primary.c                                          |  558 ++
 b/systems/sdl/primary.h                                          |   43 
 b/systems/sdl/sdl.c                                              |  239 +
 b/systems/sdl/sdl.h                                              |   42 
 b/systems/sdl/sdlinput.c                                         |  537 ++
 b/tools/.cvsignore                                               |    1 
 b/tools/Makefile.am                                              |    5 
 b/tools/dfbproxy.c                                               |  143 
 b/tools/fusion_bench.c                                           |    2 
 src/core/fbdev/.cvsignore                                        |    6 
 src/core/fbdev/Makefile.am                                       |   34 
 src/core/fbdev/fbdev.c                                           | 2056 ----------
 src/core/fbdev/fbdev.h                                           |   94 
 src/core/fbdev/vt.c                                              |  533 --
 src/core/fbdev/vt.h                                              |   76 
 src/core/sdl/.cvsignore                                          |    6 
 src/core/sdl/Makefile.am                                         |   45 
 src/core/sdl/primary.c                                           |  558 --
 src/core/sdl/primary.h                                           |   43 
 src/core/sdl/sdl.c                                               |  239 -
 src/core/sdl/sdl.h                                               |   42 
 src/core/sdl/sdlinput.c                                          |  537 --
 161 files changed, 17594 insertions(+), 4790 deletions(-)



commit b16bb03632ba78e661f4c0ac52a4897a550f637d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 14:57:56 2004 +0000

    Great thanks to "Vadim Catana <vcatana@registru.md>" for this
    patch fixing several issues with the overlay on Radeon9200!


 AUTHORS                            |    1 
 README                             |    1 
 gfxdrivers/radeon/radeon.c         |    2 
 gfxdrivers/radeon/radeon.h         |    9 -
 gfxdrivers/radeon/radeon_overlay.c |  240 +++++++++++++++++++++----------------
 gfxdrivers/radeon/radeon_regs.h    |   26 +++-
 6 files changed, 171 insertions(+), 108 deletions(-)



commit 707a3102d74726f00bd81e2e7a410bada8767b1f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 05:54:54 2004 +0000

    Allow kern_x or kern_y to be NULL.


 idirectfbfont_ft2.c |   17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)



commit 28b98a461ec9312078dd49d473cbf848a8772aef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 03:58:34 2004 +0000

    Follow UTF8 code changes.


 gfxcard.c |   13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)



commit b65a2f1940c5e04072f6d21dd966ce2f7d188ee9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 03:57:35 2004 +0000

    Wrote a highly optimized version of "IDirectFBFont_GetStringWidth()".
    The previous version used the bloated "IDirectFBFont_GetStringExtents()".


 idirectfbfont.c |   77 ++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 61 insertions(+), 16 deletions(-)



commit 413823c2c1aa4518eaa376f5fda7d22aa4c8bbb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 03:53:21 2004 +0000

    Replaced 256 entries lookup table "direct_utf8_skip"
    by the macro "DIRECT_UTF8_SKIP" and a 64 entries lookup table
    which is statically defined in the header again.
    
    Replaced the non-inlined function "direct_utf8_get_char()"
    by the macro "DIRECT_UTF8_GET_CHAR" which uses a much smaller
    and inlined function for non-ascii cases.


 utf8.c |   45 +--------------------------------------------
 utf8.h |   50 ++++++++++++++++++++++++++++++++++++++++----------
 2 files changed, 41 insertions(+), 54 deletions(-)



commit bfb0dbeeff67354fb11f3155c5dd16fb8fe9626c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 29 01:42:44 2004 +0000

    If "__NR_gettid" is still not defined after including <linux/unistd.h>,
    print a warning and use getpid instead of gettid.


 system.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 315df6985af6cf99afe9fe1b1b3a79bedbc4bd46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 28 03:25:35 2004 +0000

    Work around libstuhl's sys_lib_??search_path_spec during cross builds (untested).


 configure.in |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit afec3553f325e9d6ad9009c33754a6a00d155850
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 27 06:15:20 2004 +0000

    Added internal documentation, mostly diagrams.


 Architecture.pdf          |binary
 Architecture.sxi          |binary
 b/docs/initialization.txt |    4 ++--
 3 files changed, 2 insertions(+), 2 deletions(-)



commit 1e7fd7dda91dee85372c5c391281f0ab56c83bd5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Apr 22 15:49:59 2004 +0000

    Fixed field parity option.


 matrox_crtc2.c |   17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-)



commit 084564e29cead69c896834729c154edb74d98b18
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Apr 21 14:21:23 2004 +0000

    updated savagefb patch for 2.4.26


 /dev/null                                       |binary
 b/patches/Makefile.am                           |    2 +-
 b/patches/savagefb-0.3.2-linux-2.4.26.patch.bz2 |binary
 3 files changed, 1 insertion(+), 1 deletion(-)



commit 6f84fca7e84bb2ee193bd9cadb21570556742a59
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Apr 21 13:50:37 2004 +0000

    - compile fixes
    - disable overlay support


 Makefile.am |    1 -
 savage.c    |    5 +++++
 savage3d.c  |    5 +++++
 savage4.c   |    9 ++++++---
 4 files changed, 16 insertions(+), 4 deletions(-)



commit 7a8869e366b93b60d2cb82a885a683096a60aa30
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Apr 15 15:50:28 2004 +0000

    -optimized version of rgb16 blitting with destination color keying
    -support for rgb32 blitting with destination color keying


 generic.c |   77 +++++++++++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 67 insertions(+), 10 deletions(-)



commit 35e00c9e7e36cabde22292e96127a21331c7b65f
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Apr 14 18:17:56 2004 +0000

    unoptimized implemetation of rgb16 to rgb16 destination color keying for testing purposes.


 generic.c |   41 +++++++++++++++++++++++++++++++++++++++++
 1 file changed, 41 insertions(+)



commit 856de6055c24ca9058ff3bc96c8e86f8715f2bb1
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Apr 13 22:33:12 2004 +0000

    minor cleanup


 neo_overlay.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit 144be84f594841e2796c58019f5b4ecaa0a2f321
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Apr 13 20:08:44 2004 +0000

    build neomagic driver


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fc6ebe75205c032cbd8bbfdca64d3bbcbead8022
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Apr 13 20:08:26 2004 +0000

    port driver to DirectFB 0.9.21 internals


 neo2200.c     |    7 +-
 neo_overlay.c |  176 +++++++++++++++++-----------------------------------------
 neomagic.c    |    8 ++
 3 files changed, 65 insertions(+), 126 deletions(-)



commit ca4e31f1aadb91e70376d6a4bac878a16931c8d5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 8 12:02:55 2004 +0000

    Fix single app core build.


 dfbdump.c |    2 ++
 1 file changed, 2 insertions(+)



commit 931dc2843055f679b3176a9a10a0976a86bb39e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 8 11:22:46 2004 +0000

    include errno.h


 system.c |    2 ++
 util.c   |    1 +
 2 files changed, 3 insertions(+)



commit ce584f6609ccdc97acd8ba13cee9a38e6ea2b8d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 8 10:25:27 2004 +0000

    Fix assertion caused by double destruction of the core
    when applying the configuration fails.


 directfb.c  |   12 ++++--------
 idirectfb.c |    2 +-
 idirectfb.h |    8 ++++++--
 3 files changed, 11 insertions(+), 11 deletions(-)



commit 7527482b1c8a9222f211e0af7622e556de842bf5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 8 09:14:18 2004 +0000

    Force CPPFLAGS to be included for compiling dtest.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit fd0cc4dd01780c5a9ab47bdc5d2cd3fde576e755
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Apr 7 15:09:34 2004 +0000

    - increase minor version (0.2)
    - applied overlay patch from Vadim Catana (thanks!)
    looks good, needs testing (no radeon here to test)


 Makefile.am      |    1 
 radeon.c         |    5 
 radeon.h         |    2 
 radeon_overlay.c |  501 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 radeon_regs.h    |  199 +++++++++++++++++++++
 5 files changed, 707 insertions(+), 1 deletion(-)



commit f48b4bac7d6b9d490ae111240347e34679437615
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 5 12:27:56 2004 +0000

    Moved interface handling to libdirect.


 b/gfxdrivers/matrox/matrox_maven.c                                 |    1 
 b/gfxdrivers/radeon/radeon.c                                       |    1 
 b/interfaces/IDirectFBFont/idirectfbfont_default.c                 |    5 
 b/interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |   14 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   20 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |   20 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |   22 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   24 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |   33 -
 b/lib/direct/Makefile.am                                           |   37 -
 b/lib/direct/interface.c                                           |  260 ++++++++++
 b/lib/direct/interface.h                                           |  109 ++++
 b/lib/direct/interface_implementation.h                            |   81 +++
 b/lib/direct/util.c                                                |   31 +
 b/lib/direct/util.h                                                |    5 
 b/src/Makefile.am                                                  |    7 
 b/src/core/fbdev/fbdev.c                                           |    1 
 b/src/core/fbdev/vt.c                                              |    2 
 b/src/directfb.c                                                   |    4 
 b/src/display/idirectfbdisplaylayer.c                              |   82 +--
 b/src/display/idirectfbpalette.c                                   |   28 -
 b/src/display/idirectfbscreen.c                                    |   45 -
 b/src/display/idirectfbsurface.c                                   |  102 +--
 b/src/display/idirectfbsurface_layer.c                             |   18 
 b/src/display/idirectfbsurface_window.c                            |   14 
 b/src/idirectfb.c                                                  |  109 ++--
 b/src/idirectfb.h                                                  |    3 
 b/src/input/idirectfbinputbuffer.c                                 |   33 -
 b/src/input/idirectfbinputdevice.c                                 |   36 -
 b/src/media/idirectfbdatabuffer.c                                  |   12 
 b/src/media/idirectfbdatabuffer_file.c                             |   27 -
 b/src/media/idirectfbdatabuffer_memory.c                           |   22 
 b/src/media/idirectfbdatabuffer_streamed.c                         |   22 
 b/src/media/idirectfbfont.c                                        |   26 -
 b/src/media/idirectfbimageprovider.c                               |   20 
 b/src/misc/util.c                                                  |   29 -
 b/src/misc/util.h                                                  |    5 
 b/src/windows/idirectfbwindow.c                                    |   84 +--
 src/interface.c                                                    |  255 ---------
 src/interface.h                                                    |  113 ----
 src/interface_implementation.h                                     |   83 ---
 41 files changed, 925 insertions(+), 920 deletions(-)



commit 649540bcd8afa16e139aa55f7b988d437525c1af
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 5 10:35:19 2004 +0000

    Cleanup includes.


 interface.h |   12 ++++--------
 1 file changed, 4 insertions(+), 8 deletions(-)



commit 9d55931f5ca7cef5a8a456d624f70111e863e612
Author: Andreas Kotes <count@directfb.org>
Date:   Fri Apr 2 12:34:38 2004 +0000

    compare errno instead of ret with EINVAL - fixes linux_input on 2.4


 linux_input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c3b29d306934ffbb7169c3f024dae253af03e7bb
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Apr 1 18:41:50 2004 +0000

    Use EVIOCGRAB ioctl to grab the device.


 linux_input.c |   18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)



commit fcb650ef87b167d5eaa49f1e272928b03d0ef237
Author: hunold <hunold>
Date:   Wed Mar 31 10:13:30 2004 +0000

    - fix unknown reference to MAX by includeing <direct/util.h>


 linux_input.c |    1 +
 1 file changed, 1 insertion(+)



commit 2b5bafc3f14dd9b34e7115187a8ac686cd664875
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 23:42:36 2004 +0000

    Further migration.


 gfxdrivers/mach64/mach64.c                                     |    1 
 gfxdrivers/matrox/matrox.c                                     |    1 
 gfxdrivers/matrox/matrox_state.c                               |    1 
 gfxdrivers/nsc/nsc.c                                           |    3 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                   |    1 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |    1 
 lib/direct/Makefile.am                                         |    6 
 lib/direct/util.c                                              |   82 ++++++
 lib/direct/util.h                                              |  124 ++++++++++
 lib/fusion/fusion_internal.h                                   |    2 
 src/core/fonts.c                                               |    1 
 src/core/gfxcard.c                                             |    1 
 src/core/layer_context.c                                       |    2 
 src/core/layer_region.c                                        |    2 
 src/core/surfacemanager.c                                      |    3 
 src/core/surfaces.c                                            |    3 
 src/core/windows.c                                             |    1 
 src/core/windowstack.c                                         |    1 
 src/display/idirectfbsurface.c                                 |    5 
 src/gfx/clip.c                                                 |    8 
 src/gfx/generic/generic.c                                      |    1 
 src/gfx/generic/generic.h                                      |    2 
 src/idirectfb.c                                                |    1 
 src/media/idirectfbdatabuffer_memory.c                         |    2 
 src/media/idirectfbdatabuffer_streamed.c                       |    3 
 src/misc/conf.c                                                |    9 
 src/misc/gfx_util.c                                            |    9 
 src/misc/util.c                                                |   46 ---
 src/misc/util.h                                                |   92 -------
 tools/dfbsummon.c                                              |    2 
 tools/directfb-csource.c                                       |   10 
 31 files changed, 256 insertions(+), 170 deletions(-)



commit b742b1cee162ee36d81781ecccee973461bbaa11
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 22:51:33 2004 +0000

    Migrating tree *creak*


 b/interfaces/IDirectFBFont/idirectfbfont_default.c |    6 
 b/interfaces/IDirectFBFont/idirectfbfont_ft2.c     |    1 
 b/lib/direct/Makefile.am                           |    2 
 b/lib/direct/tree.c                                |  307 +++++++++++++++++++++
 b/lib/direct/tree.h                                |   66 ++++
 b/lib/direct/types.h                               |    3 
 b/src/core/coretypes.h                             |    1 
 b/src/core/fonts.c                                 |   10 
 b/src/core/fonts.h                                 |    2 
 b/src/core/gfxcard.c                               |    4 
 b/src/misc/Makefile.am                             |    2 
 src/misc/tree.c                                    |  292 -------------------
 src/misc/tree.h                                    |   63 ----
 13 files changed, 388 insertions(+), 371 deletions(-)



commit b92f364bf157c52d4466db6efc9b52633ef7c02a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 21:38:37 2004 +0000

    Migration.


 b/interfaces/IDirectFBFont/idirectfbfont_default.c |    3 
 b/lib/direct/Makefile.am                           |    6 +
 b/lib/direct/types.h                               |    4 +
 b/lib/direct/utf8.c                                |   78 ++++++++++++++++++++
 b/lib/direct/utf8.h                                |   49 +++++++++++++
 b/src/core/coretypes.h                             |    2 
 b/src/core/gfxcard.c                               |    6 -
 b/src/media/idirectfbfont.c                        |   29 ++++---
 b/src/misc/Makefile.am                             |    2 
 src/misc/utf8.c                                    |   79 ---------------------
 src/misc/utf8.h                                    |   49 -------------
 11 files changed, 156 insertions(+), 151 deletions(-)



commit 9c424317a8c7e65892068456c44958c202bd5c50
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 19:48:08 2004 +0000

    One more include was missing.
    
    Remove accidently added file.


 b/inputdrivers/linux_input/linux_input.c |    1 
 lib/fusion/build.h                       |   34 -------------------------------
 2 files changed, 1 insertion(+), 34 deletions(-)



commit dcd1e2edf6ac5030c5270c9bc78c10bec412f50e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 19:37:11 2004 +0000

    Fix Makefile.am for static builds, copy'n'paste broke it.


 Makefile.am |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 9e0b23a846e2a394346ac1efca2cb724258884d1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 19:13:39 2004 +0000

    Added missing includes.


 gfxdrivers/ati128/ati128.c                                      |    2 
 gfxdrivers/ati128/ati128_overlay.c                              |    4 
 gfxdrivers/ati128/ati128_state.c                                |    2 
 gfxdrivers/cle266/uc_accel.c                                    |    2 
 gfxdrivers/cle266/uc_hw.h                                       |    2 
 gfxdrivers/cle266/uc_overlay.c                                  |    2 
 gfxdrivers/cle266/uc_ovl_hwmap.c                                |    8 
 gfxdrivers/cle266/uc_ovl_hwset.c                                |    2 
 gfxdrivers/cle266/uc_primary.c                                  |    1 
 gfxdrivers/cle266/unichrome.c                                   |    5 
 gfxdrivers/mach64/mach64.c                                      |    4 
 gfxdrivers/mach64/mach64_overlay.c                              |    6 
 gfxdrivers/mach64/mach64_state.c                                |    2 
 gfxdrivers/matrox/matrox.c                                      |    2 
 gfxdrivers/matrox/matrox_bes.c                                  |    2 
 gfxdrivers/matrox/matrox_crtc2.c                                |    1 
 gfxdrivers/matrox/matrox_maven.c                                |    1 
 gfxdrivers/matrox/matrox_state.c                                |    2 
 gfxdrivers/nsc/nsc.c                                            |  159 +++++-----
 gfxdrivers/nvidia/nvidia.c                                      |    2 
 gfxdrivers/nvidia/nvidia_overlay.c                              |    1 
 gfxdrivers/radeon/radeon.c                                      |    2 
 gfxdrivers/radeon/radeon_state.c                                |    2 
 gfxdrivers/sis315/sis315.c                                      |    5 
 gfxdrivers/sis315/sis315_state.c                                |    6 
 gfxdrivers/tdfx/tdfx.c                                          |    2 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                    |    1 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    1 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |    3 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c  |    2 
 src/directfb.c                                                  |    5 
 src/idirectfb.c                                                 |    2 
 src/interface.c                                                 |    3 
 src/media/idirectfbdatabuffer_file.c                            |   32 +-
 src/misc/conf.c                                                 |    1 
 src/misc/gfx_util.c                                             |    1 
 36 files changed, 176 insertions(+), 104 deletions(-)



commit 943227457616cf3c9c04c249a3c756acc37400c5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 18:35:08 2004 +0000

    Giant cleanup and restructuring.
    
    There are three libraries now: libdirect, libfusion and libdirectfb.


 b/configure.in                                                     |   17 
 b/gfxdrivers/ati128/ati128.c                                       |   24 
 b/gfxdrivers/ati128/ati128_overlay.c                               |    2 
 b/gfxdrivers/ati128/ati128_state.c                                 |    6 
 b/gfxdrivers/cle266/uc_accel.c                                     |    6 
 b/gfxdrivers/cle266/uc_fifo.c                                      |    2 
 b/gfxdrivers/cle266/uc_fifo.h                                      |   11 
 b/gfxdrivers/cle266/uc_hw.h                                        |    4 
 b/gfxdrivers/cle266/uc_hwmap.c                                     |    2 
 b/gfxdrivers/cle266/uc_hwset.c                                     |    2 
 b/gfxdrivers/cle266/uc_overlay.c                                   |    4 
 b/gfxdrivers/cle266/uc_ovl_hwmap.c                                 |    6 
 b/gfxdrivers/cle266/uc_ovl_hwset.c                                 |    4 
 b/gfxdrivers/cle266/uc_primary.c                                   |    4 
 b/gfxdrivers/cle266/uc_probe.c                                     |   10 
 b/gfxdrivers/cle266/uc_state.c                                     |    4 
 b/gfxdrivers/cle266/unichrome.c                                    |    4 
 b/gfxdrivers/cyber5k/cyber5k.c                                     |    8 
 b/gfxdrivers/cyber5k/cyber5k_underlay.c                            |    2 
 b/gfxdrivers/i810/i810.c                                           |   42 
 b/gfxdrivers/i810/i810_overlay.c                                   |    8 
 b/gfxdrivers/mach64/mach64.c                                       |   22 
 b/gfxdrivers/mach64/mach64_overlay.c                               |    4 
 b/gfxdrivers/mach64/mach64_state.c                                 |    6 
 b/gfxdrivers/mach64/mmio.h                                         |   12 
 b/gfxdrivers/matrox/matrox.c                                       |   31 
 b/gfxdrivers/matrox/matrox_bes.c                                   |    6 
 b/gfxdrivers/matrox/matrox_crtc2.c                                 |    8 
 b/gfxdrivers/matrox/matrox_maven.c                                 |   28 
 b/gfxdrivers/matrox/matrox_screen_crtc2.c                          |    1 
 b/gfxdrivers/matrox/matrox_spic.c                                  |    5 
 b/gfxdrivers/matrox/matrox_state.c                                 |    8 
 b/gfxdrivers/neomagic/neo2200.c                                    |    6 
 b/gfxdrivers/neomagic/neomagic.c                                   |   20 
 b/gfxdrivers/nsc/nsc.c                                             |   12 
 b/gfxdrivers/nsc/nsc_galfns.c                                      |  578 ++---
 b/gfxdrivers/nvidia/nvidia.c                                       |   24 
 b/gfxdrivers/nvidia/nvidia_overlay.c                               |   32 
 b/gfxdrivers/radeon/radeon.c                                       |   28 
 b/gfxdrivers/radeon/radeon_state.c                                 |    6 
 b/gfxdrivers/savage/savage.c                                       |   26 
 b/gfxdrivers/savage/savage3d.c                                     |    4 
 b/gfxdrivers/savage/savage4.c                                      |    4 
 b/gfxdrivers/savage/savage_streams_old.c                           |    8 
 b/gfxdrivers/sis315/sis315.c                                       |    4 
 b/gfxdrivers/sis315/sis315.h                                       |    4 
 b/gfxdrivers/sis315/sis315_state.c                                 |    4 
 b/gfxdrivers/tdfx/tdfx.c                                           |   34 
 b/include/Makefile.am                                              |    5 
 b/inputdrivers/dbox2remote/dbox2remote.c                           |   12 
 b/inputdrivers/elo/elo.c                                           |   21 
 b/inputdrivers/h3600_ts/h3600_ts.c                                 |   15 
 b/inputdrivers/joystick/joystick.c                                 |   14 
 b/inputdrivers/keyboard/keyboard.c                                 |   21 
 b/inputdrivers/linux_input/linux_input.c                           |   13 
 b/inputdrivers/lirc/lirc.c                                         |   15 
 b/inputdrivers/mutouch/mutouch.c                                   |   17 
 b/inputdrivers/ps2mouse/ps2mouse.c                                 |   27 
 b/inputdrivers/serialmouse/serialmouse.c                           |   23 
 b/inputdrivers/sonypi/sonypi.c                                     |   12 
 b/inputdrivers/ucb1x00_ts/ucb1x00_ts.c                             |   19 
 b/inputdrivers/wm97xx_ts/wm97xx_ts.c                               |   27 
 b/interfaces/IDirectFBFont/idirectfbfont_default.c                 |   18 
 b/interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |   54 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   16 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    6 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    8 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   20 
 b/interfaces/IDirectFBImageProvider/mpeg2/store.c                  |   34 
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   | 1014 +++++-----
 b/lib/Makefile.am                                                  |    2 
 b/lib/direct/conf.h                                                |    4 
 b/lib/direct/debug.c                                               |    8 
 b/lib/direct/dtest.c                                               |    2 
 b/lib/direct/mem.c                                                 |   11 
 b/lib/direct/mem.h                                                 |    4 
 b/lib/direct/messages.c                                            |   13 
 b/lib/direct/trace.c                                               |    4 
 b/lib/fusion/.cvsignore                                            |    7 
 b/lib/fusion/Makefile.am                                           |   91 
 b/lib/fusion/arena.c                                               |  516 +++++
 b/lib/fusion/arena.h                                               |   60 
 b/lib/fusion/build.h                                               |   34 
 b/lib/fusion/build.h.in                                            |   34 
 b/lib/fusion/call.c                                                |  268 ++
 b/lib/fusion/call.h                                                |   63 
 b/lib/fusion/conf.c                                                |   40 
 b/lib/fusion/conf.h                                                |   42 
 b/lib/fusion/fusion.c                                              |  422 ++++
 b/lib/fusion/fusion.h                                              |   71 
 b/lib/fusion/fusion_internal.h                                     |   89 
 b/lib/fusion/fusion_shmalloc.c                                     |  496 ++++
 b/lib/fusion/lock.c                                                |  221 ++
 b/lib/fusion/lock.h                                                |   88 
 b/lib/fusion/object.c                                              |  357 +++
 b/lib/fusion/object.h                                              |  186 +
 b/lib/fusion/property.c                                            |  333 +++
 b/lib/fusion/property.h                                            |  100 
 b/lib/fusion/reactor.c                                             |  854 ++++++++
 b/lib/fusion/reactor.h                                             |   79 
 b/lib/fusion/ref.c                                                 |  489 ++++
 b/lib/fusion/ref.h                                                 |  104 +
 b/lib/fusion/shmalloc.h                                            |  137 +
 b/lib/fusion/shmalloc/.cvsignore                                   |    6 
 b/lib/fusion/shmalloc/Makefile.am                                  |   20 
 b/lib/fusion/shmalloc/shcalloc.c                                   |   67 
 b/lib/fusion/shmalloc/shfree.c                                     |  217 ++
 b/lib/fusion/shmalloc/shmalloc.c                                   |  680 ++++++
 b/lib/fusion/shmalloc/shmalloc_internal.h                          |  214 ++
 b/lib/fusion/shmalloc/shrealloc.c                                  |  162 +
 b/lib/fusion/types.h                                               |   59 
 b/lib/fusion/vector.c                                              |  174 +
 b/lib/fusion/vector.h                                              |  130 +
 b/src/Makefile.am                                                  |    6 
 b/src/core/Makefile.am                                             |    5 
 b/src/core/clipboard.c                                             |   34 
 b/src/core/colorhash.c                                             |   38 
 b/src/core/colorhash.h                                             |    2 
 b/src/core/core.c                                                  |  191 -
 b/src/core/core.h                                                  |    6 
 b/src/core/core_parts.c                                            |   39 
 b/src/core/core_parts.h                                            |    4 
 b/src/core/coredefs.h                                              |  124 -
 b/src/core/fbdev/fbdev.c                                           |  145 -
 b/src/core/fbdev/fbdev.h                                           |    4 
 b/src/core/fbdev/vt.c                                              |  100 
 b/src/core/fonts.c                                                 |   32 
 b/src/core/fonts.h                                                 |    2 
 b/src/core/gfxcard.c                                               |  233 +-
 b/src/core/gfxcard.h                                               |    2 
 b/src/core/input.c                                                 |  196 -
 b/src/core/input.h                                                 |    2 
 b/src/core/layer_context.c                                         |  184 -
 b/src/core/layer_context.h                                         |    2 
 b/src/core/layer_control.c                                         |   89 
 b/src/core/layer_region.c                                          |  142 -
 b/src/core/layer_region.h                                          |    2 
 b/src/core/layers.c                                                |  110 -
 b/src/core/layers_internal.h                                       |    6 
 b/src/core/modules.c                                               |   92 
 b/src/core/modules.h                                               |    8 
 b/src/core/palette.c                                               |   24 
 b/src/core/palette.h                                               |    2 
 b/src/core/screen.c                                                |  192 -
 b/src/core/screens.c                                               |   70 
 b/src/core/screens_internal.h                                      |    2 
 b/src/core/sdl/primary.c                                           |   31 
 b/src/core/sdl/sdl.c                                               |   22 
 b/src/core/sdl/sdl.h                                               |    4 
 b/src/core/sdl/sdlinput.c                                          |    6 
 b/src/core/sig.c                                                   |   36 
 b/src/core/sig.h                                                   |    8 
 b/src/core/state.c                                                 |   28 
 b/src/core/state.h                                                 |   10 
 b/src/core/surfacemanager.c                                        |  118 -
 b/src/core/surfacemanager.h                                        |    2 
 b/src/core/surfaces.c                                              |   89 
 b/src/core/surfaces.h                                              |   22 
 b/src/core/system.c                                                |   60 
 b/src/core/system.h                                                |    2 
 b/src/core/thread.c                                                |   77 
 b/src/core/thread.h                                                |    2 
 b/src/core/window_display.c                                        |   32 
 b/src/core/windows.c                                               |   99 
 b/src/core/windows.h                                               |    2 
 b/src/core/windows_internal.h                                      |   10 
 b/src/core/windowstack.c                                           |  117 -
 b/src/core/windowstack.h                                           |    2 
 b/src/directfb.c                                                   |   23 
 b/src/display/idirectfbdisplaylayer.c                              |    7 
 b/src/display/idirectfbpalette.c                                   |   15 
 b/src/display/idirectfbscreen.c                                    |    2 
 b/src/display/idirectfbsurface.c                                   |   20 
 b/src/display/idirectfbsurface.h                                   |    2 
 b/src/display/idirectfbsurface_layer.c                             |    4 
 b/src/display/idirectfbsurface_window.c                            |    4 
 b/src/gfx/generic/generic.c                                        |   66 
 b/src/idirectfb.c                                                  |   15 
 b/src/input/idirectfbinputbuffer.c                                 |   59 
 b/src/input/idirectfbinputbuffer.h                                 |    2 
 b/src/input/idirectfbinputdevice.c                                 |    8 
 b/src/interface.c                                                  |   36 
 b/src/interface.h                                                  |  117 +
 b/src/interface_implementation.h                                   |    2 
 b/src/media/idirectfbdatabuffer.c                                  |   18 
 b/src/media/idirectfbdatabuffer_file.c                             |   12 
 b/src/media/idirectfbdatabuffer_memory.c                           |   28 
 b/src/media/idirectfbdatabuffer_streamed.c                         |   62 
 b/src/media/idirectfbfont.c                                        |    4 
 b/src/media/idirectfbimageprovider.c                               |    4 
 b/src/misc/Makefile.am                                             |   28 
 b/src/misc/conf.c                                                  |  190 -
 b/src/misc/conf.h                                                  |   13 
 b/src/misc/gfx_util.c                                              |   22 
 b/src/misc/gfx_util.h                                              |    2 
 b/src/misc/tree.c                                                  |   18 
 b/src/misc/util.c                                                  |   10 
 b/src/misc/util.h                                                  |   11 
 b/src/windows/idirectfbwindow.c                                    |   36 
 b/tools/dfbdump.c                                                  |   18 
 b/tools/fusion_bench.c                                             |   16 
 include/directfb_internals.h                                       |  117 -
 src/core/fusion/.cvsignore                                         |    6 
 src/core/fusion/Makefile.am                                        |   53 
 src/core/fusion/arena.c                                            |  513 -----
 src/core/fusion/arena.h                                            |   60 
 src/core/fusion/call.c                                             |  264 --
 src/core/fusion/call.h                                             |   72 
 src/core/fusion/fusion.c                                           |  420 ----
 src/core/fusion/fusion.h                                           |   80 
 src/core/fusion/fusion_internal.h                                  |  139 -
 src/core/fusion/fusion_shmalloc.c                                  |  496 ----
 src/core/fusion/fusion_types.h                                     |   67 
 src/core/fusion/list.c                                             |   57 
 src/core/fusion/list.h                                             |   59 
 src/core/fusion/lock.c                                             |  218 --
 src/core/fusion/lock.h                                             |   98 
 src/core/fusion/object.c                                           |  355 ---
 src/core/fusion/object.h                                           |  197 -
 src/core/fusion/property.c                                         |  330 ---
 src/core/fusion/property.h                                         |  109 -
 src/core/fusion/reactor.c                                          |  850 --------
 src/core/fusion/reactor.h                                          |   79 
 src/core/fusion/ref.c                                              |  484 ----
 src/core/fusion/ref.h                                              |  114 -
 src/core/fusion/shmalloc.h                                         |  146 -
 src/core/fusion/shmalloc/.cvsignore                                |    6 
 src/core/fusion/shmalloc/Makefile.am                               |   21 
 src/core/fusion/shmalloc/shcalloc.c                                |   67 
 src/core/fusion/shmalloc/shfree.c                                  |  217 --
 src/core/fusion/shmalloc/shmalloc.c                                |  685 ------
 src/core/fusion/shmalloc/shmalloc_internal.h                       |  214 --
 src/core/fusion/shmalloc/shrealloc.c                               |  162 -
 src/core/fusion/vector.c                                           |  174 -
 src/core/fusion/vector.h                                           |  130 -
 src/misc/cpu_accel.c                                               |  212 --
 src/misc/cpu_accel.h                                               |   85 
 src/misc/debug.c                                                   |  479 ----
 src/misc/debug.h                                                   |   72 
 src/misc/mem.c                                                     |  242 --
 src/misc/mem.h                                                     |   80 
 src/misc/memcpy.c                                                  |  543 -----
 src/misc/memcpy.h                                                  |   51 
 src/misc/ppc_asm.h                                                 |  115 -
 src/misc/ppcasm_memcpy.S                                           |   54 
 src/misc/ppcasm_memcpy.h                                           |    5 
 src/misc/ppcasm_memcpy_cachable.S                                  |  150 -
 247 files changed, 10099 insertions(+), 12257 deletions(-)



commit a5b43ba63b828190794208c46be861d41af9d36a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 13:27:19 2004 +0000

    Fix non-debug build.


 dtest.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 115b24243e7de219d80237f74c94a969027bf45e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 12:03:36 2004 +0000

    Fixed warnings.


 memcpy.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit a548edfedf927f3cae542924b1481f3bc9a0b6ac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 10:31:27 2004 +0000

    Added DIRECT_BUILD_TRACE and DIRECT_BUILD_NOTEXT.


 configure.in          |   10 ++++++++++
 lib/direct/build.h.in |    4 +++-
 lib/direct/messages.c |    5 +++++
 lib/direct/messages.h |    3 ++-
 lib/direct/trace.c    |   13 +++++++------
 5 files changed, 27 insertions(+), 8 deletions(-)



commit 51ae67bcfdd5428f37a7450f632c3a258573fe7a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 10:12:58 2004 +0000

    Generate and install a header file containing some defines like DIRECT_BUILD_DEBUG.


 configure.in           |    6 ++++++
 lib/direct/.cvsignore  |    1 +
 lib/direct/Makefile.am |    1 +
 lib/direct/build.h.in  |   34 ++++++++++++++++++++++++++++++++++
 lib/direct/debug.c     |    8 +++++---
 lib/direct/debug.h     |    4 ++--
 lib/direct/mem.c       |    7 +++++--
 lib/direct/mem.h       |    4 +++-
 8 files changed, 57 insertions(+), 8 deletions(-)



commit b9035dbe990697ca3b72ecae6530a2a82297a5b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 30 09:31:13 2004 +0000

    Migrating base functionality to libdirect.


 Makefile.am                                         |    1 
 configure.in                                        |    2 
 gfxdrivers/ati128/Makefile.am                       |    1 
 gfxdrivers/cle266/Makefile.am                       |    5 
 gfxdrivers/cyber5k/Makefile.am                      |    1 
 gfxdrivers/i810/Makefile.am                         |    1 
 gfxdrivers/mach64/Makefile.am                       |    1 
 gfxdrivers/matrox/Makefile.am                       |    1 
 gfxdrivers/neomagic/Makefile.am                     |    1 
 gfxdrivers/nsc/Makefile.am                          |    1 
 gfxdrivers/nvidia/Makefile.am                       |    1 
 gfxdrivers/radeon/Makefile.am                       |    1 
 gfxdrivers/savage/Makefile.am                       |    1 
 gfxdrivers/sis315/Makefile.am                       |    1 
 gfxdrivers/tdfx/Makefile.am                         |    1 
 inputdrivers/dbox2remote/Makefile.am                |    1 
 inputdrivers/elo/Makefile.am                        |    1 
 inputdrivers/h3600_ts/Makefile.am                   |    1 
 inputdrivers/joystick/Makefile.am                   |    1 
 inputdrivers/keyboard/Makefile.am                   |    1 
 inputdrivers/linux_input/Makefile.am                |    1 
 inputdrivers/lirc/Makefile.am                       |    1 
 inputdrivers/mutouch/Makefile.am                    |    1 
 inputdrivers/ps2mouse/Makefile.am                   |    1 
 inputdrivers/serialmouse/Makefile.am                |    1 
 inputdrivers/sonypi/Makefile.am                     |    1 
 inputdrivers/ucb1x00_ts/Makefile.am                 |    1 
 inputdrivers/wm97xx_ts/Makefile.am                  |    1 
 interfaces/IDirectFBFont/Makefile.am                |    1 
 interfaces/IDirectFBImageProvider/Makefile.am       |    1 
 interfaces/IDirectFBImageProvider/mpeg2/Makefile.am |    1 
 interfaces/IDirectFBVideoProvider/Makefile.am       |    1 
 lib/.cvsignore                                      |    2 
 lib/Makefile.am                                     |    3 
 lib/direct/.cvsignore                               |    7 
 lib/direct/Makefile.am                              |  102 +++
 lib/direct/clock.c                                  |   59 ++
 lib/direct/clock.h                                  |   35 +
 lib/direct/conf.c                                   |   38 +
 lib/direct/conf.h                                   |   44 +
 lib/direct/cpu_accel.c                              |  211 +++++++
 lib/direct/cpu_accel.h                              |   85 +++
 lib/direct/debug.c                                  |  138 +++++
 lib/direct/debug.h                                  |  125 ++++
 lib/direct/dtest.c                                  |   23 
 lib/direct/list.c                                   |   58 ++
 lib/direct/list.h                                   |   50 +
 lib/direct/mem.c                                    |  273 ++++++++++
 lib/direct/mem.h                                    |   74 ++
 lib/direct/memcpy.c                                 |  541 ++++++++++++++++++++
 lib/direct/memcpy.h                                 |   49 +
 lib/direct/messages.c                               |  155 +++++
 lib/direct/messages.h                               |  119 ++++
 lib/direct/ppc_asm.h                                |  115 ++++
 lib/direct/ppcasm_memcpy.S                          |   54 +
 lib/direct/ppcasm_memcpy.h                          |    7 
 lib/direct/ppcasm_memcpy_cachable.S                 |  150 +++++
 lib/direct/signals.c                                |   47 +
 lib/direct/signals.h                                |   38 +
 lib/direct/system.c                                 |   46 +
 lib/direct/system.h                                 |   36 +
 lib/direct/thread.c                                 |  277 ++++++++++
 lib/direct/thread.h                                 |   87 +++
 lib/direct/trace.c                                  |  472 +++++++++++++++++
 lib/direct/trace.h                                  |   40 +
 lib/direct/types.h                                  |   42 +
 src/Makefile.am                                     |    2 
 src/core/Makefile.am                                |    1 
 src/core/fbdev/Makefile.am                          |    1 
 src/core/fusion/Makefile.am                         |    1 
 src/core/fusion/fusion_types.h                      |    9 
 src/core/fusion/shmalloc/Makefile.am                |    1 
 src/core/sdl/Makefile.am                            |    1 
 src/display/Makefile.am                             |    1 
 src/gfx/Makefile.am                                 |    1 
 src/gfx/generic/Makefile.am                         |    1 
 src/input/Makefile.am                               |    1 
 src/media/Makefile.am                               |    1 
 src/misc/Makefile.am                                |    1 
 src/windows/Makefile.am                             |    1 
 tools/Makefile.am                                   |    1 
 81 files changed, 3654 insertions(+), 9 deletions(-)



commit 9e6d496157d58194ea7c47cb80b01970117bb20a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 30 05:25:46 2004 +0000

    Use better constants for black/white level calculation on G450/G550.


 matrox_maven.c |   28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)



commit 43fd328e78d9b7ed8fdff92f9a8687fbe5869608
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 26 18:33:26 2004 +0000

    Added missing break in WaitForDataWithTimeout() to return upon timeout instead
    of busy looping.


 idirectfbdatabuffer_streamed.c |    3 +++
 1 file changed, 3 insertions(+)



commit cdb8309a90477700abb0a126ab0ea77e932321da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 24 12:26:07 2004 +0000

    Return DFB_DESTROYED in IDirectFBSurface_Window_GetSubSurface() if the
    surface of the window is NULL, e.g. after destroying the window.


 idirectfbsurface_window.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 671918392e4fa14d61b292dfe00e9b219cbb4269
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 24 07:26:39 2004 +0000

    Show total number of bytes allocated.


 dfbdump.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 9bcb4d6eb278efff00fc3ba1ff49e6977cd6d624
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 24 07:16:14 2004 +0000

    Rewrote shared memory allocation debug list handling
    using capacity based list reallocation like FusionVector does.
    
    No longer store local pointers to file and function names within the shared
    memory list entry *sigh*, but copy the strings into the list entry which stores
    function names with up to 48 characters and file names with up to 24 characters.
    
    Added option "-s" to dfbdump to show this list of all shared memory allocations.


 src/core/core.c                              |    2 
 src/core/fusion/fusion_shmalloc.c            |  105 +++++++++++++--------------
 src/core/fusion/shmalloc/shmalloc_internal.h |   14 ++-
 tools/dfbdump.c                              |   26 ++++++
 4 files changed, 89 insertions(+), 58 deletions(-)



commit 0e9e6b734048b22228c35fe138ccc9725687cb47
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 24 03:25:47 2004 +0000

    Show the reference id of new objects in debug message.


 fusion_internal.h |   18 ++++++++----------
 object.c          |    4 ++++
 2 files changed, 12 insertions(+), 10 deletions(-)



commit b1567802b3e34acfdcafd4c536917649c31f5907
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 23 21:28:27 2004 +0000

    Fix collision of "signals" with Qt headers.


 ChangeLog                               |  989 ++++++++++++++++++++++++++++++++
 gfxdrivers/matrox/matrox_screen_crtc2.c |   16 
 include/directfb.h                      |   23 
 src/display/idirectfbscreen.c           |    4 
 tools/dfbinfo.c                         |    4 
 5 files changed, 1011 insertions(+), 25 deletions(-)



commit e69a4701dc2046d8860409ffefb48f097bc85ca0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 22 01:04:08 2004 +0000

    Workaround for segfault due to dfb_system_current_mode() returning NULL.


 matrox_bes.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit c64d36e5d4ae80cdb0de30fd119fb05219da6c91
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Mar 19 10:46:17 2004 +0000

    mga_waitidle() should wait for idle DMA.


 matrox.c |    5 +++++
 matrox.h |    2 ++
 mmio.h   |    4 ++--
 regs.h   |    4 ++++
 4 files changed, 13 insertions(+), 2 deletions(-)



commit 4951d56d2aef27a9d88e527323d45c7f4701d5ef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 16 14:47:09 2004 +0000

    Resolve more symbols.


 debug.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 6559b36053961aa29c5fb03f1b17bb98b43daf59
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 15 18:34:13 2004 +0000

    Fixed and used fusion_list_foreach_safe.


 core/fusion/list.h                   |    8 ++++----
 media/idirectfbdatabuffer_streamed.c |   18 +++++-------------
 2 files changed, 9 insertions(+), 17 deletions(-)



commit dc9f26632de2db1866fb69b751e5182cba6be822
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 15 18:33:41 2004 +0000

    Print full object path in stack trace.


 debug.c |    9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)



commit b9b95e4b8962f0e02c410b4267f31b44206351eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 8 11:50:29 2004 +0000

    Turn AC_MSG_ERROR into AC_MSG_WARN.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 26fab30bf10f416cbc77e952c02d2defd1fde912
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Mar 8 06:38:23 2004 +0000

    Added sysfs support to matrox i2c detection code. Now it works on 2.6 kernels.


 configure.in                     |   25 ++++++++++++++++
 gfxdrivers/matrox/Makefile.am    |    1 
 gfxdrivers/matrox/matrox_maven.c |   60 +++++++++++++++++++++++++++++++++++----
 3 files changed, 81 insertions(+), 5 deletions(-)



commit ce2812c501dfee69f1d964ed7d17096bb9604b98
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 2 23:59:32 2004 +0000

    Millennium I doesn't support source color keying.


 matrox.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 73 insertions(+), 3 deletions(-)



commit d56ae483e01fe63ae8b4d67b3eef7d64b50a69bd
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 2 23:51:41 2004 +0000

    Don't try to find the PCI device unless it's actually needed. The
    framebuffer address check can actually fail with Millennium I/II because
    matroxfb lies about the address.


 matrox.c |   12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)



commit 2a5a5d22812a27619a69318fca127ebefcb7802e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 2 19:33:41 2004 +0000

    Added SGRAM autodetection for mach64.
    
    Removed [no-]mach64-sgram options.


 gfxdrivers/mach64/mach64.c |    7 ++++++-
 gfxdrivers/mach64/regs.h   |    1 +
 src/misc/conf.c            |    8 --------
 src/misc/conf.h            |    2 --
 4 files changed, 7 insertions(+), 11 deletions(-)



commit f617549fb705e1ea3def2bc76e7e2b6f3dae8db1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Mar 2 16:17:13 2004 +0000

    SGRAM auto-detection via /proc/bus/pci.
    
    Verify that we have found the correct entry in /proc/bus/pci by checking against the
    physical frambuffer address.
    
    Tried to make /proc/bus/pci code better looking :)
    
    Moved mdrv->g450 to mdev->g450_matrox and added device_data pointer to driver_data.
    
    Removed "#ifdef FB_ACCEL_MATROX_MGAG400" stuff. Not all instances were covered anyway.


 matrox.c       |  174 ++++++++++++++++++++++++++++++++++++---------------------
 matrox.h       |   38 ++++++++----
 matrox_bes.c   |   12 ++-
 matrox_crtc2.c |   33 ++++++----
 matrox_maven.c |   42 +++++++++----
 5 files changed, 193 insertions(+), 106 deletions(-)



commit 295588832f120d590457d52fa999eebe6545a1a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 27 16:17:40 2004 +0000

    Remove accidently commited test of "__attribute__((const))".


 layers.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 9e632b5def17fb91074fc3659b1503ab99289120
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 27 11:28:14 2004 +0000

    Switch to color keyed cursor if shape doesn't have alpha or if translucent
    windows are disabled.
    
    Color key is hard coded to 0xff 0x00 0xff. This will change upon introduction
    of real cursor objects in the core.


 windowstack.c |   32 +++++++++++++++++++++-----------
 1 file changed, 21 insertions(+), 11 deletions(-)



commit b0ca6c15ed3873b410f31937b4f04796ef3176af
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 27 10:43:20 2004 +0000

    Fixed redefinitions of _GNU_SOURCE.


 fusion_bench.c |    2 --
 raw15toraw24.c |    8 +++-----
 raw16toraw24.c |   12 +++++-------
 raw32toraw24.c |    8 +++-----
 4 files changed, 11 insertions(+), 19 deletions(-)



commit 458a61d13665b8aeb1500e2939128a94140dc884
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 27 08:48:43 2004 +0000

    Fixed failing assumption upon window destruction, i.e. assume that
    either the window is not destroyed or the event is DWET_DESTROYED in
    dfb_window_post_event().


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 47a931d734f265f3eeb1bf31ed9b3bbbb016b66c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 27 08:44:25 2004 +0000

    Added DFB_MAGIC stuff to arena.


 core.c         |    2 +-
 fusion/arena.c |   18 ++++++++++++++++++
 2 files changed, 19 insertions(+), 1 deletion(-)



commit 55fb47d38adcb2a6124dae687e5da05cd443ade3
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 27 05:31:29 2004 +0000

    Added SGRAM block write support to mach64 driver.
    Bumped mach64 driver version to 0.12.


 gfxdrivers/mach64/mach64.c |   19 ++++++++++++++-----
 gfxdrivers/mach64/mach64.h |    2 ++
 gfxdrivers/mach64/regs.h   |    3 +++
 src/misc/conf.c            |    8 ++++++++
 src/misc/conf.h            |    3 +++
 5 files changed, 30 insertions(+), 5 deletions(-)



commit e457bfae62455f53bb62accc3dd566881a9a3b49
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 27 04:58:06 2004 +0000

    Added detection for Rage Pro chips.


 mach64.c         |   38 ++++++++++++++++++++++++++++++++++++--
 mach64.h         |    2 ++
 mach64_overlay.c |   32 ++++++++++++++++++++------------
 regs.h           |    2 ++
 4 files changed, 60 insertions(+), 14 deletions(-)



commit 531bc44bc40274bf067ebf7e74c9a0b5a8502fb2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 27 04:44:40 2004 +0000

    Fixed blending once more. Some 3D registers aren't accessible unless
    SCALE_3D_FCN is set.


 mach64.c       |   45 +++++++++++++++++++++++++++++-------
 mach64.h       |    9 ++++---
 mach64_state.c |   70 +++++++++++----------------------------------------------
 mach64_state.h |   20 ++++------------
 4 files changed, 61 insertions(+), 83 deletions(-)



commit 22ddbb31a72d8ee753b5fbd3ee3a7d9049ccd4bc
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Feb 25 13:21:07 2004 +0000

    Re-enabled 2x horizontal zoom with RGB32 on G400. The problem was that
    BESHISCAL wasn't doubled when 2x zoom was enabled.


 matrox_bes.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)



commit b71d409302e1dc8737bd9daeafdd61865f6fa5bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 25 03:15:13 2004 +0000

    Add "-D_GNU_SOURCE" to DFB_INTERNAL_CFLAGS instead of CPPFLAGS
    to have it exported via directfb-internal.pc making external modules
    much more convenient.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3319099f98e4964ee1515cb76a53537771d42089
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 24 09:23:12 2004 +0000

    Renamed DSCAPS_FLIPPPING to DSCAPS_DOUBLE.


 gfxdrivers/nvidia/nvidia_overlay.c |   14 +++++++-------
 include/directfb.h                 |   10 ++++++----
 src/core/fbdev/fbdev.c             |   11 ++++++-----
 src/core/layer_context.c           |   10 +++++-----
 src/core/sdl/primary.c             |    6 +++---
 src/core/surfaces.c                |    6 +++---
 src/core/windows.c                 |    2 +-
 src/display/idirectfbsurface.c     |    2 +-
 src/idirectfb.c                    |   10 +++++++---
 src/windows/idirectfbwindow.c      |    2 +-
 tools/dfbdump.c                    |    6 +++---
 tools/dfbsummon.c                  |    2 +-
 12 files changed, 44 insertions(+), 37 deletions(-)



commit f7f3ceb88b3df242385f264bd1d4f19b138a2349
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 24 04:07:36 2004 +0000

    2x horizontal zoom doesn't work right on G400 with RGB32. It doubles the
    image width and if you move the image to the right so that over half of it
    gets cropped the whole image disappears. Without hzoom enabled things seem
    to work just fine even with the pixel clock running at > 200 MHz.


 matrox_bes.c |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit fd10e00bc33c9d48c74a048e95774bf7c81a6a28
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 24 02:09:12 2004 +0000

    Matrox BES overhaul:
    - Moved G450/G550 detection out of CRTC2 specific code because BES needs it too.
    - Max source width is 2048 for G450/G550.
    - 2x horizontal zoom pixel clock limit is 234 MHz for G450/G550 (from XFree86 source).
    - Handle destination cropping.
    - On G400 all horizontal parameters need to be doubled for RGB32.
    - G450/G550 can handle RGB32 without scaling limitation.
    - Bumped driver version to 0.7.


 matrox.c       |   72 +++++++++++++++++++
 matrox.h       |    2 
 matrox_bes.c   |  212 +++++++++++++++++++++++++++++++--------------------------
 matrox_crtc2.c |   20 ++---
 matrox_maven.c |   94 +++----------------------
 matrox_maven.h |    1 
 regs.h         |    2 
 7 files changed, 213 insertions(+), 190 deletions(-)



commit bba9cd1250e9b13feb0690cc5565c1ab106b4ab8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 23 22:44:44 2004 +0000

    Fixed Bop_a8_set_alphapixel_Aop_airgb(), i.e. render opaque pixels of
    glyphs correctly onto AiRGB surfaces.


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit d3de90207dc5c9153f06a66b11b7acfe2d246291
Author: Andreas Robinson <andors@directfb.org>
Date:   Mon Feb 23 09:05:14 2004 +0000

    Long standing I420 video bug (trashed display) fixed.


 uc_ovl_hwmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b58dc796f21ec8d682c0ba88641896dc94abc880
Author: Andreas Robinson <andors@directfb.org>
Date:   Mon Feb 23 08:58:13 2004 +0000

    Added color adjustment code. It is disabled for now - the DFB->HW mapping is not
    yet producing correct results.


 uc_overlay.c   |   12 ++++++++-
 uc_overlay.h   |   11 +++++++-
 uc_ovl_hwmap.c |   71 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 uc_ovl_hwset.c |   29 +++++++++++++++++++++++
 4 files changed, 119 insertions(+), 4 deletions(-)



commit 6e6ae0ebe8e576b3b5e93b6a3eab67e68bda68c7
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Feb 21 04:28:31 2004 +0000

    Oops.


 idirectfbsurface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 08ccb946c95f34498c000c5aefb11c7e8a6bd5f6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Feb 21 04:25:58 2004 +0000

    Destructor forgot to use dfb_layer_region_unref().


 idirectfbsurface.c       |    2 +-
 idirectfbsurface_layer.c |    3 +++
 2 files changed, 4 insertions(+), 1 deletion(-)



commit 7371f807f041c1cec16fa927f1eb4da848c6280e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 20 22:58:23 2004 +0000

    Fixed long standing typo: gAquire() -> gAcquire().


 core/gfxcard.c        |   22 +++++++++++-----------
 gfx/generic/generic.c |    2 +-
 gfx/generic/generic.h |    2 +-
 3 files changed, 13 insertions(+), 13 deletions(-)



commit a55c4c9625af7abafb821fe990a216f7e779935b
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 19 22:43:43 2004 +0000

    Added support for format conversion blits and DSBLIT_BLEND_COLORALPHA.
    DSBLIT_BLEND_ALPHACHANNEL, DSBLIT_COLORIZE and TextureTriangle() would
    require using the texture engine. Unfortunately texture pitch must be a
    power of two value so this would require changes to the memory allocator :(
    
    Changed alignment limits to match hardware capabilities (hopefully).
    
    Reset SCALE_3D_CNTL and OVERLAY_SCALE_CNTL driver_close_device().
    
    Bumped driver version to 0.11.


 mach64.c       |  204 +++++++++++++++++++++++++++++++++++----------------------
 mach64.h       |   25 +++---
 mach64_state.c |  127 +++++++++++++++++++++++++++++------
 mach64_state.h |   18 ++++-
 regs.h         |    2 
 5 files changed, 264 insertions(+), 112 deletions(-)



commit deb1d1bf019469a5de6a66f8bd1771b09131fac2
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Feb 16 15:45:18 2004 +0000

    Changed License field to LGPL.


 directfb.spec.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 134ab65fe5ac7015cc6b57b96babb9f59ccd1858
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Feb 14 20:58:48 2004 +0000

    dfb_layer_context_set_configuration() used old data for window stack
    update which eventually caused a segfault in gFillRectangle().


 layer_context.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 1bdb1a10c6cdd2a8188ce812e9d7baaca713b34a
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 13 15:50:09 2004 +0000

    Initialize ALPHA_TEST_CNTL in mach64EngineReset(). Fixes blending.
    
    Bumped driver version 0.10.


 mach64.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit c7d03fce9f1ffef992887b93e8b50bacf1eaee70
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 13 01:26:18 2004 +0000

    Added DSDRAW_BLEND support for GT chips.
    
    Added mach64EngineReset() and initialized some registers just in case.
    
    Divided mach64CheckState() to GT and non-GT variants.
    
    DST_BRES_LNTH was written too early which broke blended lines. Strangely enough non-blended
    lines were fine without this change.
    
    Reduced top trapezoid height by one in FillTriangle(). The line in the middle was being
    drawn twice which looked bad with blending.
    
    Bumped driver version to 0.9.


 mach64.c       |  213 +++++++++++++++++++++++++++++++++++++++------------------
 mach64.h       |   14 ++-
 mach64_state.c |   60 ++++++++++++++++
 mach64_state.h |    8 ++
 regs.h         |   28 +++++++
 5 files changed, 251 insertions(+), 72 deletions(-)



commit 8f7a2d5fd10ae2626e647f9d6f895e6fa29fe766
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 12 17:06:01 2004 +0000

    Bumped driver version to 0.8.


 mach64.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 71761cffc62f8b79bdda330b86c0ac9c91f55e79
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 12 17:04:34 2004 +0000

    Added FillTriangle() support for GT chips.


 mach64.c |  116 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 regs.h   |    8 ++++
 2 files changed, 117 insertions(+), 7 deletions(-)



commit eb9ca3734c67d1ffe623961a53ec53b3f470ceda
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Feb 11 10:44:46 2004 +0000

    Only GT models have front end scaler -> no StretchBlit() for older models.
    
    Only set DST_LAST_PEL bit for bresenham lines. It doesn't affect antyhing else.
    
    Overlay source size is limited to 720x1024. It's actually 768x1024 for 3D Rage (LT) Pro but we can't tell the difference
    from the accelerator ID :(
    
    Fixed overlay source color keying.
    
    Fixed overlay source cropping for planar formats.
    
    Bumped driver version to 0.7.


 mach64.c         |   31 +++++++++++++++++++++----------
 mach64_overlay.c |   52 +++++++++++++++++++---------------------------------
 2 files changed, 40 insertions(+), 43 deletions(-)



commit 9a6545e8e81429a68a2b1b23149488b6b895e043
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 11 05:41:02 2004 +0000

    Fixed segfault during destruction of input only windows,
    e.g. when closing the context menu of an entry in gtk+-directfb.
    
    Added utility function fusion_pthread_recursive_mutex_init() which
    is used everywhere now instead of several pthread_mutexattr_*foo() calls.
    
    Moved DWET_DESTROYED notification to the end of dfb_window_destroy().
    
    Increased safety of single app core version of fusion_ref_down(),
    i.e. move the reference watcher call into the locked code section.
    
    Moved "-D_REENTRANT" from CFLAGS to CPPFLAGS.
    Added "-D_GNU_SOURCE" to CPPFLAGS.


 configure.in                                                   |    8 +
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    2 
 src/core/core.c                                                |    2 
 src/core/fbdev/vt.c                                            |    2 
 src/core/fonts.c                                               |    2 
 src/core/fusion/lock.c                                         |   11 --
 src/core/fusion/lock.h                                         |   20 ++++
 src/core/fusion/property.c                                     |    2 
 src/core/fusion/reactor.c                                      |   28 +----
 src/core/fusion/ref.c                                          |   23 +---
 src/core/state.c                                               |   11 --
 src/core/windows.c                                             |   19 ++--
 src/input/idirectfbinputbuffer.c                               |    2 
 src/media/idirectfbdatabuffer_streamed.c                       |   47 +++++-----
 src/misc/debug.c                                               |    4 
 15 files changed, 90 insertions(+), 93 deletions(-)



commit d873c7184ad462fe74df150927230bdf9ccbb277
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 11 05:17:58 2004 +0000

    In DFB_MAGIC_ASSERT(obj,magic) do DFB_ASSERT(obj!=NULL) first.


 debug.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 31063039e29e3c2b020a65ebf58af000a4ae372c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 11 04:39:20 2004 +0000

    Removed annoying surface listener debug output.


 idirectfbvideoprovider_v4l.c |    5 -----
 1 file changed, 5 deletions(-)



commit 9e5c4b6a5b4b2a7de27e7f8b010d5835688be986
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 10 12:43:17 2004 +0000

    Reset input field to zero upon Flip().
    
    Don't wait for previous settings to be loaded when setting new ones.
    
    Use correct vertical zoom again, green line at bottom is from decoder.


 uc_overlay.c   |    2 
 uc_ovl_hwset.c |  287 ++++++++++++++++++++++++++++-----------------------------
 2 files changed, 145 insertions(+), 144 deletions(-)



commit 0fddb092efae0454e3b98013159ada59b8ff77d6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 10 11:45:11 2004 +0000

    Added stretch blitting support.
    Bumped driver version to 0.6.


 mach64.c       |   67 +++++++++++++++++++++++++++++++++++++++++++++++++--------
 mach64.h       |   13 ++++++-----
 mach64_state.c |   37 ++++++++++++++++++++++++-------
 mach64_state.h |    4 +++
 regs.h         |   13 ++++++++++-
 5 files changed, 111 insertions(+), 23 deletions(-)



commit 46e5334ceb0fea0d94d2df74b657e50ded8aeee0
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Feb 9 19:07:13 2004 +0000

    - support for powerpc (handle mmio reads and writes correctly)


 mmio.h |   20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)



commit 90d96c8f8d054ee291f7dcf48fa73deb2d305648
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Feb 9 09:02:57 2004 +0000

    Added source and destination color keying to the overlay layer.
    Fixed drawing/blitting color keying bugs.
    No need to replicate bits to fill whole DP_FRGD_CLR register.
    Removed a DSPF_RGB24 case that was left in accidentally.
    Bumped driver version to 0.5.


 mach64.c         |    2 -
 mach64_overlay.c |   81 ++++++++++++++++++++++++++++++++++++++++++++++---------
 mach64_state.c   |   15 ++--------
 regs.h           |   11 +++++++
 4 files changed, 83 insertions(+), 26 deletions(-)



commit cd532f73b7781d027a30e45b0f47314f2bc15d28
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 6 18:07:07 2004 +0000

    Added DLOP_DEINTERLACING support to video layer.


 uc_overlay.c   |   22 ++++++++++++++++++-
 uc_overlay.h   |   12 +++++++---
 uc_ovl_hwmap.c |   15 ++++++++----
 uc_ovl_hwset.c |   33 ++++++++++++++++++++++++----
 vidregs.h      |   66 ++++++++++++++++++++++++++++-----------------------------
 5 files changed, 101 insertions(+), 47 deletions(-)



commit 34e921cc7e41f7ebc95caef8cce18550db073228
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Feb 6 14:06:18 2004 +0000

    shut up CVS


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit 5aed191fc82c78cd644535c5f9237b9e29568ed9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 6 13:53:57 2004 +0000

    Commented out annoying assumption in dfb_core_is_master().


 core.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0a80ea3e036187f47b2c5e6aef10b527ecfcb0a2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 6 13:50:34 2004 +0000

    Replaced all 'x$foo = xyes' by '"$foo" = "yes"' etc.


 configure.in |  164 +++++++++++++++++++++++++++++------------------------------
 1 file changed, 82 insertions(+), 82 deletions(-)



commit bddff63b33c38c5cd76c1c0e07cacc94d01eade4
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Feb 6 11:56:15 2004 +0000

    Initialize SCALER_H_COEFF registers.
    Bumped driver version to 0.4.


 mach64.c         |    2 +-
 mach64_overlay.c |    9 +++++++--
 2 files changed, 8 insertions(+), 3 deletions(-)



commit 0d1f448a5c13b408293aed32a5970ccdd8145a9d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Feb 5 11:54:33 2004 +0000

    Added overlay support.
    Bumped driver version to 0.3.


 Makefile.am      |    4 
 mach64.c         |   21 +-
 mach64.h         |   13 -
 mach64_overlay.c |  448 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 mmio.h           |   26 +++
 regs.h           |  119 ++++++++++++++
 6 files changed, 617 insertions(+), 14 deletions(-)



commit b28ff9f69c42d5c6756c50ee558420d58cc19045
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Feb 4 14:11:46 2004 +0000

    Fixed state handling.
    Bumped driver version to 0.2.


 mach64.c       |   59 +++++++++++++++++++++++++++++++++++++--------------------
 mach64.h       |   16 +++++++++++++--
 mach64_state.c |   30 +++++++++++++++++++++++++++-
 3 files changed, 81 insertions(+), 24 deletions(-)



commit 359ea62ac8754978d9190e7d484ae2ebe09595d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 4 07:47:55 2004 +0000

    Some optimizations.


 debug.c |   18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)



commit 4a463d3c6ed006d772d10d73b9abf69fac3fc427
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 4 05:18:29 2004 +0000

    Rewrote symbol lookup used by stack trace dumping code.
    
    The symbol list is no longer generated at build time for libdirectfb.
    
    Use popen("nm -n ...") to load symbols of any module on demand.
    
    Produce gdb like stack dumps (output formatting).


 b/src/Makefile.am  |   11 --
 b/src/misc/debug.c |  232 +++++++++++++++++++++++++++++++++--------------------
 tools/gensyms.sh   |    7 -
 3 files changed, 146 insertions(+), 104 deletions(-)



commit 104d42e5c792f7ae7f467494123a17ae74e06d97
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 23:07:14 2004 +0000

    Removed all "non-static inline" for now.


 gfxcard.c       |    6 +++---
 gfxcard.h       |    6 +++---
 layer_context.c |    4 ++--
 layer_context.h |    4 ++--
 layer_region.c  |    4 ++--
 layer_region.h  |    4 ++--
 layers.c        |   10 +++++-----
 layers.h        |   12 ++++++------
 screens.c       |    2 +-
 screens.h       |    2 +-
 windowstack.c   |    4 ++--
 windowstack.h   |   18 +++++++++---------
 12 files changed, 38 insertions(+), 38 deletions(-)



commit d5b60341429292bd11b6c42e8918bb202a2cd6d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 23:05:58 2004 +0000

    Added DFBDisplayLayerBufferMode to the auto generated
    "enum value / name string" mappings in "directfb_strings.h".
    
    Added DLBM_UNKNOWN for null termination of the map.
    
    Removed top level indention of "directfb_keyboard.h".


 Makefile.am         |    3 
 directfb.h          |    2 
 directfb_keyboard.h | 1022 ++++++++++++++++++++++++++--------------------------
 3 files changed, 517 insertions(+), 510 deletions(-)



commit 2173c24d57b786186f497beba4c4a43d8f992947
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 17:15:22 2004 +0000

    Put DFB_DEBUG into config.h, too.


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit 1304629fb2e6d966866fca7d993ab053b933ff07
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 3 14:08:30 2004 +0000

    Fixed cosmetic copy-paste error.


 mach64_state.h |   28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)



commit 7faf2adef1603907f4ffa9e69a3cd2883fdc426d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Feb 3 12:57:36 2004 +0000

    Added ATI Mach64 driver.


 configure.in                     |   29 ++
 gfxdrivers/Makefile.am           |    7 
 gfxdrivers/mach64/Makefile.am    |   21 +
 gfxdrivers/mach64/mach64.c       |  486 +++++++++++++++++++++++++++++++++++++++
 gfxdrivers/mach64/mach64.h       |   58 ++++
 gfxdrivers/mach64/mach64_state.c |  216 +++++++++++++++++
 gfxdrivers/mach64/mach64_state.h |   60 ++++
 gfxdrivers/mach64/mmio.h         |  109 ++++++++
 gfxdrivers/mach64/regs.h         |  307 ++++++++++++++++++++++++
 9 files changed, 1290 insertions(+), 3 deletions(-)



commit 7908d7f1790fd27e42624734398f495eebc2211d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 04:02:59 2004 +0000

    Check for timeout more often (every 16384 th iteration, was every 65536 th before).


 fusion_bench.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 344f1068e072c445c070247dd57fee37d53fbd22
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 03:54:57 2004 +0000

    Added benchmarking macros.
    
    Each benchmark runs for one second now.


 fusion_bench.c |  249 +++++++++++++++++----------------------------------------
 1 file changed, 76 insertions(+), 173 deletions(-)



commit b2f63d65392a676f93209228268598c767b0e7b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 03:16:13 2004 +0000

    Use recursive mutexes in threaded mutex benchmark.


 fusion_bench.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 1a85345b7bfb4f56b9df63ef2705659f80b42b4a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 3 02:56:20 2004 +0000

    Replaced getpid() reference benchmark with an flock(2) benchmark.


 fusion_bench.c |   29 ++++++++++++++++++++++++-----
 1 file changed, 24 insertions(+), 5 deletions(-)



commit e3ea9127a481d3bc9839474e77bfb3d5f14e89ea
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Feb 2 20:52:15 2004 +0000

    - set default overlay mode to YV12 instead of RGB16 (just testing)


 uc_overlay.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 02ac1ef679c119ca9d7062829a858f1ef78ef41b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 2 20:49:53 2004 +0000

    Added configure option "--enable-zlib" that activates gzipped screen shots etc.


 configure.in        |   42 +++++++++++++++++++++++++++------
 directfb-config.in  |    2 -
 directfb.pc.in      |    2 -
 src/core/surfaces.c |   66 +++++++++++++++++++++++++++++++++++++++++-----------
 4 files changed, 90 insertions(+), 22 deletions(-)



commit cb1458c01f68c68fab416e51ec1f735e55963bd0
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Feb 2 19:48:51 2004 +0000

    - if the environment variable DFB_CLE266_UNDERLAY is set, the videolayer
      is treated as underlay. primary layer hooks will be installed, so that
      the transparency of the overlay cat be set by using the primary layer
      interface.
    
    the GetLevel/SetLevel stuff might act strange now. will be fixed later.


 Makefile.am    |    1 
 uc_overlay.c   |   39 +++++--------
 uc_overlay.h   |    4 -
 uc_ovl_hwset.c |   10 ++-
 uc_primary.c   |  170 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 unichrome.c    |   11 +++
 6 files changed, 206 insertions(+), 29 deletions(-)



commit 8bd1780423c751fdd1c281b946e6c055b1a70c67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 30 16:34:12 2004 +0000

    Fixed an error handler.


 fbdev.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 30b3f1d25c058f3ca8ca6e27a15a98ae88de5bce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 30 15:08:35 2004 +0000

    Forgot to decrement num_buffers in buffer_destroy().


 debug.c |    2 ++
 1 file changed, 2 insertions(+)



commit 5a5077d6e8b8f7bbcdf13c1b79c1de33ecf7f8fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 30 14:57:34 2004 +0000

    Add -finstrument-functions to internal flags if enabled.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b40f2a64c048f750f789e3220cb4c8dcf5843f04
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 29 15:18:08 2004 +0000

    Enforce realization of layer region upon GetDisplayLayer()
    and SetCooperativeLevel() again to fix e.g. SetScreenLocation() for
    layers without a surface.


 idirectfbdisplaylayer.c |   28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)



commit 19fe0bc3474d075e339b413f155fd90c39ec0cba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 28 17:32:35 2004 +0000

    Show layer levels.


 dfbdump.c |   16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)



commit 7a43f301c0e2b223901b337a2f1723035254503c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 28 17:17:11 2004 +0000

    Print "unknown" if pixel format of context is unknown.


 dfbdump.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit fc1a25296fe1324f7baa57285ed9e0cce9a2bf67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 28 08:33:38 2004 +0000

    Dump contexts.


 dfbdump.c |  163 ++++++++++++++++++++++++++++++++++----------------------------
 1 file changed, 91 insertions(+), 72 deletions(-)



commit e5de11210b19b571a47ff3c00004d8ed2b48ce02
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 28 07:44:39 2004 +0000

    Avoid multiple dumps of local memory leaks at exit time.


 mem.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 2979c927f785fc79c55084ec746fc2ec156af0d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 28 07:28:28 2004 +0000

    Further finalization of the new layer code.
    
    The primary region of a layer is no longer created and activated
    during creation of the context.
    
    IDirectFB::GetDisplayLayer() no longer causes the layer to be shown or
    its surface to be created. Even IDirectFBDisplayLayer::SetCoooperativeLevel()
    and IDirectFBDisplayLayer::SetConfiguration() no longer cause that.
    
    A layer is allocated and shown upon:
    1) IDirectFBDisplayLayer::CreateWindow()
    2) IDirectFBDisplayLayer::GetSurface()
    3) IDirectFB::CreateSurface() <- if primary & fullscreen
    
    Fixed failing assumption for exclusive access to additional layers.
    Fixed missing context and region destruction after releasing the layer.


 include/directfb.h                  |    3 
 src/core/core.c                     |   30 ++
 src/core/core.h                     |   12 -
 src/core/fusion/vector.c            |    8 
 src/core/input.c                    |    2 
 src/core/layer_context.c            |  377 ++++++++++++++++++++++++------------
 src/core/layer_context.h            |    1 
 src/core/layer_control.c            |   17 +
 src/core/layer_region.c             |   11 -
 src/core/layer_region.h             |    3 
 src/core/layers_internal.h          |   33 +--
 src/core/window_display.c           |  106 ++++------
 src/core/windows.c                  |   36 +--
 src/core/windows.h                  |    1 
 src/core/windows_internal.h         |    1 
 src/core/windowstack.c              |   10 
 src/core/windowstack.h              |    5 
 src/directfb.c                      |    2 
 src/display/idirectfbdisplaylayer.c |   12 -
 src/idirectfb.c                     |    2 
 20 files changed, 422 insertions(+), 250 deletions(-)



commit f153145ac8711da92e4b239ea2c1d1f77f47e300
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jan 27 22:27:58 2004 +0000

    Re-added CRTC2 sub-picture opacity handling.
    Don't touch sup-picture bits of C2DATACTL in CRTC2 code.
    Removed mcrtc2->enabled.


 matrox_crtc2.c |    9 +---
 matrox_spic.c  |  124 ++++++++++++++++++++++-----------------------------------
 2 files changed, 53 insertions(+), 80 deletions(-)



commit e435f5cfa515eccb42cca5c7004784d5ec6f157d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 26 14:41:52 2004 +0000

    Decided to use floats in DFBVertex instead of fixed point.


 gfxdrivers/cle266/uc_accel.c |   23 +++++++++++++----------
 gfxdrivers/cle266/uc_fifo.h  |   11 +++++++++++
 include/directfb.h           |   12 ++++++------
 3 files changed, 30 insertions(+), 16 deletions(-)



commit 38c8f414f0cd14bcb669a33e581d8fd38d0365c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 26 14:36:41 2004 +0000

    Fix sanity check for DTTF_STRIP.


 idirectfbsurface.c |    4 ----
 1 file changed, 4 deletions(-)



commit a60fd1a4fafdc87574ee7752864c93606abbba4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 26 14:25:47 2004 +0000

    Initialize pthread key.


 debug.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ca5cdd584ab32b16be51f9266edd827b088e5ae1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Jan 23 18:49:50 2004 +0000

    Use DFB_COLOR_BITS_PER_PIXEL() to calculate surface palette size.


 fbdev/fbdev.c |    2 +-
 sdl/primary.c |    2 +-
 surfaces.c    |    5 +++--
 3 files changed, 5 insertions(+), 4 deletions(-)



commit b545132b89b811a127676300a808e1c1bd2e5efd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 22 17:15:06 2004 +0000

    Added IDirectFBSurface::BatchBlit() which increases pixel throughput
    of many small blits with same source and destination, e.g. custom font
    rendering like GTK+-DirectFB does.
    
    Benchmarks (P3 800 MHz, G450 AGP, 1280x1024, 16bit)
    
    Size.......Blit...BatchBlit (10 blits at once)
    8x8..........9.....35
    16x16.......36....138
    32x32......144....259
    64x64......326....327
    128x128....363....367
    256x256....386....390              in MPixels/sec


 include/directfb.h             |   13 ++++++
 src/core/gfxcard.c             |   59 ++++++++++++++++++++++++++++++
 src/core/gfxcard.h             |    3 +
 src/display/idirectfbsurface.c |   79 +++++++++++++++++++++++++++++++++++++++--
 4 files changed, 151 insertions(+), 3 deletions(-)



commit 708bae68c06eb7fc38910c711215fb5bf9c27e84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 21 22:00:16 2004 +0000

    Fix build for gcc 2.95.


 linux_input.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 31084e7aa9ca07bbf4a50bf2cbf53e0803506f57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 21 18:41:16 2004 +0000

    Fixed option "linux-input-ir-only".


 linux_input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 88f30c57c6ce95487f86c0109a7577858c4e38f8
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Jan 20 22:09:26 2004 +0000

    Store default color adjustment into layer context.


 layer_context.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 1d9ecac807dfd2606164ef588ea842f817925c3d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 20 19:36:39 2004 +0000

    Added option "linux-input-ir-only" which tells the linux input driver
    to ignore all non-IR Linux Input devices.


 inputdrivers/linux_input/linux_input.c |    9 ++++++++-
 src/misc/conf.c                        |    7 ++++++-
 src/misc/conf.h                        |    2 ++
 3 files changed, 16 insertions(+), 2 deletions(-)



commit 6ba9f68f786ed958cd757d3301919ee84937b190
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 20 02:24:14 2004 +0000

    Implemented DTTF_STRIP and DTTF_LIST, too.


 uc_accel.c |   18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)



commit e24979c34a8b5079d87f972fb51b28f7339d6b36
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 20 02:21:00 2004 +0000

    Fix doc for DFBTriangleFormation.


 directfb.h |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit eefb37cb8a3c8ddc3206d240f004d0a5c2e42d6e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 19 17:31:31 2004 +0000

    Take linux input code as hardware keycode.


 linux_input.c |    3 +++
 1 file changed, 3 insertions(+)



commit 87de49babbb52e72116f278697ce5adb3ae06d54
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 19 14:09:54 2004 +0000

    dist fixes


 gfxdrivers/matrox/Makefile.am |    1 +
 include/Makefile.am           |   29 +++++++++++++++--------------
 src/core/Makefile.am          |    1 +
 3 files changed, 17 insertions(+), 14 deletions(-)



commit 86a349cf91e7218bb6cda8ccead1d3275d0039df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 20:27:47 2004 +0000

    Use CSLF_FORCE, fixes failing PlayTo() on a fresh surface.


 idirectfbvideoprovider_v4l.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 1f7264083e7d5c8bf334cb7c6d9d2754b7e3728b
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Jan 16 17:54:08 2004 +0000

    do not use uc_ovl_setup_fifo(), it does not work as expected and causes display errors.


 uc_ovl_hwset.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 2e78810414fb82a3f70408877cb8026d3b25d9e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 17:42:59 2004 +0000

    Fix a8 font rendering for argb1555, i.e. remove alpha pits around glyphs.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ecea51abf206a2112017158f22386699ed3c490d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 06:35:04 2004 +0000

    Added DFB_MAGIC handling to surface manager and state functions.


 core.c           |    2 +-
 state.c          |   17 ++++++++++-------
 state.h          |    6 +++---
 surfacemanager.c |   48 ++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 62 insertions(+), 11 deletions(-)



commit 50c5949636f540ae507df515ef5fc54808a4092f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 06:10:04 2004 +0000

    Added DFB_MAGIC handling to CoreFont functions.
    
    Reduced minimum spell length to eight (including null character).


 core/core.c  |    2 +-
 core/fonts.c |   12 ++++++++++++
 core/fonts.h |    2 ++
 misc/debug.h |   16 ++++++++--------
 4 files changed, 23 insertions(+), 9 deletions(-)



commit e07223db3674d2dd5e6b966370c7c10235110eff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 05:27:20 2004 +0000

    #include <errno.h>


 coredefs.h |    1 +
 1 file changed, 1 insertion(+)



commit c315940a773940ffa21fb797acb0128ce6d19e78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 16 05:03:20 2004 +0000

    Initial version of the screen mixer/encoder/output APIs.
    
    An output is connected to an encoder which is connected to a mixer which
    combines selected display layers ;)
    
    Added a lot of types for description and configuration of these components.


 gfxdrivers/matrox/matrox_screen_crtc2.c |   38 ++-
 include/directfb.h                      |  346 +++++++++++++++++++++++++++----
 src/core/core.c                         |    2 
 src/core/gfxcard.h                      |    2 
 src/core/screen.c                       |  354 +++++++++++++++++++++++++++++--
 src/core/screen.h                       |   67 +++++-
 src/core/screens.c                      |   39 +++
 src/core/screens.h                      |  113 ++++++++--
 src/core/screens_internal.h             |   12 -
 src/display/idirectfbscreen.c           |  356 +++++++++++++++++++++++++++++++-
 10 files changed, 1221 insertions(+), 108 deletions(-)



commit b46a812e8f597505839f7e716892da083807d33a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 17:14:01 2004 +0000

    Renamed DFBScreenEncoderTVNorms to DFBScreenEncoderTVStandards.


 gfxdrivers/matrox/matrox_screen_crtc2.c |    6 +++---
 include/Makefile.am                     |    2 +-
 include/directfb.h                      |   24 ++++++++++++------------
 tools/dfbinfo.c                         |   12 ++++++------
 4 files changed, 22 insertions(+), 22 deletions(-)



commit 841a4e6f610b4c15fba8291ec1e358f3aba8e848
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 15:26:29 2004 +0000

    Initial support for encoders and outputs.
    
    Added IDirectFBScreen::GetEncoderDescriptions() and GetOutputDescriptions().
    
    Added all new types to the auto generated "directfb_strings.h" and dfbinfo.


 gfxdrivers/matrox/matrox_screen_crtc2.c |   42 ++++++++++
 include/Makefile.am                     |   18 ++++
 include/directfb.h                      |  121 +++++++++++++++++++++++++++++-
 src/core/core.c                         |    2 
 src/core/screen.c                       |   32 ++++++++
 src/core/screen.h                       |   24 ++++--
 src/core/screens.c                      |   39 +++++++++
 src/core/screens.h                      |   28 +++++--
 src/core/screens_internal.h             |   14 +++
 src/display/idirectfbscreen.c           |   56 ++++++++++++--
 tools/dfbinfo.c                         |  127 ++++++++++++++++++++++++++++++--
 11 files changed, 470 insertions(+), 33 deletions(-)



commit f8118c235c8150e3b27a7040803995dccb4277cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 13:38:45 2004 +0000

    Set stack->cursor.window = NULL in window_destructor() if the cursor window
    is being destroyed, e.g. during shutdown.


 windows.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit 972cef2f5778d120ad6d52c3f73900fba54eedab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 13:19:02 2004 +0000

    Ooops.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 02298a10df1efad7a4ce66dcf6d4b3e88903a160
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 13:17:16 2004 +0000

    Set keys[i].code = -1 in window_withdraw().


 windows.c |    1 +
 1 file changed, 1 insertion(+)



commit bb9aa1b5dbb241985aa643b7ed6ecb9225c83f8f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 15 13:13:27 2004 +0000

    #include <pthread.h>


 coredefs.h |    2 ++
 1 file changed, 2 insertions(+)



commit 492d994f87a3d6f9efd56df54b910a2ac6ec28db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 14 14:53:37 2004 +0000

    Fix plane multiplier for YV12 and I420.


 directfb.h |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit 7a4142f6b790b6348aab85720f1d75418039673d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 13 23:54:48 2004 +0000

    Moved write() call after the unlock.


 idirectfbinputbuffer.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 734014b8868a23628ad943259bcdaba7a2f3931d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 13 19:09:48 2004 +0000

    Use flags for dfb_gfxcard_lock() instead of four booleans.


 fbdev/fbdev.c |    2 -
 gfxcard.c     |  106 ++++++++++++++++++++++++----------------------------------
 gfxcard.h     |   18 +++++++--
 3 files changed, 58 insertions(+), 68 deletions(-)



commit 8889d1087b0ff77834699a3d911a14044bbed72f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 13 19:08:53 2004 +0000

    Argh, move magic behind link header.


 object.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 856b3cb3b2dfc06b3989518fabf9dcaed4750371
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 13 17:44:58 2004 +0000

    Use DFB_MAGIC_SET/ASSERT/CLEAR for FusionObject and FusionReactor.


 ChangeLog                 | 5783 +++++++++++++++++++++++++++++-----------------
 src/core/core.c           |    2 
 src/core/fusion/object.c  |    6 
 src/core/fusion/object.h  |   17 
 src/core/fusion/reactor.c |   20 
 5 files changed, 3776 insertions(+), 2052 deletions(-)



commit ca4faa96434e501e910e111a6ae4dfc674fc4cfd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 12 20:34:12 2004 +0000

    Readded IDirectFBDisplayLayer::WaitForSync() for convenience.


 include/directfb.h                  |   16 +++++++++++++---
 src/display/idirectfbdisplaylayer.c |    9 +++++++++
 2 files changed, 22 insertions(+), 3 deletions(-)



commit 0896b5ed31cdabe4db1ddf4f5bff68aa6b8fb723
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 12 15:28:29 2004 +0000

    Added a missing lock/unlock pair.


 debug.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 49ad2ee6c6138875587bbc7be40f982cfa097111
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 12 12:44:47 2004 +0000

    Speed up builtin stack trace support a lot
    by using thread specific data instead of gettid().


 core/coredefs.h               |    4 -
 core/fusion/fusion_internal.h |    4 -
 core/windowstack.c            |   13 ++--
 misc/debug.c                  |  116 +++++++++++++++++++++++++++++++++---------
 misc/debug.h                  |    4 +
 5 files changed, 106 insertions(+), 35 deletions(-)



commit 3d6ad2a20f03b8d10b0843ee5409a674de926efc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 9 11:14:51 2004 +0000

    Quick solution for middle mouse button emulation:
    Press <Meta>-<Ctrl> + Left/Right Click generates 3rd/4th button event.


 windowstack.c |   26 +++++++++++++++++++-------
 1 file changed, 19 insertions(+), 7 deletions(-)



commit 583397b66a7d9d790e80facdeb5f23980863c91b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 9 10:32:28 2004 +0000

    Fix Makefile for newer automake.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9b666f3515bc4fead73a1dcf3e2f4f9006ad3f01
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 8 19:49:55 2004 +0000

    Added IDirectFBSurface::TextureTriangles() which takes a source surface
    as the texture, a pointer to a DFBVertex array, the array size and the
    DFBTriangleFormation which can be DTTF_LIST, DTTF_STRIP or DTTF_FAN.
    
    Each DFBVertex contains transformed x, y, z, w, s and t coordinates
    using some fixed point integers.
    
    The set blitting flags are used.
    
    Implemented textured triangles for CLE266 (only DTTF_FAN yet).
    
    Started a Matrox implementation, but don't know how to calculate
    perspective coordinates for the trapezoids (s, t and q).
    
    The added code is very small, but applications can now render full
    3D scenes with alpha blending, color modulation (for lighting) etc. ;)
    
    But be aware of the missing Z buffer...


 gfxdrivers/cle266/uc_accel.c   |   40 +++++++
 gfxdrivers/cle266/uc_accel.h   |   10 +
 gfxdrivers/cle266/uc_state.c   |    2 
 gfxdrivers/cle266/unichrome.c  |   13 +-
 gfxdrivers/matrox/matrox.c     |  210 +++++++++++++++++++++++++++++++++++++----
 gfxdrivers/matrox/matrox.h     |    8 -
 include/directfb.h             |   36 ++++++-
 src/core/gfxcard.c             |   36 +++++++
 src/core/gfxcard.h             |   16 ++-
 src/display/idirectfbsurface.c |   76 ++++++++++++++
 10 files changed, 413 insertions(+), 34 deletions(-)



commit b2a89e2a76bfb47a42512e4e3edd616db1ec1f8e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 8 19:26:44 2004 +0000

    Introduce IDirectFBScreen:
    - Display encoder and output connector settings,
    - input device assignment in multi head environments,
    - power management, synchronization.
    
    Added DFBScreenCapabilities with DSCCAPS_VSYNC,
    DSCCAPS_TV_ENCODER and DSCCAPS_POWER_MANAGEMENT for now.
    
    Added DFBScreenDescription with the caps and a screen name.
    
    Added IDirectFB::EnumScreens() and GetScreen().
    
    Added IDirectFBScreen::GetID(), GetDescription()
    and EnumDisplayLayers() limited to the layers on the screen.
    
    Added IDirectFBDisplayLayer::GetScreen().
    
    Moved IDirectFBDisplayLayer::SetScreenPowerMode()
    to IDirectFBScreen, called SetPowerMode().
    
    Moved IDirectFBDisplayLayer::WaitForSync() to IDirectFBScreen, too.
    
    Added Matrox CRTC2 screen.
    
    Added more types to the auto generated "directfb_strings.h".
    
    Added screen information to 'dfbinfo'.
    
    Added CoreScreen and ScreenFuncs.
    
    dfb_screens_register() returns the CoreScreen pointer to the driver.
    
    dfb_layers_register() takes a CoreScreen pointer as its first argument now
    and returns the CoreLayer.
    
    Added dfb_gfxcard_sync() call in front of the driver's FlipRegion() call.
    
    Moved WaitVSync() and SetScreenPowerMode() from LayerFuncs to ScreenFuncs.


 Makefile.am                             |    4 
 gfxdrivers/ati128/ati128.c              |    4 
 gfxdrivers/cle266/uc_overlay.c          |   11 -
 gfxdrivers/cle266/unichrome.c           |    4 
 gfxdrivers/matrox/Makefile.am           |   21 +-
 gfxdrivers/matrox/matrox.c              |   13 -
 gfxdrivers/matrox/matrox.h              |    6 
 gfxdrivers/matrox/matrox_bes.c          |    3 
 gfxdrivers/matrox/matrox_crtc2.c        |   42 ----
 gfxdrivers/matrox/matrox_screen_crtc2.c |  130 ++++++++++++
 gfxdrivers/nvidia/nvidia.c              |    4 
 gfxdrivers/radeon/radeon.c              |   70 ++++++
 include/Makefile.am                     |   20 +
 include/directfb.h                      |  186 ++++++++++++++++--
 include/directfb_internals.h            |    4 
 src/core/Makefile.am                    |    4 
 src/core/core.c                         |   23 +-
 src/core/core_parts.h                   |    7 
 src/core/coredefs.h                     |    5 
 src/core/coretypes.h                    |    2 
 src/core/fbdev/fbdev.c                  |  178 ++++++++++-------
 src/core/fbdev/fbdev.h                  |    5 
 src/core/gfxcard.h                      |    2 
 src/core/layer_control.c                |   28 --
 src/core/layer_control.h                |    6 
 src/core/layer_region.c                 |    3 
 src/core/layers.c                       |   32 ++-
 src/core/layers.h                       |   39 +--
 src/core/layers_internal.h              |    2 
 src/core/screen.c                       |  109 ++++++++++
 src/core/screen.h                       |   46 ++++
 src/core/screens.c                      |  322 ++++++++++++++++++++++++++++++++
 src/core/screens.h                      |  105 ++++++++++
 src/core/screens_internal.h             |   62 ++++++
 src/core/sdl/primary.c                  |  124 +++---------
 src/core/sdl/primary.h                  |    2 
 src/core/sdl/sdl.c                      |    7 
 src/display/Makefile.am                 |    6 
 src/display/idirectfbdisplaylayer.c     |   87 ++++----
 src/display/idirectfbscreen.c           |  216 +++++++++++++++++++++
 src/display/idirectfbscreen.h           |   41 ++++
 src/idirectfb.c                         |   94 +++++++++
 tools/dfbinfo.c                         |  159 ++++++++-------
 43 files changed, 1790 insertions(+), 448 deletions(-)



commit 714b6483110071d09102fa2e8592312586677064
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 8 18:20:17 2004 +0000

    GPM repeater support by Micha Nelissen <micha@neli.hopto.org>.


 README                                 |    1 
 inputdrivers/serialmouse/serialmouse.c |   41 ++++++++++++++++++++++++++-------
 src/misc/conf.c                        |   21 ++++++++++++++++
 src/misc/conf.h                        |    2 +
 4 files changed, 57 insertions(+), 8 deletions(-)



commit f12c38992b4ac64878b29623d499efa39fe36103
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 8 15:08:15 2004 +0000

    updated section about BSD


 README |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 538a4ffa3a3ed25c212230bf0a003f298f29a893
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 8 13:48:13 2004 +0000

    remove (__compar_fn_t) typecast, this is not available on FreeBSD and others


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 77b9447ae9756c5fcb299d2ff3a19a32fbd015f8
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 8 13:43:33 2004 +0000

    also define __s32 for non-linux platforms


 dfb_types.h |    1 +
 1 file changed, 1 insertion(+)



commit 70b784d64298005614b4b971fe9ed64d07f8c4a9
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 8 00:01:39 2004 +0000

    put #ifdefs around si_codes, not every platform defines all of them.


 sig.c |   49 ++++++++++++++++++++++++++++++++++---------------
 1 file changed, 34 insertions(+), 15 deletions(-)



commit 30badb490ea3445c3b5e40eb4acc9e47ead4f1bb
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jan 7 23:33:06 2004 +0000

    make platforms without PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP happy.
    (reviving FreeBSD support)


 core.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit ee1bee0316ea6dfbaff5d71cde8f179947d10d63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 6 09:27:54 2004 +0000

    Cosmetics.


 debug.c |   15 +++------------
 1 file changed, 3 insertions(+), 12 deletions(-)



commit f69169267319da728586d5c62fb914721549a3bb
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 5 15:27:31 2004 +0000

    order the default set of gfx drivers alphabetically


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 26a1a960de923bfc5c570e200bfe6e542a002f0b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 5 14:27:41 2004 +0000

    Use gettid() instead of getpid() if available.


 configure.in                      |    3 ++
 src/core/coredefs.h               |   10 +++++++--
 src/core/fusion/fusion_internal.h |    8 ++++---
 src/core/sig.c                    |    2 -
 src/core/thread.c                 |   16 +++++++-------
 src/misc/debug.c                  |   42 +++++++++++++++++++-------------------
 6 files changed, 46 insertions(+), 35 deletions(-)



commit 6d086443ffe430cbcd4ac52d8fa642d7a147c4cd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 5 13:36:18 2004 +0000

    Don't enable ELO input driver by default. It blocks during probe.


 configure.in             |    6 ++++++
 inputdrivers/Makefile.am |    6 +++++-
 2 files changed, 11 insertions(+), 1 deletion(-)



commit 2fb01242b944bb5244d3f2d747dc575b9db994fc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 28 09:19:52 2003 +0000

    Clip opaque region to window boundaries.
    
    Minor cleanups.


 core/window_display.c     |   26 +++++------
 core/windows.c            |    2 
 misc/util.c               |  108 +++++++++++++++++++++++++++++++++-------------
 misc/util.h               |   23 +++++----
 windows/idirectfbwindow.c |    3 +
 5 files changed, 110 insertions(+), 52 deletions(-)



commit 7891d5625b0d26ca5506e42eca974aded4a68076
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 28 03:08:07 2003 +0000

    Added IDirectFBEventBuffer::CreateFileDescriptor() that returns a file
    descriptor that can be read from including support for select().
    If only the file descriptor is used the buffer still needs to be flushed
    via IDirectFBEventBuffer::Reset().
    
    Reduced reference up/down in window stacking code.


 include/directfb.h               |   11 +++++++++
 src/core/core.c                  |    2 -
 src/core/window_display.c        |   43 +++++++++++++--------------------------
 src/core/windows.c               |   26 +++++++----------------
 src/core/windows_internal.h      |    1 
 src/core/windowstack.c           |   19 ++++++-----------
 src/input/idirectfbinputbuffer.c |   32 +++++++++++++++++++++++++++++
 7 files changed, 75 insertions(+), 59 deletions(-)



commit 9421c92d391feac85e2ccc9e45435758247a38e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 19 20:35:21 2003 +0000

    Fixed recognition of "a1-font" option when no attributes are specified.


 idirectfbfont_ft2.c |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit 3dbe49b124c5ec7c9df42812fb75c8b86a98972f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 19 12:47:03 2003 +0000

    ELO Touchscreen driver, thanks to Brandon M. Reynolds <breynolds@comtime.com>!


 AUTHORS                      |    1 
 README                       |    1 
 configure.in                 |    1 
 inputdrivers/Makefile.am     |    1 
 inputdrivers/elo/.cvsignore  |    6 
 inputdrivers/elo/Makefile.am |   17 +
 inputdrivers/elo/elo.c       |  485 +++++++++++++++++++++++++++++++++++++++++++
 7 files changed, 512 insertions(+)



commit 0b56002fdf16c481a076428d3e227475cc8a8426
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 19 12:01:08 2003 +0000

    Added /dev/misc/psaux.


 ps2mouse.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 327ca686a48e958d00e772da39d4e70485957bb7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 18 15:42:30 2003 +0000

    Added "a1-font" and did some updates.


 directfbrc.5.in |   32 +++++++++++++++++---------------
 1 file changed, 17 insertions(+), 15 deletions(-)



commit da6336529b63b4862254c5a46061ecdf05560a13
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 18 15:26:51 2003 +0000

    Added "a1-font" option.


 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   24 ++++++++++++++----------
 src/misc/conf.c                              |    8 ++++++++
 src/misc/conf.h                              |    3 +++
 3 files changed, 25 insertions(+), 10 deletions(-)



commit de20f813f6cf1af872bb43b078a53b9127e22575
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 18 15:11:42 2003 +0000

    Implemented all Bop_a1_set_alphapixel_Aop.


 generic.c |  249 ++++++++++++++------------------------------------------------
 1 file changed, 59 insertions(+), 190 deletions(-)



commit dd03d03ba33fdacbab242d2e11177048d13e0eb7
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Dec 18 13:10:42 2003 +0000

    - fix segfault, overlay still does not work for me (never did?)
    - remove XBOX specific code for now.


 nvidia_overlay.c |   25 ++++++++-----------------
 1 file changed, 8 insertions(+), 17 deletions(-)



commit 5e8ec08b08ae862fabca7e47c03fdc724925bb2d
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Dec 17 20:24:06 2003 +0000

    build nvidia driver by default


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 964953e44c9f71ccd0a388c45de01d04af6f9071
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Dec 17 20:19:26 2003 +0000

    updated nvidia driver (follow internal layer/region api changes).
    I couldn't test if it still works, at least it compiles.


 nvidia.c         |   14 ---
 nvidia.h         |   14 +++
 nvidia_overlay.c |  231 ++++++++++++++++++++++---------------------------------
 3 files changed, 111 insertions(+), 148 deletions(-)



commit 0a739673580b257c9dd0da9688a5bcd99943af5e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 17 03:14:18 2003 +0000

    Speed up kerning cache.


 idirectfbfont_ft2.c |   34 ++++++++++++++++++++--------------
 1 file changed, 20 insertions(+), 14 deletions(-)



commit faf9876dfc07754067aecf54771a320db9571731
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 17 01:02:19 2003 +0000

    Align the surface width to be a multiple of eight pixels.


 fonts.c |    7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)



commit b5fefd537696597c49b26a5169f2646b60dabae8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 17 00:10:47 2003 +0000

    Rubbish.


 b/src/Makefile.am   |    2 --
 src/export_list.sym |   11 -----------
 2 files changed, 13 deletions(-)



commit b9465d4cd089eb9c295d2d3203678be91e4477ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 23:41:44 2003 +0000

    Drivers can choose between byte/pixel pitch alignment, or even use both.


 core.c           |    2 -
 gfxcard.c        |   61 +++++++++++++++++++++++++++++--------------------------
 gfxcard.h        |    1 
 surfacemanager.c |   18 +++++++++++-----
 surfacemanager.h |    7 +++---
 5 files changed, 52 insertions(+), 37 deletions(-)



commit ae630e568666412bf865c354f16d6422b2968818
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 22:58:56 2003 +0000

    Preliminary DSPF_A1 support.
    
    Added DFB_PIXELFORMAT_ALIGNMENT(format) which is non-zero if alignment
    is required to do byte aligned access, e.g. 7 for DSPF_A1.
    
    Added DSPF_A1 support to FreeType2 font implementation.
    
    Implemented Bop_a1_set_alphapixel_rgb16(), "df_dok --mono" works using A1.


 include/directfb.h                           |   69 +++--
 interfaces/IDirectFBFont/idirectfbfont_ft2.c |   25 +-
 src/core/fonts.c                             |    8 
 src/core/gfxcard.c                           |    5 
 src/core/surfaces.c                          |    1 
 src/gfx/generic/generic.c                    |  332 ++++++++++++++++++++++++++-
 src/idirectfb.c                              |    1 
 tools/dfbdump.c                              |    4 
 8 files changed, 397 insertions(+), 48 deletions(-)



commit e91fac3f6eff151676d2e02ae79b94b633b1a9c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 22:30:16 2003 +0000

    Optimized glyph info prefetching code,
    speeds up DrawString in df_dok by ~10% on my Matrox G450 (P3 800E).


 gfxcard.c |   23 ++++++++++++++++++-----
 1 file changed, 18 insertions(+), 5 deletions(-)



commit 7b8ecee801e19525c4d0720f732428d9ef1d4570
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 20:49:32 2003 +0000

    Don't rely on correct kernel headers.


 i2c-dev.h      |  361 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 matrox_maven.c |    3 
 2 files changed, 363 insertions(+), 1 deletion(-)



commit 09975184a1d4f99ece54e8a2748f3306783cb66c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 06:51:34 2003 +0000

    Readded missing call to dfb_windowstack_flush_keys() during context switch.
    
    E.g. pressing Return in an xterm to start a fullscreen app didn't send the
    corresponding release event, because the fullscreen app was already running
    during the real release of the key.


 layer_context.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 1d581b0ab1bc8fb4864ba5728080e7048fa271d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 16 02:44:26 2003 +0000

    Fix failing assertion [stack->cursor.window != NULL] in windowstack.c:350.
    It was triggered by setting the cursor opacity to zero.


 windows.c |    3 ---
 1 file changed, 3 deletions(-)



commit b599e240e9b099360e90e328e72b30b7e547f048
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 11 02:25:27 2003 +0000

    Added DFB_PIXELFORMAT_INV_ALPHA(format).


 directfb.h |    2 ++
 1 file changed, 2 insertions(+)



commit 714d832a8dfcffe5da54fe6299e685a32e9e681b
Author: Andreas Kotes <count@directfb.org>
Date:   Wed Dec 10 21:17:25 2003 +0000

    revert strange side-commit


 input.c |   10 ----------
 1 file changed, 10 deletions(-)



commit 787abb9a3d46f86e4c0a38e3b9e3aee8819fa4ea
Author: Andreas Kotes <count@directfb.org>
Date:   Wed Dec 10 21:15:48 2003 +0000

    repeat a liiittle later


 inputdrivers/lirc/lirc.c |    4 ++--
 src/core/input.c         |   10 ++++++++++
 2 files changed, 12 insertions(+), 2 deletions(-)



commit f9cb70c2f01b591e0a568d528025880cf100c1d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 19:56:29 2003 +0000

    Use DSBF_ONE for destination alpha if DSBF_INVSRCALPHA is used.


 uc_hwmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0f1b805c87f0ecc2d68f1e282ab95305578e73de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 19:01:25 2003 +0000

    Fix format conversion blits from non-alpha to alpha surfaces
    by enabling alpha channel writes and fixing uc_map_blitflags().


 uc_hwmap.c |   10 +++++-----
 uc_state.c |    9 ++-------
 2 files changed, 7 insertions(+), 12 deletions(-)



commit a8150942177a97d17f21158bad06de57c388816b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 17:59:52 2003 +0000

    Finally remove DSPF_RGB15.
    
    Fixed enum name generation for constants with lower case characters.


 directfb.h |    4 +---
 mknames.sh |    2 +-
 2 files changed, 2 insertions(+), 4 deletions(-)



commit 91a55500cae447fe181676f916dbc0a67c531141
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 16:04:00 2003 +0000

    Reset repeat counter only if symbols differ.


 lirc.c |   24 ++++++++++++++----------
 1 file changed, 14 insertions(+), 10 deletions(-)



commit 838fa2ad266c7c4796d73d856d536458cb6fab5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 15:49:03 2003 +0000

    Fix copy'n'paste bug.


 lirc.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7d68a53a5a2a74d5e25d5a879f69dcd61efba8a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 14:14:09 2003 +0000

    Reset repeat counter.


 lirc.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit d3a0e089a392a7ce6f57d561403c34234e506f1a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 10 13:50:40 2003 +0000

    Fixed assumptions.


 surfaces.h |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 57f3a7c73214356098357224a235b8673c0424ef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 21:24:31 2003 +0000

    Use software fallback for broken blitting from non-alpha to alpha surfaces.


 uc_state.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 2f8cce6b7aba0cf99586e7cc5dcb83ce27a3b6d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 20:28:07 2003 +0000

    Hopefully fixed blitting of surfaces with an alpha channel, but without
    using DSBLIT_BLEND_ALPHACHANNEL.


 uc_hwmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 779a098c1f43c772fc1751619af43580e675ca0b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 20:25:34 2003 +0000

    Emulate keyboard like key repeat behaviour using select() with timeout
    and a counter to drop the first two repeats.


 lirc.c |   91 ++++++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 74 insertions(+), 17 deletions(-)



commit ef44d77b322f12e97f5d2576648f993263498bab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 15:46:45 2003 +0000

    Added diagonal cursor keys.


 directfb_keyboard.h |    5 +++++
 1 file changed, 5 insertions(+)



commit 45b1cbcdae7f128e29b7d1dc94d113fc14ff844d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 14:57:14 2003 +0000

    Don't destroy object pools during emergency shutdown.


 core.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit 49d9a0b9533947ae71b6b98587d2dd8565de105f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 9 14:51:41 2003 +0000

    Added support for DSPF_AiRGB.


 fbdev.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit d7aa86cec7793327a751c6ba290f207aeb0ce9a4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 8 20:55:32 2003 +0000

    Color bug seems to have reappeared after I readded the W component.
    Enabled dithering again ;(


 uc_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 85e483fe7dae0e68d1382f6592c4793c113ed63a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 8 18:28:19 2003 +0000

    Added new pixel format DSPF_AiRGB, i.e. DSPF_ARGB with inverted alpha channel.


 include/directfb.h                                             |   42 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    3 
 src/core/surfaces.c                                            |   11 
 src/core/windowstack.c                                         |    5 
 src/gfx/convert.c                                              |    1 
 src/gfx/convert.h                                              |    5 
 src/gfx/generic/generic.c                                      |  253 +++++++---
 src/idirectfb.c                                                |    5 
 src/misc/conf.c                                                |    1 
 src/misc/gfx_util.c                                            |    4 
 tools/dfbdump.c                                                |    4 
 11 files changed, 255 insertions(+), 79 deletions(-)



commit f31738c706e139cf5e9ff126ae1da4e0e2aedeb9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 15:13:56 2003 +0000

    Added debug message after module registration.


 modules.c |    2 ++
 1 file changed, 2 insertions(+)



commit 681a7be9e7b5bb69ec0fa9c1ca63aa1befbd3a1d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 13:42:34 2003 +0000

    Corrected to DFB_GRAPHICS_DRIVER(cle266) to match library name.


 unichrome.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 097bac636f36b2b384d0aac80caa707766675ec3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 12:19:56 2003 +0000

    Added DSBLIT_DEINTERLACE support to gBlit.


 generic.c |   33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)



commit 14188ad426b7327c2013619a08ff6f378061452c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 05:49:01 2003 +0000

    Set 64k stdout buffer.


 dfbdump.c |    5 +++++
 1 file changed, 5 insertions(+)



commit ce912964c1359817e316c8ffa784f82de27e8b67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 04:01:06 2003 +0000

    Updated copyright header.


 gfxdrivers/ati128/ati128.c                                       |   21 -
 gfxdrivers/ati128/ati128.h                                       |   11 
 gfxdrivers/ati128/ati128_overlay.c                               |    7 
 gfxdrivers/ati128/ati128_state.c                                 |   55 ++--
 gfxdrivers/ati128/ati128_state.h                                 |    9 
 gfxdrivers/ati128/mmio.h                                         |    9 
 gfxdrivers/ati128/regs.h                                         |    9 
 gfxdrivers/cyber5k/cyber5k.c                                     |    7 
 gfxdrivers/cyber5k/cyber5k.h                                     |    9 
 gfxdrivers/cyber5k/cyber5k_alpha.c                               |    9 
 gfxdrivers/cyber5k/cyber5k_alpha.h                               |    9 
 gfxdrivers/cyber5k/cyber5k_overlay.c                             |   11 
 gfxdrivers/cyber5k/cyber5k_overlay.h                             |    9 
 gfxdrivers/cyber5k/cyber5k_underlay.c                            |    7 
 gfxdrivers/cyber5k/mmio.h                                        |   11 
 gfxdrivers/cyber5k/regs.h                                        |   11 
 gfxdrivers/matrox/matrox.c                                       |   23 +
 gfxdrivers/matrox/matrox.h                                       |    9 
 gfxdrivers/matrox/matrox_bes.c                                   |    7 
 gfxdrivers/matrox/matrox_crtc2.c                                 |    7 
 gfxdrivers/matrox/matrox_spic.c                                  |    7 
 gfxdrivers/matrox/matrox_state.c                                 |   17 -
 gfxdrivers/matrox/matrox_state.h                                 |    9 
 gfxdrivers/matrox/mmio.h                                         |    9 
 gfxdrivers/matrox/regs.h                                         |    9 
 gfxdrivers/neomagic/neo2200.c                                    |   15 -
 gfxdrivers/neomagic/neo_overlay.c                                |    7 
 gfxdrivers/neomagic/neomagic.c                                   |    9 
 gfxdrivers/neomagic/neomagic.h                                   |    9 
 gfxdrivers/nvidia/nvidia.c                                       |   11 
 gfxdrivers/nvidia/nvidia.h                                       |    9 
 gfxdrivers/radeon/radeon.c                                       |    5 
 gfxdrivers/radeon/radeon.h                                       |    9 
 gfxdrivers/radeon/radeon_mmio.h                                  |    7 
 gfxdrivers/radeon/radeon_regs.h                                  |    7 
 gfxdrivers/radeon/radeon_state.c                                 |    7 
 gfxdrivers/radeon/radeon_state.h                                 |   10 
 gfxdrivers/tdfx/tdfx.c                                           |   11 
 gfxdrivers/tdfx/tdfx.h                                           |    9 
 include/directfb.h                                               |    7 
 include/directfb_internals.h                                     |    9 
 include/directfb_keyboard.h                                      |   35 +-
 inputdrivers/dbox2remote/dbox2remote.c                           |   11 
 inputdrivers/h3600_ts/h3600_ts.c                                 |    9 
 inputdrivers/joystick/joystick.c                                 |    9 
 inputdrivers/keyboard/keyboard.c                                 |   51 ++--
 inputdrivers/linux_input/linux_input.c                           |   49 ++--
 inputdrivers/lirc/lirc.c                                         |    7 
 inputdrivers/ps2mouse/ps2mouse.c                                 |   13 -
 inputdrivers/serialmouse/serialmouse.c                           |   11 
 inputdrivers/sonypi/sonypi.c                                     |   13 -
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c                             |   19 -
 interfaces/IDirectFBFont/idirectfbfont_default.c                 |    7 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |    7 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |    7 
 src/core/clipboard.c                                             |    7 
 src/core/clipboard.h                                             |    9 
 src/core/colorhash.c                                             |    7 
 src/core/colorhash.h                                             |    9 
 src/core/core.c                                                  |    7 
 src/core/core.h                                                  |    7 
 src/core/core_parts.c                                            |    7 
 src/core/core_parts.h                                            |    7 
 src/core/core_system.h                                           |    7 
 src/core/coredefs.h                                              |    7 
 src/core/coretypes.h                                             |    7 
 src/core/fbdev/fbdev.c                                           |    7 
 src/core/fbdev/fbdev.h                                           |    7 
 src/core/fbdev/vt.c                                              |    7 
 src/core/fbdev/vt.h                                              |   11 
 src/core/fonts.c                                                 |    7 
 src/core/fonts.h                                                 |    7 
 src/core/fusion/arena.c                                          |   11 
 src/core/fusion/arena.h                                          |    9 
 src/core/fusion/call.c                                           |   39 +--
 src/core/fusion/call.h                                           |    9 
 src/core/fusion/fusion.c                                         |    7 
 src/core/fusion/fusion.h                                         |    7 
 src/core/fusion/fusion_internal.h                                |    7 
 src/core/fusion/fusion_shmalloc.c                                |   53 ++--
 src/core/fusion/fusion_types.h                                   |    7 
 src/core/fusion/list.c                                           |    9 
 src/core/fusion/list.h                                           |    9 
 src/core/fusion/lock.c                                           |   49 ++--
 src/core/fusion/lock.h                                           |    9 
 src/core/fusion/object.c                                         |    7 
 src/core/fusion/object.h                                         |    7 
 src/core/fusion/property.c                                       |   59 ++--
 src/core/fusion/property.h                                       |   11 
 src/core/fusion/reactor.c                                        |  119 +++++-----
 src/core/fusion/reactor.h                                        |    9 
 src/core/fusion/ref.c                                            |  101 ++++----
 src/core/fusion/ref.h                                            |   13 -
 src/core/fusion/shmalloc.h                                       |    9 
 src/core/fusion/shmalloc/shcalloc.c                              |    9 
 src/core/fusion/shmalloc/shfree.c                                |    9 
 src/core/fusion/shmalloc/shmalloc.c                              |    7 
 src/core/fusion/shmalloc/shmalloc_internal.h                     |    9 
 src/core/fusion/shmalloc/shrealloc.c                             |    9 
 src/core/fusion/vector.c                                         |    7 
 src/core/fusion/vector.h                                         |    7 
 src/core/gfxcard.c                                               |    7 
 src/core/gfxcard.h                                               |    7 
 src/core/graphics_driver.h                                       |    9 
 src/core/input.c                                                 |    7 
 src/core/input.h                                                 |    7 
 src/core/input_driver.h                                          |    9 
 src/core/layer_context.c                                         |    7 
 src/core/layer_context.h                                         |    7 
 src/core/layer_control.c                                         |    7 
 src/core/layer_control.h                                         |    7 
 src/core/layer_region.c                                          |    7 
 src/core/layer_region.h                                          |    7 
 src/core/layers.c                                                |    7 
 src/core/layers.h                                                |    7 
 src/core/layers_internal.h                                       |    7 
 src/core/modules.c                                               |    7 
 src/core/modules.h                                               |   11 
 src/core/palette.c                                               |    7 
 src/core/palette.h                                               |    7 
 src/core/sdl/primary.c                                           |    7 
 src/core/sdl/primary.h                                           |    9 
 src/core/sdl/sdl.c                                               |    7 
 src/core/sdl/sdl.h                                               |    7 
 src/core/sdl/sdlinput.c                                          |    7 
 src/core/sig.c                                                   |    7 
 src/core/sig.h                                                   |    7 
 src/core/state.c                                                 |   41 +--
 src/core/state.h                                                 |   11 
 src/core/surfacemanager.c                                        |   43 +--
 src/core/surfacemanager.h                                        |    9 
 src/core/surfaces.c                                              |    7 
 src/core/surfaces.h                                              |    7 
 src/core/system.c                                                |    7 
 src/core/system.h                                                |    7 
 src/core/thread.c                                                |    7 
 src/core/thread.h                                                |    9 
 src/core/window_display.c                                        |    7 
 src/core/windows.c                                               |    7 
 src/core/windows.h                                               |    7 
 src/core/windows_internal.h                                      |    7 
 src/core/windowstack.c                                           |    7 
 src/core/windowstack.h                                           |    7 
 src/directfb.c                                                   |    7 
 src/display/idirectfbdisplaylayer.c                              |    7 
 src/display/idirectfbdisplaylayer.h                              |    7 
 src/display/idirectfbpalette.c                                   |    7 
 src/display/idirectfbpalette.h                                   |    9 
 src/display/idirectfbsurface.c                                   |    7 
 src/display/idirectfbsurface.h                                   |    9 
 src/display/idirectfbsurface_layer.c                             |    7 
 src/display/idirectfbsurface_layer.h                             |    7 
 src/display/idirectfbsurface_window.c                            |    7 
 src/display/idirectfbsurface_window.h                            |    9 
 src/gfx/clip.c                                                   |   21 -
 src/gfx/clip.h                                                   |    9 
 src/gfx/convert.c                                                |    9 
 src/gfx/convert.h                                                |    9 
 src/gfx/generic/generic.c                                        |   29 +-
 src/gfx/generic/generic.h                                        |   15 -
 src/gfx/generic/generic_mmx.h                                    |    7 
 src/gfx/util.c                                                   |    7 
 src/gfx/util.h                                                   |    7 
 src/idirectfb.c                                                  |   10 
 src/idirectfb.h                                                  |    7 
 src/input/idirectfbinputbuffer.h                                 |    9 
 src/input/idirectfbinputdevice.c                                 |   19 -
 src/interface.c                                                  |   29 +-
 src/interface_implementation.h                                   |    9 
 src/media/idirectfbimageprovider.h                               |    9 
 src/media/idirectfbvideoprovider.h                               |    9 
 src/misc/conf.c                                                  |    7 
 src/misc/conf.h                                                  |    7 
 src/misc/cpu_accel.c                                             |    9 
 src/misc/cpu_accel.h                                             |    9 
 src/misc/debug.c                                                 |    7 
 src/misc/debug.h                                                 |    7 
 src/misc/gfx_util.c                                              |   11 
 src/misc/gfx_util.h                                              |    9 
 src/misc/mem.c                                                   |   11 
 src/misc/mem.h                                                   |    9 
 src/misc/memcpy.c                                                |    7 
 src/misc/memcpy.h                                                |    9 
 src/misc/tree.c                                                  |    9 
 src/misc/tree.h                                                  |    9 
 src/misc/utf8.c                                                  |   11 
 src/misc/utf8.h                                                  |    9 
 src/misc/util.c                                                  |   15 -
 src/misc/util.h                                                  |    7 
 src/windows/idirectfbwindow.c                                    |    7 
 src/windows/idirectfbwindow.h                                    |    9 
 tools/dfbdump.c                                                  |   33 ++
 tools/dfbg.c                                                     |   14 -
 tools/dfbinfo.c                                                  |   10 
 tools/dfblayer.c                                                 |   58 ++--
 tools/dfbsummon.c                                                |   17 -
 tools/directfb-csource.c                                         |    7 
 tools/fusion_bench.c                                             |   33 ++
 202 files changed, 1384 insertions(+), 1107 deletions(-)



commit dbcfd6214db52610e1ac1ebcd2ae5dd7c3ba9bf1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 5 00:17:44 2003 +0000

    Added DFB_MAGIC_SET, DFB_MAGIC_ASSERT and DFB_MAGIC_CLEAR.


 core/fusion/fusion_types.h |    5 -----
 core/fusion/vector.c       |   18 +++++++++++-------
 core/fusion/vector.h       |   12 ++++++------
 misc/debug.h               |   21 +++++++++++++++++++++
 4 files changed, 38 insertions(+), 18 deletions(-)



commit f163a2f73b9784232a99d1b9cc18d90fe645e3d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 20:43:45 2003 +0000

    Add local reference to primary region of primary context.


 idirectfbdisplaylayer.c |   10 ++++++++++
 1 file changed, 10 insertions(+)



commit 21de00a5d5fc61bec4a371daaa2d764c3344b55b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 19:15:24 2003 +0000

    Show layer name in debug message of destructor.


 layer_region.c |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)



commit c1a059d6b23cb4bd2b93e9ddefd40985bf5d6c1f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 18:07:04 2003 +0000

    Link the primary region into the window to fix the destruction order of objects.


 core.c             |    2 +-
 windows.c          |   24 +++++++++++++++++++++---
 windows_internal.h |    2 ++
 3 files changed, 24 insertions(+), 4 deletions(-)



commit 9e083274e418151cf10f3adcbfcd8e4b6be9c651
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 18:05:02 2003 +0000

    Added timeout to fusion_sync().


 fusion.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 7df0d946fae81874d010d4394b40ee985820fcbf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 17:20:49 2003 +0000

    Clear the stack pointer after destruction.


 layer_context.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit c6c466f75310662ea5bb06e0f10651e24c962e03
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 4 15:43:07 2003 +0000

    Added call to dfb_system_lookup() to fix initialization.


 fusion_bench.c |    4 ++++
 1 file changed, 4 insertions(+)



commit bd562f76d999828ca7c26d9df042e5af7ee5ef62
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Dec 4 12:32:57 2003 +0000

    Do not build the wm97xx driver by default.
    The kernel header seems broken and until this is fixed, you will have
    to enable the build explicitely.


 configure.in |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit e26839d242693efd1a158018aae0e7d2d4185c70
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 19:08:26 2003 +0000

    Added "bcast true" support to fb.modes parser.


 fbdev/fbdev.c |    5 +++++
 system.h      |    1 +
 2 files changed, 6 insertions(+)



commit 5fee2d09c8cf2154d5c615d057f3319275c261c5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 19:07:41 2003 +0000

    Added another sched_yield().


 idirectfbvideoprovider_v4l.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit a582c66f7712cb1bda026b870c3dd0d63f722c52
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 18:47:31 2003 +0000

    Back to local uc_fifo ;(


 uc_accel.c  |    4 ++--
 uc_fifo.c   |   14 +++++++-------
 uc_fifo.h   |   10 +++++-----
 uc_hwset.c  |   16 ++++++++--------
 uc_state.c  |    2 +-
 unichrome.c |   13 ++++++-------
 unichrome.h |    3 +--
 7 files changed, 30 insertions(+), 32 deletions(-)



commit 7e59edf3764175cd0553d622c07fd418137b9244
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 18:33:11 2003 +0000

    Made struct uc_fifo volatile.


 uc_accel.c  |    4 ++--
 uc_fifo.c   |   14 +++++++-------
 uc_fifo.h   |   10 +++++-----
 uc_hwset.c  |   16 ++++++++--------
 uc_state.c  |    2 +-
 unichrome.h |    2 +-
 6 files changed, 24 insertions(+), 24 deletions(-)



commit cb3c02bfdc9eb0610813d8d20cff716da745f120
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 16:57:24 2003 +0000

    Removed function pointer from shared memory.


 uc_fifo.c |    6 +++---
 uc_fifo.h |   39 ++++++++++++++++++++++-----------------
 2 files changed, 25 insertions(+), 20 deletions(-)



commit 7f43a7d5d26d455b4f25762228970125b13372e3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 16:51:40 2003 +0000

    Increase surface reference counter in grabbing thread.


 idirectfbvideoprovider_v4l.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit db49c9782324ec733767b8b5b4ebfc368fffeef3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 13:55:06 2003 +0000

    Use +0.5f/-0.5f instead of +0.6f/-0.6f for vertical field alignment on the
    destination when DSBLIT_DEINTERLACE is used.


 uc_accel.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit bd86f4f44f704c0e5fef0ab473fc7d024fd9305d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 13:51:53 2003 +0000

    Added deinterlacing support for grabbing mode,
    i.e. added dfb_surface_set_field() calls to grabbing thread and added
    second frame callback to the loop (to make 50Hz out of the 25Hz of v4l).
    
    Made grabbing thread CTT_INPUT (with nice value -10 having the same
    priority as input threads).
    
    Made grab mode surface listener be aware of video memory surfaces.


 idirectfbvideoprovider_v4l.c |   23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)



commit 755acf026fcde72c5b675183b32ddf6772a6d8e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 3 13:04:52 2003 +0000

    Added option to disable WM97xx driver.


 configure.in |   15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)



commit e51ffea956af5a95c3499d6fede86344b04ab85c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 08:44:03 2003 +0000

    Fix screen location.


 layer_context.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c868a1c9b499f11d08dacacb652a2ce2ecccbada
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 06:18:18 2003 +0000

    Beautifications.


 uc_accel.h |  105 +++++++++++++++-------
 uc_hwset.c |  291 ++++++++++++++++++++++++++++---------------------------------
 uc_state.c |    5 -
 3 files changed, 214 insertions(+), 187 deletions(-)



commit 73f43162c74557d5f3279874a2f45c383edd939e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 05:36:04 2003 +0000

    Optimizations and cleanups.


 uc_hw.h     |  103 +++++---
 uc_hwmap.c  |  716 +++++++++++++++++++++++++++---------------------------------
 uc_hwset.c  |  161 +++++++------
 uc_state.c  |   95 ++++---
 unichrome.h |   41 +--
 5 files changed, 566 insertions(+), 550 deletions(-)



commit aa48f0af5db23d12971ce8dca0f3ae9c0d11d3d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 04:28:44 2003 +0000

    Remember clipping region and only update hardware if the clip changed.


 uc_hwset.c  |    5 +++++
 unichrome.h |    1 +
 2 files changed, 6 insertions(+)



commit c925940e3a36b3303a6e8ec22eb2814e03ca81cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 04:16:36 2003 +0000

    Added state (in)validation for color2d and colorkey2d,
    invalidating each other during validation.


 uc_hw.h     |   49 +++++++++++++++++------------------
 uc_hwmap.c  |   25 ------------------
 uc_hwset.c  |   83 ++++++++++++++++++++++++++++++++++++++++++++++--------------
 uc_state.c  |   53 ++++++++++++++++++--------------------
 unichrome.h |    4 ++
 5 files changed, 118 insertions(+), 96 deletions(-)



commit db6f08e9ad704a6fb935d87cf343954c70843a27
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 03:39:43 2003 +0000

    Use one set of flags instead of several booleans for state validation.


 uc_hwset.c  |   17 +--
 uc_state.c  |  335 +++++++++++++++++++++++++++++-------------------------------
 unichrome.h |  128 ++++++++++++----------
 3 files changed, 240 insertions(+), 240 deletions(-)



commit 839a36e01a6b7d1a7436429d392dfdbe0bff8d00
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 03:25:55 2003 +0000

    Use one uc_fifo struct for all processes.


 uc_accel.c  |    5 
 uc_fifo.c   |   29 +-
 uc_fifo.h   |   18 -
 uc_hw.h     |   44 +++-
 uc_hwset.c  |  470 +++++++++++++++++++++++++-----------------------
 uc_state.c  |   20 +-
 unichrome.c |  587 +++++++++++++++++++++++++++++-------------------------------
 unichrome.h |    7 
 8 files changed, 601 insertions(+), 579 deletions(-)



commit 949f717f6271bae8e856e2c84ea5496503c23481
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 02:55:49 2003 +0000

    Minimize state changes during text drawing.


 gfxcard.c |   41 +++++++++++++++++++++++++++++------------
 1 file changed, 29 insertions(+), 12 deletions(-)



commit 1b4d59d640150b606058c61b9f83cb6c2ef72cf8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 2 01:26:01 2003 +0000

    Define FBIO_WAITFORVSYNC ourself if it's not defined by <linux/fb.h>.


 fbdev.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 17569cbb0eb1ccbf593445a154fd247fea26872f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 1 18:41:29 2003 +0000

    Readded W.


 uc_accel.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 346fe69aba1e2b86fc1587671039f33e8b85c7bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 28 16:59:13 2003 +0000

    Implemented DSBLIT_DEINTERLACE.


 uc_accel.c  |   38 +++++++++++++++++++++++++++-----------
 uc_accel.h  |    5 +++--
 uc_hwset.c  |   57 +++++++++++++++++++++++++++++++++++++++------------------
 uc_state.c  |    9 ++++++---
 unichrome.h |    1 +
 5 files changed, 76 insertions(+), 34 deletions(-)



commit aa1d26ed9b8825c344973560a93073800e031600
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 28 06:06:14 2003 +0000

    Disabled dithering again...
    
    ... because: I fixed the triangle (rectangle) color bug! ;-]  *jump* *jump*
    
    Use HC_HShading_FlatC instead of HC_HShading_FlatA, so the hardware takes the
    color value from vertex C which is the only vertex being written twice, i.e.
    once for each triangle. It seems that the hardware (which got the color via
    vertex A only once for both triangles) kept an RGB16 version of the color
    and used that for the second triangle...
    
    To clarify this in the code even more, vertex A and vertex B have a '0' instead
    of 'ucdev->color3d' written to the FIFO.
    
    I also changed uc_fill_rectangle_3d() to use the "HC_HVCycle_AA, HC_HVCycle_BB,
    HC_HVCycle_NewC" sequence to use HC_HShading_FlatC instead of HC_HShading_FlatA.
    
    
    Heavy DMA problems with v4l overlay capture some to be gone! ;-]  *jump* *jump*
    
    Still some minor glitches are noticable under huge GPU load.
    But these appear just for one frame. There are no dead regions
    (bunch of lines which can't be written to for several seconds) anymore.
    
    The fix seemed to be setting 'ucdev->must_wait = 1' after flushing the FIFO
    in uc_emit_commands(), it was never set to 1 at all before.
    
    
    Fixed the broken fonts problem! ;-]  *jump* *jump*
    
    Added uc_flush_texture_cache() which simply writes four entries to the FIFO.
    These entries were written in uc_set_source3d() before my changes...
    
    Use correct state invalidation now,
    e.g. no longer set 'v_source3d = 0' if the source wasn't changed ;)
    
    
    Removed UC_FIFO_FLUSH(fifo) from uc_set_state() again :-}
    
    Use UC_FIFO_PAD_EVEN(fifo) at all places where 'cmdA_End' was replicated before,
    doesn't give any performance improvement though...
    
    Changed the FIFO depth from 2000 to 4096 entries to finish a complete string
    without intermediate flushing, even if the string has more than ~70 characters.
    
    Added timeout error message to uc_waitcmd() and uc_engine_sync().
    
    Fixed passing of the destination format to uc_map_blending_fn().


 uc_accel.c  |   58 ++++++++++++++++++++++++++++++++++++++++++----------------
 uc_accel.h  |    1 +
 uc_hwmap.c  |   14 +++++++-------
 uc_hwset.c  |   16 +++++-----------
 uc_state.c  |   38 +++++++++++++++-----------------------
 unichrome.c |   19 +++++++++++--------
 unichrome.h |    3 +--
 7 files changed, 82 insertions(+), 67 deletions(-)



commit eba7584a163c14ebdd85a459c007a8986d919a06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 28 01:14:39 2003 +0000

    Fixed removing an active context while the session is suspended.


 layer_control.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit f1a8923dc6a4499e0bb24814e3e251753850043b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 28 01:12:48 2003 +0000

    If a dlopen()'ed module did not register itself, try to dlsym() and call
    the default contructor (filename without "lib_" and ".so").


 modules.c |   61 +++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 43 insertions(+), 18 deletions(-)



commit 02c5dbd24431dc9489c72155089affe65b61c009
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 27 11:12:07 2003 +0000

    Readded the FIFO flush and HC_SubA_HPixGC setting,
    text rendering was suddenly broken, though I tested it before the commit.


 uc_state.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit d1c8456af0f340ee57c21c8b166bf8ca115789f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 27 10:55:38 2003 +0000

    Added some comments to guess meanings of HC_Hen*_MASK.
    
    Andreas Robinson, please check those, thanks.


 regs3d.h |  104 +++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 52 insertions(+), 52 deletions(-)



commit a43e0ac46ecd2c57113607996bc77d487a19d0f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 27 10:48:31 2003 +0000

    Use HC_HenDT_MASK to enable dithering, triangle color bug almost invisible now.
    
    Added UC_FIFO_ADD_XYCST, don't send W coords, saving four FIFO entries per blit.
    
    Invalidate texenv also if source changed (texenv depends on the source format).
    
    Don't set HC_SubA_HPixGC. DRI does it, but we don't seem to need that.
    
    Don't flush the FIFO in uc_set_state(), it's flushed shortly after anyways.


 uc_accel.c |   24 ++++++++++++------------
 uc_fifo.h  |    9 +++++++++
 uc_hwset.c |   12 ++++++------
 uc_state.c |   21 ++++++++++-----------
 4 files changed, 37 insertions(+), 29 deletions(-)



commit 4f7523ba01efee8a4897eeee731ad51270fd0927
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 27 06:50:51 2003 +0000

    Call iopl(3) in each waitretrace(), not just once.


 fbdev.c |   10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)



commit 7324e6ab0fe13dac35fc9d83baf91553525e2a0d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 27 01:04:45 2003 +0000

    Use fbdev to map registers, obsoletes cle266vgaio!
    
    Code still works with cle266vgaio for vesafb users...
    
    Made all register pointers volatile.


 uc_fifo.c      |    2 +-
 uc_fifo.h      |   10 +++++-----
 uc_overlay.c   |   12 ++++++------
 uc_overlay.h   |   14 +++++++-------
 uc_ovl_hwset.c |   10 +++++-----
 unichrome.c    |   54 +++++++++++++++++++++++++++++++++++++-----------------
 unichrome.h    |    4 ++--
 7 files changed, 63 insertions(+), 43 deletions(-)



commit 32d8bf490131f1c9e3a99627b34d62bd75fc8190
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 26 13:14:28 2003 +0000

    Forgot to add CLRCF_DEST to CLRCF_ALL.


 layers.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6b60c3be92cd724a2026aaadff8128b4748d3996
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Nov 26 13:12:25 2003 +0000

    fix some layer specific stuff


 uc_overlay.c   |   23 +++++++++++++++--------
 uc_overlay.h   |    1 +
 uc_ovl_hwset.c |   51 ++++++++++++++++++++++++++++-----------------------
 3 files changed, 44 insertions(+), 31 deletions(-)



commit 8f50421259290c0514a6863a60282815522a0451
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 26 13:07:39 2003 +0000

    Forgot to add that.


 gensyms.sh |    7 +++++++
 1 file changed, 7 insertions(+)



commit dcac37122f80c8184c474959bbb6d41b956c011f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 23:09:18 2003 +0000

    Option "force-desktop" supports stretching now, e.g. using "mode=".


 idirectfb.c |   15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)



commit ef2ac0adeb2f0f57d2491696a4d22f1d933663ea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 22:53:42 2003 +0000

    Install symbol map for dynamic library if --enable-trace is used.
    
    Shows static symbols in stack traces now.


 configure.in         |    1 
 src/Makefile.am      |   11 +++
 src/misc/Makefile.am |    4 +
 src/misc/debug.c     |  141 +++++++++++++++++++++++++++++++++++++++++++++++++--
 4 files changed, 154 insertions(+), 3 deletions(-)



commit 3ae7aec7743c85d927ce5f529c89e9fecbc471bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 21:55:02 2003 +0000

    Allow --enable-static and --enable-trace at the same time.


 debug.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 85f6db10a0019c6c0d6c72e4fb9770692be08bd1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 17:03:27 2003 +0000

    Fixed VT switching.


 layer_context.h   |    4 ----
 layer_control.c   |   53 ++++++++++++++++++++++++++++++++++++++++++++---------
 layers_internal.h |    7 +++++++
 3 files changed, 51 insertions(+), 13 deletions(-)



commit c9361b0aa96b76e4176ddbbc4a2a2a5481264b72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 16:12:22 2003 +0000

    Set hardware palette in region surface listener only if the region is realized.


 layer_region.c |   26 +++++++++++++++++---------
 1 file changed, 17 insertions(+), 9 deletions(-)



commit 7df2baa067ae385521970b74b20c26bea6bcda31
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 15:35:16 2003 +0000

    Fix width and height of primary surface as set by SetVideoMode().


 idirectfb.c |    9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)



commit 1da80e7698efa86752f83d82ba8a5a1cb0674a35
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 15:28:22 2003 +0000

    Use negative ABI versions for debug enabled builds.


 core.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 8a0e5f631660c401148c9527a275384b9d227c73
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 13:11:01 2003 +0000

    Added DFBLocation which is like DFBRectangle but has normalized coordinates.
    
    Added macros to compare rectangles, regions and locations.
    
    Added preliminary dfb_screen_rectangle() which behaves like the removed
    dfb_primary_layer_rectangle(). The final version of this function will
    be done upon introduction of screens.


 include/directfb.h                  |   39 ++++++++++++++++++
 src/core/layer_context.c            |   78 +++++++++++++++---------------------
 src/core/layer_context.h            |    3 -
 src/core/layers.c                   |   20 +++++++++
 src/core/layers.h                   |    3 -
 src/core/layers_internal.h          |    6 --
 src/core/windowstack.c              |    2 
 src/display/idirectfbdisplaylayer.c |    5 +-
 src/gfx/util.h                      |    6 --
 9 files changed, 101 insertions(+), 61 deletions(-)



commit a16b9e42fe5c87803e808185c17032aa6d0226f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 12:19:25 2003 +0000

    Be aware of layers without DLCAPS_SURFACE.


 layer_context.c |   31 +++++++++++++++++++------------
 1 file changed, 19 insertions(+), 12 deletions(-)



commit f1af06ff3b0ebb8b2619bc5310087c3fa53b4aba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 25 12:11:10 2003 +0000

    Fixed usage of layers without configuring them.


 layer_context.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 599988f97b57535d7c482c9049fb7c3496e8eb2e
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Tue Nov 25 10:57:30 2003 +0000

    added two more header files to make "make dist" happy again


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 7249619191a1aba73a6f49a5ac86b58829385cfc
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Tue Nov 25 10:53:48 2003 +0000

    - divided driver into multiple source files.
    - removed stretchblit (not supported by hardware).
    - added some more compatibility definitions, so a driver built with and old
      sisfb.h can use the features of new sisfb versions.
    - cleaned up sisfb version check.
    - set state->accel = 0 for DFXL_FILLTRIANGLE. makes it a lot faster, but
      I don't know why, because this function is not supported anyway.
    - added "xabre" to supported fb accel ids (SiS 330).


 Makefile.am     |    6 
 sis315.c        |  432 ++++++++------------------------------------------------
 sis315.h        |   51 ++++++
 sis315_accel.c  |  120 +++++++++++++++
 sis315_accel.h  |   30 +++
 sis315_compat.h |   28 +++
 sis315_state.c  |  173 ++++++++++++++++++++++
 sis315_state.h  |   33 ++++
 8 files changed, 504 insertions(+), 369 deletions(-)



commit f3158e5df082608dc847163128dfeeb1c2b745d6
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Nov 24 18:52:01 2003 +0000

    don't generate trailing whitespace


 directfb-csource.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6c3eb929b030bd26883f12cb2305cc434eb89601
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 24 18:24:27 2003 +0000

    forgot to port uc_ovl_disable


 uc_overlay.c |   17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)



commit 42abc000fa7a84e82fa84ff3a6ff8eaf259ebc21
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 24 17:55:41 2003 +0000

    Added boolean to dfb_layer_get_primary_context() to activate the context
    if no other context is already active.


 src/core/input.c                    |    3 ++-
 src/core/layer_control.c            |   12 ++++++++++++
 src/core/layer_control.h            |    1 +
 src/directfb.c                      |    2 +-
 src/display/idirectfbdisplaylayer.c |    4 ++--
 src/idirectfb.c                     |   11 +----------
 tools/dfbdump.c                     |    2 +-
 7 files changed, 20 insertions(+), 15 deletions(-)



commit 723ffe33fedaefab2cad17a5afbbcf2ac0a9ddc8
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 24 17:15:14 2003 +0000

    build cle266 driver by default


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit aadfe5ac8a0580f4ea83e3ba0bee58c9e0c8347c
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 24 17:09:33 2003 +0000

    ported to new internal layer/region api


 uc_overlay.c   |  182 +++++++++++++++++++--------------------------------------
 uc_ovl_hwset.c |    9 ++
 unichrome.h    |    2 
 3 files changed, 71 insertions(+), 122 deletions(-)



commit 9848bb5f939bba6be889b4ee501881b8019af3ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 24 16:49:35 2003 +0000

    Fixed shared window palettes.


 layer_context.c |   17 ++++++++++++++---
 windows.c       |   22 +++++-----------------
 windows.h       |    1 +
 windowstack.c   |    2 +-
 4 files changed, 21 insertions(+), 21 deletions(-)



commit 6db29052d2c0db950ff12395382ed9b4aac0728d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 24 13:08:30 2003 +0000

    Refactored display layer core. Added contexts and regions allocated
    within a context. Drivers are only aware of regions now. Usually a driver
    supports one region per layer. Hardware windows are implemented via regions.
    
    Not yet compiling drivers are disabled in configure.in
    (default of --with-gfxdrivers contains ported drivers only).
    
    Sorry for the driver API driver change, but it's much cleaner now.
    
    Added DFB_COLOR_BITS_PER_PIXEL and DFB_ALPHA_BITS_PER_PIXEL,
    pixel format constants changed, too.
    
    Some other changes and improvements.


 configure.in                                                     |    2 
 gfxdrivers/ati128/ati128_overlay.c                               |  215 -
 gfxdrivers/cyber5k/cyber5k.c                                     |  114 
 gfxdrivers/matrox/matrox_bes.c                                   |  299 -
 gfxdrivers/matrox/matrox_crtc2.c                                 |  287 -
 gfxdrivers/matrox/matrox_maven.c                                 |    4 
 gfxdrivers/matrox/matrox_maven.h                                 |    2 
 gfxdrivers/matrox/matrox_spic.c                                  |  203 -
 include/directfb.h                                               |  189 
 interfaces/IDirectFBFont/idirectfbfont_default.c                 |    2 
 interfaces/IDirectFBFont/idirectfbfont_ft2.c                     |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |   28 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |   30 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |   42 
 interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.h               |   20 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c   |    2 
 src/core/.cvsignore                                              |    2 
 src/core/Makefile.am                                             |   11 
 src/core/core.c                                                  |   50 
 src/core/core.h                                                  |    9 
 src/core/coredefs.h                                              |    3 
 src/core/coretypes.h                                             |   43 
 src/core/fbdev/.cvsignore                                        |    2 
 src/core/fbdev/fbdev.c                                           |  761 +--
 src/core/fusion/fusion.c                                         |   42 
 src/core/fusion/fusion.h                                         |    5 
 src/core/fusion/fusion_internal.h                                |    2 
 src/core/fusion/fusion_types.h                                   |   49 
 src/core/fusion/object.c                                         |   56 
 src/core/fusion/object.h                                         |    1 
 src/core/fusion/shmalloc/shmalloc.c                              |   30 
 src/core/fusion/vector.c                                         |   81 
 src/core/fusion/vector.h                                         |   94 
 src/core/gfxcard.h                                               |    2 
 src/core/input.c                                                 |   78 
 src/core/input.h                                                 |    4 
 src/core/layer_context.c                                         | 1168 +++++
 src/core/layer_context.h                                         |  131 
 src/core/layer_control.c                                         |  492 ++
 src/core/layer_control.h                                         |   69 
 src/core/layer_region.c                                          |  692 +++
 src/core/layer_region.h                                          |   57 
 src/core/layers.c                                                | 2009 ----------
 src/core/layers.h                                                |  519 +-
 src/core/layers_internal.h                                       |  125 
 src/core/sdl/.cvsignore                                          |    2 
 src/core/sdl/primary.c                                           |  474 --
 src/core/sdl/sdl.h                                               |    8 
 src/core/sdl/sdlinput.c                                          |   96 
 src/core/sig.c                                                   |  196 
 src/core/surfaces.c                                              |    3 
 src/core/surfaces.h                                              |    2 
 src/core/system.h                                                |    2 
 src/core/thread.c                                                |   18 
 src/core/window_display.c                                        |  284 -
 src/core/windows.c                                               | 1052 -----
 src/core/windows.h                                               |  212 -
 src/core/windows_internal.h                                      |  169 
 src/core/windowstack.c                                           | 1574 +++++++
 src/core/windowstack.h                                           |  126 
 src/directfb.c                                                   |   53 
 src/display/idirectfbdisplaylayer.c                              |  197 
 src/display/idirectfbsurface.c                                   |   66 
 src/display/idirectfbsurface_layer.c                             |   72 
 src/display/idirectfbsurface_layer.h                             |    2 
 src/display/idirectfbsurface_window.c                            |   21 
 src/gfx/util.c                                                   |   34 
 src/gfx/util.h                                                   |    4 
 src/idirectfb.c                                                  |  160 
 src/input/idirectfbinputbuffer.c                                 |   14 
 src/misc/debug.c                                                 |   15 
 src/misc/util.h                                                  |   30 
 src/windows/idirectfbwindow.c                                    |   17 
 tools/dfbdump.c                                                  |   24 
 75 files changed, 7371 insertions(+), 5594 deletions(-)



commit 814009fb7faa6377862d7dc2074467e18c887ecb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 21 15:07:36 2003 +0000

    If CheckState() reports other functions than the requested one as supported,
    don't ask for them again.


 gfxcard.c |    3 +++
 1 file changed, 3 insertions(+)



commit 50c4767be94b54cac58ac65c3264001235ef77d4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 21 14:58:54 2003 +0000

    Reject format conversion blits which are unsupported.
    
    Minor state handling fix.


 radeon.c       |    4 ++--
 radeon_state.c |   12 +++++++-----
 2 files changed, 9 insertions(+), 7 deletions(-)



commit aa44468092464b0b5f5229f65385a84bea6fd486
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 21 14:00:43 2003 +0000

    Parse preceding comments in enums.


 gendoc.pl |   71 ++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 58 insertions(+), 13 deletions(-)



commit 01724602af1373b1fa7bf4f788480464259c6672
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 14:30:59 2003 +0000

    fixed make dist


 Makefile.am |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 2f49ac11e807fb5b13f31d9a3cff3cc498d5e4ef
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 14:28:02 2003 +0000

    removed non existant sisfb patch


 Makefile.am |    1 -
 1 file changed, 1 deletion(-)



commit f45dda572a20b62f86a8b48625021e2f60abaa69
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 13:09:29 2003 +0000

    compatibility definitions


 sis315.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit 53980785f92e97b4059cd43910ff7561a62181a9
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 10:39:46 2003 +0000

    removed obsolete patch. please use sisfb 1.6.23 or above.


 null |binary
 1 file changed



commit c7e50e5a6d66bc187e307465c4a6763867c65c0d
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 10:38:37 2003 +0000

    - use 32 bit access only
    - configure sisfb so that it does not always maximize vyres
      (requires version 1.6.23 of sisfb)
    - added destination color keying


 sis315.c      |  144 ++++++++++++++++++++++++++++++++++++----------------------
 sis315_mmio.c |   20 --------
 sis315_mmio.h |    5 --
 3 files changed, 90 insertions(+), 79 deletions(-)



commit 498f8d98a90661106fc8a9ce1f99bc81efb1c029
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 20 10:33:18 2003 +0000

    require <linux/sisfb.h> for sis315 gfxdriver


 configure.in |   11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)



commit 5d7ed91179ac2cd73003c1ff9c8e066aef30afb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 18 22:45:18 2003 +0000

    Removed AC_C_CONST which defined "const" to nothing if -Werror was used, argh!


 configure.in |    1 -
 1 file changed, 1 deletion(-)



commit 6129fcb53475bffd6c9899f59ada0ce9fbbaa20d
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 17 20:32:44 2003 +0000

    added hack for forcing grab mode if environment variable DFB_VL4_GRAB is set. (this is for broken hardware with broken busmastering)


 idirectfbvideoprovider_v4l.c |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit 9440abb22bd202bbd14796cf52f22a20c6a80c39
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Nov 17 11:02:54 2003 +0000

    Use the recommened way to include freetype headers.


 idirectfbfont_ft2.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit feeb770ee07dbad6ac4f7dc8e167c828a4a42ffc
Author: Andreas Robinson <andors@directfb.org>
Date:   Thu Nov 13 13:43:37 2003 +0000

    Added video underlay mode. Updated Readme.txt


 Readme.txt   |   64 ++++++++++++++++++++++++++++++++++++++++++-----------------
 uc_overlay.c |   39 +++++++++++++++++++++++++++++++++++
 uc_overlay.h |    3 ++
 3 files changed, 88 insertions(+), 18 deletions(-)



commit 3f46eb7e83ffc266455d74d990bb4d51efc6664d
Author: Andreas Robinson <andors@directfb.org>
Date:   Thu Nov 13 12:41:51 2003 +0000

    Print error message on startup if cle266vgaio module can not be accessed.


 unichrome.c |   14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)



commit 5970a1600f540b42b1e815fc6f851ebae4250634
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 10 16:53:06 2003 +0000

    - remove libmpeg3 video provider, it has been moved to DirectFB-extra
      and includes FusionSound support.


 b/configure.in                                                      |   27 
 b/interfaces/IDirectFBVideoProvider/Makefile.am                     |   17 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c | 1175 ----------
 3 files changed, 1 insertion(+), 1218 deletions(-)



commit f597aeb3bc878451e078630becc933ab45c0f091
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Fri Nov 7 05:00:31 2003 +0000

    include sisfb patch in extra dist


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit f033956fd415a4db7db6802a6c64fa62ba84f39b
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Fri Nov 7 04:11:30 2003 +0000

    sisfb does always set vyres to the maximum. this patch allows to set custom
    vyres resolutions and therefore makes directfb's accelerated blit working.


 sisfb-181003-1.patch.bz2 |binary
 1 file changed



commit b3237924252b09b18ee64f0fc9c526593f888656
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Fri Nov 7 04:04:27 2003 +0000

    - added drawing of rectangles
    - added source colorkeyed blits
    - fixed clipping
    - refuse blit with color format conversion


 sis315.c      |  123 ++++++++++++++++++++++++++++++++++++++++++++++++----------
 sis315_regs.h |   68 +++++++++++++++++++-------------
 2 files changed, 144 insertions(+), 47 deletions(-)



commit 0adff149f2aeeacb1fc92e9a4b4a23ff61ebc675
Author: Andreas Oberritter <oberritter@directfb.org>
Date:   Thu Nov 6 18:50:11 2003 +0000

    new driver for SiS315 chipset with line drawing, rectangle filling in 8, 16 and 32 bpp, blit in 8 and 16 bpp, clipping


 configure.in                    |   24 +
 gfxdrivers/Makefile.am          |    7 
 gfxdrivers/sis315/.cvsignore    |    6 
 gfxdrivers/sis315/Makefile.am   |   18 +
 gfxdrivers/sis315/sis315.c      |  482 ++++++++++++++++++++++++++++++++++++++++
 gfxdrivers/sis315/sis315_mmio.c |   33 ++
 gfxdrivers/sis315/sis315_mmio.h |   14 +
 gfxdrivers/sis315/sis315_regs.h |  132 ++++++++++
 8 files changed, 715 insertions(+), 1 deletion(-)



commit b52450602059f7b65b48d9764d61f30220e6c5b1
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Nov 6 15:56:53 2003 +0000

    Removed the notice about multi-image powers.
    Not needed any longer now that the version number has been increased.


 directfb-csource.c |    1 -
 1 file changed, 1 deletion(-)



commit 3bf11e77561e2db1461aeb25a1ea87fa674e76ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 5 23:55:28 2003 +0000

    Don't pause() after kill().


 debug.c |    2 --
 1 file changed, 2 deletions(-)



commit 881c6c1a4eb4786e80ec9eb53fc7f20ee4ac3acf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 5 16:24:58 2003 +0000

    No need to SetOpacity() before RequestFocus() for input only windows.


 idirectfbwindow.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 014d792936f01f05bef661396ac6b3fcc8d86d5c
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Nov 5 13:39:17 2003 +0000

    Define UC_ENABLE_3D. (I forgot to restore it after testing.)


 unichrome.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 55b5b7c345a65009eea74c319b72386d28318724
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Nov 5 13:36:23 2003 +0000

    The driver can now be made to avoid the 3D engine by undefining UC_ENABLE_3D in unichrome.h


 uc_accel.h  |    3 +--
 uc_hwset.c  |    8 ++++++++
 uc_state.c  |    2 ++
 unichrome.h |    4 ++++
 4 files changed, 15 insertions(+), 2 deletions(-)



commit aafe251418f54f1ad6cd141756c4468c4350af61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 4 22:01:05 2003 +0000

    usleep(20000) -> usleep(10000), much smoother input


 sdlinput.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 145ac49c488752486bf8e712f8342e3485375287
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 4 21:55:13 2003 +0000

    Restore file content.


 idirectfbfont_ft2.c |  580 +++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 575 insertions(+), 5 deletions(-)



commit bdac023a0ba082c77195ab723170c7d7f0160e3d
Author: Andreas Robinson <andors@directfb.org>
Date:   Tue Nov 4 08:43:57 2003 +0000

    Added devfs-free compilation options. Minor cleanups.


 cle266vgaio.c  |   86 +++++++++++++++++++++++++++++++++------------------------
 cle266vgaio.mk |   31 +++++++++++++++++---
 2 files changed, 78 insertions(+), 39 deletions(-)



commit a760fb19ecb6bce5e3077b946cd24706fbfacab0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 1 03:14:44 2003 +0000

    Major code cleanup.
    Introduce new structure "CoreDFB".
    Nearly rewrote src/core/core.[ch] in the way of FusionSound's core.


 gfxdrivers/nvidia/nvidia_overlay.c                             |   10 
 interfaces/IDirectFBFont/idirectfbfont_default.c               |   11 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   34 
 src/core/clipboard.c                                           |   24 
 src/core/colorhash.c                                           |   44 
 src/core/core.c                                                |  694 ++++++----
 src/core/core.h                                                |   78 -
 src/core/core_parts.c                                          |   60 
 src/core/core_parts.h                                          |   59 
 src/core/core_system.h                                         |   14 
 src/core/coretypes.h                                           |    3 
 src/core/fbdev/fbdev.c                                         |   24 
 src/core/fbdev/fbdev.h                                         |    8 
 src/core/fbdev/vt.c                                            |   28 
 src/core/fonts.c                                               |   19 
 src/core/fonts.h                                               |    8 
 src/core/gfxcard.c                                             |  135 -
 src/core/gfxcard.h                                             |   14 
 src/core/input.c                                               |  280 ++--
 src/core/layer_region.c                                        |   15 
 src/core/layers.c                                              |   30 
 src/core/layers_internal.h                                     |    4 
 src/core/palette.c                                             |   17 
 src/core/palette.h                                             |    7 
 src/core/sdl/primary.c                                         |   11 
 src/core/sdl/sdl.c                                             |   38 
 src/core/sig.c                                                 |   74 -
 src/core/sig.h                                                 |    7 
 src/core/surfaces.c                                            |   26 
 src/core/surfaces.h                                            |   12 
 src/core/system.c                                              |   38 
 src/core/system.h                                              |   18 
 src/core/windows.c                                             |   42 
 src/core/windows.h                                             |    6 
 src/directfb.c                                                 |   19 
 src/display/idirectfbpalette.c                                 |   29 
 src/idirectfb.c                                                |   31 
 src/idirectfb.h                                                |    6 
 tools/dfbdump.c                                                |    5 
 39 files changed, 1133 insertions(+), 849 deletions(-)



commit 0a9066211cb54c04fa9b1cfaa2edee8fc6e834fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 29 18:32:54 2003 +0000

    Added option "force-desktop" ;)


 docs/directfbrc.5.in |    4 +
 src/idirectfb.c      |  120 ++++++++++++++++++++++++++++++++-------------------
 src/misc/conf.c      |    5 ++
 src/misc/conf.h      |    5 +-
 4 files changed, 90 insertions(+), 44 deletions(-)



commit 4891a5b88caa183fb6d1624ded58e9373313d7c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 29 16:59:43 2003 +0000

    0.9.21


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 10a6b8872855da5f52b38d001463a189877a7c8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 29 16:59:02 2003 +0000

    All <object>_unlink() functions take a pointer to the object pointer now
    and write a NULL into this location themself.
    
    Fixed warnings.


 gfxdrivers/cle266/uc_fifo.c   |    9 ++++----
 gfxdrivers/cle266/unichrome.c |   11 +++++-----
 inputdrivers/lirc/lirc.c      |    7 +++---
 src/core/fusion/object.h      |    8 +++++--
 src/core/layer_region.c       |   44 +++++++++++++++++++++---------------------
 src/core/layers.c             |   14 +++++--------
 src/core/surfaces.c           |    6 +----
 src/core/windows.c            |    8 ++-----
 src/misc/conf.c               |   30 ++++++++++++++--------------
 src/misc/memcpy.c             |   17 ++++++++--------
 10 files changed, 78 insertions(+), 76 deletions(-)



commit 2bf0b10263ce2383004b3723f606f498ab852093
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Oct 29 13:37:10 2003 +0000

    Benchmarks updated. Minor cleanups.


 unichrome.c |   75 +++++++++++++++++++++++++++---------------------------------
 1 file changed, 34 insertions(+), 41 deletions(-)



commit c937d39055eef2807ea29b6cfaa8d7f7de1abe68
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Oct 29 12:44:42 2003 +0000

    Performs userspace PCI-bus probing and memory mapping.
    Depends on /proc/bus/pci/devices and /dev/mem.


 uc_probe.c |  209 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 uc_probe.h |   34 +++++++++
 2 files changed, 243 insertions(+)



commit 8b7ba2909e0aa7aaeeea65d06da3720f7a6a5a09
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 29 01:48:44 2003 +0000

    Removed an assertion.


 layers.c |    1 -
 1 file changed, 1 deletion(-)



commit 92e9ccc7fe03ef33390301ce574720fed6b3c830
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 29 00:03:07 2003 +0000

    DisplayLayer is now called CoreLayer.
    
    Indention fixes.


 gfxdrivers/ati128/ati128_overlay.c     |   94 +++++------
 gfxdrivers/cle266/uc_overlay.c         |   82 +++++----
 gfxdrivers/cyber5k/cyber5k.c           |  100 +++++------
 gfxdrivers/cyber5k/cyber5k_underlay.c  |   88 +++++-----
 gfxdrivers/i810/i810_overlay.c         |  144 ++++++++---------
 gfxdrivers/matrox/matrox_bes.c         |   72 ++++----
 gfxdrivers/matrox/matrox_crtc2.c       |   98 ++++++-----
 gfxdrivers/matrox/matrox_spic.c        |   47 ++---
 gfxdrivers/neomagic/neo_overlay.c      |  103 ++++++------
 gfxdrivers/nvidia/nvidia_overlay.c     |   99 ++++++-----
 gfxdrivers/radeon/radeon.c             |    8 
 gfxdrivers/savage/savage_streams_old.c |  152 +++++++++---------
 src/core/coretypes.h                   |    1 
 src/core/fbdev/fbdev.c                 |  224 +++++++++++++-------------
 src/core/layer_region.c                |    4 
 src/core/layers.c                      |  276 ++++++++++++++++-----------------
 src/core/layers.h                      |  187 +++++++++++-----------
 src/core/layers_internal.h             |   14 -
 src/core/sdl/primary.c                 |  256 +++++++++++++++---------------
 src/core/window_display.c              |   34 ++--
 src/core/windows.c                     |   56 +++---
 src/core/windows.h                     |   20 +-
 src/directfb.c                         |   16 -
 src/display/idirectfbdisplaylayer.c    |   44 ++---
 src/display/idirectfbdisplaylayer.h    |    4 
 src/display/idirectfbsurface_layer.c   |   14 -
 src/display/idirectfbsurface_layer.h   |    4 
 src/idirectfb.c                        |   74 ++++----
 src/windows/idirectfbwindow.c          |   32 +--
 tools/dfbdump.c                        |   26 +--
 30 files changed, 1208 insertions(+), 1165 deletions(-)



commit 723aa1dee06266439a6a8fc91cbeceda87d76b0e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 21:36:06 2003 +0000

    Set default screen location back to fullscreen.


 matrox_bes.c |   62 +++++++++++++++++++++++++++++------------------------------
 1 file changed, 31 insertions(+), 31 deletions(-)



commit e1e1d4ed744f1c4b2de202fa6abf59401930247e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 21:31:11 2003 +0000

    Increase the reference counter in dfb_layer_enable() if it's already enabled.


 layers.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit 8120a2db671e34b1958a34bb50f237be119099bc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 21:25:51 2003 +0000

    Introduced new object for allocation of hardware regions within layers.
    
    Work in progress, behaviour is still the same,
    but automatic deallocation of layers (disable) is already working.
    
    Test with: "dfblayer -l 1" (should show the overlay for a really short time)


 TODO                        |    3 
 src/core/Makefile.am        |    3 
 src/core/coretypes.h        |    7 
 src/core/fusion/Makefile.am |    6 
 src/core/fusion/vector.c    |  126 +++++++++
 src/core/fusion/vector.h    |   53 +++
 src/core/layer_region.c     |  200 ++++++++++++++
 src/core/layer_region.h     |   64 ++++
 src/core/layers.c           |  613 +++++++++++++++++++-------------------------
 src/core/layers.h           |   26 -
 src/core/layers_internal.h  |  115 ++++++++
 src/core/surfaces.c         |   75 ++---
 src/core/surfaces.h         |   12 
 13 files changed, 895 insertions(+), 408 deletions(-)



commit b3cfbc1659873a451da8bc5f726cc441eab3aab0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 20:48:02 2003 +0000

    Added global ABI version for shared memory.


 src/core/core.c                   |   32 ++++----
 src/core/fusion/fusion.c          |   58 +++++++++-----
 src/core/fusion/fusion.h          |    4 -
 src/core/fusion/fusion_internal.h |    4 -
 tools/fusion_bench.c              |  148 +++++++++++++++++++-------------------
 5 files changed, 133 insertions(+), 113 deletions(-)



commit 4c7d26d446d7b2d4c904e99b33be2167545da296
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 18:47:44 2003 +0000

    +#include <config.h>


 debug.h |    2 ++
 1 file changed, 2 insertions(+)



commit d249eec0c3964b3238b9ef82df9e830a869b3957
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 28 16:33:16 2003 +0000

    Added functions for DFB_ASSERT and DFB_ASSUME to save binary size in debug mode.


 core/coredefs.h |   47 +++++++++++++++++--------------------------
 misc/debug.c    |   60 +++++++++++++++++++++++++++++++++++++++++++++++++-------
 misc/debug.h    |   14 ++++++++++++-
 3 files changed, 85 insertions(+), 36 deletions(-)



commit 7cd990d09885d20ab91ee1460a68bd7da947abc6
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Oct 24 23:38:44 2003 +0000

    Mention the multi-image functionality in the usage string.


 directfb-csource.c |    1 +
 1 file changed, 1 insertion(+)



commit b40555f2ae6e5054fe0e87639f7cc8180aed727e
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Oct 24 18:49:53 2003 +0000

    Tweaked name mangling routines.


 directfb-csource.c |   35 ++++++++++++++++++++++++++---------
 1 file changed, 26 insertions(+), 9 deletions(-)



commit 04a520acde92e0dd8bd2735870575bc3954f27ec
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Oct 24 18:21:39 2003 +0000

    Do variable name translation for the case of multiple images as well.


 directfb-csource.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c3b15976a2c89f5a5c9a4cad4ce957941fe9e049
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Oct 24 16:16:35 2003 +0000

    Dump an array of names and rectangles when processing multiple images.
    Document the new feature.


 docs/directfb-csource.1.in |   22 ++-
 tools/directfb-csource.c   |  289 +++++++++++++++++++++++++++++----------------
 2 files changed, 204 insertions(+), 107 deletions(-)



commit 4860226fb2863977073bd3e77f6471bdf6284e11
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Oct 24 13:46:46 2003 +0000

    Started to add support for combining multiple images into one surface.
    Lacks a few minor features still but shouldn't change the existing
    behaviour.


 directfb-csource.c |  220 ++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 168 insertions(+), 52 deletions(-)



commit 1a6bb6c5ef0ab781a62800c659b675340cab29ea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 24 04:36:04 2003 +0000

    Added option "--fusionsound" for statically linking with fusion sound.


 directfb-config.in |    9 +++++++++
 1 file changed, 9 insertions(+)



commit a6695a466e1658b28bcf064462f9ea8452f8691a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 23 16:32:12 2003 +0000

    regenerated


 ChangeLog |   44 +++++++++++++++++++++++++++++---------------
 1 file changed, 29 insertions(+), 15 deletions(-)



commit 7d9e53cb891e934504d42b204ee81af5002d47ec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 23 16:30:55 2003 +0000

    readd with executable flag


 mkchlog |   77 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 77 insertions(+)



commit e99cf70d2187c19d967bb9459d812b976f319fdb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 23 16:30:32 2003 +0000

    temp. remove


 b/ChangeLog | 3881 ++++++++++++++++++++++++++++++------------------------------
 mkchlog     |   77 -
 2 files changed, 1944 insertions(+), 2014 deletions(-)



commit a0dc28df72b8257818c831dc7daf9990eef97548
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Oct 23 16:23:54 2003 +0000

    changed andros email address


 mkchlog |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 049616da2bd03dbcab874f79f804afe9c803ba8c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 23 16:01:07 2003 +0000

    Updated.


 ChangeLog |  981 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   17 +
 2 files changed, 997 insertions(+), 1 deletion(-)



commit aacf5d4520c6ef04be7f2ac72d300a00e081e35b
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Oct 23 14:12:00 2003 +0000

    minor code formatting changes


 directfb-csource.c |   20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)



commit 5f2dce31898b6945116c1edfdbbb3dfbdfbc9e5a
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Oct 22 09:01:14 2003 +0000

    added Andreas Robinson <andro134 at student.liu.se>


 mkchlog |    1 +
 1 file changed, 1 insertion(+)



commit b654880727c4709c95f4a9c581054ca73bdb49ac
Author: Andreas Robinson <andors@directfb.org>
Date:   Tue Oct 21 23:24:10 2003 +0000

    Updated changelog for v0.3.0


 changelog.txt |   24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)



commit 5f481a40e34079d6d74db83acaae30cbce529376
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 21 15:30:03 2003 +0000

    - version number = 0.3
    - imrovements to state handling
    - workaround for font rendering in some applications


 uc_hw.h     |    2 +-
 uc_hwset.c  |   10 +++++++++-
 uc_state.c  |   39 ++++++++++++++++++++-------------------
 unichrome.c |    2 +-
 unichrome.h |    1 +
 5 files changed, 32 insertions(+), 22 deletions(-)



commit b4e22eb8a01b8e6fc97a0d23330cae9ea8237cc9
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 21 13:56:31 2003 +0000

    another state handling fix.


 uc_hw.h     |    2 +-
 uc_hwset.c  |   15 +++++++++++++--
 uc_state.c  |   11 +++++------
 unichrome.h |    1 +
 4 files changed, 20 insertions(+), 9 deletions(-)



commit e4c656cb8df311fb6db09c9cc9c05345adbd5313
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 21 13:19:32 2003 +0000

    COMPILE WITH GCC 2.95!!!


 uc_ovl_hwset.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 924de35c6c6c19c29be5bbc822337cb9421e865a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 20 20:04:32 2003 +0000

    Compile with gcc 2.95.


 uc_accel.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 8497262cc2d34cae2b8d710e7ac5b17ebcacf1ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 20 13:39:30 2003 +0000

    Fixed warning.


 idirectfbwindow.c |    2 --
 1 file changed, 2 deletions(-)



commit 3fcbdf1fb7bdf5a19d26729b66f5fb47aa1ce320
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 20 13:39:14 2003 +0000

    Added missing ranlib call.


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit e02bf2c3cb58ba92d4bd15c059d693fdf3c0bf3a
Author: Andreas Robinson <andors@directfb.org>
Date:   Sun Oct 19 22:49:56 2003 +0000

    Added AfterSetVar() function. May help with VIA-drivers crash bug.


 unichrome.c |   62 ++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 36 insertions(+), 26 deletions(-)



commit 76b933ae5b41d7948986da541c3fd30babdecf3a
Author: Andreas Robinson <andors@directfb.org>
Date:   Sun Oct 19 22:44:20 2003 +0000

    Fixed some compiler warnings.


 uc_accel.c |    4 +++-
 uc_accel.h |    2 ++
 2 files changed, 5 insertions(+), 1 deletion(-)



commit 72d1f1682c9335ba3b2ff71e1bc03531e7279500
Author: Andreas Robinson <andors@directfb.org>
Date:   Sun Oct 19 22:39:31 2003 +0000

    Print debug msg before writing to hardware register.


 uc_fifo.c |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)



commit e7fd0fbdb44022543badc0303082057c4566acd3
Author: Andreas Robinson <andors@directfb.org>
Date:   Sat Oct 18 11:51:41 2003 +0000

    Made the driver use EmitCommands().


 uc_accel.c  |   23 +++++++++++++++--------
 unichrome.c |   59 ++++++++++++++++++++++++++++++++++++++---------------------
 2 files changed, 53 insertions(+), 29 deletions(-)



commit 45d6d92927dc92ac1fc8478a2b13ddd8868bc5ba
Author: Andreas Robinson <andors@directfb.org>
Date:   Sat Oct 18 11:50:01 2003 +0000

    Removed an unused variable.


 uc_ovl_hwset.c |    2 --
 1 file changed, 2 deletions(-)



commit 562c4f918dd6f6a47e89e4c9ec205754cb6cc54e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 17 16:12:18 2003 +0000

    Fixed warnings.


 surfaces.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 43d56afae8ddc8d84c495ce4273b7dea678a7928
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 17 16:09:25 2003 +0000

    Added graphics driver function EmitCommands().
    
    It's called when a state is released. Drivers can flush or emit any kind of
    command buffer. This is an advantage over flushing after each command,
    especially for dfb_gfxcard_draw_string() and dfb_gfxcard_fill_triangle() with
    semi acceleration.
    
    Made dfb_clip_blit_precheck() static inline.


 core/gfxcard.c |    4 ++++
 core/gfxcard.h |    4 ++++
 gfx/clip.c     |   14 --------------
 gfx/clip.h     |   15 +++++++++++++--
 4 files changed, 21 insertions(+), 16 deletions(-)



commit 2bd54e3f72512e52f59ccc2a63a235f248c7cdf0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 17 05:34:55 2003 +0000

    Updated, too.


 fusion-full-linux-2.4.21.patch.bz2      |binary
 fusion-full-linux-2.4.22.patch.bz2      |binary
 fusion-full-linux-2.6.0-test7.patch.bz2 |binary
 3 files changed



commit 239a4965630d9e02a294a62a3e52ea934d30f1f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 17 05:32:02 2003 +0000

    Added getpid() benchmark as a reference value for system calls.


 fusion_bench.c |   21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)



commit ba4d5f186b126a74b477cdefe0d913de2d4a7966
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 15 21:41:49 2003 +0000

    Added error checking to IDirectFBSurface_Window_Construct().


 idirectfbsurface_window.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit 8aeb95838c0572f30af4d285c54476aa0af6de18
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 15 21:07:19 2003 +0000

    - sync/sleep before each test
    - use simple version for mutex/skirmish with one thread
    - added recursive mutex benchmark
    - added reactor_attach/detach_global() benchmark


 fusion_bench.c |  141 ++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 85 insertions(+), 56 deletions(-)



commit 283a996ea772a288002d554a33696e4aba6cfe51
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 15 17:01:29 2003 +0000

    Use dfb_surface_data_offset() in dfb_surface_dump() to support DSCAPS_SEPARATED.


 surfaces.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit a86ea87a041bd6f5add62297dd7bb97025a58bfb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 15 16:41:17 2003 +0000

    Added dfb_surface_data_offset() which calculates the data pointer for a
    given coordinate (x/y) based on the pointer and pitch passed to it.
    
    It also handles DSCAPS_SEPARATED depending on the surface which is passed, too.


 surfaces.h |   26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)



commit 1c85042724e8b733e0f427584635a34d8d9a24e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 14 07:59:00 2003 +0000

    Updated.


 /dev/null                                         |binary
 b/patches/Makefile.am                             |    7 ++++---
 b/patches/README.fusion                           |    2 +-
 b/patches/fusion-full-linux-2.4.21.patch.bz2      |binary
 b/patches/fusion-full-linux-2.4.22.patch.bz2      |binary
 b/patches/fusion-full-linux-2.6.0-test7.patch.bz2 |binary
 6 files changed, 5 insertions(+), 4 deletions(-)



commit 019fc07ab06906f4a464649a55936a85e4a34c1e
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 13 17:15:50 2003 +0000

    fix state handling


 uc_hwset.c  |   10 ++++++++++
 uc_state.c  |   13 +++++++------
 unichrome.h |    4 ++++
 3 files changed, 21 insertions(+), 6 deletions(-)



commit c5e8b10aab4e3ab1a415b6227c781284964d2f82
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 13 04:08:16 2003 +0000

    Don't attach the font state to the destination to avoid increasing its
    reference count until the font is destroyed or used on another surface.
    
    Lock original state, too.


 fonts.c   |    1 -
 gfxcard.c |   21 ++++++++++++++++++---
 2 files changed, 18 insertions(+), 4 deletions(-)



commit 9ffde3df5ae0769d999dfb60ed32a4c6571be8dd
Author: Andreas Robinson <andors@directfb.org>
Date:   Sat Oct 11 11:22:11 2003 +0000

    Increased pixelpitch alignment from 16 to 32 to overcome a limitation in
    the video overlay hardware.


 uc_ovl_hwset.c |    2 ++
 unichrome.c    |    2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)



commit d3031d2ebafb6081d8432641084865a1d8f5af9d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 10 19:35:46 2003 +0000

    Higher video priority buffers always kick out lower priority buffers.


 surfacemanager.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 8433220f469d2fd61e1a98b144cbfb387d702dbb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 10 19:16:40 2003 +0000

    Indicate locked buffers.


 dfbdump.c |   32 +++++++++++++++++++++++++-------
 1 file changed, 25 insertions(+), 7 deletions(-)



commit e3fec9a655c7462d5583e6084230fff2a8a88ca9
Author: Andreas Robinson <andors@directfb.org>
Date:   Fri Oct 10 16:11:52 2003 +0000

    viafb problem workaround rollback - it worked once, but not twice. :-/


 cle266vgaio.c |    2 +-
 unichrome.c   |   10 +++++-----
 2 files changed, 6 insertions(+), 6 deletions(-)



commit 0e65489ee6b8c3a6357c846d7d208068ea7ca199
Author: Andreas Robinson <andors@directfb.org>
Date:   Fri Oct 10 15:26:52 2003 +0000

    Worked around the problem which hangs the computer hard if e.g viafb is installed.
    I don't know why VIA's own drivers don't need the same fix ...


 cle266vgaio.c |   15 ++++++---------
 mmio.h        |    4 ++++
 unichrome.c   |   13 ++++++++++++-
 unichrome.h   |    3 +++
 4 files changed, 25 insertions(+), 10 deletions(-)



commit af5c3cc162f5cf1607e2e06d20d616d1672ca0f4
Author: Andreas Robinson <andors@directfb.org>
Date:   Thu Oct 9 17:17:28 2003 +0000

    Made DSBLIT_COLORIZE and DSBLIT_BLEND_COLORALPHA work in df_neo and df_dok.


 uc_accel.c |   13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)



commit ec5ccd43f39e51a85d6b20741c10c0ba2c60420c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 14:00:22 2003 +0000

    Small fix.


 dfbdump.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 68dcd5ca801bcd184f59713467347a5e30ae601e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 13:57:17 2003 +0000

    Improved output.


 dfbdump.c |   34 ++++++++++++++++++++--------------
 1 file changed, 20 insertions(+), 14 deletions(-)



commit e21d5f94950f8238b27d6b42ca306a516aa51503
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 13:37:34 2003 +0000

    Show window id.


 dfbdump.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 5a83bc9115286373039442e86c4c56d818f6c8d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 12:59:39 2003 +0000

    Print "DESTROYED" if window is destroyed explicitly but object is still alive.
    
    Show reference ids for further investigation via /proc/fusion.
    
    Added table header to surface list.


 dfbdump.c |   29 +++++++++++++++++++++++------
 1 file changed, 23 insertions(+), 6 deletions(-)



commit 6f372207d30b0272eb66421b51b5251b8e7c8e74
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 12:57:37 2003 +0000

    Don't remove the window from the stack in dfb_window_destroy(),
    but in the window destructor (object finalizer) after remaining
    references went off.
    
    This way dfbdump can show (not fully) destroyed windows.


 windows.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit b0ec0e30491543f143e8c81dc3a608ad3e806a56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 02:13:16 2003 +0000

    Print "GHOST" for ghost windows.


 dfbdump.c |    3 +++
 1 file changed, 3 insertions(+)



commit 1267fc18565416505f0bb9378074c74d04ed2bc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 9 02:09:06 2003 +0000

    Silently mask out DWOP_ALPHACHANNEL instead of failing in SetOption()
    if it's not supported.


 idirectfbwindow.c |    8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)



commit c873b06ebfe9aeb1fb78638ab561caf11c04f4b4
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Oct 8 17:08:55 2003 +0000

    fix off by one bug for blended filled rectangles


 uc_accel.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 2a9513faf71efcdf9fce08c858bb50ae6bdb18bd
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Oct 8 16:50:43 2003 +0000

    - correct pixelpitch and byteoffset alignment for surfaces
    - fix off by one error for 3d clipping
    - reenable 3d blitting


 uc_hwset.c  |    4 ++--
 uc_state.c  |    4 ++--
 unichrome.c |    4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)



commit 3efd2530401af6d01ec8eb143e5106506e6fedb9
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Oct 8 16:13:44 2003 +0000

    fix off by one bug in uc_stretch_blit()


 uc_accel.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 862b5965b7b73ad526572eb06a4fff12fb11d835
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Oct 8 15:23:31 2003 +0000

    Partial fix for 3D-blitting size problem. Blitting arbitrary (non 2^n) sizes
    works much better now, but there is still a one-pixel-off error in df_window.


 uc_hwset.c |   22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)



commit 2af2bd3d65b835bf01eca618d63338461c855ac1
Author: Andreas Robinson <andors@directfb.org>
Date:   Wed Oct 8 14:00:55 2003 +0000

    Fixed LUT8 blit bug. The driver erroneously tried to do a LUT8->LUT8 stretch
    blit, which isn't supported.


 uc_state.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 485126ab97e797826ebaeef5b4ef5bb8408f8c2b
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 7 16:54:06 2003 +0000

    remove check for VIDEOONLY surfaces, disable blit_3d stuff because it
    is broken.


 uc_state.c |   21 +++------------------
 1 file changed, 3 insertions(+), 18 deletions(-)



commit 5a8ce171861b0eda510e2eb6ad0ff6dd8f6d6c2c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Oct 7 12:14:47 2003 +0000

    Added DSFLIP_ONSYNC support to fbdev layer.


 fbdev.c |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)



commit 13c94ded77477363f01f06d702ef97db9ce31a7a
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 7 11:17:32 2003 +0000

    fixed optimized 8bit colorkeying for little endian. disable it on x86
    since it is much slower. have to test on my little endian arm machine.


 generic.c |    9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)



commit 1a8d500ba8eda04b28a85a2753331a34941b0b37
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 7 10:09:27 2003 +0000

    removed my stupid debug message


 unichrome.c |    3 ---
 1 file changed, 3 deletions(-)



commit e7acfd4be08e50f51660c41d862ce8cc80f9989a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 7 10:00:17 2003 +0000

    Removed evil artifact.


 fbdev.c |    3 ---
 1 file changed, 3 deletions(-)



commit 29d3c0334d0cb4a3451d92994a52ab7aa483e924
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 7 09:52:58 2003 +0000

    enable dok's 8 bit colorkeying optimization for all big endian architecures
    
    PowerBook G3 400Mhz
    
    df_dok --dfb:pixelformat=LUT8 --blit-colorkeyed
    
    before: 13.16
    after 42.70(!)


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ea35317ab285ad9bf8ddf29b6e8bc432b9ec7e27
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 7 07:56:55 2003 +0000

    Added null pointer check.


 layers.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 1dc1312bfe281addce79ffbe429e19b4d10a570e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 7 07:53:59 2003 +0000

    Fixed segfault.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 72eef2f506f36a5fc23097c9aacf17552053273b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 7 07:13:55 2003 +0000

    Wrote two complex 8 bit color keying implementations optimized for alignment,
    currently only enabled for MIPS Big Endian for testing.
    
    1) (sx & 3) != (dx & 3) ->  30% boost
    2) (sx & 3) == (dx & 3) -> 120% boost
    
    Should be tested on other platforms. Little Endian is not supported by 1), yet.


 generic.c |  200 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 185 insertions(+), 15 deletions(-)



commit f88d3a3f8dd5435b67aa5e863ab6086401027e06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 21:45:25 2003 +0000

    Start with 0x00000001 in DFBDisplayLayerBufferMode which can be used as flags.
    
    Sorry for binary incompatibility.


 directfb.h |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit d548d69994d024b7137f7ef4b451e1ce4314e085
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 19:29:29 2003 +0000

    Fixed 'for' condition.


 gfx_util.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 6fa41938153b2815cb953101fd071384d8c85b6c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 19:18:59 2003 +0000

    Clean up dfb_scale_linear_32() and dfb_copy_buffer_32() parameters.
    
    Destination offset is now handled by these functions,
    fixing rendering to field separated surfaces with an offset != 0, 0.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |   11 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    8 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |    8 
 src/misc/gfx_util.c                                              |  217 ++++------
 src/misc/gfx_util.h                                              |    7 
 6 files changed, 115 insertions(+), 143 deletions(-)



commit 0d4d2dba153e4ea79211c011ad6a00d7be4ac471
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 6 17:53:15 2003 +0000

    fixes for multi-application support
    
    - move vq stuff from driver_data to device_data
    - allow cle266vgaio device to be opened more than once


 cle266vgaio.c |    5 ++++-
 unichrome.c   |   40 +++++++++++++++++++++++-----------------
 unichrome.h   |    9 ++++-----
 3 files changed, 31 insertions(+), 23 deletions(-)



commit 2ac36d3e587002ff96cca0b827de565b98fb8baf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 09:42:17 2003 +0000

    Added some keys to id_to_symbol().


 input.c |   53 ++++++++++++++++++-----------------------------------
 1 file changed, 18 insertions(+), 35 deletions(-)



commit 7b024144488e57826f394251b6fa00b287ff340e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 09:41:44 2003 +0000

    Minor simplification.


 gfx_util.c |    7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)



commit cf72b56db892497c6672fbf96744d3e215113ffc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 6 09:38:37 2003 +0000

    Added DFB_KEY_INDEX macro.


 directfb_keyboard.h |    1 +
 1 file changed, 1 insertion(+)



commit 8a4c7d1be28586c2b09cfe420f102f447fd89b2f
Author: Andreas Robinson <andors@directfb.org>
Date:   Sun Oct 5 11:59:27 2003 +0000

    YUV planar mode bugfix. U and V planes were not set up correctly and did not look right.


 uc_ovl_hwset.c |   34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)



commit aa1c81f7f81f26c978b6023d14327703c0ff8ef1
Author: Andreas Robinson <andors@directfb.org>
Date:   Sun Oct 5 11:33:11 2003 +0000

    Added WaitVSync() to video overlay.


 uc_overlay.c |   10 ++++++++++
 1 file changed, 10 insertions(+)



commit 561d695d2bf7ecec8e8095166c4b52a447cd077f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 4 19:30:53 2003 +0000

    New version for VMware Workstation 4.0, supports switching of bits per pixel
    at run time, can disable acceleration at run time. Also fixed palette mode.


 /dev/null                                       |binary
 b/patches/Makefile.am                           |    3 +--
 b/patches/vmwarefb-0.7.0-linux-2.4.22.patch.bz2 |binary
 3 files changed, 1 insertion(+), 2 deletions(-)



commit 4aaae87c1b9572853df7397a2553d496de5487b5
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Oct 2 17:54:14 2003 +0000

    fix FillTriangle() for non 32bit modes


 uc_accel.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b9a6e63dcbb0542cbf563ad50319aab265881f64
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Oct 2 16:44:19 2003 +0000

    bugfix for blended FillRectangle(), DrawRectangle() and DrawLine()
    in non 32-bit modes.
    
    (while performing 3d operations, the source color is always 32 bit ARGB,
    not in the destinations's pixelformat)


 uc_accel.c  |   22 +++++++++++-----------
 uc_state.c  |    3 +++
 unichrome.h |    1 +
 3 files changed, 15 insertions(+), 11 deletions(-)



commit d769aa4937bdf54641e75c3a2e3025b505f67d26
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Oct 2 15:42:48 2003 +0000

    - removed surface allocation for vc buffer,
      use dfb_gfxcard_reserve_memory() instead.
    - added note about vram command line boot parameter
    - removed bug note about wrong driver announcement


 Readme.txt  |    7 ++++---
 unichrome.c |   52 +++++++++++++++-------------------------------------
 unichrome.h |    4 +---
 3 files changed, 20 insertions(+), 43 deletions(-)



commit 0040a5698a575787a2331e305efd921395c988ae
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 1 20:41:25 2003 +0000

    Fix for CONFIG_FB_MATROX_MULTIHEAD.


 matroxfb-g400-clock-2.4.22.patch.bz2 |binary
 1 file changed



commit ceafba96eef8161909930b8169b12597aff3487d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Oct 1 17:32:36 2003 +0000

    Patch to set the clocks on a G400 to proper values.


 matroxfb-g400-clock-2.4.22.patch.bz2 |binary
 1 file changed



commit 26e24bd633adf79e4ca4af942ba6560bf46d11ec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 12:28:35 2003 +0000

    Commented out assertion.


 layers.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 45cf404c12027db827c1b17a976938256ce255c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 12:03:49 2003 +0000

    Fixed dfb_colorhash_invalidate() which did not invalidate the first entry.


 colorhash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9236c4548c7b9d27e0b631adcfd7db9e557a3a72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 12:02:18 2003 +0000

    Removed debugging artifacts.


 layers.c |    8 --------
 1 file changed, 8 deletions(-)



commit d73a23fa09b57f18b727cb60fde34df8a1ee342c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 12:00:32 2003 +0000

    Forgot to add that.


 window_display.c |  565 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 565 insertions(+)



commit 20d4cf1a29b166b373428ea4e755ec5b610bcb18
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 11:59:58 2003 +0000

    Removed bogus flag.


 Makefile.am |    1 -
 1 file changed, 1 deletion(-)



commit eb7796df28e8c762ffed4485e9388b7e3cf2bf52
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 11:40:14 2003 +0000

    Added new display layer buffer mode DLBM_WINDOWS where the layer itself
    has no surface, but the hardware is aware of each window and displays the
    window stack.
    
    Added DLCAPS_WINDOWS and three display layer driver calls to add, update
    and remove windows.


 BUGS                                  |    2 
 include/directfb.h                    |    7 
 src/core/Makefile.am                  |    3 
 src/core/fbdev/fbdev.c                |   23 
 src/core/fusion/shmalloc.h            |    2 
 src/core/layers.c                     |  431 ++++++++++----
 src/core/layers.h                     |   41 +
 src/core/sdl/primary.c                |   13 
 src/core/surfaces.c                   |    3 
 src/core/surfaces.h                   |    3 
 src/core/windows.c                    | 1003 +++++++++-------------------------
 src/core/windows.h                    |   79 ++
 src/display/idirectfbsurface_layer.c  |   25 
 src/display/idirectfbsurface_window.c |    2 
 src/misc/conf.c                       |    6 
 src/windows/idirectfbwindow.c         |    4 
 tools/dfblayer.c                      |    6 
 17 files changed, 789 insertions(+), 864 deletions(-)



commit 1a0a2e4f1b505b1abb20c9e50c21cc2c7f2bdac8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 11:25:21 2003 +0000

    Pass real alpha value to conversion routine.


 gfx_util.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c7dbd0e4656b042ee1b086076f624e325c96c821
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 1 11:20:34 2003 +0000

    Added "void *device_data" to InitDriver().
    
    Drivers can store a pointer to the shared device data in the local driver data,
    e.g. to access the device data in display layer functions which only get the
    driver data passed.


 gfxdrivers/ati128/ati128.c     |    3 ++-
 gfxdrivers/cle266/unichrome.c  |    3 ++-
 gfxdrivers/cyber5k/cyber5k.c   |    3 ++-
 gfxdrivers/i810/i810.c         |    3 ++-
 gfxdrivers/matrox/matrox.c     |    3 ++-
 gfxdrivers/neomagic/neomagic.c |    3 ++-
 gfxdrivers/nsc/nsc.c           |    8 +++++---
 gfxdrivers/nvidia/nvidia.c     |    3 ++-
 gfxdrivers/radeon/radeon.c     |    3 ++-
 gfxdrivers/savage/savage.c     |    3 ++-
 gfxdrivers/tdfx/tdfx.c         |    3 ++-
 src/core/gfxcard.c             |   21 +++++++++++----------
 src/core/gfxcard.h             |    5 +++--
 src/core/graphics_driver.h     |    3 ++-
 14 files changed, 41 insertions(+), 26 deletions(-)



commit bd189db4e963eb4509ea1620ace896d2d313d80e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 30 14:59:54 2003 +0000

    Don't blend pixels with black when loading images with alpha to non-alpha formats.


 gfx_util.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 0cd1d62c5fed01a9670d4d16862ea40d730cdc21
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 29 14:37:12 2003 +0000

    Fix for v4l2.


 configure.in                                                   |    2 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    7 ++++++-
 2 files changed, 7 insertions(+), 2 deletions(-)



commit 66e5423fcdc5c14da59502982a1aa652a3083079
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 29 13:42:36 2003 +0000

    Video4Linux 2 support by Michael Hunold <hunold@convergence.de>, thanks!


 README                                                         |    1 
 configure.in                                                   |   37 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |  507 +++++++++-
 3 files changed, 534 insertions(+), 11 deletions(-)



commit d37b5d90a0f278fa4bf805e80727ef1a67bd52ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 25 06:35:12 2003 +0000

    Creating a fullscreen primary with a pixel format set in the description
    took the pixel format specified via "pixelformat=" option if the current
    pixel format already was the pixel format set in the description.
    
    Make sure the "primary-layer=" option used for slaves enables the display
    layer before usage.


 idirectfb.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit b916326e4eeafde64c422adb50a5ddc57e937abc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 25 05:23:58 2003 +0000

    Include <sys/io.h>.
    
    Build CLE266 driver on platforms with sys/io.h only.


 configure.in                     |    4 ++--
 gfxdrivers/cle266/uc_ovl_hwset.c |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit a07f1f0272ebfd8e68703ccc063b22e0fae9d683
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 25 05:21:41 2003 +0000

    Compile fixes for 2.95


 uc_accel.c |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit 7b76b469d759d8d833b4e12648644bac3dfb80ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 25 04:30:57 2003 +0000

    CLE266 driver by Andreas Robinson <andro134 at student.liu.se>, thank you!


 AUTHORS                             |    3 
 README                              |    1 
 configure.in                        |   32 
 gfxdrivers/Makefile.am              |    7 
 gfxdrivers/cle266/.cvsignore        |    6 
 gfxdrivers/cle266/Installation.txt  |   17 
 gfxdrivers/cle266/Makefile.am       |   28 
 gfxdrivers/cle266/Patching.txt      |   27 
 gfxdrivers/cle266/Readme.txt        |  107 ++
 gfxdrivers/cle266/changelog.txt     |   32 
 gfxdrivers/cle266/cle266vgaio.c     |  275 ++++++
 gfxdrivers/cle266/cle266vgaio.mk    |   22 
 gfxdrivers/cle266/cle266vgaio.patch |   24 
 gfxdrivers/cle266/hwdoc.txt         |  549 ++++++++++++
 gfxdrivers/cle266/mmio.h            |   39 
 gfxdrivers/cle266/regs2d.h          |  197 ++++
 gfxdrivers/cle266/regs3d.h          | 1641 ++++++++++++++++++++++++++++++++++++
 gfxdrivers/cle266/rops.h            |  296 ++++++
 gfxdrivers/cle266/uc_accel.c        |  394 ++++++++
 gfxdrivers/cle266/uc_accel.h        |   61 +
 gfxdrivers/cle266/uc_fifo.c         |  198 ++++
 gfxdrivers/cle266/uc_fifo.h         |  246 +++++
 gfxdrivers/cle266/uc_hw.h           |   39 
 gfxdrivers/cle266/uc_hwmap.c        |  429 +++++++++
 gfxdrivers/cle266/uc_hwset.c        |  293 ++++++
 gfxdrivers/cle266/uc_overlay.c      |  295 ++++++
 gfxdrivers/cle266/uc_overlay.h      |   66 +
 gfxdrivers/cle266/uc_ovl_hwmap.c    |  480 ++++++++++
 gfxdrivers/cle266/uc_ovl_hwset.c    |  195 ++++
 gfxdrivers/cle266/uc_state.c        |  266 +++++
 gfxdrivers/cle266/uc_state.h        |   68 +
 gfxdrivers/cle266/unichrome.c       |  487 ++++++++++
 gfxdrivers/cle266/unichrome.h       |  116 ++
 gfxdrivers/cle266/vidregs.h         |  498 ++++++++++
 34 files changed, 7426 insertions(+), 8 deletions(-)



commit ca271e02747c86c00e88aff7cb45821d08acdb3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 23 20:35:22 2003 +0000

    Added "LL" suffix to constants of multiplication to preserve long long type.
    
    Otherwise the session uptime turns negative after about 25 days,
    e.g. using dfbdump to display it.
    
    Yes, my working session is up for "29 days, 10:02:37" now ;)
    
    My secondary session (dedicated to XDirectFB + streamtuner + xmms)
    is up for "36 days, 05:48:40" !!!


 fusion.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit bd288a776bc69d170e8dfd459bca993c23548378
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 23 14:38:27 2003 +0000

    Don't set alpha value of color key palette index to 0xff.


 idirectfbimageprovider_png.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a42b6759c6f3b29a577ca81855d731da3d9920ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 23 13:11:30 2003 +0000

    Simplified Bop_a8_set_alphapixel_Aop_lut8 for monochrome fonts.


 generic.c |   17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)



commit d4118854c73912a533bbeb4de439d2c86f697081
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 22 20:25:29 2003 +0000

    Ignore r, g and b difference if alpha is zero.


 colorhash.c |   20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)



commit 2b49dc202687883cc1f00d658a4086f0066cc3e1
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri Sep 19 01:17:21 2003 +0000

    PIXEL_RGB24 is gone, use PIXEL_RGB32.


 i810_overlay.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 184090db8eb237002bb4cfd925a5aeacf840160a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 12 21:41:16 2003 +0000

    Remember and compare the Fusion ID of the last state's owner.
    
    Fixes cases where state pointers equal but don't belong to the
    same application.
    
    I wondered for a long time why two instances of e.g. df_andi
    running windowed mixed up their blits.


 fusion/fusion.c |   12 ++++++++++++
 fusion/fusion.h |    5 +++++
 gfxcard.c       |   22 ++++++++++++++--------
 3 files changed, 31 insertions(+), 8 deletions(-)



commit 8e7b5602dc9b3f4ee45826406d762546be9ef8a5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 10 08:17:45 2003 +0000

    Show actually allocated bytes for each surface (video + system).


 dfbdump.c |   58 ++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 44 insertions(+), 14 deletions(-)



commit 87733c28aa29cee2cffff1f4d09cc3243f460ea8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 10 02:14:32 2003 +0000

    Less weight for alpha.


 colorhash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 54c0a89735543499f7dba2a7d24a7e8e5b95389f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 9 18:33:25 2003 +0000

    Multi app related stuff.


 README |   88 ++++++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 49 insertions(+), 39 deletions(-)



commit ecfede23d0e9550b24ce7da5cff8a05a4b994892
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 5 12:19:08 2003 +0000

    Restore KD_GRAPHICS after switching back to DirectFB.


 vt.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 7bd63a145351bad21587fd1fec75ddafcaac68f6
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Sep 1 11:44:48 2003 +0000

    Enable dithering and filtering for RGB modes instead of YUV modes.


 matrox_crtc2.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 23e412b8ce9c6fc86d8aa4c3d33f24f265290148
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 28 17:32:01 2003 +0000

    Use the generic conversion routines for surfaces with DSCAPS_SEPARATED.


 idirectfbimageprovider_jpeg.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit c1db9e241e3701dd738c89254208973bf928c6b8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 27 17:43:25 2003 +0000

    Call driver's SetOpacity() only if the opacity changed.


 layers.c |    3 +++
 1 file changed, 3 insertions(+)



commit b73abf5d2d7ba256cb3a457393b490efd8a0e786
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 27 17:42:00 2003 +0000

    Call driver's SetScreenLocation() only if the location changed.


 layers.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 292839add3bac966386165e8d40539242f9b1cb5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 27 17:39:15 2003 +0000

    Don't call dfb_window_init() for each IDirectFBWindow_Construct(),
    but only for the first time.


 core/windows.c                  |   25 +++++++++++++------------
 display/idirectfbdisplaylayer.c |    4 ++--
 windows/idirectfbwindow.c       |   20 ++++++++------------
 windows/idirectfbwindow.h       |    4 +++-
 4 files changed, 26 insertions(+), 27 deletions(-)



commit 67fb4661bb6704e9d54536bf1ac5b83eb3e99b72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 27 16:38:55 2003 +0000

    Commented out assumption.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ed6c1bf5292a2098b125eabd7001becbe6ae20c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 26 16:32:57 2003 +0000

    Added some more exit points to the grabbing thread.


 idirectfbvideoprovider_v4l.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit d9482155ef4f59f552c74e30b32a12d7cfaf82b8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 26 16:29:12 2003 +0000

    Don't support A8 destination on a G200. It doesn't support it as a source, too.


 matrox.c |    1 -
 1 file changed, 1 deletion(-)



commit 1bb2c3e3ebab26a3d25f571255032d24e40e9eef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 25 17:37:11 2003 +0000

    Align glyph offsets to a multiple of four.


 fonts.c |   10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)



commit 0063479f433f7bdb1cfbc47c652a279d15c9c13e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 25 17:27:37 2003 +0000

    10% DrawString() boost by changing __u16 to __u32.


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit d689e99d3068c243173b7cf11770af49419b2cab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 25 16:40:45 2003 +0000

    Lookup color index for layer's background color.


 palette.c |    2 ++
 windows.c |   18 ++++++++++++++----
 2 files changed, 16 insertions(+), 4 deletions(-)



commit 2f697d6f809a9d555b062e8e33b03da455ff395e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 25 15:13:30 2003 +0000

    Support DSCAPS_SEPARATED in dfb_copy_buffer_32(), too.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |    3 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    3 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    3 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |    3 
 src/core/windows.c                                               |    1 
 src/misc/gfx_util.c                                              |  108 +++++-----
 src/misc/gfx_util.h                                              |    5 
 7 files changed, 67 insertions(+), 59 deletions(-)



commit d1b95d9d25e369eaa48a60346fdee2302c2b8820
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 25 14:43:00 2003 +0000

    Support DSCAPS_SEPARATED in dfb_scale_linear_32().


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c   |    3 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c  |    3 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |    3 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c   |    3 +-
 src/misc/gfx_util.c                                              |   14 +++++++---
 src/misc/gfx_util.h                                              |    3 +-
 6 files changed, 21 insertions(+), 8 deletions(-)



commit 4ff8d5fcf2327fccfb5439a01bc04914b9f48fd5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 21 17:57:41 2003 +0000

    Don't optimize repaints for restacking.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c4ff4c86f8c3f6ccf845ba3c726ff60026a1ae9e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 21 15:12:07 2003 +0000

    Translate DIKI_KP_0-9 to DIKS_0-9 instead of DIKS_HOME etc.


 input.c |   20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)



commit 1413fa17c1fae2534d3b457d90316fce3631b7cd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 20 07:38:53 2003 +0000

    Added support for color keyed PNGs.
    
    Instead of converting an 8 bit palette PNG (with tRNS) to ARGB,
    convert it to RGB and generate a color key.


 idirectfbimageprovider_png.c |  121 +++++++++++++++++++++++++++++++++++++++----
 1 file changed, 112 insertions(+), 9 deletions(-)



commit af70e6a23abec16acfc4e3b8c82677692828891e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 20 00:16:20 2003 +0000

    Applied a great patch from Maurizio Monge <monge@sns.it>.
    
    When repainting the stack due to a window update, e.g. a Flip(),
    skip those regions which are hidden by opaque windows above the window
    that changed.
    
    This increases performance and reduces artifacts.
    
    Example: Terminal with tons of debug messages under opaque window caused
    the opaque window to be updated, too, within the intersection of both windows.
    
    Another example: Run a fullscreen app in windowed mode, e.g. df_andi, and
    see how frame rate increases as more of df_andi is hidden by opaque windows ;)


 windows.c |  131 ++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 107 insertions(+), 24 deletions(-)



commit 73f0ad283a03ed088557ebd556361317c421dceb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 19 18:25:19 2003 +0000

    Fix warning for builds without MMX.


 generic.c |    2 ++
 1 file changed, 2 insertions(+)



commit d85ceab93ecd4827c81ccc4197844bf9897a756b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 19 10:45:49 2003 +0000

    Set SBF_WRITTEN if hardware writes, too.
    
    Fixes garbage after VT switching (in case the surface has never been written
    to in system memory and therefor was not properly restored).


 surfaces.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 9fafe00f378080fe74ecf779479b72179e986c28
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 19 01:15:51 2003 +0000

    Fixed warning.


 idirectfbsurface.c |    1 -
 1 file changed, 1 deletion(-)



commit 67785b48226cf23afc156c919777d612d5ba84a2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 18 20:15:44 2003 +0000

    Don't automatically flip in SetOptions().


 idirectfbwindow.c |    4 ----
 1 file changed, 4 deletions(-)



commit 1d5052a2fb100c0f1781fc9d102e541ea6daca4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 18 17:27:30 2003 +0000

    Added IDirectFBSurface::Dump(), e.g. for debugging.


 include/directfb.h             |   22 ++++++++++++++++++++++
 src/display/idirectfbsurface.c |   30 ++++++++++++++++++++++++++++++
 2 files changed, 52 insertions(+)



commit 7fdf409cd2f23d1f8a386e8caa1b049cf58edee5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Aug 18 14:35:12 2003 +0000

    PIXEL_RGB24 is gone, use PIXEL_RGB32. memset() needs string.h.


 i810.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 748d8bf79a3d5a693f495d9087bd9ce3582b90c6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 18 12:40:14 2003 +0000

    Added "-lm" to libmpeg3 module.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e014db19a718da18743cb336e3a36a43be2a8bd3
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Aug 17 09:29:25 2003 +0000

    use -module flag, which causes libtool to create mach-o "bundles" on darwin/osx
    instead of dynamic libraries which cannot be dlopen()ed


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 1a30be08ea5c1c37fe8f1c339f64f029d5d753fb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 18:22:31 2003 +0000

    non-debug apps in a debug session break shared memory assertions


 BUGS |    1 +
 1 file changed, 1 insertion(+)



commit fa81c6583daf14c848e720ed5fc47614413fcf63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 15:58:30 2003 +0000

    Updated.


 NEWS |    1 +
 1 file changed, 1 insertion(+)



commit e44c645719565c4fd24ba0ab6369be46b6c1d12d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 15:56:05 2003 +0000

    Enable key repeat.


 sdlinput.c |    8 ++------
 1 file changed, 2 insertions(+), 6 deletions(-)



commit adced8db12eb1795865343bf22576d4b90f565ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 15:11:00 2003 +0000

    Added the obligatory "other bug fixes" line ;)


 NEWS |    1 +
 1 file changed, 1 insertion(+)



commit 34855e0345f501b223958db584a6610eacb95f49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 13:48:05 2003 +0000

    Updated.


 ChangeLog |  394 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   28 ++++
 2 files changed, 422 insertions(+)



commit 15b67b79834af201cb81ceea477639e1eff80f9a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 13:04:46 2003 +0000

    Added WM97XX Touchscreen driver,
    thanks to Liam Girdwood <liam.girdwood@wolfsonmicro.com>!


 AUTHORS                            |   17 +-
 README                             |    1 
 configure.in                       |   10 +
 inputdrivers/Makefile.am           |    7 -
 inputdrivers/wm97xx_ts/.cvsignore  |    6 
 inputdrivers/wm97xx_ts/Makefile.am |   17 ++
 inputdrivers/wm97xx_ts/wm97xx_ts.c |  243 +++++++++++++++++++++++++++++++++++++
 7 files changed, 291 insertions(+), 10 deletions(-)



commit f487f74e1e8ca28ddcc66568b35994b3fb107196
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 11:59:12 2003 +0000

    Increased timeout from 100 to 200 ms.


 ps2mouse.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6817712e18fe545e8f47d01ede8681185ac29b06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 11:57:10 2003 +0000

    oops


 debug.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 39b0c525540d88b5ee89304d529186e50e1e2e63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 15 11:39:13 2003 +0000

    Call tracing has to be enabled via "--enable-trace" now.
    
    Show stack trace of all threads when a signal is received.
    
    Include <config.h> everywhere.


 configure.in                             |   21 ++++++++++++-------
 src/core/fbdev/fbdev.c                   |    2 -
 src/core/fbdev/vt.c                      |    2 +
 src/core/fonts.c                         |    2 +
 src/core/fusion/object.c                 |    2 +
 src/core/fusion/reactor.c                |    2 -
 src/core/fusion/shmalloc/shcalloc.c      |    2 +
 src/core/fusion/shmalloc/shfree.c        |    2 +
 src/core/fusion/shmalloc/shmalloc.c      |    2 +
 src/core/fusion/shmalloc/shrealloc.c     |    2 +
 src/core/layers.c                        |    2 +
 src/core/modules.c                       |    2 +
 src/core/palette.c                       |    2 +
 src/core/sdl/primary.c                   |    2 +
 src/core/sdl/sdl.c                       |    2 +
 src/core/sdl/sdlinput.c                  |    2 +
 src/core/sig.c                           |    7 +++++-
 src/core/state.c                         |    2 +
 src/core/surfacemanager.c                |    2 +
 src/core/surfaces.c                      |    2 +
 src/core/system.c                        |    2 +
 src/core/thread.c                        |    2 +
 src/core/windows.c                       |    2 +
 src/directfb.c                           |    2 +
 src/display/idirectfbdisplaylayer.c      |    2 +
 src/display/idirectfbpalette.c           |    2 +
 src/display/idirectfbsurface.c           |    2 +
 src/display/idirectfbsurface_layer.c     |    2 +
 src/display/idirectfbsurface_window.c    |    2 +
 src/gfx/clip.c                           |    2 +
 src/gfx/convert.c                        |    2 +
 src/gfx/generic/generic.c                |    2 -
 src/gfx/util.c                           |    2 +
 src/input/idirectfbinputbuffer.c         |    2 +
 src/input/idirectfbinputdevice.c         |    2 +
 src/interface.c                          |    2 +
 src/media/idirectfbdatabuffer.c          |    2 +
 src/media/idirectfbdatabuffer_file.c     |    2 +
 src/media/idirectfbdatabuffer_memory.c   |    2 +
 src/media/idirectfbdatabuffer_streamed.c |    2 +
 src/media/idirectfbfont.c                |    2 +
 src/media/idirectfbimageprovider.c       |    2 +
 src/misc/conf.c                          |    2 -
 src/misc/cpu_accel.c                     |    2 -
 src/misc/debug.c                         |   34 ++++++++++++++++++++++++++-----
 src/misc/debug.h                         |    3 +-
 src/misc/gfx_util.c                      |    2 +
 src/misc/mem.c                           |    2 +
 src/misc/memcpy.c                        |    2 -
 src/misc/tree.c                          |    2 +
 src/misc/utf8.c                          |    4 +--
 src/misc/util.c                          |    2 +
 src/windows/idirectfbwindow.c            |    2 +
 53 files changed, 143 insertions(+), 22 deletions(-)



commit 66eeb5c72ef3af8baa306b3c2c5409774e5626bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 14 16:06:57 2003 +0000

    Fixed warning.


 debug.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit b7b2a52cf15b74424e5b2d88f847df4a0029eb8d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 14 16:06:09 2003 +0000

    Allow signal handler in slaves again.


 core/core.c  |    2 +-
 misc/debug.c |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)



commit c667284cd84485ef00fdae1578dc39822ab81807
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 14 16:04:23 2003 +0000

    Added new debugging method "dfb_debug_print_stack()" that dumps the current
    stack trace. But it just includes functions that are compiled with the gcc
    option "-finstrument-functions", currently all of DirectFB when --enable-debug
    is used.


 configure.in              |    2 
 src/core/fusion/reactor.c |    2 
 src/core/sig.c            |    4 +
 src/misc/Makefile.am      |    2 
 src/misc/debug.c          |  137 ++++++++++++++++++++++++++++++++++++++++++++++
 src/misc/debug.h          |   33 +++++++++++
 6 files changed, 178 insertions(+), 2 deletions(-)



commit 10b10d22a96e1b833f8f08f0be0e77ff00be3da3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 14 14:54:26 2003 +0000

    Include <config.h> at least in all files depending on FUSION_FAKE.
    
    Switching single/multi app between builds should be working now.


 core.c                   |    2 ++
 core_parts.c             |    2 ++
 fusion/fusion_internal.h |    2 ++
 input.c                  |    2 ++
 4 files changed, 8 insertions(+)



commit b40c289d517bd59fecb7add77f662869a81e9c4c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 14 00:42:18 2003 +0000

    <Meta>-<Print> now stores the alpha channel of the window, too.
    It's a pgm and is stored with the same file name except the extension.
    
    To convert from ppm/pgm to png do:
    
    pnmtopng -alpha dfb_window_0000.pgm dfb_window_0000.ppm > dfb_window_0000.png
    
    
    Minor debug changes.


 fusion/reactor.c           |    2 
 fusion/shmalloc/shmalloc.c |    2 
 sig.c                      |   14 +++-
 surfaces.c                 |  139 ++++++++++++++++++++++++++++++++++-----------
 4 files changed, 120 insertions(+), 37 deletions(-)



commit 595818cdb1ec763cd075de26006883c7668463a7
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 13 17:39:42 2003 +0000

    build pixelformat conversion utilities only on linux systems.


 Makefile.am |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 3390dcb2a4d10b96c20737c7591eb7619b300b69
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 13 17:34:49 2003 +0000

    use setpgid() instead of setpgrp() to restore darwin and probably other BSD compatibility.


 core.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 0afa6eb90431402d6024c8e23b07da46e9626687
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 12 12:10:36 2003 +0000

    Added another lock check.


 layers.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 92907473feeefb43e5cc5601d59899150090f658
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 12 12:09:24 2003 +0000

    Added a lot of necessary locks.
    
    IDirectFBDisplayLayer::GetWindow() is safe now, too. Was an urgent fixme.


 core/layers.c                   |  115 +++++++++++++++++++++++++++-------------
 display/idirectfbdisplaylayer.c |    6 --
 2 files changed, 78 insertions(+), 43 deletions(-)



commit 70934ac3d6a89da84cfe5a59922127e66b93effc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 16:49:51 2003 +0000

    Skip copying from system to video memory during auto video buffer upload
    if the buffer has never been locked for write access.
    
    Enable upload of auto video buffers for write only GPU access, too.
    
    Speeds up surface create/clear/release cycles, nearly as fast as for video
    only surfaces.


 gfxcard.c        |    4 +--
 surfacemanager.c |   60 +++++++++++++++++++++++++++++--------------------------
 surfaces.c       |    5 +++-
 surfaces.h       |    6 +++--
 4 files changed, 42 insertions(+), 33 deletions(-)



commit 27dcc549b52e0bfffa377e65cf420abbce2d89c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 16:09:56 2003 +0000

    Indicate if segfault has been cured.


 sig.c |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit 4b9be667e85bb8e17a59b02a1383f05646ea3667
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 15:59:31 2003 +0000

    Hot fixed rare segfaults which occur if a valid shared memory pointer is
    derefenced but the address lies in a new region which hasn't been mapped
    locally yet.
    
    Added "bool fusion_shmalloc_cure( const void *ptr )" which is called by the
    signal handler to recover such segfaults by remapping the file immediately.
    It returns true if the segfault is cured and the signal handler may drop it.
    
    This is a hack until there's a better solution, maybe via Fusion Kernel Device.


 fusion/fusion_shmalloc.c   |    6 ++
 fusion/shmalloc.h          |    8 +++
 fusion/shmalloc/shmalloc.c |   98 ++++++++++++++++++++++++++++++++++++++++-----
 sig.c                      |   23 +++++++++-
 4 files changed, 124 insertions(+), 11 deletions(-)



commit bcb98df83ec26b6f85c3893fbbe40a78f42b025a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 13:23:33 2003 +0000

    Show faulting address in case of SIGSEGV.


 sig.c |   31 ++++++++++++++++++++++++++-----
 1 file changed, 26 insertions(+), 5 deletions(-)



commit c2d57d6eed7b5f2acda053760463f366951dcbc9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 13:22:49 2003 +0000

    Converted assertion to assumption, added another assumption.


 thread.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit db8969b35610232046ae1389f454eb5215705d56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 13:20:04 2003 +0000

    Added debug messages to __shmalloc_brk() and __shmalloc_react().


 shmalloc.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 50afa6f82552d29fc7a7573c375015614af65045
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 11 10:19:35 2003 +0000

    Fixed button events, thanks to Tim Wright <tim.wright@iosystems.co.uk>.


 README                         |    1 +
 inputdrivers/mutouch/mutouch.c |    3 +++
 2 files changed, 4 insertions(+)



commit 960473810e39d9ba24233454e2a444edcd266cf3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 23:17:03 2003 +0000

    Removed a caution message.


 windows.c |    2 --
 1 file changed, 2 deletions(-)



commit 1a4895b0ec854bc41b4318c04686a47ee5760beb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 23:10:58 2003 +0000

    Block signals in slave threads and fusion read (master & slave) thread, too.
    
    Enhanced debug, minor cleanup.


 coredefs.h       |    6 +++---
 fusion/reactor.c |   33 +++++++++++++++++++++++++--------
 surfaces.c       |    4 ++--
 thread.c         |    3 +--
 windows.c        |    4 ++--
 5 files changed, 33 insertions(+), 17 deletions(-)



commit 92855f15661bd23324283d377c4d8bbe2e9fb8a6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 21:52:49 2003 +0000

    Cleanup, enhanced debugging and safety.


 core/coredefs.h           |   16 ++--
 core/windows.c            |  153 ++++++++++++++++++++++++----------------------
 core/windows.h            |    8 --
 windows/idirectfbwindow.c |    3 
 4 files changed, 91 insertions(+), 89 deletions(-)



commit 8683c48420d5f20b39cd649c1c16eb80552764b3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 19:39:29 2003 +0000

    Waiting for pthread_create is required, but it's done later now.


 thread.c |   35 +++++++++++++++++------------------
 1 file changed, 17 insertions(+), 18 deletions(-)



commit ec9ec6272838f49a8fb4fe01b7fd70329fb73b3c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 19:10:27 2003 +0000

    Create a new process group early during initialization.
    
    Send SIGTRAP to process group leader instead of the calling process
    in DFB_ASSERT and DFB_BREAK. Otherwise the signal would be blocked
    if the assertion or break happens in a thread, e.g. an input thread.
    
    Call pause() after sending the signal, otherwise execution continues
    until the signal is caught.


 core.c     |    2 ++
 coredefs.h |    6 ++++--
 2 files changed, 6 insertions(+), 2 deletions(-)



commit 1453745874d5e9d62ff78baa5d7acdb082c60171
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 18:16:47 2003 +0000

    Use pid instead of pthread id in debug messages.


 thread.c |   16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)



commit fd7080b1a71f7d435547a2a6ce3607eb6d7a7ab4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 8 18:10:16 2003 +0000

    Added DFB_ASSUME which is like DFB_ASSERT, but doesn't send SIGTRAP and
    has "(?)" instead of "(!)" at the beginning of the debug message.
    Failing assumptions are not fatal. They can be used to unveil unusual
    behaviour, e.g. dfb_thread_join() called while already joining/joined.
    
    Optimized creation of new threads by not waiting for pthread_create completion
    in spawned threads. Also don't enter the main routine after initialization if
    another is already joining. This is useful if DirectFB is initialized, but
    deinitialized shortly after. In this case the fusion_read_loop() is not entered.
    
    
    On a P3 800E with only fbdev (systems) and matrox (gfxdrivers) installed I did
    
    "while true; do dfb_init_deinit &> /dev/null; done"
    
    where 'dfb_init_deinit' (slave) just calls DirectFBInit/Create/Release.
    This results in about 170 iterations per second and looks like 5.8 ms for a
    complete init/deinit for slaves, but bash is consuming a lot of CPU, too.
    
    Debug messages show that a complete DirectFBInit/Create/Release (as a slave)
    takes 3-4 ms ;)


 coredefs.h |   14 ++++++++
 thread.c   |  100 +++++++++++++++++++++++++++++++++++++++++++++++--------------
 2 files changed, 92 insertions(+), 22 deletions(-)



commit 93a3e94a69897239f4610b5cb399bf14b4f4a470
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 16:46:19 2003 +0000

    Check desc.width and desc.height for being positive in CreateFont().


 idirectfb.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 640d8d255bdbce4bb39a8d83abe9f171123cde4d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 16:42:11 2003 +0000

    Added error handling to glyph surface creation.


 fonts.c |   28 +++++++++++++++++++---------
 1 file changed, 19 insertions(+), 9 deletions(-)



commit cf85555e82c93ec26ec51a7d78057aa9a62c3b0d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 16:26:38 2003 +0000

    Added some assertions and argument checking.


 core/surfacemanager.h |    4 ++--
 core/surfaces.c       |   25 ++++++++++++++++++++++---
 core/surfaces.h       |    2 +-
 core/windows.c        |   12 ++++++++++++
 idirectfb.c           |    3 ---
 5 files changed, 37 insertions(+), 9 deletions(-)



commit 4c26f3dcaa8242afbe4d770bb2171bcf634e864f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 16:05:27 2003 +0000

    Don't filter all print keys.


 input.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5ee697e6b0e59f961abf7e47bf8acbcf0a40081e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 16:00:20 2003 +0000

    Added <Meta>-<Print> hot key to make a screenshot of the focused window ;)
    
    Added dfb_surface_dump() which is used for screenshots now, replaces static
    function dump_screen() and will store the alpha channel to an extra pgm soon.


 input.c    |  138 ++++-----------------------
 surfaces.c |   94 ++++++++++++++++++
 surfaces.h |   10 ++
 windows.c  |  305 ++++++++++++++++++++++++++++++-------------------------------
 4 files changed, 278 insertions(+), 269 deletions(-)



commit 7bf4f7ad0f405e98e85afa9c998a249448043eac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 7 00:46:50 2003 +0000

    Check if the font is already set in IDirectFBSurface::SetFont(),
    saves just a few CPU cycles though.


 idirectfbsurface.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit 05de94bd9be5d4d52306f3fe7d22420d453fa236
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 6 17:52:20 2003 +0000

    New environment variable "DFBARGS" is now parsed
    like everything after "--dfb:" on the command line.
    
    New order:
    
    system       /etc/directfbrc
    user         <home>/.directfbrc
    system/app   /etc/directfbrc.<app>
    user/app     <home>/.directfbrc.<app>
    
    environment  $DFBARGS
    
    command line


 conf.c |  152 ++++++++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 89 insertions(+), 63 deletions(-)



commit e3137b83b254ddfc8740cada13b01159bc3ee8b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 4 19:09:28 2003 +0000

    Need long long.


 idirectfb.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6fd06aa07fc046fa25b2db1ad87f29f969a2e519
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 4 19:00:13 2003 +0000

    Reject very large surface creations (> 4096*4096 pixels).


 idirectfb.c |    3 +++
 1 file changed, 3 insertions(+)



commit 39368f0436ec7267eae8432c1d482a8340a507fc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 4 18:39:03 2003 +0000

    DWOP_SHAPED support for color keyed windows,
    thanks to Maurizio Monge <monge@sns.it>.


 ChangeLog          | 3655 +++++++++++++++++++++++++++--------------------------
 README             |    1 
 include/directfb.h |    5 
 src/core/windows.c |  160 +-
 4 files changed, 2007 insertions(+), 1814 deletions(-)



commit cd5c4b8b34b3f15bf314648a56ce7e206b13fa0a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 2 19:35:40 2003 +0000

    Added IDirectFBEventBuffer::WakeUp().
    
    Wakes up any thread waiting for events in this buffer.
    This method causes any WaitForEvent() or WaitForEventWithTimeout() call
    to return with DFB_INTERRUPTED.
    This method should be used rather than sending wake up messages which
    may pollute the queue and consume lots of CPU and memory compared to
    this 'single code line method'.


 include/directfb.h               |   17 ++++++++++++++++-
 src/directfb.c                   |    2 ++
 src/input/idirectfbinputbuffer.c |   38 +++++++++++++++++++++++++++-----------
 3 files changed, 45 insertions(+), 12 deletions(-)



commit c1282ad0a2dc5613d67c9f0b5546245c542d7cfd
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 29 13:05:13 2003 +0000

    version number 0.9.19+0.9.20WIP-1


 changelog |    6 ++++++
 1 file changed, 6 insertions(+)



commit 771162e2b83d0079f21f1a7d773301d7067f8946
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 29 04:00:11 2003 +0000

    Fixed non-x86/ppc builds.


 memcpy.c |    3 ---
 1 file changed, 3 deletions(-)



commit c85bc934af9604c65f01c7bb9a4218a91bea4822
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 29 03:46:37 2003 +0000

    Don't segfault in slaves if no graphics driver is used by the master.


 gfxcard.c |    3 +++
 1 file changed, 3 insertions(+)



commit dc421ed0b976aa61d92892f8a36ef8caf18d59cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 20:53:13 2003 +0000

    Added "memcpy = <method>" option to save a lot of startup time.
    "time dfbinfo" went from 0.080 secs to < 0.010 secs!


 docs/directfbrc.5.in |    6 ++++
 src/misc/conf.c      |   19 ++++++++++++++
 src/misc/conf.h      |    5 +++
 src/misc/memcpy.c    |   66 +++++++++++++++++++++++++++++++++++++++------------
 src/misc/memcpy.h    |    1 
 5 files changed, 82 insertions(+), 15 deletions(-)



commit b849e25a6475473a4691f61caa1acc979a15b485
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 19:36:47 2003 +0000

    0.9.20 looks fine.
    
    Updated copyright in banner.


 configure.in   |    2 +-
 src/directfb.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit 5d39a6da0a02907f568d141ba93a1687ca23879a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 18:44:16 2003 +0000

    Include URL http://www.linuxbase.org/spec/gLSB/gLSB/libpthread.html


 BUGS |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit 5edaaaf1ff9290a45229b1c12cc88b9b51f1d1a1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 18:40:26 2003 +0000

    Added:
    
    
    LSB violations (from http://www.opengroup.org/personal/ajosey/tr28-07-2003.txt)
    -------------------------------------------------------------------------------
    
    215 Applications must disconnect from the controlling tty before calling
    216 pthread_create.
    
    225 Threaded applications cannot use SIGUSR1 or SIGUSR2.


 BUGS |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 351431ada9916c90ba680432f31fa36e2a04f5cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 14:21:52 2003 +0000

    Added DWOP_SHAPED that adds shape support to cursor movements,
    i.e. ignore the window if alpha is zero at the cursor location.
    
    This is based on a patch by Monge Maurizio <monge@linuz.sns.it>, thanks!


 include/directfb.h |    4 +-
 src/core/windows.c |   80 +++++++++++++++++++++++++++++++++++++++++++++++------
 2 files changed, 75 insertions(+), 9 deletions(-)



commit 2f729c9cc1ba11c4c43f4af7b666e4d2a594a347
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 13:47:39 2003 +0000

    Restore layer opacity during resume.
    
    This way one can switch to the linux console and do "dfblayer -l 1 -o 0"
    to disable the Matrox BES or any other overlay if it covers the whole
    screen and makes the session unusable. But "fbset -accel false" might
    be needed on that console.


 layers.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 7d312dd530d5a89a54dd51f835d0250c758abfc2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 28 12:01:54 2003 +0000

    Fixed undeclared "dfb_fbdev" for builds with FBIO_WAITFORVSYNC defined.


 radeon.c |    4 ++++
 1 file changed, 4 insertions(+)



commit fab9fef07740ea23371d0f773057db10a99b1f32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 25 12:47:23 2003 +0000

    Have fusion-full-linux-2.60-test1.patch.bz2 in EXTRA_DIST.
    
    Remove old and broken patch.


 /dev/null             |binary
 b/patches/Makefile.am |    2 +-
 2 files changed, 1 insertion(+), 1 deletion(-)



commit 753862e12a9f518226b74fdcfe5eafc0304a3928
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jul 24 11:44:48 2003 +0000

    working patch for 2.6.0-test1 (support new internal devfs api)


 fusion-full-linux-2.6.0-test1.patch.bz2 |binary
 1 file changed



commit def4946a0eb8339166c9cd2d706946a72f911a7e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 23 14:36:19 2003 +0000

    Don't show "make" message if configure failed.


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a90237e4f3803c59884ddc4969cc86f5893119c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 21 12:00:02 2003 +0000

    Updated.


 ChangeLog | 3990 +++++++++++++++++++++++++++++++++++---------------------------
 NEWS      |   12 
 2 files changed, 2285 insertions(+), 1717 deletions(-)



commit a1927e4e9551046da4a21d326feae196d2931381
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 21 11:24:21 2003 +0000

    Removed automake -ldl issue.


 BUGS |    4 ----
 1 file changed, 4 deletions(-)



commit f8679858acf44b8551051952dfeb972f4720efe9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 21 10:57:10 2003 +0000

    Do not cover the whole screen by default.


 matrox_bes.c |   36 ++++++++++++++++++++++++++----------
 1 file changed, 26 insertions(+), 10 deletions(-)



commit 571c2c1a9150fd8f67281911a868d008f4f92e20
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 21 10:55:02 2003 +0000

    Added parameter for opacity changes. Also useful to disable an overlay.
    
    Show layer options in configuration dump.


 dfblayer.c |   69 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 69 insertions(+)



commit 13e834b74cb35711dc071beaa5e48001cb757fed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 16 16:28:05 2003 +0000

    Moved min_toleration to shared manager data.


 surfacemanager.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit a88097485ec3cbbe0fd5bac5fc3bbe91f9241fc6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 16 03:55:06 2003 +0000

    Cleaned up debug messages.


 surfacemanager.c |   60 ++++++++++++++++++++++++++-----------------------------
 1 file changed, 29 insertions(+), 31 deletions(-)



commit 931bf8281416b9050e94f624f4f6c9fba7aef853
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 16 03:05:44 2003 +0000

    Removed "soft lock" hack that just increased the lock counter.
    
    Use dfb_surface_hardware_lock() now as we can maintain the lock until
    the video is stopped.


 idirectfbvideoprovider_v4l.c |   10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)



commit 6061bc28321bb1c29af3067791061c99b5108da8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 16 02:49:09 2003 +0000

    Removed front and back buffer locks from surface.
    Locking is provided by the embracing surface manager lock.
    
    This saves two system calls per drawing operation and even four system
    calls per blitting operation.
    
    Locking a surface won't block anymore. Currently any number of
    concurrent read/write accesses by cpu/gpu are allowed.
    Locking is a way of pinning the surface buffer to a pool.
    The hardware lock fails if the system memory instance is locked.
    
    
    Check the benchmarks, some values nearly doubled ;)
    
    BEFORE
    
    Benchmarking with 1x1 in 16bit mode... (16bit)
    
    Anti-aliased Text                              3.00 secs (  626.97 KChars/sec)
    Anti-aliased Text (blend)                      3.00 secs (  633.18 KChars/sec)
    Fill Rectangles                                3.00 secs (    0.14 MPixel/sec)
    Fill Rectangles (blend)                        3.00 secs (    0.13 MPixel/sec)
    Fill Triangles                                 3.00 secs (    0.06 MPixel/sec)
    Fill Triangles (blend)                         3.00 secs (    0.06 MPixel/sec)
    Draw Rectangles                                3.00 secs (  128.37 KRects/sec)
    Draw Rectangles (blend)                        3.00 secs (  125.77 KRects/sec)
    Draw Lines                                     3.00 secs (  737.33 KLines/sec)
    Draw Lines (blend)                             3.00 secs (  718.00 KLines/sec)
    Blit                                           3.00 secs (    0.10 MPixel/sec)
    Blit colorkeyed                                3.00 secs (    0.10 MPixel/sec)
    Blit with format conversion                    3.00 secs (    0.12 MPixel/sec)
    Blit from 32bit (alphachannel blend)           3.00 secs (    0.09 MPixel/sec)
    Blit from 8bit palette                         3.00 secs (    0.11 MPixel/sec)
    Blit from 8bit palette (alphachannel blend)    3.00 secs (    0.09 MPixel/sec)
    Stretch Blit                                   3.24 secs (   99.88 MPixel/sec)
    Stretch Blit colorkeyed                        3.23 secs (  100.16 MPixel/sec)
    
    
    AFTER
    
    Benchmarking with 1x1 in 16bit mode... (16bit)
    
    Anti-aliased Text                              3.00 secs (  675.60 KChars/sec)
    Anti-aliased Text (blend)                      3.00 secs (  677.32 KChars/sec)
    Fill Rectangles                                3.00 secs (    0.17 MPixel/sec)
    Fill Rectangles (blend)                        3.00 secs (    0.16 MPixel/sec)
    Fill Triangles                                 3.00 secs (    0.07 MPixel/sec)
    Fill Triangles (blend)                         3.00 secs (    0.07 MPixel/sec)
    Draw Rectangles                                3.00 secs (  168.70 KRects/sec)
    Draw Rectangles (blend)                        3.00 secs (  159.00 KRects/sec)
    Draw Lines                                     3.00 secs (  833.00 KLines/sec)
    Draw Lines (blend)                             3.00 secs (  809.33 KLines/sec)
    Blit                                           3.00 secs (    0.15 MPixel/sec)
    Blit colorkeyed                                3.00 secs (    0.15 MPixel/sec)
    Blit with format conversion                    3.00 secs (    0.21 MPixel/sec)
    Blit from 32bit (alphachannel blend)           3.00 secs (    0.16 MPixel/sec)
    Blit from 8bit palette                         3.00 secs (    0.20 MPixel/sec)
    Blit from 8bit palette (alphachannel blend)    3.00 secs (    0.15 MPixel/sec)
    Stretch Blit                                   4.41 secs (  110.36 MPixel/sec)
    Stretch Blit colorkeyed                        3.14 secs (  103.09 MPixel/sec)


 core/surfaces.c |  111 +++++++++-----------------------------------------------
 core/surfaces.h |    6 ---
 gfx/util.c      |    6 ---
 3 files changed, 20 insertions(+), 103 deletions(-)



commit 0031ed38aaa3079dc9648cc37489a7e842120699
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 16 02:11:27 2003 +0000

    Removed dfb_surface_destroy() from exported API. Destroy surfaces
    in the destructor only. Saves a skirmish and some code.


 gfxdrivers/nvidia/nvidia_overlay.c |    3 -
 src/core/gfxcard.h                 |    2 -
 src/core/surfaces.c                |   72 +++++++++----------------------------
 src/core/surfaces.h                |    9 ----
 4 files changed, 21 insertions(+), 65 deletions(-)



commit b602b630a2749a338dabcd6ffd2054bb7adfa3e3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 15 05:28:10 2003 +0000

    Wrote generic enum to string table conversion script used for key symbols,
    key identifiers and pixel formats.


 Makefile.am |   43 ++++++++++++++++---------------------------
 mknames.sh  |   30 ++++++++++++++++++++++++++++++
 2 files changed, 46 insertions(+), 27 deletions(-)



commit 4175cb431e34036df58414464efb308f640ff9f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 15 01:49:51 2003 +0000

    Added buffer mode changing.


 dfblayer.c |   89 +++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 78 insertions(+), 11 deletions(-)



commit 4a114eb6b92f3ecae88f421c9decd586d231e92c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 14 17:22:18 2003 +0000

    Added "dfblayer", a display layer configuration tool.
    
    Added generation of pixel format names into the new directfb_strings.h header.


 include/.cvsignore  |    1 
 include/Makefile.am |   17 ++
 tools/.cvsignore    |    1 
 tools/Makefile.am   |    9 -
 tools/dfblayer.c    |  337 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 361 insertions(+), 4 deletions(-)



commit 93e88d3ca68130bbf54a8c375253fa90bda685ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 14 16:18:02 2003 +0000

    Added DLCONF_NONE = 0.


 directfb.h |    1 +
 1 file changed, 1 insertion(+)



commit 7aa02fba8d0ed92e0016e62588cac69683fc1c1d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 14 15:19:55 2003 +0000

    Fixed "primary-layer" option for the master.


 directfb.c |    4 ++++
 1 file changed, 4 insertions(+)



commit b93ef403fb0387279c661aa43c1442bc5e1c48a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 13 22:26:17 2003 +0000

    Platform independent radeonWaitVSync() by Michel Dnzer <michel@daenzer.net>.


 radeon.c      |   44 ++++++++++++++++++++++++++++++++++++++++++++
 radeon_regs.h |    6 ++++++
 2 files changed, 50 insertions(+)



commit ef14c095e2af8824530bcc61534ea4f427da93d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 12 17:34:09 2003 +0000

    This is the initial version of a Radeon acceleration driver by
    Michel Dnzer <michel@daenzer.net>, great thanks!
    
    <quote>
    I've tested the driver on an M9 in a PowerBook and a Radeon 7200 in a
    Cube. It's based on the ati128 driver, but has only basic acceleration
    so far.
    </quote>


 AUTHORS                          |   11 
 README                           |    3 
 configure.in                     |   24 ++
 gfxdrivers/Makefile.am           |    7 
 gfxdrivers/radeon/.cvsignore     |    6 
 gfxdrivers/radeon/Makefile.am    |   22 +
 gfxdrivers/radeon/radeon.c       |  443 +++++++++++++++++++++++++++++++++++++++
 gfxdrivers/radeon/radeon.h       |   65 +++++
 gfxdrivers/radeon/radeon_mmio.h  |  109 +++++++++
 gfxdrivers/radeon/radeon_regs.h  |  117 ++++++++++
 gfxdrivers/radeon/radeon_state.c |  234 ++++++++++++++++++++
 gfxdrivers/radeon/radeon_state.h |   60 +++++
 12 files changed, 1094 insertions(+), 7 deletions(-)



commit 62f285f9e40991ca984e995654819ba7c0f2da37
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 11 20:24:43 2003 +0000

    Fixed "primary-layer" option for fullscreen applications.


 core/layers.c |   18 ++++++++++++++++++
 core/layers.h |    1 +
 directfb.c    |    2 +-
 idirectfb.c   |    2 +-
 4 files changed, 21 insertions(+), 2 deletions(-)



commit b9a943d05406e69078055a48664a459597af002c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 11 20:15:25 2003 +0000

    Added option "primary-layer=<id>":
    
    Selects which layer is the "primary layer", default is the first.
    Check 'dfbinfo' for a list of layers supported by your hardware.
    
    All fullscreen and windowed applications should run with this,
    for the application the first and the primary layer are swapped.


 docs/directfbrc.5.in                |    5 +++++
 src/core/layers.c                   |   20 ++++++++++++++++++++
 src/core/layers.h                   |    1 +
 src/display/idirectfbdisplaylayer.c |    2 +-
 src/idirectfb.c                     |    4 ++--
 src/misc/conf.c                     |   18 ++++++++++++++++++
 src/misc/conf.h                     |    3 +++
 7 files changed, 50 insertions(+), 3 deletions(-)



commit 2c99152e4f2b48b38421ce7f26d19da4fa9cc03b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 11 18:57:28 2003 +0000

    Fixed dead lock due to thread safetiness added recently.


 idirectfbvideoprovider_v4l.c |   57 +++++++++++++++++--------------------------
 1 file changed, 23 insertions(+), 34 deletions(-)



commit f92302138cc8726e1b877b680f4bb93df2ce7b80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 11 16:57:06 2003 +0000

    Made implementation thread safe.
    
    Fixes assertion when implicit (by surface listener) and explicit (by ::Stop())
    v4l_stop() calls are running simultaneously.


 idirectfbvideoprovider_v4l.c |   71 ++++++++++++++++++++++++++++---------------
 1 file changed, 47 insertions(+), 24 deletions(-)



commit 01d13bf2b53fb8dc8b1d74b448708e601e46d4e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 11 15:07:39 2003 +0000

    Don't handle enter/leave/focus while the builtin wm hack is active
    (e.g. during resize via <Meta>-<Ctrl> and mouse).


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 03e750905ebf6478524b8331e169bada0f9f7eb5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 10 17:37:30 2003 +0000

    Work around a bug in the DVB kernel driver (more likely) or the DVB hardware.
    When using buffers with a pitch much higher than the width suggests (e.g. using
    DSCAPS_STATIC_ALLOC and downsizing), the lower part of the video is cut off.
    
    -          b.width = surface->width;
    +          b.width = buffer->video.pitch / ((bpp + 7) / 8);


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 44cec7458b19ae60f2e3f66630cc85ec4d01e6ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 10 17:11:28 2003 +0000

    Stop the video playback if the size or format of the surface changed.
    
    Fixed dead lock between overlay thread and surface listener calling v4l_stop()
    by adding additional break points to the overlay thread. Only 99.999% safe,
    but the v4l code should be rewritten anyway.


 idirectfbvideoprovider_v4l.c |   46 +++++++++++++++++++++++++------------------
 1 file changed, 27 insertions(+), 19 deletions(-)



commit 676e3197fe73b8f6bab9587aa0018f872107cd5a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 10 09:36:53 2003 +0000

    Don't include "-ldl" if linking statically.


 directfb-config.in |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit 7ffbd9c84fc4a6d53f287016200a18d66d633f81
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 10 00:22:18 2003 +0000

    New patches.


 fusion-full-linux-2.4.20.patch.bz2 |binary
 fusion-full-linux-2.4.21.patch.bz2 |binary
 fusion-full-linux-2.5.71.patch.bz2 |binary
 3 files changed



commit d9843e7ae2518bc8e69d8acbef9f76647572a71a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 10 00:17:35 2003 +0000

    Drop bone collector threads completely, which have been three per session.
    
    Use new fusion_ref_watch() instead of creating a bone collector thread for each
    object pool where each thread polled all references ten times per second:
    
    1) Create a FusionCall in fusion_object_pool_create() with the pool being the
    call context pointer.
    
    2) Call fusion_ref_watch() in fusion_object_create() after increasing the
    reference counter to one. Specify the call created with the pool, pass the
    object id as the call argument.
    
    When the call handler is executed (in the pool owner's messaging thread) upon
    zero reference, it gets its pointer to the pool (call context) and the id of
    the object (call argument). The handler looks for this id and calls the object
    destructor if the id has been found and the reference counter is still zero.
    
    
    This has several advantages for single and multi app core:
    
    - Removed three threads from master (window, surface and palette pool).
    - No more polling of each object's reference counter ten times per second.
    - Objects are destructed nearly immediately (even a direct call in single app).
    - Less shutdown time (100-200 ms or more waiting for sleeping bone collectors).
    
    The same applies to FusionSound with two object pools (buffer and playback).
    
    
    Commented out debug message for key events.


 fusion/object.c |  247 ++++++++++++++++++++++++++++++--------------------------
 fusion/object.h |    2 
 fusion/ref.c    |   80 ++++++++++++++++++
 fusion/ref.h    |   23 +++--
 input.c         |    4 
 5 files changed, 234 insertions(+), 122 deletions(-)



commit 3cee608af1af0107e1d47268670558e23ff9f321
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 9 15:43:08 2003 +0000

    Added missing free of root data (allocated once per session).
    Moved shared memory leak dump into shared memory deinitialization to
    show leaks after the our last free, no leaks left ;)


 fusion.c            |    2 --
 shmalloc/shmalloc.c |    8 +++++++-
 2 files changed, 7 insertions(+), 3 deletions(-)



commit bfb471d66ac0d188a2aa14192a2388e0f854d219
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 9 15:14:57 2003 +0000

    Do not cancel the fusion read loop thread, but send ourself a message.


 fusion.c |   40 ++++++++++++++++++++++++++--------------
 1 file changed, 26 insertions(+), 14 deletions(-)



commit 718f76451604ca6a7d25059093fbde0d77daf856
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 9 14:59:09 2003 +0000

    fixed a typo


 dfbg.1.in |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 8ddbc32997b728307b1a4185e1733ec8d8378138
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 21:05:06 2003 +0000

    Fixed multiple free during destruction of the window stack (grabbed keys).


 windows.c |   18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)



commit 1415a628c01d2cffd7b9674e9bf192123b6144c0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 20:37:57 2003 +0000

    Added the same debugging facility for shared memory as for local memory.
    The master shows during shutdown which chunks in the shared memory are
    still allocated.


 core/clipboard.c                         |   18 -
 core/colorhash.c                         |    4 
 core/core_parts.c                        |    6 
 core/fbdev/fbdev.c                       |  148 ++++++-------
 core/fusion/arena.c                      |   24 +-
 core/fusion/fusion.c                     |    8 
 core/fusion/fusion_shmalloc.c            |  332 +++++++++++++++++++++++++++++--
 core/fusion/object.c                     |   16 -
 core/fusion/reactor.c                    |    6 
 core/fusion/shmalloc.h                   |   63 +++++
 core/fusion/shmalloc/shfree.c            |    9 
 core/fusion/shmalloc/shmalloc.c          |    2 
 core/fusion/shmalloc/shmalloc_internal.h |   21 +
 core/gfxcard.c                           |   14 -
 core/input.c                             |   10 
 core/layers.c                            |   12 -
 core/palette.c                           |    4 
 core/sdl/primary.c                       |    8 
 core/sdl/sdl.c                           |    6 
 core/surfacemanager.c                    |   16 -
 core/surfaces.c                          |   20 -
 core/windows.c                           |   24 +-
 misc/mem.c                               |   82 ++++---
 23 files changed, 600 insertions(+), 253 deletions(-)



commit 75d0bbe326639e275101a113b5ed7213b87d174a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 20:28:20 2003 +0000

    Fixed typo for single app.


 fusion.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 356521bf569414139db3d9ed9c6c83256276728e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 20:10:19 2003 +0000

    Removed invalid assertion.


 fusion.c |    4 ----
 1 file changed, 4 deletions(-)



commit b779d782d321bf4cb922efaa79dc7121a1889638
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 17:54:55 2003 +0000

    Use ERRORMSG instead of DEBUGMSG before sending SIGTRAP.


 mem.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 3d61a1b89664562a0c7bb9b5add5952c58d1e4f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 17:54:38 2003 +0000

    Added many assertions, most of them for the fusion file descriptor.


 call.c     |    7 ++++++-
 fusion.c   |   12 ++++++++++++
 lock.c     |    5 +++++
 property.c |   20 +++++++++++++++++++-
 reactor.c  |   13 ++++++++++++-
 ref.c      |    8 ++++++++
 6 files changed, 62 insertions(+), 3 deletions(-)



commit ec5b7967bb614dc81d31f50ee95c4e2996ba7c7e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 17:14:13 2003 +0000

    Removed obsolete prototype.


 input.h |    2 --
 1 file changed, 2 deletions(-)



commit 82cdf8f03ad44c0203b653d1040b0d3a6edb3219
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 16:55:30 2003 +0000

    Use dfb_memmove() and dfb_memcpy().


 core/fusion/shmalloc/shrealloc.c |    2 +-
 misc/mem.c                       |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 84935169e85b57bc10ae4892ec0d5b4a84e48cb4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 16:37:23 2003 +0000

    Cleaned up pixel conversion stuff.


 gfxdrivers/cyber5k/cyber5k.c                                        |    4 
 gfxdrivers/i810/i810.c                                              |    7 
 gfxdrivers/i810/i810_overlay.c                                      |    2 
 gfxdrivers/matrox/matrox_state.c                                    |    2 
 gfxdrivers/nsc/nsc.c                                                |    7 
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |   19 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    2 
 src/core/input.c                                                    |   41 +-
 src/core/sdl/primary.c                                              |    1 
 src/core/sdl/sdl.c                                                  |    2 
 src/core/system.c                                                   |    2 
 src/gfx/convert.c                                                   |  166 ---------
 src/gfx/convert.h                                                   |  173 +++-------
 src/gfx/generic/generic.c                                           |    2 
 src/idirectfb.c                                                     |    1 
 tools/directfb-csource.c                                            |    8 
 16 files changed, 116 insertions(+), 323 deletions(-)



commit 4f6663a446bb42617e395c7b7c9b8bb58f19890c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 15:37:04 2003 +0000

    Show number of bytes allocated for each chunk in final allocation debug output.
    
    We don't need PAGE_SIZE.
    
    Cleaned up some includes.


 include/directfb_internals.h |    2 ++
 inputdrivers/lirc/lirc.c     |    1 +
 src/core/fbdev/vt.c          |    5 +++--
 src/core/gfxcard.c           |    4 +++-
 src/core/modules.c           |    1 +
 src/misc/conf.c              |    2 +-
 src/misc/mem.c               |   34 ++++++++++++++++++++++++----------
 src/misc/mem.h               |   26 +++++---------------------
 8 files changed, 40 insertions(+), 35 deletions(-)



commit 976469d99c64a05aadd686c64964e064eb09a00f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 15:09:46 2003 +0000

    Use dfb_memcpy() everywhere.


 gfxdrivers/matrox/matrox_maven.c                               |    5 +-
 gfxdrivers/nsc/nsc_galfns.c                                    |   22 +++++-----
 inputdrivers/mutouch/mutouch.c                                 |    3 -
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c                           |    3 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |    3 -
 src/core/fbdev/fbdev.c                                         |    3 -
 src/core/fusion/shmalloc/shmalloc.c                            |    8 ++-
 src/core/fusion/shmalloc/shrealloc.c                           |    6 +-
 src/core/input.c                                               |    3 -
 src/core/layers.c                                              |    3 -
 src/core/surfacemanager.c                                      |   22 +++++-----
 src/core/surfaces.c                                            |    5 +-
 src/display/idirectfbpalette.c                                 |    4 +
 src/display/idirectfbsurface.c                                 |    4 +
 src/gfx/convert.c                                              |    2 
 src/gfx/convert.h                                              |    2 
 16 files changed, 59 insertions(+), 39 deletions(-)



commit 3d10bd92dd701a04336c88037ed3d4abc2ed8a55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 14:41:29 2003 +0000

    Documented clipping header.
    Use DFBBoolean instead of int.
    Use DFBEdgeFlags instead of unsigned int.
    Split up dfb_clip_rectangle() into dfb_clip_edges() and a simpler
    version still named dfb_clip_rectangle().


 core/gfxcard.c |   22 ++++++-------
 gfx/clip.c     |   94 +++++++++++++++++++++++++++++++++++++++------------------
 gfx/clip.h     |   55 +++++++++++++++++++++++++++++----
 3 files changed, 125 insertions(+), 46 deletions(-)



commit cd671a1f0793aad1c5cdf432c20a6abe61a03e54
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 8 13:48:26 2003 +0000

    Right patches now.


 fusion-full-linux-2.4.20.patch.bz2 |binary
 fusion-full-linux-2.4.21.patch.bz2 |binary
 fusion-full-linux-2.5.71.patch.bz2 |binary
 3 files changed



commit e2017f228fa55337c9612d1f2a432f692f2daa17
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 18:04:25 2003 +0000

    FusionCallHandler is always declared here, now.
    
    Update linux/fusion.h or get multiple definitions.


 patches/fusion-full-linux-2.4.20.patch.bz2 |binary
 patches/fusion-full-linux-2.4.21.patch.bz2 |binary
 patches/fusion-full-linux-2.5.71.patch.bz2 |binary
 src/core/fusion/call.c                     |   34 +++++------------------------
 src/core/fusion/call.h                     |    5 ----
 5 files changed, 6 insertions(+), 33 deletions(-)



commit 67ba3f518c778f64f2426b11fe6db8b1afe4b8c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 17:44:07 2003 +0000

    Made mutexes used by fake mode (single app) recursive.


 reactor.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit f3002fc75d18091d4b3e7d9cb967c86cc22d761f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 17:25:36 2003 +0000

    Further single/multi compatibility.


 core.c             |    2 +-
 fbdev/fbdev.c      |    6 ------
 fusion/Makefile.am |    4 +---
 fusion/fusion.c    |   32 ++++++++++++++++++++++++++++++--
 fusion/fusion.h    |   53 +++++++++++++++++++++--------------------------------
 sdl/sdl.c          |    6 ------
 6 files changed, 53 insertions(+), 50 deletions(-)



commit d1db40d82a3316591120c378ceaf3a2267641e63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 17:07:26 2003 +0000

    Forgot fusion_is_shared() in single app core.


 fusion_shmalloc.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 80b45479703a84ddf14a98c8f3e4d7d9b6e1774b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 16:37:53 2003 +0000

    Made single/multi app core binary compatible for drivers and other modules,
    in addition to the single/multi app binary compatibility for applications.
    Running a multi app libdirectfb with single app modules and vice versa is
    possible, now.


 b/src/core/fusion/Makefile.am                  |    4 
 b/src/core/fusion/fusion_shmalloc.c            |  101 +++++++++++++---------
 b/src/core/fusion/fusion_types.h               |    9 --
 b/src/core/fusion/lock.c                       |   54 ++++++------
 b/src/core/fusion/lock.h                       |   71 ++++++---------
 b/src/core/fusion/property.c                   |   46 +++++-----
 b/src/core/fusion/property.h                   |   20 +---
 b/src/core/fusion/ref.c                        |  111 +++++++++----------------
 b/src/core/fusion/ref.h                        |   20 +---
 b/src/core/fusion/shmalloc.h                   |   37 --------
 b/src/core/fusion/shmalloc/Makefile.am         |    5 -
 b/src/core/fusion/shmalloc/shmalloc_internal.h |    8 -
 b/src/core/fusion/shmalloc/shrealloc.c         |    2 
 b/src/core/gfxcard.h                           |    2 
 src/core/fusion/shmalloc/TODO                  |   20 ----
 src/core/fusion/shmalloc/mstats.c              |   62 -------------
 src/core/fusion/shmalloc/shmemalign.c          |   83 ------------------
 src/core/fusion/shmalloc/shvalloc.c            |   63 --------------
 18 files changed, 205 insertions(+), 513 deletions(-)



commit f4c1d67ef479952a702a0644bfb4824d58f16fb6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 14:50:31 2003 +0000

    First entry sounds nicer now.


 NEWS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f776a3b1e3850940c01af54654ad461b5d0d7672
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 14:48:16 2003 +0000

    Wrote summary for 0.9.19 which looks like a major multi app enhancement.


 ChangeLog | 4069 ++++++++++++++++++++++++++++++++++++--------------------------
 NEWS      |   21 
 2 files changed, 2445 insertions(+), 1645 deletions(-)



commit e07394060fba47f7a7b0209ffca46633ee94b4be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 7 13:24:02 2003 +0000

    Set DWOP_ALPHACHANNEL automatically upon window creation only for DSPF_ARGB.


 windows.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit a3ddb36051d2b450dfebeda71c77231cf0997ce3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 4 17:30:22 2003 +0000

    Added "moduledirname" to pc file which is "moduledir" without libdir.


 configure.in            |    6 ++++--
 directfb-internal.pc.in |    1 +
 2 files changed, 5 insertions(+), 2 deletions(-)



commit bec28d3924041b915795718091f5c2dc661f3803
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jul 4 12:49:23 2003 +0000

    respect --disable-sse and skip checks for SSE support


 configure.in |   22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)



commit 2cdd96d14ee5ffab10bc74847f776282488c4ae1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 16:36:13 2003 +0000

    Fixed many warnings produced using "-std=gnu99 -pedantic".


 inputdrivers/lirc/lirc.c                                            |    1 
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |    6 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c      |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c    |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |   16 -
 src/core/clipboard.c                                                |    2 
 src/core/colorhash.c                                                |    2 
 src/core/fbdev/fbdev.c                                              |    2 
 src/core/gfxcard.c                                                  |    4 
 src/core/gfxcard.h                                                  |    2 
 src/core/input.c                                                    |    4 
 src/core/layers.c                                                   |    4 
 src/core/sdl/primary.c                                              |    4 
 src/core/surfacemanager.h                                           |    2 
 src/core/surfaces.c                                                 |    2 
 src/core/system.c                                                   |    2 
 src/display/idirectfbsurface.c                                      |   22 -
 src/gfx/generic/generic.c                                           |  153 ++++------
 src/media/idirectfbfont.c                                           |    2 
 src/media/idirectfbimageprovider.h                                  |    4 
 src/misc/gfx_util.c                                                 |   29 -
 src/misc/mem.h                                                      |    3 
 src/misc/utf8.c                                                     |    4 
 src/misc/utf8.h                                                     |    2 
 src/misc/util.h                                                     |    8 
 tools/dfbsummon.c                                                   |    2 
 tools/directfb-csource.c                                            |    2 
 28 files changed, 149 insertions(+), 145 deletions(-)



commit e2bd9aef0b206016ada6701fa9ac6d35bfe2bb45
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 15:11:51 2003 +0000

    Reverted making a function static that really should be exported.


 primary.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a9698c2989d802508a96cb9e0ccc4aea7cbd9300
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 07:35:49 2003 +0000

    Added "-ffast-math".


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 97d178b9fa211e19bff30f30f654330fc47161ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 05:00:39 2003 +0000

    Avoid discarding qualifiers.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |   13 +++++++---
 tools/fusion_bench.c                                                |   12 +++++----
 2 files changed, 17 insertions(+), 8 deletions(-)



commit 7119afe4e809b57f2793abcf72ab9a8ecb887d49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 04:54:37 2003 +0000

    Removed option to disable RGB332 support, it has no impact anymore
    and having such a switch for one format only looks odd.


 configure.in                                                    |   11 --
 gfxdrivers/savage/savage4.c                                     |    4 
 gfxdrivers/savage/savage_streams_old.c                          |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    6 -
 src/core/fbdev/fbdev.c                                          |   13 --
 src/gfx/convert.c                                               |    2 
 src/gfx/generic/generic.c                                       |   49 ----------
 src/idirectfb.c                                                 |    2 
 src/misc/gfx_util.c                                             |    2 
 9 files changed, 1 insertion(+), 90 deletions(-)



commit c0c3c1b4d4e71a9d4ef597278a64bc4214db3e87
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 04:40:24 2003 +0000

    Added configure option "--enable-extra-warnings" adding:
    
    -W -Wno-sign-compare -Wno-unused-parameter -Wundef -Wcast-qual
    -Wcast-align -Waggregate-return -Wmissing-declarations -Winline
    
    
    Fixed tons of warnings, most of them were related to qualifiers,
    some were aggregate returns, some other...


 configure.in                                                        |   56 +++++-----
 gfxdrivers/ati128/mmio.h                                            |    2 
 gfxdrivers/cyber5k/cyber5k_overlay.c                                |   11 +
 gfxdrivers/cyber5k/mmio.h                                           |   18 +--
 gfxdrivers/matrox/mmio.h                                            |   35 ++----
 gfxdrivers/matrox/regs.h                                            |   16 +-
 gfxdrivers/nsc/include/nsc_galproto.h                               |    6 -
 gfxdrivers/nsc/nsc_galfns.c                                         |    8 -
 gfxdrivers/nvidia/nvidia.c                                          |   28 ++---
 gfxdrivers/nvidia/nvidia_overlay.c                                  |    2 
 gfxdrivers/savage/savage.c                                          |    2 
 gfxdrivers/savage/savage3d.c                                        |    2 
 gfxdrivers/tdfx/tdfx.c                                              |    5 
 include/directfb.h                                                  |    4 
 inputdrivers/joystick/joystick.c                                    |   13 --
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c      |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    4 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |   22 +--
 src/Makefile.am                                                     |    2 
 src/core/core_system.h                                              |    5 
 src/core/fbdev/fbdev.c                                              |    2 
 src/core/fbdev/vt.c                                                 |    7 -
 src/core/fusion/fusion_shmalloc.c                                   |    8 -
 src/core/fusion/shmalloc.h                                          |    2 
 src/core/fusion/shmalloc/mstats.c                                   |   21 +--
 src/core/fusion/shmalloc/shcalloc.c                                 |    1 
 src/core/fusion/shmalloc/shfree.c                                   |    1 
 src/core/fusion/shmalloc/shmalloc.c                                 |    9 -
 src/core/fusion/shmalloc/shmalloc_internal.h                        |    7 -
 src/core/fusion/shmalloc/shmemalign.c                               |    1 
 src/core/fusion/shmalloc/shrealloc.c                                |    1 
 src/core/fusion/shmalloc/shvalloc.c                                 |    1 
 src/core/gfxcard.c                                                  |    6 -
 src/core/gfxcard.h                                                  |   16 +-
 src/core/graphics_driver.h                                          |    5 
 src/core/input.c                                                    |   20 +--
 src/core/input.h                                                    |    6 -
 src/core/input_driver.h                                             |   15 +-
 src/core/layers.c                                                   |   20 +--
 src/core/sdl/primary.c                                              |    2 
 src/core/state.c                                                    |    8 -
 src/core/surfaces.c                                                 |    4 
 src/core/system.c                                                   |   16 +-
 src/core/system.h                                                   |   10 -
 src/core/windows.c                                                  |    6 -
 src/directfb.c                                                      |    4 
 src/display/idirectfbsurface.c                                      |    8 -
 src/idirectfb.c                                                     |    6 -
 src/input/idirectfbinputbuffer.c                                    |    8 -
 src/input/idirectfbinputdevice.c                                    |    8 -
 src/interface_implementation.h                                      |    6 -
 src/media/idirectfbdatabuffer_file.c                                |    3 
 src/media/idirectfbdatabuffer_memory.c                              |    3 
 src/misc/memcpy.c                                                   |    7 -
 src/misc/utf8.h                                                     |    4 
 src/windows/idirectfbwindow.c                                       |    4 
 tools/directfb-csource.c                                            |    2 
 tools/fusion_bench.c                                                |    2 
 58 files changed, 243 insertions(+), 260 deletions(-)



commit 61af1ed23be541abfd94c5e826bb1ae3796b1111
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 02:13:38 2003 +0000

    Don't discard qualifier in cast.


 memcpy.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c7cb0d6c89dd55fd5ac796b331132c07a6d672cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 2 00:15:02 2003 +0000

    Destroy CoreThread structure after joining.


 object.c |    1 +
 1 file changed, 1 insertion(+)



commit c98305f3bc3cf66148d7d3514b95aded71ee0819
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 19:48:02 2003 +0000

    On <Meta>-X do not only switch the focus but also leave the window under
    the cursor if it's not the focused one. This is the behaviour of RequestFocus()
    and causes the focus to return to the window under the cursor on any cursor
    move or window resize.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8b9de1d286d6b83f88c2ab759146b327a31837b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 19:40:07 2003 +0000

    Simplified forward declaration macro for interfaces.


 directfb.h |    1 -
 1 file changed, 1 deletion(-)



commit e85c552ce04c14313b56952f0887fbb2ae955905
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 04:39:44 2003 +0000

    Honor opaque region even if opacity is < 0xff or color keying is used
    (just turn off alpha channel blend for that region but keep other things).


 windows.c |  129 +++++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 77 insertions(+), 52 deletions(-)



commit 8dc875c6cd540f9266dbc11afaa09dad87fe3511
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 02:54:10 2003 +0000

    Do not probe graphics drivers as a slave, but load the running one.


 gfxcard.c |   49 +++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 47 insertions(+), 2 deletions(-)



commit 1557811458c0156dcd30696553f37a0380fb3f79
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 01:58:38 2003 +0000

    IDirectAudio -> IFusionSound


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1fe6d2b1eb039780713a3de5b22921f38d23b038
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 01:01:35 2003 +0000

    Added "tmpfs" option.


 README                              |    7 ++++--
 docs/directfbrc.5.in                |    7 ++++++
 src/core/fusion/shmalloc/shmalloc.c |   42 ++++++++++++++++++++++--------------
 src/misc/conf.c                     |   13 +++++++++++
 src/misc/conf.h                     |    2 +
 5 files changed, 53 insertions(+), 18 deletions(-)



commit 734802002d1f1b2b7aead9ba78cfed98e2c301e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 1 00:31:32 2003 +0000

    Reject tmpfs mount points with less than 4 MB of free space.


 fusion.c            |   10 ++++++----
 shmalloc/shmalloc.c |   47 +++++++++++++++++++++++++++++++----------------
 2 files changed, 37 insertions(+), 20 deletions(-)



commit b442a1603099e08716399f3d894d6eb8c3c04cbf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 30 23:54:22 2003 +0000

    Moved all global variables of the software driver to a new struct called
    GenefxState. Genefx (pron. 'genie facts') is the new name for the virtual
    GPU being emulated.
    
    For each CardState a GenefxState is allocated the first time the software
    driver is used with this state. It gets freed when the CardState is destroyed.
    
    Removed global software driver mutex, doubles software driver performance
    when multiple threads are rendering on an SMP machine.
    
    The pipeline parts are called GenefxFunc instead GFunc now. These functions
    get a pointer to a GenefxState now. Nothing else outside is referenced.
    
    Surprisingly or not, the software only got faster though much dereferencing
    of GenefxState pointers is done. I guess removing the mutex and avoiding
    the global offset table made it faster.
    
    FillRectangle(1x1) throughput got increased by ~16% on my P3 800 E.
    
    This change was necessary to modularize pixel formats.


 core/fonts.c              |    5 
 core/fonts.h              |   20 
 core/gfxcard.c            |   24 
 core/layers.c             |    2 
 core/state.c              |   26 
 core/state.h              |   34 
 gfx/generic/generic.c     | 1808 +++++++++++++++++++++++-----------------------
 gfx/generic/generic.h     |   94 ++
 gfx/generic/generic_mmx.h |   51 -
 9 files changed, 1116 insertions(+), 948 deletions(-)



commit 51f88eca40a0736b544cfd975b0634eb50d54619
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 30 16:44:33 2003 +0000

    Fixed patches.


 fusion-full-linux-2.4.20.patch.bz2 |binary
 fusion-full-linux-2.4.21.patch.bz2 |binary
 fusion-full-linux-2.5.71.patch.bz2 |binary
 3 files changed



commit 19a8cbbc323f2537ef467d4eaecb297e364f80b8
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Jun 27 22:25:06 2003 +0000

    cleanups for cvs debian packages, removed udeb stuff


 b/debian/changelog                        |  161 ------------------------------
 b/debian/control                          |   35 ------
 b/debian/libdirectfb-cvs.dirs             |    1 
 b/debian/libdirectfb-cvs.files            |    3 
 b/debian/rules                            |  126 ++---------------------
 debian/libdirectfb-0.9-18cvs-udeb.dirs    |    2 
 debian/libdirectfb-0.9-18cvs.dirs         |    1 
 debian/libdirectfb-0.9-18cvs.files        |    3 
 debian/libdirectfb-udeb-dev.README.Debian |   19 ---
 debian/libdirectfb-udeb-dev.dirs          |    1 
 debian/libdirectfb-udeb-dev.shlibs        |    1 
 debian/libdirectfb-udeb.dirs              |    1 
 12 files changed, 21 insertions(+), 333 deletions(-)



commit 2b63a3b8a60f138739e8c89ae1a6ab9cd3a56170
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 20:40:33 2003 +0000

    Handle enter/leave/focus if a window is resized.


 windows.c |    2 ++
 1 file changed, 2 insertions(+)



commit 9de75b23b9cec2df1d593bce05e50fd4f56d9a2b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 19:44:29 2003 +0000

    Don't focus the window under the cursor when releasing caps-lock or meta.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 074712388568fe3b8225de34a1408b2d8e9df62c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 17:19:46 2003 +0000

    Added timestamp to window events.


 include/directfb.h |    2 ++
 src/core/windows.c |    2 ++
 2 files changed, 4 insertions(+)



commit 7a818974ae41b46a305ae308ede8eaf880832afa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 14:28:49 2003 +0000

    #define _GNU_SOURCE


 raw15toraw24.c |    2 ++
 raw16toraw24.c |    2 ++
 raw32toraw24.c |    2 ++
 3 files changed, 6 insertions(+)



commit f37ad7a97be2971bc262b9a8b51fc7ab9a660c6a
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 27 13:46:51 2003 +0000

    cleaned up include order


 raw15toraw24.c |    9 +++++----
 raw16toraw24.c |    9 +++++----
 raw32toraw24.c |   11 ++++++-----
 3 files changed, 16 insertions(+), 13 deletions(-)



commit 274695f487a9a87709093010ec64d8fb2cc43234
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 13:11:23 2003 +0000

    Added 720x576 50Hz.


 fb.modes |    4 ++++
 1 file changed, 4 insertions(+)



commit 71f13cb17d8c82a876f890ad2292dde4d5d96e68
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 12:36:45 2003 +0000

    Fixed -Werror-implicit-function-declaration[s] <- removed this character


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 065e83f29fae9e0966f0dedd7acf8c5b6d982272
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 27 11:15:56 2003 +0000

    Added "-lm".


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 51f316eb6cb6182bd5160ce6a607d7d9a1f27e15
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 26 15:48:15 2003 +0000

    Made fusion debug/error messages look like DirectFB's again.


 fusion_internal.h |   24 ++++++++++++++----------
 1 file changed, 14 insertions(+), 10 deletions(-)



commit 19d8455284d2416faf96daec35503f3d81b20e3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 26 13:49:43 2003 +0000

    Added DFB_BUFFERTOOLARGE.


 include/directfb.h |    3 ++-
 src/directfb.c     |    2 ++
 2 files changed, 4 insertions(+), 1 deletion(-)



commit 1d0e29c6481811281fa87403b490245b51da17e7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 25 13:30:57 2003 +0000

    Fixed static gif provider linking if specified as lowercase.


 directfb-config.in |    3 +++
 1 file changed, 3 insertions(+)



commit 6cac8fb729f8e12610d0ba41b25a36bc0d718ba1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 25 13:10:30 2003 +0000

    Fixed static-only builds with -j2 or higher.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8e4fb0c0f6d54084fc1aaf6ddf7d5bec04b1f5c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 24 14:41:12 2003 +0000

    Don't cancel the v4l thread, but just indicate it should stop after this frame.
    
    This avoids dead locks caused when the thread is canceled while it's calling
    the frame callback.


 idirectfbvideoprovider_v4l.c |   33 +++++++++++++++++++++++----------
 1 file changed, 23 insertions(+), 10 deletions(-)



commit 7d390bf0f73d15fa47a9af4e9cb0af628ee4c374
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 20 10:42:54 2003 +0000

    Changed James Su's email address to suzhe@turbolinux.com.cn.


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c7ba3c60b803dfecc3fb51485aeb96400907a101
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 19 19:08:56 2003 +0000

    Added "fake arena" for single app builds of DirectFBGL and DirectAudio.


 core.c             |    2 +
 fusion/Makefile.am |    2 -
 fusion/arena.c     |   78 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 fusion/arena.h     |    4 --
 fusion/fusion.h    |    2 +
 5 files changed, 83 insertions(+), 5 deletions(-)



commit 47b6160ee4d39249ba09788c915d9c38378f5c5e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 18 15:08:26 2003 +0000

    If fusion_arena_exit() is called without a pointer to a leave method,
    it refuses to leave the arena and return an error instead.
    This way a master can wait for slaves to leave before shutting down.


 arena.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit a70e3123c09e731071b6e82f36a768f1a549690c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 18 14:05:56 2003 +0000

    Added dfb_get_micros().


 util.c |   11 ++++++++---
 util.h |    3 +++
 2 files changed, 11 insertions(+), 3 deletions(-)



commit 1efc92da25a2f446b5537bea4b67b9b9458e26e2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 18 10:45:39 2003 +0000

    Added IDirectFB::GetInterface() that loads interface modules not starting with
    "IDirectFB". This is a preliminary way of loading extensions and other Fusion
    based libraries, e.g. "IDirectAudio" offering another bunch of new interfaces.
    
    Removed "object methods" fusion_object_ref(), _unref(), _link(), _unlink(),
    _attach(), _detach(), _attach_global(), detach_global() and _dispatch().
    
    Added an "object methods" template macro using a special object type and
    method prefix, e.g. "dfb_surface_ref( CoreSurface *object )" etc.
    
    Replaced "object methods" dfb_surface_*, dfb_window_* and dfb_palette_* by
    FUSION_OBJECT_METHODS(CoreSurface, dfb_surface) etc.
    
    Added fusion_list_foreach_safe() acting like fusion_list_foreach()
    but allowing to remove or free the current element.


 include/directfb.h               |   26 +++++++++
 include/directfb_internals.h     |    4 -
 src/core/fusion/list.h           |    8 ++
 src/core/fusion/object.c         |   74 --------------------------
 src/core/fusion/object.h         |  110 +++++++++++++++++++++++++++++----------
 src/core/gfxcard.c               |   17 ++++--
 src/core/palette.c               |    6 --
 src/core/palette.h               |   69 +-----------------------
 src/core/surfaces.c              |    3 -
 src/core/surfaces.h              |   70 ++----------------------
 src/core/windows.c               |   40 +++++++-------
 src/core/windows.h               |   52 ++----------------
 src/idirectfb.c                  |   38 +++++++++++++
 src/input/idirectfbinputbuffer.c |    4 -
 src/input/idirectfbinputdevice.c |    4 -
 src/interface.c                  |    4 -
 src/windows/idirectfbwindow.c    |    6 +-
 17 files changed, 221 insertions(+), 314 deletions(-)



commit a9f66e8ffc7dc04c0d8e3704ad285eb9d3a93a0c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 17 15:05:36 2003 +0000

    Added window manager key 'E' to focus the window under the mouse cursor.
    
    Useful in this situation:
    - Have an X11 window under the cursor.
    - Have a DFBTerm on top of the X11 window.
    - Switch to the DFBTerm via <Meta>-X.
    - Switch back to the X11 window via <Meta>-E instead of abandoning (lower)
      the DFBTerm via <Meta>-A or moving the mouse out of and back into the
      X11 window.


 README             |    2 ++
 src/core/windows.c |    5 +++++
 2 files changed, 7 insertions(+)



commit 3e4bf767e2153dfbb7fdf9fa71aa9b971d936180
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 16 21:33:12 2003 +0000

    Don't fill background of primary layer with the background color if a
    background image is loaded anyways. Nicer startup of new sessions with bg-image.
    
    Display session uptime in dfbdump.


 src/core/windows.c |    5 +++--
 tools/dfbdump.c    |   34 ++++++++++++++++++++++++++++++++++
 2 files changed, 37 insertions(+), 2 deletions(-)



commit 3de42c762771012049b4b98fa97577dfe8523307
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 16 20:03:38 2003 +0000

    Automatically unset SDL_VIDEODRIVER if it's "directfb",
    which doesn't work if DirectFB is running on SDL itself.


 sdl.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit 7c8e91812940c7b0605deb880a37bff9eae43af5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 16 19:21:05 2003 +0000

    Fixed "make clean" if man2html is not present.


 Makefile.am |    6 ++++++
 1 file changed, 6 insertions(+)



commit 8400a00da3ee848115888245d0fef78fb19f5cc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 16 17:50:33 2003 +0000

    Updated, too.


 README.fusion |   28 ++++++++++++++++++----------
 1 file changed, 18 insertions(+), 10 deletions(-)



commit 39dae2efce95e3683a85a7d2948ecd0ffe9e3248
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 16 17:47:05 2003 +0000

    Added support for multiple multi application worlds.
    
    Added option "session=<num>":
    Selects the multi application world which is joined or created.
    Starting with zero, negative values force creation of a new
    world using the lowest unused session number. This will override
    the environment variable "DIRECTFB_SESSION".
    
    Shared memory initialization looking for "tmpfs" looks for "shmfs", too, now.


 /dev/null                                      |binary
 b/TODO                                         |    1 
 b/docs/directfbrc.5.in                         |    7 +++
 b/patches/Makefile.am                          |    5 +-
 b/patches/fusion-full-linux-2.4.20.patch.bz2   |binary
 b/patches/fusion-full-linux-2.4.21.patch.bz2   |binary
 b/patches/fusion-full-linux-2.5.71.patch.bz2   |binary
 b/src/core/core.c                              |   20 +++++++---
 b/src/core/fusion/fusion.c                     |   48 ++++++++++++++++++++-----
 b/src/core/fusion/fusion.h                     |    4 +-
 b/src/core/fusion/shmalloc/shmalloc.c          |   32 +++++++++-------
 b/src/core/fusion/shmalloc/shmalloc_internal.h |    2 -
 b/src/misc/conf.c                              |   26 +++++++++++++
 b/src/misc/conf.h                              |    2 +
 b/tools/fusion_bench.c                         |    2 -
 15 files changed, 112 insertions(+), 37 deletions(-)



commit 57523553df09eadb177da0d3b8c696f02b4ae0ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 12 20:01:16 2003 +0000

    Lock surface manager before software driver lock to avoid dead locks
    when gAcquire() is entered with the surface manager lock already held,
    e.g. each dfb_back_to_front_copy().


 generic.c |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)



commit 02c63c94b91dd4a714f74df730c8b3fd6821386b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 12 18:23:39 2003 +0000

    Don't ungrab explicitly grabbed keys of a window when its opacity gets zero.


 windows.c |   38 +++++++++++++++++++-------------------
 1 file changed, 19 insertions(+), 19 deletions(-)



commit 01b41de31054a58f4d5e9ac89ab45deee06e2e96
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 12 15:40:58 2003 +0000

    Added note about font sharing and run time single/multi app core selection.


 TODO |    4 ++++
 1 file changed, 4 insertions(+)



commit b07d99b86e5b7b44005fe810014ab221a4aa0eb6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 12 13:44:48 2003 +0000

    Don't switch cursor on during close of keyboard device, but during shutdown.
    
    This results in better looking VT switching.


 inputdrivers/keyboard/keyboard.c |    5 -----
 src/core/fbdev/vt.c              |    6 ++++++
 2 files changed, 6 insertions(+), 5 deletions(-)



commit 1934c853ec9cdf2146f1046f38f50a552e708f89
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 21:55:29 2003 +0000

    Print a warning when a video only buffer is locked by software during suspend.
    
    Call dfb_surfacemanager_assure_video() in dfb_surface_hardware_lock() for
    video only surfaces, too. To have it fail during suspend.


 surfaces.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 4572ea45a16ea42a8535cabaf1d86a74d7bbdfb9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 20:53:58 2003 +0000

    Got rid off global variables exported by modules (dfb_fbdev, dfb_vt, dfb_sdl).


 TODO                             |    2 -
 gfxdrivers/matrox/matrox_crtc2.c |    1 
 gfxdrivers/nsc/nsc_galfns.c      |    5 +++-
 inputdrivers/keyboard/keyboard.c |   47 +++++++++++++++++++++------------------
 src/core/core_system.h           |    4 +--
 src/core/fbdev/fbdev.c           |   17 ++++++++------
 src/core/fbdev/fbdev.h           |    6 +++-
 src/core/fbdev/vt.c              |    8 ++++--
 src/core/fbdev/vt.h              |    2 -
 src/core/modules.c               |    2 -
 src/core/sdl/primary.c           |    1 
 src/core/sdl/sdl.c               |    8 ++++--
 src/core/sdl/sdl.h               |    2 -
 src/core/sdl/sdlinput.c          |    8 ++++--
 src/core/system.c                |   13 +++++++++-
 src/core/system.h                |    9 ++++---
 16 files changed, 84 insertions(+), 51 deletions(-)



commit 26e65b865faba5e7b3231720ae101b2e6f7013db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 20:03:47 2003 +0000

    Updated modification time.


 dfbg.1.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b729cecd32d1ce2cfebaf6a3bd83b492f96ce751
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 20:00:15 2003 +0000

    Updated dfbg man page and usage information printing.
    
    Changed default background color.


 docs/dfbg.1.in  |   24 +++++++++++++++++++-----
 src/misc/conf.c |    6 +++---
 tools/dfbg.c    |   14 +++++++-------
 3 files changed, 29 insertions(+), 15 deletions(-)



commit 98cda8f84369b6170d3c9e9ad5cef957320ea55a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 18:45:15 2003 +0000

    Must implement switching support during exclusive access to a layer.


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit 5085ccbbd766a0811c407e1b13c1c36ba321f95f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 18:36:52 2003 +0000

    Do not restore auto-video buffers while DirectFB is suspended.


 surfacemanager.c |    3 +++
 1 file changed, 3 insertions(+)



commit 5f40d6b8ee99ab51ecd41f49e18e08b8181cdd71
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 18:07:38 2003 +0000

    Bumped version number to 0.9.19.
    
    Core systems (currently FBDev and SDL) are no longer builtin modules by default.
    
    Generate html versions of the man pages if man2html is present.
    
    Fixed bug message during deinitialization if prior initialization failed.


 TODO                       |    2 
 configure.in               |    7 ++-
 directfb-config.in         |    2 
 docs/.cvsignore            |    3 +
 docs/Makefile.am           |   16 +++++++
 src/Makefile.am            |    2 
 src/core/Makefile.am       |    8 ---
 src/core/core.c            |   63 +++++++++++++++++----------
 src/core/fbdev/Makefile.am |   13 ++++-
 src/core/fusion/arena.c    |  102 ++++++++++++++++++++++-----------------------
 src/core/input.c           |    7 +++
 src/core/modules.c         |    7 ++-
 src/core/sdl/Makefile.am   |   25 +++++++++--
 src/core/system.c          |    2 
 14 files changed, 166 insertions(+), 93 deletions(-)



commit 7cb87ee73b38ada2e2fce0e71fc3fb78b322cae1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 13:46:32 2003 +0000

    Minor change.


 TODO |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 2108f9e516c2bf1b9cf773e43575d180db53212e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 13:44:11 2003 +0000

    Major update.


 TODO |   30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)



commit bbea70f6ad204a6ee92b7edc4e9b7da68737e65a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 11 12:56:16 2003 +0000

    Made size of duffs device configurable (2, 4, 8 or 16), kept default of 8.
    
    Implemented last missing one of five key event fixup cases.


 core/input.c          |   47 +++++++++++++++++++++++++++++++++----
 gfx/generic/generic.c |   62 +++++++++++++++++++++++++++++++++++++++-----------
 2 files changed, 91 insertions(+), 18 deletions(-)



commit ededb0cbd83435a1bea3d11fd0e5b22a780efcd9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 10 20:10:24 2003 +0000

    Pressed modifier keys are now released during switch from DirectFB.
    
    VT switching with XDirectFB plus native applications seems to work fine,
    though XDirectFB may continue writing to the video memory.
    
    Implemented key code & symbol lookup from key identifier for devices with a map.


 input.c |  105 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 104 insertions(+), 1 deletion(-)



commit f3291be5e2c24a4f0975d45cd5730efeea7c64a7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 10 18:19:34 2003 +0000

    First working version of vt switching support for single and multi
    application core.
    
    Still unhandled are video only surfaces and other buffers stick to
    video memory due to locking.
    
    Try (with --dfb:vt-switching)
    - start df_window as the master
    - switch to the previous console by pressing <Ctrl>-<Alt>-<Fn>
    - start df_andi
    - switch back to the DirectFB console
    - you see df_window again with df_andi running in a window (due to vt switch)
    
    Applications are not blocked at any time during "switch off".
    So in the example above df_andi consumes all of your CPU rendering
    to the window back buffer (in system memory) with the software driver.
    
    I haven't tried XDirectFB, yet. Will do so now. Most probably the permanent
    locking of the window surfaces causes a problem.


 core.c           |   22 +++-----
 core_system.h    |    5 +
 fbdev/fbdev.c    |   26 +++++++++
 fbdev/vt.c       |  145 ++++++++++++++++++++++++++++++++++++++++++++++++++-----
 fbdev/vt.h       |    8 +++
 gfxcard.c        |    4 +
 input.c          |   51 ++++++++++++++-----
 layers.c         |   54 ++++++++++++++++----
 sdl/sdl.c        |    7 ++
 surfacemanager.c |   14 ++++-
 system.c         |    9 +++
 system.h         |   12 ++++
 windows.c        |    9 ++-
 13 files changed, 311 insertions(+), 55 deletions(-)



commit ca7e36f8e9e1ea581c1b1fe9cf4a563e5e1b06c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 5 14:51:45 2003 +0000

    Applied fix by J.P. Delport <jpdelport@csir.co.za>:
    
    Replace hardcoded default size of 768x576 by the values queried earlier
    from the capture driver.


 README                                                         |    1 +
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    4 ++--
 2 files changed, 3 insertions(+), 2 deletions(-)



commit 5cef9f3ab4b327f9663cc1de04cbbb5ad5f849dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 4 19:09:39 2003 +0000

    Before shutdown the master now sends a SIGTERM to all slaves with a timeout
    of 5 seconds, after that it sends SIGKILL.
    
    It looks cool quitting X (my master) while having several DFBTerms still
    running. The terminals disappear one after the other before shutdown.
    
    To use this feature you must update Fusion including the header,
    otherwise the feature will be silently disabled. This automation will
    be removed before the next release, forcing an update then.
    
    It uses this new function (intermediate solution):
    
    FusionResult fusion_kill( int fusion_id, int signal, int timeout_ms );
    
    Sends a signal to one or more fusionees and optionally waits
    for their processes to terminate.
    
    A fusion_id of zero means all fusionees but the calling one.
    A timeout of zero means infinite waiting while a negative value
    means no waiting at all.


 core.c                |    7 ++++++-
 fusion/fusion.c       |   28 ++++++++++++++++++++++++++++
 fusion/fusion.h       |   10 ++++++++++
 fusion/fusion_types.h |    5 ++---
 4 files changed, 46 insertions(+), 4 deletions(-)



commit d3cf68f75bff721df78a4a295e213f26b2e59158
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 4 16:03:53 2003 +0000

    Fixed error checking at the end of fusion_read_loop().


 fusion.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)



commit 5319d9e9818ac11dc5d108d6aa1d644f0c7f024a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 4 14:42:47 2003 +0000

    Move "--libs" output to the end, fixes undefined references in static build.


 directfb-config.in |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit 8f4ebc6f579785a2a5e6212a7ba22a5acee7f3f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 4 14:10:46 2003 +0000

    Use one cpuid macro for both PIC and non-PIC.


 cpu_accel.c |  201 ++++++++++++++++++++++++++++--------------------------------
 1 file changed, 96 insertions(+), 105 deletions(-)



commit 3fe59c16a2ea2cf08c8cf6264e740f727bcd61d3
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 3 00:13:01 2003 +0000

    Everyone seems to be starting the Description field with an upper-case
    letter, now we do so as well.


 directfb.pc.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ae0fb423a41814a5bd28620231c8a59541d065e2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 17:13:59 2003 +0000

    EXTRA_DIST fixes, updated patches.


 Makefile.am                                     |    1 -
 docs/Makefile.am                                |    1 +
 patches/Makefile.am                             |    3 ++-
 patches/fusion-full-linux-2.4.16.patch.bz2      |binary
 patches/fusion-full-linux-2.4.20.patch.bz2      |binary
 patches/fusion-full-linux-2.4.21-pre7.patch.bz2 |binary
 patches/fusion-full-linux-2.5.66.patch.bz2      |binary
 7 files changed, 3 insertions(+), 2 deletions(-)



commit 500f538aea1769a1077ff1126245d4ac9d077c5f
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jun 2 17:11:21 2003 +0000

    fix compilation on ppc


 memcpy.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b59c635fcdc1242c3dbed85a3cf4362d9fc1fba7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 16:58:41 2003 +0000

    Updated for 0.9.18 ;)


 ChangeLog | 1320 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   52 ++
 2 files changed, 1372 insertions(+)



commit e75e23cbe0cca617e1fef732009b62ebefb39e8f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 15:33:52 2003 +0000

    Major namespace/static cleanup.


 gfxdrivers/nsc/nsc_galfns.c         |    8 +-
 src/core/clipboard.c                |   18 +++---
 src/core/colorhash.c                |    8 +-
 src/core/core.c                     |    6 +-
 src/core/core_parts.c               |    4 -
 src/core/fbdev/fbdev.c              |    4 -
 src/core/fusion/arena.c             |   86 ++++++++++++++++--------------
 src/core/fusion/arena.h             |   42 +++++++--------
 src/core/fusion/fusion.c            |    8 +-
 src/core/fusion/fusion_internal.h   |    4 -
 src/core/fusion/fusion_shmalloc.c   |   32 +++++------
 src/core/fusion/lock.c              |   12 ++--
 src/core/fusion/lock.h              |   20 +++----
 src/core/fusion/object.c            |   34 ++++++------
 src/core/fusion/reactor.c           |  100 ++++++++++++++++++------------------
 src/core/fusion/reactor.h           |   36 ++++++------
 src/core/fusion/shmalloc/shmalloc.c |   14 ++---
 src/core/input.c                    |   16 ++---
 src/core/sdl/primary.c              |   20 +++----
 src/core/sdl/sdl.c                  |   10 +--
 src/core/sdl/sdlinput.c             |   14 ++---
 src/core/surfacemanager.c           |    8 +-
 src/core/surfaces.c                 |   90 ++++++++++++++++----------------
 src/core/windows.c                  |    8 +-
 src/gfx/util.c                      |    8 +-
 src/misc/ppcasm_memcpy.S            |    4 -
 src/misc/ppcasm_memcpy.h            |    4 -
 src/misc/ppcasm_memcpy_cachable.S   |    4 -
 tools/dfbdump.c                     |    4 -
 tools/fusion_bench.c                |   38 ++++++-------
 30 files changed, 335 insertions(+), 329 deletions(-)



commit 7721709cdba1a65b3c25e6feed7b3c7c561372f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 15:08:18 2003 +0000

    Fixed namespace for global "pfuncs" and "pdriver_data".


 savage4.c            |    2 +-
 savage_streams_old.c |   13 +++++++------
 savage_streams_old.h |    8 ++++----
 3 files changed, 12 insertions(+), 11 deletions(-)



commit af378d81577e40e8e058b620f70ab3447f4dee6f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:47:32 2003 +0000

    Underscores for "fusion_shared".


 arena.c           |   24 ++++++++++++------------
 fusion.c          |   20 ++++++++++----------
 fusion_internal.h |    2 +-
 3 files changed, 23 insertions(+), 23 deletions(-)



commit e03726f5e8f3c27284e81377297e7881761e1d5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:44:51 2003 +0000

    Added underscores to internal global variables fusion_id and fusion_fd.


 call.c                       |   14 ++++++-------
 fusion.c                     |   44 +++++++++++++++++++++----------------------
 fusion_internal.h            |    4 +--
 lock.c                       |   10 ++++-----
 property.c                   |   12 +++++------
 reactor.c                    |   14 ++++++-------
 ref.c                        |   16 +++++++--------
 shmalloc/shmalloc.c          |    2 -
 shmalloc/shmalloc_internal.h |    4 ++-
 9 files changed, 61 insertions(+), 59 deletions(-)



commit 29c98be5225d8b0a57cf0276dc259e9dddffcf18
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:43:12 2003 +0000

    Made remaining items (GFunc arrays) static.


 generic.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 7dbfeacf6f00566f07df2e6686ed712f69944012
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:42:12 2003 +0000

    Renamed global variable "mmio_base" to "cyber_mmio", should be fixed anyway.


 cyber5k.c         |    4 -
 cyber5k.h         |    2 
 cyber5k_alpha.c   |  196 +++++++++++++++++++++++++++---------------------------
 cyber5k_overlay.c |   64 ++++++++---------
 mmio.h            |   34 ++++-----
 5 files changed, 148 insertions(+), 152 deletions(-)



commit 6a3c0285927b91c01af83ac44ac8730b7b583f24
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:19:36 2003 +0000

    Everything static.


 ucb1x00_ts.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 66884830cf4bc767ee33b6ee66d0602f453efaf4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 14:18:57 2003 +0000

    MMX routines are included now as a header.
    
    No global variables anymore.


 b/src/gfx/generic/Makefile.am   |    9 
 b/src/gfx/generic/generic.c     |   63 +----
 b/src/gfx/generic/generic.h     |    4 
 b/src/gfx/generic/generic_mmx.h |  428 ++++++++++++++++++++++++++++++++++++++
 src/gfx/generic/generic_mmx.c   |  445 ----------------------------------------
 5 files changed, 448 insertions(+), 501 deletions(-)



commit e9604f0f30bc469b3ab72a2c2a0718a414ae2bb7
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jun 2 12:17:35 2003 +0000

    - fixed state handling
    - version = 0.2


 ati128.c       |   76 +++++++++++++++++++++++++++++++++++++++------------------
 ati128.h       |    8 ++++++
 ati128_state.c |   50 +++++++++++++++++++++++++++++--------
 ati128_state.h |    4 +++
 4 files changed, 104 insertions(+), 34 deletions(-)



commit 640f1ee7cb0086d10c4ce7b6b2187421f9d241a7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 2 11:58:38 2003 +0000

    Added missing call to fusion_object_activate(), fixes CAUTION message.


 fbdev.c |    3 +++
 1 file changed, 3 insertions(+)



commit f3abf93be5cd6e8ae13ca20d1733dc278d368f25
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat May 31 15:01:58 2003 +0000

    - added support for RGB332
    - fixed strechblit bug in ARGB1555 mode


 ati128.c       |   19 +++++++++++++++++--
 ati128_state.c |   18 ++++++++++++++++++
 2 files changed, 35 insertions(+), 2 deletions(-)



commit f0b559a64dec03e29ec2ee2c8cfb34bcd3dee983
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat May 31 14:01:25 2003 +0000

    ppc inline assembler is now asm volatile(...)
    
    gcc-3.x broke the code when compiling with -O2 or higher.


 mmio.h |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 85cf240a6e60a629416c6d6d070f2917295a4c7b
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri May 30 15:45:29 2003 +0000

    fix for line drawing (invisible lines in df_dok).


 ati128.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 12fd28529ff022fb6d0657f21aea6b3901f82255
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 30 15:20:38 2003 +0000

    Forgot to add Florian <florian.fernandez2@wanadoo.fr>.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 5d58fc31df459be26051b41f7ccd6cd27ea08be8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 30 15:14:05 2003 +0000

    nVidia Overlay support by Oliver Schwartz <Oliver.Schwartz@gmx.de>:
    
    The driver contains a XBox specific register setting which is
    necessary because of the shared memory architecture on XBox. For
    plain NVidia graphics adapter you need to change line 618ff of
    nvidia_overlay.c (uncomment line 618, comment out line 620). This
    will hopefully be unneccessary once the xbox can be identified by the
    driver.
    
    Readded surface manager's optimizations due to them being fixed with this patch.


 AUTHORS                            |    1 
 README                             |    1 
 gfxdrivers/nvidia/Makefile.am      |    3 
 gfxdrivers/nvidia/nvidia.c         |   21 -
 gfxdrivers/nvidia/nvidia.h         |   20 +
 gfxdrivers/nvidia/nvidia_overlay.c |  638 +++++++++++++++++++++++++++++++++++++
 src/core/surfacemanager.c          |   32 +
 7 files changed, 690 insertions(+), 26 deletions(-)



commit d6c917b5752f896851efe2296a5a8532ab0df08c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 30 14:56:32 2003 +0000

    Updated savage patch, didn't test it,
    thanks to Florian <florian.fernandez2@wanadoo.fr>.


 Makefile.am                               |    1 +
 savagefb-0.4.0-linux-2.4.21-rc2.patch.bz2 |binary
 2 files changed, 1 insertion(+)



commit 2d26dfffe389e50cede5e29fbf1c95e9c632c58c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 28 20:06:56 2003 +0000

    Added IDirectFB::GetClipboardTimeStamp().
    Added optional time stamp return value to SetClipboardData().


 include/directfb.h   |   17 ++++++++++++++++-
 src/core/clipboard.c |   27 ++++++++++++++++++++++++++-
 src/core/clipboard.h |    9 ++++++---
 src/idirectfb.c      |   30 +++++++++++++++++++++---------
 4 files changed, 69 insertions(+), 14 deletions(-)



commit 8ab6a0474a6bd020c6fcfd54d04d2cc2944bacf7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 26 20:08:31 2003 +0000

    Leave the entered window if focus is explicitly requested by another window.


 windows.c |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit d72041ba3040d066c19ec4d2dd65b244a307e344
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 21 19:33:57 2003 +0000

    Changed while to for loop in RUN_PIPELINE.


 generic.c |   17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)



commit 4b33e99d8c388cc06913a5fff1da0abdc30ec608
Author: holger <holger>
Date:   Wed May 21 15:10:43 2003 +0000

    try to improve primary input device detection


 linux_input.c |   26 ++++++++++++++++++--------
 1 file changed, 18 insertions(+), 8 deletions(-)



commit a019d0250d19a5ccf1ee3866884648c45f1adc5e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 21 14:48:11 2003 +0000

    Force DICAPS_ALPHACHANNEL if PNG is indexed because the palette may contain
    transparent pixels. FIXME: Add detection if transparent entries exist.


 idirectfbimageprovider_png.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit e0b7ebcd1fdc2d50dc7df264e6cfcb6be4b90055
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 21 12:51:04 2003 +0000

    Don't call destructor on incomplete objects but print a caution message.
    
    Incomplete objects exist if a process dies between the object creation and
    its activation, e.g. during dfb_surface_create() or dfb_window_create().


 object.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit b7b25626ad691b6ff2ef9039be1ce377c9e34f2f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 21 12:25:14 2003 +0000

    Removed an assertion in dfb_layer_update_region(), region is allowed to be NULL!
    
    Thanks to Johannes Stezenbach <js@convergence.de> for pointing it out.


 layers.c |    1 -
 1 file changed, 1 deletion(-)



commit 10da285ef8f674a5a107ac2e5de835ce84bfee8b
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun May 18 19:40:12 2003 +0000

    replaced hallon at debian dot org's email address with mine, don't want
    him to receive emails, because of my broken packages.


 control |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e4040df569666650ed786897e8277091c11b390c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 16 13:07:12 2003 +0000

    Use font->height+1 as glyph surface height as debug messages showed that
    glyph bitmaps are sometimes larger.


 fonts.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 98364c73d3dfe080ec0a6e9af8cc190cf8de2658
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 16 12:55:33 2003 +0000

    Fixed glyph surface height calculation. Ascender + Descender was not enough,
    had to add 1 for glyphs reaching from ascender to descender.


 fonts.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 9350f55a5697f553e5c48ae99dee86af8ed6af36
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 13 20:48:27 2003 +0000

    Fixed dead lock in layer configuration recovery.
    
    Cleanly destroy arena if its initialize method failed.


 fusion/arena.c |   39 +++++++++++++++++++++++++++++++++++++++
 windows.c      |    6 ++++--
 2 files changed, 43 insertions(+), 2 deletions(-)



commit 80b7c6956aeda9e465aed107bafb3202da34c6ce
Author: leitner <leitner>
Date:   Tue May 13 20:01:19 2003 +0000

    remove gcc 3 prototype kludgery from string.h


 idirectfbfont_ft2.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit b38239102c53d8b07d72c0984728cda0fd4e949a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 13 18:01:10 2003 +0000

    Reverted dead lock fix. It probably introduced insafetiness and is
    obsolete anyway.


 util.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f9976c0ef2dcec721e7b22e1bb0f41855499b105
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 12 16:19:25 2003 +0000

    Set byte offset alignment to 512 to make ZORG happy.
    Have to add support for different alignments.


 matrox.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8c8e53fac1fd8f42a5ed8a538d606f2758490e09
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 12 14:07:08 2003 +0000

    Added note about reducing sched_yield() usage.


 TODO |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit 06b9c7cd4c7fece8a3f14dfb38d973de3af73712
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 11 18:08:18 2003 +0000

    Reverted ref/unref as it currently causes that windows are not destroyed
    unless the event buffer is released, too.


 idirectfbinputbuffer.c |    6 ------
 1 file changed, 6 deletions(-)



commit 6b20f84bfa1472dc90874223c9e5e09027f66abb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 11 15:42:41 2003 +0000

    Fixed cursor/blank off in master.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit defa4efa4f43781f3185ad2d8cf10091441b2210
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 11 13:25:06 2003 +0000

    Ref/unref attached windows, avoids fusion error if window is released before
    event buffer.


 idirectfbinputbuffer.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit ed3ece1c3651c5a5ebdbb008c1393ae55b4c0964
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Fri May 9 23:37:34 2003 +0000

    Fixed reversed CRTC2 SetFieldParity().


 matrox_crtc2.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c2f08f1be4d32c62deb9baec6ebb7905d8f7fc44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 9 14:51:34 2003 +0000

    New mga memory patch:
    
    1. Don't touch maxdisplayable, but use len instead of len_usable in get_fix.
    Fixes too high virtual resolution resulting in garbage after scrolling a lot
    in the console.
    
    2. Disable hw cursor by default, otherwise matroxfb writes the cursor image
    into DirectFB's memory and the cursor appears (blinking) as soon as DirectFB
    overwrites it.


 /dev/null                                                 |binary
 b/patches/Makefile.am                                     |    2 +-
 b/patches/matroxfb-full-memory-linux-2.4.21-rc2.patch.bz2 |binary
 3 files changed, 1 insertion(+), 1 deletion(-)



commit 9b909787a7288929f8dbbe0cfde7ce31a4c11a29
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 9 12:55:44 2003 +0000

    Fixed two evil brain bugs in lock/unlock with flags.
    Removed flag execution from unlock() again, works well now.


 gfxcard.c |   31 ++++++++++++++-----------------
 1 file changed, 14 insertions(+), 17 deletions(-)



commit 6b16c1f9d0ab7b4ec563d8cc70c809c3e8dd5f69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 8 17:47:39 2003 +0000

    Fixed dead lock in dfb_back_to_front_copy(). Unlock surface manager earlier.
    
    Do engine reset and state invalidation to dfb_gfxcard_unlock() again but
    keep the cleanup in dfb_gfxcard_lock().


 core/gfxcard.c |   25 +++++++++++++++++++------
 gfx/util.c     |    4 ++--
 2 files changed, 21 insertions(+), 8 deletions(-)



commit c01763408ee7229539b5518a197a6439d008d8ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 8 13:33:34 2003 +0000

    Fixed bug introduced yesterday.


 windows.c |    2 ++
 1 file changed, 2 insertions(+)



commit bee62177bb620488eee6622f7647cd6bf46423ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 7 23:36:52 2003 +0000

    Added DFB_KEY_IS_ASCII.
    
    Disable cursor and console blank each time a mode is set.
    
    Show cursor on escape during auto grab mode (not the ideal solution yet).
    
    Also holdup graphics card property on Ctrl-Alt-Break.


 include/directfb_keyboard.h      |    2 ++
 inputdrivers/keyboard/keyboard.c |    5 -----
 src/core/fbdev/fbdev.c           |   13 ++++++++++---
 src/core/gfxcard.c               |    8 ++++++++
 src/core/gfxcard.h               |    1 +
 src/core/input.c                 |    2 ++
 src/idirectfb.c                  |    8 +++++---
 7 files changed, 28 insertions(+), 11 deletions(-)



commit 52041116368be9153374a259677a2da945506fd7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 7 12:16:57 2003 +0000

    Added a new option for windows with an alpha channel: DWOP_OPAQUE_REGION.
    
    Along with IDirectFBWindow::SetOpaqueRegion(x1, y1, x2, y2):
          *
          * Disable alpha channel blending for one region of the window.
          *
          * If DWOP_ALPHACHANNEL and DWOP_OPAQUE_REGION are set but not DWOP_COLORKEYING
          * and the opacity of the window is 255 the window gets rendered
          * without alpha blending within the specified region.
          *
          * This is extremely useful for alpha blended window decorations while
          * the main content stays opaque and gets rendered faster.
          *


 include/directfb.h            |   22 +
 src/core/gfxcard.c            |   29 +
 src/core/windows.c            |  652 +++++++++++++++++++++++-------------------
 src/core/windows.h            |    6 
 src/misc/util.c               |    8 
 src/misc/util.h               |    4 
 src/windows/idirectfbwindow.c |   28 +
 7 files changed, 432 insertions(+), 317 deletions(-)



commit cd3d35592f2c9820296472b8f24207c123292260
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 6 17:59:08 2003 +0000

    Fixed dead lock in write to stderr ;)
    
    Scenario: OpenGL app locked the graphics card to do OpenGL stuff and
    writes debugging messages to stdout or stderr. The DFBTerm it's running
    in reads these debug messages and starts to render them waiting for the
    garphics card lock. But if the io buffer in the kernel is full the write
    of the OpenGL app blocks while it doesn't allow the DFBTerm to acquire the
    lock.
    
    Solution: Made graphics card lock a Fusion Property, like the lock for
    display layers (shared/exclusive access). DirectFB graphics operations
    are handled by the software driver now if an OpenGL context is locked.
    That's not the best solution yet, but at least the dead lock is dead.
    
    Fortunately moving a window over an OpenGL window always uses the hardware
    because the lock is synchronized via the blocking surface buffer locks.
    If a window is moved not touching the OpenGL window it gets slow ;(


 fbdev/fbdev.c |    2 +-
 gfxcard.c     |   35 ++++++++++++++++++++++++++---------
 gfxcard.h     |    3 ++-
 3 files changed, 29 insertions(+), 11 deletions(-)



commit 0fd471733b9fb74556f3cea48522555f8fce2259
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 6 17:13:55 2003 +0000

    Moved state invalidation and engine reset from dfb_gfxcard_unlock() to
    dfb_gfxcard_lock() by setting flags for the next lock. This is for the case
    that the process that locks the hardware dies.
    
    Alwass blit from top to bottom if source and destination buffers differ
    in the software driver.


 core/fbdev/fbdev.c    |   12 +++---
 core/gfxcard.c        |  100 ++++++++++++++++++++++++++++----------------------
 core/gfxcard.h        |    4 +-
 core/state.c          |    2 -
 gfx/generic/generic.c |   39 +++++++++----------
 gfx/generic/generic.h |    2 -
 6 files changed, 84 insertions(+), 75 deletions(-)



commit a188d3bb0de0f0ebab14400efa971231f1772e40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 3 23:05:03 2003 +0000

    Pass the CoreSurface to the Constructor of IDirectFBGL.


 idirectfbsurface.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 085f9271d27bc380bff1d0fb68c5b440e3f9eac9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 29 19:37:26 2003 +0000

    Added DFB_FORCE_DEBUG which can be defined before including coredefs.h in
    order to enable debug messages for specific files if overall debug is disabled.
    
    Accept zero length as an automatic value for MMIO mapping, too.
    
    Print an error if an orphaned arena is being entered.
    
    Nicer debug output (show time in seconds with three digits after the comma).
    
    Added DFB_BREAK which acts like a failing assertion.
    
    Send signal to current process only, not to the group.
    
    Cosmetic changes.


 include/directfb_internals.h |   10 ++++++----
 src/core/coredefs.h          |   38 +++++++++++++++++++++++++++-----------
 src/core/fbdev/fbdev.c       |    2 +-
 src/core/fusion/arena.c      |    9 +++++++++
 src/idirectfb.c              |    2 +-
 src/idirectfb.h              |    2 +-
 6 files changed, 45 insertions(+), 18 deletions(-)



commit 072182f5a65ed4e5dee38047e038403178adc3c2
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Tue Apr 29 06:08:13 2003 +0000

    Return DFB_UNSUPPORTED if pixelformat isn't supported.


 idirectfbvideoprovider_v4l.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit bef0c9a458eaf4dfd4eaa901bfa6df49fb47d911
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 28 16:51:23 2003 +0000

    Added GraphicsDeviceFunc 'EngineReset()':
    
    +      * Called after driver->InitDevice() and during dfb_gfxcard_unlock( , true ).
    +      * The driver should do the one time initialization of the engine,
    +      * e.g. writing some registers that are supposed to have a fixed value.
    +      *
    +      * This happens after mode switching or after returning from
    +      * OpenGL state (e.g. DRI driver).
    
    Moved one time register writes from InitDevice() to new matroxEngineReset().


 gfxdrivers/matrox/matrox.c |   83 ++++++++++++++++++++++++---------------------
 src/core/fbdev/fbdev.c     |   41 +++++++++++-----------
 src/core/gfxcard.c         |    8 +++-
 src/core/gfxcard.h         |   22 ++++++++++-
 4 files changed, 94 insertions(+), 60 deletions(-)



commit c3736101ccb2d36976fe6d7197b17e4f88bc5834
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 28 16:05:12 2003 +0000

    Synchronize the content of the front and back buffer of the window stack
    before entering fullscreen mode. Otherwise old window stack content is
    shown if the application does not clear immediately (and maybe even then).
    
    Added dfb_gfxcard_sync() to dfb_gfxcard_lock().


 fbdev/fbdev.c |    2 +-
 gfxcard.c     |   11 +++++++----
 gfxcard.h     |    2 +-
 layers.c      |    9 ++++++---
 windows.c     |   19 +++++++++++++++++++
 windows.h     |    5 +++++
 6 files changed, 39 insertions(+), 9 deletions(-)



commit cd51543873c406bfd42b77d9f17e9bf154eddc82
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 28 15:50:49 2003 +0000

    Fixed automatic mouse grabbing for button events.


 idirectfb.c |    3 +++
 1 file changed, 3 insertions(+)



commit cc4541e55f883dafede4f9edbff503b5f37fd3ac
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Apr 26 11:09:09 2003 +0000

    Added Matrox TV output cable type selection.


 gfxdrivers/matrox/matrox_crtc2.c |   12 ++++++++++++
 gfxdrivers/matrox/matrox_maven.c |   28 ++++++++++++++++++++++++----
 gfxdrivers/matrox/regs.h         |    2 +-
 src/misc/conf.c                  |   28 ++++++++++++++++++++++++++--
 src/misc/conf.h                  |    1 +
 5 files changed, 64 insertions(+), 7 deletions(-)



commit 93f032f19ee2e7aa3377dcf420d069c1f5d5a98d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Apr 24 08:56:29 2003 +0000

    Reorganized matrox blit code:
    - Moved TEXORG & co. back to matrox_state.c. DrawString() gained some speed.
    - Did the same for SRCORG in the name of symmetry :)
    - Made DSBLIT_DEINTERLACE work with DSCAPS_SEPARATED.
    - TW8A and BYPASS332 are G400 only so planar TMU blits can only work on G400. Looks like 2D blitter on G400 doesn't care
    about BYPASS332 so planar 2D blits have a chance of working on older chips too. I doubt anyone has tested this since
    older cards can't output planar YUV :)


 matrox.c       |  246 +++++++++++++++++++--------------------------------------
 matrox.h       |   25 ++---
 matrox_state.c |  130 ++++++++++++++++++++++--------
 3 files changed, 192 insertions(+), 209 deletions(-)



commit b6940c1e9dd3a9a3f87bf610a96d07b5272ebf32
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Apr 24 07:03:07 2003 +0000

    Made nsc driver respect --with-gfxdrivers.


 configure.in |   14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)



commit e6d39a7ccb62c0209d9f173640c1eb713f4cd76e
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Apr 23 19:28:16 2003 +0000

    Fixed G200 automatic argb-font for multi-app.


 matrox.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 72b866c1787c4234126f8d8f7af62882143f402d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 22 13:49:08 2003 +0000

    One more item (at the end).


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit cb352b1d67e04baeaf962ee728ab6e2656ffb0d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 22 12:31:33 2003 +0000

    Fix segfault in MPEG2 image provider by avoiding alloca.


 Makefile.am       |    5 +++--
 mpeg2/Makefile.am |    4 ++++
 mpeg2/store.c     |   40 ++++++++++++++++++++++++++++------------
 3 files changed, 35 insertions(+), 14 deletions(-)



commit d6b18c6a61525087a6c99857c693010c763a4e5e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 22 11:46:25 2003 +0000

    Do not probe graphics drivers if DirectFB is running on non fbdev systems.


 gfxcard.c |    3 +++
 1 file changed, 3 insertions(+)



commit d227ffcec8a4efcb6ffaa1dfd9c1230162b4be9f
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Apr 22 10:31:16 2003 +0000

    extra null pointer check. fixes segfault when probing driver while using SDL.
    
    we really shouldnt probe gfxdrivers when using SDL.


 nsc_galfns.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 959d612c0f782679aa6523410e7498a0b92fb764
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 22 08:11:01 2003 +0000

    Fixed fix.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 884b3c9c750ce4a1158ef32905e75e783b48bfc4
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Apr 21 14:32:23 2003 +0000

    debianized. based on the official 0.9.17 debian packages


 changelog                          |  162 +++++++++++++++++++++++++++++
 control                            |   88 +++++++++++++++
 copyright                          |   30 +++++
 dirs                               |    2 
 docs                               |    5 
 libdirectfb-0.9-18cvs-udeb.dirs    |    2 
 libdirectfb-0.9-18cvs.dirs         |    1 
 libdirectfb-0.9-18cvs.files        |    3 
 libdirectfb-bin.files              |    3 
 libdirectfb-dev.dirs               |    2 
 libdirectfb-dev.files              |    8 +
 libdirectfb-extra.files            |    2 
 libdirectfb-udeb-dev.README.Debian |   19 +++
 libdirectfb-udeb-dev.dirs          |    1 
 libdirectfb-udeb-dev.shlibs        |    1 
 libdirectfb-udeb.dirs              |    1 
 rules                              |  204 +++++++++++++++++++++++++++++++++++++
 17 files changed, 534 insertions(+)



commit 26bbf1a3805feacb8e24e7ec1b0f07711f2ccb3c
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Apr 21 14:18:20 2003 +0000

    build fixes if top_srcdir != top_builddir


 gfxdrivers/nsc/Makefile.am    |    2 +-
 inputdrivers/lirc/Makefile.am |    3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)



commit 51ffc9371712808a8944f93915c094393daf6f1e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 18 20:22:04 2003 +0000

    Add support for running multiple multi app core instances (fusion worlds).


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 69c441c6d7533c5d727237a1c543fc57bf707922
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 18 17:54:57 2003 +0000

    Fixed PNG and sys/io.h check when configuring with CFLAGS="-Werror".


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 7d08237522aea87f61ddb2e531d989fe17451ffb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 17 12:27:09 2003 +0000

    Added -Werror-implicit-function-declarations.


 configure.in |    2 ++
 1 file changed, 2 insertions(+)



commit c1cbb1d8d3cda0683441be070df4d4a82facbdab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 17 11:14:37 2003 +0000

    Removed DFB_CFLAGS, instead prepend to CFLAGS directly, much simpler.
    
    Prerequire autoconf 2.52.


 configure.in                                        |   30 +++++++++++---------
 gfxdrivers/ati128/Makefile.am                       |    2 -
 gfxdrivers/cyber5k/Makefile.am                      |    2 -
 gfxdrivers/i810/Makefile.am                         |    2 -
 gfxdrivers/matrox/Makefile.am                       |    2 -
 gfxdrivers/neomagic/Makefile.am                     |    2 -
 gfxdrivers/nsc/Makefile.am                          |    2 -
 gfxdrivers/nvidia/Makefile.am                       |    2 -
 gfxdrivers/savage/Makefile.am                       |    2 -
 gfxdrivers/tdfx/Makefile.am                         |    2 -
 inputdrivers/dbox2remote/Makefile.am                |    2 -
 inputdrivers/h3600_ts/Makefile.am                   |    2 -
 inputdrivers/joystick/Makefile.am                   |    2 -
 inputdrivers/keyboard/Makefile.am                   |    2 -
 inputdrivers/linux_input/Makefile.am                |    2 -
 inputdrivers/lirc/Makefile.am                       |    2 -
 inputdrivers/mutouch/Makefile.am                    |    2 -
 inputdrivers/ps2mouse/Makefile.am                   |    2 -
 inputdrivers/serialmouse/Makefile.am                |    2 -
 inputdrivers/sonypi/Makefile.am                     |    2 -
 inputdrivers/ucb1x00_ts/Makefile.am                 |    2 -
 interfaces/IDirectFBFont/Makefile.am                |    2 -
 interfaces/IDirectFBImageProvider/Makefile.am       |    2 -
 interfaces/IDirectFBImageProvider/mpeg2/Makefile.am |    2 -
 interfaces/IDirectFBVideoProvider/Makefile.am       |    2 -
 src/Makefile.am                                     |    2 -
 src/core/Makefile.am                                |    2 -
 src/core/fbdev/Makefile.am                          |    2 -
 src/core/fusion/Makefile.am                         |    2 -
 src/core/fusion/shmalloc/Makefile.am                |    2 -
 src/core/sdl/Makefile.am                            |    2 -
 src/core/sdl/sdl.c                                  |    6 +++-
 src/display/Makefile.am                             |    2 -
 src/gfx/Makefile.am                                 |    2 -
 src/gfx/generic/Makefile.am                         |    2 -
 src/input/Makefile.am                               |    2 -
 src/media/Makefile.am                               |    2 -
 src/misc/Makefile.am                                |    2 -
 src/windows/Makefile.am                             |    2 -
 tools/Makefile.am                                   |    2 -
 40 files changed, 25 insertions(+), 87 deletions(-)



commit c65bf6a6faf6b75558a907d4725873dd16443d6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 17 10:38:52 2003 +0000

    Set cmap.len before calling the fb driver.


 fbdev.c |    2 ++
 1 file changed, 2 insertions(+)



commit a50cfa843556208d74b9b2149bcb1cf88594b48b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 17 10:11:46 2003 +0000

    Do dfb_gfxcard_sync() before swapping a buffer back from video to system
    memory if the hardware wrote to it.


 surfacemanager.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 96ebec3ad895b2ba897f8f377778adf12e2a4035
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Apr 16 22:00:18 2003 +0000

    fixed extremely stupid bug, which resulted in black screens with some framebuffer drivers and was presend since 0.9.16.


 fbdev.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 8d84339b5faa4d9ca64eeb275c3d0cbe5e8605e7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 16 16:47:26 2003 +0000

    Adopted changes from Sarma Kolluru <Sarma.Kolluru@nsc.com>.


 configure.in                |    3 
 gfxdrivers/nsc/nsc.c        |   44 +----
 gfxdrivers/nsc/nsc_galfns.c |  369 +++++++++++++++++++++-----------------------
 src/core/system.h           |    2 
 4 files changed, 196 insertions(+), 222 deletions(-)



commit a6251b758f5e95d73697d27483914e1cccc56b45
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 16 14:56:13 2003 +0000

    Few more warnings fixed.


 Makefile.am |    2 +-
 primary.c   |   16 ++++++++--------
 2 files changed, 9 insertions(+), 9 deletions(-)



commit 72642fc6d40042b74f0a222ad16d686b2dde476b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 16 14:50:09 2003 +0000

    Be able to configure even if CFLAGS is exported containing "-Werror".


 configure.in |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit fe0a2627fc691265c72ee03bf6a8d6dfe278e905
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 16 14:22:02 2003 +0000

    Fixed tons of signed/unsigned warnings produced with -Wall and gcc 3.3.
    
    Made all unsigned width, height in the API signed.
    
    Fixed many other warnings. DirectFB compiles with gcc-3.3 -Wall -Werror.


 gfxdrivers/ati128/mmio.h                                            |    2 
 gfxdrivers/cyber5k/cyber5k.c                                        |    6 
 gfxdrivers/matrox/matrox.h                                          |    4 
 gfxdrivers/matrox/matrox_crtc2.c                                    |    7 
 gfxdrivers/matrox/mmio.h                                            |    2 
 gfxdrivers/nsc/nsc.c                                                |    3 
 gfxdrivers/nsc/nsc_galfns.c                                         |    8 
 gfxdrivers/nvidia/nvidia.c                                          |    7 
 gfxdrivers/tdfx/tdfx.c                                              |   10 
 include/directfb.h                                                  |   48 -
 inputdrivers/ps2mouse/ps2mouse.c                                    |    6 
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |   43 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    5 
 interfaces/IDirectFBImageProvider/mpeg2/getpic.c                    |   30 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |   47 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |    6 
 src/core/core.c                                                     |    2 
 src/core/fbdev/fbdev.c                                              |  417 ++++------
 src/core/fusion/shmalloc/shfree.c                                   |    4 
 src/core/gfxcard.c                                                  |    6 
 src/core/gfxcard.h                                                  |    2 
 src/core/palette.c                                                  |    4 
 src/core/palette.h                                                  |    2 
 src/core/sig.c                                                      |    2 
 src/core/surfacemanager.c                                           |    4 
 src/core/surfacemanager.h                                           |    2 
 src/core/thread.c                                                   |    4 
 src/display/idirectfbdisplaylayer.c                                 |   10 
 src/display/idirectfbsurface.c                                      |    4 
 src/display/idirectfbsurface_window.c                               |    4 
 src/gfx/generic/generic.c                                           |   29 
 src/idirectfb.c                                                     |   20 
 src/media/idirectfbdatabuffer_file.c                                |    6 
 src/media/idirectfbdatabuffer_streamed.c                            |    4 
 src/misc/cpu_accel.c                                                |    4 
 src/windows/idirectfbwindow.c                                       |   10 
 tools/dfbinfo.c                                                     |    6 
 tools/directfb-csource.c                                            |    4 
 tools/fusion_bench.c                                                |   20 
 39 files changed, 383 insertions(+), 421 deletions(-)



commit eef0cba18d7b17fdec8409db12b7d3860e2dd567
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 16 11:34:16 2003 +0000

    The cursor is no longer enabled during DirectFBCreate().
    
    It gets enabled automatically when the first window is created
    unless the cursor wasn't enabled/disabled before.
    
    Option "no-cursor" now forces the cursor to be disabled forever.
    No window resource is created.


 docs/directfbrc.5.in |    4 ++--
 src/core/layers.c    |   15 +++++++++++++--
 src/core/layers.h    |    2 +-
 src/core/windows.c   |    2 +-
 src/core/windows.h   |    3 +++
 src/directfb.c       |    4 ----
 src/misc/conf.c      |    7 +++----
 src/misc/conf.h      |    3 +--
 8 files changed, 24 insertions(+), 16 deletions(-)



commit 08a0fdb0800f065efb56e3562d383c7e9cf202fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 15 08:50:49 2003 +0000

    Moved into docs/.


 README.screenshots        |   58 ----------------------------------------------
 b/docs/README.screenshots |   58 ++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 58 insertions(+), 58 deletions(-)



commit dcf4dcd30cf7bf6cf9d97b20c37c4c89d768d4b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 14 13:54:56 2003 +0000

    Applied license header patch from Sarma Kolluru <Sarma.Kolluru@nsc.com>.


 include/gfx_regs.h     |  147 ++++++++++++++++++++++++++++++++++++++--------
 include/gfx_type.h     |  147 ++++++++++++++++++++++++++++++++++++++--------
 include/nsc_galproto.h |  148 ++++++++++++++++++++++++++++++++++++++--------
 include/pnl_defs.h     |  154 +++++++++++++++++++++++++++++++++++++++---------
 nsc.c                  |  148 ++++++++++++++++++++++++++++++++++++++--------
 nsc_galfns.c           |  156 ++++++++++++++++++++++++++++++++++++++++---------
 6 files changed, 749 insertions(+), 151 deletions(-)



commit 46af1c988458bed7b59f64c10192cf5c28b627ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 14 12:05:58 2003 +0000

    Made data pointer of memory based data buffer "const".


 include/directfb.h                     |    2 +-
 src/media/idirectfbdatabuffer.h        |    2 +-
 src/media/idirectfbdatabuffer_memory.c |    4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)



commit 434487d86868de5ea898dfc99172cbb9e5f86d78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 14 11:49:15 2003 +0000

    Let "argb_font" override "no-argb-font" ;)


 conf.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 0ce4d7c94d0663cd83b2f8cdb0a021ee41cca3b9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 14 11:44:24 2003 +0000

    Made node mutex recursive.


 reactor.c |   13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)



commit 31e0780998c503356a694ec9d25f181ab21cef56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 14 11:15:42 2003 +0000

    Made "no-argb-font" work for G200 (where argb-font is set after config loading).
    
    Reenabled the optimization in repaint_stack() which flips the layer's surface's
    buffers if the whole screen is updated (instead of blitting the whole buffer).


 core/fonts.c   |    3 ++-
 core/windows.c |    2 +-
 misc/conf.c    |    2 +-
 misc/conf.h    |    1 +
 4 files changed, 5 insertions(+), 3 deletions(-)



commit 4d049ae507fd527fb7a3fcff91d32cdccd5cf910
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Mon Apr 14 07:44:29 2003 +0000

    Restore interrupts after soft reset.


 matrox.c |    2 ++
 regs.h   |    1 +
 2 files changed, 3 insertions(+)



commit 74c27faace5513e966f4d57b21fd3b2ff0421877
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 13 23:25:29 2003 +0000

    Assign the destination surface to the window stack render state each
    time repaint_stack() is called instead of attaching a listener to the surface.
    This saves CPU usage in each slave by not getting notifications anymore
    (for each flip etc.).
    
    df_flip (slave using RPC for flipping) went from ~22000 to ~53000 FPS.
    Running df_flip as the master (no RPC) results in ~144000 FPS.


 layers.c  |    4 ++--
 windows.c |    7 +++++--
 2 files changed, 7 insertions(+), 4 deletions(-)



commit 9c25655a4b90fec7b99bcf4c764ebb8fb4521d46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 13 22:44:04 2003 +0000

    Do soft reset on G200 only. It trashes my screen until reboot on G550.


 matrox.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit f033dc226924b89e9835353a2f30175b79dad0f5
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Apr 13 10:31:58 2003 +0000

    Bumped version number to 0.9.18


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2fb1a91569915fdee79cf6de5abc4aee31ff04c7
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Apr 13 10:03:53 2003 +0000

    Added DPMS support via IDirectFBDisplayLayer::SetScreenPowerMode().


 include/directfb.h                  |   17 +++++++++++
 src/core/fbdev/fbdev.c              |   53 ++++++++++++++++++++++++++++++++++--
 src/core/layers.c                   |   17 +++++++++++
 src/core/layers.h                   |   10 ++++++
 src/display/idirectfbdisplaylayer.c |   13 ++++++++
 5 files changed, 107 insertions(+), 3 deletions(-)



commit cad61261aee656c4b53554c9efb97560c4b2b240
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 12 10:59:24 2003 +0000

    use AM_CFLAGS instead of CFLAGS (thanks to obi for the hint)


 i810/Makefile.am |    2 +-
 nsc/Makefile.am  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit c49b0d632651e338bed60f2e51b01da2c651c87d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 11 16:59:46 2003 +0000

    Simplified surface manager chunk loop in dfb_surfacemanager_allocate().
    
    Added restriction that 'video low' surfaces are not allowed to kick out
    'video high' surfaces.
    
    Create font surfaces as 'video low' instead of 'video high'.


 fonts.c          |    2 +-
 surfacemanager.c |   41 +++++++++++++++++------------------------
 surfaces.h       |    8 ++++----
 3 files changed, 22 insertions(+), 29 deletions(-)



commit 2de275bae6954dab81d5c439293e6868b17180c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 11 16:17:21 2003 +0000

    Added workaround for a strange TMU read offset bug on G200.
    See matroxSetState() for more information about the bug.
    
    Added soft reset to driver_init_device() in case the workaround doesn't
    work (unlikely).


 matrox.c |   12 ++++++++++++
 mmio.h   |   18 +++++++++---------
 regs.h   |    4 ++++
 3 files changed, 25 insertions(+), 9 deletions(-)



commit ca583b051bb496ef4c47cc7697eabcc8ce289d65
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Apr 11 00:22:50 2003 +0000

    i don't believe that they belong here...


 /dev/null |binary
 1 file changed



commit 00b2c796e7be7bf0601effc08faf61f3d2b137bc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 10 15:39:55 2003 +0000

    National Semiconductors Geode driver by Sarma Kolluru <Sarma.Kolluru@nsc.com>.
    Great thanks to NSC for their support!!!


 AUTHORS                               |    3 
 README                                |    1 
 configure.in                          |   19 
 gfxdrivers/Makefile.am                |   18 
 gfxdrivers/nsc/.cvsignore             |    6 
 gfxdrivers/nsc/Makefile.am            |   26 
 gfxdrivers/nsc/include/.cvsignore     |    6 
 gfxdrivers/nsc/include/Makefile.am    |    5 
 gfxdrivers/nsc/include/gfx_regs.h     | 1634 +++++++++++
 gfxdrivers/nsc/include/gfx_type.h     |  327 ++
 gfxdrivers/nsc/include/nsc_galproto.h | 1887 +++++++++++++
 gfxdrivers/nsc/include/pnl_defs.h     |  101 
 gfxdrivers/nsc/nsc.c                  |  433 +++
 gfxdrivers/nsc/nsc.lo                 |binary
 gfxdrivers/nsc/nsc.o                  |binary
 gfxdrivers/nsc/nsc_galfns.c           | 4803 ++++++++++++++++++++++++++++++++++
 gfxdrivers/nsc/nsc_galfns.lo          |binary
 gfxdrivers/nsc/nsc_galfns.o           |binary
 src/core/gfxcard.c                    |   11 
 src/core/gfxcard.h                    |    3 
 20 files changed, 9273 insertions(+), 10 deletions(-)



commit 4212b252b435d12c4f680eda4557f720f81ffd6c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 13:42:07 2003 +0000

    Forgot one more printf.


 idirectfbvideoprovider_v4l.c |    2 --
 1 file changed, 2 deletions(-)



commit 15350c5a5bb7114451d50e82cd29f8885f5c2346
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 13:36:22 2003 +0000

    Create grabbing thread with default priority.


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 37431805c1a3447f2d7c31a27fd45bd4b6c38a92
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 13:30:21 2003 +0000

    Removed debug printfs.


 idirectfbvideoprovider_v4l.c |    5 -----
 1 file changed, 5 deletions(-)



commit eac7475ab3735919b927eb35aa5c88a20478f33d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 13:25:44 2003 +0000

    Forgot to add the handler to the switch.


 primary.c |    3 +++
 1 file changed, 3 insertions(+)



commit 099812d3afd8f015300dce765346deba9cf1b3af
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 13:12:43 2003 +0000

    Fixed two bugs causing video playback to system only window surfaces to fail.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |  145 +++++-----
 src/display/idirectfbsurface.c                                 |    2 
 2 files changed, 77 insertions(+), 70 deletions(-)



commit 3ca8019f2a5697a1d24769e4de5b15b8258c7f55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 8 12:47:39 2003 +0000

    Finished SDL multi app support by adding RPC palette changes.


 primary.c |   53 ++++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 36 insertions(+), 17 deletions(-)



commit 16778d879dbd2db3cc77534be41c4d278f1b8dce
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Apr 8 09:22:53 2003 +0000

    fixed broken --dfb:help output. vt-switch was not mentioned, others had wrong descriptions.


 conf.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 32813818554e77785a57bd26d6675a8aa51c7ad1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 7 16:58:34 2003 +0000

    Added multi app support to SDL backend.
    TODO: palette mode.


 configure.in            |    4 
 src/core/fbdev/fbdev.c  |   31 ++----
 src/core/sdl/primary.c  |  236 ++++++++++++++++++++++++++++++------------------
 src/core/sdl/primary.h  |    5 +
 src/core/sdl/sdl.c      |   65 ++++++++++---
 src/core/sdl/sdl.h      |    8 +
 src/core/sdl/sdlinput.c |   14 +-
 src/core/system.c       |   88 +++++++++++++----
 8 files changed, 300 insertions(+), 151 deletions(-)



commit 747d963190282ac25c3fce6f7c41e9c996b1bbdf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 7 13:21:25 2003 +0000

    Added Ville to main developers (not doing drivers only).


 AUTHORS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2c4912a9c8d81241d3687d322928eed847d15542
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 7 13:10:47 2003 +0000

    Updated 2.4 patches.


 fusion-full-linux-2.4.16.patch.bz2      |binary
 fusion-full-linux-2.4.20.patch.bz2      |binary
 fusion-full-linux-2.4.21-pre7.patch.bz2 |binary
 3 files changed



commit 98ce3e4005d7f7922850e3d862de19c00db7d198
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Apr 7 12:47:20 2003 +0000

    Added username <-> realname/email mapping for Ville.


 mkchlog |    1 +
 1 file changed, 1 insertion(+)



commit c818b97381a192ce7e0f65d59431b1ba734efe85
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Apr 6 15:55:53 2003 +0000

    Fixed matroxfb 32mb patch.


 /dev/null                                |binary
 b/patches/matroxfb-32mb-2.4.20.patch.bz2 |binary
 2 files changed



commit 2006e7369fee19c6fe20d8a42d3724874234350c
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Apr 6 15:41:22 2003 +0000

    Added README describing Matrox TV-out functionality.


 README.mga-tv |  533 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 533 insertions(+)



commit f1a6d6cb34037d124eb994f2f88fbe70a8fa53c8
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sun Apr 6 15:14:47 2003 +0000

    Made text drawing honor DSDRAW_BLEND flag.


 gfxcard.c |   12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)



commit 959e7692f2824d8d5c8cf560b6cc3670e61327dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 6 00:22:49 2003 +0000

    Updated patches.


 /dev/null                                         |binary
 b/patches/Makefile.am                             |    4 +++-
 b/patches/fusion-full-linux-2.4.16.patch.bz2      |binary
 b/patches/fusion-full-linux-2.4.20.patch.bz2      |binary
 b/patches/fusion-full-linux-2.4.21-pre7.patch.bz2 |binary
 b/patches/fusion-full-linux-2.5.66.patch.bz2      |binary
 6 files changed, 3 insertions(+), 1 deletion(-)



commit 83c83594df4941986eedd336cede4d2d43547160
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Sat Apr 5 21:04:23 2003 +0000

    Improved matroxfb vsync patch.
    
    - Move wait queues to the matrox_fb_info struct. Should allow more than
      one card to work at the same time.
    - Enable irq only when /dev/fbX is opened. I think this should eliminate
      XFree86 hanging on startup.
    - Use vline interrupt on the first head simply because it's easier to
      turn on/off than the vsync interrupt. It's programmed to trigger on
      vblank start.
    - Check card type before trying to use the c2vline interrupt.


 /dev/null                                          |binary
 b/patches/matroxfb-vsync-irq-2.4.20.patch.bz2      |binary
 b/patches/matroxfb-vsync-irq-2.4.21-pre6.patch.bz2 |binary
 3 files changed



commit 4f5029495285e157b7ec54681167843b76f2c1a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 5 02:52:25 2003 +0000

    Small single app fix.


 call.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit dc54be529bce28d67091dc4c095452e12b3b19dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 5 02:48:27 2003 +0000

    Use new FusionCall for RPC based fbdev ioctl.


 fbdev/fbdev.c            |  115 ++++++-------------
 fbdev/fbdev.h            |    5 
 fusion/Makefile.am       |    2 
 fusion/call.c            |  280 +++++++++++++++++++++++++++++++++++++++++++++++
 fusion/call.h            |   76 ++++++++++++
 fusion/fusion.c          |    3 
 fusion/fusion_internal.h |   12 ++
 7 files changed, 413 insertions(+), 80 deletions(-)



commit c50b8ee81e70b769c04ddb97a0666ccaf2de809d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Thu Apr 3 18:35:00 2003 +0000

    Splitted DSFLIP_WAITFORSYNC into DSFLIP_WAIT and DSFLIP_ONSYNC.


 gfxdrivers/i810/i810_overlay.c         |    3 +--
 gfxdrivers/matrox/matrox_bes.c         |    7 +++----
 gfxdrivers/matrox/matrox_crtc2.c       |    2 +-
 gfxdrivers/savage/savage_streams_old.c |    2 +-
 include/directfb.h                     |    8 +++++---
 src/core/fbdev/fbdev.c                 |    8 +++++---
 src/core/layers.c                      |    6 +++++-
 src/core/windows.c                     |   13 ++++++++-----
 src/display/idirectfbsurface_layer.c   |    5 ++++-
 9 files changed, 33 insertions(+), 21 deletions(-)



commit 126ffdc5f43602c167119dbb5c575f72388e996d
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Apr 2 23:17:40 2003 +0000

    Fixed DSCAPS_SEPARATED with planar formats.


 generic.c |   16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)



commit ad30d652bc2d892e80b0b32c97aab2ec31595ff0
Author: Ville Syrjala <syrjala@directfb.org>
Date:   Wed Apr 2 17:56:47 2003 +0000

    Fixed a typo.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a15f400beedf167ff5e873999aa577366efd3c94
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 1 19:09:08 2003 +0000

    Fixed cursor reference counting (inc. global, dec. local after creating),
    now slaves enable a display layer correctly without trashing it via exit.
    
    Repaint window stack if the layer configuration is set in administrative mode.


 core/layers.c                   |    6 ++++--
 core/windows.c                  |    9 ++++++++-
 core/windows.h                  |   13 +++++++++++++
 display/idirectfbdisplaylayer.c |    2 +-
 4 files changed, 26 insertions(+), 4 deletions(-)



commit 14557ea4623d236812f7e6c6d31654f6b6c9a2a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 27 14:19:50 2003 +0000

    Allow IDirectFBSurface::SetFont() while surface is locked.


 idirectfbsurface.c |    3 ---
 1 file changed, 3 deletions(-)



commit 622103f2e74d57c41a44b93d1d16ad3a014b9209
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Mar 27 00:08:37 2003 +0000

    applied patch by Antonino Daplas <adaplas at users.sourceforge.net> which improves error handling.


 i810.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit e83068fef8841cfdcc5fbaccead49d4e6ffb5432
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Mar 26 17:22:29 2003 +0000

    replaced dfb_system_wait_vsync() with dfb_layer_wait_vsync()


 i810_overlay.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 448408368f76bbbf77a483504ccff25edf4ee860
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Mar 26 17:10:52 2003 +0000

    dont build i810 driver if <sys/io.h> is not present.


 configure.in |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit b62c3e11cbc8a48c62ab72e7a53a4e494f2ffcfb
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Mar 26 16:51:13 2003 +0000

    - added Intel i810 driver from Tony Daplas < adaplas at users.sourceforge.net >
      please see i810fb.sf.net for more information


 configure.in                   |   42 +
 gfxdrivers/Makefile.am         |    9 
 gfxdrivers/i810/.cvsignore     |    6 
 gfxdrivers/i810/Makefile.am    |   21 
 gfxdrivers/i810/i810.c         |  959 +++++++++++++++++++++++++++++++++++++++++
 gfxdrivers/i810/i810.h         |  749 ++++++++++++++++++++++++++++++++
 gfxdrivers/i810/i810_overlay.c |  687 +++++++++++++++++++++++++++++
 7 files changed, 2462 insertions(+), 11 deletions(-)



commit 587065b4a3dd84de7e790e4f35dc852a91b5d1a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 24 13:39:09 2003 +0000

    Fixed panning, division of byte offset by pitch was missing
    (dfb_fbdev_pan() takes y offset, not byte offset).


 fbdev.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 7b532173a68ca94e83a8230491ff3509c5d43d6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 24 10:12:23 2003 +0000

    Palette size fix from Ville Syrjala <syrjala@sci.fi>.


 primary.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit ae8270db46a35f8cd4393d057f8f83a1fef35a07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 24 01:27:11 2003 +0000

    Applied patch from Ville Syrjala <syrjala@sci.fi> adding triple buffering
    support, many many great thanks ;)


 include/directfb.h                   |    6 +-
 src/core/fbdev/fbdev.c               |   97 +++++++++++++++++++++++++++++++----
 src/core/input.c                     |    5 +
 src/core/layers.c                    |   15 +++++
 src/core/sdl/primary.c               |    6 ++
 src/core/surfaces.c                  |   83 +++++++++++++++++++++++++++--
 src/core/surfaces.h                  |    1 
 src/core/windows.c                   |    2 
 src/display/idirectfbsurface.c       |    2 
 src/display/idirectfbsurface_layer.c |    2 
 src/idirectfb.c                      |   11 +++
 src/misc/conf.c                      |    6 +-
 tools/dfbdump.c                      |    6 +-
 13 files changed, 213 insertions(+), 29 deletions(-)



commit 4a71db2190387263831c985613a7dca2730f8b8f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 20 16:35:24 2003 +0000

    Applied patch from Ville Syrjala <syrjala@sci.fi> adding DSPF_ALUT44.
    This is a new pixel format having 4 bits of alpha and 4 bits being an
    index to a color lookup table.
    
    Great thanks!


 gfxdrivers/matrox/matrox_spic.c |    6 
 include/directfb.h              |    3 
 src/core/fbdev/fbdev.c          |    3 
 src/core/palette.c              |   20 +++
 src/core/palette.h              |    1 
 src/core/surfaces.c             |    9 +
 src/gfx/generic/generic.c       |  266 ++++++++++++++++++++++++++++++++++++++--
 src/idirectfb.c                 |    1 
 src/misc/conf.c                 |    1 
 src/misc/gfx_util.c             |    5 
 tools/dfbdump.c                 |    4 
 11 files changed, 300 insertions(+), 19 deletions(-)



commit 246a265d6c16203e63e10ceec976c3c67c6d8c94
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 19 16:42:20 2003 +0000

    Sop_lut8_to_Dacc() speedup, thanks to Ville Syrjala <syrjala@sci.fi>.


 generic.c |   37 +++++++------------------------------
 1 file changed, 7 insertions(+), 30 deletions(-)



commit e67cb29538dd8302d159080f4c27edfee4265438
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 19 14:07:10 2003 +0000

    Sop_lut8_Kto_Dacc() and Sop_lut8_SKto_Dacc()
    implemented by Ville Syrjala <syrjala@sci.fi>, thanks!


 generic.c |   56 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 54 insertions(+), 2 deletions(-)



commit 7fd85d37f1fe650890d3d2aeaa44643d523284aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Mar 19 14:05:08 2003 +0000

    Naming fix, thanks to Ville.


 generic.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 8ee3c737dc1114526040b36f694d891363bb934c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 14 16:16:35 2003 +0000

    Fixed tiled background image bug (clip wasn't set and resulted in invisible
    parts of overlapping transparent windows).


 windows.c |   18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)



commit 19ffe9a53ff0ae4976cb4970b655d7e60cbf57f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 14 15:27:31 2003 +0000

    The window needs to be refed in GetWindow() because IDirectFBWindow_Construct
    doesn't do that.


 idirectfbdisplaylayer.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 9b270f6b6e28396744a22bb880498359b14ee32b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 14 12:49:33 2003 +0000

    Disable layer normally even during emergency shutdown, because the global
    reaction of the surface has to be detached.


 layers.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 9185037f40f5ade94dec6c6b2a8edc5d94cf6d7d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 11 15:37:31 2003 +0000

    Added James Su <suzhe@gnuchina.org>.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 643babead9ee1ffa25a86a418696f628f009d130
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Mar 11 13:30:34 2003 +0000

    Applied a modified version of a patch from James Su <suzhe@gnuchina.org>
    that fixes a potential problem with PS2 mouse initialization.


 ps2mouse.c |   49 ++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 38 insertions(+), 11 deletions(-)



commit 10d488cac9448f5bb185446d787f6c194608782c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 10 12:39:09 2003 +0000

    Reverted an optimization, just a guess.


 surfacemanager.c |   32 ++++++++------------------------
 1 file changed, 8 insertions(+), 24 deletions(-)



commit 78eae1b6f2f8db1e0d3500ec2ff2496794f78687
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Mar 7 12:00:28 2003 +0000

    fixed a typo


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4808e7b6b3f95eb211981f4c3320fbc752e1dbb1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 6 13:59:44 2003 +0000

    Avoid writing to the original message data.


 idirectfbinputbuffer.c |   11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)



commit 9d6a4b70c0cebc40fe60e3e11fad78e2f8b4c11d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 4 21:04:57 2003 +0000

    Added DFBInputEventFlag:
    .     DIEF_GLOBAL         = 0x200    /* Only for event buffers creates by
    .                                       IDirectFB::CreateInputEventBuffer()
    .                                       with global events enabled.
    .                                       Indicates that the event would have been
    .                                       filtered if the buffer hadn't been
    .                                       global. */


 include/directfb.h |    8 +++++++-
 src/idirectfb.c    |   31 +++++++++++++++++++++++++------
 2 files changed, 32 insertions(+), 7 deletions(-)



commit 89458a1bed734755336648f97a8a73daeeebf656
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 4 16:11:27 2003 +0000

    Non global input event buffers now also get events if any window of the
    application is focused.


 idirectfb.c               |   13 ++++++++++++-
 idirectfb.h               |    2 ++
 windows/idirectfbwindow.c |    7 +++++++
 3 files changed, 21 insertions(+), 1 deletion(-)



commit 6917028685c2dbc36525dacc02b614db8fd2b2d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 4 11:39:33 2003 +0000

    Added extra checks for *argc and *argv being non NULL. Thanks to
    Sebastian Ley <sebastian.ley@mmweg.rwth-aachen.de> for pointing out this bug.


 README          |    1 +
 src/misc/conf.c |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 00393231230df60d437aa865d90ca3c87d9de617
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 4 10:24:19 2003 +0000

    Install directfb_version.h, too.


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 10305776ad6bbf270dda96f4a87d14bb9fed5679
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 28 20:18:55 2003 +0000

    Updates for 0.9.17 release.
    vmwarefb patch for older kernels.


 ChangeLog                                     |  402 ++++++++++++++++++++++++++
 NEWS                                          |   25 +
 patches/Makefile.am                           |    1 
 patches/vmwarefb-0.6.0-linux-2.4.18.patch.bz2 |binary
 4 files changed, 428 insertions(+)



commit 4ebbdeb74a1fd0b7c237559eea617cef2d51664d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 28 20:11:29 2003 +0000

    Fixed blitting within one buffer by using late software fallback.


 neo2200.c |    9 +++++++++
 1 file changed, 9 insertions(+)



commit fab5042adc68b8e8188ae04b5a368b42d4a65795
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 28 19:59:24 2003 +0000

    New patches.


 fusion-full-linux-2.4.20.patch.bz2      |binary
 fusion-full-linux-2.4.21-pre3.patch.bz2 |binary
 2 files changed



commit 708f92fdc975c27c568fec6e0f04336ec5570a50
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Feb 27 00:16:41 2003 +0000

    various build fixes for non linux systems
    - disable ppc asm on darwin and openbsd
    - do not build dfbsummon and fusion_bench on non linux systems
    - add -I/sw/include to CPPFLAGS on darwin (for fink)
    - add -L/sw/lib to LDFLAGS on darwin (for fink)


 configure.in      |   20 ++++++++++++++++++--
 src/misc/memcpy.c |    6 +++---
 tools/Makefile.am |   13 +++++++++----
 3 files changed, 30 insertions(+), 9 deletions(-)



commit 956ba30e4c3d447d778c37a558987019f8e356f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 26 15:09:46 2003 +0000

    Eliminated all strcpy, strcat and sprintf usage.


 inputdrivers/lirc/lirc.c                        |    5 
 interfaces/IDirectFBImageProvider/mpeg2/store.c |  135 ------------------------
 src/core/fusion/shmalloc/shmalloc.c             |   34 +++---
 src/misc/conf.c                                 |   18 +--
 4 files changed, 28 insertions(+), 164 deletions(-)



commit 0344e781f46db2d4684c9fd82ea30bce94740ee5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 25 19:02:15 2003 +0000

    Reject YUV modes, thanks to Jiri Svoboda for pointing out this bug.


 fbdev.c |   12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)



commit a4dd565b6379b4a6a6046ac383f703b4ea10cadb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 21 22:26:05 2003 +0000

    Readded DSPF_RGB15 (= DSPF_ARGB1555).


 directfb.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 9c364f5a1d829af73de2a294e6a25cd44bd6205d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 20 21:30:37 2003 +0000

    Print GetSurface() warning only if DLSCL_SHARED is set.
    Beautified the output of dfbdump.
    Install dfbdump.


 src/display/idirectfbdisplaylayer.c |    2 +-
 tools/Makefile.am                   |    3 +--
 tools/dfbdump.c                     |    4 ++--
 3 files changed, 4 insertions(+), 5 deletions(-)



commit f5adaad0d29d82f29f82142d9c8e666be220ac1a
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Feb 19 21:53:06 2003 +0000

    fix for neomagic check


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f76f6764df7c8b7b1901c02373dd41183e9206a2
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Feb 19 21:43:23 2003 +0000

    --with-gfxdrivers=none builds no gfxdrivers


 configure.in |   96 ++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 56 insertions(+), 40 deletions(-)



commit ae3d89678b39e31f6349ba7611a49db970e46e94
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 19 21:34:13 2003 +0000

    Beautified output.


 dfbdump.c |   37 +++++++++++++++++++++----------------
 1 file changed, 21 insertions(+), 16 deletions(-)



commit 88a0f94dec5a6a3a6181404bfafd0039a941ee9c
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Feb 19 21:15:59 2003 +0000

    it is finally possible to specify which gfxdrivers should be built.
    ./configure --with-gfxdrivers=<list>
    
    list is comma separated, all compiles all drivers (default)


 configure.in |   72 +++++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 65 insertions(+), 7 deletions(-)



commit c14184e30fb10267c2253cb9873ec2f773b2da2b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 18 21:57:15 2003 +0000

    Commented out two assertions.


 layers.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 3decb592a4da32861d973c565fa02b7a6882b306
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 18 20:49:03 2003 +0000

    Added tons of assertions.


 clipboard.c      |   22 ++
 colorhash.c      |   34 +++-
 core_parts.c     |   20 ++
 core_parts.h     |    8 -
 gfxcard.c        |  105 ++++++++++++-
 input.c          |   70 ++++++++-
 layers.c         |  420 +++++++++++++++++++++++++++++++++++++++++++++----------
 surfacemanager.c |   32 +++-
 8 files changed, 603 insertions(+), 108 deletions(-)



commit 2709a9b4c312eb763f27912f3a2d6def112446fc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 18 17:38:21 2003 +0000

    Added cooperative level restrictions to many functions.
    In short: cursor and background changes only in ADMINISTRATIVE,
    configuration and appearance in ADMINISTRATIVE and EXCLUSIVE.
    SetFieldParity() is allowed with EXCLUSIVE only.
    GetSurface() will be restricted to EXCLUSIVE soon.


 src/display/idirectfbdisplaylayer.c |   64 +++++++++++++++++++++++++++++-------
 tools/dfbg.c                        |   14 ++++++-
 2 files changed, 63 insertions(+), 15 deletions(-)



commit 67a157227064b428cf987ddd98ae6cdeba0b3f95
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 16 13:29:18 2003 +0000

    Fixed destination color keying for blended drawing.


 generic.c |  185 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 178 insertions(+), 7 deletions(-)



commit 0d1e5c4a8f6fa04bcc506e25cd6613721b42888f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 14 12:43:38 2003 +0000

    Sorted functions a bit.


 layers.h |   41 +++++++++++++++++++++++------------------
 1 file changed, 23 insertions(+), 18 deletions(-)



commit a1a217246b4b7b4c128bbcf8d14fb02a6b048de6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 21:14:37 2003 +0000

    Muted some often appearing debug messages.


 core/fusion/fusion.c      |    4 ++--
 core/fusion/reactor.c     |    2 +-
 windows/idirectfbwindow.c |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)



commit 10ad1e07b0d47dd5c9ad2719a46f09fb5b61fddc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 18:20:43 2003 +0000

    Various bug fixes.


 directfb-config.in |   42 ++++++++++++++++++++++++++----------------
 1 file changed, 26 insertions(+), 16 deletions(-)



commit 55d71aca197ed227be33962c1063e0a7cee6c4e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 17:35:47 2003 +0000

    Small fix from Ville.


 matrox_crtc2.c |    1 +
 1 file changed, 1 insertion(+)



commit 50ed9d7601c1311bde2c82a28d4e0a6d2ec944d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 15:56:00 2003 +0000

    Even field -> top field.
    Odd field -> bottom field.


 directfb.h |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit a74482f2d7c7b5221a6908425e4eaf2b44aeeb93
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 15:47:56 2003 +0000

    Another patch from Ville Syrjala <syrjala@sci.fi>:
    
    I just stumbled on DLOP_OPACITY and DLOP_ALPHACHANNEL and thought that the
    CRTC2 sub-picture layer should honor these. So here's a patch to do just
    that.


 matrox_spic.c |   35 ++++++++++++++++++++++++++---------
 1 file changed, 26 insertions(+), 9 deletions(-)



commit 7268ed86f1f46b1fe3fa240e4c1e2027a18844ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 15:32:19 2003 +0000

    Applied patch from Ville Syrjala <syrjala@sci.fi>:
    
    I'm sure everyone remembers Brian's CRTC2 troubles. Well I think we
    managed to fix it off list some time ago. The problem was caused by
    displaying the fields in the wrong order.
    
    Here's a patch with the solution I came up with. It adds a new method
    IDirectFBDisplayLayer::SetFieldParity() to select which field is displayed
    first after a Flip(). This behaviour isn't always the best choice so I
    added {DLCAPS,DLOP}_FIELD_PARITY flags.


 gfxdrivers/matrox/matrox_crtc2.c    |   63 +++++++++++++++++++++++++++---------
 include/directfb.h                  |   15 +++++++-
 src/core/layers.c                   |   16 +++++++++
 src/core/layers.h                   |    8 ++++
 src/display/idirectfbdisplaylayer.c |    9 +++++
 5 files changed, 94 insertions(+), 17 deletions(-)



commit 6b49e441ee9cf85dce9531fb3f6a4c8cf0189755
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 13 15:23:56 2003 +0000

    Added FIXME note.


 reactor.c |    1 +
 1 file changed, 1 insertion(+)



commit 2e6183326b48db5c826ccb86b855473c71ba55ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 12 19:44:21 2003 +0000

    Added 'bool' return values to all acceleration functions.
    Implemented 'late software fallback' for FillRectangle, DrawRectangle,
    Blit and StretchBlit.
    
    Graphics drivers are now able to return false in these functions to
    trigger a software fallback. Useful if blitting direction cannot be
    configured.


 gfxdrivers/ati128/ati128.c     |   40 ++++++++++++++------
 gfxdrivers/cyber5k/cyber5k.c   |   40 ++++++++++++++------
 gfxdrivers/matrox/matrox.c     |   42 +++++++++++++++------
 gfxdrivers/neomagic/neo2200.c  |   12 ++++--
 gfxdrivers/nvidia/nvidia.c     |   24 +++++++++---
 gfxdrivers/savage/savage2000.c |   18 ++++++---
 gfxdrivers/savage/savage3d.c   |   22 ++++++++---
 gfxdrivers/savage/savage4.c    |   22 ++++++++---
 gfxdrivers/tdfx/tdfx.c         |   79 +++++++++++++++++++++++------------------
 src/core/gfxcard.c             |   45 ++++++++++++++++-------
 src/core/gfxcard.h             |   12 +++---
 11 files changed, 237 insertions(+), 119 deletions(-)



commit b5a7d158bbe102a2b58e6f12390119b14029d12d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 12 15:53:20 2003 +0000

    Moved core part handling code from core.c to core_parts.c adding four
    new functions: dfb_core_part_(initialize|join|shutdown|leave).
    Added some debug messages.


 Makefile.am  |    1 
 core.c       |  111 ++++----------------------------------
 core_parts.c |  170 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 core_parts.h |    8 ++
 input.c      |    7 +-
 5 files changed, 197 insertions(+), 100 deletions(-)



commit 59e7e902ed86344a7b54e2f60b4101bb4581baa6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 12 14:50:11 2003 +0000

    Added 'core parts' being the gladiators entering the arena.
    Each core part has an init, join, shutdown, leave, suspend, resume
    and information about the local and shared data size.
    Core parts are system, input, gfxcard, layers and colorhash.
    Moved colorhash core part to core directory.
    Moved clipboard code from core.c into extra core part.


 b/src/core/Makefile.am      |    5 
 b/src/core/clipboard.c      |  180 +++++++++++++++++++++++++++++
 b/src/core/clipboard.h      |   41 ++++++
 b/src/core/colorhash.c      |  241 +++++++++++++++++++++++++++++++++++++++
 b/src/core/colorhash.h      |   44 +++++++
 b/src/core/core.c           |  268 +++++++++++++++++---------------------------
 b/src/core/core.h           |    6 
 b/src/core/core_parts.h     |  108 +++++++++++++++++
 b/src/core/gfxcard.c        |   51 +++-----
 b/src/core/gfxcard.h        |   14 --
 b/src/core/input.c          |   49 ++------
 b/src/core/input.h          |   16 --
 b/src/core/layers.c         |   51 +++-----
 b/src/core/layers.h         |   12 -
 b/src/core/palette.c        |    2 
 b/src/core/surfacemanager.c |    2 
 b/src/core/surfacemanager.h |    2 
 b/src/core/system.c         |   32 ++++-
 b/src/core/system.h         |   12 -
 b/src/idirectfb.c           |    5 
 b/src/misc/Makefile.am      |    2 
 src/misc/colorhash.c        |  238 ---------------------------------------
 src/misc/colorhash.h        |   48 -------
 23 files changed, 815 insertions(+), 614 deletions(-)



commit fa93548698fc65b4cbe82bc7e9cfc7bee23a8127
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 9 22:13:13 2003 +0000

    Made memcpy benchmark more 'blitter like'.


 memcpy.c |   13 ++++++-------
 1 file changed, 6 insertions(+), 7 deletions(-)



commit fc0e42031e3d86928332e401b0a285deda087f45
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 5 13:41:45 2003 +0000

    Added Scott Brumbaugh <scottb.lists@verizon.net> to the ThanksTo section.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 11c2209547ccfec0906df72e03f799373ce59588
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 4 20:11:55 2003 +0000

    Commented out recently added cleanup of local reactor nodes (crashes sometimes
    and produces a bug message).


 fusion.c  |    4 ++--
 reactor.c |    8 +++++++-
 2 files changed, 9 insertions(+), 3 deletions(-)



commit 661f8b7c54ea038b73ce9d0d32ecf1ee9798ea3d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 4 17:15:01 2003 +0000

    Lock the node list in _reactor_free_all().


 reactor.c |    4 ++++
 1 file changed, 4 insertions(+)



commit e2882d384c598154b95e79ff358b9388f9512d5d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 3 19:23:53 2003 +0000

    More cleanups and comments.


 arena.c           |    2 +-
 fusion.c          |    5 ++---
 fusion_internal.h |    2 +-
 reactor.c         |   24 ++++++++++++++++++------
 4 files changed, 22 insertions(+), 11 deletions(-)



commit 361190234249fa3fff3c52d0c359e23b06860539
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 3 18:19:45 2003 +0000

    Completely commented.


 arena.c |   71 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 65 insertions(+), 6 deletions(-)



commit b8f1133c58efcc3736ef65720e30801627f49a4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 3 12:36:06 2003 +0000

    Code cleanup, minor optimization in dfb_gfxcard_state_check().


 fonts.c   |   81 +++++++--------------
 fonts.h   |    1 
 gfxcard.c |  233 ++++++++++++++++++++++++++++++--------------------------------
 gfxcard.h |    6 -
 input.c   |    7 -
 layers.c  |    2 
 6 files changed, 145 insertions(+), 185 deletions(-)



commit bc50cdd7e2b2bdd8dee077a1949624b85586f6f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 31 18:43:36 2003 +0000

    Use dfb_layer_wait_vsync() now.


 savage_streams_old.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fef80277b99d283c5bc5753ce1042ff2e84952f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 31 18:40:29 2003 +0000

    Removed dfb_system_wait_vsync().
    IDirectFB::WaitForSync() uses the primary layer's WaitVSync().
    The FBDev primary layer's WaitVSync() is now implemented.


 gfxdrivers/matrox/matrox_bes.c |    2 -
 src/core/core_system.h         |    4 ---
 src/core/fbdev/fbdev.c         |   42 ++++++++++++++++++++++++-----------------
 src/core/layers.c              |   12 +++--------
 src/core/sdl/sdl.c             |    6 -----
 src/core/system.c              |    8 -------
 src/core/system.h              |    9 --------
 src/idirectfb.c                |    2 -
 8 files changed, 31 insertions(+), 54 deletions(-)



commit dbe698a70c7e8c03adea1f22dbdead96beca39e2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 30 20:42:41 2003 +0000

    Fixed input device ID unification.
    Added recursive helper function make_id(prefered).


 BUGS             |    5 -----
 src/core/input.c |   34 +++++++++++++++++-----------------
 2 files changed, 17 insertions(+), 22 deletions(-)



commit 68ab1cebbce5cca6d31a2d27dcfd50ff96cce2de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 29 18:11:11 2003 +0000

    Input devices still get same IDs sometimes.


 BUGS |    5 +++++
 1 file changed, 5 insertions(+)



commit 560d631bc151b8f89dea26e54e23a73c1fcac101
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 29 15:41:45 2003 +0000

    Added "FBDev" and "SDL" to primary layer names.


 fbdev/fbdev.c |    2 +-
 sdl/primary.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit f508d8ad1247891d8c800999f48c56f011d4e9dd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 29 15:39:41 2003 +0000

    Added enumeration of display layers.


 dfbinfo.c |  111 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 103 insertions(+), 8 deletions(-)



commit b0f9841a3a6127a0c12c19c9db7b006ad9e03c46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 29 13:23:58 2003 +0000

    Moved input device name and vendor to DFBInputDeviceDescription.
    Added new tool "dfbinfo" which currently enumerates input devices,
    but needs some beautified output.


 include/directfb.h                     |   16 +-
 inputdrivers/dbox2remote/dbox2remote.c |    8 -
 inputdrivers/h3600_ts/h3600_ts.c       |    8 -
 inputdrivers/joystick/joystick.c       |    8 -
 inputdrivers/keyboard/keyboard.c       |    8 -
 inputdrivers/linux_input/linux_input.c |    6 -
 inputdrivers/lirc/lirc.c               |    8 -
 inputdrivers/mutouch/mutouch.c         |   45 +++-----
 inputdrivers/ps2mouse/ps2mouse.c       |    4 
 inputdrivers/serialmouse/serialmouse.c |    4 
 inputdrivers/sonypi/sonypi.c           |    8 -
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c   |    8 -
 src/core/gfxcard.h                     |    2 
 src/core/input.c                       |   10 -
 src/core/input.h                       |   13 --
 src/core/sdl/sdlinput.c                |    8 -
 tools/.cvsignore                       |    1 
 tools/Makefile.am                      |    5 
 tools/dfbinfo.c                        |  184 +++++++++++++++++++++++++++++++++
 19 files changed, 268 insertions(+), 86 deletions(-)



commit 24d8c48c898a5271d6fc942029c0a7ab1b942185
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 29 13:19:13 2003 +0000

    Added special thanks for Ville.


 README |    6 ++++++
 1 file changed, 6 insertions(+)



commit 8a6c41b2d87f3b41adf3ad787375817d73494477
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jan 29 12:33:53 2003 +0000

    Added input driver for Microtouch serial touchscreens.
    Since this driver has to be configured by adjusting a couple of defines
    in the source code, it is not build by default. Enable it using the
    --enable-mutouch configure option.


 AUTHORS                          |   10 
 ChangeLog                        |  126 ++++++++++
 README                           |    3 
 configure.in                     |   18 +
 inputdrivers/Makefile.am         |   33 +-
 inputdrivers/mutouch/.cvsignore  |    6 
 inputdrivers/mutouch/Makefile.am |   18 +
 inputdrivers/mutouch/mutouch.c   |  489 +++++++++++++++++++++++++++++++++++++++
 8 files changed, 676 insertions(+), 27 deletions(-)



commit 3138e94cd4751250eaa98a25d489567f1796d9ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 24 19:19:18 2003 +0000

    Fix for planar formats by Ville Syrjala <syrjala@sci.fi>.


 surfacemanager.c |   23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)



commit 2b07efc4a20db64448dd30604720c861e2725f32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 23 21:12:53 2003 +0000

    Reverted change to use FusionLink.


 input.c |  116 +++++++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 68 insertions(+), 48 deletions(-)



commit 2c2b947299c5e93bebedf9a810274c57123946fd
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jan 23 20:11:05 2003 +0000

    Return DFB_OK from load_default_cursor() if the file was missing and
    created an empty cursor.


 layers.c |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit 618f381302c88f041ffc2a5e0cebf2a32b280402
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 23 17:00:16 2003 +0000

    Fixed segfaulkt during shutdown.


 fbdev.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 45e8fac66223c3d2cf4980fa7badb15546c12e99
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jan 23 15:59:08 2003 +0000

    Compile the default font into the default font provider.
    Don't install font.data any longer.


 /dev/null                                          |binary
 b/data/Makefile.am                                 |    2 
 b/interfaces/IDirectFBFont/Makefile.am             |    2 
 b/interfaces/IDirectFBFont/default_font.h          |  623 +++++++++++++++++++++
 b/interfaces/IDirectFBFont/default_font.png        |binary
 b/interfaces/IDirectFBFont/idirectfbfont_default.c |   78 +-
 6 files changed, 657 insertions(+), 48 deletions(-)



commit 17b9fd1455c76ee736b1c8527bcbc8e30e595dc4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 23 15:37:21 2003 +0000

    Hold the surface manager lock during the whole dfb_back_to_front_copy() work.
    Use FusionLink for local list of input devices.


 core/input.c |  116 ++++++++++++++++++++++++-----------------------------------
 gfx/util.c   |    4 +-
 2 files changed, 50 insertions(+), 70 deletions(-)



commit 646e76b9e55579caa5df8c4d81820f07e1c3b40f
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jan 23 15:11:32 2003 +0000

    Initialize the cursor window as empty in case the cursor file can not
    be opened or is smaller than the expected size.


 layers.c |   34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)



commit 6615dbbed032201d181f3bae79cc774dff0ab441
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jan 21 20:04:16 2003 +0000

    Check that fb_dev is not NULL before trying to release it in system_leave().


 fbdev.c |   13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)



commit cc8e5c008dafbf1e5668acdfba29c3e31d70e0ae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 21 15:25:33 2003 +0000

    Started to write an overview of the initialization process.


 initialization.txt |   86 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 86 insertions(+)



commit 09a908f03ef5d9ec9c3deedb16349bce9ef7d279
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 21 15:17:19 2003 +0000

    Fix "could not adjust heap offset message" if the primary layer surface
    consumes the whole video memory (thanks to Ville Syrjala).


 surfacemanager.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d8d74b686b0c3df3b192fe6250fbeba8e86327fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 21 15:15:35 2003 +0000

    Don't segfault in dfb_core_get_clip() if no clip is set.


 core.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 566eee41028bdce57dbdc86a666bbc8db7a335ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 20 19:48:20 2003 +0000

    Minor code cleanup.


 core.c    |   10 ---
 gfxcard.c |    8 +-
 layers.c  |  175 ++++++++++++++++++++++++++++----------------------------------
 layers.h  |    3 -
 4 files changed, 85 insertions(+), 111 deletions(-)



commit 8cf9f02a926b9b9a5dd64de386379502511bf59c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 20 19:05:17 2003 +0000

    Open framebuffer device before initializing the vt.
    Don't open extra framebuffer device in vt code.


 fbdev.c |   28 +++++++++++++++++-----------
 vt.c    |   54 ++++++++++++++++++------------------------------------
 2 files changed, 35 insertions(+), 47 deletions(-)



commit 97f7ce3b86fd8b5984ac06afd8891d190362e103
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 20 17:42:43 2003 +0000

    Removed obsolete usage of shcalloc.


 vt.c |   53 ++++++++++++++++++++++++-----------------------------
 vt.h |   16 ++++++----------
 2 files changed, 30 insertions(+), 39 deletions(-)



commit 32b074d9be0a02cbfb6c3f84113a32f8583389fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 20 17:13:54 2003 +0000

    Use dfb_gfxcard_lock() in dfb_gfxcard_shutdown(). Removed workaround that
    was needed because of lacking support for recursive locks.


 gfxcard.c |   18 ++----------------
 1 file changed, 2 insertions(+), 16 deletions(-)



commit 2f7528b1a3781c307efa885ef8fec0f009afdd9a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 16 15:22:17 2003 +0000

    Added minimalistic clipboard functionality via IDirectFB::Set/GetClipboardData()
    including mime type. This is an intermediate solution that will be replaced.


 configure.in       |    2 -
 include/directfb.h |   31 ++++++++++++++++
 src/core/core.c    |   98 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/core/core.h    |    6 +++
 src/idirectfb.c    |   26 ++++++++++++++
 5 files changed, 162 insertions(+), 1 deletion(-)



commit 545b308ffdf4532042740c1e87becd2817c65541
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 15 13:09:05 2003 +0000

    Added PPC sources to EXTRA_DIST.


 ChangeLog            |   22 ++++++++++++++++++++++
 src/misc/Makefile.am |    8 +++++++-
 2 files changed, 29 insertions(+), 1 deletion(-)



commit 6fb3ca80481b63237871ac4a534335e8623f524f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 15 12:58:29 2003 +0000

    Added 1280x1024 at 75 Hz.


 fb.modes |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 4fc792524165b88b290824e02810b1ca9c43805c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 14 16:33:41 2003 +0000

    Added patch.


 Makefile.am                             |    3 ++-
 fusion-full-linux-2.4.21-pre3.patch.bz2 |binary
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 86e8644dd58aed35ab3946718c9c4fe6404242fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 14 16:31:26 2003 +0000

    Updated ChangeLog and NEWS for release.
    Added comment to arena code.


 ChangeLog               |20571 ++++++++++++++++++++++++++++--------------------
 NEWS                    |    3 
 src/core/fusion/arena.c |    1 
 3 files changed, 12224 insertions(+), 8351 deletions(-)



commit bb37a7488ecea81235b56e27295601b8b92db24b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 14 15:16:36 2003 +0000

    Updated patch.


 fusion-full-linux-2.4.20.patch.bz2 |binary
 1 file changed



commit 45a8c42ce04fceca9d593919572fad8813f8c5bd
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 13 19:29:05 2003 +0000

    set data to NULL in case of error to avoid a possible crash


 directfb-csource.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit 5c5d0ec9a7dba121bebf25ee029229dcd389ad3d
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 13 13:18:42 2003 +0000

    Updated the spec file (added dfbg and its man-page).


 directfb.spec.in |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit f4b5e4954f4d3ad6b5283636c5e597a1207173ad
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 13 12:57:20 2003 +0000

    Removed the avifile and flash video providers. They are now part of
    the DirectFB-extra package.


 b/ChangeLog                                                          |20349 ++++------
 b/README                                                             |   11 
 b/configure.in                                                       |   54 
 b/interfaces/IDirectFBVideoProvider/Makefile.am                      |   31 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |  458 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |  491 
 6 files changed, 8388 insertions(+), 13006 deletions(-)



commit 961aef164df4770bf86f731bc09d10bde775c52c
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jan 10 15:20:04 2003 +0000

    Reverted my latest change since they need autoconf > 2.13.
    Will instead move this code to DirectFB-extra and do it correctly there.


 configure.in |   23 +++++++++++------------
 1 file changed, 11 insertions(+), 12 deletions(-)



commit c3294591a682cdb522a0c953876287a3840946b2
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jan 9 16:46:24 2003 +0000

    Fixed a typo and separated the comon from the exotic pixel formats.


 directfbrc.5.in |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 0b568d8423ebd372f131a44b1106b835f42d6135
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jan 8 15:47:01 2003 +0000

    AC_LANG_PUSH C++ before checking for libflash, AC_LANG_POP afterwards.


 configure.in      |   23 ++++++++++++-----------
 tools/dfbsummon.c |    9 ++++-----
 2 files changed, 16 insertions(+), 16 deletions(-)



commit 216339a89a5584fa861dbe43316ebfe7773c569a
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Jan 4 21:25:20 2003 +0000

    - moved ppcasm_memcpy and ppcasm_memcpy_cachable into two seperate files
    - ppcasm_memcpy_cachable is only built on linux
    
    TODO: do not build ppcasm_memcpy_cachabe by defaut since this will create
    machine specific code.


 b/src/misc/Makefile.am              |   10 +
 b/src/misc/memcpy.c                 |    4 
 b/src/misc/ppcasm_memcpy.S          |   54 ++++++++++
 b/src/misc/ppcasm_memcpy.h          |    5 
 b/src/misc/ppcasm_memcpy_cachable.S |  150 ++++++++++++++++++++++++++++
 src/misc/ppcasm_string.S            |  190 ------------------------------------
 src/misc/ppcasm_string.h            |    5 
 7 files changed, 220 insertions(+), 198 deletions(-)



commit 9e3ec006c8ddd38e6f29751d07f8f66251101e8d
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Jan 4 20:46:41 2003 +0000

    removed hardcoded CACHELINE_BYTES, uses values from <asm/cache.h> instead


 ppcasm_string.S |    8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)



commit 5eb1521913af7efd34ea04a24b72b689c8865895
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Jan 4 20:18:40 2003 +0000

    - dont call AC_PROG_CC twice


 configure.in |    1 -
 1 file changed, 1 deletion(-)



commit a993647941ae448a596a4b5108365d060773c901
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Jan 4 20:10:37 2003 +0000

    - fix build problems with automake 1.5 when compiling assembler source
    - removed AM_PROG_CC_STDC macro which is obsolete, use AC_PROG_CC instead
    
    "This macro is a relic from the time Autoconf didn't offer such a feature.
    AM_PROG_CC_STDC's logic has now been merged into Autoconf's AC_PROG_CC
    macro, therefore you should use the latter instead. Chances are you are
    already using AC_PROG_CC, so you can simply remove the AM_PROG_CC_STDC call
    and turn all occurrences of $am_cv_prog_cc_stdc into $ac_cv_prog_cc_stdc.
    AM_PROG_CC_STDC will be marked as obsolete (in the Autoconf sense) in
    Automake 1.8."


 configure.in |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit ed0bbe9cb8acc904f5b4e19cea58000f0997dc64
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Jan 4 19:58:56 2003 +0000

    - bugfix for ARGB primary. someone did copy&paste from RGB16 values...


 fbdev.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit 4d5bd2f637fd765bb1e6bb9ad412f62ac4aa0a3b
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 29 17:50:03 2002 +0000

    fixed fix


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5ce552989be8de0c6af67fce53a81574c4073bbd
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 29 17:39:23 2002 +0000

    fix handling of palette alpha values


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit dd2c8f1708323db1c653083ef7f2b5dd9205881a
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Dec 28 19:36:54 2002 +0000

    bugfix for ARGB1555 pixelformat


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit f05157464edb933b825d25eff19e4df03f09e5d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 21:25:35 2002 +0000

    Removed some debug code.


 ref.c |   27 +++++++++++++--------------
 ref.h |    1 -
 2 files changed, 13 insertions(+), 15 deletions(-)



commit b4f2a5926f9260dcda3cf747d070579f7a3dba11
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 20:58:42 2002 +0000

    Fixed 15bit color keyed blitting.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit afd3ce2d8f5b43400c8d972fe4b4c2bf2b1ceb14
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Dec 27 19:41:19 2002 +0000

    integrated optimized ppc memcopy from xine
    
    this is evil and breaks at least compilation under OSX. should be disabled by default.


 configure.in             |    3 
 src/misc/Makefile.am     |    9 +-
 src/misc/memcpy.c        |   27 ++++--
 src/misc/ppc_asm.h       |  115 ++++++++++++++++++++++++++++
 src/misc/ppcasm_string.S |  192 +++++++++++++++++++++++++++++++++++++++++++++++
 src/misc/ppcasm_string.h |    5 +
 6 files changed, 341 insertions(+), 10 deletions(-)



commit 08828669d5a73fac34e427b9441e82ea25bc512a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 19:39:12 2002 +0000

    Added enums for indices of global reactions, removes some FIXMEs.


 input.h    |    6 ++++++
 layers.c   |    4 ++--
 palette.h  |    7 +++++++
 surfaces.c |    2 +-
 surfaces.h |    5 +++++
 windows.c  |    2 +-
 6 files changed, 22 insertions(+), 4 deletions(-)



commit fcf9fd7ba39fe2edfcc3554b870ac08b26e8d84f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 17:50:08 2002 +0000

    Changed DSPF_RGB15 to DSPF_ARGB1555, untested.


 gfxdrivers/ati128/ati128.c                                          |    6 
 gfxdrivers/ati128/ati128_state.c                                    |   13 
 gfxdrivers/cyber5k/cyber5k_underlay.c                               |    4 
 gfxdrivers/matrox/matrox.c                                          |   14 
 gfxdrivers/matrox/matrox_bes.c                                      |    6 
 gfxdrivers/matrox/matrox_crtc2.c                                    |    4 
 gfxdrivers/matrox/matrox_state.c                                    |   13 
 gfxdrivers/neomagic/neo2200.c                                       |   29 
 gfxdrivers/savage/savage3d.c                                        |   11 
 gfxdrivers/savage/savage4.c                                         |   11 
 gfxdrivers/savage/savage_streams_old.c                              |  588 +++++-----
 gfxdrivers/tdfx/tdfx.c                                              |   13 
 include/directfb.h                                                  |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    6 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |   12 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |    4 
 src/core/fbdev/fbdev.c                                              |   47 
 src/core/input.c                                                    |    2 
 src/core/surfaces.c                                                 |    2 
 src/gfx/convert.c                                                   |    4 
 src/gfx/convert.h                                                   |   15 
 src/gfx/generic/generic.c                                           |   64 -
 src/idirectfb.c                                                     |    2 
 src/misc/conf.c                                                     |   24 
 src/misc/gfx_util.c                                                 |   11 
 tools/dfbdump.c                                                     |   32 
 tools/directfb-csource.c                                            |   20 
 27 files changed, 504 insertions(+), 457 deletions(-)



commit 212f2740b401634bcd2978b9b66a615d4d0de038
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Dec 27 17:42:51 2002 +0000

    small compile fix (follow changes to layer naming)


 primary.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 74c66befbe9cd47f1f5d467d1e15b267828f695d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 05:26:36 2002 +0000

    SetVideoMode() resizes the window of windowed fullscreen applications, untested.


 TODO            |    3 ---
 src/idirectfb.c |    8 +++++++-
 2 files changed, 7 insertions(+), 4 deletions(-)



commit 792c4b56cd934f6110595c6a7078389ec1a603cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 27 03:39:28 2002 +0000

    Made summarize for upcoming 0.9.16 release.


 NEWS |   29 +++++++++++++++++++++++++++++
 1 file changed, 29 insertions(+)



commit 83468fe052e2a6947507fe240a1a5a2fd10434bd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 19 20:53:37 2002 +0000

    Ville Syrjala moved the layer name into the layer description and removed
    IDirectFBDisplayLayer::GetName(). Thanks!


 gfxdrivers/ati128/ati128_overlay.c     |    4 ++--
 gfxdrivers/cyber5k/cyber5k.c           |    4 ++--
 gfxdrivers/cyber5k/cyber5k_underlay.c  |    4 ++--
 gfxdrivers/matrox/matrox_bes.c         |    4 ++--
 gfxdrivers/matrox/matrox_crtc2.c       |    4 ++--
 gfxdrivers/matrox/matrox_spic.c        |    4 ++--
 gfxdrivers/neomagic/neo_overlay.c      |    4 ++--
 gfxdrivers/savage/savage_streams_old.c |    4 ++--
 include/directfb.h                     |   12 ++++--------
 src/core/fbdev/fbdev.c                 |    4 ++--
 src/core/layers.c                      |    7 -------
 src/core/layers.h                      |    8 --------
 src/display/idirectfbdisplaylayer.c    |   19 -------------------
 13 files changed, 22 insertions(+), 60 deletions(-)



commit 52ec3c16c3c9b704bca40ece400fcca16773aa67
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 19 19:07:02 2002 +0000

    Applied patch from Ville Syrjala <syrjala@sci.fi> that adds TV-Out and
    sub picture layer support for G450 and possibly G550, too. Thanks!
    
    Fixed two bugs related to (de)initialization of additional display layers
    by slave applications.


 gfxdrivers/matrox/matrox.c       |    2 
 gfxdrivers/matrox/matrox.h       |    1 
 gfxdrivers/matrox/matrox_crtc2.c |  422 +++++++++++++-------
 gfxdrivers/matrox/matrox_maven.c |  784 +++++++++++++++++++++++----------------
 gfxdrivers/matrox/matrox_maven.h |   75 +--
 gfxdrivers/matrox/matrox_spic.c  |   39 -
 gfxdrivers/matrox/regs.h         |    8 
 src/core/input.c                 |   15 
 src/core/input.h                 |    3 
 src/core/layers.c                |    3 
 src/core/windows.c               |   39 +
 11 files changed, 849 insertions(+), 542 deletions(-)



commit f2fd1fba857fed54e46d87fcc277f02c8e78b83a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 18 21:34:52 2002 +0000

    Focus the window under the cursor after abandoning a window with Meta-A.


 windows.c |    1 +
 1 file changed, 1 insertion(+)



commit 519361d3a02c496cc1a5098bbd59f9f33cbf85eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 18 17:53:44 2002 +0000

    Don't send SIGTRAP if shared memory limit would be exceeded, return NULL.


 shmalloc.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8ae7ee99015471795ab02fa547937bd674e06566
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 17 20:55:14 2002 +0000

    Added FusionObjectState enum and fusion_object_activate().


 src/core/fusion/object.c |   49 ++++++++++++++++++++++++++++++++++++++---------
 src/core/fusion/object.h |   18 +++++++++++++----
 src/core/palette.c       |    3 ++
 src/core/surfaces.c      |    4 +++
 src/core/windows.c       |    2 +
 tools/dfbdump.c          |    3 ++
 6 files changed, 66 insertions(+), 13 deletions(-)



commit 5ca7111d2859cf5fcc01c084f8960c341bc569d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 17 19:53:45 2002 +0000

    Added dfb_gfxcard_lock() and dfb_gfxcard_unlock(bool invalidate_state).
    It's used by dfb_fbdev_set_mode() to workaround accelerator register
    writes by the framebuffer driver during FBIOPUT_VSCREENINFO.


 ChangeLog              |  284 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/core/fbdev/fbdev.c |   12 ++
 src/core/gfxcard.c     |   18 +++
 src/core/gfxcard.h     |    3 
 4 files changed, 317 insertions(+)



commit 65179acc9e172f98fc6edb935af9dd165ae12255
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 17 19:51:27 2002 +0000

    Force SDL disabled if multi application core is enabled.


 configure.in |    4 ++++
 1 file changed, 4 insertions(+)



commit be52dde2c9f0c058dab8b24fc9f83bd0e3bf81de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 16 14:13:56 2002 +0000

    Removed unnecessary newline.


 idirectfb.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit bc67490469b502ed82a83b9524417de9eb8bf078
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 16 12:24:59 2002 +0000

    Forgot to update this one, too.


 /dev/null                                    |binary
 b/patches/Makefile.am                        |    2 +-
 b/patches/README.fusion                      |    2 +-
 b/patches/fusion-full-linux-2.4.20.patch.bz2 |binary
 4 files changed, 2 insertions(+), 2 deletions(-)



commit 075ab0173bb882d7fc708629e9867af321c42f8d
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Dec 15 21:54:58 2002 +0000

    Only check for a working C++ compiler if the avifile provider is going
    to be built.


 configure.in |    1 -
 1 file changed, 1 deletion(-)



commit 33d235cda9926c3e90ca83890514267659467f02
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 15 13:59:45 2002 +0000

    if PAGE_SIZE and _SC_PAGE_SIZE (for sysconf()) are undefined, theni still guess page size.


 mem.h |    4 ++++
 1 file changed, 4 insertions(+)



commit 3ba3594eebc2d61745ded78f73d452f8bef60df5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 13 18:36:17 2002 +0000

    Added "block-all-signals".


 docs/directfbrc.5.in   |    5 +++++
 src/core/core.c        |    3 +++
 src/core/fbdev/fbdev.c |    4 ++++
 src/misc/conf.c        |    7 ++++++-
 src/misc/conf.h        |    2 ++
 5 files changed, 20 insertions(+), 1 deletion(-)



commit a5b1e845db316181528c71d391c16ca712d07be6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 13 17:57:44 2002 +0000

    Don't guess page size if PAGE_SIZE is not defined, use POSIX sysconf(3).


 mem.h |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 76328b6d9a06540372401ac3bd03fbedfd608c5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 13 17:24:23 2002 +0000

    In multi application core Ctrl-Alt-Break sends a SIGKILL to the process
    that has exclusive access to the primary layer. No need to login from
    network or kill everything if a fullscreen app hangs.


 fusion/property.c |   33 +++++++++++++++++++++++++++++++++
 fusion/property.h |    8 ++++++++
 input.c           |    4 ++++
 layers.c          |   15 +++++++++++++++
 layers.h          |    5 +++++
 5 files changed, 65 insertions(+)



commit fa39fbf10307ae5acef119a472abe5aecbf63b3a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 13 16:48:07 2002 +0000

    Added threaded mutex and spinlock benchmark.


 Makefile.am    |    1 
 fusion_bench.c |  126 +++++++++++++++++++++++++++++++++++++++++++++++++++++----
 2 files changed, 120 insertions(+), 7 deletions(-)



commit be35d3eda8dd3b320ad4b343d506e54a909f5850
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 12 19:01:38 2002 +0000

    Use first system found as a fallback if the requested system hasn't been found.


 system.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 45d92cabb9b60f6425bc2cb2bd4513cadb30f1dd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 12 18:43:12 2002 +0000

    Added DFB_COLOR_EQUAL macro.


 directfb.h |    5 +++++
 1 file changed, 5 insertions(+)



commit 621dd8f003f2f67b137ebb71d161a0112c7e29ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 12 16:41:14 2002 +0000

    Include strings.h.


 fbdev/fbdev.c |    1 +
 system.c      |    1 +
 2 files changed, 2 insertions(+)



commit b607f7b663bdeba2d9793fdce3fbdd5d90592390
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 11 16:50:13 2002 +0000

    Added missing <linux/fb.h> includes for accelerator ids.
    Removed ifdefs because configure already checks for the definition.


 ati128/ati128.c |    5 +++--
 nvidia/nvidia.c |    4 ++--
 tdfx/tdfx.c     |    5 +++--
 3 files changed, 8 insertions(+), 6 deletions(-)



commit eeb2800b84589f8ff95a397f248b2bdddfdda3aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 11 16:45:12 2002 +0000

    Added "\n" to debug message.


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 07968a837c74faad3f326178d4ab7027d06685b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 10 19:03:33 2002 +0000

    Added new cshortcut.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 704ae6c4bce276900277b5fd203f888b7eddfe9f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 10 19:02:31 2002 +0000

    Added <Meta>-P shortcut that enables the cursor and sets the opacity to 0xff.


 windows.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 11b292f8c3bbb81d6d9563a4e2c5db7a66700c1c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 10 18:56:20 2002 +0000

    (Temporarily) set DWET_POSITION_SIZE in window event flags to avoid endless waiting.


 idirectfbwindow.c |   14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)



commit b4217b59537575c21b6f469221b85b17390b0834
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 10 18:10:15 2002 +0000

    Check return value of WaitForData() to avoid endless looping on unexpected EOF.


 idirectfbimageprovider_png.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 2ae9ee500bb7fec08f4a89b489d76d3f854b2c07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 9 18:14:59 2002 +0000

    Added a dfb_thread_testcancel().


 fusion.c |    2 ++
 1 file changed, 2 insertions(+)



commit 6547a1a375185db87a2458efdc53f7bc9fca2092
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 9 14:57:08 2002 +0000

    Always default to fbdev system.


 conf.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit 9b228e9766f694246b4a30d85092394f069bc201
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Dec 6 19:17:18 2002 +0000

    try to workaround a crash in the OverlayThread


 idirectfbvideoprovider_v4l.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 99f157275b74fb50b17b5803673dc90cfcac6ad5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 18:22:47 2002 +0000

    Don't set window->stack to NULL in window_remove().


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit bf9094b4c6d056ec65bb6a4804fdde937634865d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 17:51:44 2002 +0000

    Open fusion device in non-blocking mode and use select(),
    fixes blocking in valgrind.


 fusion.c |   30 ++++++++++++++++++++++++++----
 1 file changed, 26 insertions(+), 4 deletions(-)



commit 4d0565ef50e996f2c07cf8f7c0c257a7ccb9758e
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Dec 5 17:48:35 2002 +0000

    Added configure option --without-tools that allows to disable the build
    of the tools. Useful for cross-compilation.


 Makefile.am  |    8 +++++---
 configure.in |   10 +++++++++-
 2 files changed, 14 insertions(+), 4 deletions(-)



commit f4a6612437b981c16fb113484a3def13e143c47e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 16:43:36 2002 +0000

    Removed a bit debug.


 thread.c |    4 ----
 1 file changed, 4 deletions(-)



commit 68f4e63effd9a2bf73de4d561ab3d8ec0008f0d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 16:42:07 2002 +0000

    Added some debug output.


 fusion/fusion.c            |    2 ++
 fusion/shmalloc/shmalloc.c |    4 ++++
 thread.c                   |   22 ++++++++++++++++++++--
 3 files changed, 26 insertions(+), 2 deletions(-)



commit 43bb3f3ced220200b6e096d920845862de52ed1f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 12:00:52 2002 +0000

    Some experimental code from Ville Syrjala to avoid tearing.


 matrox_crtc2.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 0dac28d8292ed1a8371c051559da86c96e931c5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 12:00:06 2002 +0000

    Patch from Ville Syrjala adds IDirectFBDisplayLayer::GetName().


 include/directfb.h                  |    8 ++++++++
 src/core/layers.c                   |    7 +++++++
 src/core/layers.h                   |    2 ++
 src/display/idirectfbdisplaylayer.c |   19 +++++++++++++++++++
 4 files changed, 36 insertions(+)



commit bd7fd946619dad739fd3b0d4fe8a865f5d8fb01a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 5 11:57:34 2002 +0000

    Added IDirectFBWindow::GrabKey() and UngrabKey() which take a key symbol
    and a modifier mask, useful for panels etc.


 include/directfb.h            |  144 +++++++++++++++++++++++-------------------
 src/core/windows.c            |  112 ++++++++++++++++++++++++++++++++
 src/core/windows.h            |   16 +++-
 src/windows/idirectfbwindow.c |   28 ++++++++
 4 files changed, 233 insertions(+), 67 deletions(-)



commit 6f271e78f27ffc314ac5159571829bd0bcfe4fce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 3 20:14:16 2002 +0000

    Added all required locks that were missing
    because recursive locks were unsupported.


 windows.c |   58 +++++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 39 insertions(+), 19 deletions(-)



commit 7130b58967bfb5d6d1204a49ad6d2390860e0721
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 3 19:20:03 2002 +0000

    Added configure option "--disable-text" which reduces the stripped library
    size by ~20k on my system by removing all init, debug or error messages.


 configure.in                      |    9 ++++++
 src/core/coredefs.h               |   49 ++++++++++++++++++++++++--------------
 src/core/fusion/fusion_internal.h |   17 ++++++++-----
 3 files changed, 50 insertions(+), 25 deletions(-)



commit 9b170df039e0c474cb2688ee9d59103d7c8ff29a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 3 18:06:33 2002 +0000

    Removed obsolete fbdebug code.


 b/src/core/core.c           |    9 -
 b/src/core/fonts.c          |    4 
 b/src/core/surfacemanager.c |  171 -----------------------
 b/src/misc/Makefile.am      |   10 -
 b/src/misc/conf.c           |   16 --
 b/src/misc/conf.h           |    3 
 src/misc/fbdebug.c          |  322 --------------------------------------------
 src/misc/fbdebug.h          |   68 ---------
 8 files changed, 603 deletions(-)



commit b9a38b67852e81519e115be1d9372e010e3b57c7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 2 18:26:24 2002 +0000

    Fixed some error handling code that infinitly looped.
    Fixed reactor related reinitialization bug.


 fusion.c          |    6 +++++-
 fusion_internal.h |    1 +
 reactor.c         |   14 ++++++++++++--
 3 files changed, 18 insertions(+), 3 deletions(-)



commit 0ab8188aa76c1886250ad8a0d261b2330574f844
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 2 17:05:18 2002 +0000

    Fixed two reinitialization bugs.


 fusion.c |    3 +++
 1 file changed, 3 insertions(+)



commit fde50bffa2b6bcc26f916cdf8bfbfadd63d9796b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 20:09:02 2002 +0000

    Detach global reaction from layer background surface before unlinking it.


 layers.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit df2b6313330bd8839c9fe5baa0fdd3992c8bdcfb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 20:02:32 2002 +0000

    Slave processes on a real VT have to detach the thread going to mmap the
    MMIO regions.


 fbdev.c |   30 +-----------------------------
 vt.c    |   36 ++++++++++++++++++++++++++++++++++++
 vt.h    |    2 ++
 3 files changed, 39 insertions(+), 29 deletions(-)



commit 40b783025ffb2383bcaef36650121f7085b6f137
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 19:20:09 2002 +0000

    If graphics-vt is disabled (default) at least temporarily switch to KD_GRAPHICS
    during FBIO_PUTVSCREENINFO to avoid redraw (clear & text) of the text console
    when fullscreen apps start.


 fbdev.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit fd483259d0efa015afd42b97b9a66ce0b15d3eb7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 18:57:28 2002 +0000

    Added RPC mechanism to let fbdev ioctls be executed by the master only.
    DirectFB now only detaches from its tty if it's a real VT and only if
    vt switching is enabled. This looks like a clean and working solution.
    
    The only limitation left is that the master must not call DirectFB
    functions that do fbdev ioctls within a thread that was created by the
    application, but only if the application created any thread before DirectFB
    got initialized. And of course this only applies to master processes started
    from a real VT.
    
    Added fusion_is_shared(void*) which returns true if the pointer specified
    points to shared memory.


 ChangeLog                           |  366 ++++++++++++++++++++++++++++++++++++
 src/core/core.c                     |    3 
 src/core/fbdev/fbdev.c              |  172 +++++++++++++++-
 src/core/fbdev/fbdev.h              |    6 
 src/core/fbdev/vt.c                 |    3 
 src/core/fusion/shmalloc.h          |    8 
 src/core/fusion/shmalloc/shmalloc.c |    5 
 7 files changed, 541 insertions(+), 22 deletions(-)



commit a4991722c3718c8d282ef2feb10b18141be153ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 12:40:39 2002 +0000

    Updated vmwarefb patch.


 /dev/null                                       |binary
 b/patches/Makefile.am                           |    2 +-
 b/patches/vmwarefb-0.6.0-linux-2.4.20.patch.bz2 |binary
 3 files changed, 1 insertion(+), 1 deletion(-)



commit 34f6b2fe27b6a6fbcf5971c98b15628b4197cefa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 29 12:23:18 2002 +0000

    Clear a layer (dfb_windowstack_repaint_all) after enabling it.


 layers.c |    3 +++
 1 file changed, 3 insertions(+)



commit b9b9cc4169eb5d6679168ee0ff416e10291a63eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 27 19:48:49 2002 +0000

    Added setsid() call, to slave init.


 vt.c |    1 +
 1 file changed, 1 insertion(+)



commit 6b77fc1c0815363a37bdb4b0e92b3f2387406114
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 27 17:20:13 2002 +0000

    Added output of stacking class.
    Window order is now the real one.


 dfbdump.c |   44 +++++++++++++++++++++++++++++++++-----------
 1 file changed, 33 insertions(+), 11 deletions(-)



commit 0a58ddd84782549459d4de0acbe1aaddb08d22aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 27 17:19:45 2002 +0000

    Fixed three bugs related to stacking class.


 windows.c |   41 +++++++++++++++++++++++++----------------
 1 file changed, 25 insertions(+), 16 deletions(-)



commit 618ba23ec81a228a8c3c78fc9ff165199d3dda76
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 27 01:42:09 2002 +0000

    Moved dfb_system_lookup() call to dfb_core_init(), fixes fusion_bench segfault.
    Wait for a thread's initialization to be completed after creating it.


 core/core.c   |   10 ++++++----
 core/thread.c |    8 ++++++++
 directfb.c    |    4 ++--
 3 files changed, 16 insertions(+), 6 deletions(-)



commit 904f9d90dcec6854d8fce60686f86b0218dda495
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 27 00:12:13 2002 +0000

    Detach slaves from their terminal, too. Disabling console acceleration
    (which resulted in a kernel side card programming) in slaves is not necessary
    anymore. Also fbdev ioctls are ensured to act directly on the global state
    instead of the tty bound one. Not all threads get detached yet, if the
    application created a thread before initializing DirectFB.


 core.c        |    9 +++++++++
 fbdev/fbdev.c |   30 ++----------------------------
 fbdev/vt.c    |    2 ++
 system.c      |   48 +++++++++++++++++++++++++++++++++---------------
 system.h      |    3 +++
 5 files changed, 49 insertions(+), 43 deletions(-)



commit 9f536f80adc619fc9f5a77482331e19c4b6ccee3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 26 22:49:39 2002 +0000

    Modified the glyph surface width calculation to use 8192/font->height.


 fonts.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit a10827cc91a1ea395469e4266a62c128b3937467
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 25 15:23:55 2002 +0000

    Made dynamic code safe for binaries with statically linked in interfaces.


 interface.c |    9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)



commit 6ce52601bc1dd44113d3ed0a772527a0876f3016
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 22 21:36:17 2002 +0000

    Input device listeners installed by the windowstack construction code
    are global reactions now. Additional layers can now be used in windowed
    mode even after the process that enabled the layer exits.
    Remaining TODO is to auto-disable layers via reference counting.


 TODO               |    5 ++---
 src/core/input.c   |   21 ++++++++++++++++++++-
 src/core/input.h   |    8 ++++++++
 src/core/windows.c |   20 +++++++++-----------
 src/core/windows.h |    5 +++++
 5 files changed, 44 insertions(+), 15 deletions(-)



commit 08a9fbb8ce08d8cdb91f255ec2354cc81f9e0249
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 22 21:22:51 2002 +0000

    Fixed warning.


 reactor.c |    2 --
 1 file changed, 2 deletions(-)



commit df237a220e754751134c302251aa99600c3f7491
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 22 21:18:00 2002 +0000

    Implemented the ability to attach "global reactions" to a reactor.
    A global reaction will always be called directly by reactor_dispatch().
    Global reactions can be attached/detached by any process. Global reactions
    don't die if the process that attached it exits.
    Made layer_surface_listener, layer_bgsurface_listener and
    surface_palette_listener global reactions.
    
    Removed layer palette workaround removal TODO.


 TODO                                |    9 -
 src/core/fbdev/fbdev.c              |   52 ++++---
 src/core/fusion/object.c            |   22 ++-
 src/core/fusion/object.h            |   27 ++--
 src/core/fusion/reactor.c           |  243 +++++++++++++++++++++++++++++++++++-
 src/core/fusion/reactor.h           |   36 +++--
 src/core/fusion/shmalloc/shmalloc.c |    2 
 src/core/input.c                    |    7 -
 src/core/layers.c                   |  113 ++++------------
 src/core/layers.h                   |    8 +
 src/core/palette.c                  |   11 +
 src/core/palette.h                  |   17 ++
 src/core/surfaces.c                 |  107 +++++++++------
 src/core/surfaces.h                 |   35 +++--
 src/core/windows.c                  |    6 
 tools/fusion_bench.c                |    2 
 16 files changed, 496 insertions(+), 201 deletions(-)



commit 09c2b41b2c44358b8014fa1487550314b05610ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 22 18:13:56 2002 +0000

    Minor updates.


 TODO |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 740a730765aa01cdc84a0890f213f574135df0f1
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Nov 22 11:26:13 2002 +0000

    Use DFBBoolean instead of defining true and false. Updated tools README.


 README |   21 +++++++++++++--------
 dfbg.c |   36 +++++++++++++++---------------------
 2 files changed, 28 insertions(+), 29 deletions(-)



commit 9f3fe39c806df2cfe7ba778d5ba0c051481cfc9c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 21 21:23:24 2002 +0000

    Minor fix by Antonino.


 fbdev.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 418d6efb9c6f32f24d7e00ff64a244d44e05f173
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 21 19:06:59 2002 +0000

    Color adjustment support on primary layer (via gamma ramp in direct color mode)
    by Antonino Daplas <adaplas@pol.net>.


 fbdev.c |  172 +++++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 fbdev.h |    4 +
 2 files changed, 148 insertions(+), 28 deletions(-)



commit a69bf2db7bd3af559781d5d9b1bce378a9c5f3d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 21 18:21:46 2002 +0000

    Check for reactions != NULL, fixes default font.


 fonts.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit 3892db68dfcf841019e95e129e2f767e31f0034c
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Nov 21 15:50:53 2002 +0000

    Allow to unset a surface's font by calling SetFont() with a NULL.


 include/directfb.h             |    1 +
 src/display/idirectfbsurface.c |   13 +++++++------
 2 files changed, 8 insertions(+), 6 deletions(-)



commit 5b28b8bedc82517f01bf563248f68db2453e0c95
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 20 20:31:39 2002 +0000

    Dump windows of all layers.


 dfbdump.c |   22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)



commit becf487f04235894673f48e46c585a1ab4b14d38
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 20 17:40:15 2002 +0000

    Support direct color visual, thanks to Antonino Daplas <adaplas@pol.net>.


 fbdev.c |   39 ++++++++++++++++++++++++++++++++++++---
 1 file changed, 36 insertions(+), 3 deletions(-)



commit 5a3d3bf783644dd81fe0419b0e363bf72cf73b52
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 20 17:38:36 2002 +0000

    Forgot "-Wl,-udirectfb_fbdev".


 directfb-config.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 519453c9e7f3e52323ca986003861e72f487be65
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 19 18:03:10 2002 +0000

    Some focus behaviour fixes, especially for non-cursor mode.
    Link layer surface to layer while layer is enabled.


 layers.c  |    6 ++++++
 windows.c |   29 ++++++++++++++++++-----------
 2 files changed, 24 insertions(+), 11 deletions(-)



commit 872749aa2fd32eb735d83c9668b69722e8575103
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 19 16:41:47 2002 +0000

    Default background mode of new layers is DLBM_COLOR (0, 0, 0, 0) now.


 windows.c |    3 +++
 1 file changed, 3 insertions(+)



commit ce62d80b1326bc3f34415ff1996134c9a50cd9b8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 18 21:59:39 2002 +0000

    Allow passing NULL to unbind a shape and release its surface.


 include/directfb.h            |    2 +
 src/windows/idirectfbwindow.c |   45 +++++++++++++++++++++++-------------------
 2 files changed, 27 insertions(+), 20 deletions(-)



commit 307dd9d9b3c266a0d88b28e68fd3d03eea12cb4b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 18 21:46:08 2002 +0000

    Added IDirectFBWindow::SetCursorShape(), untested.


 include/directfb.h            |   13 ++++
 src/windows/idirectfbwindow.c |  122 +++++++++++++++++++++++++++++++++++-------
 2 files changed, 117 insertions(+), 18 deletions(-)



commit be8c1e770850774d92af650a268277027a5a6aa0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 18 20:54:14 2002 +0000

    Added options "--input=foo,bar", "--graphics=foo,bar" etc. that will output
    all required flags for statically linking the specified drivers or modules.


 directfb-config.in |  121 ++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 119 insertions(+), 2 deletions(-)



commit a9555c23398542209386bf9f3d998073959e9dcc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 18 18:42:43 2002 +0000

    IDirectFBDisplayLayer::WaitForSync() added by Ville Syrjala.


 gfxdrivers/matrox/matrox_crtc2.c     |   16 +++++++++++++++-
 include/directfb.h                   |    7 +++++++
 src/core/layers.c                    |   20 ++++++++++++++++++--
 src/core/layers.h                    |    7 ++++++-
 src/core/windows.c                   |    2 +-
 src/display/idirectfbdisplaylayer.c  |    9 +++++++++
 src/display/idirectfbsurface_layer.c |    2 +-
 7 files changed, 57 insertions(+), 6 deletions(-)



commit 12c71534a6a76fd5ec547f7dc3a3d8bec38a3083
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 22:36:06 2002 +0000

    Added IDirectFBWindow::SetColorKeyIndex().
    Made IDirectFBWindow::SetColorKey() lookup the index if the format is indexed.
    Fixed warnings.
    
    Bumped version number to 0.9.16.


 configure.in                  |    2 -
 include/directfb.h            |   12 +++++++
 src/core/fusion/reactor.c     |    7 +---
 src/windows/idirectfbwindow.c |   67 ++++++++++++++++++++++++++++++------------
 4 files changed, 65 insertions(+), 23 deletions(-)



commit 21ba790dc6f73367fe783f2d3f27718833e7c4ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 22:06:05 2002 +0000

    No need to do DirectFBCreate(), just DirectFBInit() and fusion_init() ;)


 fusion_bench.c |   42 ++++++++----------------------------------
 1 file changed, 8 insertions(+), 34 deletions(-)



commit c26660ce132bbab3bee21f1f2ded158d813bb7e9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 22:05:11 2002 +0000

    Made memory allocation messages a HEAVYDEBUGMSG.


 mem.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 506c29cb1282ede678a634a968ae284baec73bc4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 19:56:48 2002 +0000

    Patch for using the whole 32MB of Matrox G400 etc.


 Makefile.am            |    1 +
 matroxfb-32mb.diff.bz2 |binary
 2 files changed, 1 insertion(+)



commit 38b54fb58755215b1b2fc8edeb8944767644998a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 18:56:54 2002 +0000

    Divide squared alpha diff by 16 to have it less weighted in color decision.


 colorhash.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d7e673e0d7376e0e648f9669d614da4417bbc24b
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Nov 14 15:34:24 2002 +0000

    a more reasonable algorithm to find a good color match


 colorhash.c |   12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)



commit 9a9eee0672f48e1907abd3a6c596ed5a66f43ffa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 03:55:01 2002 +0000

    Don't do cursor magic if app is not running windowed.


 idirectfb.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 23e39aeeb8e09ecb14aba8f1c4e9608d94d0a592
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 03:48:29 2002 +0000

    Don't disable cursor on escape.


 idirectfb.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit c28cbd1eb0dea7af5a45b46f96ce134035bac92f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 03:27:30 2002 +0000

    Pressing a button or a key while a windowed primary is focused
    disables the cursor to achieve a vmware-like grabbing for fullscreen
    apps running windowed that need raw mouse events (e.g. df_knuckles).
    The cursor is released (shown) if Meta is pressed.


 idirectfb.c |   20 ++++++++++++++++++--
 1 file changed, 18 insertions(+), 2 deletions(-)



commit 4a5ca7793b11fbcfafcc6706b8c393da8e7dd68f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 01:25:58 2002 +0000

    Added 640x400 mode.


 fb.modes |    5 +++++
 1 file changed, 5 insertions(+)



commit cb69e068ea2d35648e411d23f44eaa23eee00491
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 01:19:41 2002 +0000

    Minor speed improvement.


 gfxcard.c |   32 ++++++++++++++++++++------------
 1 file changed, 20 insertions(+), 12 deletions(-)



commit ed07a3e324acdda11fc520de082354b82e527f8e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 00:56:32 2002 +0000

    Added 320x200 mode, fixed 320x240 mode.


 fb.modes |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit d6825770eb79342043146f6728d0a3e9622a4566
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 14 00:28:42 2002 +0000

    Pre render glyphs before rendering string to avoid a rare deadlock.


 gfxcard.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 866ec65ff18265c23d0ff48ee74e3d7e22e63096
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 23:38:11 2002 +0000

    Added dfbsummon, a surface manager debugging monitor.


 src/core/surfacemanager.c |   37 ++++++-
 src/core/surfacemanager.h |   11 ++
 tools/.cvsignore          |    3 
 tools/Makefile.am         |    4 
 tools/dfbsummon.c         |  236 ++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 287 insertions(+), 4 deletions(-)



commit 0f7b274455becbde060a6f156f0b6ef22f35bcca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 21:22:20 2002 +0000

    Added some layer palette/surface related TODOs.


 TODO |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit 28833e44ed8fb1edf4c07ee516d56074f5d8ea6b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 21:13:45 2002 +0000

    Fixed layer palette updates in multi app core (a bit workaroundish).


 BUGS                |    1 
 src/core/layers.c   |   76 ++++++++++++++++++++++++++++++++++++++++++++--------
 src/core/state.c    |    6 ++--
 src/core/surfaces.c |   10 ++----
 src/core/surfaces.h |    3 +-
 5 files changed, 75 insertions(+), 21 deletions(-)



commit f5e340a3ed06a34e794faea629a2ec277d837552
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 19:17:26 2002 +0000

    Commented out last change.


 generic.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a9605c63212e7849d3bf13dd9fec5e2069d9b656
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 16:59:31 2002 +0000

    Correctly blit from LUT8 to LUT8 even if source and destination palette are
    different.


 generic.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 6b1c7efe82d49ac4e683482c4b43af6b7b65db84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 01:26:12 2002 +0000

    Added *.diff.


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit 0cf3aed594dec2a25bd7b43f9997bd0fbde7d71a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 13 00:21:06 2002 +0000

    regenerated


 ChangeLog |   24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)



commit 90285f8243765ec87c8fb25ce08deb5f7e897ee2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 23:59:01 2002 +0000

    Added Fusion patch again, we don't need an extra tar ball for it.


 README                                         |    4 ++--
 patches/Makefile.am                            |    2 ++
 patches/README.fusion                          |   16 ++++++++++++++++
 patches/fusion-full-linux-2.4.20-rc1.patch.bz2 |binary
 4 files changed, 20 insertions(+), 2 deletions(-)



commit 4c43eb2ebde39e8ac6b7bf55ed9d6b6ea7806e88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 23:26:20 2002 +0000

    Good bye, ipc_cleanup, you've been a nice friend, but your time is over...


 b/tools/Makefile.am |    3 +--
 b/tools/README      |    6 ------
 tools/ipc_cleanup   |    6 ------
 3 files changed, 1 insertion(+), 14 deletions(-)



commit 75aafdf700bb206555a160e59c4d971ae29d24ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 23:23:23 2002 +0000

    Updated for 0.9.15.


 ChangeLog |  506 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   27 +++
 2 files changed, 533 insertions(+)



commit 420f489edf9876d68a94f831953f434f9e40251a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 22:56:07 2002 +0000

    Moved description of Linux Fusion prior to how to build with multi app,
    because users maybe don't read further before doing that.


 README |   22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)



commit 35200ab40b90c9ef838907ede84e60dd0bbd60ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 22:46:31 2002 +0000

    Vsync fix from Ville Syrjala.


 matrox_crtc2.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 46e4d1afbe4535331af9e2e51e69d2574c7c98db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 22:19:29 2002 +0000

    Improved ioctl error handling (EINTR, EINVAL etc.).


 lock.c     |   18 ++++++++---
 property.c |   18 ++++++++---
 reactor.c  |   92 +++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 ref.c      |   94 +++++++++++++++++++++++++++++++++++++++++++++++++++++--------
 4 files changed, 193 insertions(+), 29 deletions(-)



commit f45d573f7a71592bf3724f6d6564f702c75f89be
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 21:19:55 2002 +0000

    Some bug fixes.


 arena.c  |   13 ++++++++-----
 fusion.c |    6 ++++++
 2 files changed, 14 insertions(+), 5 deletions(-)



commit 6b4a455c176b3be912426f38b1927e45beecfe32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 20:48:45 2002 +0000

    Rewrote FusionArena code using shmalloc and linked lists.
    
    No remaining bit of SysV IPC! There isn't even any SysV IPC header included.


 b/src/core/core.c                              |    4 
 b/src/core/fbdev/fbdev.c                       |    4 
 b/src/core/fusion/Makefile.am                  |    1 
 b/src/core/fusion/arena.c                      |  273 +++++++++++--------------
 b/src/core/fusion/arena.h                      |    9 
 b/src/core/fusion/fusion.c                     |   23 +-
 b/src/core/fusion/fusion_internal.h            |   57 -----
 b/src/core/fusion/lock.c                       |    7 
 b/src/core/fusion/reactor.c                    |   12 -
 b/src/core/fusion/shmalloc/shmalloc.c          |   18 +
 b/src/core/fusion/shmalloc/shmalloc_internal.h |    5 
 b/src/core/gfxcard.c                           |    4 
 b/src/core/input.c                             |    6 
 b/src/core/layers.c                            |    6 
 b/src/misc/colorhash.c                         |    6 
 src/core/fusion/util.c                         |  141 ------------
 16 files changed, 197 insertions(+), 379 deletions(-)



commit ae6e3e9d4d125e2ff283660accb47aca7cb40b59
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 19:17:30 2002 +0000

    Fixed DLBM_TILE : DLBM_IMAGE order.


 dfbg.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 44d52ca252ebb662ea5e589ca88f53ecd783cbdc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 18:50:54 2002 +0000

    Check layer->shared->stack before repainting.


 layers.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4c0c4366521d10c0af710512a2adccfeec34223d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Nov 12 15:11:16 2002 +0000

    Added --color option to dfbg.


 docs/dfbg.1.in             |   11 ++++++---
 docs/directfb-csource.1.in |    8 +++---
 tools/dfbg.c               |   55 +++++++++++++++++++++++++++++++++++++++++----
 3 files changed, 63 insertions(+), 11 deletions(-)



commit 57a9fe8647ee28d49fdf292619a0474b570eb68c
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Nov 12 14:22:36 2002 +0000

    Added a man-page for dfbg.


 configure.in     |    3 ++-
 docs/.cvsignore  |    3 ++-
 docs/Makefile.am |    2 ++
 docs/dfbg.1.in   |   34 ++++++++++++++++++++++++++++++++++
 4 files changed, 40 insertions(+), 2 deletions(-)



commit 2f50cbf1a1714d961ffb38e80de006939efad064
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Nov 12 14:08:11 2002 +0000

    Added --tile command-line option to dfbg.


 dfbg.c |  104 ++++++++++++++++++++++++++++++++++++++++++++---------------------
 1 file changed, 71 insertions(+), 33 deletions(-)



commit b326bf1dbc57cd286f2e62a8eac1a7c2dd45940e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 12 02:42:17 2002 +0000

    Added background configuration tool.
    
    Updated ipc_cleanup.


 .cvsignore  |    1 
 Makefile.am |    5 +
 dfbg.c      |  186 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 ipc_cleanup |    5 -
 4 files changed, 193 insertions(+), 4 deletions(-)



commit f240d3714138f220f03e6d00e5477b1a19ae7225
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 11 17:33:55 2002 +0000

    Updated vsync irq patch from Ville Syrjala.


 gfxdrivers/matrox/matrox_crtc2.c                    |    9 +++++----
 patches/matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2 |binary
 src/core/fbdev/fbdev.c                              |    4 +++-
 3 files changed, 8 insertions(+), 5 deletions(-)



commit 09cbc66c3e7e8610d263999cd1a1de3b2b1c96bb
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Nov 11 15:32:30 2002 +0000

    check prog != NULL before calling strlen() on it


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3fb48318ed7c8da924adcf84a9fde4d99d87a244
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 11 15:01:54 2002 +0000

    Made dfb_back_to_front_copy() thread safe as skirmish is now a recursive lock.


 util.c |   12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)



commit a95d4a3e8eab447bb2397a1d073b3e604f48ce6e
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Nov 11 15:00:29 2002 +0000

    Fixed some spelling errors and documented the new behaviour of 'no-hardware'.


 README               |   39 ++++++++++++++++++++-------------------
 docs/directfbrc.5.in |    3 ++-
 2 files changed, 22 insertions(+), 20 deletions(-)



commit 325293ec542a85884bf7e4c7f44856023c35bff3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 11 05:33:09 2002 +0000

    Use hardware key code for auto grabbing pressed keys (using the symbol
    was buggy because of modifiers being changed while a key is pressed).


 windows.c |   25 +++++++++++++++----------
 1 file changed, 15 insertions(+), 10 deletions(-)



commit 375631844924fa5395c6bfb25c9e5fe8fe201ef9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 11 05:16:41 2002 +0000

    Check return value of iopl() instead of segfaulting.


 fbdev.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 3ac73664a0e7c5e76655ed8a8f39f885a7de3b4f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 11 03:58:51 2002 +0000

    Rewrote multi app reactor code, *much* simpler and cleaner now.
    Improved performance and stability. No message queues anymore.
    
    Old version via message queue:
    
    reactor attach/detach                 ->     8.03 k/sec
    reactor attach/detach (2nd)           ->   323.21 k/sec
    reactor dispatch                      ->   333.33 k/sec  (100% arrived)
    
    New version via Fusion Kernel Device:
    
    reactor attach/detach                 ->   375.09 k/sec
    reactor attach/detach (2nd)           ->   403.88 k/sec
    reactor dispatch                      ->   754.15 k/sec  (100% arrived)
    
    Now the master is the only DirectFB application with more than one
    additional thread.
    
    Only one single SysV IPC resource is left (shm segment of arena).
    Everything else is already handled by the Fusion Kernel Device.
    
    Support for multi app without kernel device is dropped.


 README                            |   12 
 TODO                              |    1 
 configure.in                      |   17 -
 src/core/coredefs.h               |    8 
 src/core/fusion/arena.c           |   18 -
 src/core/fusion/fusion.c          |  370 +++++-----------------------
 src/core/fusion/fusion_internal.h |    9 
 src/core/fusion/lock.c            |  145 -----------
 src/core/fusion/property.c        |  323 ------------------------
 src/core/fusion/reactor.c         |  500 ++++++++++++--------------------------
 src/core/fusion/reactor.h         |    3 
 src/core/fusion/ref.c             |  341 -------------------------
 src/core/windows.c                |    2 
 src/misc/util.c                   |   31 ++
 src/misc/util.h                   |    1 
 tools/fusion_bench.c              |   58 +---
 16 files changed, 354 insertions(+), 1485 deletions(-)



commit eae999f9dc3e97489484c2eb145a8bb939f0f284
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 10 19:40:05 2002 +0000

    Don't block signals in DirectFB threads of slaves.


 thread.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit a89f93d02ea728e3ba4519afb88168823991d4f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 9 01:20:19 2002 +0000

    df_dok related bugs are fixed.


 BUGS |    4 ----
 1 file changed, 4 deletions(-)



commit 607229177b623f2ea434b190ce4de7096b9422f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 9 01:18:15 2002 +0000

    32 was the old value, not 16.


 fonts.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b634e78a91ea36379e27e13648f8eb17ec5e7dc6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 23:15:23 2002 +0000

    If multiple arguments are passed,
    use the first one for output and others for input.


 dfb_static_build_example |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit 188b5b4956edb2e6585e78bf3f3f398491418a44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 22:57:08 2002 +0000

    Attach listener to glyph surfaces to have at least one listener attached.
    Set glyph surface size back to the old value (maxadvance * 32).


 fonts.c |   37 +++++++++++++++++++++++++++++++++----
 fonts.h |    1 +
 2 files changed, 34 insertions(+), 4 deletions(-)



commit 2b70c8359757d7ee5bb7e29ffac7725aa4f980d4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 21:33:08 2002 +0000

    Fixed off-by-one bug in image loading code (multiplication by alpha).
    Fixes broken color keyed blits in df_dok.


 gfx_util.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit c7c12eeef97a64551aa8c4916db361ec10020721
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 21:09:01 2002 +0000

    Fullscreen applications not calling SetVideoMode() and not setting the format in
    the surface description of the primary take care of the "pixelformat=" option.


 idirectfb.c |    3 +++
 1 file changed, 3 insertions(+)



commit d246298a82f99242fd0a20835678aaf6706406a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 20:16:20 2002 +0000

    Fullscreen applications that are started with the "mode=" option and don't
    call SetVideoMode() now switch to the mode specified with the option.


 idirectfb.c |   12 ++++++++++++
 1 file changed, 12 insertions(+)



commit 1f4080147391a9f588b5a701b4c5ecd00bbe6d46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 8 17:41:22 2002 +0000

    Implemented additional config file loading for each application.
    
    E.g. running "df_dok" or "/foo/bar/df_dok" will look for config files
    "/etc/directfbrc.df_dok" and "~/.directfbrc.df_dok".
    
    'no-hardware' now only disables acceleration, but driver is loaded and
    additional layers are used.


 core/gfxcard.c |   21 ++++++++++++++++++---
 misc/conf.c    |   39 +++++++++++++++++++++++++++++++++++----
 2 files changed, 53 insertions(+), 7 deletions(-)



commit 0e3cd6173ea63e0a9e45934c0e31b8c4a76e4fdd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 7 23:41:34 2002 +0000

    Check for desc != NULL.


 idirectfbfont_default.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 872447f29a179f361489e3cc1a237d1e8c69ae33
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 7 22:17:24 2002 +0000

    Check for NULL.


 system.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 115efd890d566c1e01629aeb9acfa2a1440bf0c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 7 22:00:58 2002 +0000

    Added system hook ThreadInit() that is called at the beginning of new threads.
    The fbdev system detaches the thread from the controlling tty.
    Otherwise mode restoring done by input threads (if layer is orphaned) goes
    to the tty the app has been started from. The main thread has been detached
    eversince.


 core_system.h |    4 ++++
 fbdev/fbdev.c |    9 +++++++++
 sdl/sdl.c     |    6 ++++++
 system.c      |    6 ++++++
 system.h      |    8 ++++++++
 thread.c      |    3 +++
 6 files changed, 36 insertions(+)



commit c30f9fa5a6b4d831fcdf354f1b0d32d4e8487cf9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 7 21:40:40 2002 +0000

    Fix deadlock during lease of orphaned layer.


 layers.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit 98beff28a9eb3a6cf77f0f4eabc9cb2914d19934
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 5 22:57:44 2002 +0000

    Show window of windowed fullscreen apps on first Flip.


 display/idirectfbsurface_window.c |    5 ++++-
 idirectfb.c                       |    2 --
 2 files changed, 4 insertions(+), 3 deletions(-)



commit 6423f0879866238b21eb0e3cded47b598c2f4fe0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 5 22:49:04 2002 +0000

    Commented out state locking in listeners to avoid a deadlock between
    state/reactor lock (locked in different order by two threads).


 state.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 7a964df9c394d8d90241ebf993a8e6cd7d7eed56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 5 17:10:14 2002 +0000

    Interpret EINVAL like EIDRM in receiver.


 reactor.c |   11 +++--------
 1 file changed, 3 insertions(+), 8 deletions(-)



commit 17260aea820fecff16159b2df560b68a08049cd0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 5 14:48:56 2002 +0000

    Made skirmish recursive mutex in single app core. Multi app skirmish
    has to be made recursive, too.


 fusion/Makefile.am |    2 +-
 fusion/lock.c      |   29 +++++++++++++++++++++++++++++
 fusion/lock.h      |    6 +++++-
 gfxcard.c          |    6 ++----
 4 files changed, 37 insertions(+), 6 deletions(-)



commit e19241a150340c1fc6c19d33e4a92cda25c28d12
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Nov 4 19:19:25 2002 +0000

    check if the window has a surface before trying to access its palette


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c9c136115ce00f789bf74848f2528364aae6a1f2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 4 19:04:11 2002 +0000

    devfs support


 fusion.c |   19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)



commit 75b3fa0ccd7ec1f2b07762406317e6591b5c875d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 4 17:40:16 2002 +0000

    Added state locking to dfb_state_set_source/destination() and the installed
    listeners. References to the surfaces are now increased/decreased.
    More stable now, but had to use Unix98 recursive mutex.


 state.c |   63 ++++++++++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 52 insertions(+), 11 deletions(-)



commit 5f84191c2212d32feb8e414fa2a69ab8ac3b2eb5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 4 16:42:21 2002 +0000

    Use new in-kernel fusion property.


 src/core/fusion/property.c |  161 +++++++++++++++++++++++++++++++++++++++------
 src/core/fusion/property.h |    2 
 tools/fusion_bench.c       |   36 ++++++++++
 3 files changed, 180 insertions(+), 19 deletions(-)



commit f2382dfb9c86c805c98def6f73aca9b648950700
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 2 05:20:21 2002 +0000

    dfb_surface_attach() was called too early.


 idirectfbsurface.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit decdaac99fda82242008b175f60db0c1f72dea34
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 2 01:44:40 2002 +0000

    Use Fusion Kernel Device.


 lock.c |  155 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++------
 lock.h |   12 ++---
 2 files changed, 149 insertions(+), 18 deletions(-)



commit b76ce0bb04ae3a79ae22e88bcf45b29d1d5ac66b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 1 23:06:35 2002 +0000

    Added DFBBoolean.
    
    DFBWindowEvent fields cx, cy, buttons, locks and modifiers
    are always set now (except for DWET_DESTROYED).
    
    API change
    ----------
    
    IDirectFB::CreateEventBuffer() no longer attaches input devices and doesn't
    take input capabilities.
    
    IDirectFB::CreateInputEventBuffer() implements the old behaviour with an
    additional argument "global". If global is DFB_FALSE events will only be
    delivered if this instance of IDirectFB has a focused primary (either running
    fullscreen or running in windowed mode with the window being focused).
    
    Version is 0.9.15 now.


 configure.in                |    2 
 include/directfb.h          |   27 ++++++++++++-
 include/directfb_keyboard.h |    5 +-
 src/core/layers.c           |    2 
 src/core/windows.c          |   90 ++++++++++++++++++++------------------------
 src/core/windows.h          |    4 -
 src/idirectfb.c             |   26 ++++++++++--
 7 files changed, 98 insertions(+), 58 deletions(-)



commit 58dabf0cde6d5cef26e5e18dc31efb7bcecd27b2
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Nov 1 22:37:42 2002 +0000

    Don't write out of bounds if the default cursor is loaded into a non-ARGB
    surface (--dfb:no-translucent-windows).
    
    Switch the display layer palette to the one of the focused
    window. Added TODO item since this needs more changes.


 TODO               |    2 ++
 src/core/layers.c  |    4 ++--
 src/core/windows.c |    9 +++++++++
 3 files changed, 13 insertions(+), 2 deletions(-)



commit 263b1549e5baccfa6ca6f4dcd7fa7bf2cf0a4999
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Nov 1 21:38:20 2002 +0000

    notify listeners about a palette change in dfb_surface_set_palette()


 surfaces.c |    5 +++++
 1 file changed, 5 insertions(+)



commit c024e49791e449a68ba291570993d8bb6921f022
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Nov 1 21:37:44 2002 +0000

    Use the size of the palette in dfb_palette_generate_rgb332_map() instead
    of assuming 256 entries.


 palette.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit 54d03df4f5000d31d01b1135b822cbf8604c6a1d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 1 17:26:09 2002 +0000

    Implemented implicit grabbing of keys when they are pressed.
    Subsequent events of this key are sent to the owner.
    Releasing a key ungrabs it. If a window is closed while grabbing a
    key, the window gets a pseudo release event. If fullscreen mode is
    entered all keys are flushed (ungrabbed sending release events).


 layers.c  |    7 +++
 windows.c |  122 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 windows.h |   17 ++++++++
 3 files changed, 140 insertions(+), 6 deletions(-)



commit b5b77ad5daf033e8afc32c5aa6da3fade4c305e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 1 13:38:21 2002 +0000

    Added threaded skirmish benchmark.


 fusion_bench.c |   72 ++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 64 insertions(+), 8 deletions(-)



commit fb1a3fae3aa6bc5e4f63eabae2088bb76c1159e4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 19:45:42 2002 +0000

    Number of reactor_dispatch() calls depends on single/multi app config.


 fusion_bench.c |   14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)



commit 7f00497df6498388739fb5733d531d07fa97afc6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 19:40:01 2002 +0000

    oops


 fusion_bench.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f81fa71a1c29a91a4b360bdf209189360b0b2d71
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 19:39:11 2002 +0000

    Added reactor_dispatch() benchmark.


 fusion_bench.c |   44 +++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 41 insertions(+), 3 deletions(-)



commit 5634a44dd5f686e95cc4aeeaf037ca890cb806cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 19:17:14 2002 +0000

    Added reactor attach/detach benchmark.


 fusion_bench.c |   69 +++++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 65 insertions(+), 4 deletions(-)



commit 22e0df5bba69b00bc8aca3badb017d200cadbaea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 18:12:23 2002 +0000

    Forgot initialisation of waiting counter.


 ref.c |    1 +
 1 file changed, 1 insertion(+)



commit 8702a216f37bd91b0db2bba34621bb99355ae9f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 17:57:23 2002 +0000

    Only call pthread_cond_broadcast() if someone is waiting.


 ref.c |    8 ++++++--
 ref.h |    1 +
 2 files changed, 7 insertions(+), 2 deletions(-)



commit bc7223328c94a52f302d2b9da17a9cc3a1e75ff0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 17:52:38 2002 +0000

    Added missing pthread_cond_init.


 ref.c |    2 ++
 1 file changed, 2 insertions(+)



commit e2c4accb665b8b418999f7553ec2ee42961f7713
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 17:38:42 2002 +0000

    Added Fusion benchmark application.


 .cvsignore     |    1 
 Makefile.am    |    4 +
 fusion_bench.c |  193 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 198 insertions(+)



commit d5a7f93d5c22680bd11aa839f33074d8e8a978b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 30 14:25:24 2002 +0000

    Use stderr for the banner, like all other messages.


 directfb.c |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)



commit cac8cc70c0925b84539afcd6701caa2bdfe2ea6f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 29 18:39:31 2002 +0000

    Don't interpret negative ref count as a negative errno until ref counter
    bug is fixed.


 ref.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit cb125aeb7f14f3a6d4f7b8e528b67dcb4178a74b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 29 15:10:46 2002 +0000

    last commit before 0.9.14 release


 ChangeLog |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit ff4a9571567ba135ea37ab175dbbf9d717aa0ad8
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Oct 29 14:54:56 2002 +0000

    added a note about dfbdump


 README |    3 +++
 1 file changed, 3 insertions(+)



commit a6985f74f977fbee3b012a5f11c0d8bbd1672cc9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 29 14:41:18 2002 +0000

    updated


 ChangeLog |  120 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |    1 
 2 files changed, 121 insertions(+)



commit bee14a47b118b0683aa4a6c267dc13a0cbd719f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 29 14:40:45 2002 +0000

    Has an extra CVS module now.


 /dev/null             |binary
 b/patches/Makefile.am |    2 --
 patches/README.fusion |   16 ----------------
 3 files changed, 18 deletions(-)



commit f8f052ebf67f216bca5f99983a375bf7016896cc
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Oct 29 13:57:58 2002 +0000

    Added support for DFDESC_FIXEDADVANCE.


 idirectfbfont_default.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 3ac041050e8e7edabec80b042f3959f706528615
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 29 13:42:43 2002 +0000

    Added DFDESC_FIXEDADVANCE as a workaround for using proportional fonts fixed.
    
    Added DFFA_NONE.


 directfb.h |   15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)



commit 7743e4f9d1e5048677ff5e235c2411bd06afa230
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 19:50:21 2002 +0000

    Assure that glyphs with an empty bitmap are inserted into the glyph cache
    with zero width and height. Simplifies some checks performed when rendering.


 fonts.c   |    5 ++++-
 gfxcard.c |   14 +++++---------
 2 files changed, 9 insertions(+), 10 deletions(-)



commit c4c24b2fa8c940cdb2357110ac3c02d30f173bff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 19:28:48 2002 +0000

    Use larger glyph surfaces to reduce expensive switching
    (caused by reactor attach/detach).


 fonts.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 04c4d41e7f2865137ac09dee0d5f03a5685ae523
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 19:22:49 2002 +0000

    Use CoreThread with new type CTT_MESSAGING.


 fusion/reactor.c |   27 ++++++++++++++-------------
 thread.c         |    6 +++++-
 thread.h         |    3 ++-
 3 files changed, 21 insertions(+), 15 deletions(-)



commit e38d92cb96684744b3c69e9abecb5d93d31f14dc
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 19:19:18 2002 +0000

    indentation


 idirectfbsurface.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 7cd55fd06ea3e8f15e156455ecc7d9461e4209a8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 18:58:00 2002 +0000

    Check x too in simple pre clipping of dfb_gfxcard_drawstring().


 gfxcard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 08f9ed3458ca32158a17e7b067018024495acb0d
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 18:27:04 2002 +0000

    Added a description of the builtin "window manager".


 README |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit bcae600e798df938ed707c84238b19f24c91ac7d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 18:23:08 2002 +0000

    DFB_CFLAGS are behind CFLAGS again. Otherwise "-g -O2" may override the
    debugging/optimization options of DirectFB's configure script.


 configure.in |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit c7e6ec291924706f7ed314591cb0d4866b4d4e5d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 17:43:00 2002 +0000

    Multi app related.


 NEWS |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 3b4a858beb388ee96a05e7987154a2e1ba3fe7ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 17:36:16 2002 +0000

    SetOpacity() for sub picture layer fix by Ville Syrjala <syrjala@sci.fi>.


 matrox_spic.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 37f63b342a9097a61e08e3e9217587c7477150ba
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 28 17:22:21 2002 +0000

    - added OpenBSD to the list of supported operating systems


 README |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 29afc314c55bf34bbc097384249693c808a23ab7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 17:19:28 2002 +0000

    The linux-fusion module doesn't only give performance, but also more stability.


 README |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 9c03ef46e49da0fec24b0f496067da91f9d3bea9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 28 16:01:27 2002 +0000

    Fixed fusion_object_destroy() for calls outside the object destructor.


 object.c |   14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)



commit 1999736ad9e82c8701762e1716fc39b8ae2e0458
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 15:24:26 2002 +0000

    Added sdl.h to SOURCES.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit 8c8b5823b00e9bd53d2ab1aec8d903542ee2ad7f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 15:12:19 2002 +0000

    added more ifdefs around MMX and SSE code


 cpu_accel.c |   12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)



commit 18b9e85a2e9d84fd900780c5260e140137ffa302
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 13:31:57 2002 +0000

    Updates.


 ChangeLog |  298 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |    5 -
 2 files changed, 302 insertions(+), 1 deletion(-)



commit 258b63376e4b5772f45e0ffd9b8f8428a5c92c97
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 13:20:41 2002 +0000

    Check if binutils support SSE assembly and compile the SSE code
    conditionally.


 configure.in      |   28 ++++++++
 src/misc/memcpy.c |  179 ++++++++++++++++++++++++++++--------------------------
 2 files changed, 120 insertions(+), 87 deletions(-)



commit f003aa5a6ee0ebf9a6280d983cacc100f5580d4f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 12:39:41 2002 +0000

    oops


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1c21bf783d340a7f83a9743cc10c80c9ae45b59a
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 12:35:53 2002 +0000

    Simplified the configure tests for MMX, fbdev and sdl.
    Set SDL_CFLAGS and SDL_LIBS using $SDL_CONFIG so that people can specify
    which sdl-config to use.
    Use SDL_CFLAGS and SDL_LIBS in the Makefile.


 configure.in             |   76 ++++++++++++++++++++++-------------------------
 src/core/sdl/Makefile.am |    4 +-
 2 files changed, 38 insertions(+), 42 deletions(-)



commit 3ae8eb618ea4cf5fbbf87e46cc1af8ba1815eaad
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 12:07:17 2002 +0000

    Corrected spelling of frame buffer.


 NEWS               |   14 +++++++-------
 README             |   12 ++++++------
 README.screenshots |    4 ++--
 configure.in       |   14 +++++++-------
 directfb.pc.in     |    2 +-
 directfb.spec.in   |    6 +++---
 6 files changed, 26 insertions(+), 26 deletions(-)



commit a16602230461339fa699e365b4e4dc6677306a53
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 11:56:52 2002 +0000

    moved some lines around


 configure.in |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit c0fc87b3421f3edb0a56c21fc2bd6ab9bb23a257
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 11:32:27 2002 +0000

    Don't build MMX code if MMX was disabled by configure.


 memcpy.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit e265759961a68b279a082770bbf8a7821327fda0
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 11:13:24 2002 +0000

    Reformatted some comments; no changes.


 memcpy.c |  112 +++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 60 insertions(+), 52 deletions(-)



commit e1a64a38820371f443ab8df8593bff476e63941e
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 11:03:20 2002 +0000

    Document the new pixelformat parameter in directfbrc.


 docs/directfbrc.5.in |    7 +++++++
 src/misc/conf.c      |    2 ++
 2 files changed, 9 insertions(+)



commit 8976c0c9c472c650cc32c999e75c8b26994a658f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Oct 28 10:37:59 2002 +0000

    Fixed obvious typo which caused --dfb:depth to fail.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 29a90abc9ded81ee43b2a0b566cf1145196f0508
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 18:17:16 2002 +0000

    Improvements to the spec file by Till Adam.


 directfb.spec.in |   36 +++++++++++++++++++-----------------
 1 file changed, 19 insertions(+), 17 deletions(-)



commit e57466f9f7b8bc1f8a3916b0687b8af2925dca59
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 16:56:26 2002 +0000

    Include the generated spec file in the tarball as well to make it
    possible to build RPMs directly from the tarball.


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit a951621daa198a0b3a3e994b03addcf9c2f054f6
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 13:19:44 2002 +0000

    code cleanup, no changes


 ps2mouse.c |   53 ++++++++++++++++++++++++++++++-----------------------
 1 file changed, 30 insertions(+), 23 deletions(-)



commit 524ecb10f1bb0c2d0960acf15cedd8583ebf7b20
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 13:01:29 2002 +0000

    Explain how to use the multi-application core.


 README |   34 ++++++++++++++++++++++++++++++++++
 1 file changed, 34 insertions(+)



commit 972e1e3df8fa40b495e5f024672c52b9d50e39c9
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 11:18:22 2002 +0000

    Removed cflags_set hack from configure.in. We don't need it any longer
    since we don't touch CFLAGS.


 configure.in |   12 ------------
 1 file changed, 12 deletions(-)



commit 23179f711ba2a49249a85496037a540b1ec54ee2
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 11:12:00 2002 +0000

    Applied patches from Andreas Oberritter <obi@tuxbox.org>:
    
    Call libtoolize from autogen.sh since newer automake versions don't do
    this for us anymore.
    Use AM_CFLAGS instead of CFLAGS, which is a user variable.
    Check for C++ compiler in configure.


 autogen.sh                                          |    3 ++-
 configure.in                                        |    1 +
 gfxdrivers/ati128/Makefile.am                       |    2 +-
 gfxdrivers/cyber5k/Makefile.am                      |    2 +-
 gfxdrivers/matrox/Makefile.am                       |    2 +-
 gfxdrivers/neomagic/Makefile.am                     |    2 +-
 gfxdrivers/nvidia/Makefile.am                       |    2 +-
 gfxdrivers/savage/Makefile.am                       |    2 +-
 gfxdrivers/tdfx/Makefile.am                         |    2 +-
 inputdrivers/dbox2remote/Makefile.am                |    2 +-
 inputdrivers/h3600_ts/Makefile.am                   |    2 +-
 inputdrivers/joystick/Makefile.am                   |    2 +-
 inputdrivers/keyboard/Makefile.am                   |    2 +-
 inputdrivers/linux_input/Makefile.am                |    2 +-
 inputdrivers/lirc/Makefile.am                       |    2 +-
 inputdrivers/ps2mouse/Makefile.am                   |    2 +-
 inputdrivers/serialmouse/Makefile.am                |    2 +-
 inputdrivers/sonypi/Makefile.am                     |    2 +-
 inputdrivers/ucb1x00_ts/Makefile.am                 |    2 +-
 interfaces/IDirectFBFont/Makefile.am                |    2 +-
 interfaces/IDirectFBImageProvider/Makefile.am       |    2 +-
 interfaces/IDirectFBImageProvider/mpeg2/Makefile.am |    2 +-
 interfaces/IDirectFBVideoProvider/Makefile.am       |    4 ++--
 src/Makefile.am                                     |    2 +-
 src/core/Makefile.am                                |    2 +-
 src/core/fbdev/Makefile.am                          |    2 +-
 src/core/fusion/Makefile.am                         |    2 +-
 src/core/fusion/shmalloc/Makefile.am                |    2 +-
 src/core/sdl/Makefile.am                            |    2 +-
 src/display/Makefile.am                             |    2 +-
 src/gfx/Makefile.am                                 |    2 +-
 src/gfx/generic/Makefile.am                         |    2 +-
 src/input/Makefile.am                               |    2 +-
 src/media/Makefile.am                               |    2 +-
 src/misc/Makefile.am                                |    2 +-
 src/windows/Makefile.am                             |    2 +-
 tools/Makefile.am                                   |    2 +-
 37 files changed, 39 insertions(+), 37 deletions(-)



commit f517047ea3bbf6b70f02dac8a6743ebc93051019
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Oct 27 10:58:39 2002 +0000

    Added directfb.spec.in based on a spec file provided
    by Till Adam <till@adam-lilienthal.de>.


 .cvsignore       |    1 
 Makefile.am      |   11 +++--
 configure.in     |    1 
 directfb.spec.in |  110 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 118 insertions(+), 5 deletions(-)



commit a8ae81b36e401fd22beab07fdd14a7b29b7dbee1
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 19:21:53 2002 +0000

    - dont use RTLD_GLOBAL if it is undefined (compilation fix for OpenBSD)


 interface.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 60dc872a9ac579bcb794ddc7d1b0993c6f05beb2
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 19:15:58 2002 +0000

    - dont use RTLD_GLOBAL if it is undefined (compilation fix for OpenBSD)


 core.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 3351b0d9caaca1cdf5446da51c868766d361d38f
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 19:10:42 2002 +0000

    - fixed typo, mention OpenBSD
    - initial OpenBSD support (incomplete)


 README       |    8 +++++---
 configure.in |   34 ++++++++++++++++++++++------------
 2 files changed, 27 insertions(+), 15 deletions(-)



commit 28b8a259425b9ab1f8e278e72c24f4b84e3b2fc0
Author: Sven Neumann <neo@directfb.org>
Date:   Sat Oct 26 18:20:16 2002 +0000

    reformatted


 README |   25 +++++++++++++------------
 1 file changed, 13 insertions(+), 12 deletions(-)



commit 67081316cacf6b2ba70a3038ee6f7c159a42b07b
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 16:01:15 2002 +0000

    - added section on supported operating systems


 README |   26 +++++++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)



commit 42ccf3f0defbbdffa7a0f48859fce5f5b02e0b3f
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 12:58:51 2002 +0000

    - NetBSD compile fix: only use ENOTSUP if it is defined (missing in NetBSD)


 util.c |    3 +++
 1 file changed, 3 insertions(+)



commit 4b253770636b4c1ee26434ec2ac8920d9d3e3c37
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 26 12:53:41 2002 +0000

    - added support for NetBSD (tested on NetBSD-1.6)


 configure.in |   21 ++++++++++++---------
 1 file changed, 12 insertions(+), 9 deletions(-)



commit cef20e49dbb89402adcdea4ad219e36f6c1232bc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 17:14:55 2002 +0000

    The option "pixelformat=" does work with windowed fullscreen apps, too.
    If ARGB is specified, the window will be alpha blended.


 BUGS            |    5 +++++
 src/idirectfb.c |   33 ++++++++++++++++++++++++++++-----
 2 files changed, 33 insertions(+), 5 deletions(-)



commit 2e3ef3019acdcea1fa3798cb732eb3b6851ef8de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 16:30:04 2002 +0000

    Windowed fullscreen apps can now be given a window size via the mode= option.


 idirectfb.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 1a6fb8b5e2bf280805986de654d637e4ed0c6e8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 14:51:53 2002 +0000

    Whuuuhuuu, Cyber Pro DirectFB driver release in 0.9.14 ;)


 configure.in                          |   17 
 gfxdrivers/Makefile.am                |    8 
 gfxdrivers/cyber5k/.cvsignore         |    6 
 gfxdrivers/cyber5k/Makefile.am        |   27 +
 gfxdrivers/cyber5k/cyber5k.c          |  827 ++++++++++++++++++++++++++++++++++
 gfxdrivers/cyber5k/cyber5k.h          |   61 ++
 gfxdrivers/cyber5k/cyber5k_alpha.c    |  258 ++++++++++
 gfxdrivers/cyber5k/cyber5k_alpha.h    |   62 ++
 gfxdrivers/cyber5k/cyber5k_overlay.c  |  371 +++++++++++++++
 gfxdrivers/cyber5k/cyber5k_overlay.h  |   90 +++
 gfxdrivers/cyber5k/cyber5k_underlay.c |  334 +++++++++++++
 gfxdrivers/cyber5k/mmio.h             |  128 +++++
 gfxdrivers/cyber5k/regs.h             |  413 ++++++++++++++++
 13 files changed, 2601 insertions(+), 1 deletion(-)



commit 55daa6697a2c11d83e4b9db00e12a0d692c3cd70
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 14:25:01 2002 +0000

    Moved all static variables into instance struct to make GIF loader thread safe.


 idirectfbimageprovider_gif.c |  289 ++++++++++++++++++++++---------------------
 1 file changed, 148 insertions(+), 141 deletions(-)



commit 21cd89150883ecef5096503e034be0692286a9c8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 13:52:14 2002 +0000

    Fixed evil bug: wrong parameter order to qsort resulted in unsorted color
    map in FindColorKey. Fixes color keying of a very few GIFs.


 idirectfbimageprovider_gif.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit bc722f3b1d4756c8e1af6d0211555a14e7376c9b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 25 13:12:56 2002 +0000

    Applied patch from Johannes Stezenbach <js@convergence.de> fixing some keys.


 linux_input.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 97693660e424e0fe94b97178ba30f5d2fc553f18
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Oct 24 11:32:30 2002 +0000

    improved README


 README |   37 ++++++++++++++++++++++++++-----------
 1 file changed, 26 insertions(+), 11 deletions(-)



commit 21efc94ad9c3f112d0e5f96043324a6650d3392f
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 16:59:30 2002 +0000

    updates


 README |   42 ++++++++++++++++++++++++++++++++----------
 1 file changed, 32 insertions(+), 10 deletions(-)



commit ddd9be0ad6762aaf5e4825aab77b1d238c1f3ae3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 16:00:18 2002 +0000

    Use thread functions for bone collector loop.
    Added thread type CTT_CLEANUP with priority -15.


 fusion/object.c |   16 +++++++---------
 thread.c        |    4 ++++
 thread.h        |    1 +
 3 files changed, 12 insertions(+), 9 deletions(-)



commit 43afcb8e384b3f9b32ef5893842e22f92c8f0ed0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 15:59:30 2002 +0000

    Update from Ville, return -EFAULT if argument is not a valid pointer.


 matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2 |binary
 1 file changed



commit 273424f5ccd7110bf537a126b3a7018f94b74fae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 15:58:22 2002 +0000

    YUV 4:2:0 chroma plane setup fix from Ville Syrjala <syrjala@sci.fi>.


 matrox_bes.c |   14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)



commit c27a0f5888137aee0f9ad608811a99cb8e8d9686
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 15:23:38 2002 +0000

    Use 0x20000000 instead of 0x70000000 as the shared memory base address
    to avoid collision with stack on MIPS.


 shmalloc.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 67c32e53e6dad75b18206f86b4b894b4fab6d2c2
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 14:56:19 2002 +0000

    Reverted my changes regarding the primary surface for NORMAL mode.
    The old behaviour made more sense actually.


 ChangeLog       | 1129 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/idirectfb.c |   20 
 2 files changed, 1137 insertions(+), 12 deletions(-)



commit 353101270b380302f63ad0feae474b4bab9388de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 13:12:17 2002 +0000

    Changed WM keys a bit:
    A (abandon)  - lower focused window to bottom
    S (show)     - raise focused window to top
    X (eXchange) - cycle through windows (not having DWOP_KEEP_STACKING set).


 windows.c |   15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)



commit e24814f174308e07a3c989eac48cbbacd8e6f8f2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 23 12:49:59 2002 +0000

    Don't try to destroy dead reference.
    Default to graphics-vt only if vt-switch is disabled.


 core/fusion/reactor.c |   18 +++++++++++-------
 misc/conf.c           |    4 +++-
 2 files changed, 14 insertions(+), 8 deletions(-)



commit b80ffa4425abf25a669e5485da28881c2e4c91e5
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 12:14:18 2002 +0000

    Defined THREADFLAGS=-D_REENTRANT and added it to the cflags given by
    pkg-config and directfb-config.


 configure.in       |    9 ++++++++-
 directfb-config.in |    4 ++--
 directfb.pc.in     |    2 +-
 3 files changed, 11 insertions(+), 4 deletions(-)



commit 983de2c37dbc97fcfa49c9f3dd35ced97d97f2d5
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 11:10:50 2002 +0000

    some cleanup


 configure.in |  363 ++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 198 insertions(+), 165 deletions(-)



commit 3fc31acf47a714fa30971a362a19307e3acf1102
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 10:55:54 2002 +0000

    beautified configure output


 configure.in |   32 +++++++++++++++-----------------
 1 file changed, 15 insertions(+), 17 deletions(-)



commit 8ab677b03021b1bd283b13c0f967ae0959da54a8
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 10:02:41 2002 +0000

    Creating a primary surface in normal mode will now result in a fullscreen
    window with options set to KEEP_POSITION, KEEP_SIZE and INDESTRUCTIBLE
    which is probably what people expect.


 idirectfb.c |    3 +++
 1 file changed, 3 insertions(+)



commit edd7eba3955e6565ec65a74aa647ed758c2d0dfc
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 23 09:50:04 2002 +0000

    Initialize the primary width, height and bpp from the primary layer
    instead of using some arbitrary values. Ignore width and height from
    the surface description when creating a primary surface in NORMAL mode
    since we do that for the other modes as well.


 idirectfb.c |   17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)



commit 157efe371863ede34d0e8bc78525487efa158be5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 21:56:35 2002 +0000

    Windows can now be cycled via WM-S (to front, focus).
    Pressing WM-X puts the focused window to the back.


 windows.c |   53 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 windows.h |    1 +
 2 files changed, 54 insertions(+)



commit 0d638b263d576dc119830123d2ac0bdc4af52fab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 20:33:20 2002 +0000

    Null pad opacity.


 dfbdump.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 280be9e01d5f314c6f978d03e5cf9e6b69cc1a57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 20:29:07 2002 +0000

    Added "[no]capslock-meta" enabling mapping of CapsLock to Meta on keymap level.


 docs/directfbrc.5.in             |    5 +++++
 inputdrivers/keyboard/keyboard.c |    3 ++-
 src/misc/conf.c                  |    8 ++++++++
 src/misc/conf.h                  |    2 ++
 4 files changed, 17 insertions(+), 1 deletion(-)



commit 67faba53f021b270eef1d677d1b4e66534299112
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 19:54:03 2002 +0000

    Ensure a focused window in dfb_window_set_opacity() only if window disappeared.


 windows.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit aa9d20bd77e2832431d98b0f2cff0b2776be6522
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 19:48:12 2002 +0000

    Use base level symbol if shift level symbol is null.
    Fixed debug message new lines.


 fusion/lock.c |    6 +++---
 input.c       |    9 +++++++++
 2 files changed, 12 insertions(+), 3 deletions(-)



commit 9dddaa6153e64d1250345b73894b19eec089073a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 17:36:05 2002 +0000

    Add "0" argument to vsync ioctl.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 2ecb93bb3e9f1c06313a08dee8738b6d86a01ce9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 17:31:33 2002 +0000

    Don't detach bg image listener manually, keep the reaction in local memory.


 layers.c |   32 ++++++++++++++++++++------------
 1 file changed, 20 insertions(+), 12 deletions(-)



commit d803ac00b111179d85e774c9aabb7c800b7b9deb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 16:34:37 2002 +0000

    Fixed crash when a foreign reaction is removed.
    Foreign reactions are now disabled during detach, but removed during
    the foreigners reaction loop.
    Relase background image surface after setting it.


 core/fusion/reactor.c |   52 +++++++++++++++++++++++++++-----------------------
 directfb.c            |    2 +
 2 files changed, 31 insertions(+), 23 deletions(-)



commit 073787201ff1a9311f8012e2e8241e19e4574a17
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 16:08:37 2002 +0000

    Accidently committed signal change in DFB_ASSERT.


 coredefs.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit dcecf047f713bb23ee1c79f94fddc768fe46cf97
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Oct 22 16:07:09 2002 +0000

    some updated to the NEWS file


 NEWS |   10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)



commit c83a20bf14a2837301d4bb14a1da76a67e8fecc8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 16:00:12 2002 +0000

    Reverted change that seems to break mode switching if started via suid root
    from console.


 vt.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b82fd384bb6614f59e0b3888d57d92b5d1196e2a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 15:56:04 2002 +0000

    Use LUT8 if depth is 8 (e.g. default mode or SetVideoMode()).


 convert.c |    4 ----
 1 file changed, 4 deletions(-)



commit 86cecb5e6e638cf5267d055583532b0c446bff21
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 22 15:34:45 2002 +0000

    New vsync irq patch from Ville Syrjala <syrjala@sci.fi> with support for
    the second head.


 /dev/null                                             |binary
 b/patches/Makefile.am                                 |    2 +-
 b/patches/matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2 |binary
 3 files changed, 1 insertion(+), 1 deletion(-)



commit 5de8f80d3a8bf20cfcf778900545c2477b11d4a0
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 22 15:21:25 2002 +0000

    enable RGB332 support by default.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit cc92d4fd013877198e30867c2f2fc3a03ee9464e
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Oct 22 15:12:33 2002 +0000

    minor code cleanup


 conf.c |   29 ++++++++++++++---------------
 1 file changed, 14 insertions(+), 15 deletions(-)



commit 50aa6a28f8e3a6287a4363c23bdc97791f509539
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 22 15:08:18 2002 +0000

    declare ModuleDirectory as extern to fix linking problems on darwin


 modules.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c7528e751c171aa5631cedbaffe1a560476d599d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Oct 22 14:37:26 2002 +0000

    Fixed --dfb-help output.
    Documented the directfbrc parameter matrox-tv-standard.


 docs/directfbrc.5.in |    8 ++++++--
 src/misc/conf.c      |    4 ++--
 2 files changed, 8 insertions(+), 4 deletions(-)



commit da118317b4ebd1a45ac6d25c9faf1601ba6ec395
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 22 14:22:53 2002 +0000

    - fixes for automake 1.6x on non-linux platforms


 configure.in |   46 ++++++++++++++++++++--------------------------
 1 file changed, 20 insertions(+), 26 deletions(-)



commit dbc5d38f0c1c1c668221d7c32076a02bc01aed3e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 21 19:37:54 2002 +0000

    Use graphics-vt by default.
    Use no-vt-switch by default if started without root privileges.
    Open mouse device O_EXCL.
    DirectFB now works while gpm is still running.


 inputdrivers/ps2mouse/ps2mouse.c |    2 +-
 src/core/fbdev/vt.c              |    9 +++++++--
 src/core/fusion/fusion.c         |   16 ++++++++++------
 src/misc/conf.c                  |    3 +++
 4 files changed, 21 insertions(+), 9 deletions(-)



commit af51d4a6c01a7b84b08580029c19a5b70827e67e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 21 18:31:16 2002 +0000

    Fixed crash in debug mode after shutdown.


 fusion.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit cd6a7c3b69ec4481942d516599ccd52ce42a9a2c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 21 15:57:15 2002 +0000

    Fixed memory corruption caused by a too early free.
    Really use fusion_get_millis() now for debug output.


 core/coredefs.h               |    7 +++++--
 core/fusion/fusion.c          |    6 ++----
 core/fusion/fusion_internal.h |    8 +++++---
 input/idirectfbinputbuffer.c  |   10 ++++++++--
 windows/idirectfbwindow.c     |    6 +++---
 5 files changed, 23 insertions(+), 14 deletions(-)



commit bdf40ade4c6245239c5f26eba72adf126032819d
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Oct 20 13:11:22 2002 +0000

    - applied patch by Till Adam <till@adam-lilienthal.de> which fixes build
      on MDK9.
    
    (This also fixes problems with autoconf-2.53 and 2.54)


 Makefile.am          |    4 +++-
 configure.in         |   42 +++++++++++++++++++++++++++---------------
 src/core/Makefile.am |    1 +
 3 files changed, 31 insertions(+), 16 deletions(-)



commit 0064f922863ee6f0371581807ffb55a2048c5d5f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 18 19:27:20 2002 +0000

    Fixed segfault in IDirectFBSurface_Window_Flip() if window is destroyed
    before its surface.
    Removed unnecessary fusion_ref_zero_lock() in reactor_free().


 core/fusion/reactor.c             |   12 +++---------
 core/windows.c                    |    7 +++++--
 display/idirectfbsurface_window.c |    6 +++---
 3 files changed, 11 insertions(+), 14 deletions(-)



commit e609a4b877308b57729d7418546cb16e8ab19117
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 18 17:34:03 2002 +0000

    For a windowed primary surface, accept setting of width and height in the
    surface description as a second way to set the size (first is SetVideoMode).


 idirectfb.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit c68333c1e784b3255b85e844db15be81773006d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 18 15:49:09 2002 +0000

    Assertion message shows pid and milli seconds now.
    
    Added more safety and debug output to window destruction code.
    
    Added fusion_get_millis(), debug messages of all fusionees
    have a synchronized milli second counter now.
    
    Added some safety and assertions to reactor code.


 core/coredefs.h            |   10 ++-
 core/fusion/fusion.c       |   22 +++++++-
 core/fusion/fusion.h       |   30 ++++++-----
 core/fusion/reactor.c      |  109 +++++++++++++++++++++++++++---------------
 core/fusion/reactor.h      |    1 
 core/windows.c             |    8 ++-
 display/idirectfbsurface.c |   18 +++++-
 windows/idirectfbwindow.c  |  116 ++++++++++++++++++++++++++++-----------------
 8 files changed, 207 insertions(+), 107 deletions(-)



commit 5e61fc4a42ed3e606af86c20d8bb477e2b8c35fd
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Oct 17 08:55:54 2002 +0000

    Set the button mask in DWET_MOTION events.


 include/directfb.h |    1 +
 src/core/layers.c  |    2 +-
 src/core/windows.c |   28 ++++++++++++++++++----------
 src/core/windows.h |    3 ++-
 4 files changed, 22 insertions(+), 12 deletions(-)



commit 0291fdc6a92cd8ae54cdda6dfbaf2c1f2d4d9c90
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 16 12:48:22 2002 +0000

    Added quick guide.


 Makefile.am   |    2 ++
 README.fusion |   16 ++++++++++++++++
 2 files changed, 18 insertions(+)



commit bb60470edc0519ca071aad8928bab7cdbec7245c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 16 12:43:09 2002 +0000

    Added experimental kernel device for a much better implementation of
    the fusion concepts. For now FusionRef is implemented in kernel space.
    The old implementation using semaphores doesn't work properly because
    undo counters are hold per process id. But the reference should be valid
    for all threads (processes with the same fusion id).
    
    You have to apply the patch to test it, configure checks for linux/fusion.h
    and uses the old implementation if the header isn't found.
    
    The patch is here for quick testing. Will add a new cvs module with all
    new files directly checked in and a patch for the modified.
    
    The new implementation should be even faster as there is only one system
    call per fusion_ref_* user space library call.
    
    The undo stuff is working as supposed now (per fusion id),
    but fusion_ref_zero_lock() is not implemented in kernel space yet.


 configure.in                                    |   50 +++---
 patches/fusion-all-linux-2.4.20-pre11.patch.bz2 |binary
 src/core/fusion/fusion.c                        |   37 ++++-
 src/core/fusion/fusion_internal.h               |    3 
 src/core/fusion/object.c                        |   13 +
 src/core/fusion/ref.c                           |  176 ++++++++++++++++++++++--
 src/core/fusion/ref.h                           |    2 
 7 files changed, 234 insertions(+), 47 deletions(-)



commit 5da2f4330b9fd8e8795d974c12f150c5fa656639
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 16 11:43:09 2002 +0000

    No inlines if debug is enabled.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 9737b15b1e871f2c6df87cddf0b53b757e46bd6f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 15 21:05:36 2002 +0000

    Better error handling.


 lock.c |   71 +++++++++++++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 54 insertions(+), 17 deletions(-)



commit 92baa32be41ec4cc7348a71778b6b0254be156fb
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 15 19:42:59 2002 +0000

    include missing signal.h, fixes compilation on freebsd 4.7


 conf.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 82b18f908609d7c80a44bd8f5865ad19768d7e88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 15 18:30:54 2002 +0000

    Fixed blocking in fusion_ref_down() if reference counter is already zero.
    Prints an error message and returns FUSION_BUG now.
    
    Improved debug and error output.


 ref.c |   91 ++++++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 51 insertions(+), 40 deletions(-)



commit bf9351e5f3c05178562c2253938fd2fb7dabe729
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 15 16:55:18 2002 +0000

    Added magic value for debugging memory corruption related stuff.


 ref.c |   11 +++++++++++
 ref.h |    1 +
 2 files changed, 12 insertions(+)



commit 50ee35079a508d3e7c34a6cb711c26db65d00df1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 14 20:49:28 2002 +0000

    Decode first picture only.


 mpeg2dec.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 4387733d8fb6b4eec8dfd76bddbc2dfa73c6bcc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 14 18:57:34 2002 +0000

    Moved all global variables into instance struct.
    Removed some more unneeded stuff, got MPEG2 code < 5000 lines of code.


 idirectfbimageprovider_mpeg2.c |   12 
 mpeg2/getbits.c                |  147 +--
 mpeg2/getblk.c                 |  794 +++++++++-----------
 mpeg2/gethdr.c                 | 1020 +++++++++++--------------
 mpeg2/getpic.c                 | 1621 +++++++++++++++++------------------------
 mpeg2/getvlc.c                 |  574 +++++---------
 mpeg2/getvlc.h                 |  165 ----
 mpeg2/global.h                 |  316 +------
 mpeg2/idct.c                   |  219 ++---
 mpeg2/idctref.c                |   68 -
 mpeg2/motion.c                 |  227 ++---
 mpeg2/mpeg2dec.c               |  359 ++++-----
 mpeg2/mpeg2dec.h               |  161 +++-
 mpeg2/recon.c                  |  756 ++++++++-----------
 mpeg2/store.c                  |  686 ++++++++---------
 mpeg2/systems.c                |   22 
 16 files changed, 3142 insertions(+), 4005 deletions(-)



commit 5aae3239b2c5f6b0a7b1dc88be1b19e807e5ccab
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 12 17:19:06 2002 +0000

    added filter for incoming events, much smoother now


 ucb1x00_ts.c |   67 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 66 insertions(+), 1 deletion(-)



commit bd126091806f94ff89e838a8d5cd553590b82f71
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 12 15:17:05 2002 +0000

    added driver for ucb1x00 based touchscreens (used in the "tuxscreen"
    device).
    
    TODO:
      - do not hardcode touchscreen config (read from config file)
      - filter incoming events, there is too much noise


 configure.in                         |    9 +
 inputdrivers/Makefile.am             |    7 
 inputdrivers/ucb1x00_ts/.cvsignore   |    6 
 inputdrivers/ucb1x00_ts/Makefile.am  |   19 ++
 inputdrivers/ucb1x00_ts/ucb1x00_ts.c |  286 +++++++++++++++++++++++++++++++++++
 5 files changed, 327 insertions(+)



commit 8d9fa5242bc5de866b9ae1d09686b113d7cdc764
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 11 18:36:10 2002 +0000

    Added prefix to all non-static methods.


 getbits.c  |   24 ++---
 getblk.c   |   80 ++++++++---------
 gethdr.c   |  282 ++++++++++++++++++++++++++++++-------------------------------
 getpic.c   |  108 +++++++++++------------
 getvlc.c   |  112 ++++++++++++------------
 global.h   |   76 ++++++++--------
 idct.c     |    8 -
 idctref.c  |    8 -
 motion.c   |   30 +++---
 mpeg2dec.c |   24 ++---
 recon.c    |    6 -
 store.c    |   20 ++--
 systems.c  |   10 +-
 13 files changed, 394 insertions(+), 394 deletions(-)



commit 3f5ee601c25bdbb1f32175f330f28d0669c54c3b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 11 17:49:51 2002 +0000

    Fix crash due to static variables.


 store.c |   40 +++++++++++++++++-----------------------
 1 file changed, 17 insertions(+), 23 deletions(-)



commit a6b7a26447917aac963215c0b9a42732822cceaf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 11 16:02:53 2002 +0000

    Added MPEG2 I-Frame image provider derived from mpeg2decode (mpeg.org).
    
    Need to move global variables into instance struct.


 configure.in                                                     |    2 
 interfaces/IDirectFBImageProvider/Makefile.am                    |   15 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c |  338 +++
 interfaces/IDirectFBImageProvider/mpeg2/.cvsignore               |    6 
 interfaces/IDirectFBImageProvider/mpeg2/Makefile.am              |   26 
 interfaces/IDirectFBImageProvider/mpeg2/getbits.c                |  150 +
 interfaces/IDirectFBImageProvider/mpeg2/getblk.c                 |  487 ++++
 interfaces/IDirectFBImageProvider/mpeg2/gethdr.c                 |  759 ++++++
 interfaces/IDirectFBImageProvider/mpeg2/getpic.c                 | 1086 ++++++++++
 interfaces/IDirectFBImageProvider/mpeg2/getvlc.c                 |  458 ++++
 interfaces/IDirectFBImageProvider/mpeg2/getvlc.h                 |  491 ++++
 interfaces/IDirectFBImageProvider/mpeg2/global.h                 |  335 +++
 interfaces/IDirectFBImageProvider/mpeg2/idct.c                   |  209 +
 interfaces/IDirectFBImageProvider/mpeg2/idctref.c                |  106 
 interfaces/IDirectFBImageProvider/mpeg2/motion.c                 |  185 +
 interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.c               |  298 ++
 interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.h               |  139 +
 interfaces/IDirectFBImageProvider/mpeg2/recon.c                  |  466 ++++
 interfaces/IDirectFBImageProvider/mpeg2/store.c                  |  491 ++++
 interfaces/IDirectFBImageProvider/mpeg2/systems.c                |   66 
 20 files changed, 6111 insertions(+), 2 deletions(-)



commit 5ab7e6ca2f9cfcd5f094aef528f07ad027ba69dd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 11 16:00:35 2002 +0000

    Fixed keyboard handler for screen dump and sending SIGINT.
    Fixed debug messages (newline).


 fusion/reactor.c |    4 ++--
 input.c          |    3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)



commit a80459a3e0b3d46bf14802dac661bd61569baf5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 11 15:59:09 2002 +0000

    Added simple test if flipping (updating) a window is necessary.


 windows.c |   32 ++++++++++++++++++++++++++------
 1 file changed, 26 insertions(+), 6 deletions(-)



commit b44edec5e5ab6ea4aead2e2f5ea87837ace8b1e1
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Oct 11 01:38:59 2002 +0000

    updated driver to compile again


 h3600_ts.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 80670ec105ccae04ee6e88a7dc8cd8cd5c85ca8f
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Oct 10 16:27:27 2002 +0000

    if the video mode was tested/set successfully, check if there is enough
    video ram (this is for broken framebuffer drivers). maked DirectFB work of tuxscreen.


 fbdev.c |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit 617ca157470464dcad0290a6fdfaa367cbe4d963
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 10 16:01:30 2002 +0000

    A '|' too much.


 idirectfb.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 12c8b2b46330d958f11c6e5fad8e82996ffcf88f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 10 16:00:39 2002 +0000

    Fixed system back buffer fallback.


 idirectfb.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit ab21f925b728c4ef8db05782c75f283f17cad5f2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 10 13:40:15 2002 +0000

    Minor change in focus handling. Leaving a window unfocuses it.


 windows.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 48b3b54cd5df4eb25a7ea74621e67ae4e034ce25
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 9 19:32:42 2002 +0000

    Return NULL in window_at_pointer() if cursor is disabled
    reulting in the top most window getting focus.


 windows.c |    3 +++
 1 file changed, 3 insertions(+)



commit 633f508e9b1f72b102fce6a91c6f84a18de36d78
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 9 18:28:47 2002 +0000

    Added -lm to the linker flags for libpng.
    Don't install dfbdump.


 configure.in      |    4 ++--
 tools/Makefile.am |   10 +++++-----
 2 files changed, 7 insertions(+), 7 deletions(-)



commit b5071efa0f26623825e06ffb87678c4817c128e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 9 17:22:38 2002 +0000

    Fixed RequestFocus.
    Added window opacity to dfbdump output.


 src/windows/idirectfbwindow.c |    2 +-
 tools/dfbdump.c               |    2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)



commit dc65bfd87a3b23507e99e1bd15472d1c1e378529
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Oct 9 13:09:16 2002 +0000

    fixed typo in a comment


 palette.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 21dc6579b799ff1f38759b0a5fb7327dbbd99d1f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 19:38:38 2002 +0000

    Invisible windows are not allowed to request the focus.


 idirectfbwindow.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit ae00cfa7b389194cf0d523096dd89d3555f6a0a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 17:38:49 2002 +0000

    fixed bug message


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d268c462861674375caeb42ec4221617ec8ce050
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 16:09:32 2002 +0000

    removed debug line


 ref.c |    2 --
 1 file changed, 2 deletions(-)



commit 0261a9e78bb8dcf406a3fbaf05fcfaed6adcb6fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 16:02:03 2002 +0000

    Fixed joining, got broken an hour ago.
    Added assertions.
    Lock/unlock fix in arena code.


 arena.c           |   26 ++++++++++++++++----------
 fusion_internal.h |    4 ++--
 2 files changed, 18 insertions(+), 12 deletions(-)



commit 41b7ab030a33b163f4cca24ccf69ba4fec9df8ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 15:02:49 2002 +0000

    same for single app


 core.c |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)



commit 0b1f25c4e1095de06a48fc65e7a223baed526344
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 8 15:00:21 2002 +0000

    Better error handling in init code.


 core.c         |   99 +++++++++++++++++++++++++++++++++++++++------------------
 fusion/arena.c |   48 ++++++++++++++++++++-------
 fusion/arena.h |   37 +++++++++++----------
 fusion/ref.c   |    2 +
 4 files changed, 125 insertions(+), 61 deletions(-)



commit ee0cb85b717770d68e8b2dc18d4ab2d201835308
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 2 19:37:23 2002 +0000

    Moved layer config stuff from IDirectFBDisplayLayer_Construct to IDirectFB.


 TODO                                 |    1 
 src/display/idirectfbdisplaylayer.c  |   37 +++++++++--------------------------
 src/display/idirectfbsurface_layer.c |   30 +---------------------------
 src/idirectfb.c                      |   34 ++++++++++++++++++++++++++------
 4 files changed, 40 insertions(+), 62 deletions(-)



commit d7f6738c5f4f18ac58b6edfe8fa380023104c34e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 2 18:37:15 2002 +0000

    Cleanup of DirectFBCreate.


 TODO           |    1 
 src/directfb.c |  232 +++++++++++++++++++++++++++++----------------------------
 2 files changed, 121 insertions(+), 112 deletions(-)



commit a67bf6c0af13261e28361dd104270fe0c5e71569
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 2 17:42:03 2002 +0000

    Speed up reactor_attach/detach by writing reaction information to a
    provided memory location which is also passed to reactor_detach.
    Check depth specified in the configuration.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   23 -
 src/core/core.c                                                |    2 
 src/core/fbdev/fbdev.c                                         |    9 
 src/core/fusion/fusion_internal.h                              |   18 
 src/core/fusion/lock.c                                         |   11 
 src/core/fusion/object.c                                       |   13 
 src/core/fusion/object.h                                       |    6 
 src/core/fusion/reactor.c                                      |  191 ++--------
 src/core/fusion/reactor.h                                      |   17 
 src/core/fusion/shmalloc/shmalloc.c                            |    9 
 src/core/input.c                                               |  130 ++++++
 src/core/input.h                                               |   10 
 src/core/layers.c                                              |   17 
 src/core/palette.h                                             |   10 
 src/core/state.c                                               |   12 
 src/core/state.h                                               |    5 
 src/core/surfaces.c                                            |    7 
 src/core/surfaces.h                                            |   11 
 src/core/windows.c                                             |   46 +-
 src/core/windows.h                                             |   15 
 src/directfb.c                                                 |  143 -------
 src/display/idirectfbsurface.c                                 |    6 
 src/display/idirectfbsurface.h                                 |    3 
 src/display/idirectfbsurface_window.c                          |    8 
 src/idirectfb.c                                                |   69 ++-
 src/input/idirectfbinputbuffer.c                               |   16 
 src/input/idirectfbinputdevice.c                               |    7 
 src/windows/idirectfbwindow.c                                  |    7 
 28 files changed, 394 insertions(+), 427 deletions(-)



commit 286d23436e30c0f489dfb5aa51b84ac0a3b498fb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 2 14:48:22 2002 +0000

    Don't detach reactor threads.


 reactor.c |   16 ++++------------
 1 file changed, 4 insertions(+), 12 deletions(-)



commit ce761a54fc883f879bde627e5fa99bb56dbc62c7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 30 17:09:10 2002 +0000

    arg, ref/unref typo


 windows.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7c0901730957d2bdc8c3a0b63a5806f19e87de65
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 18:31:15 2002 +0000

    Event buffers created by "IDirectFB::CreateEventBuffer" will discard raw input
    events until the application is fullscreen or has a focused window (primary).
    Buffers that always get input events can be created via IDirectFBInputDevice.


 idirectfb.c                  |   49 +++++++++++++++++++++++++++++++++
 input/idirectfbinputbuffer.c |   62 ++++++++++++++++++++++++++++++-------------
 input/idirectfbinputbuffer.h |   12 ++++++--
 input/idirectfbinputdevice.c |    2 -
 windows/idirectfbwindow.c    |    2 -
 5 files changed, 103 insertions(+), 24 deletions(-)



commit ab05499e6350551acf23245f93a56101d648a56d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 17:23:54 2002 +0000

    oops


 modules.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 925b248798fa7627ee278033710b078b9d0a6f61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 17:02:21 2002 +0000

    Removed more unused stuff.


 core.c    |   92 --------------------------------------------------------------
 core.h    |   11 -------
 modules.c |   23 +++++++++++++++
 3 files changed, 23 insertions(+), 103 deletions(-)



commit bcc7c4c604663ec248a43d9502f5581b818d392d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 16:50:21 2002 +0000

    minor optimization


 layers.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit ff53e701d4fe411f5346e9d89567f35ce2cc092e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 15:52:49 2002 +0000

    Fixed copy'n'paste error.
    Don't print error message if opening /proc/... failed.


 fusion/fusion.c |    4 ++--
 layers.c        |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit aa0037716dbe73b529afce119f3fba732cc09165
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 14:16:27 2002 +0000

    Fixed MMX test.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d2ff259de54af8f675fc0459b8c0267ff475da29
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 14:15:02 2002 +0000

    minor fix


 generic_mmx.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit a3437ed8163af1d42278896800f6f039b4a25265
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 13:54:43 2002 +0000

    Assembler routines converted to inline assembler,
    thanks to Johannes Stezenbach <js@convergence.de>.


 b/src/gfx/generic/Makefile.am                |   17 -
 b/src/gfx/generic/generic_mmx.c              |  445 +++++++++++++++++++++++++++
 src/gfx/generic/Cacc_add_to_Dacc_MMX.s       |   50 ---
 src/gfx/generic/Dacc_modulate_argb_MMX.s     |   57 ---
 src/gfx/generic/Sacc_add_to_Dacc_MMX.s       |   53 ---
 src/gfx/generic/Sacc_to_Dop_rgb16_MMX.s      |   76 ----
 src/gfx/generic/Sacc_to_Dop_rgb32_MMX.s      |   73 ----
 src/gfx/generic/Sop_argb_Sto_Dacc_MMX.s      |   75 ----
 src/gfx/generic/Sop_argb_to_Dacc_MMX.s       |   55 ---
 src/gfx/generic/Sop_rgb16_to_Dacc_MMX.s      |  145 --------
 src/gfx/generic/Sop_rgb32_to_Dacc_MMX.s      |   58 ---
 src/gfx/generic/Xacc_blend_invsrcalpha_MMX.s |  112 ------
 src/gfx/generic/Xacc_blend_srcalpha_MMX.s    |  110 ------
 13 files changed, 448 insertions(+), 878 deletions(-)



commit 12013430c0a1b9ea8f8389af1b7a124f00cde2ec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 12:51:04 2002 +0000

    Added Billy Biggs <vektor@dumbterm.net>.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 444e10319e0a456a2e26bb478632cede3a679c61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 12:50:50 2002 +0000

    Applied patch from Billy Biggs <vektor@dumbterm.net> adding
    IDirectFBDisplayLayer::GetCurrentOutputField(), experimental and may change.


 gfxdrivers/matrox/matrox_crtc2.c    |   20 +++++++++++++++++++-
 include/directfb.h                  |   17 +++++++++++++++++
 src/core/layers.c                   |   15 +++++++++++++++
 src/core/layers.h                   |    7 +++++++
 src/display/idirectfbdisplaylayer.c |    9 +++++++++
 5 files changed, 67 insertions(+), 1 deletion(-)



commit b05256f758d208a246c04e4783689b45fa92a67a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 27 12:37:45 2002 +0000

    Destroy windows only in IDIrectFBWindow::Destroy(), do unref otherwise.


 core/coredefs.h                   |    2 +-
 core/windows.c                    |   18 +-----------------
 core/windows.h                    |   33 +++++++++++++++++++++++++++++++--
 display/idirectfbsurface_window.c |    9 ++++-----
 windows/idirectfbwindow.c         |   21 +++++++++++----------
 5 files changed, 48 insertions(+), 35 deletions(-)



commit 1d003c191c32b7444af01724ad6dce8adf6bbb8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 26 16:25:14 2002 +0000

    Use new module handling for core systems.
    Added fusion_ref_stat() for debugging.
    dfbdump now displays the number of references in front.


 src/core/core_system.h        |   21 +++----
 src/core/fusion/ref.c         |  112 ++++++++++++++++++++++++++++++++++++------
 src/core/fusion/ref.h         |    7 ++
 src/core/input.c              |   15 ++---
 src/core/modules.c            |    4 +
 src/core/system.c             |   69 ++++++++++++-------------
 src/core/system.h             |    8 +--
 src/windows/idirectfbwindow.c |    1 
 tools/dfbdump.c               |   25 ++++++++-
 9 files changed, 184 insertions(+), 78 deletions(-)



commit c755b5b071e46d2170b0297542db96f891bf1692
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 25 14:54:39 2002 +0000

    Fixed multi app build.


 gfxcard.c |   11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)



commit 2bca0eca6df894ed0738fd848ff9feb7e623a22b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 25 11:18:42 2002 +0000

    Graphics drivers are handled via new module functions now.
    Removed obsolete abi version stuff from graphics and input code.


 gfxdrivers/ati128/ati128.c             |    6 -
 gfxdrivers/matrox/matrox.c             |    6 -
 gfxdrivers/neomagic/neomagic.c         |    6 -
 gfxdrivers/nvidia/nvidia.c             |    6 -
 gfxdrivers/savage/savage.c             |    6 -
 gfxdrivers/tdfx/tdfx.c                 |    6 -
 inputdrivers/dbox2remote/dbox2remote.c |   12 --
 inputdrivers/h3600_ts/h3600_ts.c       |    5 -
 inputdrivers/joystick/joystick.c       |    6 -
 inputdrivers/keyboard/keyboard.c       |    6 -
 inputdrivers/linux_input/linux_input.c |   12 --
 inputdrivers/lirc/lirc.c               |    6 -
 inputdrivers/ps2mouse/ps2mouse.c       |    6 -
 inputdrivers/serialmouse/serialmouse.c |    6 -
 inputdrivers/sonypi/sonypi.c           |   12 --
 src/core/gfxcard.c                     |  149 ++++++++++++---------------------
 src/core/gfxcard.h                     |    6 -
 src/core/graphics_driver.h             |   19 +---
 src/core/input.h                       |    1 
 src/core/input_driver.h                |    4 
 src/core/sdl/sdlinput.c                |   12 --
 21 files changed, 69 insertions(+), 229 deletions(-)



commit 6cd3eff8809dbb17f9b84c75cccca3c77b85a313
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 25 10:21:16 2002 +0000

    Added the ability to change a window's opacity by holding Alt while holding
    CapsLock or Meta moving the cursor on the x axis (for wheel less mice).


 windows.c |   26 +++++++++++++++++++++++---
 1 file changed, 23 insertions(+), 3 deletions(-)



commit 764a9d32fc1308f5be2ac6ca13c775921e664cb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 24 17:38:02 2002 +0000

    Added another assertion.


 modules.c |    1 +
 1 file changed, 1 insertion(+)



commit 0115d9cd04d3ad572063a82570a6ac3a4118d09b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 24 17:35:21 2002 +0000

    Added new module management functions featuring module references/unloading.
    Input driver modules are already handled this way.


 Makefile.am    |    2 
 coredefs.h     |    4 
 coretypes.h    |    2 
 input.c        |  120 +++++++++-------------
 input.h        |    4 
 input_driver.h |   15 +-
 modules.c      |  309 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 modules.h      |   83 +++++++++++++++
 8 files changed, 461 insertions(+), 78 deletions(-)



commit 96a06c05c51ac94ccc4420461c0d4602ed112d46
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 23 15:22:21 2002 +0000

    Implemented Bop_a8_Kto_Aop, Bop_a8_SKto_Aop, Sop_a8_Kto_Dacc, Sop_a8_SKto_Dacc and Sacc_to_Aop_a8.


 generic.c |   64 +++++++++++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 57 insertions(+), 7 deletions(-)



commit 5d09bfa1218a4834624f91aba72ad74fd32923c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 23 14:57:11 2002 +0000

    Add "-ldl" and "-lpthread" or "-lc_r" conditionally.


 configure.in       |    8 ++++++++
 directfb-config.in |    2 +-
 directfb.pc.in     |    2 +-
 3 files changed, 10 insertions(+), 2 deletions(-)



commit a0abdc42925f10673c191765bb76f69e9970ef26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 23 13:58:09 2002 +0000

    Updated static build script including support for sdl.
    Uses pkg-config now to determine prefix and module directory.


 dfb_static_build_example |   40 +++++++++++++++++++++++++++++++---------
 1 file changed, 31 insertions(+), 9 deletions(-)



commit 57cffccd07db9f49b755a389f86839b94c4a6852
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 23 12:48:24 2002 +0000

    Added required quotes for test in case CFLAGS have been set.


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f55e050dad82d7f20c46ff3b56168c4b53824f74
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Sep 23 11:47:55 2002 +0000

    icheck for target host type before libdl and pthreads


 configure.in |   41 +++++++++++++++++++++--------------------
 1 file changed, 21 insertions(+), 20 deletions(-)



commit dc4e00d3462a9a33d500c5684c8413781677a860
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Sep 23 11:42:01 2002 +0000

    do not check for libdl on freebsd, check for phreads in libc_r on freebsd.


 configure.in |   28 ++++++++++++++++++++++------
 1 file changed, 22 insertions(+), 6 deletions(-)



commit d6894a2b896630203468087a2b98baaef5bc676e
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Sep 21 22:12:43 2002 +0000

    FreeBSD sync: include <sys/param.h> before <sys/user.h>


 fusion_internal.h |    1 +
 1 file changed, 1 insertion(+)



commit b4ee07d00c228782a402791aa2766029cfb39378
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Sep 16 22:51:46 2002 +0000

    only include asm/page.h on linux


 fusion_internal.h |    3 +++
 1 file changed, 3 insertions(+)



commit 08df666a07b796ec5a3b29a5e22963f5eda4bf87
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Sep 16 22:35:32 2002 +0000

    do not build arena.c fusion.c lock.c util.c and fusion_shmalloc.c when
    compiling without single application core


 Makefile.am       |   14 ++++++++------
 arena.c           |    5 -----
 fusion.c          |    4 ----
 fusion_shmalloc.c |    4 ----
 lock.c            |    4 ----
 property.c        |    2 ++
 reactor.c         |    2 ++
 ref.c             |    2 ++
 util.c            |    5 ++---
 9 files changed, 16 insertions(+), 26 deletions(-)



commit a3cb2a8364949d437e326659acd8ca28b80ce5ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 13 14:26:18 2002 +0000

    Fixed flag definitions.


 palette.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 520ded2cd03d47f5c174730f679839f47a7a8b08
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Sep 11 23:54:23 2002 +0000

    build tools on non-linux platforms. do not use <asm/byteorder.h> in raw32toraw24.c


 Makefile.am          |    2 +-
 tools/raw32toraw24.c |    6 +-----
 2 files changed, 2 insertions(+), 6 deletions(-)



commit 9778c03696eae28a3023634f1ec8a868532a6889
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Sep 11 23:29:51 2002 +0000

    include <sys/types.h> because darwins <sys/mman.h> depends on it and doesnt include it by itself...


 gfxcard.c |    1 +
 1 file changed, 1 insertion(+)



commit 2d1242ef5fbac23888819deb83d59670f61b56d2
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Sep 11 23:26:15 2002 +0000

    - added extern to declaration of dfb_memcpy() to avoid problems with
      non-gnu linkers.
    - only include <asm/page.h> on linux, guess PAGE_SIZE = 4096 on other platforms
      (bad)
    - only define MIN and MAX when undefined (fixes problem on darwin)


 mem.h    |    4 ++++
 memcpy.h |    2 +-
 util.h   |    5 ++++-
 3 files changed, 9 insertions(+), 2 deletions(-)



commit a3e333635ec5288e50730f8cd52b735e695a4a4b
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Sep 11 23:14:59 2002 +0000

    only build gfxdrivers, tools, inputdrivers and v4l provider on linux


 Makefile.am                                   |   24 ++++++++++++++++--------
 configure.in                                  |   26 +++++++++++++++++++++++++-
 include/dfb_types.h                           |    2 +-
 interfaces/IDirectFBVideoProvider/Makefile.am |   14 ++++++++++----
 4 files changed, 52 insertions(+), 14 deletions(-)



commit 09d0632730c73e25b8d439e9e92005adfd42107a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 15:58:05 2002 +0000

    Avoid naming conflict of log2 with tgmath.


 matrox.c |    8 ++++----
 matrox.h |    2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)



commit c7be5e5e9e0353d74801dfd3a20a654b5ba5f15c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 13:08:32 2002 +0000

    updated


 BUGS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1af2113e9e73a05d6c0b5335c92c1a3818541c32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 12:39:16 2002 +0000

    Color hash is multi app ready now, palette seems broken though.


 TODO                 |    6 --
 src/core/core.c      |    9 +++
 src/core/palette.c   |   10 +--
 src/misc/colorhash.c |  142 ++++++++++++++++++++++++++++++++++++++-------------
 src/misc/colorhash.h |   25 ++++++--
 5 files changed, 138 insertions(+), 54 deletions(-)



commit a64ab7f3a8176a2d78bac873076ba172e48eb561
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 11:05:47 2002 +0000

    Force window creation without alpha channel if "no-translucent-windows" option
    is used.


 windows.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 61dded44f448fc905496631e591b4750cc0ce55c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 10:47:07 2002 +0000

    Added debugging tool dumping information about existing windows and surfaces.


 src/core/layers.c |    7 -
 src/core/layers.h |    2 
 tools/.cvsignore  |    1 
 tools/Makefile.am |   12 ++-
 tools/dfbdump.c   |  205 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 219 insertions(+), 8 deletions(-)



commit 35886fb6038458ce6a3bcccdbfc0ed064d351c98
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 11 10:29:37 2002 +0000

    Send CSNF_SIZEFORMAT notification.


 surfaces.c |    3 +++
 1 file changed, 3 insertions(+)



commit 40cbab080dc1cdc82a271d98e5c6e8ea77295cb0
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 23:37:54 2002 +0000

    use AC_C_BIGENDIAN (AFAIK even works when cross-compiling with automake2.53)
    no longer include <endian.h> which seems to be linux specific,
    use #ifdef WORDS_BIGENDIAN instead of #if __BYTE_ORDER == __BIG_ENDIAN


 configure.in                                                        |    1 
 gfxdrivers/nvidia/nvidia.c                                          |    4 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c      |    6 +--
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    5 +-
 src/core/layers.c                                                   |    5 +-
 src/gfx/generic/generic.c                                           |   17 ++++------
 tools/directfb-csource.c                                            |    6 +--
 tools/raw15toraw24.c                                                |    4 +-
 tools/raw16toraw24.c                                                |    4 +-
 tools/raw32toraw24.c                                                |    6 +--
 10 files changed, 28 insertions(+), 30 deletions(-)



commit 3a8011e9fa9d7c67952598fc06218da178a89def
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 21:47:33 2002 +0000

    oops


 dfb_types.h |   15 +++++++++++++++
 1 file changed, 15 insertions(+)



commit 919cdb0e376407c0a4961bbf4d50a91c1fde5a85
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 21:42:03 2002 +0000

    do not include <asm/types.h> directly. added dfb_types.h which includes <asm/types.h> on linux and <sys/types.h> on other platforms


 gfxdrivers/ati128/ati128.c             |    2 +-
 gfxdrivers/ati128/ati128.h             |    2 +-
 gfxdrivers/ati128/mmio.h               |    2 +-
 gfxdrivers/matrox/matrox.h             |    2 +-
 gfxdrivers/matrox/mmio.h               |    2 +-
 gfxdrivers/neomagic/neo2200.c          |    2 +-
 gfxdrivers/neomagic/neomagic.c         |    2 +-
 gfxdrivers/neomagic/neomagic.h         |    2 +-
 gfxdrivers/nvidia/nvidia.c             |    2 +-
 gfxdrivers/nvidia/nvidia.h             |    2 +-
 gfxdrivers/savage/mmio.h               |    2 +-
 gfxdrivers/savage/savage.c             |    2 +-
 gfxdrivers/savage/savage2000.c         |    2 +-
 gfxdrivers/savage/savage3d.c           |    2 +-
 gfxdrivers/savage/savage4.c            |    2 +-
 gfxdrivers/savage/savage_streams_old.c |    2 +-
 gfxdrivers/tdfx/tdfx.c                 |    2 +-
 gfxdrivers/tdfx/tdfx.h                 |    2 +-
 include/.cvsignore                     |    1 +
 include/Makefile.am                    |    3 ++-
 include/directfb.h                     |    2 +-
 inputdrivers/linux_input/linux_input.c |    2 +-
 src/core/coretypes.h                   |    2 +-
 src/core/layers.h                      |    2 +-
 src/core/windows.h                     |    2 +-
 src/gfx/convert.h                      |    2 +-
 src/gfx/generic/generic.c              |    2 +-
 src/gfx/generic/generic.h              |    2 +-
 src/misc/cpu_accel.h                   |    2 +-
 src/misc/gfx_util.h                    |    2 +-
 src/misc/memcpy.c                      |    2 +-
 tools/raw32toraw24.c                   |    2 +-
 32 files changed, 33 insertions(+), 31 deletions(-)



commit 96fda3c1457333c488030c69f399852233832ebd
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 20:31:35 2002 +0000

    added AC_CANONICAL_HOST and AC_CANONICAL_TARGET to avoid this problem with libtool on darwin
    
    ltconfig: you must specify a host type if you use `--no-verify'
    Try `ltconfig --help' for more information.
    configure: error: libtool configure failed


 configure.in |    3 +++
 1 file changed, 3 insertions(+)



commit 3a41798d38f2c7ae0802ba49e522a774925e7e6a
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Sep 10 18:18:13 2002 +0000

    s/dfb_fbdev_wait_vsync/dfb_system_wait_vsync/
    Include <linux/fb.h> in order to get FB_ACCEL_* defines.


 savage.c             |    2 ++
 savage_streams_old.c |    4 ++--
 2 files changed, 4 insertions(+), 2 deletions(-)



commit 96bf6f9ca3f3dc3dbb460409263ab1f60ad8b691
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 16:35:53 2002 +0000

    no longer include malloc.h
    (sync from my OSX tree)


 gfxdrivers/neomagic/neo2200.c                                       |    1 -
 gfxdrivers/neomagic/neomagic.c                                      |    1 -
 gfxdrivers/nvidia/nvidia.c                                          |    1 -
 gfxdrivers/savage/savage.c                                          |    1 -
 gfxdrivers/savage/savage2000.c                                      |    1 -
 gfxdrivers/savage/savage3d.c                                        |    1 -
 gfxdrivers/savage/savage4.c                                         |    1 -
 gfxdrivers/savage/savage_streams_old.c                              |    1 -
 gfxdrivers/tdfx/tdfx.c                                              |    1 -
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |    1 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c      |    1 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    1 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c      |    1 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    1 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c      |    1 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |    1 -
 src/core/fbdev/vt.c                                                 |    1 -
 src/core/gfxcard.c                                                  |    1 -
 src/core/input.c                                                    |    1 -
 src/core/surfacemanager.c                                           |    1 -
 src/core/surfaces.c                                                 |    1 -
 src/core/windows.c                                                  |    1 -
 src/directfb.c                                                      |    1 -
 src/display/idirectfbdisplaylayer.c                                 |    1 -
 src/display/idirectfbpalette.c                                      |    1 -
 src/display/idirectfbsurface.c                                      |    1 -
 src/display/idirectfbsurface_layer.c                                |    1 -
 src/display/idirectfbsurface_window.c                               |    1 -
 src/idirectfb.c                                                     |    1 -
 src/input/idirectfbinputbuffer.c                                    |    1 -
 src/input/idirectfbinputdevice.c                                    |    1 -
 src/interface.c                                                     |    1 -
 src/media/idirectfbdatabuffer.c                                     |    1 -
 src/media/idirectfbdatabuffer_file.c                                |    1 -
 src/media/idirectfbdatabuffer_memory.c                              |    1 -
 src/media/idirectfbdatabuffer_streamed.c                            |    1 -
 src/media/idirectfbfont.c                                           |    1 -
 src/misc/conf.c                                                     |    1 -
 src/windows/idirectfbwindow.c                                       |    1 -
 39 files changed, 39 deletions(-)



commit bcc976d9e6b01c6ceeea8ad81396d0cbfc5ef1a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 10 16:14:25 2002 +0000

    Use high priority for video threads, detach from surface correctly.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   72 +++++-----
 src/core/thread.c                                              |    4 
 src/core/thread.h                                              |    3 
 3 files changed, 47 insertions(+), 32 deletions(-)



commit a736f041db97604f9d0a7b87d7ef485fdefd3f38
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Sep 10 15:41:13 2002 +0000

    support for building DirectFB without fbdev support. (first sync from my OSX tree)


 configure.in                   |   26 ++++++++++++++++----------
 gfxdrivers/matrox/matrox.c     |    2 ++
 gfxdrivers/matrox/matrox_bes.c |    2 ++
 src/core/Makefile.am           |   12 ++++++++++--
 src/core/fbdev/fbdev.h         |    2 ++
 src/core/fbdev/vt.c            |    2 ++
 src/core/gfxcard.h             |    1 -
 src/misc/Makefile.am           |   12 ++++++++++--
 8 files changed, 44 insertions(+), 15 deletions(-)



commit f710f1c66046b74292b9deccb17f5ea9dc711d9b
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Sep 10 15:22:30 2002 +0000

    Assign new width, height and format before checking if a reallocation
    is necessary in dfb_surface_reformat().


 surfaces.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 8bf89978ba0f5d06aadafad5f56c2e6cb26e52e4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 10 14:50:39 2002 +0000

    Finished key translation.


 TODO                    |    1 
 src/core/sdl/sdlinput.c |  216 +++++++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 213 insertions(+), 4 deletions(-)



commit b2173c135469c60fb0bde12851ff2f274220221d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 10 12:51:56 2002 +0000

    Two 0.9.14 TODOs.


 TODO |    7 +++++++
 1 file changed, 7 insertions(+)



commit e331cf4233bb67c7176a36e12ff4286d95fd94ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 17:30:04 2002 +0000

    color hash for multi app is broken


 BUGS |    1 +
 1 file changed, 1 insertion(+)



commit 67ec8a0a4c7bce83d3457d09bf54ce37efcf493e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 17:01:23 2002 +0000

    minor clarification


 NEWS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3e1bd82ffd032c2ecc02e633f08732f129bccb92
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 17:00:06 2002 +0000

    update


 ChangeLog |  415 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 NEWS      |   26 +++
 2 files changed, 440 insertions(+), 1 deletion(-)



commit e72de04277ef69d5b3ff1570e8989db15edde11e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 16:43:33 2002 +0000

    updated


 TODO |    8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)



commit 638246a87dffcfe28714998de7072f198a5b3826
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 16:25:15 2002 +0000

    debug output adjusted


 property.c |    4 ++--
 reactor.c  |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 9c2968f24bd1c13124bc82b93ac723e0e4b33bab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 16:15:08 2002 +0000

    Added orphan detection to FusionProperty.
    
    The window stack and video mode are now restored even if a fullscreen
    application simply exits or gets killed by any signal.


 fusion/property.c |  261 ++++++++++++++++++++++++++++--------------------------
 layers.c          |    6 -
 2 files changed, 142 insertions(+), 125 deletions(-)



commit afeddd49f3de304f18dac8f7329c9196ae614e9e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 14:26:50 2002 +0000

    Added function for retrieving the window pool from a layer.


 layers.c |    9 +++++++++
 layers.h |    2 ++
 2 files changed, 11 insertions(+)



commit 922bdddf1329438b7ce364b91e4838d44d3ff697
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 14:02:04 2002 +0000

    Added fusion_object_pool_enum() for enumeration of all objects.


 object.c |   26 ++++++++++++++++++++++++++
 object.h |   20 +++++++++++++++-----
 2 files changed, 41 insertions(+), 5 deletions(-)



commit 6e61a6d7145d77e4351ae2201b8d09050afa7e2d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 11:30:56 2002 +0000

    Now half line, not half texture ;)


 matrox.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 218e7d9bf46545b95592b928fa34a0ef2f177872
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 9 11:21:28 2002 +0000

    Half line adjustment for deinterlace blits.


 matrox.c |    3 +++
 1 file changed, 3 insertions(+)



commit c6fcfb79e8959db86c4a4525efeddaba6e805521
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 6 17:25:54 2002 +0000

    Fixed CreateWindow with DWDESC_SURFACE_CAPS.


 idirectfbdisplaylayer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d5a1b39097f4c4a0c37a4a4967c2ef46aae9824b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 17:41:11 2002 +0000

    Made black RGB332 entry transparent for testing.


 palette.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e72f93259400b7d15c43ea3d075bbc56e51f476c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 17:29:08 2002 +0000

    Reexported "dfb_fbdev" as a hot fix to have the Matrox driver compile again.


 fbdev.c |   27 ++-------------------------
 fbdev.h |   27 +++++++++++++++++++++++++++
 2 files changed, 29 insertions(+), 25 deletions(-)



commit 770d2be4f271e94721e4ad74589f53b479b2a9f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 17:00:38 2002 +0000

    Changed LED behaviour.


 input.c |   25 +++----------------------
 1 file changed, 3 insertions(+), 22 deletions(-)



commit 6790cbb35db0b4e4959c7e1de861a09aa2e5caa4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 15:55:59 2002 +0000

    Added Meta (or Windows) key to wm hack.


 windows.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit e7a587a7c2dc46af3a8d251a589e15cb35e3dd4c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 15:52:40 2002 +0000

    Don't generate RGB332 entries if palette already existed.
    Generate RGB332 entries after creation of layer palettes.


 fbdev/fbdev.c |    3 +++
 sdl/primary.c |    3 +++
 surfaces.c    |   16 ++++++++--------
 3 files changed, 14 insertions(+), 8 deletions(-)



commit bea25135f76724ebab6c97401dc5e663bf510327
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 13:12:11 2002 +0000

    Added IDirectFB::CreatePalette().
    Added IDirectFBSurface::SetPalette().
    Added IDirectFBPalette::GetCapabilities().
    Added IDirectFBPalette::CreateCopy().


 include/directfb.h             |   78 +++++++++++++++++++++++++++++++++++++++--
 src/core/fbdev/fbdev.c         |    9 +++-
 src/core/palette.c             |   17 +++++---
 src/core/palette.h             |   21 +++++------
 src/core/sdl/primary.c         |    9 +++-
 src/core/surfaces.c            |   18 ++++++---
 src/directfb.c                 |    2 +
 src/display/idirectfbpalette.c |   74 +++++++++++++++++++++++++++++++++++---
 src/display/idirectfbsurface.c |   32 ++++++++++++++++
 src/idirectfb.c                |   48 +++++++++++++++++++++++++
 10 files changed, 271 insertions(+), 37 deletions(-)



commit 464d69698dc88a05f75d7795bb8e081764e9a07d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 12:07:41 2002 +0000

    Fixed warning in "layers.c".
    Small fix in SDL input driver.


 layers.c       |    7 ++++---
 sdl/sdlinput.c |    4 ++--
 2 files changed, 6 insertions(+), 5 deletions(-)



commit ca19ddcf64082a77de4ad79b95848fa93ce40694
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 11:54:46 2002 +0000

    Fixed summary (SDL support yes/no).


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 85046c9a5fa5cee34f65e7bf1af40312a0546ae1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 11:48:03 2002 +0000

    Another patch from Ville Syrjala <syrjala@sci.fi> adding planar YUV blitting.
    
    - DoBlit2D_Old(), DoBlit2d and DoBlitTMU() initiate the blits
    - The are called from Blit2D_Old(), Blit2D() and BlitTMU().
    - StretchBlit() and Blit3D() simply call BlitTMU() with proper arguments.
    - Clipping registers are updated for chroma planes also.
    - Register programming is not done in validate_source() or
    validate_Source() anymore. All source related programming is done from the
    blit functions.
    - I changed the code for all cards. Only tested on G400 as I've misplaced
    my G200 smewhere and I don't own any other cards.
    
    Added him to "helping developers" in AUTHORS.


 AUTHORS                          |    1 
 gfxdrivers/matrox/matrox.c       |  470 ++++++++++++++++++++++++++++++++-------
 gfxdrivers/matrox/matrox.h       |   17 +
 gfxdrivers/matrox/matrox_state.c |   66 ++---
 gfxdrivers/matrox/regs.h         |   15 -
 5 files changed, 448 insertions(+), 121 deletions(-)



commit 049818eeb139dd3be40004d9ef8ac2bc841a79f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 5 11:36:22 2002 +0000

    Second head support via additional layers by Ville Syrjala <syrjala@sci.fi>.
    New option "matrox-crtc2" to activate this.


 docs/directfbrc.5.in             |    5 
 gfxdrivers/matrox/Makefile.am    |    4 
 gfxdrivers/matrox/matrox.c       |   12 
 gfxdrivers/matrox/matrox.h       |    2 
 gfxdrivers/matrox/matrox_crtc2.c |  589 +++++++++++++++++++++++++++++++++++++++
 gfxdrivers/matrox/matrox_maven.c |  439 +++++++++++++++++++++++++++++
 gfxdrivers/matrox/matrox_maven.h |   77 +++++
 gfxdrivers/matrox/matrox_spic.c  |  327 +++++++++++++++++++++
 gfxdrivers/matrox/mmio.h         |    7 
 gfxdrivers/matrox/regs.h         |   23 +
 src/misc/conf.c                  |   26 +
 src/misc/conf.h                  |    4 
 12 files changed, 1513 insertions(+), 2 deletions(-)



commit 9d2818c7e55378becc82458963d4bd7fa9073e35
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 4 16:12:32 2002 +0000

    This patch from Ville Syrjala <syrjala@sci.fi> adds YUV rectangle filling
    support for planar and non-planar formats.


 convert.h         |   26 ++++++++++++++++++
 generic/generic.c |   76 ++++++++++++++++++++++++++++++++++++++++++++----------
 2 files changed, 88 insertions(+), 14 deletions(-)



commit 0d92ecb0e0981497266c5061fdca6fd48325fa05
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 4 16:03:57 2002 +0000

    Millenium -> Millennium (thanks to Ville Syrjala <syrjala@sci.fi>).


 ChangeLog                  |    2 +-
 NEWS                       |    2 +-
 gfxdrivers/matrox/matrox.c |   14 +++++++-------
 gfxdrivers/matrox/matrox.h |    2 +-
 4 files changed, 10 insertions(+), 10 deletions(-)



commit dd9e7f1be8c679261ac82432385a37265b8f5bdd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 4 16:01:17 2002 +0000

    Added Matrox CLUT as a todo item.
    Set DSCAPS_INTERLACED in the surface description of the v4l provider.


 TODO                                                           |    5 +++++
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    3 ++-
 2 files changed, 7 insertions(+), 1 deletion(-)



commit ed5a3c19fc16ffff7bf2ab437d07e375d1656ffd
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Sep 3 11:37:19 2002 +0000

    Document the new system parameter.


 directfbrc.5.in |    6 ++++++
 1 file changed, 6 insertions(+)



commit 80bdc5efafe2112b63cba1986dd3e976a443e7a4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 30 19:12:12 2002 +0000

    Fixed crash with debug mode (with linked in modules).
    Fixed multi app core system init.


 core/gfxcard.c |    2 +-
 core/input.c   |    2 +-
 core/system.c  |   24 +++++++++++++++++++++---
 interface.c    |    2 +-
 4 files changed, 24 insertions(+), 6 deletions(-)



commit f91075b320fa153ab2c36fe542ce19a051fd3dac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 30 17:49:58 2002 +0000

    Started abstraction of the "core system" featuring the "fbdev" system like before
    and a new experimental "sdl" system. Yepp, DirectFB running on SDL.
    
    Use "--dfb:system=sdl" to run applications under X.


 configure.in                                                   |   25 
 gfxdrivers/ati128/ati128.c                                     |    4 
 gfxdrivers/matrox/matrox_bes.c                                 |   16 
 gfxdrivers/matrox/matrox_state.c                               |    6 
 inputdrivers/keyboard/keyboard.c                               |    6 
 inputdrivers/linux_input/linux_input.c                         |    4 
 inputdrivers/ps2mouse/ps2mouse.c                               |    4 
 inputdrivers/serialmouse/serialmouse.c                         |    4 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    2 
 src/core/Makefile.am                                           |   24 
 src/core/core.c                                                |   16 
 src/core/core_system.h                                         |  118 +
 src/core/coretypes.h                                           |    2 
 src/core/fbdev/fbdev.c                                         |  352 ++++-
 src/core/fbdev/fbdev.h                                         |   72 -
 src/core/fbdev/vt.h                                            |   10 
 src/core/gfxcard.c                                             |  100 -
 src/core/gfxcard.h                                             |   34 
 src/core/input.c                                               |    6 
 src/core/layers.c                                              |   24 
 src/core/layers.h                                              |   13 
 src/core/sdl/.cvsignore                                        |    6 
 src/core/sdl/Makefile.am                                       |   24 
 src/core/sdl/primary.c                                         |  605 ++++++++++
 src/core/sdl/primary.h                                         |   35 
 src/core/sdl/sdl.c                                             |  176 ++
 src/core/sdl/sdl.h                                             |   35 
 src/core/sdl/sdlinput.c                                        |  332 +++++
 src/core/surfacemanager.c                                      |    8 
 src/core/surfaces.c                                            |    5 
 src/core/system.c                                              |  186 +++
 src/core/system.h                                              |  205 +++
 src/core/windows.c                                             |    7 
 src/directfb.c                                                 |    3 
 src/display/idirectfbsurface_layer.c                           |   16 
 src/idirectfb.c                                                |    7 
 src/misc/conf.c                                                |   18 
 src/misc/conf.h                                                |    2 
 38 files changed, 2202 insertions(+), 310 deletions(-)



commit 185253fa0ad89db0a22e48399dfcfeb32f8e332e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 30 11:55:58 2002 +0000

    Fixed driver, compiles again.


 dbox2remote.c |  146 +++++++++++++++++++++++++++++-----------------------------
 1 file changed, 73 insertions(+), 73 deletions(-)



commit a8c23dc40331d408849a3cb7cd963e49d94d0bfa
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 29 00:45:09 2002 +0000

    Removed a spurious space that broke the build.


 nvidia.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7bad83c881a1031968398c6df4c73d0796ab3b9f
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Aug 28 21:34:58 2002 +0000

    - fix for big endian hosts, driver should work now
    - wait for 4 instead of 3 fifo slots for line drawing ( this fixes crashing
      of df_dok on my Geforce 2MX


 nvidia.c |   30 +++++++++++++++++++++++++++---
 nvidia.h |   10 +++++-----
 2 files changed, 32 insertions(+), 8 deletions(-)



commit cb4da84f482cc299b913e12dc700cefc77070907
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 27 17:41:18 2002 +0000

    Outlined some inlines.


 core/surfaces.c            |    8 +++---
 display/idirectfbsurface.c |    4 +--
 gfx/convert.c              |   54 +++++++++++++++++++++++++++++++++++++++++++++
 gfx/convert.h              |   52 ++-----------------------------------------
 gfx/generic/generic.c      |   10 ++++----
 misc/conf.h                |    4 ++-
 misc/gfx_util.c            |    8 +++---
 windows/idirectfbwindow.c  |    2 -
 8 files changed, 76 insertions(+), 66 deletions(-)



commit 5ab3a02ac4447f3adb354c005ba8d91aa0c3a3a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 27 17:23:30 2002 +0000

    Added missing call to colorhash_detach().


 palette.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit a95aee429967f857320ebf3e1e7a1fa1df915e40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 27 14:03:26 2002 +0000

    Added IDirectFBSurface::SetSrcColorKeyIndex() and SetDstColorKeyIndex().
    
    Added LUT8 and RGB332 acceleration to NeoMagic driver (now version 0.3).
    
    Added referencing of the window to IDirectFBSurface_Window implementation.
    
    Increased version number to 0.9.14.


 configure.in                          |    2 
 gfxdrivers/neomagic/neo2200.c         |   14 +++++-
 include/directfb.h                    |   26 +++++++++++
 src/display/idirectfbsurface.c        |   77 +++++++++++++++++++++++++++++++++-
 src/display/idirectfbsurface_window.c |   10 +++-
 5 files changed, 123 insertions(+), 6 deletions(-)



commit f91bc0287a4d1ce34a21386b3fad74be840c42e7
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 26 22:28:30 2002 +0000

    Call 'libtoolize --version' instead of libtool.


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 79387cf9eb15a0a75c956cc68257ea323c819919
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 26 19:21:01 2002 +0000

    DSCAPS_SEPERATED -> DSCAPS_SEPARATED


 include/directfb.h        |    4 ++--
 src/core/windows.c        |    2 +-
 src/gfx/generic/generic.c |   12 ++++++------
 3 files changed, 9 insertions(+), 9 deletions(-)



commit fae6fe5a85ec5f1ecfdd10287bba2c31bebdc140
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 26 17:47:24 2002 +0000

    Use DSBLIT_DEINTERLACE if window surface has DSCAPS_INTERLACED.


 windows.c |    3 +++
 1 file changed, 3 insertions(+)



commit 3594fdfd39c7cd05412fb2cfec8d2869975602fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 26 17:44:55 2002 +0000

    Added experimental blitting flag DSBLIT_DEINTERLACE and implemented it in
    the Matrox driver, not tested yet.


 gfxdrivers/matrox/matrox.c       |   84 ++++++++++++++++++++++-----------------
 gfxdrivers/matrox/matrox.h       |    2 
 gfxdrivers/matrox/matrox_state.c |   23 +++++++---
 include/directfb.h               |    6 ++
 src/gfx/generic/generic.c        |    1 
 5 files changed, 73 insertions(+), 43 deletions(-)



commit 70af58bfedcc544f3bc7cf0cbd283b85860831a7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 26 17:13:17 2002 +0000

    Added CSNF_FIELD as a notification causing the 'source modified' bit to be set.


 state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 24b6def8cb65fdae3bb486dd9e79a736454bb267
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 26 15:42:39 2002 +0000

    minor update


 TODO |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit 393bf59b86600d972e4eab00946d023a78b351ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 18:26:45 2002 +0000

    removed field switching todo


 TODO |    3 ---
 1 file changed, 3 deletions(-)



commit 15d62cd593c9424aca239e01d7e956fc70db0baf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 18:26:14 2002 +0000

    Added IDirectFBSurface::SetField() which enables applications to manually
    control the deinterlacing of layer surfaces (with DLOP_DEINTERLACE enabled).


 include/directfb.h                                             |   12 ++++
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    6 +-
 src/core/layers.c                                              |    4 -
 src/core/surfaces.c                                            |   30 ++++++++--
 src/core/surfaces.h                                            |   11 ++-
 src/display/idirectfbsurface.c                                 |   21 +++++++
 6 files changed, 70 insertions(+), 14 deletions(-)



commit 1b30e86ad024a0bbfa4b51d53c5121694859d248
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 18:00:37 2002 +0000

    Keep alloc_list after debug outputting it to avoid crash by further deinits.


 mem.c |    2 --
 1 file changed, 2 deletions(-)



commit 6a767de7c231201423e523c5d3cb39f5b3530539
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 15:24:50 2002 +0000

    fixed init/deinit related things


 core/fbdev/fbdev.c    |    6 ++++--
 core/input.c          |   19 ++++++++++++++++++-
 core/layers.c         |   10 ++++++++++
 core/surfacemanager.c |    6 ++++++
 misc/fbdebug.c        |    6 ++++++
 misc/fbdebug.h        |    3 +++
 6 files changed, 47 insertions(+), 3 deletions(-)



commit cf397cbfc473d6cbdeb3621c00569828f8b47130
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 14:06:27 2002 +0000

    Fixed two mem leaks (two unreachable blocks after exit).
    Don't reload input and graphics modules.


 fbdev/fbdev.c |    1 +
 fbdev/vt.c    |   54 ++++++++++++++++++++++++++++--------------------------
 fbdev/vt.h    |    4 +---
 gfxcard.c     |    5 +++--
 input.c       |    9 +++++----
 5 files changed, 38 insertions(+), 35 deletions(-)



commit 025f1e9aa100648d2a97e514537e2992140489fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 13:12:55 2002 +0000

    Use shcalloc instead of shmalloc.


 vt.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3c57dc9c6e1fff87d7da306fb58c1fefe0750901
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 12:43:49 2002 +0000

    Added "-g" to non-debug mode to have line numbers in gdb without
    enabling the DirectFB debugging code.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8412ba96ea13a6f9f8e9a5713769f903214da545
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 23 12:24:28 2002 +0000

    Added missing closedir().


 interface.c |    2 ++
 1 file changed, 2 insertions(+)



commit 8021d6a6052398970beb5b8c9bff903ec0f1f622
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 22:40:23 2002 +0000

    updated


 ChangeLog |  709 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |    9 
 2 files changed, 714 insertions(+), 4 deletions(-)



commit fbaa2571aeca3f609074639a70e7113f766cf217
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 22 22:20:54 2002 +0000

    Updated NEWS.
    Forced directfb.h into 80 columns.


 NEWS               |    7 ++++++-
 include/directfb.h |   15 ++++++++-------
 2 files changed, 14 insertions(+), 8 deletions(-)



commit 1e6912e025a98cad83cc0e11f4d4913f8a0a6a41
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 22:19:51 2002 +0000

    cheating ;)


 TODO |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 5b8032be7084b3d73354916fc6416bd472ab5321
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 22:15:23 2002 +0000

    Do a skirmish_prevail during shutdown if it's no emergency instead of the
    skirmish_swoop loop.


 gfxcard.c |   21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)



commit 0721c8ac02489be35c7f83da99acbb0bbdeac45a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 22:05:44 2002 +0000

    Added "do { ... } while (0)" to debug macros.
    
    Don't print an error if message queue id is removed, but print a debug message.


 coredefs.h               |    4 ++--
 fusion/fusion_internal.h |    4 ++--
 fusion/reactor.c         |    5 ++++-
 3 files changed, 8 insertions(+), 5 deletions(-)



commit 775c31d6da41285c7adbee2d683c00c2f7139204
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 22 21:58:22 2002 +0000

    Made init_modes a static function again.
    
    Call the original InitLayer function and modify the configuration
    instead of doing the whole setup in savagePrimaryInitLayer().


 gfxdrivers/savage/savage_streams_old.c |   44 ++++++++-------------------------
 src/core/fbdev/fbdev.c                 |    4 +--
 src/core/fbdev/fbdev.h                 |    2 -
 3 files changed, 13 insertions(+), 37 deletions(-)



commit 7350fc81c933e9216f450042184f68f3583473d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 21:54:52 2002 +0000

    Shutdown input core before anything else to stop input threads early enough.
    
    Don't create a palette for non indexed surfaces by default.
    Create it on demand during surface reformation.
    
    Fixed missing initialization of semop flags regarding global references.


 core.c           |    4 -
 fbdev/fbdev.c    |    9 ++
 fusion/reactor.c |    2 
 fusion/ref.c     |    8 +-
 surfaces.c       |  213 +++++++++++++++++++++++++++++++------------------------
 surfaces.h       |    6 +
 windows.c        |    5 -
 7 files changed, 145 insertions(+), 102 deletions(-)



commit 5e42308883cae850a859769aad3a53a58be6295f
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 22 21:06:45 2002 +0000

    Made the GIF provider less verbose.


 idirectfbimageprovider_gif.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit ab757525907413bc0b5907d0737b66d44ea50bb3
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 22 20:42:37 2002 +0000

    Added a global (per process) color hash table to speedup palette lookups.


 core/palette.c   |   45 +++++++--------
 core/palette.h   |    2 
 misc/Makefile.am |    2 
 misc/colorhash.c |  162 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 misc/colorhash.h |   39 +++++++++++++
 5 files changed, 226 insertions(+), 24 deletions(-)



commit c034bcefff925a68b344af7d9818c2584bb4ba55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 19:03:20 2002 +0000

    Added core functions for thread management
    to have input drivers pthread independent for easier porting.
    
    Input threads get a higher priority now.


 inputdrivers/dbox2remote/dbox2remote.c |   24 ++--
 inputdrivers/h3600_ts/h3600_ts.c       |   26 ++--
 inputdrivers/joystick/joystick.c       |   25 +---
 inputdrivers/keyboard/keyboard.c       |   23 +---
 inputdrivers/linux_input/linux_input.c |   20 ++-
 inputdrivers/lirc/lirc.c               |   23 +---
 inputdrivers/ps2mouse/ps2mouse.c       |   25 +---
 inputdrivers/serialmouse/serialmouse.c |   41 +++----
 inputdrivers/sonypi/sonypi.c           |   23 +---
 src/core/Makefile.am                   |    2 
 src/core/coretypes.h                   |    3 
 src/core/sig.c                         |   20 +++
 src/core/sig.h                         |   10 -
 src/core/thread.c                      |  179 +++++++++++++++++++++++++++++++++
 src/core/thread.h                      |   84 +++++++++++++++
 15 files changed, 384 insertions(+), 144 deletions(-)



commit bbb5370ee7fe5f5918358f25900a2d7c9fbe7f85
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 22 17:48:40 2002 +0000

    Fixed dead lock in recently implemented FusionProperty (multi app).


 fusion_internal.h |    1 
 property.c        |   60 +++++++++++++++++++++++++++---------------------------
 2 files changed, 31 insertions(+), 30 deletions(-)



commit abcf5116e02a4cca965b298598becfbcb30cc419
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 22 12:28:11 2002 +0000

    Applied a patch from Alex Song <alexsong@comports.com> that add
    flipping support to the secondary layer.
    
    Export former internal function init_modes() as dfb_fbdev_init_modes().


 gfxdrivers/savage/mmio.h               |   16 ++++++--
 gfxdrivers/savage/savage.c             |   34 -----------------
 gfxdrivers/savage/savage4.c            |   18 +++++++--
 gfxdrivers/savage/savage_streams_old.c |   66 +++++++++++++++++++++++----------
 src/core/fbdev/fbdev.c                 |    4 +-
 src/core/fbdev/fbdev.h                 |    4 +-
 6 files changed, 78 insertions(+), 64 deletions(-)



commit ea8e281f9cfa108c94067f02cb1410134772bb30
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 19:55:00 2002 +0000

    Modules are installed to ".../lib/directfb-0...-debug/" if debug is enabled
    to avoid dynamic linker errors.


 configure.in |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit d9c50ab9a6711c3714f78f03f00ca47db5eaee31
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 19:35:23 2002 +0000

    minor update


 TODO |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)



commit c03e159f4f8dd4b83724bbe3990b3b04fb31a486
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 19:10:48 2002 +0000

    Added malloc/calloc/strdup debug output.
    Beautified debug output and made fusion debug output like the core's DEBUGMSG.


 core/coredefs.h               |    2 +-
 core/fusion/fusion_internal.h |   12 +++++++-----
 misc/mem.c                    |    9 +++++++++
 3 files changed, 17 insertions(+), 6 deletions(-)



commit 2eea56839bceeb5b4e79c4a178b6019ab2822eef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 17:53:13 2002 +0000

    Surfaces can now be created (in core) using the palette of another surface.
    Window surfaces are now created with the layer's palette (real reference).


 interfaces/IDirectFBFont/idirectfbfont_default.c                     |    5 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    4 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |    4 -
 src/core/fbdev/fbdev.c                                               |    2 
 src/core/fonts.c                                                     |    2 
 src/core/layers.c                                                    |    2 
 src/core/surfaces.c                                                  |   31 +++++-----
 src/core/surfaces.h                                                  |   13 ++--
 src/core/windows.c                                                   |    5 -
 src/idirectfb.c                                                      |    4 -
 10 files changed, 39 insertions(+), 33 deletions(-)



commit 0cb47ba756fc6afdc1a9a3f1dd302424842113f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 17:24:46 2002 +0000

    Removed locking recently added.


 windows.c |    4 ----
 1 file changed, 4 deletions(-)



commit 55d9933c1f47c29c866f88477118fc81aa8059c6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 17:15:59 2002 +0000

    IDirectFBPalette is now completely independent from surfaces.
    Added palette notification for entry modifications and palette destruction.
    Attach a palette listener to a surface's palette to notify surface listeners.


 core/palette.c             |   30 +++++++++++++++---
 core/palette.h             |   15 +++++++--
 core/state.c               |   20 +++++-------
 core/surfaces.c            |   24 +++++++++++++-
 display/idirectfbpalette.c |   74 ++++++++++-----------------------------------
 display/idirectfbpalette.h |    4 +-
 display/idirectfbsurface.c |    9 ++++-
 idirectfb.c                |   10 +++---
 8 files changed, 103 insertions(+), 83 deletions(-)



commit f7cf8de3688b55999d1f76dbf2cc7fd4eb2245ef
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 16:10:54 2002 +0000

    Unref surface after linking it instead of unref during window destruction.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c5f8f0cb485dae882dd9aee76cbcd6b1834c4a61
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 20 16:04:28 2002 +0000

    CorePalette is a FusionObject now with its own pool.
    Currently each surface creation causes the creation of a palette object,
    it's then linked to the surface object and unref'ed.


 gfxcard.c  |   10 ++++++++
 gfxcard.h  |    3 +-
 palette.c  |   55 ++++++++++++++++++++++++++++++++-----------------
 palette.h  |   68 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++----
 surfaces.c |   16 ++++++++++----
 surfaces.h |    3 --
 6 files changed, 125 insertions(+), 30 deletions(-)



commit 39e43e392ea00ff5415b827819adc286bc6c0eeb
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 19 18:21:54 2002 +0000

    Indentation.


 generic.c |   13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)



commit 45ac939ffaabe063fd492c55e2da7a5d52512fe6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 19 16:23:48 2002 +0000

    Provide shmalloc/shfree debugging for single app core.
    Avoid calling shfree() with NULL.


 fusion/shmalloc.h |   11 ++++++-----
 layers.c          |    3 ++-
 2 files changed, 8 insertions(+), 6 deletions(-)



commit e53e5064410475b75c2b10514df2f1d4f34b3dee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 19 13:29:45 2002 +0000

    Fixed cursor alpha blending.
    Added 'CAUTION' messages to unimplemented cases of surface heap adjustment.
    Added locking to window stack cursor handling.


 layers.c         |    3 ++-
 surfacemanager.c |    2 ++
 windows.c        |   10 +++++++---
 3 files changed, 11 insertions(+), 4 deletions(-)



commit 7adca67032e6b45a2ef7e66036cac3a11ca66804
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 19 13:03:37 2002 +0000

    removed obsolete entries, sorted entries by priority


 TODO |   40 +++++++++++++++++-----------------------
 1 file changed, 17 insertions(+), 23 deletions(-)



commit 637a1c2a91010da804144b984f936df427986c1c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 19 12:49:15 2002 +0000

    Added DWOP_ALPHACHANNEL to enable/disable per-pixel blending after creation.
    Only supported by windows with the capability DWCAPS_ALPHACHANNEL, which have
    it enabled by default.


 include/directfb.h            |    4 +++-
 src/core/windows.c            |    9 ++++++---
 src/windows/idirectfbwindow.c |    6 +++++-
 3 files changed, 14 insertions(+), 5 deletions(-)



commit a4ae71f2965f220dd4f3a58664a3690f8a09d834
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 19 11:35:29 2002 +0000

    Removed bashism (function keyword).


 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6ba55f17c2726496cf3ec73b192ff18b63b25c0d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 18:40:19 2002 +0000

    minor simplification


 windows.c |   24 +++++++-----------------
 1 file changed, 7 insertions(+), 17 deletions(-)



commit cb271c77b697b8e5ae75b94c29059a9ce6a11576
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 14:14:43 2002 +0000

    Added DSCAPS_STATIC_ALLOC and DWDESC_SURFACE_CAPS.


 include/directfb.h                  |   36 +++++---
 src/core/layers.c                   |    9 +-
 src/core/layers.h                   |    1 
 src/core/surfacemanager.c           |    8 +
 src/core/surfaces.c                 |  158 +++++++++++++++++++++++++-----------
 src/core/surfaces.h                 |    3 
 src/core/windows.c                  |   15 ++-
 src/core/windows.h                  |    1 
 src/display/idirectfbdisplaylayer.c |   17 ++-
 src/idirectfb.c                     |    2 
 10 files changed, 170 insertions(+), 80 deletions(-)



commit 573c565430aaea152529f6617e76a13df5972533
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 13:15:51 2002 +0000

    Fixed bug introduced last night.


 fbdev.c |    1 +
 1 file changed, 1 insertion(+)



commit 692a4ca293f77c5559e5a9fcf0381f640abca197
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 12:15:15 2002 +0000

    Don't lock/unlock buffers during surface destruction.


 surfaces.c |   16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)



commit 007b6cb06f50cb93cdae116c6922a22ffa9620c4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 08:32:28 2002 +0000

    Framebuffer is now mapped by 'fbdev' instead of 'gfxcard'.
    Reordered initialization/shutdown/join/leave calls in 'core'.


 core.c        |   18 +++++++++------
 fbdev/fbdev.c |   50 +++++++++++++++++++++++++++++++++++++++++++
 fbdev/fbdev.h |    6 +++++
 gfxcard.c     |   66 ++++++++--------------------------------------------------
 gfxcard.h     |    2 -
 5 files changed, 78 insertions(+), 64 deletions(-)



commit 205d8a423ad8b88727f14d5dacba2b0aaf8c8545
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 03:45:06 2002 +0000

    EnumVideoModes handles bpp again.


 BUGS                   |    1 -
 src/core/fbdev/fbdev.c |    4 +++-
 src/core/fbdev/fbdev.h |    1 +
 src/idirectfb.c        |    2 +-
 4 files changed, 5 insertions(+), 3 deletions(-)



commit 1cc3c5bb941d63b1a528cf7ecf756ac5af251e00
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 16 02:51:00 2002 +0000

    Implemented FusionProperty in multi application mode (via three semaphores).
    Implemented backup/restore of the layer configuration before/after excl. access.


 BUGS                       |    1 
 TODO                       |    1 
 src/core/fusion/property.c |  315 ++++++++++++++++++++++++++++++++++++++++-----
 src/core/fusion/property.h |  102 ++++++--------
 src/core/layers.c          |   54 +++----
 5 files changed, 358 insertions(+), 115 deletions(-)



commit 0b876569e2a03127085453ca679b0df4501cf7fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 15 21:46:48 2002 +0000

    A bit work on cooperative levels.


 idirectfbdisplaylayer.c |   52 ++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 50 insertions(+), 2 deletions(-)



commit c5b9b7a560bcdf95267f8df5da6e80eba330e7ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 15 21:00:29 2002 +0000

    Avoid endless waiting during deallocation.


 surfacemanager.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 9476e636625bf940cc4abac0a6e86121c6b1afe6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 15 18:53:55 2002 +0000

    DirectFBError() and DirectFBErrorFatal() return the error code now for easier
    code (e.g. return DirectFBError(...)).


 include/directfb.h |   16 ++++++++--------
 src/directfb.c     |    9 +++++++--
 2 files changed, 15 insertions(+), 10 deletions(-)



commit 0a6360eca46118222722c00c5546638bf668e667
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 19:10:13 2002 +0000

    Made debug message an error message (background surface vanished).


 layers.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 765824aadf41a59cc9a4185e737153f784f414d4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 17:49:42 2002 +0000

    Background image is now persistent (application can exit after setting it).


 layers.c |   18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)



commit 2db3eb090023731bb02304da690a1512202c2c19
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 17:08:49 2002 +0000

    Fusion debug messages are printed only if debugging is enabled at runtime.


 fusion_internal.h |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit d00b2894c7e5cfc20187afd47e979ff6d24e835f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 13 16:43:20 2002 +0000

    Updated the Makefile accordingly.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 683b0e1dec31d9c09d4f6653e32141c327151c9d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 13 16:42:23 2002 +0000

    Updated savagefb-0.4.0 patch based on a patch from Alex Song.


 /dev/null                                       |binary
 b/patches/README.savagefb                       |    7 ++++---
 b/patches/savagefb-0.4.0-linux-2.4.19.patch.bz2 |binary
 3 files changed, 4 insertions(+), 3 deletions(-)



commit 0b50ef53fed7af34cb559d40d8c5e4eea12dafb7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 16:32:12 2002 +0000

    Implemented ovlFlipBuffers().


 neo_overlay.c |   17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)



commit 0819e441f1ab8742ba466f3eb52a20611930b515
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 15:15:50 2002 +0000

    CardState is a local resource now, using a mutex instead of a skirmish.
    The state for window stack updates is now located in the local layer data.
    Added deinitialization of the surface manager.
    
    No resource leak by starting/exitting a small application.


 TODO                      |    1 
 src/core/gfxcard.c        |    2 
 src/core/layers.c         |   41 ++++++++++++---
 src/core/layers.h         |    1 
 src/core/state.c          |   41 +++++++++++----
 src/core/state.h          |    8 +-
 src/core/surfacemanager.c |   36 ++++++++++++-
 src/core/surfacemanager.h |    2 
 src/core/windows.c        |  123 +++++++++++++++++++++++-----------------------
 src/core/windows.h        |   10 ++-
 10 files changed, 177 insertions(+), 88 deletions(-)



commit 15d59c025572010ba2b150608a59426bee4e3617
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 13 11:56:04 2002 +0000

    Implemented Sop_lut8_Sto_Dacc() and Sop_a8_Sto_Dacc().


 generic.c |   45 +++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 43 insertions(+), 2 deletions(-)



commit f4c64bd77fbe45721c84d13d13b8aa88e38822f3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 13 11:01:39 2002 +0000

    more compile fixes


 idirectfbvideoprovider_avifile.cpp |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 21d0351157a148d08a34a91d9184e0d1f3b6ba9e
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 12 23:58:50 2002 +0000

    cleanup


 Makefile.am |   18 +-----------------
 1 file changed, 1 insertion(+), 17 deletions(-)



commit f3d3f9a5034c2ac644a659d9e49a6399e261777c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 20:42:25 2002 +0000

    Hopefully compiles again.


 idirectfbvideoprovider_avifile.cpp |   38 +++++++++++++++----------------------
 1 file changed, 16 insertions(+), 22 deletions(-)



commit c6b0d63024ff3035c8350269872d47106a051eb5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 19:30:44 2002 +0000

    Another TODO item: synchronous messages


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit a224317c241dee4211c410bfd82a4cc9193fe8ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 19:27:53 2002 +0000

    Added TODO item for making CardState local only.


 TODO |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit aa3eac47031a78975bbf88f160921641a3582355
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 19:11:33 2002 +0000

    Don't install signal handler for slaves.


 core.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 3ee5854577d2637ac153aba2d61e89865480da7f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 18:59:36 2002 +0000

    Made CoreWindow a FusionObject.


 core/layers.c                     |   15 ++++---
 core/windows.c                    |   73 +++++++++++++++++++++++++++-----------
 core/windows.h                    |   11 +++--
 display/idirectfbsurface_window.c |    2 -
 windows/idirectfbwindow.c         |    8 ++--
 5 files changed, 73 insertions(+), 36 deletions(-)



commit 0c132f42a0428211e79bf0b227410f8b6eaf2df9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 17:43:57 2002 +0000

    Each object pool has a name now.
    
    Added shstrdup().


 fusion/fusion_shmalloc.c |   23 +++++++++++++++++++++++
 fusion/object.c          |   22 +++++++++++++++-------
 fusion/object.h          |    3 ++-
 fusion/shmalloc.h        |    5 +++++
 surfaces.c               |    3 ++-
 5 files changed, 47 insertions(+), 9 deletions(-)



commit 27cd209d227a378d111a36116351b7f2568338ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 16:41:22 2002 +0000

    Added FusionObject which is currently used for surfaces and will be used for
    windows (dynamic resource) or static resources like layers, input devices...
    
    Each FusionObject has a reference counter which is automatically decreased
    if the process dies that increased it. Added bone collector thread that checks
    for dead objects (zero reference) and calls the destructor (master only).
    
    Replaced dfb_surface_destroy() calls with dfb_surface_unref() calls.
    
    Each IDirectFBSurface instance increases the reference counter, so be careful
    to release all sub surfaces.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    4 
 src/core/coredefs.h                                            |    2 
 src/core/fbdev/fbdev.c                                         |    9 
 src/core/fonts.c                                               |    5 
 src/core/fusion/Makefile.am                                    |    2 
 src/core/fusion/fusion_internal.h                              |    6 
 src/core/fusion/fusion_types.h                                 |    7 
 src/core/fusion/object.c                                       |  281 ++++++++++
 src/core/fusion/object.h                                       |   86 +++
 src/core/fusion/reactor.c                                      |   85 +--
 src/core/fusion/reactor.h                                      |    8 
 src/core/fusion/ref.c                                          |    1 
 src/core/gfxcard.c                                             |   12 
 src/core/gfxcard.h                                             |    3 
 src/core/layers.c                                              |   35 -
 src/core/state.c                                               |   12 
 src/core/surfacemanager.c                                      |   29 -
 src/core/surfacemanager.h                                      |    6 
 src/core/surfaces.c                                            |   71 +-
 src/core/surfaces.h                                            |   70 ++
 src/core/windows.c                                             |   10 
 src/display/idirectfbpalette.c                                 |    6 
 src/display/idirectfbsurface.c                                 |   19 
 src/display/idirectfbsurface_window.c                          |    2 
 src/idirectfb.c                                                |    6 
 26 files changed, 627 insertions(+), 152 deletions(-)



commit fe6adfc2f803a4e42d6043ddceaef84e478ba5ac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 12 14:44:26 2002 +0000

    cleanup


 fusion.c |  122 +++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 99 insertions(+), 23 deletions(-)



commit d435c45f6bd3258204b92b579a6973b05456eaa1
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Aug 11 14:32:37 2002 +0000

    Reverted my last change since the compiler seems to like the old code better.


 generic.c |   29 +++++++++--------------------
 1 file changed, 9 insertions(+), 20 deletions(-)



commit 865739f917f90a015d616ca5186af037d2d4e110
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Aug 11 14:26:15 2002 +0000

    Cleaned up Bop_a8_set_alphapixel_Aop_rgb24().


 generic.c |   29 ++++++++++++++++++++---------
 1 file changed, 20 insertions(+), 9 deletions(-)



commit cef004a1e1012adc965bc1306badc2b1034517e9
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Aug 11 13:30:45 2002 +0000

    Removed unused locking code.


 tree.c |   16 +---------------
 tree.h |   29 +++++++----------------------
 2 files changed, 8 insertions(+), 37 deletions(-)



commit e62f8d8890ed55e9e0a02bb68f68094443603c6d
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Aug 11 12:52:18 2002 +0000

    Aligned configure output.
    Don't use duffs device for Bop_a8_set_alphapixel_Aop_lut8().


 configure.in              |    2 +-
 src/gfx/generic/generic.c |   39 ++++++++++++---------------------------
 2 files changed, 13 insertions(+), 28 deletions(-)



commit 55116b98bd235597303c3eb82705e33e34f743da
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 17:35:43 2002 +0000

    A better implementation of Bop_a8_set_alphapixel_Aop_lut8(). Much slower
    but correct for AA glyphs and reasonably fast for monochrome ones.


 generic.c |   70 +++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 56 insertions(+), 14 deletions(-)



commit bbae4fac76aa45eca8a9d9e4ba9291c7b81e24b0
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 14:18:34 2002 +0000

    Reuse Bop_a8_set_alphapixel_Aop_lut8() for RGB332; it's the same code.


 generic.c |   18 ++----------------
 1 file changed, 2 insertions(+), 16 deletions(-)



commit dc0d6fb4d5a0221acbc22dc742a6b055eb442548
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 13:37:08 2002 +0000

    Set the color_index in the font_state as well.
    
    Added a simple implementation for Bop_a8_set_alphapixel_Aop_lut8().


 core/gfxcard.c        |   10 +++--
 gfx/generic/generic.c |   87 +++++++++++++++++++++++++++++---------------------
 2 files changed, 57 insertions(+), 40 deletions(-)



commit b53dbe488c331539f20647af966b33a5aabbe6e8
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 12:05:09 2002 +0000

    Document the disable-module directfbrc option.


 directfbrc.5.in |    7 +++++++
 1 file changed, 7 insertions(+)



commit 26e472e21974e588f0f9bbd4828ed881c82936b7
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 10:37:10 2002 +0000

    Introduced an enum for the stage to improve code readability.
    Check if we reached our final stage in the inner loop of
    push_data_until_stage(). PNG images load again :-)


 idirectfbimageprovider_png.c |   37 +++++++++++++++++++++----------------
 1 file changed, 21 insertions(+), 16 deletions(-)



commit dd8f99b316f90ec1b72d5a783542b6fb7895fcfc
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Aug 9 09:46:34 2002 +0000

    Check that png_ptr is not NULL before calling png_destroy_read_struct().


 idirectfbimageprovider_png.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 43ccc81580cbcd1eb2d7a65e29e125df9e51eb00
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 20:02:42 2002 +0000

    Added inline function span_rgb32_to_rgb332().
    Added support for RGB332 surfaces to directfb-csource.


 docs/directfb-csource.1.in |    8 ++++----
 src/gfx/convert.h          |   17 ++++++++++++-----
 tools/directfb-csource.c   |   25 +++++++++++++++----------
 3 files changed, 31 insertions(+), 19 deletions(-)



commit 9acbe1c2e4d6b87f980900bc09e4cee5fdeb824a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 17:28:03 2002 +0000

    Added a bool "global" to fusion_ref_up/down(). A global reference is not bound
    to any fusionee (anonymous reference) and won't be automatically decreased if
    the fusionee that increased it dies. This will be useful for resource cleanup
    if a core object is linked to another one (e.g. surface linked to window).


 arena.c             |    6 +++---
 reactor.c           |    2 +-
 ref.c               |   14 ++++++++------
 ref.h               |    4 ++--
 shmalloc/shcalloc.c |    2 ++
 5 files changed, 16 insertions(+), 12 deletions(-)



commit 5bfc541847eb4acc18655fead9577879c4f61a79
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 16:56:59 2002 +0000

    Removed unnecessary include of core/fbdev.h from savage3d.c.
    Include core/fbdev/fbdev.h from savage_streams_old.c :-(


 savage3d.c           |    1 -
 savage_streams_old.c |    2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)



commit 6cf60a8c12a1e163947ff68398473c03c607c1b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 16:41:45 2002 +0000

    Moved framebuffer device specific files to "src/core/fbdev/".
    Only "gfxcard.c" still contains a bit fbdev code.
    
    Other files modified depend on the fbdev code which has to be fixed.


 b/configure.in                         |    1 
 b/gfxdrivers/matrox/matrox_bes.c       |    3 
 b/inputdrivers/keyboard/keyboard.c     |    3 
 b/src/core/Makefile.am                 |   11 
 b/src/core/core.c                      |   39 
 b/src/core/fbdev/.cvsignore            |    6 
 b/src/core/fbdev/Makefile.am           |   28 
 b/src/core/fbdev/fbdev.c               | 1398 ++++++++++++++++++++++++++++++++
 b/src/core/fbdev/fbdev.h               |  111 ++
 b/src/core/fbdev/vt.c                  |  373 ++++++++
 b/src/core/fbdev/vt.h                  |   75 +
 b/src/core/gfxcard.c                   |   43 -
 b/src/core/layers.c                    |   37 
 b/src/core/sig.c                       |    1 
 b/src/core/windows.c                   |   26 
 b/src/directfb.c                       |    1 
 b/src/display/idirectfbsurface_layer.c |   29 
 b/src/idirectfb.c                      |    3 
 src/core/fbdev.c                       | 1399 ---------------------------------
 src/core/fbdev.h                       |  111 --
 src/core/vt.c                          |  372 --------
 src/core/vt.h                          |   75 -
 22 files changed, 2091 insertions(+), 2054 deletions(-)



commit d451b6e9ef650b709639756cd869fcfc3f7c8c84
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 16:00:34 2002 +0000

    A filename is now contained in the common private data of data buffers.
    It is set if the databuffer is created for a file. Image providers that do
    not support data streaming can use it as a fallback.


 idirectfbdatabuffer.c          |   10 +++++++++-
 idirectfbdatabuffer.h          |    9 +++++++--
 idirectfbdatabuffer_file.c     |    2 +-
 idirectfbdatabuffer_memory.c   |    2 +-
 idirectfbdatabuffer_streamed.c |    2 +-
 idirectfbimageprovider.c       |   10 ++++++++++
 idirectfbimageprovider.h       |    2 ++
 7 files changed, 31 insertions(+), 6 deletions(-)



commit 51562d51675db2919e39071d4308ebb6cb6a0d0a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 15:32:42 2002 +0000

    minor cleanup


 idirectfbimageprovider_png.c |   16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)



commit 85970d7ad115511529a8e293bcc2aa764c14e8a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 15:14:01 2002 +0000

    Abort data streaming if error is detected.


 idirectfbimageprovider_png.c |    3 +++
 1 file changed, 3 insertions(+)



commit 79d3a8429918c26e882b3926e98e666e10222d6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 15:06:21 2002 +0000

    Added DFB_UNIMPLEMENTED returning methods for SetRenderCallback().
    Forgot to add a "return" if no system memory could be allocated.
    Started implementing the render callback for PNGs, not working yet.


 idirectfbimageprovider_gif.c  |   14 ++++++++++
 idirectfbimageprovider_jpeg.c |   14 ++++++++++
 idirectfbimageprovider_png.c  |   55 ++++++++++++++++++++++++++++++++++++------
 3 files changed, 76 insertions(+), 7 deletions(-)



commit a559d31a2d2f5a54529dbf9713158fe224887bcb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 14:58:07 2002 +0000

    signed/unsigned switch


 idirectfbdatabuffer_streamed.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5dad1d33a9136df54cd843c6c11b7785b16469b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 14:57:50 2002 +0000

    Added WaitForData() call before peeking 32 bytes.


 idirectfbimageprovider.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 10fe1a06206d1af286f4f48df6632e5391a75715
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 14:54:22 2002 +0000

    Added another format conversion by reordering the switch statement :-)
    Put palette info into the DFBSurfaceDescription.


 directfb-csource.c |   40 ++++++++++++++++++++++++----------------
 1 file changed, 24 insertions(+), 16 deletions(-)



commit ef7fa845ee1619693b8e19352db183e891b7394a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 8 14:42:42 2002 +0000

    Added DSDESC_PALETTE which can be used to initialize the surface's palette.
    
    Added IDirectFBImageProvider::SetRenderCallback() that is not implemented yet.


 include/directfb.h |   27 ++++++++++++++++++++++++++-
 src/idirectfb.c    |   26 ++++++++++++++++++++++++++
 2 files changed, 52 insertions(+), 1 deletion(-)



commit db62c19693b6244ce47b8343603966cd17b256cc
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 14:20:09 2002 +0000

    the final touch


 directfb-csource.c |   51 ++++++++++++++++++++++++++++-----------------------
 1 file changed, 28 insertions(+), 23 deletions(-)



commit 73ba2b01f0a827d04d27c67a115f8a5a09780bff
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 12:02:35 2002 +0000

    Updated NEWS and ChangeLog.
    Mention the current problem with EnumVideoModes() in BUGS.


 BUGS      |    1 
 ChangeLog |  318 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |    5 
 3 files changed, 324 insertions(+)



commit 99c8913d591b49b19d55c9422c1682ffaf1a0d6d
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 11:45:05 2002 +0000

    Also dump the number of palette entries.


 directfb-csource.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 476d933abfa7013925a3a7a1fffdf3a1369343d6
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 11:19:22 2002 +0000

    Dump palette from PNG file when the destination format is LUT8.


 directfb-csource.c |   97 ++++++++++++++++++++++++++++++++++++-----------------
 1 file changed, 66 insertions(+), 31 deletions(-)



commit a67a726305bd708d751968c3779d9f50ce27b033
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 10:16:55 2002 +0000

    Allow to create LUT8 surfaces from indexed PNGs (need to add a way to
    dump the palette).


 docs/directfb-csource.1.in |   11 +++++------
 tools/directfb-csource.c   |   43 ++++++++++++++++++++++++++-----------------
 2 files changed, 31 insertions(+), 23 deletions(-)



commit 014977573bb22b48f2fea83205d61439c4b9cc86
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Aug 8 08:50:30 2002 +0000

    Align the pitch to multiples of 4.


 directfb-csource.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 697a81750023e7b16b0a8e28959bf297eafd9f1c
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 23:14:19 2002 +0000

    Fixed loading of grayscale PNGs into A8 and added support
    for loading RGB PNGs w/o alpha-channel into RGB24.


 directfb-csource.c |   41 +++++++++++++++++++++++++++--------------
 1 file changed, 27 insertions(+), 14 deletions(-)



commit d99866bae096916a55aa37d94a17e9f90dbc2e1c
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 22:23:31 2002 +0000

    Added two Makefile rules that might be useful to build only parts of
    the DirectFB package:
      'html' creates the HTML docs
      'directfb-csource' compiles the directfb-csource utility


 Makefile.am |   12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)



commit b3d34a58c70d3429ce08a45484b7bd3ec8bb38e6
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 22:00:00 2002 +0000

    Added a man-page for directfb-csource.


 configure.in               |    1 
 docs/.cvsignore            |    1 
 docs/Makefile.am           |   12 ++++++-
 docs/directfb-csource.1.in |   68 +++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 80 insertions(+), 2 deletions(-)



commit b1fb60939273bb8f13370ff7f9d1f16d61d17e12
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 19:07:12 2002 +0000

    Added span_argb_to_a8().
    Added Tim Janik to the list of contributors since I used some of
    his gdk-pixbuf-csource code for directfb-csource.


 README            |    1 +
 src/gfx/convert.h |    5 +++++
 2 files changed, 6 insertions(+)



commit a140b2eb4cc5668e05dfa9bef341bbf6c2cc0902
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 18:57:32 2002 +0000

    Allow to specify the destination format on the command-line.


 Makefile.am        |    6 +
 directfb-csource.c |  162 +++++++++++++++++++++++++++++++++++++++--------------
 2 files changed, 125 insertions(+), 43 deletions(-)



commit 0e22f4b9c5946ad2a0caeff533d6eaa0fd7e79aa
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Aug 7 15:48:37 2002 +0000

    Added directfb-csource, a tool that creates a C header file from
    a PNG image that can included in a DirectFB application.
    Based on gdk-pixbuf-csource.


 configure.in             |    1 
 tools/.cvsignore         |    1 
 tools/Makefile.am        |   11 +
 tools/README             |    3 
 tools/directfb-csource.c |  361 +++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 376 insertions(+), 1 deletion(-)



commit 1bb6971b3b94a48e1b395d998ef8086b294cd56a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 6 19:12:05 2002 +0000

    Forgot to lock/unlock during Flush().


 idirectfbdatabuffer_streamed.c |    4 ++++
 1 file changed, 4 insertions(+)



commit f6ebe1e474522ceb18d80509dfbf082882f2ce55
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 6 19:11:05 2002 +0000

    Completely implemented streamed data buffer, completely untested.


 idirectfbdatabuffer_streamed.c |  367 +++++++++++++++++++++++++++++++++++++++--
 1 file changed, 353 insertions(+), 14 deletions(-)



commit b7d1c486fb79cb161823209f83fb013061f20ea3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 6 17:14:06 2002 +0000

    cleanup


 idirectfb.c                          |   50 -----------------------------------
 media/idirectfbdatabuffer_file.c     |    7 +---
 media/idirectfbdatabuffer_memory.c   |    7 +---
 media/idirectfbdatabuffer_streamed.c |    2 -
 4 files changed, 5 insertions(+), 61 deletions(-)



commit e42871e1398fd46e73242b24c262768a713da5b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 6 16:25:03 2002 +0000

    Return DFB_BUFFEREMPTY in PeekData() instead of blocking forever.


 idirectfbdatabuffer_file.c   |    6 ++++++
 idirectfbdatabuffer_memory.c |    2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)



commit 81b53a34e438ac68937820f7fde5844e4658bc66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 6 16:02:21 2002 +0000

    Image providers now read data from an IDirectFBDataBuffer.
    JPEG and GIF providers cannot fully handle streamed buffers yet.
    
    IDirectFB::CreateImageProvider() implicitly creates a data buffer now.
    
    Added IDirectFBDataBuffer::CreateImageProvider().


 include/directfb.h                                              |   11 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |  253 ++---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |  212 +++-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |  444 +++++-----
 src/idirectfb.c                                                 |   34 
 src/media/Makefile.am                                           |    3 
 src/media/idirectfbdatabuffer.c                                 |   15 
 src/media/idirectfbdatabuffer_file.c                            |    5 
 src/media/idirectfbdatabuffer_memory.c                          |  117 ++
 src/media/idirectfbdatabuffer_streamed.c                        |    8 
 src/media/idirectfbimageprovider.c                              |   68 +
 src/media/idirectfbimageprovider.h                              |    5 
 12 files changed, 752 insertions(+), 423 deletions(-)



commit 7cc036011c47758fb8be659619ba27337a3c920a
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 6 13:27:35 2002 +0000

    typo


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4af91c64a409406da9a3cc95ddf56b9fc590917f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Aug 6 12:24:04 2002 +0000

    Call AC_INIT() with a sane value.


 configure.in |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 43e618956375f7c456c62709f62d741023a26cc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 2 17:21:59 2002 +0000

    Don't reconfig front buffer if policy stays the same.


 surfaces.c |   28 ++++++++++++++++++----------
 1 file changed, 18 insertions(+), 10 deletions(-)



commit 88140b6dd11d5fa7f181765857e1e10a8596beae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 2 13:16:05 2002 +0000

    Implemented IDirectFBDataBuffer_File::PeekData().
    Made "offset" for PeekData() signed.


 include/directfb.h                       |   10 ++++----
 src/media/idirectfbdatabuffer.c          |    4 ---
 src/media/idirectfbdatabuffer_file.c     |   36 +++++++++++++++++++++++++++++--
 src/media/idirectfbdatabuffer_memory.c   |    2 -
 src/media/idirectfbdatabuffer_streamed.c |    2 -
 5 files changed, 42 insertions(+), 12 deletions(-)



commit 9ff4d2a59ae55b08030eb9d0d4effffc33326c3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 2 12:53:05 2002 +0000

    Moved mode probing to primaryInitLayer().


 fbdev.c |  117 +++++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 61 insertions(+), 56 deletions(-)



commit 118d59bd6ea364c5bbd4aed1e9bd51070d4e6f26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 1 13:48:28 2002 +0000

    Reject RGB332 in IDirectFB::CreateSurface() if it's not compiled in.
    
    Initial work on data abstraction for image providers, etc.


 include/directfb.h                       |  202 ++++++++++++++++++++--
 src/gfx/generic/generic.c                |    2 
 src/idirectfb.c                          |  110 ++++++++----
 src/media/Makefile.am                    |    5 
 src/media/idirectfbdatabuffer.c          |  184 ++++++++++++++++++++
 src/media/idirectfbdatabuffer.h          |   65 +++++++
 src/media/idirectfbdatabuffer_file.c     |  284 +++++++++++++++++++++++++++++++
 src/media/idirectfbdatabuffer_memory.c   |  184 ++++++++++++++++++++
 src/media/idirectfbdatabuffer_streamed.c |  182 +++++++++++++++++++
 9 files changed, 1171 insertions(+), 47 deletions(-)



commit 5837463f42095d16a5f9de80267057654003eea9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 1 13:36:29 2002 +0000

    Fixed typo, fixes a crash when blitting from LUT to RGB.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 49c17ad43b1b208f35be31fcba223c4038056148
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 31 13:13:56 2002 +0000

    Removed the version number from the README file for the
    matroxfb-vsync-irq-patch.


 b/patches/Makefile.am                         |    2 +-
 b/patches/README.matroxfb-vsync-irq-patch     |    4 ++++
 patches/README.matroxfb-vsync-irq-patch-2.4.6 |    4 ----
 3 files changed, 5 insertions(+), 5 deletions(-)



commit c4185e2f583680e5cbc97bd3064e5872b6f1baee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 29 22:47:18 2002 +0000

    Added IDirectFBPalette::FindBestMatch().


 include/directfb.h             |   14 ++++++++++++++
 src/display/idirectfbpalette.c |   40 +++++++++++++++++++++++++++++++++++-----
 2 files changed, 49 insertions(+), 5 deletions(-)



commit fdb4c8fd1c6f19e4f93bcb611671a45a4871286a
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 29 19:24:26 2002 +0000

    Removed unneeded calls to IDirectFBSurface::GetCapabilities from
    RenderTo() functions.


 idirectfbimageprovider_gif.c  |    9 ++-------
 idirectfbimageprovider_jpeg.c |   15 +++++----------
 idirectfbimageprovider_png.c  |   13 ++++---------
 3 files changed, 11 insertions(+), 26 deletions(-)



commit 140fbadf7729b41d0fad3106a5eeaa0c5654c87d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 29 17:24:03 2002 +0000

    Typo.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e069f47632a77d9b01bd57a0046c26a055b87c66
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 28 23:09:25 2002 +0000

    Added configure option "--enable-profiling".
    
    Added "alpha present" bit to LUT8, because the LUT has alpha values.
    
    Added LUT8 support to image providers.
    
    Added option "pixelformat" which overrides "depth" for the default mode.
    The value specified is e.g. "RGB332" or "LUT8".
    
    SetPalette() for display layers is now called by the core after setting
    a new configuration (for LUT8 only of course).
    
    Added dfb_palette_search() which (really slowly) looks for the best
    matching palette entry for a specific color.
    
    Generate a RGB332 like palette as default palette for LUT8.
    
    Allow other alpha supporting pixel formats than ARGB for alpha blended
    windows, too.
    
    IDirectFBSurface::Clear(), SetColor(), SetSrcColorKey() and SetDstColorKey()
    now lookup the right color index for indexed surfaces.
    
    Much more support for LUT8 in software driver.


 configure.in                                                    |   10 
 include/directfb.h                                              |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |   14 +
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   25 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |   23 +-
 src/core/fbdev.c                                                |    4 
 src/core/gfxcard.c                                              |    2 
 src/core/layers.c                                               |   29 ++
 src/core/palette.c                                              |   64 +++++
 src/core/palette.h                                              |   14 +
 src/core/surfaces.c                                             |   25 +-
 src/core/windows.c                                              |   16 -
 src/display/idirectfbpalette.c                                  |    7 
 src/display/idirectfbsurface.c                                  |   62 +++--
 src/display/idirectfbsurface.h                                  |    1 
 src/gfx/generic/generic.c                                       |  109 +++++-----
 src/misc/conf.c                                                 |   61 +++++
 src/misc/conf.h                                                 |    7 
 src/misc/gfx_util.c                                             |   53 ++--
 src/misc/gfx_util.h                                             |    4 
 src/misc/util.h                                                 |    1 
 21 files changed, 402 insertions(+), 133 deletions(-)



commit 8e30c980ea8da61209b28b51718bd19bd2829e71
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 26 16:28:33 2002 +0000

    Fixed centering of primary surface window.
    Converted some unsigned ints to signed ones.


 BUGS                |    2 --
 src/core/layers.c   |    4 ++--
 src/core/layers.h   |    4 ++--
 src/core/surfaces.h |    4 ++--
 src/core/windows.c  |    8 ++++----
 src/core/windows.h  |   12 ++++++------
 src/idirectfb.c     |    4 ++--
 7 files changed, 18 insertions(+), 20 deletions(-)



commit 932e6c2392867b7ded7122248e06298ddf3b3d83
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 26 15:32:58 2002 +0000

    two more bugs


 BUGS |    3 +++
 1 file changed, 3 insertions(+)



commit 741aec12afe6989678bedfe62f5ad4f51639fa4c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 26 14:19:05 2002 +0000

    Added another bit to the pixel format definition indicating an indexed format.
    Added DFB_PIXELFORMAT_IS_INDEXED(format).
    Added IDirectFBSurface::SetColorIndex() for indexed pixel formats.
    Enabled drawing functions for DSPF_LUT8 in the software driver.


 include/directfb.h             |   26 +++++++++++--
 src/core/state.h               |    1 
 src/display/idirectfbsurface.c |   81 ++++++++++++++++++++++++++++++++---------
 src/gfx/generic/generic.c      |   32 ++++++++++------
 4 files changed, 108 insertions(+), 32 deletions(-)



commit d1d08d8025d498195c72a637a14372b912295bdb
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jul 26 13:53:46 2002 +0000

    Declared the return value of DirectFBCheckVersion() as const.
    Assure that directfb.h fits into 80 columns.


 include/directfb.h |  139 +++++++++++++++++++++++++++--------------------------
 src/directfb.c     |    6 +-
 2 files changed, 74 insertions(+), 71 deletions(-)



commit a441f469a8bef417043e3cc8d1d9e4d8f8fe6952
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jul 26 10:59:35 2002 +0000

    some smaller README updates


 README |   31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)



commit 37fc8263fca8153ab353896e2f2a332868b26612
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jul 26 10:49:19 2002 +0000

    Updated ChangeLog and NEWS file.


 ChangeLog |  734 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 NEWS      |   29 ++
 2 files changed, 760 insertions(+), 3 deletions(-)



commit fd89587733a4cc8480726e67032a2e49de9bf7da
Author: holger <holger>
Date:   Fri Jul 26 10:32:29 2002 +0000

    implemented direct glyph mapping without charmap, toggled by the DFFA_NOCHARMAP flag


 include/directfb.h                               |    9 +++++
 interfaces/IDirectFBFont/idirectfbfont_default.c |   36 +++++++++++++++++------
 2 files changed, 35 insertions(+), 10 deletions(-)



commit 17e2e0d43832f40fb4863cb679b3c5ba252fb192
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 26 04:10:28 2002 +0000

    Forgot to increase the ABI version.


 gfxcard.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d20bdff707cd6f4100e8c9d3df9944bb8aeb934e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 26 04:06:33 2002 +0000

    Added SetField() to layer driver API, removed surface listener stuff
    from Matrox driver and implemented SetField().


 gfxdrivers/matrox/matrox_bes.c |   73 +++++++++++------------------------------
 src/core/layers.c              |   15 +++++---
 src/core/layers.h              |    7 +++
 3 files changed, 36 insertions(+), 59 deletions(-)



commit a105b14d28c102df50ab58734eaf297cb992a02c
Author: holger <holger>
Date:   Thu Jul 25 15:33:02 2002 +0000

    fixed nasty off-by-one bug


 idirectfbfont_default.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 62ea6a0e9a0c8fe26b36ebfba8ee89a2f8863a35
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 25 14:54:31 2002 +0000

    Added DFBDisplayLayerTypeFlags for a basic classification of the layers'
    purpose a la DFBInputDeviceTypeFlags. Classification includes graphics,
    video, still picture and background usage.
    
    Added DFBDisplayLayerDescription containing capabilities and type for now.
    
    Display layer enumeration callback gets the layer's description now.
    
    Removed IDirectFBDisplayLayer::GetCapabilities() and added GetDescription().


 gfxdrivers/ati128/ati128_overlay.c     |    5 ++-
 gfxdrivers/matrox/matrox_bes.c         |    9 +++---
 gfxdrivers/neomagic/neo_overlay.c      |    7 ++--
 gfxdrivers/savage/savage_streams_old.c |   17 ++++++-----
 include/directfb.h                     |   48 ++++++++++++++++++++++++++-------
 src/core/fbdev.c                       |    5 ++-
 src/core/input.c                       |    7 ++--
 src/core/input.h                       |    6 ++--
 src/core/layers.c                      |   15 +++++-----
 src/core/layers.h                      |   15 +++++-----
 src/directfb.c                         |    6 +++-
 src/display/idirectfbdisplaylayer.c    |   14 ++++++---
 src/idirectfb.c                        |   20 ++++++++-----
 src/input/idirectfbinputdevice.c       |    3 +-
 14 files changed, 116 insertions(+), 61 deletions(-)



commit 7b7f6668800158850f8f73cfca93ecac60863882
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jul 25 14:11:43 2002 +0000

    small cleanup


 windows.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 08053094860209c41b56a277858c9b200d945d73
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jul 25 13:35:37 2002 +0000

    Implemented input_only windows (windows w/o a surface).


 include/directfb.h            |    5 +++-
 src/core/windows.c            |   49 ++++++++++++++++++++++++------------------
 src/windows/idirectfbwindow.c |    6 +++++
 3 files changed, 39 insertions(+), 21 deletions(-)



commit 67825aa7461002b2eb7a2889590b0f5b4547a617
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jul 25 08:24:28 2002 +0000

    Declared DFBRectangle and DFBRegion as const function parameters for
    all functions that don't change them. This documents the API better
    and keeps us from accidentally modifying the passed structs.


 include/directfb.h                                                   |   20 ++---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    6 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |    4 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    6 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |    2 
 src/display/idirectfbsurface.c                                       |   38 +++++-----
 src/display/idirectfbsurface_layer.c                                 |    8 +-
 src/display/idirectfbsurface_window.c                                |    8 +-
 11 files changed, 50 insertions(+), 48 deletions(-)



commit 74c46dce26053101cee895e4d46c60b17130b711
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 24 19:12:57 2002 +0000

    Declared name and value parameters of DirectFBSetOption as const.


 include/directfb.h |    4 ++--
 src/directfb.c     |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)



commit 66f001333016e4e050b387747c42579829c3e31e
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 24 11:19:25 2002 +0000

    Updated email address.


 AUTHORS |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 78b7263f99f680a8d3f281a9b34fefbbc92649ad
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 23 09:56:40 2002 +0000

    Applied a patch from Ville Syrjala <syrjala@sci.fi> that removes
    the unneeded call to dfb_surfacemanager_assure_system().


 idirectfbvideoprovider_v4l.c |   13 +------------
 1 file changed, 1 insertion(+), 12 deletions(-)



commit fbef7a03f099251f711b725ddb2d1ebb9822fd24
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 19 00:57:39 2002 +0000

    New patch for 2.4.19,
    thanks to Brian J. Murrell <a40e8119bbddbe7b3d281db117f19b32@interlinx.bc.ca>.


 /dev/null                                     |binary
 b/README                                      |    1 +
 b/patches/Makefile.am                         |    2 +-
 b/patches/matroxfb-vsync-irq-patch-2.4.19.bz2 |binary
 4 files changed, 2 insertions(+), 1 deletion(-)



commit ef2469de1d75311ce10cdf2b1d62686925936ea6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 18 17:52:28 2002 +0000

    Applied patch from Ville Syrjala <syrjala@sci.fi> enabling acceleration
    for the second head of a dual head Matrox.


 gfxdrivers/matrox/matrox_state.c |    9 ++++++---
 src/core/gfxcard.c               |    4 ++++
 2 files changed, 10 insertions(+), 3 deletions(-)



commit 1e7b46212c1476820dcec333b408909bfd0193b3
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 17 15:17:08 2002 +0000

    spell checking


 directfbrc.5.in |   26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)



commit f291216fc589551996884ad28658cea415a8ffc2
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 17 15:04:30 2002 +0000

    Replaced '\344' in Ville's name with a plain 'a' as he requested.


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 01e7813aecbfef7689aa0252688b828fe8ff23b9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 17 14:23:51 2002 +0000

    Added Alex Song <alexsong@comports.com> to "Helping Developers" (Savage driver).


 AUTHORS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 985094acbe3df066be810f32acf0782a56121a34
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 17 14:09:13 2002 +0000

    Applied a patch from Alex Song <alexsong@comports.com> that completes
    support for the old streams engine as found in the Savage4 family.


 mmio.h               |   54 --
 savage.c             |   23 -
 savage.h             |    3 
 savage4.c            |   48 ++
 savage_streams_old.c |  983 ++++++++++++++++++++++++++++++++++++++++++---------
 savage_streams_old.h |   77 +++
 6 files changed, 940 insertions(+), 248 deletions(-)



commit 091a06c2c9b251c344e079d57afc207a981ab609
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 17 14:00:00 2002 +0000

    include <sys/time.h> for gettimeofday().


 input.c |    2 ++
 1 file changed, 2 insertions(+)



commit b23b194e7b54485d605429a12ed2dcfee551923c
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jul 17 13:52:33 2002 +0000

    Made the core fill in the InputEvent's timestamp field if it hasn't
    been set by the inputdriver.
    
    Reviewed all inputdrivers once more and removed some calls to
    gettimeofday() since dfb_input_dispatch() takes care of this now.


 include/directfb.h                     |    3 +--
 inputdrivers/dbox2remote/dbox2remote.c |    5 ++---
 inputdrivers/h3600_ts/h3600_ts.c       |    8 ++++----
 inputdrivers/joystick/joystick.c       |    2 ++
 inputdrivers/keyboard/keyboard.c       |    3 ++-
 inputdrivers/linux_input/linux_input.c |    2 --
 inputdrivers/lirc/lirc.c               |    5 +++--
 inputdrivers/ps2mouse/ps2mouse.c       |   18 ++++++------------
 inputdrivers/serialmouse/serialmouse.c |   15 +++++----------
 src/core/input.c                       |   13 +++++++++----
 10 files changed, 34 insertions(+), 40 deletions(-)



commit 8912f20a747bac1224832714cb326c158324055f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 16 14:50:42 2002 +0000

    Always set the flags field of the InputEvent before dispatching it.
    This is needed since the core modifies it, so we can't reuse the
    flags next time we use the event struct.
    
    Also made sure that all inputdrivers either always or never set the
    timestamp.
    
    Don't set the DIEF_BUTTONS flag in the linux_input driver, it is set
    by the core when the buttons field is calculated by fixup_button_event().


 joystick/joystick.c       |   23 +++++++++++------------
 linux_input/linux_input.c |    2 +-
 ps2mouse/ps2mouse.c       |   21 ++++++++++++---------
 serialmouse/serialmouse.c |   27 +++++++++++++++------------
 4 files changed, 39 insertions(+), 34 deletions(-)



commit b828db4a9d4f620cdbb678283fea6f96bb22bef8
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 16 14:46:19 2002 +0000

    Also call fixup_button_event() for events of type DIET_AXISMOTION.
    Fixes the buttonmask for motion events (needs some fixes to the input
    drivers that I'll commit next).


 input.c |   19 +++++++++++++------
 1 file changed, 13 insertions(+), 6 deletions(-)



commit fe3b99469d84781d8826ba2b31f2afd0fa8ab07d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 16 11:31:24 2002 +0000

    converted a C++ style comment to /* ... */


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit afddbad65bb48e811794c2c77b0b0dbb0ede098a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 15 13:05:06 2002 +0000

    Applied patch from Mike Pieper <mike@pieper-family.de> fixing locking
    of the surface buffers.


 idirectfbvideoprovider_v4l.c |   55 ++++++++++++++++++-------------------------
 1 file changed, 24 insertions(+), 31 deletions(-)



commit acc6b67a3185067d87a9a37a7e6cd0754390f007
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 15 12:28:51 2002 +0000

    Applied a patch from Alex Song that changes SetSrcColorKey() to
    accept r g b values instead of a 32bit key and sets the device pointer
    in dfb_layers_hook_primary() and dfb_layers_replace_primary().


 fbdev.c  |    8 ++++++--
 layers.c |   16 +++++-----------
 layers.h |    4 +++-
 3 files changed, 14 insertions(+), 14 deletions(-)



commit 122c72f1310605c3cd2150b873ddba3e268b374e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 12 16:20:13 2002 +0000

    Added support for interlaced surfaces with seperate field buffers to all
    drawing and blitting functions.


 generic.c |  175 ++++++++++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 143 insertions(+), 32 deletions(-)



commit fdc6032b759cd10d4d7988776979718675046325
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 12 13:41:22 2002 +0000

    Added DSDRAW_XOR ;)


 include/directfb.h        |    5 +
 src/gfx/generic/generic.c |  165 ++++++++++++++++++++++++++--------------------
 2 files changed, 98 insertions(+), 72 deletions(-)



commit d490bb40569b046d37731bad267c5d8e7334876e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 10 15:10:53 2002 +0000

    Added "dfb_layers_replace_primary" which acts like "dfb_layers_hook_primary",
    but replaces the complete function table allowing drivers to use the default
    methods for surface allocation by setting function pointers to NULL.


 layers.c |   20 +++++++++++++++++++-
 layers.h |    8 ++++++++
 2 files changed, 27 insertions(+), 1 deletion(-)



commit 44d10c689ff7caa8b55f5d5580dfcf3d9bb8a7f7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 10 13:40:09 2002 +0000

    Added DLOP_OPACITY which enables usage of the global alpha factor specified
    by SetOpacity(). This way drivers have the chance to forbid opacity changes
    during usage of the alpha channel or color keying.


 directfb.h |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit b17c15b5c784e8f8a7a14d7fc24b8b59addd0368
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 10 10:35:53 2002 +0000

    Automatic grabbing mode for grab-only devices or flipped surfaces
    by Mike Pieper <mike@pieper-family.de>.


 idirectfbvideoprovider_v4l.c |  128 +++++++++++++++++++++++++------------------
 1 file changed, 75 insertions(+), 53 deletions(-)



commit 1e7b2bc67c7d3b0dc7362fd7f6a91e7d4544cd32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 10 10:33:05 2002 +0000

    Some cleanups by Ville Syrjala <syrjala@sci.fi>.


 idirectfbvideoprovider_v4l.c |   25 +++++++++++++++----------
 1 file changed, 15 insertions(+), 10 deletions(-)



commit 04324b781b494484772b3b5b0e9fb64364f96e6f
Author: holger <holger>
Date:   Tue Jul 9 14:33:25 2002 +0000

    some more keydefinitions, use 16bit only for all keycodes


 include/directfb_keyboard.h            |   20 +++++++++++---------
 inputdrivers/linux_input/linux_input.c |   21 ++++++++-------------
 2 files changed, 19 insertions(+), 22 deletions(-)



commit a25f7c9ec2117e30fdebe90a8839f574df445782
Author: holger <holger>
Date:   Tue Jul 9 11:23:58 2002 +0000

    - DIKI_XXXX are now Unicode keys in the private area
    - fixed GetKeyState table lookup


 include/directfb_keyboard.h      |   87 ++++++++++++++++++++-------------------
 src/input/idirectfbinputdevice.c |   17 ++++---
 2 files changed, 56 insertions(+), 48 deletions(-)



commit 51286d851119a07b5d659e433f373a0d51997467
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 8 14:53:06 2002 +0000

    Reverted Holger's change, because it breaks IDirectFBInputDevice::GetKeyState()
    and other things.


 directfb_keyboard.h |   83 +++++++++++++++++++++++++---------------------------
 1 file changed, 41 insertions(+), 42 deletions(-)



commit ac06883cc9c2758cc43cbf3a4f2940012e7e14ee
Author: holger <holger>
Date:   Mon Jul 8 08:50:54 2002 +0000

    Rewrote the linux input keyboard driver, key mapping is done
    via table lookup now. You can distinguish DIKI_XXX codes by
    testing (DFB_KEY_TYPE(key) == DIKT_IDENTIFIER). We still have
    to implement keymap handling...


 include/directfb_keyboard.h            |   83 +--
 inputdrivers/linux_input/linux_input.c |  861 ++++-----------------------------
 src/core/input.c                       |    6 
 3 files changed, 169 insertions(+), 781 deletions(-)



commit a368c9884d18159094a457857912740636038a45
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 6 20:13:43 2002 +0000

    32bit destination color keying fills fixed by Ville Syrjala <syrjala@sci.fi>.


 generic.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fd6e003ab7f80337b3f776b257b63f9c210ffe30
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 5 16:08:02 2002 +0000

    Another set of patches from Ville Syrj\344l\344 <syrjala@sci.fi> adding
    planar YUV support and some fixes to the grabbing code. Thanks.


 idirectfbvideoprovider_v4l.c |   76 +++++++++++++++++++++++++++++--------------
 1 file changed, 53 insertions(+), 23 deletions(-)



commit 8052ecceb19f713dc19976b2ae10df79922131ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 4 13:56:22 2002 +0000

    Reset source surface pointer in window stack rendering state after blitting.


 windows.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 32b0fc7b32f99a56d6895ec1e828e93a02214db7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 3 19:56:32 2002 +0000

    Enhanced documentation of DFBResult and DFBDisplayLayerCapabilities.
    Renamed DLCAPS_INTERLACED_VIDEO to DLCAPS_DEINTERLACING.
    Renamed DLOP_INTERLACED_VIDEO to DLOP_DEINTERLACING.


 gfxdrivers/matrox/matrox_bes.c |    6 -
 include/directfb.h             |  180 +++++++++++++++++++++--------------------
 src/core/layers.c              |    2 
 3 files changed, 100 insertions(+), 88 deletions(-)



commit 90f48fee8dc25fa5115be5e17ca6c8c87c0aa4b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 3 16:16:47 2002 +0000

    Added new surface capability DSCAPS_SEPERATED for usage with DSCAPS_INTERLACED.
    
    Removed top level indention of directfb.h which looks strange but saves five
    characters that can be used for documentation of enum or struct entries.
    
    Minor documentation beautifications, started to write complete sentences with
    a capital letter at the beginning and a full stop at the end ;-P
    
    Removed "universe has collapsed..." print after "while(true)" loop.


 include/directfb.h        | 6246 +++++++++++++++++++++++-----------------------
 src/core/fusion/reactor.c |    2 
 2 files changed, 3125 insertions(+), 3123 deletions(-)



commit 739733971a78b0d0aad47d29ee16975f70b64a79
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 3 13:22:00 2002 +0000

    Don't print an error message for EINTR.


 reactor.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 9e4902f0957c330835cdb295a50e06c42b338d5f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 17:03:01 2002 +0000

    Added macro DFB_ALLOCATE_INTERFACE_DATA saving 4-6 lines per file.
    Added freeing "thiz->priv" to DFB_DEALLOCATE_INTERFACE saving 2 lines per file.


 include/directfb_internals.h                                         |   20 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   13 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |  294 ++++------
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   15 
 src/display/idirectfbdisplaylayer.c                                  |   10 
 src/display/idirectfbpalette.c                                       |   10 
 src/display/idirectfbsurface.c                                       |   11 
 src/display/idirectfbsurface.h                                       |    2 
 src/display/idirectfbsurface_layer.c                                 |    7 
 src/display/idirectfbsurface_window.c                                |    5 
 src/idirectfb.c                                                      |   12 
 src/input/idirectfbinputbuffer.c                                     |   14 
 src/input/idirectfbinputdevice.c                                     |   10 
 src/media/idirectfbfont.c                                            |   29 
 src/windows/idirectfbwindow.c                                        |   10 
 19 files changed, 196 insertions(+), 306 deletions(-)



commit 755bdad26908701dba84969652377ba79b93b296
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 16:21:10 2002 +0000

    Unlink shared memory file during shutdown.


 shmalloc.c |   36 ++++++++++++++++++++++++++----------
 1 file changed, 26 insertions(+), 10 deletions(-)



commit 187e096b6f50329e7c78ac7e840cf51085a6592c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 15:22:53 2002 +0000

    Debug version compile fixes.


 fbdev.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 6e677b80385bc75425372257413841b7220b36ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 15:13:28 2002 +0000

    Small fix for compiling without rgb332.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4c539af7fa02bbd0f4408c87670ad2c3d3f62bf8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 15:10:45 2002 +0000

    If no depth is specified use 16bit if supported or keep current.


 fbdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b4776f1c2fd413422225bf7da47152f19a2f228b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 15:05:38 2002 +0000

    Added surface notification for palette updates.
    Added display layer driver function "SetPalette" called by the surface
    listener of the display layer core listening to the layer's surface.


 gfxdrivers/matrox/matrox_bes.c |    2 
 src/core/fbdev.c               |  219 ++++++++++++++++++++++-------------------
 src/core/fbdev.h               |    3 
 src/core/gfxcard.h             |    2 
 src/core/layers.c              |   29 +++++
 src/core/layers.h              |    4 
 src/core/state.c               |    4 
 src/core/surfaces.c            |    5 
 src/core/surfaces.h            |    3 
 src/display/idirectfbpalette.c |    2 
 src/gfx/convert.h              |    4 
 src/idirectfb.c                |   77 +++++---------
 12 files changed, 198 insertions(+), 156 deletions(-)



commit 47f01c07467cc37c6e67781ad489136b53acf1bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 14:36:55 2002 +0000

    s/id/window_id/


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e5d44019d412d1795e6c6e3dfcef866411e570c3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 13:58:15 2002 +0000

    Cleaned up vertical retrace handling by passing the flipping flags to the
    driver (with DSFLIP_WAITFORSYNC eventually set).


 TODO                                  |    2 -
 gfxdrivers/ati128/ati128_overlay.c    |    7 +++---
 gfxdrivers/matrox/matrox_bes.c        |   33 ++++++++++++++++++++++--------
 gfxdrivers/neomagic/neo_overlay.c     |    7 +++---
 include/directfb.h                    |    6 ++---
 src/core/fbdev.c                      |   14 ++++++++----
 src/core/layers.c                     |   10 +++++----
 src/core/layers.h                     |    6 +++--
 src/core/windows.c                    |   37 ++++++++++++++++++++--------------
 src/core/windows.h                    |    5 ++--
 src/display/idirectfbsurface.c        |    3 --
 src/display/idirectfbsurface_layer.c  |   11 ++++------
 src/display/idirectfbsurface_window.c |    9 --------
 src/windows/idirectfbwindow.c         |    4 +--
 14 files changed, 87 insertions(+), 67 deletions(-)



commit 53ea313fac073a01730ea38c8f7faa05700130db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 2 09:45:38 2002 +0000

    More work on grabbing support by Ville Syrjala <syrjala@sci.fi>.


 idirectfbvideoprovider_v4l.c |  303 ++++++++++++++++++++++++++-----------------
 1 file changed, 185 insertions(+), 118 deletions(-)



commit b4cb5939f8233b8e2567e313c36007693a00959f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 1 16:46:16 2002 +0000

    Added input_fake.h to libdirectfb_linux_input_la_SOURCES.


 Makefile.am |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit e1777366e118f827fbd2a74787e8ec6cb3fddf66
Author: holger <holger>
Date:   Mon Jul 1 14:44:57 2002 +0000

    use <input_fake.h> for definitions missing in <linux/input.h>


 input_fake.h  |   84 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 linux_input.c |   21 +-------------
 2 files changed, 86 insertions(+), 19 deletions(-)



commit 1096402a70953939d062e7bdf288095c86affa0e
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 1 11:51:57 2002 +0000

    updated copyright headers


 directfb.c                 |    9 ++++++---
 idirectfb.h                |    9 ++++++---
 interface.c                |    9 ++++++---
 interface_implementation.h |    9 ++++++---
 4 files changed, 24 insertions(+), 12 deletions(-)



commit 2920f8184686b643650d60b36d9d2fee7de1a66d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 30 22:06:19 2002 +0000

    Use flags instead of booleans for each state entity.


 matrox.c       |   17 ++++++++++-------
 matrox.h       |   31 ++++++++++++++++++++-----------
 matrox_state.c |   46 +++++++++++++++++++++++-----------------------
 3 files changed, 53 insertions(+), 41 deletions(-)



commit 512c7aa5aacdeda969a144a3ed4607ab5bac84bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 29 23:40:30 2002 +0000

    fixed a typo


 idirectfbimageprovider_gif.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 578c4d1b5be71e53d39d5bdd810ebba7e3347d4d
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 28 16:57:47 2002 +0000

    Use one bit of DFBSurfacePixelFormat to indicate if the format has
    an alpha channel. Added new macro DFB_PIXEL_FORMAT_HAS_ALPHA().
    
    Use the new macro from the GIF ImageProvider.


 include/directfb.h                                             |   20 +++++-----
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |    2 -
 2 files changed, 12 insertions(+), 10 deletions(-)



commit 8e43429377afd90079d8dcba9599c6b48fe0f33c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 27 21:09:09 2002 +0000

    An own FrameThread implementation for each capturing method, thanks again.


 idirectfbvideoprovider_v4l.c |  121 +++++++++++++++++++++++--------------------
 1 file changed, 66 insertions(+), 55 deletions(-)



commit 229e5b3a272c9bde22ff0d688ba7c2d51e2b98db
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 27 19:34:38 2002 +0000

    Video provider now detects system only surfaces and does grabbing.
    
    Thanks to Ville Syrj\344l\344 <syrjala@sci.fi>


 README                                                         |    1 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |  177 +++++++---
 2 files changed, 135 insertions(+), 43 deletions(-)



commit e7f92f356d46d679ad545f4d35d377b30f182a03
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 27 14:46:14 2002 +0000

    Nicer (and slightly faster) rounding code that yields the same result.


 gfx_util.c |   18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)



commit 6f433462b372b9ca8a7e6d6187653b27ee8ab333
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 27 10:41:30 2002 +0000

    A better fix for the rounding errors on scaling.


 gfx_util.c |   18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)



commit fdff8497d30b16099577a7da465792c97f773407
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 26 23:04:03 2002 +0000

    Do the right thing when rendering to surfaces with alpha channel.
    More code cleanup.


 idirectfbimageprovider_gif.c |  200 +++++++++++++++++++------------------------
 1 file changed, 92 insertions(+), 108 deletions(-)



commit d26669671de7e340f3c0d39674008ec15df84804
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 26 18:34:32 2002 +0000

    Initial version of color lookup table support.
    
    Added DSPF_LUT8.
    
    Added IDirectFBSurface::GetPalette().
    
    Added IDirectFBPalette with
    - GetSize()
    - SetEntries()
    - GetEntries()
    
    Support by the software driver is in a very early stage.
    
    Played around with the method table grids of generated interface pages.


 include/directfb.h             |   74 +++++++++++++-
 src/core/Makefile.am           |    2 
 src/core/coretypes.h           |    1 
 src/core/fusion/shmalloc.h     |    1 
 src/core/palette.c             |   86 ++++++++++++++++
 src/core/palette.h             |   44 ++++++++
 src/core/surfaces.c            |   17 ++-
 src/core/surfaces.h            |    2 
 src/display/Makefile.am        |    2 
 src/display/idirectfbpalette.c |  214 +++++++++++++++++++++++++++++++++++++++++
 src/display/idirectfbpalette.h |   49 +++++++++
 src/display/idirectfbsurface.c |   29 +++++
 src/display/idirectfbsurface.h |    1 
 src/gfx/generic/generic.c      |   79 +++++++++++++--
 src/idirectfb.c                |    1 
 src/misc/gfx_util.c            |    2 
 tools/gendoc.pl                |   16 ++-
 17 files changed, 596 insertions(+), 24 deletions(-)



commit 4c85141949cd3d15c62dec451207fc8abda594e6
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 26 17:46:40 2002 +0000

    Looks as if we had a rounding error in bilinear_make_fast_weights().
    This change seems to fix it but it needs more testing.


 gfx_util.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit f9aac64e5771321b24ac463c04bcd82a9c86df01
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 26 17:09:38 2002 +0000

    Added a function that searches for a color that is not in the colormap
    and tries to pick one that is far from all used colors. Use it to find
    a suitable colorkey to use for the transparent pixels.


 idirectfbimageprovider_gif.c |  133 +++++++++++++++++++++++++++++--------------
 1 file changed, 91 insertions(+), 42 deletions(-)



commit 71d7fbec1989578b603ed60b485816e9336f0d57
Author: holger <holger>
Date:   Wed Jun 26 15:27:16 2002 +0000

    build linux_input driver only when ./configure was called with --enable-linux-input


 configure.in             |    4 ++++
 inputdrivers/Makefile.am |    8 +++++++-
 2 files changed, 11 insertions(+), 1 deletion(-)



commit b78660ccc94064eec53805212ea0f7417ceb1340
Author: holger <holger>
Date:   Wed Jun 26 15:14:53 2002 +0000

    arrgh!


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit 2392285d826fa06f91812e8b9bd72e520a5904b1
Author: holger <holger>
Date:   Wed Jun 26 15:07:07 2002 +0000

    - input driver for /dev/input/eventX devices
    - you have to explicitly disable old keyboard and mouse input drivers
      using the disable-module option if you don't want to get these events twice...


 Makefile.am               |    1 
 linux_input/.cvsignore    |    6 
 linux_input/Makefile.am   |   19 
 linux_input/linux_input.c | 1252 ++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 1278 insertions(+)



commit f9a553be54c352df9eaef9fa168578008b0eec4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 26 14:18:59 2002 +0000

    Applied patch from Daniel Mack <daniel@convergence.de> to avoid usage
    information printed out.


 ipc_cleanup |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 0dc5a0d1b8048efc149296613cefdd9958df409b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 26 13:08:27 2002 +0000

    reremoved


 /dev/null  |binary
 acconfig.h |   23 -----------------------
 2 files changed, 23 deletions(-)



commit 49e497d0396a637f9f015d21360a19cc381ce607
Author: holger <holger>
Date:   Wed Jun 26 12:29:41 2002 +0000

    You can disable modules now by specifying disable-module=<modulename>.
    We need this for the generic linux /dev/input/eventX driver


 core/core.c |   28 ++++++++++++++++++++++++++++
 misc/conf.c |   22 ++++++++++++++++++++++
 misc/conf.h |    2 ++
 3 files changed, 52 insertions(+)



commit f2b4974f87d3d5c6af01d796c350dfeec1a8b465
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 26 02:00:43 2002 +0000

    Handling DSFLIP_BLIT now.


 idirectfbsurface_window.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)



commit 0b39a51b49d9b55ec218183d8215b93da0efea3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 24 18:50:49 2002 +0000

    last try...


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f6f9e92c1c3a31ee1972b046337aa8c9276eee7f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 24 17:56:54 2002 +0000

    Trying to synchronize buffer deallocation and stopping of DMA.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   16 ++++++++--
 src/core/surfacemanager.c                                      |   10 ++++--
 2 files changed, 20 insertions(+), 6 deletions(-)



commit cd26640af9a95ebf846e94d984f9a68715e2c30d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 24 17:36:50 2002 +0000

    Removed CSNF_VIDEO from flags causing the video to stop.


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 17fe6402e7a13f523565f3f47178475afb77ad24
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 24 17:22:22 2002 +0000

    Use surface listener to stop DMA when surface is destroyed or resized.


 idirectfbvideoprovider_v4l.c |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit 65c9973940884c23aba17d97a0c6e820969a2206
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 24 12:36:46 2002 +0000

    Use the values yes or no for $have_x86 in order to get $have_mmx
    defined correcly. Problem spotted by Wout Mertens <wmertens@cisco.com>.


 configure.in |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 797aed0042e6e1302696e2e7c7d4d317328393e9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 23 22:16:29 2002 +0000

    Added sanity check to Resize().


 idirectfbwindow.c |    3 +++
 1 file changed, 3 insertions(+)



commit a6276bfc85979173a3db6783d7c4153203ede637
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 23 20:31:56 2002 +0000

    Added pre/demultiplication to drawing functions.


 include/directfb.h        |   30 ++++++++++++++++++++++--------
 src/gfx/generic/generic.c |   28 ++++++++++++++++++++++++++--
 2 files changed, 48 insertions(+), 10 deletions(-)



commit 041e97f65cc1b52b5dc8237ba1b9153bbb212539
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 23 18:49:46 2002 +0000

    Destroy state during destruction of font, otherwise listeners will crash.


 fonts.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 922a647e9c35c1dfb770becdea92a122d79d4b79
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 21 00:02:03 2002 +0000

    Updated the copyright notice added by gendoc.


 gendoc.pl |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f010697781b94a719bafe5c75e21d489fdfd133b
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 20 15:57:30 2002 +0000

    Made DirectFB-Internal require the exact same version of DirectFB.


 directfb-internal.pc.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit af1ae28608abd196151210d52b2cc32650bab56d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 20 15:30:45 2002 +0000

    Added IDirectFBDisplayLayer::GetWindow() returning an interface to an existing
    window identified by its window id.
    
    Increased version number to 0.9.13.


 configure.in                        |    2 +-
 include/directfb.h                  |   11 +++++++++++
 src/core/layers.c                   |   17 +++++++++++++++++
 src/core/layers.h                   |    3 +++
 src/core/windows.c                  |   22 ++++++++++++++--------
 src/core/windows.h                  |    2 ++
 src/display/idirectfbdisplaylayer.c |   24 +++++++++++++++++++++++-
 7 files changed, 71 insertions(+), 10 deletions(-)



commit 33e49faeee121b1126081526575e7fa5d1bd084a
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 21:06:27 2002 +0000

    Added savage_bci.h to SOURCES.


 Makefile.am |    1 +
 1 file changed, 1 insertion(+)



commit db71c15f1ea76d24fe928ba47751e1d004d4bc20
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 20:58:40 2002 +0000

    Updated ChangeLog and NEWS for 0.9.12 release.


 ChangeLog |   75 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   11 +++++----
 2 files changed, 82 insertions(+), 4 deletions(-)



commit 6af05be6dabed2b29a0cbc871d56f4a1fe3dc744
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 20:26:44 2002 +0000

    Slightly improved description of IDirectFBFont API.
    
    Create glyph surfaces with with a height of ascender - descender
    instead of using font->height.
    
    Don't bail out if setting the encoding failed in the FreeType2 font
    provider. Users might want to use symbol fonts and should be allowed
    to do so (they just need to know what they're doing).


 include/directfb.h |   15 +++++++++++----
 src/core/fonts.c   |    7 ++++---
 src/core/gfxcard.c |    7 ++-----
 3 files changed, 17 insertions(+), 12 deletions(-)



commit 296a2e151d8caef100b8ed9c28330af39cde5458
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 19:49:34 2002 +0000

    oops, one more place that needs to be adjusted


 idirectfbfont_default.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 89f719052bf7d4e83ae427cf171af23a7cd166da
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 19:41:07 2002 +0000

    Corrected my last commit: Set height to 24 (vertical offset to next line).
    Fix descender as well (it's supposed to be a negative value).


 idirectfbfont_default.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit ffddb9426586f4034a8fd5a771c54ce749c7d40c
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 19:37:36 2002 +0000

    Set the font height to 24 for the default font. Font height is supposed
    to be the vertical advance to the next line.


 idirectfbfont_default.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a703012e1ca5e74a029baf55d262552dfab05cd9
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 17:46:01 2002 +0000

    Some smaller updates to the README.


 README |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit d750221af9bc1afec84c9e711b6a209b2e3ebb9a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 19 16:53:04 2002 +0000

    Added Alex SONG <zzaleson@uqconnect.net>.


 README |    1 +
 1 file changed, 1 insertion(+)



commit 7f53f9c90050d01952356adb038d8e8b79a16bcf
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 16:40:06 2002 +0000

    Removed global font_state and added state and pixel_format to the
    CoreFont.  Both are initialized to default values by dfb_font_create()
    but may be altered by the FontProvider. This gives the FontProviders
    control about glyph surface format and glyph blitting. This change
    makes it for example possible to write a FontProvider for ARGB fonts.


 interfaces/IDirectFBFont/idirectfbfont_default.c |   77 +++++++++---------
 src/core/fonts.c                                 |   17 +++-
 src/core/fonts.h                                 |    7 +
 src/core/gfxcard.c                               |   95 ++++++-----------------
 4 files changed, 91 insertions(+), 105 deletions(-)



commit 69b1c2f3ed8471cf77f0ba1cea86590be9e2aaed
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 14:20:52 2002 +0000

    added DIKS_EXIT and DIKS_SETUP


 directfb_keyboard.h |    2 ++
 1 file changed, 2 insertions(+)



commit 67299bff7bc399b36d594dc9020e760a44fed83d
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 12:51:50 2002 +0000

    Updated ChangeLog. Started to summarize changes in 0.9.12.


 ChangeLog |  425 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   22 +++
 2 files changed, 447 insertions(+)



commit cf00f7adecd62842cf9106b4419a037a9651a8f2
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 19 12:34:39 2002 +0000

    Applied a patch from Alex SONG <zzaleson@uqconnect.net> that fixes
    savage4SetState() for src colorkeying.


 savage4.c |    3 +++
 1 file changed, 3 insertions(+)



commit 7495c15142fbc2e103c089f4e8e891aab2e34ec7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 19 03:12:46 2002 +0000

    Removed two bugs ;)


 BUGS |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 5918c9b52046c38de5bd9cc0dbc33f8113c015e4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 19 02:34:19 2002 +0000

    Use diffused alpha if source format is RGB32 to force the alpha values to 0xff.


 matrox.c       |    2 +-
 matrox_state.c |   22 ++++++++++++++++++++--
 2 files changed, 21 insertions(+), 3 deletions(-)



commit 93559c107b69919b8f237b2228f13f13f0aae367
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 17 23:25:21 2002 +0000

    Declared some local variables in inner loops as register variables.
    Declared local variables in SET_ALPHA_PIXEL_ARGB as __u32;


 generic.c |   24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)



commit 710c5e5d41be5b8bd63638f8ad2ecd07381e6bd3
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 17 22:46:00 2002 +0000

    Added macro SET_ALPHA_PIXEL_DUFFS_DEVICE() which implements Duff's
    device with a depth of 8. Use it for all but the RGB24
    Bop_a8_set_alphapixel_Aop_* functions.
    
    Undefined the SET_ALPHA_PIXEL_* macros after usage and removed lots of
    unneeded brackets.


 generic.c |  302 +++++++++++++++++++++++++-------------------------------------
 1 file changed, 122 insertions(+), 180 deletions(-)



commit 91cd40d25b1f4c28883a5ece7dd6e864c5d972dd
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 17 21:54:01 2002 +0000

    More work on the Bop_a8_set_alphapixel_Aop_* functions. Use Cop instead
    of the color struct, cleanups.


 generic.c |   45 +++++++++++++++++++++++----------------------
 1 file changed, 23 insertions(+), 22 deletions(-)



commit b1a6474615cadee807f8a974afb7e78d9488c852
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 17 21:32:29 2002 +0000

    Cleaned up Bop_a8_set_alphapixel_Aop_rgb[15|24|32], register variables
    locally. Gives 7% speedup in the 32bit case.


 generic.c |   82 +++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 41 insertions(+), 41 deletions(-)



commit ac1be09d195d3a657d75fec52b673d27e48e1090
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 17 19:30:40 2002 +0000

    Wait for initial DWET_POSITION_SIZE event in IDirectFBWindow_Construct().


 idirectfbwindow.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 773d7d1720c017c6537cf6b65545cdca115b9fb2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 17 17:30:05 2002 +0000

    Fixed rendering pipeline setup for blended blitting for these cases:
    - destination blend is DSBF_ZERO, but source blend needs destination
    - destination blend is not DSBF_ONE and source blend needs destination


 generic.c |   54 ++++++++++++++++++++++++++++++++++++++++++------------
 1 file changed, 42 insertions(+), 12 deletions(-)



commit 9de43772ac66b749b8c4ed3ebf9b3f9aa49d8027
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 17 08:09:47 2002 +0000

    vsync handling during flip operations needs a cleanup/rework


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 192f1a2f09f1504078e7624bb6d47de07cd41223
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 17 06:53:29 2002 +0000

    Fixed a bug in ALPHACTRL blitting setup, output alpha channel was wrong when
    blending was used with destination blend function DSPF_ZERO.
    
    Corrected ALPHACTRL drawing setup. Use diffused instead of texture alpha
    and select an alpha write mode other than FCOL. Doesn't fix a known bug
    but should be correct now for drawing with DSDRAW_BLEND to surfaces with
    an alphachannel.


 matrox_state.c |   48 +++++++++++++++++++++++++++++++-----------------
 1 file changed, 31 insertions(+), 17 deletions(-)



commit 8afa70659ec02d87f1fefa110d8d3203529e1d45
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 15 19:55:31 2002 +0000

    Added 8 bit support to IDirectFB::SetVideoMode().


 idirectfb.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 06ed3ec73ac8d963d1bfd694d284bc281744072d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 14:49:02 2002 +0000

    Brutally optimized A8 font rendering for RGB16 ;-)
    
    P3 800E, G450 SDRAM, no-hardware, gcc-3.1
    
    59 -> 67 MChars/sec (video memory)
    275 -> 326 MChars/sec (system memory)
    
    
    Can be done for other formats as well.


 generic.c |   69 ++++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 50 insertions(+), 19 deletions(-)



commit 3f2880a855e3dac36df1e402bca6b2f5d291e99d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 13:32:16 2002 +0000

    Added DFB_NUM_PIXELFORMATS macro.
    Use it for the generic driver's function tables.


 include/directfb.h        |   19 +++++++++++--------
 src/gfx/generic/generic.c |   24 ++++++++++++------------
 2 files changed, 23 insertions(+), 20 deletions(-)



commit 2a7887e9415ca8c88785707a524e5788b5c5d94a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 13:11:24 2002 +0000

    Check source format in gAcquire().
    Use ONCE in rgba_to_dst_format() to avoid tons of error messages during
    image loading to unsupported destination formats.


 gfx/generic/generic.c |   43 +++++++++++++++++++++++++++++++++++++------
 misc/gfx_util.c       |    2 +-
 2 files changed, 38 insertions(+), 7 deletions(-)



commit cdd264bf25bd8f592db2a774c4f32a23a281285d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 12:58:02 2002 +0000

    Implemented planar YUV blitting support in software driver.
    Minor code cleanup, better support checks and cleanup fixes in gAcquire.
    "ONCE" messages are independent of debug mode now.


 core/coredefs.h       |   19 ++---
 gfx/generic/generic.c |  183 +++++++++++++++++++++++++++++++-------------------
 2 files changed, 124 insertions(+), 78 deletions(-)



commit bc9fb0ef465c7af28dbfa0b8c6b15c53a0e33880
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 03:48:27 2002 +0000

    qsort needs an extra compare function getting two entries instead of
    a string and an entry, works now.


 lirc.c |   13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)



commit 8ae0e10070d8bdd8f1793c97e1010747639e1c8b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 14 00:31:14 2002 +0000

    Don't use videoalpha mode if dst_blend is zero.


 matrox_state.c |    3 +++
 1 file changed, 3 insertions(+)



commit 895c33deb178bce25f9cc2bad238114ecbade95f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 13 17:14:59 2002 +0000

    Fixed off by one bug in mmx version of Xacc_blend_invsrcalpha.
    Minor optimization in setup code.


 Xacc_blend_invsrcalpha_MMX.s |   18 ++++++++++--------
 Xacc_blend_srcalpha_MMX.s    |    2 +-
 2 files changed, 11 insertions(+), 9 deletions(-)



commit c931dd09959a8f8cf0d6e6ff85598c0c9cbcb376
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 13 15:45:51 2002 +0000

    Fixed warnings if sighandler is disabled.


 core.c |    3 +--
 sig.c  |   16 ++++++++++------
 2 files changed, 11 insertions(+), 8 deletions(-)



commit 39107fa8d2354aaf84902a1aaf285af445134592
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 13 15:06:42 2002 +0000

    Fixed concurrent destructions of windows.
    Added some debug output.


 core/coredefs.h           |    1 +
 core/fusion/reactor.c     |   21 +++++++++++++++++++++
 core/surfaces.c           |    4 ++++
 core/windows.c            |   28 +++++++++++++++++++++++-----
 core/windows.h            |    2 ++
 windows/idirectfbwindow.c |    9 +++++++--
 6 files changed, 58 insertions(+), 7 deletions(-)



commit da9283bad05f41dca1bf08fcb8d5ef4d09ed1882
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 13 11:35:41 2002 +0000

    removed the voodoo1 workaround


 fbdebug.c |   21 +++++++--------------
 1 file changed, 7 insertions(+), 14 deletions(-)



commit aca038f4f159dd6538a5acd41ddc9ea011369d92
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 13 11:30:44 2002 +0000

    removed obsolete FIXME


 conf.h |    2 --
 1 file changed, 2 deletions(-)



commit fe251694a6b6c363769abc10b17adacba86a35ca
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 12 17:53:03 2002 +0000

    Fixed parameters for SetConfiguration call in dfb_layers_resume().


 layers.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f5e9229723f7b930f272296c3a73c43cf7398f10
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 12 08:31:24 2002 +0000

    Implemented besFlipBuffers() which should have been implemented in 0.9.11 ;(


 matrox_bes.c |   21 ++++++++++++++++-----
 1 file changed, 16 insertions(+), 5 deletions(-)



commit 4459aafac0685f25786ddd8af262049919e1406b
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 11 12:18:47 2002 +0000

    Include directfb_keynames.h instead of defining our own array.
    Sort the keynames array by names on first call of lirc_parse_line(),
    then use bsearch to lookup the name.


 lirc.c |  165 ++++++++++-------------------------------------------------------
 1 file changed, 26 insertions(+), 139 deletions(-)



commit 30149f3dcdd02fc495674b0b1a19016b9988d1e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 20:18:00 2002 +0000

    Replace currency sign (0xa4) by euro currency sign (0x20ac).


 keyboard.c |    2 ++
 1 file changed, 2 insertions(+)



commit 6568d964303d4ad47736b6f8cdcec1de336cc556
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 10 18:59:38 2002 +0000

    Use unsigned int for Unicode glyph indices.
    Added DSFT_BOTTOM to DFBSurfaceTextFlags.
    Fixed bug in IDirectFBFont::GetGlyphExtents.
    Made IDirectFBFont::GetGlyphExtents() and IDirectFBFontGetKerning() fill
    in zero values if the glyph isn't found and return DFB_OK.


 include/directfb.h             |   16 +++++++++++-----
 src/display/idirectfbsurface.c |   34 +++++++++++++++++++++++-----------
 src/media/idirectfbfont.c      |   40 ++++++++++++++++++++--------------------
 3 files changed, 54 insertions(+), 36 deletions(-)



commit 927f074f82a97752c2934c45c38e0978ac2fb44e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 18:12:57 2002 +0000

    Added DIDID_ANY for devices not prefering a primary device id.


 directfb.h |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit 77cd6fc61a9211cf5c023278d4a846874c0b15d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 18:08:56 2002 +0000

    Added DIDTF_VIRTUAL for virtual input devices.


 directfb.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 040fa6cc492f273d114c0232a011c2e4a5377efa
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 10 17:43:37 2002 +0000

    Added IDirectFBFont::GetKerning() and IDirectFBFont::GetGlyphExtents().
    Added IDirectFBSurface::DrawGlyph().
    This should enable users to implement their own simple text layout engine.


 include/directfb.h             |   53 ++++++++++++++++++++++-
 src/core/gfxcard.c             |   73 ++++++++++++++++++++++++++++++++
 src/core/gfxcard.h             |    3 -
 src/display/idirectfbsurface.c |   54 ++++++++++++++++++++++++
 src/media/idirectfbfont.c      |   92 +++++++++++++++++++++++++++++++++++++++--
 5 files changed, 267 insertions(+), 8 deletions(-)



commit c2a82e85ef2947e0d2e6bcdecd9ec3fa67f58ba7
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 10 13:04:14 2002 +0000

    fixed typo in comment


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 3da9e67a99cfe61a13ba0c757457b1a47b03ca32
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 10 12:42:18 2002 +0000

    Made configure warnings more visible. Added extra warnings if PNG, JPEG
    or FreeType2 support is missing.


 configure.in |  103 +++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 72 insertions(+), 31 deletions(-)



commit 5fcf89a55de855f75c2e6f277f602f3aa3078c5c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 10:11:00 2002 +0000

    Added cross compiling notes by Scott A McConnell <samcconn@cotw.com>.


 README |   11 +++++++++++
 1 file changed, 11 insertions(+)



commit 48148e0fe011904df9b3c0455ef04f6f281bb292
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 09:04:16 2002 +0000

    Fixed modifier mask problems that occured if the left and right version
    of a modifier were both pressed.


 input.c |  139 ++++++++++++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 105 insertions(+), 34 deletions(-)



commit e629e4bd67d551a3a581b3c1daa23441c3b10e69
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 08:06:08 2002 +0000

    Check for FUSION_FAKE instead of DFB_MULTI, could have caused problems
    with multi application core when slaves need to fetch a keymap entry.


 input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit cca6872f4e2b646699ea45ba3c23778db8d360a3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 10 07:13:35 2002 +0000

    Added structs DFBPoint and DFBDimension that are not used yet by DirectFB
    but are already useful for applications and libraries.


 directfb.h |   26 +++++++++++++++++++++-----
 1 file changed, 21 insertions(+), 5 deletions(-)



commit a723ad52aa46a64c9eb6cff26532bef76e91b650
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 9 04:43:39 2002 +0000

    Make sure DFB_IDNOTFOUND is returned if GetDisplayLayer() doesn't find the id.


 idirectfb.c |    1 +
 1 file changed, 1 insertion(+)



commit bc7a7ce98686305ca0a85cecad19ff61eb2f99cd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 9 02:36:34 2002 +0000

    Added a mask of currently pressed buttons to input and window events.


 include/directfb.h               |   34 +++++++++++++++++++++-------------
 src/core/input.c                 |   35 +++++++++++++++++++++++++++++++----
 src/core/windows.c               |   15 ++++++++-------
 src/input/idirectfbinputdevice.c |   11 ++---------
 4 files changed, 62 insertions(+), 33 deletions(-)



commit 69c80a7514537d51811a3a6bef193fb2e2ea87c3
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 7 19:12:44 2002 +0000

    oops


 utf8.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 37ce6cc99310ae51fcd853b2f89ff6df8d4a7ac4
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 7 18:23:21 2002 +0000

    fixed dfb_utf8_next_char() (spotted by Holger Waechtler)


 utf8.h |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit a9b803b27065a065822a646ed094570bbe7810cf
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 7 18:05:32 2002 +0000

    Added inline function dfb_utf8_prev_char().


 utf8.h |    7 +++++++
 1 file changed, 7 insertions(+)



commit 0be8e39b640f8b4cc08bcd434ce034eec86b97a6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 7 16:27:28 2002 +0000

    Use sigaction instead of signal.


 sig.c |   60 +++++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 45 insertions(+), 15 deletions(-)



commit 859145289eca4f23e8691b0b8c2d02e0c8a568cd
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 7 16:26:08 2002 +0000

    updated copyright


 README |    1 +
 1 file changed, 1 insertion(+)



commit bb0e7a67b742f848747eef265212c23e18119230
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 7 15:57:44 2002 +0000

    Updated Joachim Steiger's e-mail address.


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1ffdcdfff1f2441931b2a1a59fa22aa60275e3be
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 7 15:00:33 2002 +0000

    Updated copyright notice in banner.


 directfb.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 9b22b03a41e941747c8c69af4841ab36aaa0fbc3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 7 12:17:36 2002 +0000

    Generate DFBKeyIdentifierNames, too.


 Makefile.am         |   12 +++-
 directfb_keyboard.h |  136 +++++++++++++++++++++++++++++++++++++++++-----------
 2 files changed, 119 insertions(+), 29 deletions(-)



commit cbabd2d840abdfeacd4cabad14a63e7e0a79ce62
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 7 10:54:16 2002 +0000

    Added experimental blitting flags DSBLIT_SRC_PREMULTIPLY, DSBLIT_DST_PREMULTIPLY
    and DSBLIT_DEMULTIPLY which can be used for complex blending operations which
    distinguish between premultiplied and non-premultiplied alpha channels.


 include/directfb.h        |    9 ++++++
 src/gfx/generic/generic.c |   60 +++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 65 insertions(+), 4 deletions(-)



commit c01d8a70c829d75cac874d01c54ed1d57f48014a
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 6 16:59:02 2002 +0000

    Forced comments into 80 columns.


 directfb.h |  337 ++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 177 insertions(+), 160 deletions(-)



commit 2b8263b1cf4789781469d0f7ab5b17fd663373b6
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 6 13:38:01 2002 +0000

    Improved description of IDirectFBFont::GetHeight().


 directfb.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 820d160de30061ef8cbd39a73daf1ccef7933761
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 6 11:40:02 2002 +0000

    Applied patch from Ville Syrjl <syrjala@sci.fi> that fixes
    IDirectFBInputDevice_GetXY().


 idirectfbinputdevice.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a7f1cfdc15218b6c61f8da570bc964e21017b1d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 21:52:40 2002 +0000

    Added second windows key as META_R, made the menu key SUPER_R.


 keyboard.c |   15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)



commit 36ac057b9f16dbfa5c9986fa28c7a40f466a864f
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 5 15:16:18 2002 +0000

    Bumped version number to 0.9.12.
    Added key identifiers for the remaining keys on a PC105 keyboard layout.


 configure.in                     |    2 +-
 include/directfb_keyboard.h      |   16 ++++++++++++++++
 inputdrivers/keyboard/keyboard.c |   22 +++++++++++++++++-----
 src/core/input.c                 |    9 +++++++++
 4 files changed, 43 insertions(+), 6 deletions(-)



commit 68f7d98af8c25453e902de239af3b76f2966845e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 02:37:24 2002 +0000

    Once more a fresh ChangeLog


 ChangeLog |   15 +++++++++++++++
 1 file changed, 15 insertions(+)



commit d381a03863eb683be374ae5701b8f551bfc17181
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 5 02:33:06 2002 +0000

    Added dfb_static_build_example and ipc_cleanup to EXTRA_DIST.
    Explained their purpose in the README.


 Makefile.am |    6 +++++-
 README      |   23 ++++++++++++++++++-----
 2 files changed, 23 insertions(+), 6 deletions(-)



commit 4a94d5c994497b0159f52c5c6e39319b6bc6a66d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 02:20:50 2002 +0000

    Use hash table with predefined real names and e-mail addresses for short names.


 ChangeLog | 1588 +++++++++++++++++++++++++++++++-------------------------------
 mkchlog   |   10 
 2 files changed, 812 insertions(+), 786 deletions(-)



commit 0c865c1d17dd5f238c915070bc34b50d989ee1a8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 02:02:34 2002 +0000

    Removed 32bit modes that were copies of the 16bit modes.
    Fixed typo.


 fb.modes                |   52 ------------------------------------------------
 patches/README.savagefb |    2 -
 2 files changed, 1 insertion(+), 53 deletions(-)



commit 310a6dbc6ceeeb55dc26315344354ed6ad52d756
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 01:47:06 2002 +0000

    - Fixed keypad decimal with NumLock active.
    - Updated NEWS and ChangeLog.


 ChangeLog                        | 1188 +++++++++++++++++++++++++++++++++++++++
 NEWS                             |    6 
 include/directfb_keyboard.h      |    6 
 inputdrivers/keyboard/keyboard.c |    4 
 4 files changed, 1197 insertions(+), 7 deletions(-)



commit 43bdd1cf585bdaa1d35f7ac26d8d6c0658918fdc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 5 00:27:52 2002 +0000

    'directfb_keynames.h' will be generated and installed for applications.
    It's a mapping from a key symbol to its name.


 configure.in        |    2 ++
 include/.cvsignore  |    1 +
 include/Makefile.am |   19 ++++++++++++++++++-
 3 files changed, 21 insertions(+), 1 deletion(-)



commit c7ed7abb18e8da8c4fc7b69e7798e05512d799f8
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 4 22:50:20 2002 +0000

    Updated README.screenshots.
    Added ppm(5) to SEE ALSO section in directfbrc(5).


 README.screenshots   |   37 ++++++++++++++++++++++++-------------
 docs/directfbrc.5.in |    3 ++-
 2 files changed, 26 insertions(+), 14 deletions(-)



commit bc098287f833cc1525c7fd0f794daf62596b5cbc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 21:51:20 2002 +0000

    Added option "screenshot-dir=<directory>" that enables PPM screen dumps
    when the <Print> key is pressed.


 docs/directfbrc.5.in |    5 +++
 src/directfb.c       |   83 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/gfx/convert.h    |   12 +++++++
 src/misc/conf.c      |   13 +++++++
 src/misc/conf.h      |    3 +
 5 files changed, 116 insertions(+)



commit 1c6439e83ac7aa4f99e20cf72f401f3f9821a109
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 4 19:30:35 2002 +0000

    slightly reordered key identifiers


 directfb_keyboard.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 48ce588c03281884d72fcf28bf5586c8247ea29f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 19:10:05 2002 +0000

    Added Meta/Super/Hyper  key_id <-> key_symbol translation.


 input.c |   29 +++++++++++++++++++++++++----
 1 file changed, 25 insertions(+), 4 deletions(-)



commit 22294ea18414d86f8dbbb009e794f74f69ab499d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 4 19:06:38 2002 +0000

    Renamed DIKS_*LOCK to DIKS_*_LOCK and DIKI_*LOCK to DIKI_*_LOCK.
    Renamed DIKI_CTRL_* to DIKI_CONTROL_*.
    Added left/right versions of DIKI_ALT, DIKI_META, DIKI_SUPER, DIKI_HYPER.


 include/directfb_keyboard.h      |   17 +++++++++-----
 inputdrivers/keyboard/keyboard.c |    8 +++---
 inputdrivers/lirc/lirc.c         |    6 ++--
 src/core/input.c                 |   47 +++++++++++++++++++--------------------
 src/core/windows.c               |    4 +--
 5 files changed, 44 insertions(+), 38 deletions(-)



commit de228abbd5e6f1c3c03197585d8579e95c1e34d9
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 4 18:40:22 2002 +0000

    Cleaned up dfb_utf8_get_char(), make it use the dfb_utf8_skip table.
    Declare the dfb_utf8_skip table as const.


 utf8.c |   89 +++++++++++++++++++++++------------------------------------------
 utf8.h |    2 -
 2 files changed, 33 insertions(+), 58 deletions(-)



commit 704f62e0fc0b2103dda1964a036dcb4578ec4bdc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 17:58:16 2002 +0000

    Added support for left/right shift/control via identifiers.
    Added support for special pc105 keyboards (adding Meta and Super).
    Fixed warning in v4l provider with gcc 3.1.
    Removed commented out and finally obsolete line in generic driver.


 include/directfb_keyboard.h                                    |    4 -
 inputdrivers/keyboard/keyboard.c                               |   34 +++++++---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    2 
 src/core/input.c                                               |   10 +-
 src/core/windows.c                                             |   14 ++--
 src/gfx/generic/generic.c                                      |    2 
 6 files changed, 42 insertions(+), 24 deletions(-)



commit de854a002943ae90171402dadd2c94e6c8337107
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 4 17:28:03 2002 +0000

    Added more dead keys as found in X11. Ordered dead keys alphabetically.


 directfb_keyboard.h |   22 ++++++++++++++++------
 1 file changed, 16 insertions(+), 6 deletions(-)



commit 1bfa5e752f74877040fc9da4c3098dbda0a6d27b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 16:37:37 2002 +0000

    some day CLUT/ALUT support would be nice


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 3c9f633f2cf3cdb60d8ed16fba624d2474736d51
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 16:35:49 2002 +0000

    Removed keycode TODO.


 TODO |    2 --
 1 file changed, 2 deletions(-)



commit 9b4e55edbc80c0dac5e0f9720d84141ded707fea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 08:30:15 2002 +0000

    Two minor changes that help a lot getting DirectFB running for everyone:
    - Always 8 bit modes to the mode list, too, depth of fb.modes is ignored anyway.
    - Default to 16 bit if no depth is specified and first mode in fb.modes is
      8 bit while RGB332 support is not compiled in.
    
    The only way to have it not running now is to explicitly set "depth = 8"
    in the configuration without support for RGB332.


 fbdev.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 5eb53b405bfb39ec69b9959030823b67db743473
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 07:50:59 2002 +0000

    #if 0'ed old code, added 40ms sleep after shutdown vt switch, too.


 vt.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit 8b416cf5b2d688768a9b93f84829d3d700e7743b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 07:16:50 2002 +0000

    Commented out 'normal' errors at startup, VT rewrite after release ;(
    Added time and date when core.c got built to initialization output.


 Makefile.am |    7 ++++---
 core.c      |    4 ++--
 vt.c        |    8 ++++----
 3 files changed, 10 insertions(+), 9 deletions(-)



commit 7f70c92cb454da3f8e34c1db664cbe5da3b27a74
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 06:40:01 2002 +0000

    Little tweak for format conversion blits (163 -> 192 MPixel/sec on G550).


 matrox_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit a23b23684c7327c00d80133d35c8983b9d12ff89
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 04:44:49 2002 +0000

    - Added DIKS_BREAK.
    - Ctrl+Alt+Break sends a SIGINT now (like Ctrl+Alt+BackSpace a while ago).


 include/directfb_keyboard.h      |    2 ++
 inputdrivers/keyboard/keyboard.c |    3 ++-
 src/directfb.c                   |   35 +++++++++++++++++------------------
 3 files changed, 21 insertions(+), 19 deletions(-)



commit f1210f3b5df058ac640c292bf6eb2196e1d3fe16
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 4 00:09:20 2002 +0000

    Return DFB_UNSUPPORTED in PlayTo if destination is double buffered.
    Increase buffer's video instance locking counter,
    buffer is sticked to video memory then.


 idirectfbvideoprovider_v4l.c |   21 +++++++++++++++++----
 1 file changed, 17 insertions(+), 4 deletions(-)



commit c360aecb50380536650365daeda7fc94d259da86
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 3 20:04:17 2002 +0000

    Store cached kerning values as 16:15:1. Shouldn't be relevant but makes
    more sense.
    Updated NEWS file.


 NEWS |   32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)



commit 4203c0d4c3549ecf1e82efc39a23a09a00c13cb1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 3 19:07:25 2002 +0000

    Fixed alpha channel detection in GetImageDescription, libpng seems
    to want pointers to width, height and bpp, too.
    
    Do some more cycles for memcpy test.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |    5 +++--
 src/misc/memcpy.c                                              |    2 +-
 2 files changed, 4 insertions(+), 3 deletions(-)



commit e84e55b070e1ebd5b114ab059ca2cdc4d7a4c174
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 3 18:06:42 2002 +0000

    dfb_gfxcard_state_check(): Always check front and back buffer policies and
    set acceleration bits accordingly.


 gfxcard.c |   79 +++++++++++++++++++++++++++++---------------------------------
 1 file changed, 37 insertions(+), 42 deletions(-)



commit 43fc6183f421faa71d52a3fcaaf2d851b60cc5da
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 3 11:39:22 2002 +0000

    Need to set SMF_COLOR not SMF_DRAWING_FLAGS to indicate the color change
    in IDirectFBSurface_Clear().


 idirectfbsurface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 536c033b21015f815e8a52d05e302d7474c8910b
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 3 10:32:20 2002 +0000

    In IDirectFBSurface_Clear() pass a copy of data->area.current to
    dfb_gfxcard_fillrectangle() since the latter modifies the rectangle.
    
    Added more const statements to the internal clip API to make it easier
    to understand what the functions do.


 display/idirectfbsurface.c |    6 ++++--
 gfx/clip.c                 |   16 +++++++---------
 gfx/clip.h                 |   19 +++++++++++--------
 3 files changed, 22 insertions(+), 19 deletions(-)



commit 781064fbbe86bac3be740e35cbf93634992f7269
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 3 09:52:15 2002 +0000

    Declared parameters that are not changed as const. Might help the compiler,
    definitely helps the developers.


 util.c |   16 +++++++++-------
 util.h |   16 ++++++++--------
 2 files changed, 17 insertions(+), 15 deletions(-)



commit ed705564e385163d567569cca442e2c00ca51af3
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Jun 2 14:41:33 2002 +0000

    Check the dimensions of the rectangle passed to dfb_gfxcard_tileblit().
    If an invalid rectangle is passed, print a BUG warning and return instead
    of going into an endless loop.


 gfxcard.c |   15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)



commit 6972582189162a212bf4b4c649dd22caa2ed1ef4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 1 06:07:17 2002 +0000

    Added IDirectFBSurface::Clear(), see the documentation details.


 include/directfb.h             |   33 +++++++++++++++++++--
 src/display/idirectfbsurface.c |   62 ++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 91 insertions(+), 4 deletions(-)



commit 7361a808a015ccbf4eb4d2b5311f775239b0cf93
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 31 22:09:03 2002 +0000

    fixed warning


 layers.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e29329b5eb6fbce7a588638ee2de90075f807fb2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 31 00:27:32 2002 +0000

    Added function by Antonino Daplas, changing the buffermode of layers may
    work now, untested.


 layers.c   |   34 ++++++++++++++++++----
 surfaces.c |   94 ++++++++++++++++++++++++++++++++++++++++++++++++-------------
 surfaces.h |    7 ++++
 3 files changed, 110 insertions(+), 25 deletions(-)



commit 49c46156985e8a015c565c6a1404b671a53a4f16
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 30 15:06:48 2002 +0000

    Sacc_to_Aop_rgb16 does aligned writes now, gives 1-3% on my Intel machine.
    Please test "df_dok --fill-rect-blend", add "--dfb:no-mmx" on machines with MMX.
    Also try the difference in system memory with "--system".


 generic.c |   56 +++++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 53 insertions(+), 3 deletions(-)



commit d44c08e053dfc12c7b343d20ea6a516bf87b89a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 30 09:22:05 2002 +0000

    argb-font is no longer required on G400 and above!
    
    Fixed A8 font rendering by enabling "Inverted Decal information" for A8 ;)
    (by the time I get used to those lighting flow charts)
    
    If G200 is detected, argb-font is set automatically,
    there's no reason anymore to set it manually the configuration at all!
    
    Set proper minify/magnify threshold, irrelevant change, but be correct ;)
    
    Fixed log2 for values that are a power of two, didn't change anything though.


 matrox.c       |    5 +++--
 matrox.h       |    4 ++--
 matrox_state.c |    3 +++
 regs.h         |    2 ++
 4 files changed, 10 insertions(+), 4 deletions(-)



commit 1c50df52bdeacb0d4d9965ff04a1ac7dc9b8b86a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 30 05:24:19 2002 +0000

    Fixed Delete on keypad.


 keyboard.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 0fe554fef16883121d722e0c274b02dd67701408
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 29 20:12:30 2002 +0000

    Added IDirectFBInputDevice::GetKeymapEntry() which fetches a
    DFBInputDeviceKeymapEntry for a specific hardware keycode.


 include/directfb.h               |   12 ++++++++++++
 src/core/input.c                 |   25 +++++++++++++++++++++++--
 src/core/input.h                 |    3 +++
 src/input/idirectfbinputdevice.c |   33 ++++++++++++++++++++++++++++-----
 4 files changed, 66 insertions(+), 7 deletions(-)



commit 16cd676ee88cb877ab22bdfbc40e40494bce98a6
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 29 11:37:40 2002 +0000

    Added autom4te.cache to .cvsignore (for automake-2.5x).


 .cvsignore |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit e198b34077ecbd24774e2a477f95db1503dd69ed
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 29 11:19:17 2002 +0000

    Added 0.4.0 version of savagefb that is supposed to add acceleration for
    fills and blits. Unfortunately it doesn't yet work correctly. Don't use
    unless you want to work on it.


 Makefile.am                           |    2 ++
 README.savagefb                       |   12 ++++++++++++
 savagefb-0.4.0-linux-2.4.17.patch.bz2 |binary
 3 files changed, 14 insertions(+)



commit dc3ea7323b15821d90e77d435f4be204bb8bd76c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 29 03:54:58 2002 +0000

    Savage driver release, untested for a long time.


 configure.in                           |   17 -
 gfxdrivers/Makefile.am                 |    7 
 gfxdrivers/savage/.cvsignore           |    6 
 gfxdrivers/savage/Makefile.am          |   29 +
 gfxdrivers/savage/mmio.h               |  138 ++++++++
 gfxdrivers/savage/savage.c             |  363 +++++++++++++++++++++
 gfxdrivers/savage/savage.h             |  146 ++++++++
 gfxdrivers/savage/savage2000.c         |  188 +++++++++++
 gfxdrivers/savage/savage2000.h         |  103 ++++++
 gfxdrivers/savage/savage3d.c           |  546 +++++++++++++++++++++++++++++++++
 gfxdrivers/savage/savage3d.h           |  119 +++++++
 gfxdrivers/savage/savage4.c            |  546 +++++++++++++++++++++++++++++++++
 gfxdrivers/savage/savage4.h            |  144 ++++++++
 gfxdrivers/savage/savage_bci.h         |  206 ++++++++++++
 gfxdrivers/savage/savage_streams_old.c |  352 +++++++++++++++++++++
 gfxdrivers/savage/savage_streams_old.h |   92 +++++
 16 files changed, 3000 insertions(+), 2 deletions(-)



commit 0d0ce309854b44036308c5d13380d36ecbef6557
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 29 03:11:06 2002 +0000

    Added prototypes.


 input.c |   63 +++++++++++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 43 insertions(+), 20 deletions(-)



commit 23f977ef22cc0e18a06f331b8c3dbc9fbbacd936
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 29 03:00:12 2002 +0000

    Use shcalloc() for the keymap and retrieve all entries once during
    initialization if multi app core is used.


 input.c |   42 +++++++++++++++++++++++++++++-------------
 1 file changed, 29 insertions(+), 13 deletions(-)



commit 5036c688b856bebe51c489ce3536787ce0fa2ea4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 28 23:48:22 2002 +0000

    Added keymap support to input core.
    
    Added a driver function to retrieve a complete keymap entry for a keycode.
    
    Keyboard driver event thread is much simpler now, it passes the hardware
    keycode and if it has been pressed or released to the input core via
    dfb_input_dispatch() and the input core looks up symbol and identifier and
    handles modifier/lock masks. The keyboard driver then simply writes back
    the lock state to the LEDs.
    
    Added DFBInputDeviceKeymapEntry that will soon be useful with some API calls.


 docs/html/Makefile.am                  |    4 
 include/directfb.h                     |   56 ++---
 include/directfb_keyboard.h            |   38 +++
 inputdrivers/dbox2remote/dbox2remote.c |   11 +
 inputdrivers/h3600_ts/h3600_ts.c       |   11 +
 inputdrivers/joystick/joystick.c       |   11 +
 inputdrivers/keyboard/keyboard.c       |  331 +++++++++++++++------------------
 inputdrivers/lirc/lirc.c               |   11 +
 inputdrivers/ps2mouse/ps2mouse.c       |   11 +
 inputdrivers/serialmouse/serialmouse.c |   11 +
 inputdrivers/sonypi/sonypi.c           |   11 +
 src/core/input.c                       |  194 +++++++++++++++++--
 src/core/input.h                       |   17 -
 src/core/input_driver.h                |    6 
 src/input/idirectfbinputdevice.c       |   15 -
 tools/gendoc.pl                        |    8 
 16 files changed, 503 insertions(+), 243 deletions(-)



commit 7f745d5d895b1701c77ef11f9537273fe8555afa
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 28 17:52:36 2002 +0000

    oops, we need to call aclocal of course.


 autogen.sh |    1 +
 1 file changed, 1 insertion(+)



commit 05bd4992c6eff42b5a02579e1bb978fe32c8a58f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 28 17:46:47 2002 +0000

    Cleaned up autogen.sh and improved its output in case of problems.


 autogen.sh |  154 ++++++++++++++++++++++++++++++++-----------------------------
 1 file changed, 83 insertions(+), 71 deletions(-)



commit f9d9d70846e12cc2a90103a7563c5e44ec736df8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 28 01:36:11 2002 +0000

    Fixed directfb-config.
    Converted debug printf to DEBUGMSG.


 directfb-config.in |    4 ++--
 src/core/input.c   |    3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)



commit 1e252e691ab04b2132e9b4ba35f59b6d5c478928
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 28 01:06:51 2002 +0000

    Use the third argument of AC_DEFINE to pass descriptions for our defines.
    Removed unneeded acconfig.h. Works without warnings with autoconf versions
    2.13 and 2.53 now.


 configure.in |   22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)



commit 09ecf7769ee27630530fd7e857410cbc03a22c9b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 23:39:19 2002 +0000

    Last commit included key_id to key_symbol translation (id_to_symbol)
    and generic handling of modifier and lock mask.


 input.c |    1 +
 1 file changed, 1 insertion(+)



commit a5e45a13c94bb602a2c17cc82a7e3efb02f5fcd7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 23:37:46 2002 +0000

    Added DIKS_BEGIN.
    
    Removed key pad identifiers that are physically the same key as the numbers.


 include/directfb_keyboard.h |   12 --
 src/core/input.c            |  241 ++++++++++++++++++++++++++++++++++++++++----
 2 files changed, 229 insertions(+), 24 deletions(-)



commit 4dde74c3ec979a5d8536f5339333719897b95159
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 19:54:31 2002 +0000

    really fixed now


 keyboard.c |    1 +
 1 file changed, 1 insertion(+)



commit e34ab408d35e1e9e225a34b6159b399e95da8513
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 19:48:56 2002 +0000

    Fixed PageUp/Down, Insert, Delete.


 keyboard.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 3c25277fa396148619205f5ec05840f788623005
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 19:26:33 2002 +0000

    Fixed backspace, why does the kernel return 0x7f for backspace?


 keyboard.c |    2 ++
 1 file changed, 2 insertions(+)



commit 999ccc88f695dc34e4c4b04389b51a990adfcc37
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 19:04:26 2002 +0000

    DFB_LOWER/UPPER_CASE was wrong


 directfb_keyboard.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 340ad928119b29e658a188327a8a5d2333cd19d9
Author: Sven Neumann <neo@directfb.org>
Date:   Mon May 27 17:42:13 2002 +0000

    Completed the PAGE_UP, PAGE_DOWN, ... changes.
    Removed DIKS_KP_* symbols and NUMPAD DeviceKeyType. The numpad keys
    should return the same symbols as the 'normal' keys they respond to.


 include/directfb_keyboard.h      |   51 +++------------------------------------
 inputdrivers/keyboard/keyboard.c |   10 +++++--
 inputdrivers/lirc/lirc.c         |   17 ++++---------
 src/core/input.c                 |   14 +++-------
 4 files changed, 21 insertions(+), 71 deletions(-)



commit 2c778488d3e7538d2ef76014eac21b4d962294b6
Author: Sven Neumann <neo@directfb.org>
Date:   Mon May 27 17:10:06 2002 +0000

    PAGEUP -> PAGE_UP, PAGEDOWN -> PAGE_DOWN.
    Same for VOLUME[UP|DOWN] and CHANNEL[UP|DOWN].


 directfb_keyboard.h |   14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)



commit 4003e3e97b682476de5df792bafe1d9cf500d2e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 17:00:28 2002 +0000

    fixed macro compilation


 directfb_keyboard.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 4b6073867b22b03480be3ec328dd1d0b1d7eebdf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 16:58:44 2002 +0000

    Added DFB_LOWER_CASE and DFB_UPPER_CASE which can be wrapped around a symbol.


 directfb_keyboard.h |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit 553b2fe5250614b5f5620a881bd1e9317456c24c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 27 15:51:54 2002 +0000

    Adding sophisticated keycode/keysymbol handling to DirectFB for more
    sophisticated applications like XDirectFB and the new keymap stuff in GDK.
    Writing input drivers for keyboards will also be easier.
    
    There are to types of key mappings, a basic one (the one before) which is
    suited for games and an advanced one for applications which need full
    coverage of the Unicode 3.x character space and the ability to query the
    keyboard layout.
    
    The DFBInputDeviceKeyIdentifier is now contained in "event.key_id" instead
    of "event.keycode". "event.key_code" is the hardware keycode which is usually
    not of interest.
    
    A new enum DFBInputDeviceKeySymbol is a super-set of the Unicode 3.x character
    space which is compatible to Latin-1, so "key_ascii" has been removed in favor
    of "event.key_symbol".
    
    DirectFB header files (which include "directfb_keyboard.h" now) are installed
    to "$prefix/include/directfb/". Applications honoring the CFLAGS within the
    pkg-config file should have no problem with that.
    
    Updated all copyright headers.
    
    The keymap stuff is still work in progress, but the functionality to have
    all applications running again already exists.
    
    
    Short porting instructions:
    - Replace keycode by key_id and DIKC by DIKI
      and/or
      replace keycode by key_symbol and DIKC by DIKS
    - Note that the remote control keys have been removed from the
      basic mapping to reduce overhead
    - Note that the cursor keys in the advanced mapping have a DIKS_CURSOR prefix
    - Note that the letters have DIKS_SMALL and DIKS_CAPITAL prefixes


 configure.in                                                         |    2 
 directfb-internal.pc.in                                              |    5 
 directfb.pc.in                                                       |    2 
 gfxdrivers/ati128/ati128.c                                           |    9 
 gfxdrivers/ati128/ati128.h                                           |    9 
 gfxdrivers/ati128/ati128_overlay.c                                   |    6 
 gfxdrivers/ati128/ati128_state.c                                     |    9 
 gfxdrivers/ati128/ati128_state.h                                     |    9 
 gfxdrivers/ati128/mmio.h                                             |    9 
 gfxdrivers/ati128/regs.h                                             |    9 
 gfxdrivers/matrox/matrox.c                                           |    9 
 gfxdrivers/matrox/matrox.h                                           |    9 
 gfxdrivers/matrox/matrox_bes.c                                       |    9 
 gfxdrivers/matrox/matrox_state.c                                     |    9 
 gfxdrivers/matrox/matrox_state.h                                     |    9 
 gfxdrivers/matrox/mmio.h                                             |    9 
 gfxdrivers/matrox/regs.h                                             |    9 
 gfxdrivers/neomagic/neo2200.c                                        |    9 
 gfxdrivers/neomagic/neo_overlay.c                                    |    6 
 gfxdrivers/neomagic/neomagic.c                                       |    9 
 gfxdrivers/neomagic/neomagic.h                                       |    9 
 gfxdrivers/nvidia/nvidia.c                                           |    9 
 gfxdrivers/nvidia/nvidia.h                                           |    9 
 gfxdrivers/tdfx/tdfx.c                                               |    9 
 gfxdrivers/tdfx/tdfx.h                                               |    9 
 include/Makefile.am                                                  |   12 
 include/directfb.h                                                   |  207 +---
 include/directfb_internals.h                                         |    7 
 include/directfb_keyboard.h                                          |  442 ++++++++++
 include/directfb_version.h.in                                        |   10 
 inputdrivers/dbox2remote/dbox2remote.c                               |    9 
 inputdrivers/h3600_ts/h3600_ts.c                                     |    9 
 inputdrivers/joystick/joystick.c                                     |   11 
 inputdrivers/keyboard/keyboard.c                                     |  295 ++----
 inputdrivers/lirc/lirc.c                                             |  345 +++----
 inputdrivers/ps2mouse/ps2mouse.c                                     |   11 
 inputdrivers/serialmouse/serialmouse.c                               |   22 
 inputdrivers/sonypi/sonypi.c                                         |   11 
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    9 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |    9 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    9 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    8 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |    8 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   13 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |    9 
 src/core/core.c                                                      |    9 
 src/core/core.h                                                      |    9 
 src/core/coredefs.h                                                  |    9 
 src/core/coretypes.h                                                 |    9 
 src/core/fbdev.c                                                     |    9 
 src/core/fbdev.h                                                     |    9 
 src/core/fonts.c                                                     |   10 
 src/core/fonts.h                                                     |   10 
 src/core/fusion/arena.c                                              |    8 
 src/core/fusion/arena.h                                              |    8 
 src/core/fusion/fusion.c                                             |    8 
 src/core/fusion/fusion.h                                             |    8 
 src/core/fusion/fusion_internal.h                                    |   26 
 src/core/fusion/fusion_shmalloc.c                                    |    8 
 src/core/fusion/fusion_types.h                                       |    8 
 src/core/fusion/list.c                                               |    8 
 src/core/fusion/list.h                                               |    8 
 src/core/fusion/lock.c                                               |    8 
 src/core/fusion/lock.h                                               |    8 
 src/core/fusion/property.c                                           |    8 
 src/core/fusion/property.h                                           |    8 
 src/core/fusion/reactor.c                                            |    8 
 src/core/fusion/reactor.h                                            |    8 
 src/core/fusion/ref.c                                                |    8 
 src/core/fusion/ref.h                                                |    8 
 src/core/fusion/shmalloc.h                                           |    8 
 src/core/fusion/shmalloc/mstats.c                                    |    8 
 src/core/fusion/shmalloc/shcalloc.c                                  |    8 
 src/core/fusion/shmalloc/shfree.c                                    |    8 
 src/core/fusion/shmalloc/shmalloc.c                                  |    8 
 src/core/fusion/shmalloc/shmalloc_internal.h                         |    8 
 src/core/fusion/shmalloc/shmemalign.c                                |    8 
 src/core/fusion/shmalloc/shrealloc.c                                 |    8 
 src/core/fusion/shmalloc/shvalloc.c                                  |    8 
 src/core/fusion/util.c                                               |    8 
 src/core/gfxcard.c                                                   |    8 
 src/core/gfxcard.h                                                   |    9 
 src/core/graphics_driver.h                                           |    9 
 src/core/input.c                                                     |  219 ++++
 src/core/input.h                                                     |   11 
 src/core/input_driver.h                                              |    9 
 src/core/layers.c                                                    |    9 
 src/core/layers.h                                                    |    9 
 src/core/sig.c                                                       |    9 
 src/core/sig.h                                                       |    9 
 src/core/state.c                                                     |    9 
 src/core/state.h                                                     |    9 
 src/core/surfacemanager.c                                            |    9 
 src/core/surfacemanager.h                                            |    9 
 src/core/surfaces.c                                                  |    9 
 src/core/surfaces.h                                                  |    9 
 src/core/vt.c                                                        |    9 
 src/core/vt.h                                                        |    9 
 src/core/windows.c                                                   |   35 
 src/core/windows.h                                                   |    9 
 src/display/idirectfbdisplaylayer.c                                  |    9 
 src/display/idirectfbdisplaylayer.h                                  |    9 
 src/display/idirectfbsurface.c                                       |    9 
 src/display/idirectfbsurface.h                                       |    9 
 src/display/idirectfbsurface_layer.c                                 |    9 
 src/display/idirectfbsurface_layer.h                                 |    9 
 src/display/idirectfbsurface_window.c                                |    9 
 src/display/idirectfbsurface_window.h                                |    9 
 src/gfx/clip.c                                                       |    9 
 src/gfx/clip.h                                                       |    9 
 src/gfx/convert.c                                                    |    9 
 src/gfx/convert.h                                                    |    9 
 src/gfx/generic/generic.c                                            |    9 
 src/gfx/generic/generic.h                                            |   10 
 src/gfx/util.c                                                       |    9 
 src/gfx/util.h                                                       |    9 
 src/input/idirectfbinputbuffer.c                                     |    9 
 src/input/idirectfbinputbuffer.h                                     |    9 
 src/input/idirectfbinputdevice.c                                     |   29 
 src/input/idirectfbinputdevice.h                                     |    9 
 src/media/idirectfbfont.c                                            |    9 
 src/media/idirectfbfont.h                                            |    7 
 src/media/idirectfbimageprovider.h                                   |    7 
 src/media/idirectfbvideoprovider.h                                   |    7 
 src/misc/conf.c                                                      |    9 
 src/misc/conf.h                                                      |    9 
 src/misc/cpu_accel.c                                                 |   10 
 src/misc/cpu_accel.h                                                 |   10 
 src/misc/fbdebug.c                                                   |   10 
 src/misc/fbdebug.h                                                   |    9 
 src/misc/gfx_util.c                                                  |    9 
 src/misc/gfx_util.h                                                  |    9 
 src/misc/mem.c                                                       |    9 
 src/misc/mem.h                                                       |    9 
 src/misc/memcpy.c                                                    |   10 
 src/misc/memcpy.h                                                    |   10 
 src/misc/tree.c                                                      |   10 
 src/misc/tree.h                                                      |    9 
 src/misc/utf8.c                                                      |   10 
 src/misc/utf8.h                                                      |   10 
 src/misc/util.c                                                      |    9 
 src/misc/util.h                                                      |    9 
 src/windows/idirectfbwindow.c                                        |    9 
 src/windows/idirectfbwindow.h                                        |    9 
 tools/gendoc.pl                                                      |    8 
 tools/raw15toraw24.c                                                 |   12 
 tools/raw16toraw24.c                                                 |   12 
 tools/raw32toraw24.c                                                 |   14 
 149 files changed, 1957 insertions(+), 900 deletions(-)



commit 71562b701e1cb46b0fd4deca5ec97a3ee2c47f78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 26 00:51:34 2002 +0000

    Applied patch from Antonino Daplas <adaplas@users.sourceforge.net> checking
    for CGA/MDA emulation before polling for the vertical retrace.


 README           |    1 +
 src/core/fbdev.c |   19 ++++++++++++++-----
 2 files changed, 15 insertions(+), 5 deletions(-)



commit 963818681a4bcf82832ded96555595991274f32c
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 24 11:22:45 2002 +0000

    More work on the man-page.
    
    Converted C++ style comments to classic C comments where appropriate.
    Searching for '//' should now only show parts of the code that need to
    be reviewed.


 docs/directfbrc.5.in                                           |   48 +++++-----
 gfxdrivers/ati128/ati128.c                                     |   10 +-
 gfxdrivers/ati128/ati128_state.h                               |    1 
 gfxdrivers/ati128/regs.h                                       |   18 +--
 gfxdrivers/matrox/matrox.c                                     |   10 +-
 gfxdrivers/neomagic/neomagic.c                                 |   48 +++++-----
 inputdrivers/dbox2remote/dbox2remote.c                         |   14 +-
 inputdrivers/joystick/joystick.c                               |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |   10 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c |    4 
 src/core/coredefs.h                                            |    5 -
 src/core/fusion/fusion_internal.h                              |    2 
 src/core/surfacemanager.c                                      |    9 +
 src/core/vt.c                                                  |    2 
 src/misc/conf.c                                                |   10 +-
 src/misc/cpu_accel.c                                           |    2 
 16 files changed, 100 insertions(+), 95 deletions(-)



commit e338cadea8fec47a6227819a8720a63f4509b5c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 24 08:51:58 2002 +0000

    Splitted desktop-buffer-mode text moving parts of it to the different modes.


 directfbrc.5.in |   30 ++++++++++++++++--------------
 1 file changed, 16 insertions(+), 14 deletions(-)



commit d4d505a816aa77320def44bc7f1813d8be0eae80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 24 08:35:25 2002 +0000

    Added planar pixel format blitting bug and G550 blending to ARGB bug.


 BUGS |    2 ++
 1 file changed, 2 insertions(+)



commit 9ff8ad46a3969044f4e10c44b03b493ef9b1ae04
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 24 08:26:12 2002 +0000

    Removed unnecessary AC_SUBST.
    Changed z axis delta for Jogdial to 1.


 configure.in                 |    2 --
 inputdrivers/sonypi/sonypi.c |    4 ++--
 2 files changed, 2 insertions(+), 4 deletions(-)



commit 038143ba0b5ec6939d95011ffb48920d3632a815
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 23 22:07:46 2002 +0000

    Added a text to desktop-buffer-mode.


 directfbrc.5.in |   22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)



commit 5a15a26f0871c2f73d92dff89029a00ee6361b48
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 23 20:27:12 2002 +0000

    more work on the man-page


 directfbrc.5.in |   76 ++++++++++++++++++++++++++++++++++----------------------
 1 file changed, 47 insertions(+), 29 deletions(-)



commit b7b1565e091e9808ed025b12f55f9d8d9fb98f84
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 23 15:25:33 2002 +0000

    Declare boolean config variables as bool. Renamed some no-variables to
    their positive counterparts. Added the possibility to use no- with lots
    of config variables.
    
    Changed "no-window-opacity" option to "translucent-windows".
    
    Changed the man-page accordingly.


 docs/directfbrc.5.in      |   53 ++++++++++-------
 src/core/core.c           |    4 -
 src/core/coredefs.h       |    4 -
 src/core/vt.c             |    8 +-
 src/core/windows.c        |    2 
 src/directfb.c            |    2 
 src/gfx/generic/generic.c |    2 
 src/misc/conf.c           |  139 ++++++++++++++++++++++++++++------------------
 src/misc/conf.h           |   44 +++++++-------
 9 files changed, 151 insertions(+), 107 deletions(-)



commit d8b5dd288f00aaa4f7c0f489edad38b1a48884dd
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 23 14:22:23 2002 +0000

    described more parameters


 directfbrc.5.in |   85 +++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 63 insertions(+), 22 deletions(-)



commit c86f15abf1fb96aebf6d684cdd05ef0377ffb37e
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 22 16:03:28 2002 +0000

    Added index field to FontDescription that allows to control which face is
    loaded from a font file that provides a collection of faces.


 directfb.h |   37 ++++++++++++++++++++++---------------
 1 file changed, 22 insertions(+), 15 deletions(-)



commit d4c70094c14253342fe0156658f963c2c9189957
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 20 22:19:24 2002 +0000

    Added IDirectFBWindow::EnableEvents(mask) and DisableEvents(mask).


 TODO                          |    2 --
 include/directfb.h            |   28 ++++++++++++++++++++++++++--
 src/core/windows.c            |    5 +++++
 src/core/windows.h            |    1 +
 src/windows/idirectfbwindow.c |   36 ++++++++++++++++++++++++++++++++++++
 5 files changed, 68 insertions(+), 4 deletions(-)



commit 3bb5277e3a26520cda181c11cfa48fea1bf2de11
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 20 19:53:47 2002 +0000

    Added reallocate_surface() todo.


 TODO |    1 +
 1 file changed, 1 insertion(+)



commit bb28f1d51f9431b40cfd0a007f7ba19e468edc9a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 20 19:47:04 2002 +0000

    Support DLBM_BACKVIDEO in generic allocate_surface() for layers.


 layers.c |   25 +++++++++++++++++++++++--
 1 file changed, 23 insertions(+), 2 deletions(-)



commit a7be4dd57e6f49811e85bd3c9d4114b3bf6d6fa0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 19 10:02:13 2002 +0000

    Set event class in dfb_window_dispatch() and dfb_input_dispatch() to be sure.


 input.c   |    1 +
 windows.c |    1 +
 2 files changed, 2 insertions(+)



commit 1b5cf5acb4256aa407e0bb1623479e1fc5e36425
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 19 09:50:53 2002 +0000

    Fixed IDirectFBWindow::Close() sending no event that got broken
    during introduction of IDirectFBEventBuffer.


 idirectfbwindow.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 79816203f88adbd69d604be17751e007640472e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 19 01:20:41 2002 +0000

    Console acceleration, fixes coexistence with X, removed VGA cruft (not needed).
    
    You need to add "video=vmware:noaccel" to use DirectFB and do a Power OFF,
    it's a bug in VMware which is fixed in the VMware that is not yet released ;)


 /dev/null                                            |binary
 b/patches/Makefile.am                                |    2 +-
 b/patches/vmwarefb-0.6.0-linux-2.4.19-pre8.patch.bz2 |binary
 3 files changed, 1 insertion(+), 1 deletion(-)



commit 6bf35201295b093deb9763fc9bf2c1a542499c6a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 19 00:19:47 2002 +0000

    Align system memory back buffer pitch.


 fbdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 936df5dc741669735310540b728d78f94d140b7d
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 18 02:10:12 2002 +0000

    documented more options


 directfbrc.5.in |   19 ++++++++++++-------
 1 file changed, 12 insertions(+), 7 deletions(-)



commit 99ad8431b5d6047060f3c856ba6f5d28838bbbad
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 17 20:15:22 2002 +0000

    Define BINARY_VERSION as the earliest version that this release has
    binary compatibility with. Use BINARY_VERSION in MODULEDIR. Don't a
    version number in INTERNALINCLUDEDIR.


 configure.in |   17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)



commit 4d24b43fd00f12adf32525a810c51cbc2c491d45
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 17 18:36:55 2002 +0000

    First draft for a directfbrc(5) man page. Work in progress...


 configure.in         |    3 
 docs/.cvsignore      |    1 
 docs/Makefile.am     |    4 
 docs/directfbrc.5.in |  251 +++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 258 insertions(+), 1 deletion(-)



commit 569a7c798b6734242fe2b356078a6413a6223b8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 17 15:56:57 2002 +0000

    s/gz/bz2/


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 6d9887419bccf96b5b9c4b248e2aaca063596df6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 17 15:56:13 2002 +0000

    newer version


 Makefile.am                                |    2 +-
 vmwarefb-0.5.2-linux-2.4.19-pre8.patch.bz2 |binary
 2 files changed, 1 insertion(+), 1 deletion(-)



commit 7824736e64c8dc311af553f807e08698adef8af5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 17 15:54:11 2002 +0000

    Forgot to increase the graphics driver abi version.


 gfxcard.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 720dbf9d69034aa244a32eec996c4b1cbac8b511
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 17 15:52:48 2002 +0000

    Added IDirectFBDisplayLayer::GetLevel() and SetLevel() which can be used to
    query/change the z order of display layers. Added DLCAPS_LEVELS.


 include/directfb.h                  |   31 ++++++++++++++++++++++++++++++-
 src/core/layers.c                   |   20 ++++++++++++++++++++
 src/core/layers.h                   |   13 +++++++++++++
 src/display/idirectfbdisplaylayer.c |   32 ++++++++++++++++++++++++++++++++
 4 files changed, 95 insertions(+), 1 deletion(-)



commit c0ec058507214793182246bdccb66efb558bd251
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 14 16:38:32 2002 +0000

    VMware SVGA framebuffer driver to have DirectFB running under X in a window ;)
    Or fullscreen with XDGA (nearly as fast as native).
    
    http://master.dyndns.tv/vmwarefb.png
    http://master.dyndns.tv/vmwaredfb.png


 Makefile.am                               |    7 ++++---
 vmwarefb-0.5.0-linux-2.4.19-pre8.patch.gz |binary
 2 files changed, 4 insertions(+), 3 deletions(-)



commit 760ed61cbdf762adb98944a653b06e6657a1c5f8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 11 22:49:42 2002 +0000

    If the desktop buffer mode is backsystem, create system only window surfaces.


 windows.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 830b77cdb50465ac5c227d1b392c0ead9b8b08cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 11 22:34:20 2002 +0000

    Use fix_screeninfo.line_length after setting the mode to get the byte pitch
    instead of using the virtual resolution which may differ.


 fbdev.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)



commit c594073eb52a05255223d7187c0ab0c4b26627ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 10 19:03:18 2002 +0000

    Append version number to directories (e.g. '/usr/local/lib/directfb-0.9.11').
    Thanks to Fredrik Hallenberg <hallon@lysator.liu.se>,
    the Debian package maintainer of DirectFB.


 README       |    1 +
 configure.in |    7 ++++---
 2 files changed, 5 insertions(+), 3 deletions(-)



commit aba286523dac3a90eab267e8f9d6717e23f24c1b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 10 18:27:34 2002 +0000

    Avoid locks during emergency shutdown, just turn off layers.


 layers.c |   11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)



commit 70b29a6ef063ad1e7262294fa770403f035660f4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 9 23:06:04 2002 +0000

    fixed segfault on startup when no fb device is available


 fbdev.c |    3 +++
 1 file changed, 3 insertions(+)



commit d9218192036fb2b26aef157725b8b1c54b69d097
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 8 00:29:06 2002 +0000

    Added IDirectFBWindow::SetStackingClass(). The default stacking class
    DWSC_MIDDLE. There are DWSC_LOWER and DWSC_UPPER, too. A window cannot
    be outside of its stacking class, so DWSC_MIDDLE windows are always above
    DWSC_LOWER windows and so on...


 TODO                          |    2 
 configure.in                  |    2 
 include/directfb.h            |  126 +++++++++++++++++++-------------
 src/core/gfxcard.c            |    8 +-
 src/core/windows.c            |   84 ++++++++++++++++++++-
 src/core/windows.h            |   38 ++++++---
 src/windows/idirectfbwindow.c |  163 ++++++++++++++++++++++++++++--------------
 7 files changed, 294 insertions(+), 129 deletions(-)



commit 11b188756cf3763c4a3ea8664578357335361227
Author: Andreas Kotes <count@directfb.org>
Date:   Mon May 6 17:10:53 2002 +0000

    set _BSD_SOURCE when using dietlibc - required for <linux/videodev.h>


 idirectfbvideoprovider_v4l.c |    4 ++++
 1 file changed, 4 insertions(+)



commit cec7dac163926ec54c9cc4b2339b35e5b011ef4b
Author: Andreas Kotes <count@directfb.org>
Date:   Mon May 6 16:36:08 2002 +0000

    added missing include - required to compile with dietlibc


 property.h |    2 ++
 1 file changed, 2 insertions(+)



commit dcd40a772072fc2594a659c4dcd23828046abbd3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 4 12:13:15 2002 +0000

    dfb_gfxcard_drawstring() uses an extra state now instead of modifying the
    original state. This gives more performance for hardware accelerated text.


 fonts.c   |    2 -
 gfxcard.c |   71 ++++++++++++++++++++++++++++++++------------------------------
 2 files changed, 38 insertions(+), 35 deletions(-)



commit fb8b6ed36d26fb96bd989a6714c4f7edaecc6de2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 4 05:40:21 2002 +0000

    Implemented FusionRef for single app core.
    Fixed warnings from last checkin (when compiling with single app core).


 fusion/fusion_types.h |    4 -
 fusion/list.h         |   12 ++---
 fusion/lock.h         |   60 ++++++++++++++--------------
 fusion/property.h     |    2 
 fusion/ref.c          |  106 ++++++++++++++++++++++++++++++++++++++++++++++++++
 fusion/ref.h          |   96 +++++++++++++++++++++++++--------------------
 gfxcard.h             |    7 ++-
 input.h               |    5 ++
 layers.c              |   10 ++++
 layers.h              |    5 ++
 10 files changed, 224 insertions(+), 83 deletions(-)



commit ce09bfd061ac17bf2aae6b767f631fdfd3e762b7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 4 04:46:36 2002 +0000

    Workaround works better now, fullscreen apps are now usable with multi app core.


 layers.c |   16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)



commit 59eb109e958ac837b298a79235d434b034cf5e70
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 4 04:10:54 2002 +0000

    Added "dont-catch" to usage string.


 conf.c |    2 ++
 1 file changed, 2 insertions(+)



commit 63d3e8eae2d749908376923dd50b01a90dba50ea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 4 04:06:16 2002 +0000

    Added option "dont-catch" followed by a comma seperated list of signals
    that won't be caught by DirectFB's signal handler.
    
    Removed all takeover/transfer stuff from arena.
    
    Added 'emergency' indicator to exit functions of arena.
    
    Added 'emergency' indicators to all deinit/leave functions.


 TODO                      |    1 
 src/core/core.c           |   88 ++++++++++++++++------------------------------
 src/core/fbdev.c          |    4 +-
 src/core/fbdev.h          |    4 +-
 src/core/fusion/arena.c   |   37 +++++++++----------
 src/core/fusion/arena.h   |   32 ++++++++--------
 src/core/fusion/list.c    |    2 +
 src/core/fusion/reactor.c |    3 +
 src/core/gfxcard.c        |    4 +-
 src/core/gfxcard.h        |    9 +---
 src/core/input.c          |    4 +-
 src/core/input.h          |    9 +---
 src/core/layers.c         |    4 +-
 src/core/layers.h         |    9 +---
 src/core/sig.c            |   16 +++++---
 src/core/sig.h            |    2 +
 src/core/surfacemanager.c |   23 ++----------
 src/core/surfaces.h       |   12 ++----
 src/core/vt.c             |    4 +-
 src/core/vt.h             |    4 +-
 src/misc/conf.c           |   34 +++++++++++++++++
 src/misc/conf.h           |    2 +
 22 files changed, 149 insertions(+), 158 deletions(-)



commit 6c3cc8dc6dbb6340abd8dbe95f6d246a973abdd6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 2 19:08:39 2002 +0000

    Made all shmalloc functions internal _fusion_shmalloc functions.
    Added new public functions locking the heap and calling the internal functions.
    Cleaned up initialization.


 b/src/core/fusion/Makefile.am                  |    1 
 b/src/core/fusion/fusion_shmalloc.c            |  146 ++++++++++++
 b/src/core/fusion/shmalloc.h                   |    1 
 b/src/core/fusion/shmalloc/Makefile.am         |    1 
 b/src/core/fusion/shmalloc/mstats.c            |    2 
 b/src/core/fusion/shmalloc/shcalloc.c          |    4 
 b/src/core/fusion/shmalloc/shfree.c            |    8 
 b/src/core/fusion/shmalloc/shmalloc.c          |  291 ++++++++++++++++++++-----
 b/src/core/fusion/shmalloc/shmalloc_internal.h |   30 ++
 b/src/core/fusion/shmalloc/shmemalign.c        |    8 
 b/src/core/fusion/shmalloc/shrealloc.c         |   30 +-
 b/src/core/fusion/shmalloc/shvalloc.c          |    4 
 src/core/fusion/shmalloc/shbrk.c               |  224 -------------------
 13 files changed, 444 insertions(+), 306 deletions(-)



commit aefb2067862c7d0be509d09509ce68ffdcd4fa2f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 28 20:18:16 2002 +0000

    Disable console acceleration when joining a session, the framebuffer
    configuration of fusionees attaching from another tty is different.
    
    A small "dfbd" running as root but with a user's group now makes it
    possible to run XDirectFB completely without root privileges.


 fbdev.c |   38 ++++++++++++++++++++++++++++++++++++--
 1 file changed, 36 insertions(+), 2 deletions(-)



commit f87127297fa0cd22dec0c455f4100eb4cb84e7de
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 28 19:57:35 2002 +0000

    Do chmod after creation because of umask.


 shbrk.c |    2 ++
 1 file changed, 2 insertions(+)



commit 1d8a540d86487524f9e5fefff78091b6a9ee5a01
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 28 19:31:41 2002 +0000

    Create shared memory with permissions 0660 instead of 0600.


 shbrk.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit f60bfa1cf0a6614198e86ba57cfc1171ba60f81e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 28 19:25:46 2002 +0000

    Fixed thinko in recent addition.


 gfxcard.c |   52 ++++++++++++++++++++++++++++------------------------
 1 file changed, 28 insertions(+), 24 deletions(-)



commit 5ee855da43e17e3bb69a1d8997eadbe3832cba3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 28 18:58:41 2002 +0000

    New option "videoram-limit=<amount-in-kb>".
    Moved PAGE_ALIGN macro to 'misc/mem.h'.


 core/fusion/fusion_internal.h |    1 -
 core/fusion/util.c            |    2 ++
 core/gfxcard.c                |   11 ++++++++---
 misc/conf.c                   |   29 +++++++++++++++++++++++++----
 misc/conf.h                   |    3 +++
 misc/mem.h                    |    3 +++
 6 files changed, 41 insertions(+), 8 deletions(-)



commit f9e864fd21995fcb7a4362bd9a085cf3eb571ca0
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 27 21:31:37 2002 +0000

    devfs support for libmpeg3 provider (try to open /dev/sound/dsp )


 idirectfbvideoprovider_libmpeg3.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit d17caee3ec023e207da1fd7ebd62817e19009176
Author: Sven Neumann <neo@directfb.org>
Date:   Sat Apr 27 19:09:28 2002 +0000

    Allow to disable libmpeg3 and flash providers at configure time.
    Updated README.


 README       |   15 +++++----------
 configure.in |   18 ++++++++++--------
 2 files changed, 15 insertions(+), 18 deletions(-)



commit 0e9f8b46a42978ea63fe59c485d9404d5f09a8e3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 27 18:35:35 2002 +0000

    added a table of all vesa modes


 README |    7 +++++++
 1 file changed, 7 insertions(+)



commit 799c98f37125f45ffe25952131829f06695b462b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 27 18:22:26 2002 +0000

    minor update


 BUGS |    4 ++++
 TODO |    4 +++-
 2 files changed, 7 insertions(+), 1 deletion(-)



commit c3c406ab3acb9244c51e83c12d7a188bb959056e
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 27 18:07:30 2002 +0000

    bugfix: set correct audio format on big endian machines


 idirectfbvideoprovider_libmpeg3.c |   29 +++++++++++++++++++++++------
 1 file changed, 23 insertions(+), 6 deletions(-)



commit 81e423baa41a48f8d29ddebd188f497aa26bb6a2
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 27 14:55:59 2002 +0000

    removed libmpeg3 build hack, since the latest versions build a shared library.


 configure.in                                  |   24 +++++++----------
 interfaces/IDirectFBVideoProvider/Makefile.am |   36 ++++++++------------------
 2 files changed, 22 insertions(+), 38 deletions(-)



commit f0aae77e40aa1d0640da3499c21e06cf05903293
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 26 02:29:51 2002 +0000

    Added 'dfb_layers_hook_primary()' that allows drivers to wrap/extend/replace
    the implementation of the primary layer. The driver can provide an alternative
    implementation for one or more functions of the primary layer and gets the
    original content of the function table to use existing functionality.
    The alternation grade ranges from "i-can-set-the-opacity" to "what-is-fbdev".
    
    It's now allowed to return zero in LayerDataSize(),
    primaryLayerDataSize() does that now, it had pseudo data before.


 fbdev.c  |    6 +-----
 layers.c |   44 +++++++++++++++++++++++++++++++++++++++++---
 layers.h |   18 ++++++++++++++++++
 3 files changed, 60 insertions(+), 8 deletions(-)



commit 21a0939b8e6956921014ef32ddb3b117232fab90
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 25 22:06:13 2002 +0000

    Savage Framebuffer driver release.


 Makefile.am                                |    3 ++-
 savagefb-0.3.2-linux-2.4.19-pre7.patch.bz2 |binary
 2 files changed, 2 insertions(+), 1 deletion(-)



commit f1b161393be35153b428419c434d04863fe1e1cb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 22 16:57:32 2002 +0000

    released


 ChangeLog |  829 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   34 ++
 2 files changed, 863 insertions(+)



commit d4dff8f06aecdc733e22fe66ebe198662ff32668
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 22 02:38:58 2002 +0000

    Toggle sign of Z axis when converted to wheel event.
    Multiply wheel value by 7 instead 4 when changing a window opacity.
    
    My wheel mouse seems to always send Z axis values between 1 and -1.
    Is it normal? Do all wheel mice behave the same way? Is my mouse ill?
    Why are 4 bit used (5 including sign) for this axis if it never moves
    more than 1 or -1? This is my first day with a wheel mouse and I have
    no clue. The mouse isn't running fast enough to have the wheel produce
    electricity.


 windows.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit bad03ce919bcc2c8518beb353abd4ff86d2dee43
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 23:09:07 2002 +0000

    minor optical changes


 include/directfb.h |    2 +-
 tools/gendoc.pl    |    8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 1dae002829cb6f0d909f2b95ef0709079c6b3aa7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 22:49:15 2002 +0000

    some more NULL pointer checks


 core.c                  |    8 ++------
 fusion/shmalloc/shbrk.c |   14 ++++++++------
 gfxcard.c               |    3 +++
 3 files changed, 13 insertions(+), 12 deletions(-)



commit 7b767c7bbbc7ae6252017a6981c7a2d2040d59ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 21:31:36 2002 +0000

    Finished documentational summary of IDirectFB.


 directfb.h |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)



commit d87e54fba1addbb523315eedda359b069f85dfa4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 19:18:24 2002 +0000

    Added information about the primary surface and the cooperative level.


 directfb.h |   44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)



commit f25b7b02c84f555f4dcf9270bd424f73c3608c11
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 20 18:37:56 2002 +0000

    align destination in color keyed blits, instead of source. this is much faster since the destination lies most likely in video ram.


 generic.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit b9e1709e0b40876459c8e898d7c97f26d54df094
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 18:11:35 2002 +0000

    Enhanced reference manual generation, wrote initial summary for IDirectFB.


 include/directfb.h |   16 ++++++++++++++--
 tools/gendoc.pl    |    6 ++++--
 2 files changed, 18 insertions(+), 4 deletions(-)



commit 93772fc4328ce274d5e7b4479fe96ab4ddb4d1e3
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 20 15:12:03 2002 +0000

    tweaked recent code a bit, which further improves performance on intel with
    mtrr, all other benchmarks showed no difference, thats why they are not listed.
    
    df_dok --stretch-blit --dfb:no-hardware
    
    old new code
    PII-350     Matrox G400  MTRR on  : 61.46 MPixel/sec
    
    new new code
    PII-350     Matrox G400  MTRR on  : 68.13 MPixel/sec


 generic.c |   13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)



commit 25a4aa160d95291d6ebb6721919fad019dbb3449
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Apr 20 14:30:49 2002 +0000

    optimized 16Bit StretchBlit in generic driver, see below for results:
    
    df_dok --stretch-blit --dfb:no-hardware
    
    old code:
    
    PII-350     Matrox G400  MTRR on : 60.09 MPixel/sec
    PII-350     Matrox G400  MTRR off:  9.93 MPixel/sec
    PPC G4-500  ATI Rage 128	 : 13.20 MPixel/sec
    
    new code:
    
    PII-350     Matrox G400  MTRR on  : 61.46 MPixel/sec
    PII-350     Matrox G400  MTRR off : 19.73 MPixel/sec
    PPC G4-500  ATI Rage 128          : 26.33 MPixel/sec


 generic.c |   28 ++++++++++++++++++++++++----
 1 file changed, 24 insertions(+), 4 deletions(-)



commit 72d9539448d50f6118ca7735575f022649b9255e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 07:45:33 2002 +0000

    Set reaction list pointer to NULL when freeing an orphaned node.


 reactor.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 1f18902bbc4ee2624e9443ebf89b479d6af65c40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 05:10:08 2002 +0000

    Focus handling fixes and improvements in case a window appears/disappears.
    More code cleanup and documentation.


 windows.c |  152 ++++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 108 insertions(+), 44 deletions(-)



commit 0b45ebd3b9f36a18ecc16af52e432c5b2765ccdc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 20 03:49:11 2002 +0000

    Window stack code cleanups.
    Better stack locking.


 core/windows.c                    |  639 +++++++++++++++++++++-----------------
 core/windows.h                    |   25 -
 display/idirectfbsurface_window.c |    2 
 windows/idirectfbwindow.c         |   25 -
 4 files changed, 390 insertions(+), 301 deletions(-)



commit 4fe3c5c11e6e39d67f627dac98909dfef506e4fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 19 20:55:20 2002 +0000

    Shared memory reinitialization has been done.


 TODO |    1 -
 1 file changed, 1 deletion(-)



commit ef6fb401355ec3af42cb80a6a02ed742e6af8940
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 19 17:38:44 2002 +0000

    Free shared layer driver data in dfb_layers_shutdown().
    
    Changed fs type from "shm" to "tmpfs".
    
    Added temporary workaround for partly implemented FusionProperty
    in multi application core.


 fusion/shmalloc/shbrk.c |    2 +-
 layers.c                |   21 ++++++++++++++++++++-
 2 files changed, 21 insertions(+), 2 deletions(-)



commit 174212f3dbd824a41acfebac25c8f5cf6d45db5d
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Apr 19 12:10:03 2002 +0000

    (dfb_layers_shutdown) return if no layersfield exists. Fixes the crash
    that occured when dfb_core_deinit_emergency() is called during initialization
    before dfb_layers_initialize() was called.


 layers.c |    3 +++
 1 file changed, 3 insertions(+)



commit f4dda84294528ba7cd9149ff8b09910357b9f88c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 18 23:49:46 2002 +0000

    Fixed a very stupid code block moving error.


 shbrk.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit ba258b12e17d34a6c3cd88a1f8ca191eceaed55c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 18 20:48:59 2002 +0000

    Added more cleanup code, less IPC resource leakage after shutdown.
    Commented code in some functions.
    Added more assertions.


 fbdev.c                             |    3 ++
 fusion/fusion.c                     |    2 +
 fusion/shmalloc/shbrk.c             |   45 ++++++++++++++++++++++++------------
 fusion/shmalloc/shmalloc_internal.h |    1 
 layers.c                            |   15 +++++++++---
 surfacemanager.c                    |    2 +
 windows.c                           |   42 ++++++++++++++++++++++++---------
 7 files changed, 81 insertions(+), 29 deletions(-)



commit 804359958fec099238fa074d1f373a8eb5327a23
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 18 17:39:48 2002 +0000

    Added tmpfs mount point detection from Sebastian Klemke <packet@convergence.de>.
    
    The shared memory area is now reinitialized during startup if it already
    existed, but with no DirectFB apps running.
    
    Removed some unused code.


 README                                       |    1 
 src/core/fusion/arena.c                      |    2 
 src/core/fusion/fusion.c                     |   42 ---------
 src/core/fusion/fusion_internal.h            |    9 --
 src/core/fusion/shmalloc/shbrk.c             |  119 ++++++++++++++++++++-------
 src/core/fusion/shmalloc/shmalloc.c          |    2 
 src/core/fusion/shmalloc/shmalloc_internal.h |    2 
 7 files changed, 96 insertions(+), 81 deletions(-)



commit 1a2964dcdb6ef1407520e1c19220b000f567ec7c
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Apr 17 11:03:14 2002 +0000

    Changed internal functions dfb_copy_buffer_32() and dfb_scale_linear_32()
    to take the destination pitch instead of the difference between width and
    pitch.
    
    Added a destination rectangle to IDirectFBImageProvider::RenderTo().
    
    Added IDirectFBEventBuffer::HasEvent().


 include/directfb.h                                              |   17 ++++-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |   23 ++++--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   34 +++++-----
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |   21 +++---
 src/directfb.c                                                  |    2 
 src/input/idirectfbinputbuffer.c                                |    8 ++
 src/misc/gfx_util.c                                             |   18 +++--
 src/misc/gfx_util.h                                             |    7 +-
 8 files changed, 88 insertions(+), 42 deletions(-)



commit 48499cf48932698cee4032998f76628e89dc2669
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 17 05:10:33 2002 +0000

    Added missing incrementing of source pointer when doing alignment for
    colorkeyed blits. Made the source pointer the preferred aligned one.


 generic.c |   10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)



commit 9c183cd594327f688b6ab8594198e75eedd2fc54
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 17 04:00:37 2002 +0000

    Added details about surface manager and multi app core.


 TODO |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit 168c208e82b83f321a178eb0047447cf200613e2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 17 03:04:15 2002 +0000

    Compilation fixes for multi application core.
    
    Unimplemented multi app FusionProperty is currently mapped
    to FusionSkirmish, that is ok for non-fullscreen apps.


 fbdev.c           |    2 +-
 fusion/property.c |    1 -
 fusion/property.h |   10 +++++++++-
 layers.c          |   27 ++++++++++++++++++++++++---
 4 files changed, 34 insertions(+), 6 deletions(-)



commit bf576dd984538ced1a23f8891932292a7e1b1534
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 17 02:34:18 2002 +0000

    Debug version compiles again.


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit cae5a9fe7d56492b69aebfd3eb748d1927ddd8db
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Apr 16 10:06:09 2002 +0000

    purely cosmetic change (indentation)


 directfb.h |   56 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 28 insertions(+), 28 deletions(-)



commit 6862454bbe235168756aefaac5798af1d388f5d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 15 15:19:04 2002 +0000

    Set width and height to zero if one of them is zero or less
    in dfb_rectangle_intersect and dfb_rectangle_intersect_by_unsafe_region.
    
    Added some comments.


 util.c |   25 +++++++++++++++++++++++--
 1 file changed, 23 insertions(+), 2 deletions(-)



commit e602b2eabb5c95886111a47095c1b84268c7b36d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 15 15:16:29 2002 +0000

    Be more tolerant in GetSubSurface. Allow width or height to be less than
    or equal to zero. The created sub surface will never do drawing/blitting.


 idirectfbsurface.c        |   31 ++++++++++++++-----------------
 idirectfbsurface_layer.c  |   27 +++++++++++++--------------
 idirectfbsurface_window.c |   25 ++++++++++++-------------
 3 files changed, 39 insertions(+), 44 deletions(-)



commit d51012be152e5259c0a48f559b09ee0e63de3e21
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Apr 15 15:14:31 2002 +0000

    Let CapsLock key events through.


 windows.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit 163f1ef0fb7f10284e35f60acefb717ba61e0bb9
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Apr 15 10:12:45 2002 +0000

    Added missing includes and changed include order.


 IDirectFBImageProvider/idirectfbimageprovider_png.c       |    5 ++---
 IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    1 +
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 9e76194b47fa3ee2cea1a63d75e82fa472a0fc51
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 22:37:25 2002 +0000

    Do not flash LEDs when holding Lock keys. Toggle once the key gets down.


 keyboard.c |   39 +++++++++++++++++++++------------------
 1 file changed, 21 insertions(+), 18 deletions(-)



commit 5bd7a1d5c842a58bc5004433e29d48300ac069c8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 21:22:56 2002 +0000

    Forgot a bit in DWOP_ALL.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ef6b0a2a51ed55bcbe99548786bf989d4631792f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 21:11:30 2002 +0000

    Added new window options to disable moving,
    resizing, stacking and destruction by wm hack.
    
    Added window option that turns the window into a passive
    output only window (DWOP_GHOST). It will never get the focus
    or any input events, clicks will go through. This is useful
    for status OSDs or subtitling via transparent windows.
    
    Added IDirectFBWindow::GetOptions().


 TODO                                |    2 
 include/directfb.h                  |   25 ++++++++
 src/core/layers.c                   |    4 +
 src/core/windows.c                  |  101 ++++++++++++++++++------------------
 src/core/windows.h                  |   15 -----
 src/display/idirectfbdisplaylayer.c |    3 +
 src/windows/idirectfbwindow.c       |   30 +++++++++-
 7 files changed, 111 insertions(+), 69 deletions(-)



commit ac1ec8789c0ea55def8b0058086a1578d1715a4a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 18:49:15 2002 +0000

    Bye bye probe context and font module probing TODOs.


 TODO |    4 ----
 1 file changed, 4 deletions(-)



commit c50ec36f8105fa6932e60a210f19cbc82347779d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 18:46:01 2002 +0000

    Added probe context structs for all interfaces loaded from modules.
    All parameters are stored in this struct giving more extendability.
    
    Added default probing function 'DFBProbeInterface' that can be used
    for 'DFBGetInterface' as the 'probe' function.
    It simply calls the implementation's Probe function with the given context.
    
    Reduced code size in IDirectFB, cleaned up and documented code.


 include/directfb_internals.h                                         |   22 +
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |    8 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    8 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    8 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   14 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   10 
 src/idirectfb.c                                                      |  142 ++++------
 src/interface.c                                                      |    5 
 src/media/Makefile.am                                                |    4 
 src/media/idirectfbfont.h                                            |   15 -
 src/media/idirectfbimageprovider.h                                   |   35 ++
 src/media/idirectfbvideoprovider.h                                   |   34 ++
 15 files changed, 220 insertions(+), 115 deletions(-)



commit d62bcdf03adc430088ac6a083aac9693b23a7b43
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 10:16:16 2002 +0000

    Added sanity checks.


 idirectfbdisplaylayer.c |    3 +++
 1 file changed, 3 insertions(+)



commit cefa79f5ab81b813face8b0aa982ca5d9c006123
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 10:11:20 2002 +0000

    Added IDirectFBDisplayLayer::SetCursorAcceleration a la XChangePointerControl.
    Removed acceleration from PS/2 driver, new acceleration is done in window stack
    code. Reading from input devices directly will return unaccelerated movements.


 include/directfb.h                  |   14 ++++
 inputdrivers/ps2mouse/ps2mouse.c    |   21 -------
 src/core/layers.c                   |  103 +++++++++++++++++++++---------------
 src/core/layers.h                   |    5 +
 src/core/windows.c                  |   83 +++++++++++++++++------------
 src/core/windows.h                  |   16 +++--
 src/display/idirectfbdisplaylayer.c |   29 +++++++---
 7 files changed, 163 insertions(+), 108 deletions(-)



commit f7fde954ebb427f98238e144a4a23b10f6e273fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 09:04:47 2002 +0000

    Added DIAI_LAST and DIBI_LAST.
    Added more argument checking in IDirectFBInputDevice,
    use new constants for array sizes.


 include/directfb.h               |    6 ++++--
 src/input/idirectfbinputdevice.c |   35 ++++++++++++++++++-----------------
 2 files changed, 22 insertions(+), 19 deletions(-)



commit 3a9d6162325c744474b72313ffd74976b32b83e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 14 01:04:26 2002 +0000

    Fixed debug enabled builds.


 directfb_internals.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 3edf00c03c1dd6b4de918d63d1109f243711bbb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 13 22:22:50 2002 +0000

    Added DFB_DEALLOCATE_INTERFACE saving two lines of code in the
    Destruct method of each interface.
    
    Cleaned up deallocation of interfaces after Construct failed.
    Currently Construct methods have to call DFB_DEALLOCATE_INTERFACE
    before returning an error.


 include/directfb_internals.h                                         |    5 ++++
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |    5 +---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    4 ---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |    4 ---
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    4 ---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   11 ++++------
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |    4 ---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |    6 ++---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |    5 +---
 src/directfb.c                                                       |    1 
 src/display/idirectfbdisplaylayer.c                                  |    8 +------
 src/display/idirectfbsurface.c                                       |    4 ---
 src/display/idirectfbsurface_layer.c                                 |    4 ---
 src/idirectfb.c                                                      |    4 ---
 src/input/idirectfbinputbuffer.c                                     |    4 ---
 src/input/idirectfbinputdevice.c                                     |    4 ---
 src/media/idirectfbfont.c                                            |    4 ---
 src/windows/idirectfbwindow.c                                        |    8 +------
 18 files changed, 31 insertions(+), 58 deletions(-)



commit 8c70bf80dfac32f13ef6916c556e02f6d4d14c32
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 12 23:42:52 2002 +0000

    Reworked display layer driver handling.
    
    Core structure DisplayLayer is no longer exported.
    Added structures for driver functions and information.
    Drivers call 'dfb_layers_register' during initialization.
    
    Generalized surface creation/reallocation of display layers.
    Display layer drivers are cleaner now.
    
    Cleaned up layering code and added missing functions.
    
    Experimental mouse acceleration in PS/2 driver.
    
    Added options "mode=<width>x<height>" and "depth=<bpp>"
    which select the startup mode and bit depth.
    
    Bit depths of fb.modes entries are ignored now when looking
    for a requested mode. However, the default bit depth is the
    one of the first entry.
    
    Added new fusion primitive 'FusionProperty' which is a lock
    that automatically chooses between lock and try_lock behaviour.
    Two different locking methods can be used for short locks, e.g.
    window stack repaints, and long locks, e.g. exclusive layer access.
    Both methods wait if the property is 'leased' and fail if the property
    is 'purchased'. There's no implementation for the multi app core yet.


 TODO                                                                 |    9 
 gfxdrivers/ati128/ati128.c                                           |   12 
 gfxdrivers/ati128/ati128.h                                           |   28 
 gfxdrivers/ati128/ati128_overlay.c                                   |  542 ++--
 gfxdrivers/matrox/matrox.c                                           |   25 
 gfxdrivers/matrox/matrox.h                                           |   43 
 gfxdrivers/matrox/matrox_bes.c                                       |  623 +++--
 gfxdrivers/neomagic/neo2200.c                                        |    3 
 gfxdrivers/neomagic/neo_overlay.c                                    |  481 ++--
 gfxdrivers/neomagic/neomagic.c                                       |    7 
 gfxdrivers/neomagic/neomagic.h                                       |   17 
 include/directfb.h                                                   |    1 
 inputdrivers/ps2mouse/ps2mouse.c                                     |   21 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |    2 
 src/Makefile.am                                                      |    1 
 src/core/core.c                                                      |   10 
 src/core/coredefs.h                                                  |    2 
 src/core/coretypes.h                                                 |    1 
 src/core/fbdev.c                                                     |  474 ++--
 src/core/fbdev.h                                                     |    5 
 src/core/fusion/Makefile.am                                          |    2 
 src/core/fusion/property.c                                           |  175 +
 src/core/fusion/property.h                                           |   96 
 src/core/gfxcard.c                                                   |   10 
 src/core/gfxcard.h                                                   |   13 
 src/core/graphics_driver.h                                           |    5 
 src/core/layers.c                                                    | 1114 +++++++---
 src/core/layers.h                                                    |  311 +-
 src/core/surfacemanager.c                                            |    3 
 src/core/surfaces.c                                                  |  105 
 src/core/surfaces.h                                                  |    9 
 src/core/windows.c                                                   |  175 -
 src/core/windows.h                                                   |   46 
 src/directfb.c                                                       |   41 
 src/display/idirectfbdisplaylayer.c                                  |  166 -
 src/display/idirectfbsurface_layer.c                                 |    4 
 src/gfx/convert.h                                                    |   18 
 src/gfx/util.h                                                       |    6 
 src/idirectfb.c                                                      |  160 -
 src/misc/conf.c                                                      |   41 
 src/misc/conf.h                                                      |    6 
 46 files changed, 3025 insertions(+), 1798 deletions(-)



commit 0f475e2974c55ea822dbeb8776a771e274d18ed4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 11 01:51:01 2002 +0000

    Added missing unlocks in dfb_surface_reformat_surface().
    
    Return success in dfb_surface_reallocate_buffer() if video instance
    reallocation failed but a system instance exists.
    
    Window resizing deadlocks seem to have gone.


 surfaces.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit a1b4a53c699ad3950def100ff52c22f8b19d2b97
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 5 14:35:16 2002 +0000

    Small fix for multi app core compiling.


 fbdev.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit e0e69bf55dc09c73980678179b8babbf6aee5012
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 26 09:38:23 2002 +0000

    Tweaked surface buffer locking again, fixes the slow software stretch blit
    after hardware blitting the same surface. So it wasn't the missing '-O3'.


 surfaces.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit d6d72af7cccf193a5c7578e7f9ac08f8dc41c47e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 26 04:16:31 2002 +0000

    Added a 40ms sleep after switching VTs. It seems to fix mouse problems
    when starting applications from XFree. I know it's a hack, but it should
    go away after VT handling rewrite.


 vt.c |    2 ++
 1 file changed, 2 insertions(+)



commit 99fae4937ac6311951f21cdf9cd27e0cda56bdc5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 26 04:03:11 2002 +0000

    Enable -O3 for debug mode, too. Stretched blits are REALLY slow without it (1-2 MPixel).


 configure.in |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit d26ef5e654fa37f879ba9e86a3722130c8709334
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 26 03:28:18 2002 +0000

    Moved a bit code from keyboard driver to vt handling where it belongs.


 inputdrivers/keyboard/keyboard.c |   42 +--------------------------------------
 src/core/vt.c                    |   17 +++++++++++++++
 2 files changed, 19 insertions(+), 40 deletions(-)



commit 9574856de3336520e8f3faaea5209b9f99aa6720
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Mar 25 19:56:34 2002 +0000

    Added support for vertical kerning.
    Release the FreeType2 library when the last font provider is released.


 core/fonts.h          |   32 +++++++++++++++++---------------
 core/gfxcard.c        |   14 +++++++++-----
 media/idirectfbfont.c |   13 +++++++++----
 3 files changed, 35 insertions(+), 24 deletions(-)



commit e4a333e81f9570ddc6996911517623175a040708
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 24 20:11:08 2002 +0000

    Fixed software driver pixelformat tables (NULL padding).
    
    Commented out old code in dfb_vt_shutdown.


 core/vt.c             |    4 ++--
 gfx/generic/generic.c |   38 +++++++++++++++++++++++++++++++++++---
 2 files changed, 37 insertions(+), 5 deletions(-)



commit 16a7aabe83d9ed0f42d1a9d65ec4941c16fd981c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 24 13:46:50 2002 +0000

    Do TIOCNOTTY on /dev/tty0 instead of file descriptor 0.
    This way XDirectFB works when started from linux console,
    but I don't know why only XDirectFB failed. Don't know either
    what TIOCNOTTY is, neither TIOCSCTTY. Time for a VT/TTY handling
    rewrite in DirectFB.
    
    However, I added perror messages in case TIOCNOTTY or TIOCSCTTY fails.
    
    Strange result (df_window and XDirectFB show same behaviour now):
    
    from xterm:                       both ioctls fail
    from linux console:               second ioctl fails
    from linux console (with strace): first ioctl fails
    
    
    Removed tcflush calls from PS/2 driver (inappropriate ioctl).


 keyboard/keyboard.c |    7 +++++--
 ps2mouse/ps2mouse.c |    9 ---------
 2 files changed, 5 insertions(+), 11 deletions(-)



commit 0a31512139db792d35e6765828cd6957d3eaccb8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 23 04:18:19 2002 +0000

    Fixed a bug that may have caused broken pulldown menus in GTK!
    
    handle_enter_leave_focus() did not check if the pointer is grabbed.


 windows.c |   56 ++++++++++++++++++++++++++++++++------------------------
 1 file changed, 32 insertions(+), 24 deletions(-)



commit c58a746bbf93d8b123397f913cc0e4d1d65f185f
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Mar 22 19:21:24 2002 +0000

    Removed -disable-static from LIBADDs.


 IDirectFBFont/Makefile.am          |    4 ++--
 IDirectFBImageProvider/Makefile.am |    6 +++---
 IDirectFBVideoProvider/Makefile.am |    6 +++---
 3 files changed, 8 insertions(+), 8 deletions(-)



commit dade4c121038d74eeee6e4d16fad611f9fbbf7ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 22 19:21:08 2002 +0000

    Added Martin Mueller to "Thanks To" section.


 README |    1 +
 1 file changed, 1 insertion(+)



commit a534c95527a981a327069c20c7e30ee3455d9f84
Author: mm <mm>
Date:   Fri Mar 22 18:30:17 2002 +0000

    Added brightness control to neomagic video overlay


 neo_overlay.c |   13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)



commit d8aee35c23aa4e3aa9dfd0c2a19c58cc8d723141
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 21 22:03:19 2002 +0000

    added two lines


 TODO |    4 ++++
 1 file changed, 4 insertions(+)



commit e400747012c5327f45ea15ce65739fc429c61e3c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 21 21:59:58 2002 +0000

    Fixed crashes that sometimes occur during window resizing when another
    thread is repainting the window stack.
    
    Print caution message after failing video instance reallocation only
    if there is no system instance. If there is a system instance mark it
    as valid.
    
    Removed redundant macro in 'layers.c'.
    
    Added same debug checks to gAcquire() as in dfb_gfxcard_state_acquire().
    
    Added dfb_get_millis() which returns the current time in milli seconds
    after DirectFB startup (after first call of the function actually).
    
    Added PID and milli seconds after DirectFB startup to debug messages.


 core/coredefs.h       |   11 ++++++++---
 core/layers.c         |    4 +---
 core/surfaces.c       |    6 +++++-
 core/windows.c        |    8 +++++++-
 gfx/generic/generic.c |   10 ++++++++++
 misc/util.c           |   21 +++++++++++++++++++++
 misc/util.h           |    6 +++++-
 7 files changed, 57 insertions(+), 9 deletions(-)



commit 69923f4fd7ab06624e25cc1305c08a200cca0ff4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 18 21:05:08 2002 +0000

    Added dfb_sig_block_all() which blocks all signals and should be called
    at the beginning of each input thread. Otherwise signals may
    arrive at the input thread which in turn (in signal handler) cancels
    all input threads (including itself) during emergency shutdown.


 inputdrivers/dbox2remote/dbox2remote.c |    4 ++++
 inputdrivers/h3600_ts/h3600_ts.c       |    4 ++++
 inputdrivers/joystick/joystick.c       |    4 ++++
 inputdrivers/keyboard/keyboard.c       |    6 +++++-
 inputdrivers/lirc/lirc.c               |    4 ++++
 inputdrivers/ps2mouse/ps2mouse.c       |    4 ++++
 inputdrivers/serialmouse/serialmouse.c |    7 +++++++
 inputdrivers/sonypi/sonypi.c           |    4 ++++
 src/core/sig.h                         |   19 +++++++++++++++++++
 9 files changed, 55 insertions(+), 1 deletion(-)



commit 62774c5dc22e87c00f57c2262f21f9f468b63c19
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 06:25:52 2002 +0000

    Added scrolling or panning for virtual window/layer sizes.


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 288a47c187973b802b2c283089aac20c0ac65ba0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 06:03:18 2002 +0000

    Treat windows with color keying enabled as transparent, so the background
    gets cleared.


 windows.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 68d0e053d1e62fd5ff48c37f5acdff89120c69ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 05:32:10 2002 +0000

    Reading from a surface with auto video policy which is stored in video
    memory no longer pulls it into system memory.
    
    Changed surface reallocation behaviour. Surfaces already in video memory
    stay there after reallocation.


 gfxcard.h  |    2 +-
 surfaces.c |   27 +++++++++++++++++----------
 surfaces.h |    2 ++
 3 files changed, 20 insertions(+), 11 deletions(-)



commit 1fd7149444c915d94088359e9dbdfc5d0d24c693
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 01:41:05 2002 +0000

    Removed color keyed window entry.


 TODO |    2 --
 1 file changed, 2 deletions(-)



commit 9add3be4545bcacca791e9f0c0a4d6d2fce1c54e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 01:40:31 2002 +0000

    Added color keying for windows (e.g. for shaped windows).
    
    Added DFBWindowOptions having DWOP_COLORKEYING for now.
    Added IDirectFBWindow::SetOptions and SetColorKey(r,g,b).


 include/directfb.h            |   34 ++++++++++++++++++++++++++++-
 src/core/windows.c            |    9 +++++++
 src/core/windows.h            |    7 ++++--
 src/windows/idirectfbwindow.c |   48 ++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 94 insertions(+), 4 deletions(-)



commit 52c10bf0bdf2d586bc180a4e99591850ea9ab8e9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 01:34:05 2002 +0000

    Removed debug printf I forgot.


 matrox_state.c |    2 --
 1 file changed, 2 deletions(-)



commit 8f3b8e6684d3f1818dee99aecc43d9e276c1868d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 17 01:23:27 2002 +0000

    Fixed colorkeying with simultaneous blending for ARGB surfaces
    in software and Matrox (G200+) driver.


 gfxdrivers/matrox/matrox_state.c |   30 ++++++++++++++----------------
 src/gfx/generic/generic.c        |    6 +++---
 2 files changed, 17 insertions(+), 19 deletions(-)



commit 6fc577b390825d9485647663764901968c7647a8
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Mar 16 22:57:36 2002 +0000

    - removed the paragraph from README mentioning the aty128fb and nvidia patches.
    - removed neofb patch from Makefile.am


 README              |    6 ++----
 patches/Makefile.am |    4 +---
 2 files changed, 3 insertions(+), 7 deletions(-)



commit c5e0f68173314f88025aa77e710d62bfe7ab8d59
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 15 17:20:15 2002 +0000

    Deinitialize layers in emergency shutdown (e.g. segfault).


 core.c |    1 +
 1 file changed, 1 insertion(+)



commit 8081642950608b191a62abdac98e962212535fa1
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Mar 14 01:57:53 2002 +0000

    - use lookup tables to convert rgb332 2/3bit color channels to precalculated 8bit values. now blending in rgb332 looks much better without affecting performance.


 generic.c |   24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)



commit 1bdd7d76169f8b9b717aaaf3c6f9490a0af78f33
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 11 23:54:08 2002 +0000

    Finally neofb got itself into 2.4.19-pre3 ;)


 /dev/null            |binary
 patches/README.neofb |   32 --------------------------------
 2 files changed, 32 deletions(-)



commit 47883aef17661928d0262d6d6d976e586d4c5726
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 11 00:28:31 2002 +0000

    Sorry, the next time I will compile before committing.


 surfacemanager.c |    2 ++
 surfaces.c       |   20 ++++++++++++--------
 2 files changed, 14 insertions(+), 8 deletions(-)



commit fb2a87d28215f4686b3d76fad8e792ebadabb089
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 11 00:12:20 2002 +0000

    Removed to old lines that caused doubled and interlaced modes not work.


 fbdev.c |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 04294d2509468c82efdad20d6ce27155fda79bd8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 10 06:02:13 2002 +0000

    Minor cleanup, converted defines to enums (CoreSurfaceHealth/Policy).


 surfaces.h |   96 ++++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 57 insertions(+), 39 deletions(-)



commit 90a1d2c30f7d918bcf0c5b6af6f38779afd15938
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 9 01:51:53 2002 +0000

    Removed one ;)


 TODO |    2 --
 1 file changed, 2 deletions(-)



commit 0186511929177764a81fe801fc729891a27741c8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 9 01:49:58 2002 +0000

    Shift 8bit values to the right in RGB15 and RGB16.


 matrox_bes.c |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit b1a998298a8bdd52271d9d65b030572b922ebf12
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 9 01:38:50 2002 +0000

    Implemented destination color keying.


 matrox_bes.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a59b4e4c2a758add47f1ff0d0548c0315544761d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 9 01:38:02 2002 +0000

    Changed internal parameters.


 gfxdrivers/ati128/ati128_overlay.c  |    4 +
 gfxdrivers/matrox/matrox.h          |    2 
 gfxdrivers/matrox/matrox_bes.c      |   97 +++++++++++++++++++-----------------
 gfxdrivers/matrox/regs.h            |   14 +++++
 gfxdrivers/neomagic/neo_overlay.c   |    4 +
 src/core/fbdev.c                    |    4 -
 src/core/layers.h                   |    4 +
 src/display/idirectfbdisplaylayer.c |    7 --
 8 files changed, 81 insertions(+), 55 deletions(-)



commit afb409bf8987ea6e65e4fcece2b53c197845b342
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Mar 9 00:00:44 2002 +0000

    Added destination colorkeying for display layers.
    Not implemented by any driver yet.
    
    IDirectFBDisplayLayer::SetColorKey() is now called
    IDirectFBDisplayLayer::SetSrcColorKey().
    
    Added IDirectFBDisplayLayer::SetDstColorKey().
    
    DLOP_COLORKEYING is DLOP_SRC_COLORKEY now.
    DLCAPS_COLORKEYING is DLCAPS_SRC_COLORKEY now.
    
    Added DLOP_DST_COLORKEY and DLCAPS_DST_COLORKEY.


 gfxdrivers/ati128/ati128_overlay.c  |   13 +++++++++---
 gfxdrivers/matrox/matrox_bes.c      |   14 ++++++++++--
 gfxdrivers/neomagic/neo_overlay.c   |   14 ++++++++++--
 include/directfb.h                  |   39 ++++++++++++++++++++++++++----------
 src/core/fbdev.c                    |   13 +++++++++---
 src/core/layers.h                   |    4 ++-
 src/display/idirectfbdisplaylayer.c |   33 ++++++++++++++++++++++++++----
 7 files changed, 103 insertions(+), 27 deletions(-)



commit 7b85900d1bc91c8115096d7107afc661ab5700b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 8 03:45:13 2002 +0000

    Added some more useful things needed before feature freeze.
    Updated ChangeLog (no, it's not a release yet ;)


 ChangeLog |  135 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 TODO      |   17 +++++++
 2 files changed, 152 insertions(+)



commit 4099c9508b19e098f5bbcea7577d7775ef9e7f09
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 8 02:59:41 2002 +0000

    More important TODOs added for 1.0.


 TODO |    6 ++++++
 1 file changed, 6 insertions(+)



commit dbc51a67ccaae66da4419a0a57dabf8f95af20d1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Mar 8 01:41:00 2002 +0000

    Added window resizing wm hack, press 'CapsLock + Strg' to resize with the mouse.
    Fixed a deadlock in dfb_surface_reformat.
    Changed window stack update strategy when resizing,
    great thanks to Hallvar Helleseth <hallvar@ii.uib.no>.


 surfaces.c |   10 +++--
 windows.c  |  116 ++++++++++++++++++++++++++++++++++++++++++++-----------------
 2 files changed, 91 insertions(+), 35 deletions(-)



commit 5e66812843765d9467935ace481d890b8774d297
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 7 23:18:08 2002 +0000

    Disable static libraries by default again, builds twice as fast.
    Added AM_CONDITIONAL for static library stuff in src/Makefile.am.


 configure.in    |    5 ++++-
 src/Makefile.am |   10 ++++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)



commit 8c015d5b480ac81f0c5d3cf186b7c77e59f9f5f7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Mar 7 23:01:21 2002 +0000

    Acquire locks for front and back buffer in dfb_surface_destroy before sending
    the destroy message and destroying it.
    
    Removed now obsoleted Unlock from IDirectFBSurface's surface listener.
    
    Made dfb_surface_reallocate_buffer use free/malloc again,
    realloc is too slow and the data will be foo anyway.
    
    Added 'CapsLock + D' which destroys the window under the cursor,
    this is the force version of 'CapsLock + C' (close).


 core/surfaces.c            |    8 ++++++--
 core/windows.c             |   11 +++++++++++
 display/idirectfbsurface.c |    1 -
 3 files changed, 17 insertions(+), 3 deletions(-)



commit 238d307d8f5f59dd281346a429d89d5030135ba2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 5 20:21:12 2002 +0000

    Fixed CheckState, it was broken for unsupported drawing/blitting functions.
    Reenabled workaround for blitting.


 neo2200.c |   22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)



commit ea1b3af46739b2a4779591c95dec70b66164307f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Mar 5 19:50:52 2002 +0000

    Only check for libdl if shared libraries are enabled.
    Show shared/static in summary.
    Include "$LIBZ -lm" in libpng check.


 configure.in |   12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)



commit 813eb86e1c8102b5df8d3462e07f9cf843bcac9a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 4 20:03:35 2002 +0000

    Check for empty region before calling update_region.
    Empty region check at beginning of recursive update_region is a DFB_ASSERT now.


 windows.c |   32 +++++++++++++++++++++-----------
 1 file changed, 21 insertions(+), 11 deletions(-)



commit ab8bee4afc46df015c7630119c6265cf41fb73bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Mar 4 19:37:56 2002 +0000

    Added union parsing (treated like structs).


 gendoc.pl |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit de5f5b443311a84c66dba6d12c6373c89d1ab502
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Mar 3 05:51:31 2002 +0000

    Wrote SonyPI Jogdial driver. Sony users with a Jogdial can now use their
    jogdial as a wheel (Z axis) and middle mouse button.


 configure.in                    |   13 +-
 inputdrivers/Makefile.am        |    7 +
 inputdrivers/sonypi/.cvsignore  |    6 
 inputdrivers/sonypi/Makefile.am |   19 +++
 inputdrivers/sonypi/sonypi.c    |  252 ++++++++++++++++++++++++++++++++++++++++
 5 files changed, 295 insertions(+), 2 deletions(-)



commit f3d93fe8b7b87eccc1b3222c108dbb625792352b
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Feb 25 21:08:02 2002 +0000

    removed aty128fb patch (it is included in 2.4.18)


 /dev/null                                    |binary
 b/patches/Makefile.am                        |    2 --
 patches/README.aty128fb-2.4.16_to_benh.patch |   20 --------------------
 3 files changed, 22 deletions(-)



commit 0aba6c295d2faf2474516edef7d7dc8893050893
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Feb 25 14:53:09 2002 +0000

    fixes for autoconf-2.5


 configure.in |    6 ------
 1 file changed, 6 deletions(-)



commit 5f4705cc3f8a694818d79e2162612e9c00981663
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 25 04:21:28 2002 +0000

    Don't catch SIGPIPE.


 sig.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 6acb7723863d829a686dba39d0472127217e4849
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Feb 24 20:24:54 2002 +0000

    Added IDirectFBWindow::PutAtop and IDirectFBWindow::PutBelow
    that can be used to restack a window relative to another one.
    
    Added DFB_ASSERT which prints an error message and causes a
    SIGTRAP if debug is enabled during configure.
    
    Cleaned up window restacking code in core. Reduced code size.
    
    Version is 0.9.10 now.


 configure.in                  |    2 
 include/directfb.h            |   40 ++-
 src/core/coredefs.h           |   30 +-
 src/core/layers.c             |   45 ++--
 src/core/windows.c            |  455 +++++++++++++++++++++++++++---------------
 src/core/windows.h            |   78 +++++--
 src/directfb.c                |    2 
 src/windows/idirectfbwindow.c |   84 ++++++-
 8 files changed, 504 insertions(+), 232 deletions(-)



commit 4e631d9ad716af9ee7e9b8d1cd86876110af4d6b
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Feb 20 14:41:15 2002 +0000

    only build neomagic driver on i386 platforms. (let me know if there is a neomagic chip in a non-i386 system somewhere on this planet)


 configure.in           |   13 +++++++++----
 gfxdrivers/Makefile.am |    8 +++++++-
 2 files changed, 16 insertions(+), 5 deletions(-)



commit 74560c1e302af2834c7e9b1db782ad3ee14c6d80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 20 14:39:45 2002 +0000

    Updated for 0.9.9.


 ChangeLog | 1301 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   44 ++
 2 files changed, 1345 insertions(+)



commit a82b9e767a524b540c5d5cd0c4b44bcd547d8682
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Feb 19 20:03:20 2002 +0000

    some updates, could need more


 README |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 8ed8ab12720ba2386d933874ca551a04ada8d108
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 19 18:05:32 2002 +0000

    And here the complete log entry:
    
    Applied patch from Enno Brehm <enno@convergence.de> that adds dlopen'ing
    of the main library with RTLD_GLOBAL.


 core.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 9d281a92ba7996a62ba63a9d2ffc738aa28d92e1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 19 18:03:33 2002 +0000

    main library with RTLD_GLOBAL.


 core.c |    2 --
 1 file changed, 2 deletions(-)



commit c344d81d0984a7ff184647a49f5e9b1905ef7805
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Feb 19 18:02:36 2002 +0000

    *** empty log message ***


 README               |    1 +
 configure.in         |    2 ++
 src/core/Makefile.am |    3 ++-
 src/core/core.c      |   22 +++++++++++++++++++++-
 4 files changed, 26 insertions(+), 2 deletions(-)



commit 77195a08ba0bb862cc8f9e59f42873b7f0486ef0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 18 22:03:56 2002 +0000

    Reset display layer ID pool so the primary layer gets '0' even after
    reinitialization of DirectFB.


 layers.c |    3 +++
 1 file changed, 3 insertions(+)



commit 72f1700276272f12d68b16c0eda9a16cc10b3b51
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 18 21:24:51 2002 +0000

    Forgot to add the new event class to two switches.


 idirectfbinputbuffer.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 7cf85726e390e90cc99bd54cfcde218722e76987
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 18 21:10:00 2002 +0000

    Forgot to assign function pointer.


 idirectfbinputbuffer.c |    1 +
 1 file changed, 1 insertion(+)



commit d8c8ce289ce8d9d89227eb24cf1fe2b551611043
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 18 21:00:50 2002 +0000

    Added new event class DFEC_USER and a struct DFBUserEvent containing an
    unsigned integer and a pointer.
    Added IDirectFBEventBuffer::PostEvent which can be used for any event class.


 include/directfb.h               |   35 ++++++++++++++++++++++++++++++++---
 src/input/idirectfbinputbuffer.c |   39 +++++++++++++++++++++++++++++----------
 2 files changed, 61 insertions(+), 13 deletions(-)



commit ff6888be29a9f1306132d30e09ba2d8bd718fa2a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 18 14:15:20 2002 +0000

    Allow IDirectFB::CreateEventBuffer with DICAPS_NONE.


 include/directfb.h |    6 ++++--
 src/idirectfb.c    |   11 +++--------
 2 files changed, 7 insertions(+), 10 deletions(-)



commit f6dae7cfc0bee23c4e819d44c68c99bf60fa65d0
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Feb 15 13:35:24 2002 +0000

    Even more keycodes for yet another remote control.


 directfb.h |   19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)



commit 859c8b1f00a9ccb5dd605abdda844c2811b5bab9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 15 12:23:49 2002 +0000

    Added NeoMagic YUV Overlay support ;)
    
    Added simple YUY2 -> YUY2 blitting for NeoMagic.


 Makefile.am   |    1 
 neo2200.c     |   78 ++++++------
 neo_overlay.c |  367 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 neomagic.c    |    2 
 neomagic.h    |   38 ++++++
 5 files changed, 448 insertions(+), 38 deletions(-)



commit 994fc80e1f041fff6cd48f5ea8370086896b7335
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 14 16:38:25 2002 +0000

    More code beautification, more code documentation.
    Simplified some parts.
    Fixed setting primary layer's configuration that I broke last night.


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |    2 
 src/core/core.c                                                |  141 ++--
 src/core/core.h                                                |   92 ++
 src/core/coredefs.h                                            |   62 +-
 src/core/coretypes.h                                           |    2 
 src/core/fbdev.c                                               |    1 
 src/core/fusion/shmalloc/mstats.c                              |   17 
 src/core/fusion/shmalloc/shcalloc.c                            |    8 
 src/core/fusion/shmalloc/shfree.c                              |  309 ++++------
 src/core/fusion/shmalloc/shmalloc_internal.h                   |  110 +--
 src/core/fusion/shmalloc/shmemalign.c                          |   64 +-
 src/core/fusion/shmalloc/shrealloc.c                           |  187 ++----
 src/core/fusion/shmalloc/shvalloc.c                            |    6 
 src/core/layers.c                                              |    4 
 14 files changed, 519 insertions(+), 486 deletions(-)



commit 16a2cc9ec8e2d04652a2bf40924f1e6976264fda
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 14 03:32:49 2002 +0000

    Shrink SetConfiguration to 3 lines here, too.


 ati128_overlay.c |   66 +------------------------------------------------------
 1 file changed, 2 insertions(+), 64 deletions(-)



commit d9cfb0964c36175df2fc8b8d549817d83b297c90
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 14 03:27:16 2002 +0000

    Added dfb_layer_set_configuration to simplify the driver's SetConfiguration.
    Beautified code a bit. Removed all shfree/shmalloc hacks (use shrealloc now).


 gfxdrivers/matrox/matrox_bes.c       |   71 ---------
 src/core/fbdev.c                     |   76 +++-------
 src/core/fusion/shmalloc.h           |    7 
 src/core/layers.c                    |  250 +++++++++++++++++++++++++----------
 src/core/layers.h                    |   64 ++++++--
 src/core/surfaces.c                  |    8 -
 src/core/windows.c                   |   43 +-----
 src/directfb.c                       |    6 
 src/display/idirectfbdisplaylayer.c  |    2 
 src/display/idirectfbsurface_layer.c |    4 
 src/idirectfb.c                      |    2 
 11 files changed, 280 insertions(+), 253 deletions(-)



commit d3697ac25d28f660059d96a1218f3e4fc5dffcf2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Feb 14 00:07:56 2002 +0000

    Grey pad keys get through now even if NumLock is off (div, mul, etc.)


 keyboard.c |   94 +++++++++++++++++++++++++++++++------------------------------
 1 file changed, 48 insertions(+), 46 deletions(-)



commit 2a20c3ba5357725d61d8c88ab208458900f3592d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 13 16:42:46 2002 +0000

    Made 'no-sighandler' and 'no-deinit-check' overrideable
    via 'sighandler' and 'deinit-check'.


 conf.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit 95d830a62bcdd9e9e5e5f678240879fcc8dca1e7
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Feb 8 17:06:39 2002 +0000

    Removed special keycodes for the IPAQ and added some generic new ones.
    Remapped IPAQ keys.


 include/directfb.h               |   10 +++++-----
 inputdrivers/keyboard/keyboard.c |   12 ++++++------
 2 files changed, 11 insertions(+), 11 deletions(-)



commit d20df7e0c76e233a2572e59390620365231a78a4
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Feb 6 11:18:30 2002 +0000

    (IDirectFBSurface_TileBlit): fixed tiled blitting for subsurfaces.


 idirectfbsurface.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit bd19c56d83147f800999f427888539d6733d7c1b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Feb 6 06:20:53 2002 +0000

    Call graphics driver deinit in signal handler again.
    So overlays shouldn't stay visible after segfaulting now.


 core.c    |   42 ++++++++++--------------------------------
 gfxcard.c |   16 +++++++++++++++-
 vt.c      |   17 ++++++++++-------
 3 files changed, 35 insertions(+), 40 deletions(-)



commit aaa7273542a2f7969353ed9defc229e0a8b30098
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 4 13:54:21 2002 +0000

    Wait for idle accelerator if software wants to write into a surface that
    has been read by hardware (read access by hardware may not be completed).


 surfaces.c |   21 ++++++++++++++-------
 surfaces.h |   12 +++++++-----
 2 files changed, 21 insertions(+), 12 deletions(-)



commit f420a5d20d1e85c139a89cdff35f2de913c30257
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Feb 4 11:51:31 2002 +0000

    Removed directfb-avifile.pc and directfb-swf.pc from EXTRA_DIST.


 Makefile.am |    2 --
 1 file changed, 2 deletions(-)



commit c38be4a889f7b7c2ac16e2bbf3c68b64323644b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Feb 4 11:45:24 2002 +0000

    Applied patch from Till Adam <till@adam-lilienthal.de>.
    - Adds DFBInputDeviceLockState (DILS_SCROLL, DILS_NUM, DILS_CAPS)
    - Adds IDirectFBInputDevice::GetLockState()
    - Adds locks to input and window events
    - Keyboard driver handles locks and LEDs


 include/directfb.h               |   37 +++++++++++--
 inputdrivers/keyboard/keyboard.c |   64 ++++++++++++++++++++---
 src/core/input.h                 |    2 
 src/core/windows.c               |    1 
 src/input/idirectfbinputdevice.c |  108 +++++++++++++++++++++++++--------------
 5 files changed, 164 insertions(+), 48 deletions(-)



commit ebcbe8bee66d872b3e13c2ee535a4c50426ea1eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Feb 2 00:57:28 2002 +0000

    Check pixelformat in CreateSurface.


 idirectfb.c |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit 5b0bc27342e51e4f447c8d6e663e818906238961
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Feb 1 03:00:00 2002 +0000

    Fixed segfaults in reinitialization.


 gfxcard.c |   14 ++++++--------
 input.c   |    5 +----
 2 files changed, 7 insertions(+), 12 deletions(-)



commit c8ba6ba67d32902ae32022ff616f877a8ae108ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 31 15:43:56 2002 +0000

    Removed shmalloc debug printf.


 shmalloc.c |    2 --
 1 file changed, 2 deletions(-)



commit e71d89c1712d75d009bed54a9893825fbdab729c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 31 15:38:58 2002 +0000

    "ref_*" -> "fusion_ref_*" and code beautifications.


 arena.c    |  275 ++++++++++++-------------
 fusion.c   |  321 ++++++++++++++----------------
 list.c     |   22 +-
 lock.c     |   99 ++++-----
 reactor.c  |  650 +++++++++++++++++++++++++++++--------------------------------
 ref.c      |  434 +++++++++++++++++++---------------------
 ref.h      |   84 +++----
 shmalloc.h |    2 
 util.c     |  178 +++++++---------
 9 files changed, 986 insertions(+), 1079 deletions(-)



commit f31fce3221e4c2562a9824972c304f9d311137ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 29 17:08:06 2002 +0000

    Should have fixed DirectFBCreate after last IDirectFB::Release.


 include/directfb_internals.h |    2 ++
 src/directfb.c               |    2 +-
 src/idirectfb.c              |    2 ++
 3 files changed, 5 insertions(+), 1 deletion(-)



commit d2168e782a2735b4f983450f59921c36870e0fee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 29 16:58:53 2002 +0000

    Only include shmalloc sub library when building the multi app version.
    Thanks to Till.


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 0c0299c88efad433a34a50ed3eb5024df33b8365
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 29 15:41:19 2002 +0000

    Completely rewritten shmalloc stuff based on libc5's GNU malloc.
    It now uses tmpfs (former shmfs) that needs to be mounted at /dev/shm:
    
    mount shm /dev/shm -tshm
    
    
    It uses open/mmap and ftruncate/mremap similar to brk ;)


 b/README                                       |    9 
 b/configure.in                                 |    3 
 b/src/core/fbdev.c                             |   44 +-
 b/src/core/fusion/Makefile.am                  |    7 
 b/src/core/fusion/fusion.c                     |   10 
 b/src/core/fusion/fusion_internal.h            |    2 
 b/src/core/fusion/reactor.c                    |    4 
 b/src/core/fusion/shmalloc.h                   |   63 +++
 b/src/core/fusion/shmalloc/.cvsignore          |    6 
 b/src/core/fusion/shmalloc/Makefile.am         |   26 +
 b/src/core/fusion/shmalloc/TODO                |   20 +
 b/src/core/fusion/shmalloc/mstats.c            |   60 +++
 b/src/core/fusion/shmalloc/shbrk.c             |  139 ++++++++
 b/src/core/fusion/shmalloc/shcalloc.c          |   57 +++
 b/src/core/fusion/shmalloc/shfree.c            |  227 +++++++++++++
 b/src/core/fusion/shmalloc/shmalloc.c          |  318 +++++++++++++++++++
 b/src/core/fusion/shmalloc/shmalloc_internal.h |  175 ++++++++++
 b/src/core/fusion/shmalloc/shmemalign.c        |   78 ++++
 b/src/core/fusion/shmalloc/shrealloc.c         |  161 +++++++++
 b/src/core/fusion/shmalloc/shvalloc.c          |   58 +++
 b/src/core/gfxcard.c                           |    6 
 b/src/core/input.c                             |    2 
 b/src/core/surfacemanager.c                    |    6 
 b/src/core/surfaces.c                          |   18 -
 b/src/core/windows.c                           |   12 
 src/core/fusion/shmalloc.c                     |  411 -------------------------
 26 files changed, 1451 insertions(+), 471 deletions(-)



commit e3f65da9a85fc83b26326dabbfd875fbc96b4e6d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 28 14:49:23 2002 +0000

    Builds with newest version libmpeg3 (1.5).


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d1c250b20a520584c702f3e4c045577cb88d0f1f
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Jan 27 20:20:58 2002 +0000

    changed some comments to be (hopefully) more helpful


 directfb.h |   10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)



commit 86b8ed3b2619e7f0c5ece68ef945c4fbf029308a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 27 16:31:40 2002 +0000

    IPAQ button support by Ara Hacopian <ahacop@anthrotronix.com>.


 README                           |    1 +
 include/directfb.h               |    5 ++++-
 inputdrivers/keyboard/keyboard.c |   14 ++++++++++++++
 3 files changed, 19 insertions(+), 1 deletion(-)



commit b3ce1854b1d69d599f2563200d3bd94bb71c34ac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 25 00:38:59 2002 +0000

    neofb 0.3.1 is now in 2.5.3-pre4 ;)


 /dev/null             |binary
 b/patches/Makefile.am |    3 +--
 2 files changed, 1 insertion(+), 2 deletions(-)



commit afb5651e6136047bc5d1187c8c010064b3f2c0f1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 24 23:03:35 2002 +0000

    two variables removed


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fa92dcbd3113f5459c9f7de31183ff0567416c5b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 24 21:15:03 2002 +0000

    directfb-avifile linking hack is no longer needed due to recent changes
    in module loading.


 b/.cvsignore           |    2 --
 b/Makefile.am          |    8 --------
 b/configure.in         |    2 --
 directfb-avifile.pc.in |    5 -----
 directfb-swf.pc.in     |   11 -----------
 5 files changed, 28 deletions(-)



commit d03c0c2036aba94b2a6d0cd0190121c2e0a9f370
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jan 24 19:20:56 2002 +0000

    use waitidle again on ppc


 mmio.h |    2 --
 1 file changed, 2 deletions(-)



commit bbbed9482ec086f8c6364a806c9cd297384cae2d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 23 16:09:11 2002 +0000

    New version, nothing important, just added module license (GPL of course).


 /dev/null                                         |binary
 b/patches/Makefile.am                             |    3 ++-
 b/patches/README.neofb                            |    8 +++++---
 b/patches/neofb-0.3.1-linux-2.4.18-pre6.patch.bz2 |binary
 b/patches/neofb-0.3.1-linux-2.5.3-pre3.patch.bz2  |binary
 5 files changed, 7 insertions(+), 4 deletions(-)



commit 8a4df58565253899be4fafe3e8a42d9bf4ae5c7d
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jan 23 15:49:16 2002 +0000

    oops, forgot to remove a debugging printf


 conf.c |    1 -
 1 file changed, 1 deletion(-)



commit 5d18107c984d9ce0195b826ad1f719620ae0bb08
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jan 23 15:08:38 2002 +0000

    Changed DirectFB command-line parsing:
    The only recognized options are --dfb-help and --dfb: follow by a
    comma-separated list of DirectFB options. The format of the options
    is the same as used in the directfbrc file.


 acconfig.h      |    3 +
 configure.in    |    2 +
 src/misc/conf.c |  106 ++++++++++++++++++++++++++++++++------------------------
 3 files changed, 66 insertions(+), 45 deletions(-)



commit 676c3031ae325eb07eb57bbcfb0f272aa570ddac
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 22 15:42:09 2002 +0000

    Set $PREFIX only if it's unset.
    Take care of preset $CFLAGS.
    Use $PREFIX consequently.


 dfb_static_build_example |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit 26f7835acdc8de0395041ef5b97bbdad130a4b82
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 22 14:48:19 2002 +0000

    Applied patch from Daniel Mack <daniel@convergence.de>.
    The environment variable "FRAMEBUFFER" is used now if set.


 README           |    1 +
 src/core/fbdev.c |    9 +++++++++
 2 files changed, 10 insertions(+)



commit 0fad3330f0fb3778e8fccf909fbfdc05395438e5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 22 14:44:42 2002 +0000

    Applied patch from Topi Kanerva <topi.kanerva@eke.fi>.
    Under certain circumstances rectangles didn't get filled or drawn.


 README                     |    2 ++
 gfxdrivers/ati128/ati128.c |    8 ++++++--
 2 files changed, 8 insertions(+), 2 deletions(-)



commit b5cc5f5529ad1d0e61f8ffcb4e07251b3918786b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 22 09:22:57 2002 +0000

    Build libmpeg3 provider using gcc, ld did not include our constructor.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8085daf92b9bb080b292c99683ff5666486e414b
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 21 16:59:15 2002 +0000

    Try to access files before creating a video or font provider for them.


 idirectfb.c |   19 ++++++++++++-------
 1 file changed, 12 insertions(+), 7 deletions(-)



commit 5bf2651c13f1153908af552f6c8658e95180b401
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 21 15:25:25 2002 +0000

    No need for stdio.


 raw15toraw24.c |   12 ++++++------
 raw16toraw24.c |   12 ++++++------
 raw32toraw24.c |   14 +++++++-------
 3 files changed, 19 insertions(+), 19 deletions(-)



commit c7f8af380f1f71e9093735e4cc9c0ed2b649f7ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 21 14:36:51 2002 +0000

    Replaced all "sprintf" calls with "snprintf" calls.


 gfxdrivers/ati128/ati128_overlay.c                             |    3 ++-
 gfxdrivers/matrox/matrox_bes.c                                 |    3 ++-
 inputdrivers/joystick/joystick.c                               |   10 +++++-----
 inputdrivers/keyboard/keyboard.c                               |    4 ++--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |    2 +-
 src/core/core.c                                                |    5 +++--
 src/core/fbdev.c                                               |    3 ++-
 src/core/gfxcard.h                                             |    2 +-
 src/core/layers.h                                              |    5 ++++-
 src/core/vt.c                                                  |    4 ++--
 10 files changed, 24 insertions(+), 17 deletions(-)



commit d04c25e331cfb739dbdfb2d44168acb82e458a8c
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 21 12:11:02 2002 +0000

    Don't parse --help out of the command-line arguments in order to allow
    applications to provide more useful help here.
    
    Added new function DirectFBUsageString() which returns a string
    describing the DirectFB command-line options.
    
    Output DirectFB usage information and quit if --dfb-help command-line
    option is given.


 include/directfb.h        |    7 +
 src/directfb.c            |    6 +
 src/gfx/generic/generic.c |    1 
 src/misc/conf.c           |  163 +++++++++++++++++++++++-----------------------
 src/misc/conf.h           |    2 
 5 files changed, 97 insertions(+), 82 deletions(-)



commit 25c48c57661939df874fe9be445803e755a48099
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 21 10:25:06 2002 +0000

    Added "static class Foo { public: Foo() {} } foo;" to have our C constructors
    included in the library.


 idirectfbvideoprovider_avifile.cpp |    5 +++++
 1 file changed, 5 insertions(+)



commit b88c31d769fecc96453d7af47138d9b69c21810b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 20 22:08:36 2002 +0000

    fixed segfault


 interface.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 63bff4ecb4e0311e6e9760746d896606ad520084
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 18 13:08:09 2002 +0000

    Fixed initial DWET_POSITION_SIZE event.


 idirectfbwindow.c |   35 ++++++++++++++++++++++++++++++-----
 1 file changed, 30 insertions(+), 5 deletions(-)



commit db8305f0dbac1d3742bba83456a00545ee5a2f35
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 17 14:46:02 2002 +0000

    Added static linking support. Minor changes to driver and interface modules.
    
    An example of how to link static applications with choosable drivers and
    interfaces is the script 'dfb_static_build_example'.


 configure.in                                                         |    2 
 gfxdrivers/ati128/Makefile.am                                        |    2 
 gfxdrivers/ati128/ati128.c                                           |   29 -
 gfxdrivers/ati128/ati128.h                                           |    3 
 gfxdrivers/ati128/ati128_overlay.c                                   |    3 
 gfxdrivers/matrox/Makefile.am                                        |    1 
 gfxdrivers/matrox/matrox.c                                           |   30 -
 gfxdrivers/matrox/matrox.h                                           |    2 
 gfxdrivers/matrox/matrox_bes.c                                       |   53 +-
 gfxdrivers/neomagic/Makefile.am                                      |    2 
 gfxdrivers/neomagic/neomagic.c                                       |   24 -
 gfxdrivers/nvidia/Makefile.am                                        |    2 
 gfxdrivers/nvidia/nvidia.c                                           |   27 -
 gfxdrivers/tdfx/Makefile.am                                          |    2 
 gfxdrivers/tdfx/tdfx.c                                               |   25 -
 include/directfb_internals.h                                         |   27 -
 inputdrivers/dbox2remote/Makefile.am                                 |    2 
 inputdrivers/dbox2remote/dbox2remote.c                               |   55 +-
 inputdrivers/h3600_ts/Makefile.am                                    |    2 
 inputdrivers/h3600_ts/h3600_ts.c                                     |   14 
 inputdrivers/joystick/Makefile.am                                    |    2 
 inputdrivers/joystick/joystick.c                                     |   14 
 inputdrivers/keyboard/Makefile.am                                    |    2 
 inputdrivers/keyboard/keyboard.c                                     |   28 -
 inputdrivers/lirc/Makefile.am                                        |    2 
 inputdrivers/lirc/lirc.c                                             |   24 -
 inputdrivers/ps2mouse/Makefile.am                                    |    2 
 inputdrivers/ps2mouse/ps2mouse.c                                     |   16 
 inputdrivers/serialmouse/Makefile.am                                 |    2 
 inputdrivers/serialmouse/serialmouse.c                               |   14 
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |   30 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |   29 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   71 +--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |   61 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   28 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   26 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   26 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   26 -
 src/Makefile.am                                                      |   20 
 src/core/Makefile.am                                                 |    2 
 src/core/core.c                                                      |    4 
 src/core/coredefs.h                                                  |    3 
 src/core/gfxcard.c                                                   |  183 +++----
 src/core/gfxcard.h                                                   |   30 +
 src/core/graphics_driver.h                                           |   83 +++
 src/core/input.c                                                     |  234 ++++------
 src/core/input.h                                                     |   12 
 src/core/input_driver.h                                              |   64 ++
 src/directfb.c                                                       |    2 
 src/display/idirectfbsurface.c                                       |   11 
 src/idirectfb.c                                                      |   41 -
 src/interface.c                                                      |  217 ++++-----
 src/interface_implementation.h                                       |   77 +++
 tools/dfb_static_build_example                                       |   72 +++
 tools/ipc_cleanup                                                    |    7 
 55 files changed, 1110 insertions(+), 662 deletions(-)



commit 4645addcf14f928958868fb9d99eb9cf8a0af21e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 16 15:11:48 2002 +0000

    updated EXTRA_DIST


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a13b94a52a9094a14afdebfcd2e980584333517a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 16 14:45:54 2002 +0000

    two more includes


 ati128/ati128_overlay.c |    4 ++++
 matrox/matrox_bes.c     |    4 ++++
 2 files changed, 8 insertions(+)



commit 312218cac8124dca58911ed5ddbe18e52abd63b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 16 14:42:43 2002 +0000

    Fixed stoned '.c' includes.


 ati128/ati128_overlay.c |    4 ++--
 matrox/matrox_bes.c     |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)



commit 5c2b06603590c8e422147e4e039235729cb033c2
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jan 15 21:33:48 2002 +0000

    Added new background mode DLBM_TILE that works similar to DLBM_IMAGE
    but tiles the background image instead of stretching it.
    Added new --bg-tile command line option.


 include/directfb.h                  |    4 +++-
 src/core/windows.c                  |   29 ++++++++++++++++++++++++++---
 src/directfb.c                      |   15 ++++++++++-----
 src/display/idirectfbdisplaylayer.c |    3 ++-
 src/misc/conf.c                     |   17 ++++++++++-------
 5 files changed, 51 insertions(+), 17 deletions(-)



commit c167d42d6413f9ebe217a205642827ea841ee16c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 15 18:08:35 2002 +0000

    Use CFLAGS again.


 Makefile.am             |    5 +++--
 core/Makefile.am        |    5 +++--
 core/fusion/Makefile.am |    5 +++--
 display/Makefile.am     |    5 +++--
 gfx/Makefile.am         |    5 +++--
 gfx/generic/Makefile.am |    6 +++---
 input/Makefile.am       |    5 +++--
 media/Makefile.am       |    5 +++--
 misc/Makefile.am        |    5 +++--
 windows/Makefile.am     |    5 +++--
 10 files changed, 30 insertions(+), 21 deletions(-)



commit 38cbc362c020d521dc4d5876cf1632585350c30f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 15 18:01:25 2002 +0000

    Makefile.am cleanup


 configure.in                |   12 ++++++------
 src/Makefile.am             |    6 ++----
 src/core/Makefile.am        |   20 +++++++++-----------
 src/core/fusion/Makefile.am |   18 +++++++-----------
 src/display/Makefile.am     |    7 ++-----
 src/gfx/Makefile.am         |    8 +++-----
 src/gfx/generic/Makefile.am |   10 ++++++----
 src/input/Makefile.am       |    7 ++-----
 src/media/Makefile.am       |    7 ++-----
 src/misc/Makefile.am        |    7 ++-----
 src/windows/Makefile.am     |    7 ++-----
 11 files changed, 43 insertions(+), 66 deletions(-)



commit 7445357899adae42314f46403224fd2855fafa56
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 14 14:09:28 2002 +0000

    Added IDirectFBSurface::TileBlit. Takes the same parameters like Blit
    but tiles the source to the whole destination surface. Set a clipping
    region if you want to tile only parts of the destination surface.


 include/directfb.h             |   18 ++++++++-
 src/core/gfxcard.c             |   65 +++++++++++++++++++++++++++++++-
 src/core/gfxcard.h             |    3 +
 src/display/idirectfbsurface.c |   81 +++++++++++++++++++++++++++++++++++++++++
 4 files changed, 163 insertions(+), 4 deletions(-)



commit 3c03ecbe552222e4562eb45519e42a0cb3bf3183
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 11:01:28 2002 +0000

    once again, id is a reserved keyword in objective c


 include/directfb.h               |   22 +++++++++++-----------
 src/core/input.c                 |    6 +++---
 src/core/windows.c               |    2 +-
 src/input/idirectfbinputbuffer.c |    2 +-
 4 files changed, 16 insertions(+), 16 deletions(-)



commit fc12bf5a427fbd6dc69efd88ff24ae76c543c95b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 09:49:35 2002 +0000

    include reactor.h


 windows.h |    1 +
 1 file changed, 1 insertion(+)



commit 39268e6d9758cf1a5cbbd45ba1e2bf0c5e00a646
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 09:42:32 2002 +0000

    Use another assembler source file for testing.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 006dd38e8df6bd9a13187f1a142e7a40543ae436
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 05:53:00 2002 +0000

    Do a normal shutdown in atexit handler, not just an emergency shutdown.


 core.c |   16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)



commit 7ef4b0ba3584adc4c85a61cd9316a8127af0aa88
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 05:10:17 2002 +0000

    Put device id into event structure in dfb_input_dispatch.


 input.c |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit f2239107da6c9e5b73dab270b18990140ad4f693
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 04:57:50 2002 +0000

    not needed anymore


 detect_MMX.s |   44 --------------------------------------------
 1 file changed, 44 deletions(-)



commit d4a75319394a248f2a2b9ce53266127c7e94bdf2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 14 04:57:00 2002 +0000

    Cleanup of interface functions, many functions have been made static.
    
    Removed intel_cpu_features by using the new dfb_mm_accel function.
    
    Added DFBDisplayLayerID, DFBWindowID and DFBInputDeviceID.
    
    Added GetID functions to IDirectFBDisplayLayer,
    IDirectFBWindow and IDirectFBInputDevice.
    
    IDirectFBInputBuffer is an IDirectFBEventBuffer now.
    It handles events from input devices and windows.
    
    Removed WaitForEvent, GetEvent and PeekEvent from IDirectFBWindow.
    Added CreateEventBuffer and AttachEventBuffer to IDirectFBWindow.
    
    DFBInputEvent and DFBWindowEvent contain the ID of the event source.
    
    Added DFBEventClass to determine the specific event, i.e. input/window.
    
    Added DFBEvent that is a union of DFBEventClass, DFBInputEvent and
    DFBWindowEvent. Each event structure has a DFBEventClass first.
    
    IDirectFBEventBuffer::GetEvent can be called with a DFBEvent pointer.
    If a buffer is only used for one specific event class, the macro
    DFB_EVENT(e) can be used to pass DFBInputEvent or DFBWindowEvent directly.


 include/directfb.h                    |  289 +++++++++++++++++++---------------
 include/directfb_internals.h          |    8 
 src/core/state.c                      |   10 -
 src/core/windows.c                    |   84 +++++++--
 src/core/windows.h                    |    6 
 src/directfb.c                        |    4 
 src/display/idirectfbdisplaylayer.c   |  154 +++++++++++-------
 src/display/idirectfbdisplaylayer.h   |    8 
 src/display/idirectfbsurface.c        |  208 ++++++++++++++----------
 src/display/idirectfbsurface.h        |    6 
 src/display/idirectfbsurface_layer.c  |   52 ++----
 src/display/idirectfbsurface_layer.h  |    7 
 src/display/idirectfbsurface_window.c |   63 +++----
 src/display/idirectfbsurface_window.h |    7 
 src/gfx/generic/Makefile.am           |    3 
 src/gfx/generic/generic.c             |    7 
 src/idirectfb.c                       |  161 +++++++++++-------
 src/idirectfb.h                       |   14 -
 src/input/idirectfbinputbuffer.c      |  231 +++++++++++++++++++--------
 src/input/idirectfbinputbuffer.h      |   16 +
 src/input/idirectfbinputdevice.c      |   40 +++-
 src/media/idirectfbfont.c             |   40 ++--
 src/windows/idirectfbwindow.c         |  217 +++++--------------------
 23 files changed, 889 insertions(+), 746 deletions(-)



commit 5d49fba86be7d4ec14d6bd3e9cc4b14164f3f615
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Jan 13 12:36:22 2002 +0000

    Removed useless stuff from directfb-avifile.pc.


 directfb-avifile.pc.in |    6 ------
 1 file changed, 6 deletions(-)



commit e40b6f5fa0ca003045ea43a4a810954b70752094
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jan 12 01:48:29 2002 +0000

    Added cpu detection code for MMX, 3DNOW, MMXEXT, SSE, SSE2 and ALTIVEC.
    
    Added fast memcpy routine 'dfb_memcpy' that uses MMX, MMXEXT or SSE.
    
    DICAPS_AXIS is now called DICAPS_AXES to have a plural
    as in DICAPS_BUTTONS or DICAPS_KEYS.
    
    Removed bogus flag DFXL_DRAWSTRING.
    
    Enabled dithering for Matrox cards, looks nice.


 acconfig.h                                                          |    3 
 configure.in                                                        |   31 
 gfxdrivers/matrox/matrox_state.c                                    |   10 
 gfxdrivers/tdfx/tdfx.c                                              |    3 
 include/directfb.h                                                  |   15 
 inputdrivers/h3600_ts/h3600_ts.c                                    |    2 
 inputdrivers/joystick/joystick.c                                    |   26 
 inputdrivers/ps2mouse/ps2mouse.c                                    |    2 
 inputdrivers/serialmouse/serialmouse.c                              |   22 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    7 
 src/core/core.c                                                     |    3 
 src/core/surfacemanager.c                                           |    9 
 src/display/idirectfbsurface_window.c                               |    8 
 src/gfx/convert.c                                                   |   10 
 src/gfx/convert.h                                                   |    4 
 src/gfx/generic/generic.c                                           |    9 
 src/misc/Makefile.am                                                |    4 
 src/misc/cpu_accel.c                                                |  214 ++++
 src/misc/cpu_accel.h                                                |   82 +
 src/misc/gfx_util.c                                                 |   30 
 src/misc/mem.h                                                      |   79 -
 src/misc/memcpy.c                                                   |  474 ++++++++++
 src/misc/memcpy.h                                                   |   47 
 23 files changed, 953 insertions(+), 141 deletions(-)



commit 5368bc9c43d9ada2ebf57711742d1c473650e130
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Jan 11 21:31:43 2002 +0000

    added note that the patch is obsolete since it was merged in 2.4.18-pre3


 README.aty128fb-2.4.16_to_benh.patch |    8 ++++++++
 1 file changed, 8 insertions(+)



commit 634b28be3fc75ff5fe4a2c0aed6e0d4a03bf7bb7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 10 23:29:27 2002 +0000

    As Hallvar pointed out, "G550" needed to be added to the device names, too.


 matrox.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 137d0e7d8c04851f026102ccc9a867619e324b40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 10 21:27:17 2002 +0000

    It's now possible to specify the pixelformat for a window on creation.
    For windows with an alphachannel only DSPF_ARGB is currently allowed.
    For opaque windows even DSPF_ARGB is allowed, but it won't get blended
    to the background. Instead the data will just be copied or converted
    so it can act like a root window on transparent layers.
    
    Optimized graphics card state changes during window stack updates.
    
    Added a comment to dbox2 remote driver.
    
    Added "G550" to matrox driver name.


 gfxdrivers/matrox/matrox.c             |    2 
 include/directfb.h                     |   44 +++++++-------
 inputdrivers/dbox2remote/dbox2remote.c |    1 
 src/core/layers.c                      |    3 -
 src/core/windows.c                     |   99 ++++++++++++++++++++-------------
 src/core/windows.h                     |    3 -
 src/display/idirectfbdisplaylayer.c    |   17 +++--
 src/idirectfb.c                        |   10 ++-
 8 files changed, 108 insertions(+), 71 deletions(-)



commit 0a4d533c844c1790bc8c648a93197aea0ef4210d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 10 15:36:57 2002 +0000

    All global DirectFB symbols have the prefix "dfb_" now.


 gfxdrivers/ati128/ati128.c                                           |   12 
 gfxdrivers/ati128/ati128_overlay.c                                   |   12 
 gfxdrivers/matrox/matrox.c                                           |   12 
 gfxdrivers/matrox/matrox_bes.c                                       |   10 
 gfxdrivers/neomagic/neomagic.c                                       |   16 
 gfxdrivers/nvidia/nvidia.c                                           |    6 
 gfxdrivers/tdfx/tdfx.c                                               |   10 
 inputdrivers/dbox2remote/dbox2remote.c                               |    4 
 inputdrivers/h3600_ts/h3600_ts.c                                     |    6 
 inputdrivers/joystick/joystick.c                                     |    2 
 inputdrivers/keyboard/keyboard.c                                     |   42 -
 inputdrivers/lirc/lirc.c                                             |    4 
 inputdrivers/ps2mouse/ps2mouse.c                                     |   12 
 inputdrivers/serialmouse/serialmouse.c                               |   18 
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |   22 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    8 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   10 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   18 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   20 
 src/core/core.c                                                      |  138 ++---
 src/core/core.h                                                      |   30 -
 src/core/fbdev.c                                                     |  238 ++++-----
 src/core/fbdev.h                                                     |   20 
 src/core/fonts.c                                                     |   34 -
 src/core/fonts.h                                                     |   14 
 src/core/gfxcard.c                                                   |  259 +++++-----
 src/core/gfxcard.h                                                   |   74 +-
 src/core/input.c                                                     |   28 -
 src/core/input.h                                                     |   26 -
 src/core/layers.c                                                    |  135 ++---
 src/core/layers.h                                                    |   34 -
 src/core/sig.c                                                       |   12 
 src/core/sig.h                                                       |    4 
 src/core/state.c                                                     |    8 
 src/core/state.h                                                     |   12 
 src/core/surfacemanager.c                                            |   78 +--
 src/core/surfacemanager.h                                            |   50 -
 src/core/surfaces.c                                                  |  162 +++---
 src/core/surfaces.h                                                  |   32 -
 src/core/vt.c                                                        |  128 ++--
 src/core/vt.h                                                        |   12 
 src/core/windows.c                                                   |  202 +++----
 src/core/windows.h                                                   |   50 -
 src/directfb.c                                                       |   34 -
 src/display/idirectfbdisplaylayer.c                                  |   24 
 src/display/idirectfbsurface.c                                       |   88 +--
 src/display/idirectfbsurface_layer.c                                 |   17 
 src/display/idirectfbsurface_window.c                                |   20 
 src/gfx/clip.c                                                       |   28 -
 src/gfx/clip.h                                                       |   16 
 src/gfx/convert.c                                                    |   23 
 src/gfx/generic/generic.c                                            |   22 
 src/gfx/util.c                                                       |   18 
 src/gfx/util.h                                                       |    6 
 src/idirectfb.c                                                      |   95 +--
 src/input/idirectfbinputbuffer.c                                     |    4 
 src/input/idirectfbinputdevice.c                                     |    6 
 src/media/idirectfbfont.c                                            |   14 
 src/misc/conf.c                                                      |   18 
 src/misc/conf.h                                                      |    6 
 src/misc/gfx_util.c                                                  |   18 
 src/misc/gfx_util.h                                                  |    8 
 src/misc/tree.c                                                      |   14 
 src/misc/tree.h                                                      |   18 
 src/misc/utf8.c                                                      |    4 
 src/misc/utf8.h                                                      |    6 
 src/misc/util.c                                                      |   28 -
 src/misc/util.h                                                      |   34 -
 src/windows/idirectfbwindow.c                                        |   36 -
 72 files changed, 1332 insertions(+), 1327 deletions(-)



commit c1a657e110d80f5e0200cabf58faf1a7eac3382d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 9 14:56:56 2002 +0000

    Use "-fomit-frame-pointer" only for src/gfx/generic.


 configure.in                |    4 +++-
 src/gfx/generic/Makefile.am |    4 ++--
 2 files changed, 5 insertions(+), 3 deletions(-)



commit aa4013553461f358884f029be0d305eb68a3600e
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jan 8 15:52:44 2002 +0000

    some code cleanup, no changes


 generic.c |   63 ++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 31 insertions(+), 32 deletions(-)



commit 1625338c3f98f903d58668dd24a43ea941b72d63
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jan 8 13:22:44 2002 +0000

    us a saturating blend when compositing A8 surfaces with colorizing on
    ARGB surfaces


 generic.c |   15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)



commit 2dcb3a47e0853d4608ce649305c6ce34442e53bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 7 17:31:19 2002 +0000

    Removed a totally dumb "static int" that got increased each OpenDevice
    and made the driver crash when OpenDevice gets called again after CloseDevice.
    
    Readded Suspend/Resume implementation.


 inputdrivers/ps2mouse/ps2mouse.c |   30 +++++++++----------------
 src/core/core.c                  |   46 +++++++++++++++++++++++++++++++++++++++
 src/core/core.h                  |    3 ++
 src/core/gfxcard.c               |   13 +++++++++++
 src/core/gfxcard.h               |    5 ++++
 src/core/input.c                 |   37 +++++++++++++++++++++++++++++++
 src/core/input.h                 |    5 ++++
 src/core/layers.c                |   35 +++++++++++++++++++++++++++++
 src/core/layers.h                |    5 ++++
 src/core/surfacemanager.c        |   31 ++++++++++++++++++++++++++
 src/core/surfacemanager.h        |    6 ++++-
 src/idirectfb.c                  |    4 +--
 12 files changed, 198 insertions(+), 22 deletions(-)



commit 1f7e447b5685179eb6ad2769db40db95be6940b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 7 14:23:18 2002 +0000

    Pass the filename to the Probe function of image providers.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |    2 
 src/idirectfb.c                                                 |   22 ++++++----
 4 files changed, 18 insertions(+), 10 deletions(-)



commit 79fda2f2f61b9ad85ef9c6ae67738e9c5230486f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jan 7 14:07:26 2002 +0000

    	* src/gfx/generic/generic.c (SET_ALPHA_PIXEL_ARGB): keep destination
    	alpha when blending A8 with color modulation onto ARGB surfaces.


 generic.c |   15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)



commit c36da321ca2becf95a8c232435792cb0a70f884e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jan 7 12:11:08 2002 +0000

    Added Hallvar Helleseth <hallvar@ii.uib.no> to Thanks To section.


 README |    1 +
 1 file changed, 1 insertion(+)



commit b7c8c648bfed5d6177425733171696e31dd12abd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 6 04:50:04 2002 +0000

    Added YV12 and I420 support.


 ati128.h         |    4 +
 ati128_overlay.c |  114 ++++++++++++++++++++++++++++-----------
 regs.h           |  159 +++++++++++++++++++++++++++++++++++++++----------------
 3 files changed, 200 insertions(+), 77 deletions(-)



commit 5433718aa2090c17f6cf2d21ceb18c4d464db5bd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jan 6 01:16:42 2002 +0000

    Added ATI Overlay support. Only YUY2 and UYVY yet.
    
    Fixed mmio in/out functions. We casted the base address to a non volatile
    pointer. That resulted in register polling loops that never returned.
    
    Maybe this fixes ATI idle waiting on PowerPC.


 ati128/Makefile.am      |   11 -
 ati128/ati128.c         |    5 
 ati128/ati128.h         |   20 ++
 ati128/ati128_overlay.c |  458 ++++++++++++++++++++++++++++++++++++++++++++++++
 ati128/mmio.h           |   32 +--
 ati128/regs.h           |   45 ++++
 matrox/mmio.h           |    8 
 7 files changed, 549 insertions(+), 30 deletions(-)



commit 7287bce94e2ca9fe59082b25c9c89ac1df4e7dd5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jan 4 23:33:08 2002 +0000

    Rewritten Libmpeg3 provider based on OpenQuicktime provider.
    Supports all RGB and YUV formats and does audio playback.


 idirectfbvideoprovider_libmpeg3.c | 1191 +++++++++++++++++++++++++++++---------
 1 file changed, 910 insertions(+), 281 deletions(-)



commit 3277e9417003432689ebb6e8b099078cc74d7a51
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 3 20:55:47 2002 +0000

    fixed minor bug introduced yesterday that made RGB15 unavailable


 surfaces.c |   20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)



commit a7c690c26829b09f1cab1ee1d477b87cf4a7b5c0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 3 18:58:31 2002 +0000

    Removed CON2FBMAP todo. Added some others.


 TODO |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)



commit 0331308cb94b8191409dfdae960a1c6cb3fb49ec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jan 3 18:45:36 2002 +0000

    added raw15toraw24


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit b29be5e7af24a06db0a560828b0e64841cc8e81c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 2 01:52:01 2002 +0000

    Fixed a width/pitch bug.


 matrox_bes.c |   19 ++++++++-----------
 1 file changed, 8 insertions(+), 11 deletions(-)



commit 297d50b2542e58977710c2f642333775d20b6308
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 2 01:26:38 2002 +0000

    Apply the plane multiplier to end result instead of height.


 surfacemanager.c |    2 +-
 surfaces.c       |    8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)



commit 5d30a0e1f408ab26d2ceadb3199c08744b8d138c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jan 2 00:38:34 2002 +0000

    Added "DFB_BYTES_PER_LINE(f,w)" which should be used instead of
    "DFB_BYTES_PER_PIXEL(f)*w", it adds support for formats with bytes
    per pixel not being a decimal, e.g. packed monochrome.
    
    Added support for planar pixel formats by adding more information
    to the pixel format constants with two new macros:
    "DFB_PLANAR_PIXELFORMAT(fmt)" and "DFB_PLANE_MULTIPLY(fmt,height)".
    More details in the header and in the generated documentation.
    
    Added DSPF_I420 and DSPF_YV12, two planar YUV formats.
    
    I420: 8 bit Y plane followed by 8 bit 2x2 subsampled U and V planes.
    YV12: 8 bit Y plane followed by 8 bit 2x2 subsampled V and U planes.
    
    
    Added I420 and YV12 support for Matrox BES.
    
    Enum entries in the generated documentation have the original order now.
    
    Increased version number, 0.9.8 and 0.9.9 are binary incompatible.


 configure.in                                                    |    2 
 gfxdrivers/matrox/matrox.c                                      |    6 
 gfxdrivers/matrox/matrox.h                                      |    6 
 gfxdrivers/matrox/matrox_bes.c                                  |   85 ++++++++--
 gfxdrivers/matrox/regs.h                                        |   26 +--
 include/directfb.h                                              |   55 ++++--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |    2 
 src/core/fbdev.c                                                |   12 -
 src/core/surfacemanager.c                                       |   16 -
 src/core/surfaces.c                                             |   18 +-
 src/gfx/generic/generic.c                                       |    8 
 src/idirectfb.c                                                 |    2 
 tools/gendoc.pl                                                 |   60 ++++---
 15 files changed, 206 insertions(+), 98 deletions(-)



commit 4abcac544a688c6d00b8fdb5eaf958927bd42a86
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 1 17:41:35 2002 +0000

    Only use the full color keying mask when in 8/16 bit mode.


 matrox_state.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit 6d36abd16a30e0f42bf68652047af600c545537f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 1 13:20:12 2002 +0000

    New framebuffer based debugging method.
    When compiled with debug enabled and started with "--fbdebug=<device>" graphical
    debugging output is done on this additional device. Currently only the surface
    manager uses this feature to show the video memory allocations for surfaces
    in a "defrag" like style.


 core/core.c           |    9 +
 core/surfacemanager.c |  195 ++++++++++++++++++++++++++++--
 misc/Makefile.am      |    2 
 misc/conf.c           |   14 ++
 misc/conf.h           |    3 
 misc/fbdebug.c        |  321 ++++++++++++++++++++++++++++++++++++++++++++++++++
 misc/fbdebug.h        |   62 +++++++++
 7 files changed, 591 insertions(+), 15 deletions(-)



commit bc529165f6b24afe8a1d4439721e4e23581d7018
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jan 1 13:08:47 2002 +0000

    Updated README


 b/patches/README.neofb                 |   30 ++++++++++++++++++++++++++++++
 patches/README.neofb-0.2.1-patch-2.4.6 |    2 --
 2 files changed, 30 insertions(+), 2 deletions(-)



commit 596362762803aa98d950d27e65de8e2b3c8de309
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Dec 31 11:19:28 2001 +0000

    forgot to add the file.


 raw15toraw24.c |   26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)



commit 671bb1c1dfca62c7db0d53d868f094c6765440b8
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 30 21:55:37 2001 +0000

    - do not rely on gcc to define __BIG_ENDIAN__ or __LITTLE_ENDIAN__
      include <endian.h> and check __BYTE_ORDER. This resolves problem on
      parisc, where gcc does not define __BIG_ENDIAN__
    - added raw15toraw24 tool for making screenshots


 README.screenshots                                             |    4 +++
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |    3 +-
 src/core/layers.c                                              |    4 ++-
 src/gfx/generic/generic.c                                      |   13 +++++-----
 tools/Makefile.am                                              |    4 +++
 tools/README                                                   |    6 ++--
 tools/raw16toraw24.c                                           |    9 +++---
 tools/raw32toraw24.c                                           |    9 +++---
 8 files changed, 31 insertions(+), 21 deletions(-)



commit 9c17cf6f2baf8cf064238e23db7873667b4f8681
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 27 17:24:33 2001 +0000

    New version of neofb, for Linux 2.4.17.
    
    Added console acceleration for NeoMagic 2200 and above.
    Added checking of maximum allowed dot clock.
    
    Changed accelerator IDs.


 /dev/null                                  |binary
 b/gfxdrivers/neomagic/neomagic.c           |   48 ++++++++++++++---------------
 b/patches/neofb-0.3-linux-2.4.17.patch.bz2 |binary
 3 files changed, 24 insertions(+), 24 deletions(-)



commit 3d638fe5dfcc6f5c5d12036e187cc40f2bb09b5e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 19 16:49:14 2001 +0000

    The macro PIXEL_RGB332 should always be defined.


 convert.h |    2 --
 1 file changed, 2 deletions(-)



commit 407634c694f4ea0d03c1b74c46f6e929c7d885ae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 19 01:34:08 2001 +0000

    Fixed color keying on older Matrox cards.
    
    Added RGB332 support for all Matrox cards,
    accelerated blended rectangles look very cool in 8bit.


 matrox.c       |   71 ++++++++++++++++++++++++++++++++++++++++-----------------
 matrox_state.c |   39 ++++++++++++++++++++++++++-----
 2 files changed, 84 insertions(+), 26 deletions(-)



commit e6e5222554e926ae9e82543caeb2da675ffe8e0d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 19 00:29:46 2001 +0000

    After setting the video mode check the virtual resolution (matroxfb does not
    return an error but decreases the virtual resolution). Return an error if
    the virtual resolution does not match the requested one. Fixes segfault of
    double buffered fullscreen applications in high resolutions on older cards.
    
    Print a more descriptive error message if setting the desktop buffer mode
    failed. Not only missing virtual resolution support but also insufficient
    graphics memory can cause it. Also try a fallback to system memory back
    buffer mode.


 core/fbdev.c |    7 +++++--
 directfb.c   |   12 ++++++++++--
 2 files changed, 15 insertions(+), 4 deletions(-)



commit 6ed0d0264cdd802d4be44362dee6b20d73c3cd9f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 18 19:26:28 2001 +0000

    It's now possible to start single buffered applications with "--force-windowed".
    The implicitly created window is now centered on the screen.


 display/idirectfbsurface_window.c |   40 ++++++++++++++++++++++++++++++++++++++
 idirectfb.c                       |   32 +++++++++++++++++++-----------
 windows/idirectfbwindow.c         |    5 ++--
 3 files changed, 63 insertions(+), 14 deletions(-)



commit b6a7fc1f25c59768aa9627e249d52066ac2abe91
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 18 17:59:38 2001 +0000

    The VT is now mapped to the specified framebuffer device.
    Thanks to Jiri Svoboda <Jiri.Svoboda@seznam.cz>.


 README        |    1 
 src/core/vt.c |  106 +++++++++++++++++++++++++++++++++++++++++++++++++++-------
 src/core/vt.h |    2 +
 3 files changed, 98 insertions(+), 11 deletions(-)



commit 253868a29ae613197a932b0e68f66f6eef9a33b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 18 12:55:51 2001 +0000

    Moved all clipping functions to "src/gfx/clip.[ch]". Outlined 'sort_triangle'.
    
    Fixed bug when all four edges of a rectangle are outside the clip.
    Filled rectangles got discarded instead of filled.


 core/gfxcard.c  |    3 
 gfx/Makefile.am |    2 
 gfx/clip.c      |  229 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 gfx/clip.h      |   43 ++++++++++
 gfx/util.c      |   36 ++++++++
 gfx/util.h      |   35 --------
 misc/gfx_util.c |  199 ------------------------------------------------
 misc/gfx_util.h |   13 ---
 8 files changed, 313 insertions(+), 247 deletions(-)



commit 3c8c8b172c740aaa2e3787fe3d15d2b07f5676ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 18 12:03:31 2001 +0000

    fuction table cleanup


 generic.c |   96 ++++++++++++++++++++++++++++++++++----------------------------
 1 file changed, 53 insertions(+), 43 deletions(-)



commit 01a115c55600f232e1aa0228512889f93ba49ba3
Author: holger <holger>
Date:   Tue Dec 18 10:25:58 2001 +0000

    dummy initialisation for IBM notebooks


 ps2mouse.c |    1 +
 1 file changed, 1 insertion(+)



commit e7a50014685ae01e5ace16045e133aa3bbe75dfb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 17 13:32:18 2001 +0000

    Applied patch from "W. Michael Petullo" <mike@flyn.org> that adds support
    for new-style device names '/dev/input/js*'.


 README                           |    1 +
 inputdrivers/joystick/joystick.c |   30 ++++++++++++++++++++++++++----
 2 files changed, 27 insertions(+), 4 deletions(-)



commit 340ceff6731f94979635e8c7836ff2c10a53b843
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 17 10:57:38 2001 +0000

    New option "--disable-window-opacity" which forces window opacity to be 0 or 255


 core/windows.c |    3 +++
 misc/conf.c    |    5 +++++
 misc/conf.h    |    2 ++
 3 files changed, 10 insertions(+)



commit 8f547c9db36b1c36f22d159639f83d70c07b51d8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 17 09:29:30 2001 +0000

    Added option "--[no-]cursor" to enable/disable showing the default cursor
    on startup. Default is to show the cursor.


 directfb.c  |    3 ++-
 misc/conf.c |   17 +++++++++++++----
 misc/conf.h |    2 ++
 3 files changed, 17 insertions(+), 5 deletions(-)



commit 6ef5998065df1df3cdf55c898d197326672ab5ba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 16 11:16:49 2001 +0000

    Forgot to remove that preallocated surface memory thing.


 TODO |    2 --
 1 file changed, 2 deletions(-)



commit 238259a439ad306865d0b016630e33be2e6f2d76
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 16 11:13:47 2001 +0000

    'IDirectFB::CreateSurface' can now be used to create surfaces using a
    preallocated system memory buffer. Apps have to set 'DSDESC_PREALLOCATED'
    and the appropriate fields in the surface description. The buffer won't be
    freed if the surface gets destructed.
    The application has to use the 'Lock' method even to access the system
    memory buffer. Otherwise data coherency between system and video memory
    isn't guaranteed.


 include/directfb.h  |   21 +++++++--
 src/core/gfxcard.h  |    2 
 src/core/surfaces.c |  112 +++++++++++++++++++++++++++++++++++++++++++++-------
 src/core/surfaces.h |   39 +++++++++++++-----
 src/idirectfb.c     |   41 +++++++++++++++++--
 5 files changed, 181 insertions(+), 34 deletions(-)



commit e83d5a7a943b8a0c37ef379ecee22d8fe913f35c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 16 10:23:01 2001 +0000

    Optimized usage of texture cache flushs and engine syncs,
    e.g. gfxcard_sync only gets called if the surface buffer that
    is to be accessed by software had been written to before by hardware.


 fonts.c    |    3 +++
 gfxcard.h  |    2 +-
 surfaces.c |   43 +++++++++++++++++++++++++++++++++----------
 surfaces.h |   29 +++++++++++++++++++----------
 4 files changed, 56 insertions(+), 21 deletions(-)



commit 3f9c79f7dfa071cd9b3d51a8753c3bf1c3f0f1b9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 16 07:13:54 2001 +0000

    Runs with Linux 2.2.x or higher. Linux 2.4.x is not required.


 README |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d3c65cb0fde972883b062e8f80a5e1174ab7a567
Author: holger <holger>
Date:   Fri Dec 14 19:04:27 2001 +0000

    changed keycode: DIKC_ESCAPE->DIKC_VENDOR


 dbox2remote.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 364e4b04c1eccae08ab0baf5c27da1e54011c495
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 14 13:15:00 2001 +0000

    Removed swapping of left and right mouse button (done).


 TODO |    2 --
 1 file changed, 2 deletions(-)



commit 6b19ae09726d54afcd6cad7cb0dd58f751a1f00b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 14 11:18:57 2001 +0000

    #if 0'ed the unused config_cleanup function as the config should go away
    if the app is completely terminated. In that case the memory is freed anyway.


 conf.c |    7 +++++++
 1 file changed, 7 insertions(+)



commit 091dd4c8ff1403d33c7b2e0316db32e75e89c92a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 14 10:55:49 2001 +0000

    Added new option "--lefty" that enables swapping of left and right button.


 core/input.c |   18 +++++++++++++++++-
 core/input.h |    2 +-
 misc/conf.c  |    5 +++++
 misc/conf.h  |    3 +++
 4 files changed, 26 insertions(+), 2 deletions(-)



commit 0bf7b607154f64f618d847fe6d6c9eda6e6d9656
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 14 09:17:21 2001 +0000

    Added some TODOs. We should really use this file ;)


 TODO |    7 +++++++
 1 file changed, 7 insertions(+)



commit 50a3d79cf048377a6c1487c9491df53c69dddeec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 12 18:14:21 2001 +0000

    i admit, this null pointer change wasn't redundant ;P


 gfxcard.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit de2d61fb950cc8aa0432594cd72cc0b2fabda0bb
Author: holger <holger>
Date:   Wed Dec 12 17:51:34 2001 +0000

    fix USB problems when no PS/2 port is present, allow multiple mice


 inputdrivers/ps2mouse/ps2mouse.c |   78 ++++++++++++++++++++-------------------
 src/core/input.c                 |   16 +++++---
 2 files changed, 50 insertions(+), 44 deletions(-)



commit 8fcbc99b9da8d576404296b4086c4992a5df5ea9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 12 01:49:06 2001 +0000

    more documentation on state handling


 gfxcard.c |   48 +++++++++++++++++++++++++++++++++++++-----------
 state.h   |    9 +++++++--
 2 files changed, 44 insertions(+), 13 deletions(-)



commit de701b2d6cb88de9dc1ecca769fe594cbd23dd5f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 11 21:06:36 2001 +0000

    more documentation


 gfxcard.c |   25 +++++++++++++++++++++++--
 1 file changed, 23 insertions(+), 2 deletions(-)



commit 315a13a96e4587b1cad9bc1463b5e3dc2f2ce189
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 11 20:11:10 2001 +0000

    documented gfxcard_check_state


 gfxcard.c |   47 ++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 44 insertions(+), 3 deletions(-)



commit 63676a3a2b54ddd2b257f1068f12fa8c0275d342
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 11 18:56:13 2001 +0000

    Chose this driver for a good example on writing input drivers.
    Added comments documenting the driver API.


 dbox2remote.c |   56 ++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 50 insertions(+), 6 deletions(-)



commit ab431921e1c8f41956173ccb33576314bc7da872
Author: holger <holger>
Date:   Tue Dec 11 12:06:17 2001 +0000

    indent cosmetic


 ps2mouse.c |    1 -
 1 file changed, 1 deletion(-)



commit 3df803523e51a76b1617b196ec22fc870f64ad76
Author: holger <holger>
Date:   Tue Dec 11 12:04:25 2001 +0000

    code compaction


 ps2mouse.c |   48 +++++++++++++++++++++---------------------------
 1 file changed, 21 insertions(+), 27 deletions(-)



commit 8812cdd8b7791d9d477125a1b9f1d3efe43a33c8
Author: holger <holger>
Date:   Tue Dec 11 11:55:29 2001 +0000

    perform full initialisation on each device, this should get USB mices working on PC's, too


 ps2mouse.c |  131 ++++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 79 insertions(+), 52 deletions(-)



commit 7a9c62207a95d72ad42b0282f03b1e37bf068e6a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 10 19:01:46 2001 +0000

    Updated for 0.9.8.


 ChangeLog | 1206 ++++++++++++++++++++++++++++++++++++++++----------------------
 NEWS      |   38 +
 2 files changed, 832 insertions(+), 412 deletions(-)



commit b87761fb17c0b95c859a5a059362579d4c2b1195
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 10 18:55:32 2001 +0000

    Removed debug output in PS/2 driver.
    ATI fake texture[tm] for blended rectangles is available again.


 gfxdrivers/ati128/ati128.c       |    8 -
 inputdrivers/ps2mouse/ps2mouse.c |  275 +++++++++++++++++++--------------------
 2 files changed, 137 insertions(+), 146 deletions(-)



commit 2dd0439d87b4925fd84affecbbef1c99df7754a8
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 9 23:34:37 2001 +0000

    new aty128fb patch for linux 2.4.16


 /dev/null                                      |binary
 b/patches/Makefile.am                          |    6 +++---
 b/patches/README.aty128fb-2.4.16_to_benh.patch |   12 ++++++++++++
 b/patches/aty128fb-2.4.16_to_benh.patch.bz2    |binary
 patches/README.aty128fb-2.4.12-benh.patch      |   22 ----------------------
 5 files changed, 15 insertions(+), 25 deletions(-)



commit 993407a9492cf517a5e30dc81eba58f38ae57974
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 9 10:55:39 2001 +0000

    s/leightweight/lightweight/


 directfb.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c4d2832d44b82b5f800424a5861e9723d45945e7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Dec 9 10:54:13 2001 +0000

    removed rounding factor when blitting non-scaled with tmu,
    very big fonts looked incorrect


 matrox.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 4613b85d42edab09f9167717d4af18eaaf6b970c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 22:29:28 2001 +0000

    Use non-debug 'free' for freeing interfaces after failing construction.


 include/directfb_internals.h |    5 -----
 src/idirectfb.c              |    6 +++---
 2 files changed, 3 insertions(+), 8 deletions(-)



commit 10903cb964de9f5f98933b398899c6d4b93efdeb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 17:49:17 2001 +0000

    Use a double buffered window for a primary only if
    the primary should be a flipping surface.


 idirectfb.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit db17e3567bd964ee069bae29d4a2a42352cd38a6
Author: holger <holger>
Date:   Fri Dec 7 14:24:20 2001 +0000

    moved around tcflush() commands


 ps2mouse.c |   35 +++++++++++++++++++++++------------
 1 file changed, 23 insertions(+), 12 deletions(-)



commit e5828c1ef1bc620f61934a0e5723134101f6f976
Author: holger <holger>
Date:   Fri Dec 7 13:19:28 2001 +0000

    optimize DDA for speed


 gfxcard.c |   49 +++++++++++++++++++++++--------------------------
 1 file changed, 23 insertions(+), 26 deletions(-)



commit ab864429fd0cab6bd7b9485a4d9e82d564fab2b9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 03:58:11 2001 +0000

    typo in debug message


 core.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8e7feb6cd8191a937b4d546adfc76e35753077a1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 03:38:12 2001 +0000

    compile fix


 idirectfbvideoprovider_libmpeg3.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 03f9d510675c76a40fd40d9aeeba9f1cdd0cd38f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 01:33:02 2001 +0000

    Triangle rasterizer (used when hardware no triangle filling or clipping)
    now uses hardware accelerated rectangle filling if available.


 gfxcard.c |   32 +++++++++++++++++++++++++-------
 1 file changed, 25 insertions(+), 7 deletions(-)



commit 9bf70ee4a78d55c672658aa0ff6c656935c5b479
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Dec 7 01:04:23 2001 +0000

    Moved the hw clipping check before gfxcard_state_check/acquire when
    it comes to triangle filling. I haven't tested it before but the wrong
    order should have caused deadlocks when hardware is able to fill triangles
    but has no hw clipping.


 gfxcard.c |    7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)



commit fb6aef957417b7ba433614d75e369a5b2e7c130d
Author: holger <holger>
Date:   Thu Dec 6 21:22:05 2001 +0000

    fixed driver


 ps2mouse.c |  109 +++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 64 insertions(+), 45 deletions(-)



commit 31c90dc29643164bb566faecb312076eb0049cbc
Author: holger <holger>
Date:   Thu Dec 6 21:06:23 2001 +0000

    new FillTriangle algorithm using DDA's


 gfxcard.c |  126 ++++++++++++++++++++++++++++++++++++++------------------------
 1 file changed, 78 insertions(+), 48 deletions(-)



commit a413a656f557d79bc3cb2cbd2817e901c08b79d5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Dec 6 16:45:57 2001 +0000

    Added gfxcard_reserve_memory that can be called at init time by drivers
    for special purposes, e.g. fake texture or command overflow buffer.


 gfxcard.c |   14 ++++++++++++++
 gfxcard.h |    3 +++
 2 files changed, 17 insertions(+)



commit 8df2b725bf9e00aea7354d0876ffa0092c218924
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Dec 6 16:07:49 2001 +0000

    initialize GetFont field in IDirectFBSurface (spotted by king@mizi.com)


 idirectfbsurface.c |    1 +
 1 file changed, 1 insertion(+)



commit 223ee60f46e5ca1c3027ef372adc66302d78ecbc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Dec 5 02:25:55 2001 +0000

    Don't generate window events from input when an app runs fullscreen.


 windows.c |   25 ++++++++++++++-----------
 1 file changed, 14 insertions(+), 11 deletions(-)



commit 18031f5b711f7560c21cc020d9346f3e424da9d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 20:52:34 2001 +0000

    Applied patch from David Wood <DWood@daedalcorp.com>.
    Added him to AUTHORS for the Voodoo driver.


 AUTHORS                |    4 ++--
 gfxdrivers/tdfx/tdfx.c |   28 +++++++++++++---------------
 2 files changed, 15 insertions(+), 17 deletions(-)



commit 6e371a3d623f42ea6f6c57ff12a5cb87e1e1e0fe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 18:52:51 2001 +0000

    Renamed 'BYTES_PER_PIXEL' to 'DFB_BYTES_PER_PIXEL'.
    Renamed 'BITS_PER_PIXEL' to 'DFB_BITS_PER_PIXEL'.
    Renamed 'PIXELFORMAT_INDEX' to 'DFB_PIXELFORMAT_INDEX'.
    
    Added 'DFB_DRAWING_FUNCTION(a)' that replaces the magic 'accel & 0xFFFF'.
    Added 'DFB_BLITTING_FUNCTION(a)' that replaces the magic 'accel & 0xFFFF0000'.


 gfxdrivers/matrox/matrox.c                                      |    8 +-
 gfxdrivers/matrox/matrox_state.c                                |   16 ++--
 gfxdrivers/neomagic/neo2200.c                                   |    4 -
 gfxdrivers/nvidia/nvidia.c                                      |    2 
 gfxdrivers/tdfx/tdfx.c                                          |    4 -
 include/directfb.h                                              |   13 +--
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |    2 
 src/core/fbdev.c                                                |   10 +-
 src/core/gfxcard.c                                              |   12 +--
 src/core/surfacemanager.c                                       |    6 -
 src/core/surfaces.c                                             |    6 -
 src/display/idirectfbsurface.c                                  |    2 
 src/gfx/generic/generic.c                                       |   40 +++++-----
 src/misc/gfx_util.c                                             |   16 ++--
 16 files changed, 73 insertions(+), 72 deletions(-)



commit 1ef5564bbbfec9536c99c4e8c54cf4ae681f9931
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 17:43:37 2001 +0000

    Division by zero fix.


 gfxcard.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)



commit d5d5547d56bfa40eb95f9a05b602a4f848942c26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 17:42:47 2001 +0000

    renamed dbg_* functions to dfb_dbg_*


 core/core.c |    2 +-
 misc/mem.c  |   24 ++++++++++++++++--------
 misc/mem.h  |   24 ++++++++++++------------
 3 files changed, 29 insertions(+), 21 deletions(-)



commit 0be7ae641e75ece7cdc2b2085fc4e7b97586f4eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 16:50:00 2001 +0000

    Applied patch from Holger Waechtler, gFillTriangle is removed and triangle
    filling/clipping is handled by 'gfxcard.c'. Triangles are filled by software
    if hardware/driver doesn't support triangles or doesn't support clipping.
    In the final version of this function triangles will be filled via accelerated
    rectangles if hardware has no triangle or clipping support but filled rectangles.


 core/gfxcard.c        |   81 +++++++++++++++++++++++++++++++++++++++++++-------
 gfx/generic/generic.c |   62 --------------------------------------
 gfx/generic/generic.h |    1 
 3 files changed, 71 insertions(+), 73 deletions(-)



commit cdfcee5a0ddb3928a05f3994ae9b46b7e0bb3413
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Dec 4 16:42:25 2001 +0000

    commented out a debugging signal


 reactor.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 35a64af9ec15a5f17d70e38530b0a1279b74bc1c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 3 17:37:50 2001 +0000

    optimized offset handling for file internal data


 Sacc_to_Dop_rgb16_MMX.s      |    9 +++------
 Sacc_to_Dop_rgb32_MMX.s      |    9 +++------
 Sop_argb_Sto_Dacc_MMX.s      |    3 +--
 Sop_argb_to_Dacc_MMX.s       |    3 +--
 Sop_rgb16_to_Dacc_MMX.s      |    9 +++------
 Sop_rgb32_to_Dacc_MMX.s      |    6 ++----
 Xacc_blend_invsrcalpha_MMX.s |    7 +++----
 Xacc_blend_srcalpha_MMX.s    |    6 ++----
 8 files changed, 18 insertions(+), 34 deletions(-)



commit f39f90c8d063938d9f381080cab66cbe1177ba92
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 3 14:04:52 2001 +0000

    Finally position independent code with real code sharing.
    No patch needed to build with dietlibc.


 Cacc_add_to_Dacc_MMX.s       |   22 +++++++++++++++++-----
 Dacc_modulate_argb_MMX.s     |   24 +++++++++++++++++++-----
 Sacc_add_to_Dacc_MMX.s       |   24 +++++++++++++++++++-----
 Sacc_to_Dop_rgb16_MMX.s      |   33 +++++++++++++++++++++++++--------
 Sacc_to_Dop_rgb32_MMX.s      |   33 +++++++++++++++++++++++++--------
 Sop_argb_Sto_Dacc_MMX.s      |   31 ++++++++++++++++++++++++-------
 Sop_argb_to_Dacc_MMX.s       |   29 ++++++++++++++++++++++-------
 Sop_rgb16_to_Dacc_MMX.s      |   35 ++++++++++++++++++++++++++---------
 Sop_rgb32_to_Dacc_MMX.s      |   32 ++++++++++++++++++++++++--------
 Xacc_blend_invsrcalpha_MMX.s |   43 ++++++++++++++++++++++++++++++++-----------
 Xacc_blend_srcalpha_MMX.s    |   40 ++++++++++++++++++++++++++++++----------
 detect_MMX.s                 |   12 ++----------
 12 files changed, 265 insertions(+), 93 deletions(-)



commit 1ac75046d1f171ce147832d3481585e9ac3666d8
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Dec 3 14:02:24 2001 +0000

    dont set the val field of semul at all when unsing the IPC_RMID semctl()


 lock.c |    1 -
 ref.c  |    1 -
 2 files changed, 2 deletions(-)



commit b66883d1d1f16d5b8680b8ecc64e4b7287e48db4
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Dec 3 04:04:44 2001 +0000

    in all SETVAL semctl()s, pass a union and set the val field instead of passing the
    value directly. this fixes multi appication core crashes on ppc. obviously
    this is the right way, however it worked too on i386 before the change.


 fusion_types.h |    8 ++++++++
 lock.c         |   12 +++++++++---
 ref.c          |   10 ++++++++--
 3 files changed, 25 insertions(+), 5 deletions(-)



commit c521677e48d99ebe27a6ffd9f2bfa5d0098ef26a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Dec 3 04:03:46 2001 +0000

    Matrox BES works again, writing to four dac registers subsequently didn't
    work after the base address got a local variable instead of a global.
    Strange gcc or cache behaviour i guess.


 matrox_bes.c |   23 ++++++++++++++++-------
 mmio.h       |    8 ++++++--
 2 files changed, 22 insertions(+), 9 deletions(-)



commit 74d8ab8b4ed792224076e78a6a4a4f22d91de8fe
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Dec 2 00:17:26 2001 +0000

    added "wm_hack" feature:
    press shift lock over a window and spin the mouse wheel to change the window
    opacity.


 windows.c |   33 +++++++++++++++++++++++----------
 1 file changed, 23 insertions(+), 10 deletions(-)



commit b87a5f31ba0ff40d3a494408b439aa1d4f482673
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Nov 30 19:03:21 2001 +0000

    Made all 'Sop -> Aop' functions 'Bop -> Aop' (source aliasing removed).
    This makes simple blitting 90% faster for very short scanlines, e.g. 2x200,
    because the "Sop_is_Bop" function is not needed.


 generic.c |  222 +++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 111 insertions(+), 111 deletions(-)



commit d559201293793fc56d6100213df56a45d8d7e785
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 29 16:58:39 2001 +0000

    Fixed segfault when rendering pipeline is empty, e.g. using DSDRAW_BLEND
    with SrcFunc DSBF_ZERO and DstFunc DSBF_ONE.


 generic.c |   18 ++++++++++++++++++
 1 file changed, 18 insertions(+)



commit d36dc01cee434262f84483eb877d26e52494fa33
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 29 16:51:45 2001 +0000

    Check for NULL pointer.


 core.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 9cc0e65dfe4f1f6a01b4a8e1e778f8c4ee0dd795
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Nov 29 16:12:27 2001 +0000

    Revived exit handler.


 core.c |   11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)



commit 9be8bbbcc3602599123ed8282b9cd07ee82e42c5
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Nov 29 14:28:54 2001 +0000

    build fix


 Makefile.am |    1 -
 1 file changed, 1 deletion(-)



commit d26e711dc1a68cb742f7a87a673ca2d9cc9b25c3
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Nov 29 14:19:06 2001 +0000

    added remote control driver for dbox2


 configure.in                           |    9 +
 inputdrivers/Makefile.am               |   10 +
 inputdrivers/dbox2remote/.cvsignore    |    6 
 inputdrivers/dbox2remote/Makefile.am   |   21 ++
 inputdrivers/dbox2remote/dbox2remote.c |  280 +++++++++++++++++++++++++++++++++
 5 files changed, 325 insertions(+), 1 deletion(-)



commit 57fd6015f4812bf6f340d5d4f6ffeb32b4e639bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 28 17:56:41 2001 +0000

    Removed "-O3" from default flags. It's added when debug is disabled.
    Added "-O0" to flags when debug is enabled.


 configure.in |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit ba61c9fb37d8f11d070266044329f8496e013b63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 28 17:06:28 2001 +0000

    In RGB332:
    Have all colors but black a bit transparent. Black is totally transparent.


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit fea914d4119cb4fc9afdfb09b31b633145909201
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 28 16:43:21 2001 +0000

    hmm, transp is inverted alpha ;)


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit c16f34ed4e62c7bb75ceff4659f531a6aafa6892
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Nov 28 15:58:30 2001 +0000

    In RGB332 mode initialize alpha values in palette.


 fbdev.c |   19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)



commit 4fc1c660c5c87f61167dc2d6f81d13968217d605
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 27 20:42:36 2001 +0000

    Physical address is 'unsigned long' now.


 gfxcard.c |    4 ++--
 gfxcard.h |    7 +++----
 2 files changed, 5 insertions(+), 6 deletions(-)



commit dacba42883d71bc6ba26830193ce9688554202fc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 27 13:19:42 2001 +0000

    Create reactor before call to "driver->OpenDevice".


 input.c |    9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)



commit e7560c25053c8149202109f7b1f6809b43d1569a
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Nov 27 00:22:57 2001 +0000

    added DWET_WHEEL window event. Focused windows now receive events if the mouse wheel is used.


 include/directfb.h        |    8 +++++++-
 src/core/windows.c        |   31 +++++++++++++++++++++++++++++++
 src/gfx/generic/generic.c |    1 -
 3 files changed, 38 insertions(+), 2 deletions(-)



commit 60fa2ddf051144bfd7758d2b496c8baf8f79bad8
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Nov 27 00:15:56 2001 +0000

    bugfixes:
    when using a imps2 mice the packet array was accessed out of bounds
    added (__s8) cast to before assigning wheel motion data to dz.


 ps2mouse.c |   24 +++++++++++-------------
 1 file changed, 11 insertions(+), 13 deletions(-)



commit 52972a68fb6ad4d743e60834f03d7c833bbfc94e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 12:13:56 2001 +0000

    Use calloc and strdup instead of malloc/memset and malloc/strcpy.


 interface.c |    6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)



commit d18189186c74579b173b154cced54448f3b5e79e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 04:54:31 2001 +0000

    Free pending events on destruction of IDirectFBWindow.


 idirectfbwindow.c |    8 ++++++++
 1 file changed, 8 insertions(+)



commit b72a6a4c4a4f6517fded320024454a4619275362
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 04:48:19 2001 +0000

    Removed "#include <config.h>" from headers that get installed.
    "-DDFB_DEBUG" and "-DFUSION_FAKE" are now command line arguments.
    When debug is enabled "-DDFB_DEBUG" is contained in directfb-internal.pc.


 configure.in                   |    7 ++++---
 directfb-internal.pc.in        |    2 +-
 src/core/coredefs.h            |    2 --
 src/core/fusion/arena.h        |    1 -
 src/core/fusion/fusion.h       |    1 -
 src/core/fusion/fusion_types.h |    1 -
 src/core/fusion/list.h         |    1 -
 src/core/fusion/lock.h         |    1 -
 src/core/fusion/reactor.h      |    1 -
 src/core/fusion/ref.h          |    1 -
 src/core/fusion/shmalloc.h     |    1 -
 11 files changed, 5 insertions(+), 14 deletions(-)



commit 247dbcad4232ff271718075897125846c328e5e8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 04:30:03 2001 +0000

    Use DFBCALLOC for DFB_ALLOCATE_INTERFACE only if not in debug mode,
    because interfaces are not freed intentionally in debug mode.
    
    Free pending events on destruction of IDirectFBInputBuffer.


 include/directfb_internals.h     |    5 +++++
 src/input/idirectfbinputbuffer.c |    8 ++++++++
 2 files changed, 13 insertions(+)



commit a72d2ecc6495967577a82a3438856acf56498256
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 02:50:18 2001 +0000

    Include SMF_SOURCE in SMF_ALL, could have caused blitting from the wrong
    source recently (longer for a very few drivers) when switching to another state.


 state.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e0a425359cbb4031ae47ce55293d27a85114e57e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 01:50:45 2001 +0000

    Add "-DFUSION_FAKE" to internal CFLAGS in package config file
    when compiling for single application core.


 configure.in            |    4 ++++
 directfb-internal.pc.in |    2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)



commit 0ed598c6e86c15a3def0af551860c337d6a2ffe4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 26 00:04:18 2001 +0000

    Made additional layers available again, but for single app core only yet.
    For a strange reason the Matrox BES doesn't get visible, until the old
    version has been used once.
    
    Readded 'surface_soft_lock' as a helper function
    that behaves like the one before.


 gfxdrivers/matrox/matrox.h     |   30 +++++
 gfxdrivers/matrox/matrox_bes.c |  236 ++++++++++++++++++++---------------------
 gfxdrivers/matrox/mmio.h       |    4 
 src/core/gfxcard.c             |   13 +-
 src/core/layers.c              |   13 +-
 src/core/layers.h              |    2 
 src/core/surfaces.c            |   26 +++-
 src/core/surfaces.h            |    8 +
 src/idirectfb.c                |    6 -
 9 files changed, 207 insertions(+), 131 deletions(-)



commit cf1be1be7a22b9f068850300c7c9409e0e463cb2
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Nov 25 22:53:05 2001 +0000

    include string.h to avoid warnings with gcc-3.0


 fusion_internal.h |    1 +
 1 file changed, 1 insertion(+)



commit 6e16576996423dc602b1bc2cd6d844b015fa4d4d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 25 21:38:49 2001 +0000

    When an IDirectFBInputBuffer gets destructed it now detaches from
    all devices it was attached to. Not only the first one.


 idirectfbinputbuffer.c |   30 ++++++++++++++++++++++++------
 idirectfbinputdevice.c |    4 ----
 2 files changed, 24 insertions(+), 10 deletions(-)



commit 5982ef209e4d1150d8c6d2eab9a2089b278e1ad4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 25 18:54:50 2001 +0000

    Device name is "Software Rasterizer" now, not "Generic".
    Vendor string is "Generic" or "MMX" so it prints "MMX Software Rasterizer"
    or "Generic Software Rasterizer".


 generic.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 965bd5328c99e5df814e7df520d78933e155f98a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 25 03:32:19 2001 +0000

    Print device name & vendor instead name of driver.


 gfxcard.c |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)



commit f0ec56b7f93f5d12a366dc12c0eff3d642101d3f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Nov 25 02:23:07 2001 +0000

    Fixed "--fbdev=" option.


 fbdev.c |   59 ++++++++++++++++++++++++++++-------------------------------
 1 file changed, 28 insertions(+), 31 deletions(-)



commit 1c05d9bcb5227b104766c6ceb9d2fc485d28a55d
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Nov 21 19:28:16 2001 +0000

    #include <asm/page.h>,
    fixes compile error on ppc (PAGE_SIZE was not defined)


 fusion_internal.h |    1 +
 1 file changed, 1 insertion(+)



commit b55013fb307c9cabad8587ed2f8a9d5f075322e3
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Nov 20 22:05:01 2001 +0000

    use malloc() and free() instead of alloca().
    this fixes a crash, when loading jpeg images that are larger than the surface rendered to.


 idirectfbimageprovider_jpeg.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 68ed11f3ce430d8e244e88324aec6a8cb1c93ceb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 20 20:45:50 2001 +0000

    Added support for IMPS/2 by Jason Gaiser <jasno@san.rr.com>.


 README                           |    1 
 inputdrivers/ps2mouse/ps2mouse.c |  265 ++++++++++++++++++++++++++++-----------
 2 files changed, 198 insertions(+), 68 deletions(-)



commit 61b342d2be35310df32ed862a7b7023a345c750c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 20 14:46:15 2001 +0000

    These are in fusion now.


 reactor.c |   39 ---------------------------------------
 reactor.h |   29 -----------------------------
 2 files changed, 68 deletions(-)



commit bd622572d9143771ba96efa479b105be266aca85
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 20 12:59:33 2001 +0000

    Ok, here it comes, not yet complete and far from being finished.
    Important things to do are resource cleanup (especially when apps get
    killed), safety, code cleanup and so on.
    This tree can build both the single and multi app core, you can switch
    at configure time with "--enable-multi".
    The single application version does not fully work like before yet,
    missing are Suspend/Resume and therefore VT switching during running.
    Also support for additional display layers is disabled because there
    need to be some changes to the internal layer handling.
    
    There are also enhancements, e.g. abi version handling for drivers.
    Graphics drivers are now ready for multi head support. Core code cleanup
    is in progress. 'gfxcard.[ch]' and 'input.[ch]' already have their private
    structures hidden.
    
    I am sorry for the changes to the graphics and input drivers, but it's
    much more clean now and drivers work with single and multi app core without
    rebuilding.
    
    You can checkout DirectFB at any time by specifying "-r DFB_BEFORE_MULTI".
    
    Any help in optimizing/finishing especially the src/core/fusion stuff is
    appreciated. Thank you!


 acconfig.h                                                           |    2 
 configure.in                                                         |   13 
 gfxdrivers/Makefile.am                                               |    2 
 gfxdrivers/ati128/ati128.c                                           |  695 +++++----
 gfxdrivers/ati128/ati128.h                                           |   39 
 gfxdrivers/ati128/ati128_state.c                                     |  183 +-
 gfxdrivers/ati128/ati128_state.h                                     |   26 
 gfxdrivers/ati128/mmio.h                                             |   50 
 gfxdrivers/matrox/matrox.c                                           |  740 +++++-----
 gfxdrivers/matrox/matrox.h                                           |   52 
 gfxdrivers/matrox/matrox_bes.c                                       |  159 +-
 gfxdrivers/matrox/matrox_state.c                                     |  297 ++--
 gfxdrivers/matrox/matrox_state.h                                     |   51 
 gfxdrivers/matrox/mmio.h                                             |   39 
 gfxdrivers/neomagic/neo2200.c                                        |  458 +++---
 gfxdrivers/neomagic/neomagic.c                                       |  190 +-
 gfxdrivers/neomagic/neomagic.h                                       |   54 
 gfxdrivers/nvidia/nvidia.c                                           |  380 +++--
 gfxdrivers/nvidia/nvidia.h                                           |   35 
 gfxdrivers/tdfx/tdfx.c                                               |  666 +++++----
 inputdrivers/Makefile.am                                             |    2 
 inputdrivers/h3600_ts/h3600_ts.c                                     |  102 +
 inputdrivers/joystick/joystick.c                                     |  158 +-
 inputdrivers/keyboard/keyboard.c                                     |  330 ++--
 inputdrivers/lirc/lirc.c                                             |  133 +
 inputdrivers/ps2mouse/ps2mouse.c                                     |  176 +-
 inputdrivers/serialmouse/serialmouse.c                               |  305 ++--
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |   10 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |   20 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   14 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    8 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   32 
 src/core/Makefile.am                                                 |    5 
 src/core/core.c                                                      |  256 ++-
 src/core/core.h                                                      |   24 
 src/core/coredefs.h                                                  |    5 
 src/core/coretypes.h                                                 |   31 
 src/core/fbdev.c                                                     |  446 +++---
 src/core/fbdev.h                                                     |   26 
 src/core/fonts.c                                                     |   55 
 src/core/fonts.h                                                     |   57 
 src/core/fusion/.cvsignore                                           |    6 
 src/core/fusion/Makefile.am                                          |   42 
 src/core/fusion/arena.c                                              |  296 ++++
 src/core/fusion/arena.h                                              |   54 
 src/core/fusion/fusion.c                                             |  306 ++++
 src/core/fusion/fusion.h                                             |   61 
 src/core/fusion/fusion_internal.h                                    |  103 +
 src/core/fusion/fusion_types.h                                       |   67 
 src/core/fusion/list.c                                               |   48 
 src/core/fusion/list.h                                               |   47 
 src/core/fusion/lock.c                                               |  149 ++
 src/core/fusion/lock.h                                               |   83 +
 src/core/fusion/reactor.c                                            |  679 +++++++++
 src/core/fusion/reactor.h                                            |   52 
 src/core/fusion/ref.c                                                |  310 ++++
 src/core/fusion/ref.h                                                |   81 +
 src/core/fusion/shmalloc.c                                           |  411 +++++
 src/core/fusion/shmalloc.h                                           |   50 
 src/core/fusion/util.c                                               |  148 ++
 src/core/gfxcard.c                                                   |  518 +++++--
 src/core/gfxcard.h                                                   |  211 +-
 src/core/input.c                                                     |  312 +++-
 src/core/input.h                                                     |   89 -
 src/core/layers.c                                                    |  240 ++-
 src/core/layers.h                                                    |   27 
 src/core/reactor.c                                                   |  153 --
 src/core/reactor.h                                                   |   22 
 src/core/state.c                                                     |   81 -
 src/core/state.h                                                     |   11 
 src/core/surfacemanager.c                                            |  213 +-
 src/core/surfacemanager.h                                            |  102 -
 src/core/surfaces.c                                                  |  209 +-
 src/core/surfaces.h                                                  |   32 
 src/core/vt.c                                                        |  246 ---
 src/core/vt.h                                                        |   28 
 src/core/windows.c                                                   |  213 +-
 src/core/windows.h                                                   |   10 
 src/directfb.c                                                       |   61 
 src/display/idirectfbdisplaylayer.c                                  |   80 -
 src/display/idirectfbsurface.c                                       |    9 
 src/display/idirectfbsurface.h                                       |    2 
 src/display/idirectfbsurface_layer.c                                 |    2 
 src/gfx/generic/generic.c                                            |   72 
 src/gfx/generic/generic.h                                            |    5 
 src/gfx/util.c                                                       |   31 
 src/idirectfb.c                                                      |  229 +--
 src/input/idirectfbinputbuffer.c                                     |   13 
 src/input/idirectfbinputdevice.c                                     |    9 
 src/media/idirectfbfont.c                                            |   12 
 src/misc/tree.c                                                      |   35 
 src/misc/tree.h                                                      |   35 
 src/windows/idirectfbwindow.c                                        |    3 
 95 files changed, 8678 insertions(+), 3960 deletions(-)



commit 4ce740d0d1bf1d0475ba57ebb8d35668fab21a62
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 19 05:33:55 2001 +0000

    Added 320x240 and 400x300 double scan modes.


 fb.modes |   26 ++++++++++++++++++++++++++
 1 file changed, 26 insertions(+)



commit cd7549f12dd27e8015a551b149ea6e5f2446fa47
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Nov 13 07:36:03 2001 +0000

    Simple blitting support for nVidia cards.
    Thanks to Daniel Foesch <dfoesch@cs.nmsu.edu>.


 AUTHORS                    |   13 ++
 gfxdrivers/nvidia/nvidia.c |  199 +++++++++++++++++++++++++++++++++------------
 2 files changed, 161 insertions(+), 51 deletions(-)



commit 475d3155f039fea5742f894279940971337f1ffe
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Nov 8 00:53:25 2001 +0000

    fixed initialization of the RGB332 palette, white looked a bit like light coffe before (yes, dok you were right, that notebook tft was not)


 fbdev.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit 525a2d04253905aeebb92d886f48b8a394c346f1
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 5 23:29:52 2001 +0000

    - finished implementation of RGB332 support, still not optimized but complete.
    - changed version number of generic driver to 0.5, didnt change that number
    for a _long_ time.


 core/gfxcard.c        |    2 +-
 gfx/generic/generic.c |   20 +++++++++++++++++++-
 2 files changed, 20 insertions(+), 2 deletions(-)



commit 0c1b289e6d31274142cbddae1f5a10eab1c9e2eb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Nov 5 21:01:25 2001 +0000

    Restore current mode when resuming.


 fbdev.c  |    3 +++
 layers.c |    2 ++
 2 files changed, 5 insertions(+)



commit e7a7709ee1f2e5f945b4fcc4418af6d05bb2c19b
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Nov 5 00:52:43 2001 +0000

    implemented Sacc_to_Aop_rgb332(), Sop_rgb332_to_Dacc(), Sop_rgb332_Sto_Dacc()
    
    now blending in 8 bit works.


 generic.c |   54 ++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 48 insertions(+), 6 deletions(-)



commit 1758deac0c70bd130aa3c276da18a51cc5b01e18
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 3 05:06:52 2001 +0000

    Added includes for types used in these headers.


 gfxdrivers/ati128/ati128.h     |    3 +++
 gfxdrivers/matrox/matrox.h     |    3 +++
 gfxdrivers/neomagic/neomagic.h |    3 +++
 gfxdrivers/tdfx/tdfx.h         |   30 ++++++++++++++++--------------
 include/directfb_internals.h   |    3 +++
 5 files changed, 28 insertions(+), 14 deletions(-)



commit f7f5ca6cf6dd84f580fc90a1ea2b68602a36ab1a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Nov 3 04:49:01 2001 +0000

    Fixed includes so that each header should compile on its own.
    Moved forward declaration of 'InputDevice' to 'coretypes.h'.


 core/core.h                       |    2 ++
 core/coretypes.h                  |    2 ++
 core/fbdev.h                      |    2 ++
 core/fonts.h                      |    3 +++
 core/gfxcard.h                    |    3 +++
 core/input.h                      |    4 +++-
 core/layers.h                     |    3 +++
 core/state.h                      |    3 +++
 core/surfacemanager.h             |    3 ++-
 core/vt.h                         |    2 ++
 display/idirectfbdisplaylayer.h   |    2 ++
 display/idirectfbsurface.h        |    4 ++++
 display/idirectfbsurface_layer.h  |    3 +++
 display/idirectfbsurface_window.h |    4 ++++
 gfx/convert.h                     |    6 +++---
 gfx/generic/generic.h             |    6 ++++++
 idirectfb.h                       |    2 ++
 media/idirectfbfont.h             |    4 ++++
 misc/gfx_util.h                   |    4 +++-
 misc/tree.h                       |    3 ++-
 misc/utf8.h                       |    4 +++-
 windows/idirectfbwindow.h         |    4 ++++
 22 files changed, 65 insertions(+), 8 deletions(-)



commit 0925771ad452be507dd6cfecab92c2e0f34f1cc3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 31 15:53:50 2001 +0000

    Default font location had changed, did also change in code.


 idirectfbfont_default.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit cfa916691655ff8a01901da733310c5d96a5c04c
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 30 03:32:48 2001 +0000

    removed description of the examples.


 README |   45 ---------------------------------------------
 1 file changed, 45 deletions(-)



commit bf28334c75e88082280dfdce781a6ead5642b426
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 30 02:18:36 2001 +0000

    Added OpenGL support via the new interface "IDirectFBGL".
    
    Added "IDirectFBSurface::GetGL",
    it will return the new interface if it has been installed (DirectFBGL).
    
    A call to "IDirectFBGL::MakeCurrent" sets the current OpenGL context.
    
    Added an optional "Allocate" function to interface implementations,
    the creator of the interface no longer needs to know its content.
    
    Activated DWCAPS_DOUBLEBUFFER for windows that got created implicitly
    by creating a primary surface in non-exclusive mode.
    
    The mouse cursor is now activated by default.
    
    Increased version number to "0.9.8".


 configure.in                   |    2 -
 include/directfb.h             |   16 +++++++++++++
 include/directfb_internals.h   |    1 
 src/directfb.c                 |    2 +
 src/display/idirectfbsurface.c |   49 ++++++++++++++++++++++++++++++++++++++---
 src/idirectfb.c                |    6 ++---
 src/interface.c                |   27 +++++++++++++++-------
 7 files changed, 87 insertions(+), 16 deletions(-)



commit 74c82a7471aeb2ea4df7c0f43f8e5ab676dc45eb
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Oct 30 01:27:58 2001 +0000

    - removed examples, moved them to DirectFB-examples.


 /dev/null                          |binary
 b/Makefile.am                      |    2 
 b/configure.in                     |    5 
 b/data/.cvsignore                  |    2 
 b/data/Makefile.am                 |   23 
 b/data/cursor.dat                  |binary
 b/data/font.data                   |binary
 examples/.cvsignore                |   21 
 examples/Makefile.am               |   97 -
 examples/cursor2.c                 |  352 ------
 examples/df_andi.c                 |  628 -----------
 examples/df_dok.c                  |  766 --------------
 examples/df_dok.results            |   56 -
 examples/df_dok_benchmark          |    8 
 examples/df_fire.c                 |  191 ---
 examples/df_joystick.c             |  304 -----
 examples/df_knuckles/.cvsignore    |    5 
 examples/df_knuckles/Makefile.am   |   28 
 examples/df_knuckles/df_knuckles.c |  380 -------
 examples/df_knuckles/matrix.c      |  179 ---
 examples/df_knuckles/matrix.h      |   58 -
 examples/df_knuckles/skull.h       | 1960 -------------------------------------
 examples/df_layer.c                |  247 ----
 examples/df_neo/.cvsignore         |    5 
 examples/df_neo/Makefile.am        |   46 
 examples/df_neo/df_neo.c           |  351 ------
 examples/df_particle.c             |  303 -----
 examples/df_porter.c               |  146 --
 examples/df_stress.c               |  165 ---
 examples/df_video.c                |  212 ----
 examples/df_video_particle.c       |  396 -------
 examples/df_window.c               |  359 ------
 examples/pss.c                     |  349 ------
 examples/spacedream/.cvsignore     |    6 
 examples/spacedream/Makefile.am    |   44 
 examples/spacedream/main.c         |  371 -------
 examples/spacedream/math3d.c       |  252 ----
 examples/spacedream/math3d.h       |   82 -
 38 files changed, 27 insertions(+), 8372 deletions(-)



commit 86180d221182007ee6d1436e3813ccdb135f1d34
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 29 23:07:40 2001 +0000

    implemented Sop_rgb332_SKto_Aop() for stretched color keyed blits.


 generic.c |   15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)



commit 8b642d324f01b9959254b86dfac7662a6f51c984
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 28 21:29:39 2001 +0000

    fixed some includes


 coretypes.h |    1 +
 reactor.h   |    3 ++-
 surfaces.h  |    4 +++-
 3 files changed, 6 insertions(+), 2 deletions(-)



commit d4a3527700ab199657c01b749d86716d27b23d5d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 28 19:06:24 2001 +0000

    Fixed typo in comment.


 idirectfbsurface.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 71040f99b71aaf98bac7209c8758d8fd568068ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 28 19:05:38 2001 +0000

    removed obsolete code


 idirectfb.c |    5 -----
 1 file changed, 5 deletions(-)



commit 70ae72267dde43a78de33fc22ccc4ec698bb7343
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 27 20:54:36 2001 +0000

    changed penguin's colorkey to green. now df_andi looks correct in 15 and 8
    bit (too much of the penguin was keyed before when runnig at lower bit
    depths)


 df_andi.c |    3 +++
 tux.png   |binary
 2 files changed, 3 insertions(+)



commit 58d468b13c398d4c009ab7c3595feb65cd143c71
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 26 12:39:34 2001 +0000

    Updated for 0.9.7


 ChangeLog |  345 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   27 ++++
 2 files changed, 372 insertions(+)



commit e87e4763dc702529796540ba6775eb891d16d2c2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 25 15:17:30 2001 +0000

    Removed commented out code,
    wrote an explanation instead why the state isn't modified.


 idirectfbsurface.c |    9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)



commit f2be27c5481d6346c539e553d8064154aebda0a8
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Oct 25 14:47:06 2001 +0000

    Adapted examples to latest API changes (surface->SetSrcColorKey).


 df_dok.c          |    3 ++-
 spacedream/main.c |    3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)



commit f360be888d6f8326201fcdac066ac73c3daabe3b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Oct 25 14:33:16 2001 +0000

    Important API change:
    
    IDirectFBSurface::SetSrcColorKey has to be called on the source now,
    when blitting to a surface which has source color keying enabled.
    
    For IDirectFBSurface::SetSrcColorKey and IDirectFBSurface::SetDstColorKey:
    The color key is now specified by three values each 8bit: r, g and b.
    They will be converted to the pixelformat of the surface automatically.


 include/directfb.h             |   18 ++++++++++------
 src/display/idirectfbsurface.c |   45 +++++++++++++++++++++++++++++++++++------
 src/display/idirectfbsurface.h |   16 ++++++++++++++
 src/gfx/convert.h              |   29 ++++++++++++++++++++++++++
 4 files changed, 96 insertions(+), 12 deletions(-)



commit e0f5c3beb39992d87ff5c5febc4540e48a61983d
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 22 17:53:48 2001 +0000

    forgot to change filenames.


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit d39fd0c4d5b5af82da95c9d5ffd9bd59219b7f4c
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 22 17:52:32 2001 +0000

    *** empty log message ***


 /dev/null                                     |binary
 patches/README.aty128fb-2.4.6-benh-andi.patch |   14 --------------
 2 files changed, 14 deletions(-)



commit 17ad8ca16ec51dad79a6069a4376eb91df37bb7f
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Oct 22 17:52:03 2001 +0000

    updated aty128fb framebuffer driver patch.
    
    the patch was tested with kernel versions from 2.4.7 - 2.4.12. It may work
    with older versions too.


 README.aty128fb-2.4.12-benh.patch |   22 ++++++++++++++++++++++
 aty128fb-2.4.12-benh.patch.bz2    |binary
 2 files changed, 22 insertions(+)



commit 096f45160569193fb54c2e204d377e4a1538cc20
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 21 15:50:08 2001 +0000

    Added DSPF_UYVY and clarified description of both YUV formats.
    
    Added surface capability DSCAPS_INTERLACED which indicates that the surface
    contains interlaced video data (two fields of half the height of the surface
    are stored interleaved line by line). This capability will be set by drivers
    when a layer is configured with DLOP_INTERLACED enabled. Video providers are
    then able to notify the layer driver about field changes (for software driven
    field changes).
    
    Added surface notifications CSNF_SET_EVEN and CSNF_SET_ODD (internal),
    drivers can listen to them to support (de)interlacing with software driven
    field changes.
    
    Added DVCAPS_INTERLACED to indicate that a video provider supports
    notification of field changes if the destination has DSCAPS_INTERLACED set.
    
    V4L provider supports (de)interlacing and both YUV formats.
    
    Added support for (de)interlaced video with the Matrox Backend Scaler.
    
    Added support for YUY2 as a blitting source on the G200.
    
    Added support for YUY2 and UYVY as a blitting source on the G400.
    
    Made some features available on the G100, stretched blits and format conversion
    are now available, but for 15/16 bit sources only. Colorizing is available, too.
    Blending could be available, but only in stipple mode and no ARGB32;-(
    
    Added support for deinterlacing in df_layer, also demonstrating how to test
    layer configurations. Will fallback to UYVY or even take the current format.
    
    AviFile provider returns an error if support for YUY2 or UYVY is not available.
    
    Increased version number to 0.9.7.


 configure.in                                                         |    2 
 examples/df_layer.c                                                  |  107 ++++++--
 gfxdrivers/matrox/matrox.c                                           |   91 ++++++-
 gfxdrivers/matrox/matrox_bes.c                                       |  126 ++++++++--
 gfxdrivers/matrox/matrox_state.c                                     |   17 +
 gfxdrivers/matrox/regs.h                                             |    6 
 include/directfb.h                                                   |   18 +
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   27 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   26 +-
 src/core/surfaces.h                                                  |    6 
 src/gfx/generic/generic.c                                            |   47 +--
 11 files changed, 376 insertions(+), 97 deletions(-)



commit c4a57ad2c754c4fe8f4facaecc9b262ce24a5ff9
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 20 23:41:46 2001 +0000

    optimized RGB15 and RGB16 color keyed blit (doubled performance on some
    cpus)
    
    df_dok benchmarks (MPixel/s):
    
    Apple PowerBook G3 400Mhz:
    15.2  -> 30.8
    
    Sony Vaio PIII 700 Mhz:
    69.5 -> 112.9
    
    PowerPC 823 66 Mhz:
    2.65 -> 3.49


 generic.c |  120 +++++++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 92 insertions(+), 28 deletions(-)



commit 0cfcd032885edb90e9dba165e583c13a2923ebe1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 20 22:35:21 2001 +0000

    5 lines added to have G100 support as well ;)


 matrox.c |    5 +++++
 1 file changed, 5 insertions(+)



commit ebc5ca5f8b2aa1367e4de649d30f6b885c8421e4
Author: Andreas Hundt <andi@directfb.org>
Date:   Sat Oct 20 15:01:27 2001 +0000

    - dont call fbdev_set_gamma_ramp() when using RGB332
    - allow RGB15 mode on fbdev drivers that report to use one bit for alpha


 fbdev.c |   15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)



commit b92f249876c108445a2bf81d4e5b9cc2795de99f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 20 08:52:42 2001 +0000

    It's now possible to use the V4L Provider on YUV surfaces.


 idirectfbvideoprovider_v4l.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 0fa1dcc59ee68fbb3dba671ba048c3dc79dbb0ab
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 20 08:02:16 2001 +0000

    Added support for the following fb.modes options:
    
    'gsync true'   - Sync On Green enabled
    'csync high'   - Composite Sync high
    'extsync true' - External Sync


 fbdev.c |   25 ++++++++++++++++++++-----
 fbdev.h |    4 ++++
 2 files changed, 24 insertions(+), 5 deletions(-)



commit 3ab5d3da023bc08473fe6d36c689ae240cc7a8b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 20 07:47:20 2001 +0000

    When reading the first 32 byte of a file in CreateImageProvider,
    open the file/device O_NONBLOCK! With a BTTV and DFBSee trying to create
    an image provider for /dev/video the read never returned.


 idirectfb.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7334ea9cfdcbfa80a78544cf6aeed6fa54e01373
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Oct 20 06:49:50 2001 +0000

    Added acceleration for older Matrox cards (Mystique and Millenium I & II).
    Tested on a Mystique with SGRAM
    
    Supported are:
    - Solid rectangle/triangle filling
    - Solid line/rectangle drawing
    - Blitting with or without source color keying
    
    Mystique seems to has a texture mapping unit, but I didn't get it working
    correctly, scaled images looked tiled/interleaved, but it was slower than
    software anyway, so it propably wouldn't trade off.
    
    
    Fixed BCOL setting (colorkey mask), all 32 bit must be filled for these cards.
    
    Added second simple blitting function 'matroxBlit2D_Old',
    because BitBlt programming is too different between new and old cards.
    
    Source and destination surface offset handling is totally different, too.
    
    Cleaned up CheckState functions, optimized invalidation rules in SetState.
    (Don't know why source registers had been invalidated on destination changes).
    
    
    Tested on a Mystique with SGRAM on an Athlon 1.33GHz:
    - Rectangle Filling 823 MPixel/sec
    - Blitting 46 MPixel/sec (software was about 30)
    
    Without "--matrox-sgram" feature:
    - Rectangle Filling 94 MPixel/sec !


 matrox.c       |  295 +++++++++++++++++++++++++++++++++++++++++++++------------
 matrox.h       |    6 -
 matrox_bes.c   |    7 +
 matrox_state.c |   66 ++++++++----
 4 files changed, 292 insertions(+), 82 deletions(-)



commit 9526323cca3e159c24ac55545153913bbe575c63
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 19 21:12:02 2001 +0000

    changed the default background color to a more "cooler" blue


 conf.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit d3e49eba971a86f232e57ffba10f5663ed6977cf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 19 21:07:04 2001 +0000

    Added option "--fbdev=<device>" which lets you
    specify another device than "/dev/fb0".


 core/fbdev.c |   35 ++++++++++++++++++++++++-----------
 misc/conf.c  |   22 +++++++++++++++++++++-
 misc/conf.h  |    3 +++
 3 files changed, 48 insertions(+), 12 deletions(-)



commit bb526019b27660f1b5084b937cd8e1035dfc6668
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 19 20:50:06 2001 +0000

    Renamed global symbol "vt" to "core_vt".


 inputdrivers/keyboard/keyboard.c |   41 +++++-----
 src/core/core.c                  |    2 
 src/core/vt.c                    |  146 +++++++++++++++++++--------------------
 src/core/vt.h                    |    2 
 src/directfb.c                   |    4 -
 5 files changed, 98 insertions(+), 97 deletions(-)



commit 9e2175119357828b0cdf09adfff6d5f30420410b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 19 20:30:42 2001 +0000

    Each interface con now have a long description, put it above DEFINE_INTERFACE.
    Description of structs is now put into types page.
    
    Added some text for IDirectFB.


 include/directfb.h |   24 +++++++++++++-----------
 tools/gendoc.pl    |   32 +++++++++++++++++++++++++-------
 2 files changed, 38 insertions(+), 18 deletions(-)



commit 943754f50a62b0bddd24740d8f91e1e72a0bccd9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 15 02:29:00 2001 +0000

    After a window gets closed make sure another window gets the focus if any.


 windows.c |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)



commit 3a6db05db001a8abcab56e6170bbb9ad65f720fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 15 00:55:31 2001 +0000

    Reenabled changing of controlling tty when vt switching is used.
    This is needed, otherwise mode switching ioctls have no effect.


 keyboard.c |   12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)



commit b45b82d58c3239a507bb08a5c36315e0f4c54420
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 12 12:24:42 2001 +0000

    Use video alpha method when modifying destinations alpha channel.
    Text and blended blits look much better now when done on a window with alpha.


 matrox_state.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit c045162ee3d7fa0cb131ac72a6076171945c837e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 12 00:03:04 2001 +0000

    Several enhancements make DirectFB now really usable with "--no-vt-switch",
    with this option you are able to run DirectFB programs without super user
    privileges. You need read/write access to /dev/fb and you should start it from
    the console, i.e. not within X.
    
    DirectFB now restores the palette during deinitialization.
    DirectFB now turns cursor and blanking back on.
    DirectFB now restores the terminal attributes like local echo.


 inputdrivers/keyboard/keyboard.c |   31 +++++++++++++++++++------------
 src/core/fbdev.c                 |   29 ++++++++++++++++++++++++++++-
 src/core/fbdev.h                 |    1 +
 3 files changed, 48 insertions(+), 13 deletions(-)



commit 6a6dc0e18baded8e8f43cf7544c72885bf092384
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Oct 10 13:21:50 2001 +0000

    Added checks for supported source formats.


 matrox.c |   25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)



commit 0e8ba28f155e34eed93cc97dd3784198e629fa23
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 9 08:49:33 2001 +0000

    Better check for supported/unsupported pixelformats.


 matrox.c |   50 +++++++++++++++++++++++++++++++++++---------------
 1 file changed, 35 insertions(+), 15 deletions(-)



commit d518e865e5541a30a57cd91037859d8cac545ec7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Oct 8 07:08:46 2001 +0000

    Source surfaces are now locked before destination surfaces.
    Commented out error message of FreeType2 Font loader when
    the file could not be opened.


 core/gfxcard.c        |   14 ++++++++------
 gfx/generic/generic.c |   17 ++++++++++-------
 2 files changed, 18 insertions(+), 13 deletions(-)



commit 885edeb232aff1529438ee82d84654fed47e1ebf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Oct 7 03:55:30 2001 +0000

    Ready for 2.4.10 neofb.


 neofb-0.2.1-linux-2.4.10.patch.bz2 |binary
 1 file changed



commit c509539543ab25dd28fd7388583e05633ce5b74f
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Oct 7 03:07:11 2001 +0000

    fixed warning


 generic.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit bb1d8763ab4f1b81b165078a01c8a4da1d97d928
Author: Andreas Hundt <andi@directfb.org>
Date:   Sun Oct 7 03:01:58 2001 +0000

    added 8bit RGB332 pixelformat. This is usefull to test DirectFB on old unix
    workstations which had 8-bit framebuffers on board (sparc,pa-risc,mips)
    Implementation in not complete yet.
    
    If you want RGB332 for any reason, you have to enable it at compile time using
     ./configure  --enable-rgb332


 acconfig.h                                                      |    1 
 configure.in                                                    |   10 
 include/directfb.h                                              |    4 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   23 +
 src/core/fbdev.c                                                |   71 +++++
 src/gfx/convert.h                                               |    6 
 src/gfx/generic/generic.c                                       |  136 +++++++++-
 src/misc/gfx_util.c                                             |    6 
 8 files changed, 251 insertions(+), 6 deletions(-)



commit 56e3728eca88eea44118f28949eee40527f968ea
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Oct 5 19:27:21 2001 +0000

    fixed gcc-3.0 warnings.


 core/layers.c         |    9 +++++----
 gfx/generic/generic.c |    9 ++++++---
 2 files changed, 11 insertions(+), 7 deletions(-)



commit 7d225e0b498a49a5ddbb2be22a9c558df95390b5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Oct 5 13:17:22 2001 +0000

    Do a more verbose error message if no supported modes were found in
    /etc/fb.modes and the current mode is not supported, too.
    Pixelformat of current mode is printed in this case.


 fbdev.c |   18 +++++++++++++++---
 1 file changed, 15 insertions(+), 3 deletions(-)



commit eb7bab13392acbe2d5f01acc5a0f8979aa637846
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 2 22:07:52 2001 +0000

    R34D7 4 D4 R3L3453


 ChangeLog |   34 ++++++++++++++++++++++++++++++++++
 NEWS      |    1 +
 2 files changed, 35 insertions(+)



commit 6b4f98844efdf45cad3747ca72315d37ee54e4cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 2 22:04:19 2001 +0000

    Added 'IDirectFBDisplayLayer::Set/GetColorAdjustment()' along with four
    capability flags for each adjustment (brightness, contrast, hue, saturation).
    
    Implemented color adjustment for Matrox BES
    (brightness and contrast supported in YUV only).


 examples/df_layer.c                 |   14 +++++++++++++
 gfxdrivers/matrox/matrox_bes.c      |   37 +++++++++++++++++++++++++++++++----
 gfxdrivers/matrox/regs.h            |    1 
 include/directfb.h                  |   37 ++++++++++++++++++++++++++++++++++-
 src/core/layers.h                   |   38 +++++++++++++++++++-----------------
 src/display/idirectfbdisplaylayer.c |   31 ++++++++++++++++++++++++++++-
 6 files changed, 135 insertions(+), 23 deletions(-)



commit 5d3c9095555c8b7d02fc7e6eb58931199e2193b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 2 20:10:37 2001 +0000

    Fixed documentation generation according to distcheck's complains.


 configure.in          |    1 +
 docs/.cvsignore       |    1 -
 docs/Makefile.am      |   11 +----------
 docs/html/.cvsignore  |    3 +++
 docs/html/Makefile.am |   13 +++++++++++++
 tools/gendoc.pl       |    8 ++++----
 6 files changed, 22 insertions(+), 15 deletions(-)



commit 364b8b0ff20ebbde50d98e1f5328b8ac3948d8d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 2 15:38:42 2001 +0000

    Updated ChangeLog and summarized changes since 0.9.5 in NEWS.
    Changed version number to 0.9.6 by previous commit.


 ChangeLog |  280 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   25 +++++
 2 files changed, 305 insertions(+)



commit 89cc3f0689db45c9e8f81531cc9dc6fd49f54f06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Oct 2 15:35:48 2001 +0000

    We now accept compatible pixelformats,
    e.g. IPAQ's RGB format is compatible with RGB16.
    
    Added evil workaround for automake using non substituted @AS@ like a gcc.
    
    Added stamp-h1 to .cvsignore


 .cvsignore       |    1 +
 configure.in     |   11 ++++++++++-
 src/core/fbdev.c |   52 ++++++++++++++++++++++++++++++++--------------------
 3 files changed, 43 insertions(+), 21 deletions(-)



commit 19f2f467e0851252d4292e1344181b18c9a285df
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 27 03:56:13 2001 +0000

    Check enter/leave and focus after ungrabbing pointer.


 windows.c |    2 ++
 1 file changed, 2 insertions(+)



commit 408edc2205b1049ad098898f11440ce81caf6631
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 26 18:20:46 2001 +0000

    Benchmark size is automatically shrinked to fit the screen, e.g. for 320x240.


 df_dok.c |   12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)



commit c478fe0c659b639463cbb20eb195eb92d2ea8612
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 26 17:56:09 2001 +0000

    Eek, broke button press/release, fixed ;)


 h3600_ts.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e52b138819af0abcb7f3bde75a0d989743887222
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 26 17:51:20 2001 +0000

    If there is no pressure, the x/y fields seem to be invalid.
    Check them only if there is pressure.


 h3600_ts.c |   52 +++++++++++++++++++++++++++++-----------------------
 1 file changed, 29 insertions(+), 23 deletions(-)



commit 86edba4110566931eaec72c5496e433b6b3a49ff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 26 17:31:33 2001 +0000

    Fixed handling of absolute axis coordinates in window stack cursor handling.


 windows.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 76ce6ead53befac36ba52ee27da30859c3464763
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Sep 26 16:47:19 2001 +0000

    Added untested H3600 Touchscreen driver.
    
    Fixed definition of DFXL_ALL (DFXL_FILLTRIANGLE was missing).


 configure.in                      |   44 ++++++----
 include/directfb.h                |    2 
 inputdrivers/Makefile.am          |    9 +-
 inputdrivers/h3600_ts/.cvsignore  |    6 +
 inputdrivers/h3600_ts/Makefile.am |   21 +++++
 inputdrivers/h3600_ts/h3600_ts.c  |  156 ++++++++++++++++++++++++++++++++++++++
 6 files changed, 220 insertions(+), 18 deletions(-)



commit ac463fe40c03c9f210c7a71e9e9ee27da9a22551
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 23 04:33:00 2001 +0000

    Use 'DFBCALLOC' in 'DFB_ALLOCATE_INTERFACE', forgot that one.
    
    Fixed small event dispatching bug in window stack, a button event
    was sent to the focused window even if it's not under the cursor
    and doesn't grab the pointer.
    
    When CapsLock is hold down you can raise
    the window under the cursor with a click.
    
    
    
    The following changes fix problems related to heavy threading,
    e.g. more than 50 threads on my machine actively using DirectFB:
    
    Added 'surfacemanager_lock/unlock()' and divided surface manager functions
    into two groups: functions doing the lock themselves and functions that can
    only be called between lock/unlock. Functions doing the lock themself must
    not be called between lock/unlock.
    
    Added 'state_lock/unlock(state)' that are called in drawing/blitting functions
    from 'gfxcard.c'. Merged 'card->source_locked' and 'source_locked (generic.c)'
    into new 'state->source_locked'.
    
    Added 'buffer->video.locked' so the surface manager does not try to kick out
    surface buffers that are currently locked, which could end up in a dead lock.


 include/directfb_internals.h                                   |    2 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   14 +
 src/core/gfxcard.c                                             |   52 +++++-
 src/core/gfxcard.h                                             |    5 
 src/core/state.h                                               |   18 ++
 src/core/surfacemanager.c                                      |   84 ++++++----
 src/core/surfacemanager.h                                      |   40 ++++
 src/core/surfaces.c                                            |   47 +++++
 src/core/surfaces.h                                            |    2 
 src/core/windows.c                                             |   10 -
 src/gfx/generic/generic.c                                      |    8 
 11 files changed, 220 insertions(+), 62 deletions(-)



commit bdec189bdf26ca618a733c91d82ea9a94897dd26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Sep 22 21:25:01 2001 +0000

    Added "-lm" for df_layer.


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ae0c3f7618819f1593e07f9c2a68b7cb12a9ab47
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 21 21:34:12 2001 +0000

    Fixed "Could not disallocate VT" problem, exit handler calls normal
    deinit function now instead of the emergency deinit. Additionally
    input devices are deinitialized from emergency deinit.
    
    Fixed problem with malloc/free debugging that occured when exit handler
    for memory leak checking was called before exit handler of the core.
    Memory leak checking is now called at the end of the core exit
    handler if debugging is enabled.


 core/core.c  |    9 +++++++--
 core/input.c |   24 +++++++++++++-----------
 core/vt.c    |   26 +++++++++++++++-----------
 misc/mem.c   |   27 +++++----------------------
 misc/mem.h   |    2 ++
 5 files changed, 42 insertions(+), 46 deletions(-)



commit 251dec9af7bdc797d2c0ab3131241408418964bc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 21 15:19:43 2001 +0000

    Fixed segfault when loading big PNGs, seems that there was a problem
    with alloca. However it works with malloc, but maybe the problem is that
    libpng has a bug that does no harm when using malloc, because of other
    address ranges.
    
    Also switched to 'png_read_image()' to have deinterlacing handled automatically.


 idirectfbimageprovider_png.c |  111 ++++++++++++++++++-------------------------
 1 file changed, 48 insertions(+), 63 deletions(-)



commit 0b67da2772812ecd6f0a7e47fb9ce1a75286a780
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 21 00:37:30 2001 +0000

    Fixed surface manager bug. When surface gets kicked out of video memory,
    make sure that the system memory instance of the buffer is up to date.
    This fixes "missing font letters" for example.


 surfacemanager.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 4926a68e0d20c35d1d7c85151809ff52dfd93c98
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 18 21:54:17 2001 +0000

    Added result 'DFB_DESTROYED' which is currently returned by 'IDirectFBWindow'
    and 'IDirectFBSurface' if the window or surface has been destroyed.
    
    Added window event type 'DWET_DESTROYED' and changed meaning of 'DWET_CLOSE'.
    -          DWET_CLOSE          = 0x00000004,  /* window got closed by window
    -                                                manager or the application
    -                                                itself */
    +          DWET_CLOSE          = 0x00000004,  /* closing this window has been
    +                                                requested only */
    +          DWET_DESTROYED      = 0x00000008,  /* window got destroyed by global
    +                                                deinitialization function or the
    +                                                application itself */
    
    Added 'IDirectFBWindow::Close()' that puts a 'DWET_CLOSE' event into the
    window's event queue. The event dispatcher thread can then decide to close it.
    
    Added 'IDirectFBWindow::Destroy()' which actually destroys the window after
    sending a 'DWET_DESTROYED' event, so the event dispatcher thread can notice and
    release any interfaces belonging to it.
    
    After a window has been destroyed by 'IDirectFBWindow::Destroy()' most functions
    of 'IDirectFBWindow' will return 'DFB_DESTROYED'.
    
    There is no need to destroy windows explicitly with this new function if no
    threads are doing 'WaitForEvent()'. If an 'IDirectFBWindow' has no more
    references after 'Release()' the window gets destroyed implicitly if it hasn't
    been destroyed before.
    
    
    If you hold down 'CapsLock' over a window (as if you want to move it) and press
    the key 'C' a 'DWET_CLOSE' will be sent to the window.


 include/directfb.h                    |   40 ++++++++++--
 src/core/windows.c                    |   41 +++++++------
 src/directfb.c                        |    6 +
 src/display/idirectfbsurface.c        |   62 +++++++++++++++----
 src/display/idirectfbsurface_layer.c  |   16 +++--
 src/display/idirectfbsurface_window.c |   28 +++++---
 src/windows/idirectfbwindow.c         |  107 +++++++++++++++++++++++++++++++---
 7 files changed, 241 insertions(+), 59 deletions(-)



commit 183bbecc2c2f07c4736160e6cffd0b5a5b0719b0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Sep 16 09:46:51 2001 +0000

    Matrox Backend Scaler support added.
    YUY2 added.
    
    With a matrox try: df_layer <any.avi>


 examples/df_layer.c                                                  |   41 
 gfxdrivers/matrox/Makefile.am                                        |    1 
 gfxdrivers/matrox/matrox.c                                           |   40 
 gfxdrivers/matrox/matrox_bes.c                                       |  412 ++++++++++
 gfxdrivers/matrox/mmio.h                                             |    3 
 gfxdrivers/matrox/regs.h                                             |   10 
 include/directfb.h                                                   |    6 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   51 -
 src/core/gfxcard.c                                                   |  178 +---
 src/gfx/generic/generic.c                                            |  152 +--
 10 files changed, 674 insertions(+), 220 deletions(-)



commit cd99ba0285874fc1ec5d554099e9aaf04d96ad60
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Sep 14 00:23:56 2001 +0000

    df_layer now links against $(AVIFILE_LIBS).


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit cc00d022b03213175ab0e31b9fed948cace4c15d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 13 23:49:27 2001 +0000

    Forgot to set DLCAPS_SURFACE for primary layer (fbdev).
    Just changed the name of a function parameter in 'layers.h'.


 fbdev.c  |    2 +-
 layers.h |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)



commit a53b8beb1e4467742880b7b1a755e5ce7ce58467
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 13 23:39:22 2001 +0000

    Added new window capability, from the header:
    
    DWCAPS_DOUBLEBUFFER ... /* The window's surface is double
                               buffered. This is very useful
                               to avoid visibility of content
                               that is still in preparation.
                               Normally a window's content can
                               get visible before an update if
                               there is another reason causing
                               a window stack repaint. */
    
    
    Use 'alloca()' in 'IDirectFB::CreateImageProvider()' instead of 'malloc()',
    return appropriate error if file could not be opened.


 include/directfb.h                    |   11 ++
 src/core/surfaces.c                   |   11 ++
 src/core/windows.c                    |  158 +++++++++++++++++++++-------------
 src/core/windows.h                    |    4 
 src/display/idirectfbsurface_window.c |   44 ++++++---
 src/idirectfb.c                       |   10 --
 6 files changed, 156 insertions(+), 82 deletions(-)



commit 5fde11e5f990ced53459a712d8b0756aff3c3241
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 13 22:41:40 2001 +0000

    Added simple layer example which plays a video onto the second layer.


 .cvsignore  |    1 
 Makefile.am |    5 +-
 df_layer.c  |  145 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 150 insertions(+), 1 deletion(-)



commit 6aeaa1bb3d376dc2711e4f3145a0b3d75b82e23c
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri Sep 7 00:04:28 2001 +0000

    in driver_deinit() card is set a state, where the aty128fb driver should never
    hang.


 ati128.c |   23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)



commit 7b2e3eef289d9cc93c5a0ee2296fc7b727cd4fc7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 6 23:15:33 2001 +0000

    The file descriptor of the allocated VT is now closed before deallocation.
    Added error checking to deallocation code.


 vt.c |   15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)



commit 23d8ccf08d9e55e81076e6d95bd6a9f1fbd528ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 6 22:48:08 2001 +0000

    Call 'sched_yield()' after mutex lock failed.
    Call graphics card driver deinit in emergency deinit.


 core.c |    5 +++++
 1 file changed, 5 insertions(+)



commit 219c175c1cabf7890462b6433da10dde8f55ae10
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Sep 6 20:31:06 2001 +0000

    Wrote a summary of changes after 0.9.4.


 ChangeLog |  716 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS      |   23 +
 2 files changed, 738 insertions(+), 1 deletion(-)



commit d586de4e1907ceb33be948354d418965c167a330
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Sep 6 19:56:55 2001 +0000

    enumeration callbacks return DFBEnuerationResult now (no more warnings)


 df_joystick.c |    4 ++--
 df_video.c    |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)



commit ee34e0dd5d8bd7c1a6a0f773eb316ae765c81846
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Sep 4 16:50:09 2001 +0000

    Added a return value type for enumeration callbacks: DFBEnumerationResult.
    There are two possible values: DFENUM_OK and DFENUM_CANCEL.


 include/directfb.h |   14 +++++++++++---
 src/idirectfb.c    |   18 +++++++++++-------
 2 files changed, 22 insertions(+), 10 deletions(-)



commit 89b800f933c5904ab0e2877cf8ab5ec70b17359d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Sep 3 01:15:33 2001 +0000

    Accept interlaced and double scan modes, 320x200 looks really cool in some way.
    
    Here is a 320x200 entry for fb.modes:
    
    mode "320x200-70"
        geometry 320 200 320 200 16
        timings 79440 16 16 20 4 48 1
        double true
    endmode


 fbdev.c |   40 +++++++++++++++++++---------------------
 1 file changed, 19 insertions(+), 21 deletions(-)



commit 1ee50193f3f31e8491580b3801e063c6f16f0589
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Sep 2 22:58:05 2001 +0000

    Don't use the ERRORMSG() macro in DirectFBCreate() to bail out in case of
    dfb_config == NULL because ERRORMSG() uses dfb_config->quiet.


 directfb.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)



commit ea292ae71cf8d11c9454b077cc5942a802ead56c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 30 07:28:17 2001 +0000

    Added the field "video_memory" to "DFBCardCapabilities" which specifies
    the amount of video memory in bytes.


 include/directfb.h |   26 ++++++++++++++------------
 src/idirectfb.c    |    3 ++-
 2 files changed, 16 insertions(+), 13 deletions(-)



commit c076231bbb1960fdfc2b88bf60da307883b28658
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 30 07:19:57 2001 +0000

    It's now possible to move the window under the cursor by holding down CapsLock.
    Should this be optional as it renders the key useless for windowed apps?


 windows.c |   55 +++++++++++++++++++++++++++++++++++++------------------
 windows.h |    1 +
 2 files changed, 38 insertions(+), 18 deletions(-)



commit 7f2ac96c070eea077fc1384d5a8d2f99a645bda7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 30 06:54:12 2001 +0000

    Check for "card != NULL" and "vt != NULL" in emergency shutdown
    which can happen before these are initialized.


 core.c |   23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)



commit 11e07d411df2cccd7e3e064ff5f6cfbe8525f60c
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 27 14:48:27 2001 +0000

    Added more keycodes to make the demos useable with remote controls.


 df_andi.c       |    3 +++
 df_neo/df_neo.c |    1 +
 2 files changed, 4 insertions(+)



commit 8b8853a73d1e86c718e648f441c513c1872be067
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 27 03:04:31 2001 +0000

    fill all 32 bit of FCOL


 matrox_state.c |    6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)



commit bbfd5d4917fdbb7209ee8821c7f9bd7977212a57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 23 20:48:57 2001 +0000

    Reverted last patch that disabled deinit/init during suspend/resume.


 input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2f5a3381a4180a8291125c367b5479a296e4dc5b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 21 02:37:15 2001 +0000

    Release destination surface in destruct method if still playing.


 idirectfbvideoprovider_avifile.cpp |    5 +++++
 idirectfbvideoprovider_libmpeg3.c  |    7 +------
 idirectfbvideoprovider_swf.c       |    7 +------
 3 files changed, 7 insertions(+), 12 deletions(-)



commit ab394940984a2fc63c140633940535f3dde42f4e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 20 19:28:56 2001 +0000

    dont deinit/init input drivers during suspend/resume


 input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 5c7b5fc3e0d1df1f9d47568934e547d2b9dfd7ca
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Aug 20 16:06:45 2001 +0000

    Added DFDESC_WIDTH and the appropriate field in the description to
    specify font widths differing from the height, e.g. for non-square pixels.


 directfb.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 1f914f019fcb6fb927ebfbdeb06ab20fe26e4b72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 17 10:09:03 2001 +0000

    detach from reactor AFTER 'window_remove()' so we get the DWET_CLOSE event


 idirectfbwindow.c |   26 +++-----------------------
 1 file changed, 3 insertions(+), 23 deletions(-)



commit 91eed47ac807b3452ef9cb226a215c2748923ba9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Aug 17 05:22:53 2001 +0000

    In 'core_deinit_emergency()', e.g. when a signal is caught, try to prohibit
    graphics hardware access by doing a 'gfxcard_sync()' and a
    'pthread_mutex_trylock()' on 'card->lock' up to 100 times,
    this may fail if the current thread locked it itself.
    
    Fixes corruption of X when moving the mouse cursor during a crash.


 core.c |   27 ++++++++++++++++++++-------
 1 file changed, 20 insertions(+), 7 deletions(-)



commit 2d28f191cac6383d9808772d955e37cd3bf91e40
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 16 21:32:46 2001 +0000

    When blitting with blending don't read the destination and don't add it
    to the source if DSBF_ZERO is set as the destination blend function.
    Some comments added in gAcquire for better getting-into-the-code-again :)


 generic.c |   43 +++++++++++++++++++++++++++++--------------
 1 file changed, 29 insertions(+), 14 deletions(-)



commit 546bc9325eed0acd700e01cf37189d424d1e7706
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 16 00:13:01 2001 +0000

    The transparent color index did not always refer to a unique color in the
    color table, i.e. it's just the index that makes the pixels transparent.
    Current version uses an artificial colorkey and preserves non-transparent
    pixels from being the same color as the key, at least for RGB565.
    Not the best solution yet though.


 idirectfbimageprovider_gif.c |   26 +++++++++++++++++++-------
 1 file changed, 19 insertions(+), 7 deletions(-)



commit 02129a00c81c5c7a9ad77c5e6f7cd798a8cc9a39
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 12 01:20:51 2001 +0000

    DFBFontDescription's field 'attributes' was not of type 'DFBFontAttributes'.


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b1553f22a6d230e44ac8e36c3c5c52e8c62f1d53
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 11 20:17:13 2001 +0000

    release font in deinitialization


 df_dok.c |    1 +
 1 file changed, 1 insertion(+)



commit 425951eac14b106528f29ebc7985ec913bd7882b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 11 17:30:22 2001 +0000

    Fixed segfault in 'fonts_destruct()' that occurs if no glyph
    has been loaded at all (check for font->glyph_infos != NULL).
    
    Added unlocking and font releasing to destruct functions of
    Window and Layer implementation of IDirectFBSurface, too.


 core/fonts.c                      |    6 ++++--
 display/idirectfbsurface_layer.c  |    5 +++++
 display/idirectfbsurface_window.c |    5 +++++
 3 files changed, 14 insertions(+), 2 deletions(-)



commit 3a53e4c3af5c570751dfcd3cd21e9c729ee28c2e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 11 02:10:25 2001 +0000

    Added cleanup handler that stops capturing.
    This handler gets called by core_deinit() and core_deinit_emergency().
    The only way to keep it capturing is to kill it with signal 9
    or disable signal handling.


 idirectfbvideoprovider_v4l.c |   26 ++++++++++++++++++++------
 1 file changed, 20 insertions(+), 6 deletions(-)



commit 8b09ee41f9079c9fc6f0acf9cc8a7ed0cf4683aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 11 01:53:39 2001 +0000

    sig_remove_handlers was an implicit declaration, added it to the header


 sig.h |    5 +++++
 1 file changed, 5 insertions(+)



commit 94dd477280aebc815801c627ea6c875adb7d4650
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Aug 11 01:45:00 2001 +0000

    remove signal handlers in deinitialization, fixes the following bug message:
    
    (!) --->  CAUGHT SIGNAL 2  <---
     (!?!)  *** BUG ALERT [vt_close() multiple times] *** vt.c (77)


 core.c |    4 ++++
 1 file changed, 4 insertions(+)



commit c737e3042372ff952de9ffd6a5e9329063d6dea0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Aug 9 23:00:31 2001 +0000

    Added 'IDirectFBImageProvider->GetImageDescription' which fills out
    a 'DFBImageDescription', it contains a 'DFBImageCapabilities' field
    with the flags 'DICAPS_ALPHACHANNEL' and 'DICAPS_COLORKEY' for now.
    Additionally the Image Description contains the colorkey if
    DICAPS_COLORKEY is set, e.g. when loading a transparent GIF.
    
    The GIF loader no longer generates an alphachannel from the colorkey,
    because it turned the transparent color into black.
    
    If you want to have transparent GIFs,
    use colorkeying which is way faster anyway.
    
    
    TODO: Turn 'IDirectFBSurface->SetSrcColorKey()' into a pixelformat
    independent function that is called on the source for keyed blitting
    to a destination, currently the colorkey of the source is set at the
    destination in the source's pixelformat.


 include/directfb.h                                              |   34 +
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c  |  305 ++++++----
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c |   76 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c  |  111 ++-
 4 files changed, 339 insertions(+), 187 deletions(-)



commit 14ffa404c40dde53507fb97fa8e02885cfa462dc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Aug 7 23:44:22 2001 +0000

    - Major cleanup.
    - Blending state fixes.


 matrox.c       |  253 ++++++++++++++++++++++++++++++++++++---------------------
 matrox.h       |    3 
 matrox_state.c |  154 ++++++----------------------------
 matrox_state.h |    7 -
 4 files changed, 193 insertions(+), 224 deletions(-)



commit 9534b0ea6a489b775fce0356e17332852b088423
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Aug 6 22:54:41 2001 +0000

    added more info to the header file (and thus to the generated documentation)


 directfb.h |   81 ++++++++++++++++++++++++++++++++++++++++++++++---------------
 1 file changed, 62 insertions(+), 19 deletions(-)



commit 2fe2320b4b974b2daea7cae4176941299990be2c
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Aug 6 11:58:34 2001 +0000

    compile fix for mips, alpha and sparc architectures. SIGUNUSED is not
    defined in asm/signal.h on these platforms.


 vt.c |   13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)



commit 969b9ff8664c6cebf72d3e51050fa569b85f2089
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 5 19:37:50 2001 +0000

    Added character keys, only keys not in the list are F1 - F12,
    should we add them, too?


 lirc.c |   27 +++++++++++++++++++++++++++
 1 file changed, 27 insertions(+)



commit 192d32350e2b572a3ddc0b76679518852b4dbdfd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Aug 5 19:29:45 2001 +0000

    Added fiorst version of a LIRC input driver.
    
    Simply name your keys (in the lirc config file) like the DirectFB keycode
    enum does without the "DIKC_" prefix, e.g. "OK", "MENU" or "VOLUMEUP".


 configure.in                  |    1 
 inputdrivers/Makefile.am      |    1 
 inputdrivers/lirc/.cvsignore  |    6 
 inputdrivers/lirc/Makefile.am |   21 ++
 inputdrivers/lirc/lirc.c      |  301 ++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 330 insertions(+)



commit e1095b423a9472206fa73feaab6dc4fc4c254a24
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Aug 1 18:39:36 2001 +0000

    use surface width instead of pitch for texture width


 matrox_state.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 2dad9c30386deb9100587b351747d9aa6cfd98c5
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue Jul 31 16:24:44 2001 +0000

    fixed small render bug in StretchBlit()


 matrox.c |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit ba8311a3fa9f80b24919f36a89097c65fdb597f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 28 19:28:22 2001 +0000

    handle case where $target is not set at all (tested for "NONE" before)


 configure.in |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit b621310ea7f1608cf14193dca61be7cba3f6da7d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 28 07:03:20 2001 +0000

    Memory debugging is thread safe now.
    Instead of exitting send SIGTRAP to ourself, when inconsistency is detected.


 mem.c |   37 ++++++++++++++++++++++++++++++++-----
 1 file changed, 32 insertions(+), 5 deletions(-)



commit ef06f19f99af36abc736e17655f70f849693d888
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 26 02:52:02 2001 +0000

    New memory allocation debugging code that prints out a list of unfreed
    areas with function name it was allocated in, file and line number.
    
    Deinitialization code cleaned up and reactivated.
    
    Much code cleanup (file internal functions made static and moved to the bottom).


 inputdrivers/serialmouse/serialmouse.c                              |    4 
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |    2 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c      |   11 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    7 
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c      |    7 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |   27 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c      |   11 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |    9 
 src/core/core.c                                                     |  127 -
 src/core/core.h                                                     |   14 
 src/core/coretypes.h                                                |    2 
 src/core/fbdev.c                                                    |  722 +++++-----
 src/core/fbdev.h                                                    |    5 
 src/core/fonts.c                                                    |    3 
 src/core/gfxcard.c                                                  |  161 +-
 src/core/gfxcard.h                                                  |    9 
 src/core/input.c                                                    |  165 +-
 src/core/input.h                                                    |    5 
 src/core/layers.c                                                   |  120 -
 src/core/layers.h                                                   |    2 
 src/core/reactor.c                                                  |   10 
 src/core/surfacemanager.c                                           |  249 +--
 src/core/surfacemanager.h                                           |    2 
 src/core/surfaces.c                                                 |  212 +-
 src/core/surfaces.h                                                 |    2 
 src/core/vt.c                                                       |   19 
 src/core/windows.c                                                  |   23 
 src/directfb.c                                                      |    6 
 src/display/idirectfbdisplaylayer.c                                 |    8 
 src/display/idirectfbsurface.c                                      |    7 
 src/display/idirectfbsurface_layer.c                                |    7 
 src/display/idirectfbsurface_window.c                               |    5 
 src/idirectfb.c                                                     |   18 
 src/input/idirectfbinputbuffer.c                                    |    9 
 src/input/idirectfbinputdevice.c                                    |    5 
 src/interface.c                                                     |   15 
 src/media/idirectfbfont.c                                           |    7 
 src/misc/Makefile.am                                                |    2 
 src/misc/conf.c                                                     |   11 
 src/misc/gfx_util.c                                                 |    5 
 src/misc/mem.c                                                      |  184 ++
 src/misc/mem.h                                                      |  115 +
 src/misc/tree.c                                                     |   10 
 src/misc/util.h                                                     |   43 
 src/windows/idirectfbwindow.c                                       |    9 
 45 files changed, 1381 insertions(+), 1015 deletions(-)



commit 898e8fa23246d8891334e2a15d0c4aaac86adc49
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 25 20:22:22 2001 +0000

    If debug mode is enabled all 'malloc()', 'calloc()', 'realloc()' cause a
    debug message with size, function name, file, and line number.
    Replaced some 'malloc()'/'free()' pairs by 'alloca()'.
    
    After DirectFBInit/DirectFBCreate about 1500 bytes where allocated ;-)
    Rest of the initial memory size relies to libc/libdl/libpthread.


 inputdrivers/serialmouse/serialmouse.c                              |    3 
 interfaces/IDirectFBFont/idirectfbfont_default.c                    |    9 +
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c      |    6 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c     |    8 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c      |    8 -
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c |    4 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c      |    4 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c      |    2 
 src/core/core.c                                                     |    4 
 src/core/fbdev.c                                                    |   20 ++--
 src/core/fonts.c                                                    |    5 -
 src/core/gfxcard.c                                                  |    5 -
 src/core/input.c                                                    |    5 -
 src/core/reactor.c                                                  |    5 -
 src/core/surfacemanager.c                                           |    8 -
 src/core/surfaces.c                                                 |   10 +-
 src/core/vt.c                                                       |    2 
 src/core/windows.c                                                  |    8 -
 src/display/idirectfbdisplaylayer.c                                 |    3 
 src/display/idirectfbsurface.c                                      |    2 
 src/display/idirectfbsurface_layer.c                                |    2 
 src/display/idirectfbsurface_window.c                               |    2 
 src/idirectfb.c                                                     |    8 -
 src/input/idirectfbinputbuffer.c                                    |    6 -
 src/input/idirectfbinputdevice.c                                    |    4 
 src/interface.c                                                     |    8 -
 src/media/idirectfbfont.c                                           |    2 
 src/misc/conf.c                                                     |    5 -
 src/misc/gfx_util.c                                                 |    2 
 src/misc/tree.c                                                     |    6 -
 src/misc/util.h                                                     |   47 ++++++++++
 src/windows/idirectfbwindow.c                                       |    6 -
 32 files changed, 138 insertions(+), 81 deletions(-)



commit d0392b408b891e5bc4340291720e69cd6ef11561
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 25 16:36:20 2001 +0000

    Return DFB_INVARG if text is NULL in DrawString.
    Unlock the surface in IDirectFBSurface_Destruct if it's locked.


 idirectfbsurface.c |    4 ++++
 1 file changed, 4 insertions(+)



commit cfbf118eeb964631b591831e0691815d54670e35
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 24 16:29:22 2001 +0000

    Unified types used for key_ascii and key_unicode.
    Please note that no inputdriver sets the unicode field at the moment.


 include/directfb.h               |    8 ++++----
 inputdrivers/keyboard/keyboard.c |   12 ++++++------
 2 files changed, 10 insertions(+), 10 deletions(-)



commit 1c923825655b18362fcf95d8ef6490613fbd8a80
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 24 14:43:15 2001 +0000

    Added internal surface locking flag CSLF_FORCE,
    that forces 'surface_hard_lock()' to try a video instance.
    'gfxcard_state_acquire()' uses the flag for the destination surface
    if the graphics operation is blitting.


 gfxcard.c  |    8 ++++----
 surfaces.c |    4 ++--
 surfaces.h |    2 ++
 3 files changed, 8 insertions(+), 6 deletions(-)



commit d2a79e5d877f79796c89005fa793922458b26f84
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jul 23 20:48:05 2001 +0000

    bugfix: removed free()s after provider->Release() is called. This fixes segmentation fault when using a background image.


 directfb.c |    4 ----
 1 file changed, 4 deletions(-)



commit 44d56b3306d5a9fbec4c353a6a53f941ceb19a0f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 23 18:03:37 2001 +0000

    The pitch for system memory surface buffers
    is now aligned to a multpiple of 4 bytes.
    
    Do not set SCHED_RR for input threads, use normal scheduling
    now, highest priority there is ok.


 input.c    |    2 +-
 surfaces.c |    8 ++++++++
 2 files changed, 9 insertions(+), 1 deletion(-)



commit c36a7ea73f83c60fa43b1e20914318ce0b6d4768
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon Jul 23 15:20:53 2001 +0000

    rewrote gamma initialization code, should work in all depths now.


 fbdev.c |  119 ++++++++++++++++++++++++++++++++++++++++++++++------------------
 1 file changed, 86 insertions(+), 33 deletions(-)



commit ce7b71c7a1277f439b526d0c9e0a4d84ae13e394
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 22 04:45:39 2001 +0000

    New input event field "timestamp" which can be set by the driver.
    I also added the flag "DIEF_TIMESTAMP", PS2 driver makes already usage of it.
    I reenabled setting high priority for input threads.


 include/directfb.h               |    6 +++++-
 inputdrivers/ps2mouse/ps2mouse.c |   12 ++++++++----
 src/core/input.c                 |    6 +-----
 3 files changed, 14 insertions(+), 10 deletions(-)



commit d44e1ba68359182e2ac93863172cd938894dfe89
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jul 21 04:34:18 2001 +0000

    renamed global variable "display" to "fbdev"


 core/fbdev.c   |  154 ++++++++++++++++++++++++++++-----------------------------
 core/fbdev.h   |    2 
 core/gfxcard.c |   10 +--
 idirectfb.c    |    2 
 4 files changed, 84 insertions(+), 84 deletions(-)



commit c59ece931784915e04b19fd2be33e9df8dd47d95
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 19 22:55:10 2001 +0000

    ignore file


 .cvsignore |    6 ++++++
 1 file changed, 6 insertions(+)



commit 75229ecb8087977cd3a5316318586cd849825942
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 19 22:54:46 2001 +0000

    First version of nVidia RIVA TNT/TNT2/GeForce driver.
    Accelerates FillRectangle, DrawRectangle, DrawLine, FillTriangle
    without blending, no blitting support at all.
    
    Tested on GeForce 256 SDRAM doing 830 MPixels/sec in FillRectangle.


 configure.in                  |   15 +
 gfxdrivers/Makefile.am        |    8 
 gfxdrivers/nvidia/Makefile.am |   22 ++
 gfxdrivers/nvidia/nvidia.c    |  406 ++++++++++++++++++++++++++++++++++++
 gfxdrivers/nvidia/nvidia.h    |  462 ++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 912 insertions(+), 1 deletion(-)



commit 51f1a71e6c56164d3bb043643e2c65d340aee1ed
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jul 19 12:09:46 2001 +0000

    adapted Makefile to file changes


 Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 94ffbafe4671aeca7d1175900a31e181350b30c5
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jul 18 17:22:49 2001 +0000

    ok, i will compress it...


 b/patches/aty128fb-2.4.6-benh-andi.patch.bz2 |binary
 patches/aty128fb-2.4.6-benh-andi.patch       | 1225 ---------------------------
 2 files changed, 1225 deletions(-)



commit baa50356ed313c3c47802fb1934ffcbd98a6ed50
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jul 18 17:10:32 2001 +0000

    made a new aty128fb patch based on the driver in benh's tree


 /dev/null                                       |binary
 b/patches/README.aty128fb-2.4.6-benh-andi.patch |   14 
 b/patches/aty128fb-2.4.6-benh-andi.patch        | 1225 ++++++++++++++++++++++++
 patches/README.aty128fb-fixes-patch-2.4.6       |   21 
 4 files changed, 1239 insertions(+), 21 deletions(-)



commit 485435620c7a85781692c07db628840ac547a00f
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed Jul 18 13:19:01 2001 +0000

    initialize palette/gamma during initialization. this fixes the
    "strage-color-effect" in ati framebuffer drivers without the patch in
    DirectFB/patches. A new patch that fixes only the remaining problems is
    underway.


 fbdev.c |   35 ++++++++++++++++++++++++++++++++++-
 1 file changed, 34 insertions(+), 1 deletion(-)



commit d9e2b3c8f3a25b6eb436d6a1a8b4eb8e8b8aa0da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 18 12:18:11 2001 +0000

    fixed typos


 idirectfbvideoprovider_libmpeg3.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)



commit d891d4b61527aa5251b3d5a89c9a1bd7115efdaf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 17 12:15:19 2001 +0000

    only check source format if source exists


 ati128.c |   24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)



commit 3f752c4886bbfa54c8f0a3a639434c43c7d4fc0f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 17 12:06:17 2001 +0000

    check source and destination format in CheckState,
    hopefully rejecting surfaces with width < 8 or height < 8 now.


 ati128.c |   26 ++++++++++++++++++++++++--
 1 file changed, 24 insertions(+), 2 deletions(-)



commit 0d9469a007457a87909508518ab8400bf4e0b8af
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 22:45:59 2001 +0000

    use INTERFACE_GET_DATA macro (reduced codesize by 182 lines / 0.5%)


 IDirectFBImageProvider/idirectfbimageprovider_gif.c       |   22 --
 IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |   22 --
 IDirectFBImageProvider/idirectfbimageprovider_png.c       |   22 --
 IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |  124 +++-----------
 IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   52 +----
 IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |  122 +++----------
 IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   98 ++---------
 7 files changed, 111 insertions(+), 351 deletions(-)



commit 1bf83db24ce8da9b14a05f8151212796495785d6
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 22:01:13 2001 +0000

    (IDirectFB[InputBuffer|Window]->WaitForEventWithTimeout)
    Try to lock the events_mutex and check if there are events. If no events
    are pending, get current time before locking the mutex. This way the time
    it takes to aquire the mutex is taken into account for the timeout.


 input/idirectfbinputbuffer.c |   31 +++++++++++++++++++------------
 windows/idirectfbwindow.c    |   31 +++++++++++++++++++------------
 2 files changed, 38 insertions(+), 24 deletions(-)



commit 85c098928095b67fd985dbc55c31584dd69b2939
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 18:49:34 2001 +0000

    Added IDirectFB->CreateInputBuffer() that allows to easily create input
    buffers for specific events.
    
    Use the new function in a number of demos.
    
    Bumped version number to 0.9.5.


 NEWS                     |    4 ++++
 configure.in             |    2 +-
 examples/df_andi.c       |    8 ++------
 examples/df_dok.c        |   10 +++-------
 examples/df_neo/df_neo.c |   19 +++++++++----------
 include/directfb.h       |   11 +++++++++++
 src/idirectfb.c          |   32 ++++++++++++++++++++++++++++++++
 7 files changed, 62 insertions(+), 24 deletions(-)



commit 36d3c50cafd57f00f38fd561a16f63fcacfd646a
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 17:20:17 2001 +0000

    Added some more keys (ESC, Q, BACK, STOP) that quit the demos to make them
    useable with remote controls.


 df_andi.c       |    6 +++++-
 df_dok.c        |   15 ++++++++++++---
 df_neo/df_neo.c |    3 +++
 df_window.c     |   36 ++++++++++++++++++++++++------------
 4 files changed, 44 insertions(+), 16 deletions(-)



commit cecc4c565d282665493a7ac3043505230b7e29a1
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 16:21:03 2001 +0000

    Attach all inputdevices to the window stack, not only those of type
    DIDTF_KEYBOARD and DIDTF_MOUSE. Let's see if this is a good idea...


 windows.c |   10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)



commit d37196de009795cc9dc69e8b4c84eeed536d0229
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 16 15:41:11 2001 +0000

    do not sort struct entries alphabetically, keep them in the original order


 gendoc.pl |   22 +++++++++++++---------
 1 file changed, 13 insertions(+), 9 deletions(-)



commit 3cbb42db9822b59540c8bdc8bfbf59ef69824b78
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 15 00:22:01 2001 +0000

    Forced CCF_CLIPPING to 0x00000001, was 0 before (first enum value).
    No hardware clipping has been used while this bug existed.


 gfxcard.c |    4 ++--
 gfxcard.h |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)



commit 02d55298b58830428596d924dfb7f20c28e28f77
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 13 13:51:58 2001 +0000

    define SI_KERNEL for glibc 2.1.x


 vt.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 77ca011935795ed5c1cd6df853220a7b4ab57546
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 11 18:45:34 2001 +0000

    Fixed a bug in 'primaryFlipBuffers()' that caused windowstack updates
    that are done on the whole windowstack not to get visible when buffer mode
    is DLBM_BACKSYSTEM. (e.g. df_window with software driver)


 fbdev.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit e886636e11f4eeecaea1c84fa7cae07a77892bff
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 10 23:07:33 2001 +0000

    If a mode has been set by 'fbdev_set_mode()' and the detected
    pixelformat is DSPF_RGB15, set mode->bpp to 15.
    If mode->bpp would be 16 bit, we won't find the mode afterwards,
    because we will search for a 15 bit mode if the current pixelformat
    is DSPF_RGB15.
    
    Fixes bogus "Setting primary layer buffer mode failed!" problems.


 fbdev.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit b00b341aa7c49a2199db2fd19a4275bd6bb91e4f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jul 10 01:05:23 2001 +0000

    Added 'IDirectFBInputDevice->AttachInputBuffer()'.
    You are now able to receive events from multiple
    input devices with one buffer, nice with 'WaitForEvent()'.
    
    CAUTION: Releasing an IDirectFBInputBuffer does only detach
    from the device it was created from, following input events
    will cause a crash! Will be fixed soon.


 include/directfb.h               |   13 ++++++++++++-
 src/input/idirectfbinputbuffer.c |   11 ++++++++++-
 src/input/idirectfbinputbuffer.h |    7 +++++--
 src/input/idirectfbinputdevice.c |   15 +++++++++++++++
 4 files changed, 42 insertions(+), 4 deletions(-)



commit 417cb92fa8074bf332ba46b94b481df111803b26
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 8 13:47:54 2001 +0000

    Call 'surface_flip_buffers()' after panning instead of before.
    Do a 'gfxcard_sync()' before FBIO_WAITFORVSYNC, actually a hack to
    reduce the time between vertical retrace interrupt and pan, as panning
    does a 'gfxcard_sync()', too.
    
    Updated all patches for 2.4.6, made usage of new kernel macros like
    'interruptible_sleep_on()' in Matrox patch.


 /dev/null                                       |binary
 b/patches/Makefile.am                           |   11 -
 b/patches/README.aty128fb-fixes-patch-2.4.6     |   21 ++
 b/patches/README.matroxfb-vsync-irq-patch-2.4.6 |    4 
 b/patches/README.neofb-0.2.1-patch-2.4.6        |    2 
 b/patches/aty128fb-fixes-patch-2.4.6.bz2        |binary
 b/patches/matroxfb-vsync-irq-patch-2.4.6.bz2    |binary
 b/patches/neofb-0.2.1-patch-2.4.6.bz2           |binary
 b/src/core/fbdev.c                              |   15 -
 patches/README.atyfb_patch_2.4.0-andi           |   38 ----
 patches/aty128fb_patch_2.4.0-andi               |  206 ------------------------
 patches/matroxfb-vsync-irq.patch                |  112 -------------
 12 files changed, 40 insertions(+), 369 deletions(-)



commit d6b1afe8b9d57e9da08cf25588db38c366c1dccc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 8 09:00:17 2001 +0000

    Renamed LIBDIR to MODULEDIR and exported it in the pkgconfig file.
    This is the base directory for installed modules
    ("$exec_prefix/lib/directfb"). When installing a graphics driver
    "/gfxdrivers" has to be added to that directory.
    
    To query: "pkg-config --variable=moduledir directfb-internal"


 configure.in                                  |    4 ++--
 directfb-internal.pc.in                       |    5 ++---
 gfxdrivers/ati128/Makefile.am                 |    2 +-
 gfxdrivers/matrox/Makefile.am                 |    2 +-
 gfxdrivers/neomagic/Makefile.am               |    2 +-
 gfxdrivers/tdfx/Makefile.am                   |    2 +-
 inputdrivers/joystick/Makefile.am             |    2 +-
 inputdrivers/keyboard/Makefile.am             |    2 +-
 inputdrivers/ps2mouse/Makefile.am             |    2 +-
 inputdrivers/serialmouse/Makefile.am          |    2 +-
 interfaces/IDirectFBFont/Makefile.am          |    2 +-
 interfaces/IDirectFBImageProvider/Makefile.am |    2 +-
 interfaces/IDirectFBVideoProvider/Makefile.am |    2 +-
 src/Makefile.am                               |    2 +-
 src/core/Makefile.am                          |    2 +-
 src/core/gfxcard.c                            |    2 +-
 src/core/input.c                              |    2 +-
 src/interface.c                               |    4 ++--
 18 files changed, 21 insertions(+), 22 deletions(-)



commit 45e38fbaf1ca9fb9cf8ff279b09ab3a534bedce7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 8 07:35:35 2001 +0000

    Internal headers (all except "directfb.h") are now installed to
    "$prefix/include/directfb-internal". Files from "include", that
    are "directfb_internals.h" and "directfb-version.h", will be
    installed directly into this directory along with "idirectfb.h"
    from "src". Other headers from "src" will be in the same
    subdirectory as in the "src" tree. This way the '#include's
    are the same whether a module is built within or outside of
    the DirectFB source tree. First step to make it easier to write
    third party DirectFB modules in a seperate package.
    
    There is a new pkgconfig file "directfb-internal.pc" which will
    tell the third party configure script where the internal headers
    are installed to. It will output "$prefix/include/directfb-internal"
    when pkgconfig is called with "--cflags".
    
    Next thing to do is version checking on modules, because it probably
    will crash when using a module compiled with 0.9.4 is used with 0.9.5.


 .cvsignore              |    1 +
 Makefile.am             |    2 +-
 configure.in            |    5 +++++
 directfb-internal.pc.in |   10 ++++++++++
 include/Makefile.am     |    4 +++-
 src/Makefile.am         |    7 ++++++-
 src/core/Makefile.am    |   31 +++++++++++++++++--------------
 src/display/Makefile.am |   16 +++++++++++-----
 src/gfx/Makefile.am     |   12 +++++++++---
 src/input/Makefile.am   |   12 +++++++++---
 src/media/Makefile.am   |   10 ++++++++--
 src/misc/Makefile.am    |   16 +++++++++++-----
 src/windows/Makefile.am |   10 ++++++++--
 13 files changed, 99 insertions(+), 37 deletions(-)



commit 01b9532b20ee74b9ee5d0c27a04ff3718cffc6b6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jul 6 16:13:52 2001 +0000

    Added summary of changes between 0.9.3 and 0.9.4 to NEWS.
    Generated ChangeLog, maybe Mitch can generate the better one with LDAP support.


 ChangeLog | 3393 ++++++++++++++++++++++++++++++++++++++------------------------
 NEWS      |   33 
 2 files changed, 2164 insertions(+), 1262 deletions(-)



commit 5ece734794984b4f18935a7b89f32d80c7760e06
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jul 5 13:19:26 2001 +0000

    Removed 'Dop' as it was always set to 'Aop', besides the two filenames above
    all functions are called '... to_Aop()' now. Also made 'RUN_PIPELINE()' do a
    "do { (*funcs++)(); } while (*funcs);" instead of
    "while (*funcs) { (*funcs++)(); }".
    
    These gave up to 70% boost for drawing solid lines and rectangles on a P3 800.


 Sacc_to_Dop_rgb16_MMX.s |    8 -
 Sacc_to_Dop_rgb32_MMX.s |    8 -
 generic.c               |  341 +++++++++++++++++++++++-------------------------
 3 files changed, 173 insertions(+), 184 deletions(-)



commit e64d81b0e2ab4c9e3288088341bc822d07bffc53
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jul 4 10:20:04 2001 +0000

    First entry in our TODO file ;)


 TODO |    2 ++
 1 file changed, 2 insertions(+)



commit 319148093bd495684147b13a6c855b977aae636f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jul 3 12:11:52 2001 +0000

    reordered Cursor interface declarations to get nicer documentation


 directfb.h |   23 +++++++++++------------
 1 file changed, 11 insertions(+), 12 deletions(-)



commit 819547dc440f6826bbfda831a7de842e3ec983dd
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jul 2 19:37:22 2001 +0000

    implemented Sop_a8_set_alphapixel_Dop_a8 (untested)


 generic.c |   27 ++++++++++++++++++++++++++-
 1 file changed, 26 insertions(+), 1 deletion(-)



commit a6c6357332b89f2c636e97319d370f24b1ee70d6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 16:07:48 2001 +0000

    Do not return 'DFB_INVARG' in 'SetBackgroundMode()' on success,
    could irritate someone ;)


 idirectfbdisplaylayer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1fdfde638e9ee9d5f6bb3e1c27c0d119004714c1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 12:04:45 2001 +0000

    compile, compile


 idirectfbvideoprovider_avifile.cpp |    8 ++++----
 idirectfbvideoprovider_libmpeg3.c  |    8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)



commit 496729959159bad4eba35dc872e2cbd69b1a75ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 11:59:45 2001 +0000

    compile with recent changes to sub surface handling


 idirectfbvideoprovider_swf.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit b8c816912e09ed13b5000544f9fb4b3a5b91a896
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 11:25:37 2001 +0000

    killed one obsolete parameter and 4 FIXMEs regarding proper setting of it ;)


 windows.c |   40 ++++++++++++++--------------------------
 1 file changed, 14 insertions(+), 26 deletions(-)



commit faa4ae0454fadf496833d8ec301ac25bce134657
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 11:12:06 2001 +0000

    initial support for axis motion events with absolute values


 windows.c |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)



commit f9593f5285bd02a3d5746e0d2f3124b4aa1ef4fa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 08:38:34 2001 +0000

    Fixed a very bad bug, don't use 'realloc()' on structures containing data you
    already installed listeners for with a pointer to it as the context ;-)
    Interface constructors no longer use 'realloc()' for 'thiz->priv' to store their
    extra data, they do the (bigger) 'malloc()' themselves before calling the parent
    constructor. Each interface constructor should check for 'thiz->priv == NULL',
    if this is the case they should do the 'malloc()' and then call the parent
    constructor if one exists.
    This fixes nearly every possible bug, because listener functions wrote into
    memory where there shouldn't.
    
    New result code 'DFB_INVAREA' that is returned if a surface has no valid area
    or a region or rectangle specified does not match, e.g. SetClip returns it if
    the clipping region specified does not intersect with the current (sub) area.
    It is also returned by the drawing and blitting functions if the source or the
    destination has a current (sub) area of size 0x0. That can happen if the surface
    is a sub surface, e.g. at x = 900 and y = 600, and the surface gets resized to
    something below that.
    
    Enhanced sub surface handling, there are three rectangles along with an
    IDirectFBSurface, these are "wanted", "granted" and "current". The first one is
    the rectangle passed to 'GetSubSurface()', it doesn't matter if it's too large
    or has negative starting coordinates as long as it intersects with the "granted"
    rectangle of the parent. The "wanted" rectangle should be seen as the origin for
    operations on that surface. Non sub surfaces have a "wanted" rectangle of
    '{ 0, 0, width, height }'. The second one, "granted", is the intersection of the
    "wanted" rectangle and the "granted" one of the parent. If they do not intersect
    'DFB_INVAREA' is returned. For non sub surfaces its the same as the "wanted"
    rectangle, because it's the rectangle describing the whole surface. The "wanted"
    and "granted" are calculated just once at creation, the "current" rectangle is
    the intersection of the "granted" rectangle and the surface extents.
    'SetClip()' and many other functions are limited by that one.
    This way sub surface area information is preserved during surface resizing, e.g.
    when resizing a window. Calling 'SetClip()' with NULL causes the clipping region
    to exactly cover the "current" rectangle, also the flag 'clip_set' is cleared
    causing the clipping region to be set to the new "current" after resizing. If
    'SetClip()' is called with a clipping region specified, an intersection is done
    with the "wanted" rectangle that is then stored in 'clip_wanted' and 'clip_set'
    is set. However, if there is no intersection 'DFB_INVARG' is returned, otherwise
    another intersection is made with the "current" rectangle and gets applied to
    the surface's state. Each resize, after the "current" rectangle is updated, the
    clipping region is set to NULL or 'clip_wanted' depending on 'clip_set'.
    This way even clipping regions are restored or extended automatically.
    It's now possible to create a fullscreen primary and call 'SetVideoMode()' with
    different resolutions or pixelformats several times without the need for
    "updating" the primary surface by recreating it ;)
    
    So '->req_rect' is now replaced by '->area.wanted'
    and '->clip_rect' is replaced by '->area.current' for the most cases.
    
    'IDirectFBSurface->Lock()' now adds the "current" rectangle's offset to the base
    address, so applications should use 'GetVisibleRectangle()' before writing into a
    locked sub surface to get the offset from the "wanted" rectangle and the limits.
    If there is no "current" rectangle 'DFB_INVAREA' is returned.
    
    Added 'region_rectangle_intersect()' and did some minor optimizations.


 include/directfb.h                                             |    3 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   45 -
 src/core/surfaces.h                                            |    4 
 src/directfb.c                                                 |    2 
 src/display/idirectfbdisplaylayer.c                            |    6 
 src/display/idirectfbsurface.c                                 |  316 +++++-----
 src/display/idirectfbsurface.h                                 |   17 
 src/display/idirectfbsurface_layer.c                           |   74 +-
 src/display/idirectfbsurface_window.c                          |   71 +-
 src/input/idirectfbinputbuffer.c                               |    7 
 src/input/idirectfbinputdevice.c                               |    6 
 src/media/idirectfbfont.c                                      |    5 
 src/misc/util.c                                                |   69 +-
 src/misc/util.h                                                |    5 
 src/windows/idirectfbwindow.c                                  |    5 
 15 files changed, 362 insertions(+), 273 deletions(-)



commit b8c69347c91bf7cfa8d0283cc1d05e7967419c07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jul 2 02:24:43 2001 +0000

    SetVideoMode keeps current buffer mode, this prevents an already created
    flipping primary surface from turning into a non flipping one.
    
    Fixed 'primarySetConfiguration()' and 'primaryTestConfiguration()' for
    15 bit modes, they were broken since layer API changes last week.
    
    If 'fbdev_set_mode()' no longer overwrites the primary layer's surface
    format with DSPF_UNKNOWN in case of an error in 'fbdev_get_pixelformat()'.
    It also restores the video mode before returning DFB_UNSUPPORTED.


 core/fbdev.c |   93 ++++++++++++++++++++++++++++++++++++++---------------------
 idirectfb.c  |    2 -
 2 files changed, 61 insertions(+), 34 deletions(-)



commit 8c89046df179d49ae3c0d38c79f2ac8c124ca93d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 1 23:31:04 2001 +0000

    Added macro 'CAUTION' to "coredefs.h" that should be used when unimplemented
    features or unsolved problems have a serious impact on further execution,
    e.g. crashes or wrong behaviour.
    
    Added surface resize handling code in 'IDirectFBSurface_listener'.
    If the surface is a sub surface it's area will become the intersection
    of the old area and the new surface extents. Prints caution message if
    there is no intersection or the clipping rectangle is out of bounds.
    
    Disabled code in 'IDirectFBWindow->Resize()' that is unneeded now, because
    surface resizing is now handled in 'IDirectFBSurface_listener'.
    
    Removed 'memcmp()' in 'IDirectFBSurface->SetClip()', it's always marked as
    modified now, I hope some benchmarking will show which way is the best,
    but this mostly depends on how often 'SetClip()' is called with the same clip.
    
    Fixed typo or braino in listener attached by 'state_set_destination()'.
    
    Changes above not fully tested, will test GDK backend soon.


 core/coredefs.h            |    4 +++-
 core/state.c               |   10 +++++-----
 display/idirectfbsurface.c |   45 +++++++++++++++++++++++++++++++++++++++------
 windows/idirectfbwindow.c  |    4 ++--
 4 files changed, 49 insertions(+), 14 deletions(-)



commit c58427eca124b2d9715b97ab81a2f3b0ffd4fec9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 1 20:21:32 2001 +0000

    VT switching by pressing Ctrl+Alt+<F?> is now disabled by default, because
    it makes debugging impossible with only one machine (you cannot switch back to
    the console where you started gdb until you kill the program). The code is
    very experimental and sometimes it hangs during 'input_resume()'.
    
    Added option "--[no-]vt-switching" and wrote a better description for the
    similar looking option "--no-vt-switch", maybe we should rename that old one.


 core/vt.c   |   72 ++++++++++++++++++++++++++++++++----------------------------
 directfb.c  |   36 +++++++++++++++---------------
 misc/conf.c |   10 +++++++-
 misc/conf.h |    4 ++-
 4 files changed, 70 insertions(+), 52 deletions(-)



commit a0b6b844a7aeb667ef3fc61884f2d8ddfee602d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jul 1 20:08:01 2001 +0000

    made the "nearly black" color (#020404) "nearly black" for RGB555 (#020804)


 tux.png |binary
 1 file changed



commit cf8a8ff426194ada9997c0da9595ecd56d65cd57
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 30 14:05:21 2001 +0000

    Added internal macro 'INTERFACE_GET_DATA(i)' which checks the 'thiz' pointer,
    declares 'i_data *data', checks 'thiz->data' and writes it into 'data'.
    About 200 code lines less now ;)
    
    Added result code 'DFB_THIZNULL' and 'DFB_IDNOTFOUND'
    (returned by 'GetInputDevice' and 'GetDisplayLayer').
    
    Added 'DirectFBErrorString(result)' which returns a description string for
    the result, internally used by 'DirectFBError(msg, result)'.
    
    Added some more argument checks.


 include/directfb.h                    |   27 +-
 include/directfb_internals.h          |   17 +
 src/directfb.c                        |   99 ++++-----
 src/display/idirectfbdisplaylayer.c   |  130 ++++--------
 src/display/idirectfbsurface.c        |  358 +++++++---------------------------
 src/display/idirectfbsurface_layer.c  |   31 --
 src/display/idirectfbsurface_window.c |   27 --
 src/idirectfb.c                       |  110 +++-------
 src/input/idirectfbinputbuffer.c      |  117 ++++-------
 src/input/idirectfbinputdevice.c      |   83 ++-----
 src/media/idirectfbfont.c             |   71 ++----
 src/windows/idirectfbwindow.c         |  179 +++++------------
 12 files changed, 414 insertions(+), 835 deletions(-)



commit 7b2ec632463e731f0fb1a6938c46752ceb9e9135
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 30 11:11:22 2001 +0000

    in CreateWindow: return DFB_INVARG if height == 0 or width == 0


 idirectfbdisplaylayer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit ae124c864c877e24c69a09b3f490a7b03f1e2444
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 28 21:19:59 2001 +0000

    ooops, forgot to register the GetCapabilities method...


 idirectfbvideoprovider_libmpeg3.c |    1 +
 1 file changed, 1 insertion(+)



commit 27fd9ff761c67a2b6d09c1e6c7493f891c97bab0
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 28 10:58:54 2001 +0000

    don't try to set opacity on unexistant cursor_window


 layers.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 33686cc5ac6c668c93ed5acfeaf3035dfd6284ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 28 00:50:49 2001 +0000

    call window_repaint() on the cursor window in layer_cursor_load_default
    (fixes the bug that the cursor is invisible after enable until it is moved
    or the window stack gets repainted)
    
    do window_set_opacity() after window_init()


 layers.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 8ee31a44d44628a7b7e5fe778684ea70b4951474
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 28 00:01:16 2001 +0000

    added option "--[no-]sync" that enables/disables a call to
    "sync()" in "core_init()", default is no
    
    I will write a "sync" in my rc.


 core/core.c |    6 ++++++
 misc/conf.c |    8 ++++++++
 misc/conf.h |    3 ++-
 3 files changed, 16 insertions(+), 1 deletion(-)



commit b2f3fdb3eda23c91e2263385639cfb2c65ba0575
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 23:20:41 2001 +0000

    sig.c:
    - signal handler does a kill with the received signal instead of SIGHUP
    
    vt.c:
    - if the signal source is not the kernel, call the previously installed
      signal handler for that signal (does not seem to work for Kaffe)
    - use other signals than SIGUSR1 and SIGUSR2 that does not collide with
      Kaffe's garbage collector, a bit dirty (SIGUNUSED+10/11), but works


 sig.c |    2 -
 vt.c  |  102 ++++++++++++++++++++++++++++++++++++++++++++----------------------
 2 files changed, 69 insertions(+), 35 deletions(-)



commit 35130374ebf475226f5053749f11fdc9ff5df0dd
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 27 22:53:32 2001 +0000

    removed a trailing comma from an enum


 directfb.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit e78b05ccb25a6802e11c12ce478ebb4bbf4b0535
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 20:22:38 2001 +0000

    fixed description of SetSrcColorKey
    added initial API support for streamed video providers


 directfb.h |   26 +++++++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)



commit 72a9fad67232b6c931863fc1d83f84140f4924ce
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 17:52:36 2001 +0000

    also did the same mode checking fix for the current mode (e.g. with vesafb)


 fbdev.c |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)



commit 34ce15ba61661ade9d1a8e28c1a8f55b82607bc5
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 27 17:49:32 2001 +0000

    Renamed color to saturation in DFBColorAdjustment and friends.


 include/directfb.h                                             |   19 ++--
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c |   43 +++++-----
 2 files changed, 34 insertions(+), 28 deletions(-)



commit c0c575093b8a0d7b1c856f377d8ce9f316175a0f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 17:20:16 2001 +0000

    flickering in windowstack fixed, got broken tonight


 fbdev.c |    9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)



commit 3543270c77bd3be3beac8f965dd078ec119b39e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 17:11:20 2001 +0000

    fixed bug that caused an error "Could not set default mode!"
    if the first entry in fb.modes doesn't have 15, 16, 24 or 32 bit


 fbdev.c |   68 +++++++++++++++++++++++++++++++++++++---------------------------
 1 file changed, 40 insertions(+), 28 deletions(-)



commit 33aebdcfdf544f79283e399ab60a6f31c01cd54b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 17:09:59 2001 +0000

    applied patch from Joachim "roh" Steiger that adds missing
    pthread includes


 gfxcard.h |    2 +-
 input.h   |    2 +-
 layers.h  |    2 +-
 reactor.h |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)



commit 5b8832fb67705900e1794dab7c68b728c3ff5a72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 13:59:28 2001 +0000

    should be 0.9.4 after recent API changes


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7870fa6a95b85007d073f2d75b880af02989217c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 27 13:58:30 2001 +0000

    Changed Display Layer Configuration API:
    - DFBDisplayLayerCapabilities extended now including color keying and other
    - removed DFBDisplayLayerModeFlags, added DFBDisplayLayerOptions instead
    - added IDirectFBDisplayLayer-> Get/Set/TestConfiguration that take the new
      DFBDisplayLayerConfig for almost all settings like pixel resolution, pixel
      format, DFBDisplayLayerOptions and more
    - TestConfiguration takes an additional DFBDisplayLayerConfigFlags to
      optionally write back the settings that failed
    - removed GetSize, SetBufferMode and SetMode
    - added SetColorKey and SetScreenLocation
    
    Followed API changes in IDirectFB, IDirectFBDislayLayer, IDirectFBSurface_Layer
    and some demos.
    Cleaned 'fbdev.c' (that handles the primary layer) to follow internal display
    layer driver API changes.


 examples/df_fire.c                   |   46 ++----
 examples/df_video.c                  |    8 -
 examples/df_window.c                 |   44 +++---
 include/directfb.h                   |  162 ++++++++++++++++++-----
 src/core/fbdev.c                     |  163 +++++++++++++++++------
 src/core/layers.h                    |   35 ++---
 src/core/windows.h                   |    2 
 src/directfb.c                       |   22 +--
 src/display/idirectfbdisplaylayer.c  |  245 +++++++++++++++++++++--------------
 src/display/idirectfbsurface_layer.c |   29 ++--
 src/idirectfb.c                      |   32 ++++
 src/misc/conf.h                      |    2 
 12 files changed, 524 insertions(+), 266 deletions(-)



commit 5069d321c9844f4b4aedf41ea2164f72e6db8b93
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 27 13:32:39 2001 +0000

    check return values of new ioctl calls


 idirectfbvideoprovider_v4l.c |   18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)



commit 13d4b323c350647aeeaed5d13c2c22d2fd4277b2
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 27 11:04:18 2001 +0000

    Extended IDirectFBVideoProvider API:
      IDirectFBVideoProvider->GetCapabilities()  retrieves info about the provider
      IDirectFBVideoProvider->GetColorAdjustment()
      IDirectFBVideoProvider->SetColorAdjustment()  get and set values to
                                                    adjust the video colors
    
    The DFBColorAdjustment maps directly to the Video4Linux API. We might want
    to change it to take floating point values instead of __u16 ?!
    
    Output useful error message if doc generator dies.


 include/directfb.h                                                   |   64 +++++-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   91 ++++++--
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |   81 ++++++-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |  106 +++++++---
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   95 ++++++++
 tools/gendoc.pl                                                      |    3 
 6 files changed, 377 insertions(+), 63 deletions(-)



commit 6eccc3037b17c3abef9a4e052c8ef87ed92efeae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 26 17:21:59 2001 +0000

    don't catch SIGPOLL (a.k.a. SIGIO)


 sig.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1e9d97eb27ac794ebab46d4ee19f38686d66a290
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 25 15:38:02 2001 +0000

    Reenabled key events for windows (we lost them while adding support for
    console switching).
    
    Changed cursor handling: Cursor can be enabled/disabled and opacity can
    be set independently. Also cursor appears centered now.
    
    Process key events in df_window: Cursor keys move active window.


 examples/df_window.c                |   21 ++++++++++
 include/directfb.h                  |   14 +++++-
 src/core/layers.c                   |   74 ++++++++++++++++++++++++------------
 src/core/layers.h                   |    1 
 src/core/windows.c                  |   14 +++---
 src/core/windows.h                  |    5 +-
 src/directfb.c                      |    6 +-
 src/display/idirectfbdisplaylayer.c |   12 +++++
 8 files changed, 110 insertions(+), 37 deletions(-)



commit 9c53a4df681b0b9bc915545f75dd3b17aa385a46
Author: Sven Neumann <neo@directfb.org>
Date:   Sun Jun 24 20:45:56 2001 +0000

    fixed transparency problems for large palettes (transparent index > 127)


 idirectfbimageprovider_gif.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit a42cbd3754a5f66c1de06903815f2d5202b4a2c9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 23 13:05:28 2001 +0000

    Added console switching support during runtime!!!
    
    Experimental but working... use Ctrl+Alt + (F1 - F12) ;)
    Had to add much code to src/core/vt.c that does the
    biggest part of the job (reentrant signal handler ;-)
    Added VT_ACTIVATE code to the global keyboard handler
    in src/directfb.c, which handled Ctrl+Alt+Backspace so far.
    Also modified the keyboard driver, because vt switching
    code in src/core/vt.c already had to open the target tty.
    
    Turn on debugging during configure if you have problems with
    switching and mail the output to the developers list.
    
    
    Other fixes and additions:
    
    Another 'mga_waitfifo()' call corrected (10 -> 12).
    
    Fixed bug in 'surfacemanager_suspend()' that broke some surfaces,
    e.g. fonts. It did not assure a valid system memory instance.
    It still does not care about video only surfaces.
    
    Fixed 'reactor_dispatch()', RS_REMOVE was not handled.
    
    Added RS_DROP that tells 'reactor_dispatch()' not to do
    any further dispatching of the event.
    
    Do a 'kill (0, SIGHUP)' in signal handler instead of 'exit()',
    after all our handlers are removed, of course ;-)


 gfxdrivers/matrox/matrox_state.c |    2 
 include/directfb_internals.h     |    2 
 inputdrivers/keyboard/keyboard.c |  111 +++++++++---------
 src/core/reactor.c               |   28 ++++
 src/core/reactor.h               |    3 
 src/core/sig.c                   |   12 +-
 src/core/surfacemanager.c        |    6 -
 src/core/vt.c                    |  234 ++++++++++++++++++++++++++++++++++-----
 src/core/vt.h                    |   19 ++-
 src/directfb.c                   |   44 ++++++-
 10 files changed, 360 insertions(+), 101 deletions(-)



commit c6f3478883d846d98258af0482e96f0dd4b27cc8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 23 03:49:56 2001 +0000

    Require working frame buffer device, not only compiled in.
    Fixed a typo.


 README |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 76786fdf6920138dd7beb3f5a6e8fc399db6bbff
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 20:25:52 2001 +0000

    fixed a bug in the fb switching code that made RGB32 modes fail


 fbdev.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 951d64bd3719130416bd4c9c35042330ff0e2573
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 19:34:31 2001 +0000

    fixed another bug in copy_buffer_32().


 gfx_util.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit b2cf5f965541c9bf6ebb766ec54d6264bd128695
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 19:29:12 2001 +0000

    Fixed a stupid bug in copy_buffer_32.
    
    The PNG provider ponly writes directly to destination surface if
    format == ARGB, not if bpp == 4.
    
    The GIF provider did not take destination pitch into account.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |   12 +++-------
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c |    7 ++---
 src/misc/gfx_util.c                                            |    2 +
 3 files changed, 9 insertions(+), 12 deletions(-)



commit f05c548eb80586310e6ee637a7c14acac2bc62c2
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 19:05:42 2001 +0000

    optimzed copy_buffer_32()


 gfx_util.c |   23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)



commit 940de8cf7309deb1d91982a3b3ae9f6d3cce0531
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 17:59:55 2001 +0000

    Removed an unnecessary GetSurfaceDescription() call.


 df_window.c |    1 -
 1 file changed, 1 deletion(-)



commit a2678a2c719acf50820712b25c02bd787178304d
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 22 17:44:17 2001 +0000

    Added alpha transparency support to GIF ImageProvider.
    
    Fixed alpha handling in scale_linear_32 and copy_buffer_32:
    If the destination format does not support alpha, blend the image data
    over a black background since most images have undefined color values in
    the transparent areas.


 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c |   35 -
 src/misc/gfx_util.c                                            |  323 +++-------
 src/misc/gfx_util.h                                            |    3 
 3 files changed, 129 insertions(+), 232 deletions(-)



commit ea2443e07ad2b9739c3c9d141b4d272c9ec1a333
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 22 03:41:58 2001 +0000

    - df_dok accepts failing SetCooperativeLevel
    - df_andi and df_dok both ask the primary surface about its size
      and not the primary layer


 df_andi.c |    4 +---
 df_dok.c  |   10 ++++------
 2 files changed, 5 insertions(+), 9 deletions(-)



commit b3aa77c72a2f027213271802f65194e256a28ba8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 22 03:19:08 2001 +0000

    Added option "force-windowed" which makes SetCooperativeLevel
    return DFB_ACCESSDENIED for other levels than DFSCL_NORMAL.
    
    df_andi, df_particle and pss don't abort anymore
    if setting the cooperative level fails.
    
    Check for 'argc <= 1' instead of 'argc == 1' in df_dok,
    because 'main()' can be called with argc set to 0 ;-)
    
    Moved global variables of df_window into the main function,
    removed layer enumeration that did not make any sense because
    the IDirectFBDisplayLayer has only been constructed for the primary
    layer, and that is DLID_PRIMARY just passed to GetDisplayLayer.


 examples/df_andi.c     |   18 ++++----
 examples/df_dok.c      |    2 
 examples/df_particle.c |    4 -
 examples/df_window.c   |   67 +++++++++++++-------------------
 examples/pss.c         |  102 ++++++++++++++++++++++++-------------------------
 src/idirectfb.c        |   17 ++++----
 src/misc/conf.c        |   26 ++++++++----
 src/misc/conf.h        |    2 
 8 files changed, 123 insertions(+), 115 deletions(-)



commit c773af56feeddf8e9808ace558f685b75c1ce065
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 23:24:45 2001 +0000

    initialize AVIFILE to "no"


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 862c863656bd5b90a94f6fb10ee896921bacae0f
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 21:17:08 2001 +0000

    first check $target for system type, if $target == "NONE" check $host


 configure.in |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)



commit e2a5632383f428b8dc77568a170f37a73dc7a77b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 20:47:12 2001 +0000

    hopefully fixed the alphachannel bug from gif loading
    (internal buffer was not set to '0xFF000000 | color')


 idirectfbimageprovider_gif.c |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)



commit dcc6bc2a46c0a5a977de7b7c9ccf79e36fa9d34d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 18:36:45 2001 +0000

    Use mga_in32 in mga_waitfifo rather than mga_in8.
    Added mga_waitfifo(1) in FlushTextureCache (I forgot).
    Problems with G200@ARM are gone now.


 matrox.c |    1 +
 mmio.h   |    2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)



commit 560e4e7bb9d0d0015499782bc2401cc46467f8d8
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 21 12:43:26 2001 +0000

    forgot this one when changing the headers


 idirectfbvideoprovider_libmpeg3.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 90ae2c304a6b666ad1a212bf614bd89e62885786
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 21 12:39:02 2001 +0000

    Great Header Cleanup (TM):
    collected typedefs in core/coretypes.h
    removed inclusion of headers from most headers


 gfxdrivers/ati128/ati128.c                                           |    5 +
 gfxdrivers/ati128/ati128_state.c                                     |    4 
 gfxdrivers/matrox/matrox.c                                           |    4 
 gfxdrivers/matrox/matrox_state.c                                     |    4 
 gfxdrivers/neomagic/neo2200.c                                        |    4 
 gfxdrivers/neomagic/neomagic.c                                       |    4 
 gfxdrivers/tdfx/tdfx.c                                               |    4 
 inputdrivers/joystick/joystick.c                                     |    8 +
 inputdrivers/keyboard/keyboard.c                                     |    9 +
 inputdrivers/ps2mouse/ps2mouse.c                                     |   12 +-
 inputdrivers/serialmouse/serialmouse.c                               |   10 +-
 interfaces/IDirectFBFont/idirectfbfont_default.c                     |   11 +-
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |    9 +
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |    5 -
 interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |    5 +
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   11 +-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   16 ++-
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |   11 +-
 src/core/Makefile.am                                                 |    1 
 src/core/core.c                                                      |    8 +
 src/core/core.h                                                      |    2 
 src/core/coredefs.h                                                  |    2 
 src/core/coretypes.h                                                 |   48 ++++++++++
 src/core/fbdev.c                                                     |   16 ++-
 src/core/fbdev.h                                                     |    2 
 src/core/fonts.c                                                     |   14 ++
 src/core/fonts.h                                                     |   22 +---
 src/core/gfxcard.c                                                   |   26 +++--
 src/core/gfxcard.h                                                   |   11 --
 src/core/input.c                                                     |    8 +
 src/core/input.h                                                     |    5 -
 src/core/layers.c                                                    |   13 +-
 src/core/layers.h                                                    |    7 -
 src/core/reactor.c                                                   |    4 
 src/core/reactor.h                                                   |    3 
 src/core/sig.c                                                       |    2 
 src/core/state.c                                                     |    9 +
 src/core/state.h                                                     |    6 -
 src/core/surfacemanager.c                                            |    9 +
 src/core/surfacemanager.h                                            |    1 
 src/core/surfaces.c                                                  |    9 +
 src/core/surfaces.h                                                  |   12 --
 src/core/vt.c                                                        |    4 
 src/core/windows.c                                                   |   17 ++-
 src/core/windows.h                                                   |   12 --
 src/directfb.c                                                       |   32 +++---
 src/display/idirectfbdisplaylayer.c                                  |   20 ++--
 src/display/idirectfbdisplaylayer.h                                  |    2 
 src/display/idirectfbsurface.c                                       |   23 ++--
 src/display/idirectfbsurface.h                                       |    4 
 src/display/idirectfbsurface_layer.c                                 |   21 ++--
 src/display/idirectfbsurface_layer.h                                 |    2 
 src/display/idirectfbsurface_window.c                                |   19 ++-
 src/display/idirectfbsurface_window.h                                |    2 
 src/gfx/generic/generic.c                                            |   23 ++--
 src/gfx/util.c                                                       |   11 +-
 src/idirectfb.c                                                      |   42 ++++----
 src/input/idirectfbinputbuffer.c                                     |    5 +
 src/input/idirectfbinputdevice.c                                     |    6 -
 src/interface.c                                                      |    5 -
 src/media/idirectfbfont.c                                            |   13 +-
 src/media/idirectfbfont.h                                            |    8 -
 src/misc/conf.c                                                      |   14 ++
 src/misc/conf.h                                                      |    2 
 src/misc/gfx_util.c                                                  |   14 +-
 src/misc/gfx_util.h                                                  |    1 
 src/misc/tree.c                                                      |    4 
 src/misc/tree.h                                                      |    2 
 src/misc/utf8.c                                                      |    4 
 src/misc/utf8.h                                                      |    2 
 src/windows/idirectfbwindow.c                                        |   22 +++-
 src/windows/idirectfbwindow.h                                        |    2 
 72 files changed, 450 insertions(+), 264 deletions(-)



commit 677c11632c6873a1020f6358a8f7fc267ab61463
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 09:02:05 2001 +0000

    check for surfaces bigger than 2048x2048
    apply mask 0x7fff to pitch before setting it


 matrox.c       |    8 ++++++--
 matrox_state.c |    2 +-
 2 files changed, 7 insertions(+), 3 deletions(-)



commit a34eb374b5c0907e26a7382081783150e8e0a926
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 21 08:26:14 2001 +0000

    DIFFUSEDALPHA for BLIT_NOFX was wrong, ALPHACTRL programmed to 1 for BLIT_NOFX


 matrox_state.c |   22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)



commit 3c04c4996c112d4cd812797b1e3ba2f7d32b9cf8
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 20 16:05:40 2001 +0000

    fixed a braino and some compiler warnings


 idirectfbvideoprovider_avifile.cpp |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit e2a8d35c782de98af3329571f6af856676b062bf
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 20 14:50:04 2001 +0000

    Removed -fexpensive-optimization from compiler flags since -O2 already
    has this. Added -fomit-frame-pointer unless debugging is turned on.


 configure.in                |    4 ++--
 src/gfx/generic/Makefile.am |    4 ----
 2 files changed, 2 insertions(+), 6 deletions(-)



commit 3045ad9af272293736d6a8dab063e45f7e6ae4b9
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 19 17:22:28 2001 +0000

    optimized utf8_get_char() for the default case (7bit ASCII)


 utf8.c |   23 +++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)



commit b3750267da7369f195e37b46670a05e6c8a6cb97
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 19 17:02:08 2001 +0000

    Reduced size of fast_keys array to 96 by skipping the first 32 entries
    (not used for glyphs in 7bit ASCII).


 tree.c |   16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)



commit 1538be687788c27a7535a154f8836e45beecaa07
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 19 14:52:27 2001 +0000

    fixed 'read_modes()' and 'fbdev_set_mode()' for mode testing,
    'fbdev_get_pixelformat()' fails on some framebuffer drivers that
    do not fill out fbdev_var_screeninfo in FB_ACTIVATE_TEST mode.


 fbdev.c |    7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)



commit 5dd672a897f3dddbc3664573ded896130609513e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 19 14:15:30 2001 +0000

    don't process click events either (if cursor is disabled)


 windows.c |    3 +++
 1 file changed, 3 insertions(+)



commit b16fb855567a810b32c513275fcdd3fabe65a619
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 19 14:11:55 2001 +0000

    do not process mouse events if cursor is invisible


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 8fd6e03fbbe7478080ec0f6eed95e0bc056755ed
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 18 17:24:45 2001 +0000

    Install a KillHandler for AviPlay and delete the object on interface
    destruction. Fixes the segfault in IDirectVideoProvider_AviFile_Destruct().


 idirectfbvideoprovider_avifile.cpp |   12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)



commit 0af28fda5d9e606a163d10630de00ef4b6e2795b
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 18 11:53:42 2001 +0000

    forgot to remove debugging output


 configure.in |    1 -
 1 file changed, 1 deletion(-)



commit 9ba126148e365a78185be4e7f0beb6d0fe25844f
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 18 11:47:47 2001 +0000

    Rewrote handling of CFLAGS and CXXFLAGS so we respect the values that have
    been set before configure is run.


 configure.in |   35 +++++++++++++++++++----------------
 1 file changed, 19 insertions(+), 16 deletions(-)



commit 2eff15514a34b057a03b74c850456e9673719db5
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 18 09:33:03 2001 +0000

    Removed the utf8 optimizations (only call utf8_* funcs if c & 0x08) since
    they give no measurable speed improvement (0.0 - 0.05 %)  and may cause
    trouble for badly encoded strings.
    
    Do not insert values for fast keys into the binary tree. Free all values
    in the fast_keys array on tree destruction.


 core/gfxcard.c |    7 ++-----
 misc/tree.c    |   25 ++++++++++++++-----------
 2 files changed, 16 insertions(+), 16 deletions(-)



commit b7ccfbe2958c329ad0012dcccd46399bf0f43186
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 06:23:02 2001 +0000

    Default font loader did not set 'data->surface'.
    'gfxcard_draw_line()' is now 'gfxcard_draw_lines()'.
    Added 'IDirectFBSurface->DrawLines()'.
    df_dok uses 'DrawLines()' now for 10 lines each,
    added 'myrand()' that speeds up the benchmarks a bit, too.


 examples/df_dok.c                                |  224 ++++++++++++-----------
 include/directfb.h                               |   12 +
 interfaces/IDirectFBFont/idirectfbfont_default.c |   17 -
 src/core/gfxcard.c                               |   34 ++-
 src/core/gfxcard.h                               |    2 
 src/display/idirectfbsurface.c                   |   41 ++++
 6 files changed, 206 insertions(+), 124 deletions(-)



commit 6893690eb092879f371dc7bfefdc60bf5c4a791e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 04:39:13 2001 +0000

    Killed a modulo, a division, an array lookup and an 'if'
    for each glyph in gfxcard_drawstring:
    
    CoreGlyphData->start now is the starting x coordinate within its surface.
    Added CoreGlyphData->surface that holds the surface the glyph is in.
    
    Again, 395 -> 410 KChars/sec here.


 fonts.c   |   59 ++++++++++++++++++++++++++++++-----------------------------
 fonts.h   |   15 ++++++++-------
 gfxcard.c |   12 +++---------
 3 files changed, 41 insertions(+), 45 deletions(-)



commit 12dda36baee042b0080d68e17fd439651aed1661
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 04:12:56 2001 +0000

    Only call 'utf8_get(&c)' if 'c & 0x80'.
    Added 128 "fast keys" to tree code,
    it's an array of values for a faster lookup of keys 0 - 127.
    
    These two optimizations should increase DrawString performance on slow
    machines (even on my Celeron 533 with Matrox G400: 374 -> 395 KChars/sec).


 core/gfxcard.c |   42 ++++++++++++++++++++++------------------
 misc/tree.c    |   59 +++++++++++++++++++++++++++++++++++----------------------
 2 files changed, 60 insertions(+), 41 deletions(-)



commit 50a167da639ce7b48394fe620c16b735fb27abd7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 01:59:38 2001 +0000

    Respective error message in DirectFBError for DFB_MISSINGIMAGE.
    (did a commit on 'idirectfb.c' last time instead of 'directfb.c')


 directfb.c |   31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)



commit c55b13d1631f6161b51b5289b638d714aee9521d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 01:56:41 2001 +0000

    SetBackgroundMode returns DFB_MISSINGIMAGE if DLBM_IMAGE has been set
    without a background image being set before.


 include/directfb.h                  |    3 ++-
 src/display/idirectfbdisplaylayer.c |   11 +++++++----
 2 files changed, 9 insertions(+), 5 deletions(-)



commit e35b6231ecd65f1a4628b596c7455e01f1c5827a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 18 01:17:42 2001 +0000

    Do not use "-g" as default, add "-g3" to CXXFLAGS if in debug mode.
    
    Added new function GfxCard->FlushTextureCache: after the video memory
    has been written to by the CPU (e.g. modification of a texture) make
    sure the accelerator won't use cached texture data. This new function
    is called each surface_unlock (we should check if it was a soft lock
    to video memory).
    
    Implemented FlushTextureCache in Matrox driver, because font problems
    are solved if any TEXORGn register is written to. Maybe this is just
    a coincidence, but it works ;-)


 configure.in                     |    7 +++---
 gfxdrivers/matrox/matrox.c       |   44 ++++++++++++++++++++++-----------------
 gfxdrivers/matrox/matrox_state.c |   26 ++++++++++++-----------
 gfxdrivers/matrox/regs.h         |    1 
 src/core/gfxcard.h               |   17 +++++++++++----
 src/core/surfaces.c              |    6 +++--
 6 files changed, 61 insertions(+), 40 deletions(-)



commit c5ac13e6d6a19d9f6af9f7fd197bd1e9722056da
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 16 17:13:28 2001 +0000

    The long awaited killer feature: cursor movements are clipped by the desktop ;-)
    
    CoreWindowStack has a DFBRegion called "cursor_region",
    so we can add things like window clipped cursor during grab easily.


 windows.c |   33 ++++++++++++++++++++++++++-------
 windows.h |    4 +---
 2 files changed, 27 insertions(+), 10 deletions(-)



commit fa89e09909f3a361610ea7838700c7760c9d648b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 16 16:13:20 2001 +0000

    Replaced all identifiers "id", for Objective C and maybe other languages.


 directfb.h |   54 +++++++++++++++++++++++++++---------------------------
 1 file changed, 27 insertions(+), 27 deletions(-)



commit 6e59412338140ac131f81481c3457c0f2f34754c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 16 12:04:52 2001 +0000

    Applied patch from Till Adam <till@adam-lilienthal.de> that adds
    the IDirectFBWindow->WaitForEventWithTimeout that I forgot.


 include/directfb.h            |   12 ++++++++++++
 src/windows/idirectfbwindow.c |   40 +++++++++++++++++++++++++++++++++++++++-
 2 files changed, 51 insertions(+), 1 deletion(-)



commit ebd51ecfc61e4320b3b997413dc25bde07310fef
Author: Michael Natterer <mitch@directfb.org>
Date:   Thu Jun 14 16:37:29 2001 +0000

    Updated ChangeLog.


 ChangeLog |  422 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 419 insertions(+), 3 deletions(-)



commit f7c1e47573839d87e2323850ff1d44c64f9743ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 14 15:19:13 2001 +0000

    updated


 NEWS |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit b071df21d878fe90b681687bbebc640b2c01df61
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu Jun 14 01:40:09 2001 +0000

    compile fix for big endian machines


 raw32toraw24.c |    4 ++++
 1 file changed, 4 insertions(+)



commit 2bd4ca80e54da14c984a0086c2ced8d432eec5ef
Author: Michael Natterer <mitch@directfb.org>
Date:   Wed Jun 13 20:20:45 2001 +0000

    Re-enabled and fixed two lines which close/reopen the input devices
    on Suspend()/Resume().


 input.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 844040693e3e7ff61838b607a2f8e3d13abe1703
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 13 15:26:05 2001 +0000

    Added DIDID_REMOTE to the list of predefined device IDs.
    Uniquify device IDs.


 include/directfb.h |    8 ++++----
 src/core/input.c   |   16 ++++++++++++++++
 2 files changed, 20 insertions(+), 4 deletions(-)



commit 6e32909bbbe09eee2dcdd046ee6c80e97951b9b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 13 06:13:13 2001 +0000

    - log2 had to return ret, always
    - optimized TMU calculations, better rounding, looks always good now


 matrox.c       |   19 +++++++++++--------
 matrox.h       |    5 ++---
 matrox_state.c |    4 ++--
 3 files changed, 15 insertions(+), 13 deletions(-)



commit d5b31da1f6fa5f668e92274e2458a20d24a30b9f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 21:11:12 2001 +0000

    include Video4Linux video provider in the configure result list


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit d4ef28d42f2a5d249d0accc57725aff3dab02bc8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 21:01:46 2001 +0000

    call v4l_stop() in v4l_deinit() to eventually stop the v4l thread


 idirectfbvideoprovider_v4l.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4dbcad078491aca3b5c1830009e957d3046e12d5
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 20:50:54 2001 +0000

    use correct variables for configure result list


 configure.in |   12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)



commit b343ec672908f10f03523d688a22876f41c47c36
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 20:45:25 2001 +0000

    describe how to configure a serial mouse for DirectFB


 README |    5 +++++
 1 file changed, 5 insertions(+)



commit 1c3da755c9df6138d39b839624b142dfd91a5558
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 20:44:29 2001 +0000

    use $JPEG and $PNG


 configure.in |   12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)



commit b4383667156b0817aaf98a897ebfe6d5d2dd648c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 20:29:09 2001 +0000

    do not print "on" for MMX support


 configure.in |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 6f6fc3ebdc19c9eae186b2acbd6acf6a07754e21
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 20:18:12 2001 +0000

    Prints summary of build options and built providers/drivers.


 configure.in |   62 ++++++++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 43 insertions(+), 19 deletions(-)



commit 4ac659a8731db4acd73d0f381ad41bddee3464fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 18:24:30 2001 +0000

    added Joachim Steiger to "thanks to"


 README |    1 +
 1 file changed, 1 insertion(+)



commit 16ca71f02595ef04846686242a7d102f5b527337
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 18:11:24 2001 +0000

    Check for <linux/fb.h>
    Check which gfxdrivers can be compiled by looking at <linux/fb.h>.


 configure.in           |   47 +++++++++++++++++++++++++++++++++++++++++++++++
 gfxdrivers/Makefile.am |   21 ++++++++++++++++++++-
 2 files changed, 67 insertions(+), 1 deletion(-)



commit 612e94f83f7dc646f4a4615f081c0a7ae4c22c99
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 18:00:57 2001 +0000

    fixed typo added note about conditional build of providers


 NEWS |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)



commit 92e1d7a4b7f7742b88f7a8dd0d7f980a940c7c18
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 12 17:58:30 2001 +0000

    updated


 NEWS |   23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)



commit d027700f2e6887e60aea0525aba1d7c5c01f0d3a
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 17:24:38 2001 +0000

    update


 README |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 44935954080ff76ce61ef5365280350e71543ac3
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 17:23:57 2001 +0000

    Even more remote control keycodes.
    
    Allow conditional build of gif, jpeg and png image providers.
    Allow conditional build of freetype font provider.
    We strongly suggest you don't disable the build of these modules
    since the example code and most DirectFB apps depend on them.


 README                                        |   28 +++--
 configure.in                                  |  137 ++++++++++++++++----------
 include/directfb.h                            |   22 ++--
 interfaces/IDirectFBFont/Makefile.am          |    8 +
 interfaces/IDirectFBImageProvider/Makefile.am |   25 +++-
 5 files changed, 148 insertions(+), 72 deletions(-)



commit 804ff88aace436b082f76adaf0ed87c466a81a63
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 14:40:36 2001 +0000

    added a few more remote control keycodes we might need


 directfb.h |    8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)



commit bada3147708b91cf65eafed4e6fbebf6965d272d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 13:05:05 2001 +0000

    Added tree_lock() and tree_unlock() to allow to use the tree in a thread-safe
    way. fonts_get_glyph_data() locks and unlocks the tree so it can be called
    from multiple threads. Unfortunately this brings down performance a little.


 core/fonts.c |   74 +++++++++++++++++++++++++++++++----------------------------
 misc/tree.c  |   46 ++++++++++++++++++++++--------------
 misc/tree.h  |    2 +
 3 files changed, 69 insertions(+), 53 deletions(-)



commit 0f11fcb5a03c38bbbcac50a06e9701741302d99b
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 12 11:17:08 2001 +0000

    include <sys/time.h> and <sys/types.h> for select()


 serialmouse.c |    3 +++
 1 file changed, 3 insertions(+)



commit 4611043d3dbb3d9856b829aa25a696529e7f13d0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 11 20:53:51 2001 +0000

    fixed license, oops


 include/directfb_version.h.in                                        |   38 +++-----
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |   45 ++++------
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |   40 +++-----
 tools/gendoc.pl                                                      |   39 +++-----
 4 files changed, 66 insertions(+), 96 deletions(-)



commit 8ce42ae9b3ecd033ae0824bade3f9990c78df243
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 11 18:36:01 2001 +0000

    The old implementation of the MouseMan protocol definitely did not
    work, this one might do the trick...


 serialmouse.c |   55 +++++++++++++++++++++++++++++--------------------------
 1 file changed, 29 insertions(+), 26 deletions(-)



commit 1119186846261558439ac128e37bb516b3b657a9
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 11 18:17:26 2001 +0000

    Replaced old remote control keycodes with new unified keycodes.
    Removed special handling for remote control from keyboard driver.
    Decreased wait cycles in initialization of serial mouse driver.


 include/directfb.h                     |  231 ++++++++++++++++-----------------
 inputdrivers/keyboard/keyboard.c       |  158 ----------------------
 inputdrivers/serialmouse/serialmouse.c |    9 -
 3 files changed, 120 insertions(+), 278 deletions(-)



commit 219e158ae0327cc934943f1593339e5f95f8a03b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 11 15:43:45 2001 +0000

    split up window_create and added window_init that has to be called after
    window_create. i split it up because the code in window_init generates
    events, but the reactor can only be attached to after window_create.
    this fixes the missing initial DWET_POSITION_SIZE event.


 core/layers.c             |    2 ++
 core/windows.c            |   11 ++++++++---
 core/windows.h            |    6 ++++++
 idirectfb.c               |    2 ++
 windows/idirectfbwindow.c |    2 ++
 5 files changed, 20 insertions(+), 3 deletions(-)



commit a7ec1bfd860672f6e79805c43e31d98c38d5d90c
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Jun 11 10:26:57 2001 +0000

    Fixed a bug in window_request_focus() where the wrong window was emitting
    the DWET_LOSTFOCUS event.
    
    Rewrote large parts of df_window to make it behave more like a windowing
    system as you know it. You can specify a video file on the command line
    to bring some live into the second window.


 examples/df_window.c |  350 +++++++++++++++++++++------------------------------
 src/core/windows.c   |    2 
 2 files changed, 146 insertions(+), 206 deletions(-)



commit e32b87b009dd92d79f01e0c2576d159d145de60c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 11 02:59:28 2001 +0000

    ifdef for FB_ACCEL_MATROX_MGAG400


 matrox.c |    2 ++
 1 file changed, 2 insertions(+)



commit 71f2c71ad59c40a766ba0eb0b2adb2f3b8856a34
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 11 02:57:42 2001 +0000

    Removed signal handler for SIGSTKFLT as it is
    not available on all architectures.


 sig.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b99b06f353ce516a1c28f0994e90f81f81e2dbba
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Jun 10 21:25:07 2001 +0000

    Added "Thanks to" section


 README |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)



commit 2ee12cf2ea20d4f342a8f689c56d85496c6c1e79
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 9 15:18:01 2001 +0000

    Finished update_region for windowstack repaints.
    Nothing will be drawn that is not visible after all.
    Every further windowstack optimizations have to be made in other
    functions like window_move (blitting within same surface, actually
    from front to back buffer, but that is default ;-)
    
    Fixed segfault in surface_destroy (many demos crashed at the end),
    df_porter did not run at all, because surface_destroy was called from
    font managering system.


 surfaces.c |    4 ++--
 windows.c  |   22 ++++++++++++++--------
 2 files changed, 16 insertions(+), 10 deletions(-)



commit 6646ac4952f601e071c06df8d8e1c7a9888f7514
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 9 15:03:39 2001 +0000

    added ltconfig
    
    any volunteer to fix DirectFB for the new autotools?


 .cvsignore |    1 +
 1 file changed, 1 insertion(+)



commit 3754a1f839118a178d0bb831817618fab7619155
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Jun 9 15:03:01 2001 +0000

    df_fire: use DirectFBSetOption to force a systemonly surface for the fire
    window (actually for all windows) instead of implicitly forcing it by
    setting the desktop buffer mode to backsystem.
    
    IDirectFBWindow: detach from reactor before destroying the window,
    return RS_REMOVE when DWET_CLOSE is received in reaction function.


 examples/df_fire.c            |    7 +++++--
 src/windows/idirectfbwindow.c |    7 +++++--
 2 files changed, 10 insertions(+), 4 deletions(-)



commit 11dc1a2144b40fb9462111cc5e76ec2f7ff1203e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 23:31:33 2001 +0000

    rewrote windowstack_repaint, no performance gain yet, but this recursive
    function is designed to just pass the rectangles that are not covered by
    the opaque window of the iteration level (make update_region calls in all
    16 different cases).


 windows.c |  170 +++++++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 108 insertions(+), 62 deletions(-)



commit 91ddd5217f3b77e39294c29029f7db3c409582e0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 22:32:44 2001 +0000

    Applied patch submitted by Till Adam <till@adam-lilienthal.de>
    with a check if DirectFBSetOption has been called before DirectFBCreate.
    Also added function to directfb.h.


 include/directfb.h  |   10 ++++++++++
 src/directfb.c      |   24 ++++++++++++++++++++++++
 src/export_list.sym |    2 ++
 src/misc/conf.c     |    2 +-
 src/misc/conf.h     |    6 ++++++
 5 files changed, 43 insertions(+), 1 deletion(-)



commit 82579928a661c8e3f55750666233c35e93458f34
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 18:44:03 2001 +0000

    Added IDirectFBInputBuffer->WaitForEventWithTimeout (secs, nano_secs).


 include/directfb.h               |   13 +++++++++++-
 src/directfb.c                   |    3 ++
 src/input/idirectfbinputbuffer.c |   41 +++++++++++++++++++++++++++++++++++++++
 3 files changed, 56 insertions(+), 1 deletion(-)



commit a75dca5d1f117bdf9b049c0317d80e912b2503db
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 8 15:48:59 2001 +0000

    fixed(?) handling of middle mouse button for MS3 protocol


 serialmouse.c |    1 +
 1 file changed, 1 insertion(+)



commit 8b9b12a782fd39a8b9f5d79bf6ec6086d4fa683b
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 8 13:37:17 2001 +0000

    We now support the following serial mice:
    
      "MS"		   two buttons MS protocol
      "MS3"		   MS with ugly 3-button extension
      "MouseMan"       referred to as MS + Logitech extension in mouse(4)
      "MouseSystems"   most commonly used serial mouse protocol nowadays
    
    All this is highly experimental and needs more testing.


 serialmouse.c |  147 ++++++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 132 insertions(+), 15 deletions(-)



commit 07865ab2ca1ed2ff077b72452b36ef3cb85ed872
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 8 12:06:12 2001 +0000

    Small code cleanup in ps2mouse inputdriver.
    
    Added support for MS 3 button mouse protocol (this protocol sucks!) to the
    serial mouse inputdriver. Put "mouse-protocol=ms3" into your directfbrc.


 ps2mouse/ps2mouse.c       |    9 ------
 serialmouse/serialmouse.c |   69 ++++++++++++++++++++++++++++++++++------------
 2 files changed, 53 insertions(+), 25 deletions(-)



commit 7ea9ae0a997fc02dbe659f72d668116a109761b4
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 11:30:59 2001 +0000

    typo fixed


 windows.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 64935e4ab98b69286d61dc4e6d4f2d6d610d8446
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 08:50:45 2001 +0000

    Print init type message if an interface implementation is loaded.


 interface.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 2886fcb4156270979f34614649b5d4dd3f9fcf24
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Jun 8 08:28:37 2001 +0000

    moved window event buffer into interface using pthread conditions
    windowing events are dispatched through reactors now
    (~100 lines stripped from core ;-)


 core/windows.c            |  117 +++--------------------------
 core/windows.h            |   26 ------
 windows/idirectfbwindow.c |  181 +++++++++++++++++++++++++++++++++++++---------
 windows/idirectfbwindow.h |   12 ---
 4 files changed, 164 insertions(+), 172 deletions(-)



commit 7531cc785696a90b3d11a8389d547097ce7bcfae
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 7 21:46:07 2001 +0000

    use pthread conditions


 idirectfbinputbuffer.c |   44 ++++++++++++++++++++++++++------------------
 1 file changed, 26 insertions(+), 18 deletions(-)



commit 62922355a116185bcf529d2c62f1a2f032d0a1f9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 7 20:39:19 2001 +0000

    fixed bug when blitting from 32bit without blending,
    e.g. --blit-convert in df_dok


 matrox_state.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4b0433ba742f89d8977fea9ec439771d3387d0fd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 7 20:06:20 2001 +0000

    follow changes


 joystick/joystick.c       |    1 +
 keyboard/keyboard.c       |    1 +
 ps2mouse/ps2mouse.c       |    2 ++
 serialmouse/serialmouse.c |    2 ++
 4 files changed, 6 insertions(+)



commit 127efd7d2210cc4f909c8785c4f1769cd877e9f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 7 20:04:19 2001 +0000

    API Change: The Input Device ID no longer contains the type of input device.
    
    Added DFBInputDeviceTypeFlags to DFBInputDeviceDescription that contains
    the type of the input device specified by one or more of the following flags:
    
    DIDTF_KEYBOARD      = 0x00000001,  /* can act as a keyboard */
    DIDTF_MOUSE         = 0x00000002,  /* can be used as a mouse */
    DIDTF_JOYSTICK      = 0x00000004,  /* can be used as a joystick */
    DIDTF_REMOTE        = 0x00000008   /* device is a remote control */
    
    
    Something like
    
    ...       DIDID_TYPE(id) == DIDT_MOUSE
    
    should be replaced by
    
    ...       desc.type & DIDTF_MOUSE


 examples/df_joystick.c |    5 ++---
 include/directfb.h     |   33 +++++++++++++++++++--------------
 src/core/input.h       |    2 +-
 src/core/windows.c     |   26 ++++++++------------------
 4 files changed, 30 insertions(+), 36 deletions(-)



commit 481646b9098655690241b0b41319857c1699b9d3
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Jun 7 17:01:22 2001 +0000

    InputDevice info.driver_name/vendor are now pointers


 inputdrivers/joystick/joystick.c       |    4 ++--
 inputdrivers/keyboard/keyboard.c       |    4 ++--
 inputdrivers/ps2mouse/ps2mouse.c       |    4 ++--
 inputdrivers/serialmouse/serialmouse.c |   13 ++++++++++---
 src/core/input.h                       |    4 ++--
 5 files changed, 18 insertions(+), 11 deletions(-)



commit 7e20ac12b43205da944a37be24eee0095925754f
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 7 16:00:20 2001 +0000

    s/msmouse/serialmouse/


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 4b754161acdf13930f022b5cb6285806c0f4c892
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 7 15:17:56 2001 +0000

    Renamed msmouse inputdriver to serialmouse since this beast will support
    other more serial mouse protocols in the future.


 b/NEWS                                   |    2 
 b/README                                 |    3 
 b/configure.in                           |    2 
 b/inputdrivers/Makefile.am               |    4 
 b/inputdrivers/serialmouse/.cvsignore    |    6 
 b/inputdrivers/serialmouse/Makefile.am   |   20 ++
 b/inputdrivers/serialmouse/serialmouse.c |  285 +++++++++++++++++++++++++++++++
 inputdrivers/msmouse/.cvsignore          |    6 
 inputdrivers/msmouse/Makefile.am         |   20 --
 inputdrivers/msmouse/msmouse.c           |  284 ------------------------------
 10 files changed, 317 insertions(+), 315 deletions(-)



commit c9c31a29046d5806b2861d55e1acffeaef4d4437
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 7 15:06:02 2001 +0000

    Added config option "mouse-protocol" (for serial mouse only). You need to
    specify the protocol type if you want to use a serial mouse.  At the moment
    only "ms" (2-button) is supported. I will add more serial mouse protocols
    later.
    
    Check if a mouse is attached to the serial port.


 NEWS                           |    3 ++
 inputdrivers/msmouse/msmouse.c |   53 +++++++++++++++++++++++++++++++++++------
 src/misc/conf.c                |   34 +++++++++-----------------
 src/misc/conf.h                |    2 +
 4 files changed, 63 insertions(+), 29 deletions(-)



commit a08631348a58dd0f6c1a6e8a7e6f87d46007774f
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Jun 7 11:57:11 2001 +0000

    first working version of the MS Serial Mouse inputdriver


 msmouse.c |  161 ++++++++++++++++++++++++++++++++++----------------------------
 1 file changed, 89 insertions(+), 72 deletions(-)



commit b43ef57d8dddd7152db7f2d3a88b98dd1c5326dd
Author: Michael Natterer <mitch@directfb.org>
Date:   Thu Jun 7 00:09:22 2001 +0000

    Updated ChangeLog.


 ChangeLog | 2265 ++++++++++++++++++++++++++++++++++++++------------------------
 1 file changed, 1404 insertions(+), 861 deletions(-)



commit 7b07b37557407b6d5432279dfb09419933d6226b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 23:49:38 2001 +0000

    surface listener ported to reactors


 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |    6 
 interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |    8 
 src/core/fbdev.c                                                     |   10 
 src/core/reactor.h                                                   |   25 +-
 src/core/state.c                                                     |   57 ++---
 src/core/surfacemanager.c                                            |    8 
 src/core/surfaces.c                                                  |  108 ----------
 src/core/surfaces.h                                                  |   66 ++----
 src/core/windows.c                                                   |   10 
 src/directfb.c                                                       |    4 
 src/display/idirectfbdisplaylayer.c                                  |   37 +--
 src/display/idirectfbsurface.c                                       |   28 +-
 src/display/idirectfbsurface.h                                       |    4 
 src/display/idirectfbsurface_layer.c                                 |    2 
 src/display/idirectfbsurface_window.c                                |    3 
 src/input/idirectfbinputbuffer.c                                     |    8 
 src/input/idirectfbinputdevice.c                                     |    8 
 17 files changed, 150 insertions(+), 242 deletions(-)



commit 808949c296c609c5d7268b4c33d9363597745ff4
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 21:40:49 2001 +0000

    added MS Serial Mouse inputdevice, disabled at the moment


 configure.in                     |    1 
 inputdrivers/Makefile.am         |    6 -
 inputdrivers/msmouse/.cvsignore  |    6 +
 inputdrivers/msmouse/Makefile.am |   20 +++
 inputdrivers/msmouse/msmouse.c   |  228 +++++++++++++++++++++++++++++++++++++++
 5 files changed, 260 insertions(+), 1 deletion(-)



commit 2b0c8cb41f0c2529c3f5c63b5fb3615dd3e2a677
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 19:36:13 2001 +0000

    added common event dispatching code in reactor.[ch]
    all input event listener handling and event dispatching
    done through reactors
    input driver code cleanup
    removed unneeded input driver headers


 b/inputdrivers/joystick/Makefile.am |    3 
 b/inputdrivers/joystick/joystick.c  |  106 +++++++++---------
 b/inputdrivers/keyboard/Makefile.am |    3 
 b/inputdrivers/keyboard/keyboard.c  |  208 ++++++++++++++++++------------------
 b/inputdrivers/ps2mouse/Makefile.am |    3 
 b/inputdrivers/ps2mouse/ps2mouse.c  |  129 ++++++++++++----------
 b/src/core/Makefile.am              |    8 -
 b/src/core/input.c                  |   85 --------------
 b/src/core/input.h                  |   39 ------
 b/src/core/reactor.c                |  163 ++++++++++++++++++++++++++++
 b/src/core/reactor.h                |   47 ++++++++
 b/src/core/windows.c                |   19 +--
 b/src/directfb.c                    |    6 -
 b/src/input/idirectfbinputbuffer.c  |  121 ++++++++------------
 b/src/input/idirectfbinputbuffer.h  |    4 
 b/src/input/idirectfbinputdevice.c  |   47 ++++----
 b/src/input/idirectfbinputdevice.h  |    4 
 inputdrivers/joystick/joystick.h    |   37 ------
 inputdrivers/keyboard/keyboard.h    |   37 ------
 inputdrivers/ps2mouse/ps2mouse.h    |   37 ------
 20 files changed, 550 insertions(+), 556 deletions(-)



commit a9ba811a1c58198d11bd6fab8bd8a8b7c7353684
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 19:36:11 2001 +0000

    forgot to change config -> dfb_config here


 idirectfbfont_default.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit ec6d7eb670a2522d7bcc596a80986505306a4546
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 19:27:25 2001 +0000

    renamed global variable config to dfb_config


 gfxdrivers/matrox/matrox_state.c |    4 -
 gfxdrivers/neomagic/neomagic.c   |    2 
 gfxdrivers/tdfx/tdfx.c           |    2 
 inputdrivers/keyboard/keyboard.c |    2 
 inputdrivers/ps2mouse/ps2mouse.c |    4 -
 src/core/core.c                  |    4 -
 src/core/coredefs.h              |   12 +--
 src/core/fbdev.c                 |    4 -
 src/core/fonts.c                 |    2 
 src/core/gfxcard.c               |    4 -
 src/core/vt.c                    |    4 -
 src/core/windows.c               |    4 -
 src/directfb.c                   |   16 ++--
 src/misc/conf.c                  |  126 +++++++++++++++++++--------------------
 src/misc/conf.h                  |    6 -
 15 files changed, 98 insertions(+), 98 deletions(-)



commit 861cdfb7bbbcb8fe8085e90f04b1532fe90e84ab
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 18:59:32 2001 +0000

    removed some unused includes


 ps2mouse.c |    9 +--------
 1 file changed, 1 insertion(+), 8 deletions(-)



commit 3e3f64a319a6d7cd05cab6fa44e1569f1e0d6b43
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 17:38:20 2001 +0000

    updated NEWS


 NEWS |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 51881d29e17fd3d6c53efc8958bb1687bd50293a
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 16:19:57 2001 +0000

    restructured interfaces directory


 b/configure.in                                                         |    3 
 b/interfaces/.cvsignore                                                |    5 
 b/interfaces/IDirectFBFont/.cvsignore                                  |    6 
 b/interfaces/IDirectFBFont/Makefile.am                                 |   26 
 b/interfaces/IDirectFBFont/idirectfbfont_default.c                     |  161 ++
 b/interfaces/IDirectFBImageProvider/.cvsignore                         |    6 
 b/interfaces/IDirectFBImageProvider/Makefile.am                        |   34 
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c       |  750 ++++++++++
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c      |  426 +++++
 b/interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c       |  383 +++++
 b/interfaces/IDirectFBVideoProvider/.cvsignore                         |    6 
 b/interfaces/IDirectFBVideoProvider/Makefile.am                        |   78 +
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp |  432 +++++
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c  |  491 ++++++
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c       |  521 ++++++
 b/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c       |  545 +++++++
 b/interfaces/Makefile.am                                               |  124 -
 interfaces/idirectfbfont_default.c                                     |  161 --
 interfaces/idirectfbfont_ft2.c                                         |  324 ----
 interfaces/idirectfbimageprovider_gif.c                                |  750 ----------
 interfaces/idirectfbimageprovider_jpeg.c                               |  426 -----
 interfaces/idirectfbimageprovider_png.c                                |  383 -----
 interfaces/idirectfbvideoprovider_avifile.cpp                          |  432 -----
 interfaces/idirectfbvideoprovider_libmpeg3.c                           |  491 ------
 interfaces/idirectfbvideoprovider_swf.c                                |  521 ------
 interfaces/idirectfbvideoprovider_v4l.c                                |  545 -------
 26 files changed, 3873 insertions(+), 4157 deletions(-)



commit e0c63211a67226351de9a047b5849a6ca4c01ffa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 16:11:14 2001 +0000

    purged now


 .cvsignore |    6 ------
 1 file changed, 6 deletions(-)



commit 57e9aa06c42c6cc91840ffac75f8a79b716991cc
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 15:50:37 2001 +0000

    Tweaked Sop_a8_set_alphapixel_Dop_rgb* functions as suggested by Fefe.
    Speeds up DrawString by several percents.


 generic.c |  144 ++++++++++++++++++++++++++++++++++++++++++++++++++++----------
 generic.h |   90 +-------------------------------------
 2 files changed, 127 insertions(+), 107 deletions(-)



commit 8f91e830d25e257b58795ce608e8b75287b6ea04
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 15:32:38 2001 +0000

    inputdrivers modularized


 b/Makefile.am                       |    1 
 b/configure.in                      |    5 
 b/inputdrivers/.cvsignore           |    6 
 b/inputdrivers/Makefile.am          |    3 
 b/inputdrivers/joystick/.cvsignore  |    6 
 b/inputdrivers/joystick/Makefile.am |   22 +
 b/inputdrivers/joystick/joystick.c  |  143 ++++++++++
 b/inputdrivers/joystick/joystick.h  |   37 ++
 b/inputdrivers/keyboard/.cvsignore  |    6 
 b/inputdrivers/keyboard/Makefile.am |   22 +
 b/inputdrivers/keyboard/keyboard.c  |  498 ++++++++++++++++++++++++++++++++++++
 b/inputdrivers/keyboard/keyboard.h  |   37 ++
 b/inputdrivers/ps2mouse/.cvsignore  |    6 
 b/inputdrivers/ps2mouse/Makefile.am |   22 +
 b/inputdrivers/ps2mouse/ps2mouse.c  |  221 +++++++++++++++
 b/inputdrivers/ps2mouse/ps2mouse.h  |   37 ++
 b/src/core/Makefile.am              |    3 
 b/src/core/core.c                   |    4 
 b/src/core/input.c                  |  179 +++++++-----
 b/src/core/input.h                  |   31 +-
 src/core/inputdevices/Makefile.am   |   19 -
 src/core/inputdevices/joystick.c    |  143 ----------
 src/core/inputdevices/joystick.h    |   37 --
 src/core/inputdevices/keyboard.c    |  498 ------------------------------------
 src/core/inputdevices/keyboard.h    |   37 --
 src/core/inputdevices/ps2mouse.c    |  221 ---------------
 src/core/inputdevices/ps2mouse.h    |   37 --
 27 files changed, 1193 insertions(+), 1088 deletions(-)



commit 31fa5aa792912778579ce4ee2233873ff52a842b
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 14:15:53 2001 +0000

    use calloc() instead of malloc();memset()


 core/fbdev.c                    |   16 ++++++----------
 core/fonts.c                    |    4 +---
 core/gfxcard.c                  |    3 +--
 core/input.c                    |    7 +++----
 core/surfacemanager.c           |    6 ++----
 core/surfaces.c                 |    6 ++----
 core/windows.c                  |    9 +++------
 display/idirectfbdisplaylayer.c |    3 +--
 display/idirectfbsurface.c      |    5 +++--
 input/idirectfbinputbuffer.c    |   13 +++++--------
 input/idirectfbinputdevice.c    |    7 +++----
 media/idirectfbfont.c           |    4 ++--
 windows/idirectfbwindow.c       |    4 ++--
 13 files changed, 34 insertions(+), 53 deletions(-)



commit 9b14c2e93e0c9072506184431306600fcbff3529
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 14:02:45 2001 +0000

    use calloc() instead of malloc();memset();


 idirectfbfont_default.c            |    3 +--
 idirectfbfont_ft2.c                |    3 +--
 idirectfbimageprovider_gif.c       |   11 ++++-------
 idirectfbimageprovider_jpeg.c      |   11 ++++-------
 idirectfbimageprovider_png.c       |    9 ++++-----
 idirectfbvideoprovider_avifile.cpp |   11 +++++------
 idirectfbvideoprovider_libmpeg3.c  |   15 ++++++---------
 idirectfbvideoprovider_v4l.c       |   10 ++++------
 8 files changed, 29 insertions(+), 44 deletions(-)



commit e192bf1a7ee1ba55b49264f1da589ac1be4e22a9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 13:57:12 2001 +0000

    started to begin using calloc ;-)
    added core_load_modules( dir, callback, ctx ), a common function for
    loading modules in a directory, callback can return one of the following
    values: MODULE_LOADED_CONTINUE, MODULE_LOADED_STOP, MODULE_REJECTED
    made usage of the new function in gfxcard.c for driver loading


 include/directfb_internals.h |    3 -
 src/core/core.c              |   67 +++++++++++++++++++++++++++++
 src/core/core.h              |   14 ++++++
 src/core/gfxcard.c           |   99 ++++++++++++++++---------------------------
 4 files changed, 120 insertions(+), 63 deletions(-)



commit 7067593dbba2558a8eb9cd394133e4a4be40332f
Author: Sven Neumann <neo@directfb.org>
Date:   Wed Jun 6 11:28:04 2001 +0000

    I managed to put even more typos in here...


 NEWS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 49f43f423891f86337238f8b270a3e589cedd702
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Jun 6 00:26:02 2001 +0000

    s/Joachim/Johhanes/
    
    Sorry.


 NEWS |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 1344a77b354fa846127ea4c58f3d271bfe742a8a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 5 23:58:30 2001 +0000

    set alpha value in state only if it's not the desired opacity
    removed comment from surfacemanager
    deallocate and allocate video buffers until proper reallocation
    method is present


 surfacemanager.c |   51 +++++++++++++++++++++++++--------------------------
 surfaces.c       |   23 +++++++++++++----------
 windows.c        |   24 +++++++++++++-----------
 3 files changed, 51 insertions(+), 47 deletions(-)



commit 9dd587bbdb238759b570fcb9bd927019858e4f03
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 5 19:12:37 2001 +0000

    enhanced the suspend/resume hack
    added DFBAddSuspendResumeFunc and DFBRemoveSuspendResumeFunc
    registered functions are called in IDirectFB->Suspend/Resume
    V4l Provider closes video device in suspend and reopens it in resume


 include/directfb_internals.h            |    6 ++
 interfaces/idirectfbvideoprovider_v4l.c |   27 ++++++++++++
 src/directfb.c                          |    1 
 src/idirectfb.c                         |   71 ++++++++++++++++++++++++++++++++
 4 files changed, 105 insertions(+)



commit e0ad3d1b7e3da23bf5a5d36d7b9f8d1780a427ab
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 5 18:57:27 2001 +0000

    bumped version number to 0.9.3


 NEWS         |    3 +++
 configure.in |    2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)



commit 61e8fc73ae4997f587a6b104f22479870009b7df
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Jun 5 18:22:09 2001 +0000

    New internal function rectangle_union.
    
    New API function Font->GetStringExtends which allows to retrieve the
    logical and ink extents of a given string. Refer to the documentation
    in directfb.h.
    
    Modified gendoc.pl so it translates empty comment lines into paragraphs.


 include/directfb.h        |   40 ++++++++++++++++++++--
 src/media/idirectfbfont.c |   83 +++++++++++++++++++++++++++++++++++++---------
 src/misc/util.c           |   44 +++++++++++++++++++-----
 src/misc/util.h           |    4 +-
 tools/gendoc.pl           |   11 ++++--
 5 files changed, 151 insertions(+), 31 deletions(-)



commit 0db8053ea7c3e7e1442bb291291d797da8a287cc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 5 16:57:51 2001 +0000

    disabled normal deinit code, mutex locking in exit handlers is evil!
    we have to rewrite all this deinit shit.


 core.c |    4 ++++
 1 file changed, 4 insertions(+)



commit c706a4a361bc695cb705174ee65fe1360711e914
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Jun 5 15:48:36 2001 +0000

    send DWET_CLOSE event before destroying window
    how can we make sure that another thread that hangs on the mutex lock
    gets the event BEFORE destroying the window? maybe we should tear the event buffer
    off the window structure.


 windows.c |    5 +++++
 1 file changed, 5 insertions(+)



commit cbd8ee4f403a10151e040355f6d005b2e60a4785
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 4 15:02:26 2001 +0000

    fixed make clean ;)


 Makefile.am |    5 +++++
 1 file changed, 5 insertions(+)



commit a7234414ce25637fb5a8b989778bfafcaf501db8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 4 14:41:25 2001 +0000

    applied really nice patch from Sven that reenables
    the colorizing with a better calculation, too slow for you?


 main.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit bc73a036e2fe69480502f27d59ba6778346fba25
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 4 13:39:14 2001 +0000

    patched the patch, ioctl should return -EINTR and not -ERESTARTSYS
    
    from linux/errno.h
    
    #ifdef __KERNEL__
    
    /* Should never be seen by user programs */
    #define ERESTARTSYS	512
    ...


 matroxfb-vsync-irq.patch |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 42ad2310d30a429732daceb82b9eb92d8310151e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 4 10:33:17 2001 +0000

    The real way[tm]! With mouse to rotate and keyboard to move a la Quake!


 Makefile.am |    2 
 main.c      |  138 +++++++++++++++++++++-----------
 math3d.c    |  252 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 math3d.h    |   82 +++++++++++++++++++
 4 files changed, 427 insertions(+), 47 deletions(-)



commit 6e4966a10d6b01bb141ae744e41212cd1011c1d7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon Jun 4 09:57:19 2001 +0000

    check for row_width > 0 before modulo


 gfxcard.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit e2667e882f8d1b8e2889f51a8287b6a63024dd40
Author: Sven Neumann <neo@directfb.org>
Date:   Sat Jun 2 18:14:25 2001 +0000

    applied a patch provided by Johannes Zellner <johannes@zellner.org>
    that adds support for loading interlaced PNGs


 idirectfbimageprovider_png.c |   27 ++++++++++++++++++---------
 1 file changed, 18 insertions(+), 9 deletions(-)



commit d12c662616ea039dea64c40756241b8b4e733b08
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Jun 1 11:51:15 2001 +0000

    fixed compiler warnings in tools
    compile (but do not install) tools


 Makefile.am    |    2 +-
 raw16toraw24.c |    3 ++-
 raw32toraw24.c |    1 +
 3 files changed, 4 insertions(+), 2 deletions(-)



commit 9a79747e472c18cb0c7dba7ef50ba1746cec16ef
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 31 16:59:32 2001 +0000

    more excessive use of long long


 df_dok.c |   24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)



commit 04a75cf2ae602e52ab4666dd8fa1d89ef525b06c
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 31 16:44:45 2001 +0000

    does this fix the overflow problem ?


 df_dok.c |   42 +++++++++++++++++++++---------------------
 1 file changed, 21 insertions(+), 21 deletions(-)



commit 8d83f9e66363cd51f502fe0b3059b93ce134be64
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 31 15:54:46 2001 +0000

    alalalalong


 df_dok.c |  102 ++++++++++++++++++++++++++++++++-------------------------------
 1 file changed, 52 insertions(+), 50 deletions(-)



commit 5f0e1f15ea8950f81fc142d0f785525d11278d4d
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 31 15:24:23 2001 +0000

    use gettimeofday() instead of clock()
    small changes to the results page to make it fit on smaller screens


 df_dok.c |  131 +++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 70 insertions(+), 61 deletions(-)



commit 4422570a2025c63b4bbc061448f2cb6b53ff5ee2
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 31 09:39:47 2001 +0000

    added support for loading fonts w/o antialiasing (DFFA_MONOCHROME)
    added span_a1_to_a8 and span_a1_to_argb functions


 include/directfb.h             |    3 +
 interfaces/idirectfbfont_ft2.c |   72 +++++++++++++++++++++++++----------------
 src/gfx/convert.h              |   14 +++++++
 3 files changed, 60 insertions(+), 29 deletions(-)



commit fd7503c6d14bc24e47de021140ee939b4141fbbf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 31 06:32:35 2001 +0000

    - rotation about y axis
    - perspective drawing


 main.c |   63 +++++++++++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 43 insertions(+), 20 deletions(-)



commit 7bce8ac6d665ebed72984ca7754e50ddb38ca2f0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 29 15:10:01 2001 +0000

    turn off console blanking
    do (w&1) instead of w -= 2 in loop


 core/inputdevices/keyboard.c |    2 ++
 gfx/generic/generic.c        |    6 ++----
 2 files changed, 4 insertions(+), 4 deletions(-)



commit f937f20d87261913167b0fb0afd701992255f9a4
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 29 14:20:34 2001 +0000

    Allow to specify font attributes (DFFA_NOKERNING, DFFA_NOHINTING) when
    calling FontCreate() to control how fonts are loaded and layouted.
    
    Added new function IDirectFBSurface->GetFont().


 examples/pss.c                 |   10 +++++-----
 include/directfb.h             |   22 ++++++++++++++++++++--
 interfaces/idirectfbfont_ft2.c |   31 ++++++++++++++++++++++++++-----
 src/core/gfxcard.c             |    2 +-
 src/display/idirectfbsurface.c |   25 +++++++++++++++++++++++++
 5 files changed, 77 insertions(+), 13 deletions(-)



commit 03afe0a7d29191940ebf5659e5f9e5d5d0259669
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 29 13:00:57 2001 +0000

    check elapsed time more often when running stretch-blit benchmark


 examples/df_dok.c              |    2 +-
 interfaces/idirectfbfont_ft2.c |    6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)



commit acb264f87a672238209e864bef8f0cabdc0891f6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 29 12:30:58 2001 +0000

    same optimizations for Sop_rgb15_to_Dacc


 generic.c |   52 ++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 48 insertions(+), 4 deletions(-)



commit bd98ebd0a0da2467c093fda5a2dca9eefd3e3b56
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 29 12:18:22 2001 +0000

    Sop_rgb16_to_Dacc does aligned 32bit reads now!
    Performance of FillRectangle(blend) went from 1.73 to 3.09 without MMX!
    
    Andi: Please test it on PowerPC!


 generic.c |   53 ++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 48 insertions(+), 5 deletions(-)



commit f04a9af73a8f3e8792515f669826b16c3bed6119
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 29 11:35:46 2001 +0000

    print banner in DirectFBCreate instead of DirectFBInit


 directfb.c |   18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)



commit bd3be591e3b407286bbe93e21f9838c10b801f4a
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 29 11:32:37 2001 +0000

    renamed --blit-stretched option to --stretch-blit
    print usage information if wrong command-line options are given


 df_dok.c |   51 +++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 37 insertions(+), 14 deletions(-)



commit 93b2dd6170e83606d1e8306aa2335c96b16cec45
Author: Sven Neumann <neo@directfb.org>
Date:   Mon May 28 23:07:44 2001 +0000

    allow to specify benchmarks on the command-line,
    no argument means all benchmarks


 df_dok.c |  119 ++++++++++++++++++++++++++++++++++++++-------------------------
 1 file changed, 72 insertions(+), 47 deletions(-)



commit 5dbab7dbbe7d79c6524c7404e0de73c64ece870e
Author: Sven Neumann <neo@directfb.org>
Date:   Mon May 28 21:06:58 2001 +0000

    Restructured code to make it easier to add new benchmarks or other
    features. The functionality shouldn't have changed, but code size went
    down by more than 100 lines.


 df_dok.c |  841 +++++++++++++++++++++++++++------------------------------------
 1 file changed, 369 insertions(+), 472 deletions(-)



commit c298a55ba8fe949e4ad3bb1fa6ccea51df567950
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 28 19:21:06 2001 +0000

    interface modules are now installed into subdirectories depending on the type,
    e.g. /usr/local/lib/directfb/interfaces/IDirectFBFont/libidirectfbfont_ft2.so


 interfaces/Makefile.am |   16 +++++++++++-----
 src/interface.c        |   10 +++++++++-
 2 files changed, 20 insertions(+), 6 deletions(-)



commit 4031b5f69d989064986e7f2d3c60e5ed305b290a
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 28 19:15:59 2001 +0000

    fixes for C versions of Sacc_add_to_Dacc_C() and Cacc_add_to_Dacc_C(), this
    fixes the "falling corpse"-bug in ClanBomber on non-mmx machines.


 generic.c |   22 ++++++++++++----------
 1 file changed, 12 insertions(+), 10 deletions(-)



commit d4327b4b47d37b73996e56d8cdbf5405748f7638
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 28 18:04:32 2001 +0000

    yet another started thing ;-)
    
    will be a 3d space shooter


 configure.in                    |    1 
 examples/Makefile.am            |    2 
 examples/spacedream/.cvsignore  |    6 
 examples/spacedream/Makefile.am |   44 +++++
 examples/spacedream/main.c      |  301 ++++++++++++++++++++++++++++++++++++++++
 examples/spacedream/star1.png   |binary
 examples/spacedream/star2.png   |binary
 examples/spacedream/star3.png   |binary
 examples/spacedream/star4.png   |binary
 9 files changed, 353 insertions(+), 1 deletion(-)



commit 701d2fe7a954b16a59c2f4dde1290bc301d507b4
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 28 16:53:49 2001 +0000

    VT_ACTIVATE and VT_WAITACTIVE system calls are repeated if interrupted.


 vt.c |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)



commit 4190f438d5d04c8ea01eb9e12b31283f47773dc6
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 28 15:35:17 2001 +0000

    added -lm for pss (compiles on ppc again)


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 5e31bea8c91ced612bb9eb5bf358abf85feff5aa
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 27 21:47:44 2001 +0000

    fixed bug in gAcquire: src colorkey was not set when using src colorkeying
    and at least one of DSBLIT_BLEND_ALPHACHANNEL, DSBLIT_BLEND_COLORALPHA and
    DSBLIT_COLORIZE.
    
    Andi: Does this fix falling corpse parts on PowerPC?


 generic.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit 7e8aed2399c9747257bb6e342ce0d41ed730240a
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 27 21:31:15 2001 +0000

    check for source != NULL in Blit and StretchBlit


 idirectfbsurface.c |   38 ++++++++++++++++++++------------------
 1 file changed, 20 insertions(+), 18 deletions(-)



commit 56527f1a2d54f8cbb1636b3ba086853ce41b00d2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 27 20:05:50 2001 +0000

    Added "idirectfbvideoprovider_libmpeg3.c" to EXTRA_DIST


 Makefile.am |    2 ++
 1 file changed, 2 insertions(+)



commit 89d43a0948268f354bad5b17346d5513cba23f02
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 27 06:23:52 2001 +0000

    Added a parsing feature: The description of interface functions
    is now split up into two parts devided by the first blank line.
    The first part is the headline and is printed in the interface overview
    and in the page of the funtion itself. The detailed information about
    the parameters and possible error values is only in the functions page.
    
    We can now write very long and good descriptions for the functions without
    bloating the index pages.


 include/directfb.h |   47 +++++++++++++++++++++++++++++++++++++----------
 tools/gendoc.pl    |   51 +++++++++++++++++++++++++++++++++++----------------
 2 files changed, 72 insertions(+), 26 deletions(-)



commit 1f4cac510b74881e9e36356591209db8e6e95ab5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat May 26 15:48:59 2001 +0000

    added IDirectFB->WaitForSync, blocks until next vertical retrace


 include/directfb.h |   40 ++++++++++++++++++++++---------------
 src/idirectfb.c    |   57 ++++++++++++++++++++++++++++++++---------------------
 2 files changed, 59 insertions(+), 38 deletions(-)



commit b5beada3a15f788d2a35109fd6d2790f65232554
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 25 19:24:11 2001 +0000

    new demo, very early stage


 .cvsignore       |    1 
 Makefile.am      |    8 -
 pss.c            |  347 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 smokey_light.jpg |binary
 4 files changed, 354 insertions(+), 2 deletions(-)



commit 540bb81e888f95133cf2f1ea3aa34f2d4f26f578
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 23 19:42:39 2001 +0000

    grammatical clarification


 NEWS |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)



commit f2a800567d49d7d9469eeede0d775a71bf202cf6
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 23 19:04:25 2001 +0000

    updated NEWS


 NEWS |    1 +
 1 file changed, 1 insertion(+)



commit 270f25da60aca52daf38e3f4f1361f4490720f52
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 23 18:53:39 2001 +0000

    updated ChangeLog and NEWS


 ChangeLog | 1798 +++++++++++++++++++++++++++++++++++++++++---------------------
 NEWS      |    8 
 2 files changed, 1217 insertions(+), 589 deletions(-)



commit aed93d68b743ba8ccda1c1b5a49481c462b75055
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 23 15:17:34 2001 +0000

    got it wrong last time, hopefully works now


 idirectfbimageprovider_jpeg.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit accdbbc104a99d79d5088d2071e8526009446c2e
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 23 14:51:56 2001 +0000

    Loop MPEG so it behaves like the AVI provider.
    Timing is still badly broken if you use Stop() or SeekTo().


 idirectfbvideoprovider_libmpeg3.c |   20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)



commit e47cc9116ea396d0e35865da74143fa4f777d32d
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 23 14:13:24 2001 +0000

    tried to fix image loading in 24bpp (can't test)


 idirectfbimageprovider_jpeg.c |   24 ++++++++++--------------
 1 file changed, 10 insertions(+), 14 deletions(-)



commit 33eea06ef2dd618607a160ca0e02932774221898
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 23 11:09:26 2001 +0000

    support von 15bpp in jpeg provider


 idirectfbimageprovider_jpeg.c |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)



commit 5385a67dbcfd890bc45871d8a4f8a89d71d4b89d
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 23 00:49:33 2001 +0000

    removed a spurious comment


 generic.c |    2 --
 1 file changed, 2 deletions(-)



commit 905019ca6fb70ea509be36ce118f3ce3bd4d085c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 23:46:48 2001 +0000

    tweaked Cop_to_Dop_24
    72.78 -> 73.30


 generic.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)



commit 9bafdeb91e6543b93b9756738f00ef14c4a992bc
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 22 23:02:48 2001 +0000

    added --on-crack command-line option to df_neo


 df_neo.c |   53 ++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 40 insertions(+), 13 deletions(-)



commit 7fd9888ff76fd486393e9910c3e5db3bc87f1828
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 22:55:18 2001 +0000

    Removed #ifdef, no unroll anymore, fastest result ever seen!
    121 MPixel/sec (Celeron 533), routine before had 119 MPixel.


 generic.c |  105 +++++++++++++++++++++++++-------------------------------------
 1 file changed, 43 insertions(+), 62 deletions(-)



commit fbcdef93562b509ca5075d4571b3517f9783501f
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 22 21:50:17 2001 +0000

    the rest of my optimizations that were not committed before


 generic.h |  101 ++++++++++++++++++++++++++++++--------------------------------
 1 file changed, 50 insertions(+), 51 deletions(-)



commit 231379d68d22ce813e4efcf8816ccb68f3eb9a01
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue May 22 21:39:11 2001 +0000

    added fefes code for non-i386 platforms, great improvement on my powerbook,
    use old code on i386


 generic.c |   42 ++++++++++++++++++++++++++++++++++++------
 1 file changed, 36 insertions(+), 6 deletions(-)



commit ed22e331466827f36958c186b9c2550b8e9600c5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 19:53:43 2001 +0000

    Fixed bug found by Falk Berger, in function keyboard_handle_code:
    event.flags should not set DIEF_KEYCODE only, but also DIEF_MODIFIER.


 keyboard.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b366c59b0316264a4fb2efdb5e72f02dd5b87223
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue May 22 19:36:51 2001 +0000

    commited svens new SET_ALPHA_PIXEL_RGB16 and _RGB15 macros, performance
    improvements in DrawString() on i386 and powerpc


 generic.h |   67 ++++++++++++++------------------------------------------------
 1 file changed, 16 insertions(+), 51 deletions(-)



commit f59ac169b6f946011e17b7cd7b2fca7bf034f9c1
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 22 16:19:21 2001 +0000

    forgot to remove some lines we don't need here


 autogen.sh |    4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)



commit 6fca116f2a080f0696979a54ae66e4afcbabcfb9
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 22 16:16:27 2001 +0000

    allow for automake 1.4-p1 and similar version numbers


 autogen.sh |   55 ++++++++++++++++++++++++++++++-------------------------
 1 file changed, 30 insertions(+), 25 deletions(-)



commit 92bb00eb4892601c13d9611093c79dcf896f76ec
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 05:33:47 2001 +0000

    Added IDirectFB->WaitIdle() that waits for the graphics card being idle.
    
    df_dok calls WaitIdle before and after each benchmark.
    Now we see the real performance of the Savage3D.
    Besides that e.g. the blitting benchmark takes 9 seconds
    instead of 3 seconds defined in df_dok.c because it takes
    the hardware 6 additional seconds to complete all the buffered
    instructions. In this time (6 seconds!) the application can
    use the CPU for other things ;-)


 examples/df_dok.c  |   31 +++++++++++++++++++++++++++++--
 include/directfb.h |   10 +++++++++-
 src/idirectfb.c    |   13 +++++++++++++
 3 files changed, 51 insertions(+), 3 deletions(-)



commit 6f4b164cdbe396065efb9f004e70f58fadd95043
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 03:43:06 2001 +0000

    Do gfxcard_sync() in gfxcard_deinit(),
    fixes X crashes with Savage being busy during switch back to X.


 gfxcard.c |    2 ++
 1 file changed, 2 insertions(+)



commit b3a6619092821449185007dcd963c96e03d9a3bc
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 22 00:23:27 2001 +0000

    do pthread_testcancel() in input threads,
    print die message only if errno != EINTR


 joystick.c |   14 +++++++++++---
 keyboard.c |    7 +++++++
 ps2mouse.c |    8 +++++++-
 3 files changed, 25 insertions(+), 4 deletions(-)



commit 72fd126ef45188c00ab11fcf9d3d1f3956ec20f5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 21 23:49:03 2001 +0000

    follow API change


 idirectfbvideoprovider_libmpeg3.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit a8c494f3eb068522f071473284c4df151d29dfd5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 21 23:48:34 2001 +0000

    missed one default label in pixelformat switch


 ati128.c |    3 +++
 1 file changed, 3 insertions(+)



commit 989a1a8fe75aa62c814ff95e49147421da683ac7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 21 23:43:42 2001 +0000

    added "-f" to rm ;)


 Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit d4b397ad1aae6f272dfc98f04ca365c61a9d80bb
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 21 23:21:04 2001 +0000

    FIXME hunting:
    - Added error code DFB_MISSINGFONT, returned by DrawString.
    - DFBGetInterface checks filename length before checking the extension
    - Wrote more details for FIXME about primary surface recreation.
    - fbdev_get_pixelformat now checks all channel's length and offset
    - gfxcard_check_state now rechecks if src/dst blend function changed
    - do at least clip_triangle_precheck for hardware without clipping support
    - if surface_reformat fails, restore values and already reformatted buffers
    - replaced hardcoded "7" with blitting flags in "Dacc_modulation[7] = ..."
    
    Other fixes:
    - bug messages in all drivers when an unexpected pixelformat is found
    - made avifile provider compile again with version from download/contrib
    - follow surface description API change in avifile and swf provider
    - some type fixes (unsigned int was used instead of the actual type)
    - fixed bug in gAcquire that caused DSBLIT_BLEND_COLORALPHA to be ignored
      when the source pixelformat is DSPF_A8 and DSBLIT_BLEND_ALPHACHANNEL and/or
      DSBLIT_COLORIZE has been set


 gfxdrivers/ati128/ati128_state.c              |    7 +++
 gfxdrivers/matrox/matrox.c                    |    1 
 gfxdrivers/matrox/matrox_state.c              |   15 +++++--
 gfxdrivers/neomagic/neo2200.c                 |    7 ++-
 gfxdrivers/tdfx/tdfx.c                        |    5 ++
 include/directfb.h                            |    3 +
 interfaces/idirectfbvideoprovider_avifile.cpp |    6 +--
 interfaces/idirectfbvideoprovider_swf.c       |    4 +-
 src/core/core.c                               |    2 -
 src/core/fbdev.c                              |   52 ++++++++++++++++++++++----
 src/core/gfxcard.c                            |   25 +++++++-----
 src/core/surfaces.c                           |   22 +++++++++--
 src/core/surfaces.h                           |   34 ++++++++---------
 src/directfb.c                                |    5 +-
 src/display/idirectfbsurface.c                |    3 -
 src/gfx/generic/generic.c                     |    6 ++-
 src/idirectfb.c                               |    6 +--
 src/interface.c                               |    4 +-
 18 files changed, 143 insertions(+), 64 deletions(-)



commit 0d43da766fc13d91b775e081351aee32df9a3ec5
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 21 20:12:56 2001 +0000

    - API Change:
      removed bpp field from surface description, removed DSCAPS_ALPHA,
      added pixelformat field instead.
    - removed window stack repaint when new window is created (makes no sense
      since opacity for new windows is 0)
    - added support for 15bpp in v4l provider
    - v4l provider support for devfs (/dev/v4l/video*)


 examples/df_andi.c                            |    2 
 examples/df_dok.c                             |   10 ++--
 examples/df_porter.c                          |    5 +-
 include/directfb.h                            |   58 +++++++++++++-------------
 interfaces/idirectfbfont_default.c            |    2 
 interfaces/idirectfbimageprovider_gif.c       |   10 ----
 interfaces/idirectfbimageprovider_jpeg.c      |   10 ----
 interfaces/idirectfbimageprovider_png.c       |   20 ++------
 interfaces/idirectfbvideoprovider_avifile.cpp |    2 
 interfaces/idirectfbvideoprovider_v4l.c       |   11 ++++
 src/core/fonts.c                              |    2 
 src/core/windows.c                            |    7 ---
 src/directfb.c                                |    5 +-
 src/idirectfb.c                               |   38 ++++-------------
 14 files changed, 74 insertions(+), 108 deletions(-)



commit 741a59cc397a16208ef348b49e9308b218f83ac2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Mon May 21 17:51:12 2001 +0000

    You can use "Ctrl+Alt+Backspace" to exit DirectFB by killing it with SIGINT.


 directfb.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 90eaeccbf3cefdb6a73381896a8f5074384c4788
Author: Sven Neumann <neo@directfb.org>
Date:   Sun May 20 21:45:36 2001 +0000

    After my latest optimizations, line drawing was wrong under some
    circumstances. Fixed it without hurting the performance.


 generic.c |   23 +++++++++++++++--------
 1 file changed, 15 insertions(+), 8 deletions(-)



commit 4a5cc1185d3b0830b2a74f9c2b7a0272c15f8dbe
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun May 20 20:12:20 2001 +0000

    in CreateFont: allow desc == NULL if filename == NULL for default


 idirectfb.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 7fe335847be532da8602586c5272d930fb78bc31
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 19 20:46:11 2001 +0000

    bumped version number to 0.9.2 and updated README


 README       |  115 +++++++++++++++++++++++++++++++++++------------------------
 configure.in |    2 -
 2 files changed, 70 insertions(+), 47 deletions(-)



commit 111592354e20ebf447ad1e59cd2c761309d259e1
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 19 19:30:48 2001 +0000

    updated NEWS


 NEWS |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)



commit e4f71edfbec933709fa7137fd5a7400396aa26a8
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 19 18:44:10 2001 +0000

    Changed GetStringWidth() and DrawString() methods so they take an
    additional parameter "bytes" that specifies the number of bytes to
    interpret from the passed string. Pass -1 if you intend to use the
    complete NULL-terminated string.
    
    This has several advantages: Line-breaking algorithms can be implemented
    without copying the string and not NULL-terminated character arrays can
    be drawn. Unfortunately this changes the API once again.


 examples/df_andi.c             |    4 -
 examples/df_dok.c              |   70 +++++++++++-----------
 examples/df_porter.c           |    4 -
 examples/df_window.c           |   10 +--
 include/directfb.h             |   16 +++--
 src/core/gfxcard.c             |  126 ++++++++++++++++++++---------------------
 src/core/gfxcard.h             |    2 
 src/display/idirectfbsurface.c |   14 +++-
 src/media/idirectfbfont.c      |   14 ++--
 9 files changed, 140 insertions(+), 120 deletions(-)



commit 199ab2f1b508480987631e1df8ea8503345ad99e
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 19 17:46:51 2001 +0000

    - readded src/media/Makefile.am (forgot this one on my last commit)
    - added interfaces/idirectfbfont_default.c (this used to be the default font
    implementation in the core)
    - removed default font code from the core
    - changed interface loader so you get the default font if you call
    CreateFont() with a NULL filename


 interfaces/Makefile.am             |    7 +
 interfaces/idirectfbfont_default.c |  162 +++++++++++++++++++++++++++++++++++++
 src/core/fonts.c                   |  118 --------------------------
 src/idirectfb.c                    |   19 +++-
 src/media/Makefile.am              |   15 +++
 5 files changed, 198 insertions(+), 123 deletions(-)



commit 985849b7fde6e3805244ff4573ba0f2acc545a38
Author: Sven Neumann <neo@directfb.org>
Date:   Sat May 19 17:24:18 2001 +0000

    - readded src/media directory to provide default font methods
    - changed IDirectFBSurface struct to take a pointer to an IDirectFBFont
    - made IDirectFBSurface call AddRef and Release on the font it owns
    - made DrawString method use GetStringWidth method as provided by IDirectFBFont
    - ditched default font completely; will add it back as a font interface


 configure.in                   |    1 
 include/directfb.h             |    9 +
 interfaces/idirectfbfont_ft2.c |  149 +--------------------------
 src/Makefile.am                |    3 
 src/core/core.c                |    2 
 src/core/fonts.c               |   22 ++--
 src/core/fonts.h               |    6 -
 src/display/idirectfbsurface.c |   66 +++++-------
 src/display/idirectfbsurface.h |    2 
 src/idirectfb.h                |    9 -
 src/media/.cvsignore           |    6 +
 src/media/idirectfbfont.c      |  222 +++++++++++++++++++++++++++++++++++++++++
 src/media/idirectfbfont.h      |   47 ++++++++
 13 files changed, 336 insertions(+), 208 deletions(-)



commit 68559c2f73382877a3779264002ef92bc0b1dc1b
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri May 18 16:44:52 2001 +0000

    renamed _noMMX functions to _C


 generic.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)



commit 4f0f373ca78fa5cbd918ba1ba3015d282a6a0849
Author: Andreas Hundt <andi@directfb.org>
Date:   Fri May 18 16:19:57 2001 +0000

    replaced SET_ALPHA_PIXEL_RGB32 with fefe's code. DrawString() performance in
    32bit is more than twice as high than before (i386). no performance
    improvement on powerpc, dont know why. other platforms not tested yet.


 generic.h |   15 +++++++++++++++
 1 file changed, 15 insertions(+)



commit 3e10d5d8e1e6a6827edf3f9f9f742d41c9146da6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 18 15:33:14 2001 +0000

    Fixed SeekTo (seconds*rate, not seconds/rate).
    Implemented GetLength and GetPos.


 idirectfbvideoprovider_libmpeg3.c |   54 +++++++++++++++++++++++++++++++++++++-
 1 file changed, 53 insertions(+), 1 deletion(-)



commit f179998b473213c6106dbac1c27afe70cc6bd940
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri May 18 14:43:42 2001 +0000

    #include <libmpeg3.h> instead of "libmpeg3.h"


 idirectfbvideoprovider_libmpeg3.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit b61d9adfa1efe332704834be3c12ec0274c05fdc
Author: Andreas Hundt <andi@directfb.org>
Date:   Thu May 17 14:11:09 2001 +0000

    Cop_to_Dop_16() uses 32-bit writes to the framebuffer. Makes no difference
    on i386, but ~30% performace increase on ppc.


 generic.c |   13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)



commit 12a6c921c1b9ef46df253556e8c0e987cfe11df6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 16 20:01:34 2001 +0000

    Added libmpeg3 videoprovider, thanks to Kim JeongHoe for the source.
    
    To compile with libmpeg3 video provider use:
    
    ./configure --with-libmpeg3=<path>


 configure.in                                 |   27 +
 interfaces/Makefile.am                       |   38 +-
 interfaces/idirectfbvideoprovider_libmpeg3.c |  436 +++++++++++++++++++++++++++
 3 files changed, 494 insertions(+), 7 deletions(-)



commit 347e59ea55e9507c27e1e46d2722ced1fffaefbb
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 22:44:38 2001 +0000

    removed gprint


 idirectfbfont_ft2.c |    1 -
 1 file changed, 1 deletion(-)



commit 74a75adc8a4bf3aa7f6baa2ad79b418a8b4d0d1a
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue May 15 20:01:54 2001 +0000

    allow use of kerning on non-i386 machines, seems to work on my powerpc again.


 idirectfbfont_ft2.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)



commit 3329ce2a9eec81c96a640c463f97d578d7052b10
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 20:01:15 2001 +0000

    forgot to remove src/media from here


 configure.in |    1 -
 1 file changed, 1 deletion(-)



commit 4cc89b66d5b21264e8fee753900c96a88c91ad75
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 18:41:09 2001 +0000

    Removed media/idirectfbfont.[ch] and implemented it all in the interface.
    Call FT_Done_Face() on freetype face object on font destruction.


 b/interfaces/idirectfbfont_ft2.c |  166 ++++++++++++++++++++++++++-
 b/src/Makefile.am                |    3 
 b/src/core/fonts.h               |    3 
 b/src/display/idirectfbsurface.c |    3 
 b/src/idirectfb.c                |    1 
 b/src/idirectfb.h                |    8 +
 src/media/.cvsignore             |    6 
 src/media/Makefile.am            |   15 --
 src/media/idirectfbfont.c        |  237 ---------------------------------------
 src/media/idirectfbfont.h        |   47 -------
 10 files changed, 176 insertions(+), 313 deletions(-)



commit f0b4f285c2e0de4814a2d431e9ef48eb1d596ccd
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 15 17:17:28 2001 +0000

    simple precheck clips text examining y(+height), clip y1/y2


 gfxcard.c |    6 ++++++
 1 file changed, 6 insertions(+)



commit d510eb73be00383f1f095b222932e30f91b9fee9
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue May 15 16:53:24 2001 +0000

    set state->source to NULL before returning


 gfxcard.c |    3 +++
 1 file changed, 3 insertions(+)



commit 5f9f414ca7294682f1e880915c36db0d17a15c6c
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 15:42:52 2001 +0000

    avoid endless looping on invalid UTF8 strings


 display/idirectfbsurface.c |    5 ++---
 media/idirectfbfont.c      |   14 +++++++-------
 misc/utf8.c                |    4 +++-
 3 files changed, 12 insertions(+), 11 deletions(-)



commit 1fa5506e51fe25b67058867c9cf8aba0e66d10a8
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 14:48:57 2001 +0000

    fixed braino in GetStringWidth() func


 idirectfbfont.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit 7e81ee96ee50bae6920267b84b0c7395278a47c9
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 14:46:11 2001 +0000

    indentation


 tree.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit f2609006c7f18e627c0fd1b2e61d754a9d2a18f2
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 14:45:37 2001 +0000

    - do not try to free NULL pointer in tree.c
    - some minor cleanups


 interfaces/idirectfbfont_ft2.c |    9 ---------
 src/media/idirectfbfont.c      |    6 ------
 src/misc/tree.c                |   22 ++++++++++++----------
 3 files changed, 12 insertions(+), 25 deletions(-)



commit e4020a17583020a033fe2276bc907c20e807430a
Author: Andreas Hundt <andi@directfb.org>
Date:   Tue May 15 14:32:38 2001 +0000

    - replaced ceil() calls in idirectfbsurface.c with ICEIL(), compiles on arm and ppc again. (without libm)
    
    - removed resolved BUGS from BUGS


 BUGS                           |   16 ----------------
 src/display/idirectfbsurface.c |    4 ++--
 2 files changed, 2 insertions(+), 18 deletions(-)



commit 42a9e5a43823be6b1932498e6963e9de9ddece6d
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 13:42:57 2001 +0000

    added sanity checks so we never draw outside the surface boundaries
    corrected handling of face metrics


 idirectfbfont_ft2.c |   36 +++++++++++++++++++++++-------------
 1 file changed, 23 insertions(+), 13 deletions(-)



commit ade1d51bfebb4ae96ca0e157fb393c48feb0831b
Author: Sven Neumann <neo@directfb.org>
Date:   Tue May 15 01:48:19 2001 +0000

    Rewrote a good part of the font code:
    
    - surface->DrawString() now takes UTF-8 strings.
    - Fonts do not need to be loaded completely any longer. The core keeps
    an array of surfaces that grows when new glyphs are loaded. Information
    about the glyphs is kept in a balanced binary tree using the Unicode
    index of the glyph as the key.
    - Kerning tables are not any longer in the core font struct. We now use
    a callback from the core to the font provider and it can choose not to
    implement it all.
    
    Things left to do:
    - Add some checks so we don't crash on very large fonts.
    - Let the font provider specify the surface format and blitting flags.
    - Hook into font destruction and release the FT2 face.
    - Add DrawGlyph method to surface so we can use it from the GDK backend
    or from a Pango module.


 examples/df_dok.c              |    7 
 include/directfb.h             |    4 
 interfaces/idirectfbfont_ft2.c |  304 ++++++++++++++++++++---------------------
 src/core/fonts.c               |  167 ++++++++++++++++++----
 src/core/fonts.h               |   68 ++++++---
 src/core/gfxcard.c             |  157 +++++++++++----------
 src/display/idirectfbsurface.c |   26 ++-
 src/media/idirectfbfont.c      |   38 +++--
 src/misc/Makefile.am           |   10 -
 src/misc/tree.c                |  290 +++++++++++++++++++++++++++++++++++++++
 src/misc/tree.h                |   42 +++++
 src/misc/utf8.c                |   94 ++++++++++++
 src/misc/utf8.h                |   38 +++++
 src/misc/util.c                |    3 
 14 files changed, 933 insertions(+), 315 deletions(-)



commit cf993312956e3cb38876fc9e8bd4c6f5e15c9c61
Author: Sven Neumann <neo@directfb.org>
Date:   Mon May 14 21:28:06 2001 +0000

    don't use -fomit-frame-pointer if compiling with --enable-debug


 configure.in                |    1 +
 src/gfx/generic/Makefile.am |    4 ++++
 2 files changed, 5 insertions(+)



commit e78561da12998e8dfb8ebb5fb6a73bd5a78aaceb
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 14 20:02:30 2001 +0000

    - implemented ceil and floor functions IFLOOR() and ICEIL(), to get rid of
      libm
    - added -lm to Makefiles of examples that need libm.


 configure.in                     |   11 -----
 examples/Makefile.am             |    6 +--
 examples/df_knuckles/Makefile.am |    2 -
 examples/df_neo/Makefile.am      |    2 -
 src/misc/gfx_util.c              |   17 ++++----
 src/misc/util.h                  |   74 +++++++++++++++++++++++++++++++++++++++
 6 files changed, 87 insertions(+), 25 deletions(-)



commit 72f9dea4cdcbc8a45f4df6d33e641ef94899ad82
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 11 19:07:21 2001 +0000

    optimized gDrawLine() further  -->  5% speedup


 generic.c |   21 +++++++++------------
 1 file changed, 9 insertions(+), 12 deletions(-)



commit 5690c78b62584db8e5e169c176107f74542139fb
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 11 18:46:12 2001 +0000

    some optimizations on Drawline() --> about 10% faster


 Makefile.am |    2 +-
 generic.c   |   30 +++++++++++++-----------------
 2 files changed, 14 insertions(+), 18 deletions(-)



commit 48553034e11ff8d21e948b89581ac9776ac6c85d
Author: Sven Neumann <neo@directfb.org>
Date:   Fri May 11 13:14:47 2001 +0000

    removed leftover declaration of IDirectFBFont_Construct_TTF()


 idirectfbfont.h |   13 ++-----------
 1 file changed, 2 insertions(+), 11 deletions(-)



commit 56bdcf0ed3ae2199c152e5a7f647d50fa5382236
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 10 12:37:47 2001 +0000

    Changed help string so it mentions that these are DirectFB options and
    not app-specific. We need to change command-line parsing somehow since
    it can not be that DirectFBInit() exits the app if --help is found
    without giving the application a chance to output its help.


 conf.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 86c72e08714975735bb4b9dd80b5126cbe25415e
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 9 18:26:40 2001 +0000

    applied patch from <js@convergence.de>
    
    - videos with few IFrames no longer rewind if using fast forward in dfbsee


 idirectfbvideoprovider_avifile.cpp |    7 +++++++
 1 file changed, 7 insertions(+)



commit f8c620570556a626f7de453b6515b72d8d5206fd
Author: Andreas Hundt <andi@directfb.org>
Date:   Wed May 9 17:05:53 2001 +0000

    vt.c opens /dev/tty0 or /dev/vc/0 (for devfs) instead of /dev/console,
    this makes DirectFB work on machines with serial console.


 vt.c |   35 +++++++++++++++++++++++++++++------
 1 file changed, 29 insertions(+), 6 deletions(-)



commit c41ce73ef352139667ce693af43ca463e42dce1e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed May 9 15:41:18 2001 +0000

    Print error message if DirectFBInit has been forgotten.


 directfb.c |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)



commit 85ba552609a60d5eb40fafb2e6716896bcc96496
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 7 20:07:24 2001 +0000

    fixed warnings that occured when compiling with gcc-3.0
    ("deprecated use of label at end of compound statement"
    and "undefined reference to memset")


 examples/df_andi.c                    |    2 ++
 examples/df_dok.c                     |    2 +-
 examples/df_fire.c                    |    2 +-
 examples/df_joystick.c                |    1 +
 examples/df_particle.c                |    1 +
 examples/df_porter.c                  |    1 +
 examples/df_stress.c                  |    2 +-
 examples/df_video_particle.c          |    1 +
 gfxdrivers/ati128/ati128_state.c      |    3 ++-
 gfxdrivers/matrox/matrox.c            |    1 +
 gfxdrivers/matrox/matrox_state.c      |    1 +
 gfxdrivers/tdfx/tdfx.c                |    3 ++-
 src/core/fonts.c                      |    2 ++
 src/core/gfxcard.c                    |    2 ++
 src/core/input.c                      |    2 ++
 src/core/surfacemanager.c             |    1 +
 src/core/surfaces.c                   |    1 +
 src/core/windows.c                    |    4 ++++
 src/display/idirectfbdisplaylayer.c   |    2 ++
 src/display/idirectfbsurface.c        |    1 +
 src/display/idirectfbsurface_layer.c  |    1 +
 src/display/idirectfbsurface_window.c |    1 +
 src/gfx/convert.h                     |    2 ++
 src/input/idirectfbinputbuffer.c      |    1 +
 src/input/idirectfbinputdevice.c      |    1 +
 src/interface.c                       |    1 +
 src/media/idirectfbfont.c             |    1 +
 src/misc/gfx_util.c                   |    1 +
 src/misc/util.c                       |    2 ++
 src/windows/idirectfbwindow.c         |    1 +
 30 files changed, 42 insertions(+), 5 deletions(-)



commit 7e84ffe7a9f7d48ff2ea578233a4e4cb0789ebfe
Author: Andreas Hundt <andi@directfb.org>
Date:   Mon May 7 17:57:41 2001 +0000

    applied patch from Johannes Stezenbach <js@convergence.de> which
    adds the following functions.
    
    - IDirectFBVideoProvider::GetPos():    get current position in the stream
    - IDirectFBVideoProvider::GetLength(): get length in seconds
    
    the functions are currently implemented in the avifile provider only,
    v4l and swf providers return DFB_UNIMPLEMENTED.


 include/directfb.h                            |   16 +++++++
 interfaces/idirectfbvideoprovider_avifile.cpp |   44 +++++++++++++++++++-
 interfaces/idirectfbvideoprovider_swf.c       |   46 +++++++++++++++++++-
 interfaces/idirectfbvideoprovider_v4l.c       |   57 ++++++++++++++++++++++++++
 4 files changed, 158 insertions(+), 5 deletions(-)



commit fde334dfe437bc7ad0778f8c822794d5c5e2813e
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 21:47:33 2001 +0000

    Made 0.9.1 release


 ChangeLog           |    4 ++++
 patches/Makefile.am |    4 ++--
 2 files changed, 6 insertions(+), 2 deletions(-)



commit 92fb43b260bdd0f93490bb6f8255491758c49962
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 19:17:06 2001 +0000

    Changed clip_triangle_precheck() so it drops triangles that need to
    be clipped. This is a temporary workaround for the lack of proper
    clipping code and keeps us from trying to draw beyond the surface
    borders.
    
    Corrected scaling factor in df_knuckles.


 examples/df_knuckles/df_knuckles.c |    4 ++--
 src/core/gfxcard.c                 |   13 +++++--------
 src/misc/gfx_util.c                |    8 +++++++-
 3 files changed, 14 insertions(+), 11 deletions(-)



commit 64a778d308c0d474d96bae7ba1e7687b7f5cfcea
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 18:39:33 2001 +0000

    allow to toggle BackfaceCulling using 'B' on your keyboard
    default to BackfaceCulling = False


 df_knuckles.c |   19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)



commit 90ae5296c73fc90945a37b7a9a8db159143aa866
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 18:15:20 2001 +0000

    added a second light source, nightblue and static


 df_knuckles.c |   43 ++++++++++++++++++++++++++++---------------
 1 file changed, 28 insertions(+), 15 deletions(-)



commit 241f756c076c3202f69bd352333892540428b242
Author: Michael Natterer <mitch@directfb.org>
Date:   Thu May 3 17:23:12 2001 +0000

    Regenerated ChangeLog with a nicer script.


 ChangeLog | 1179 ++++++++++++++++++++++++++++++++------------------------------
 1 file changed, 609 insertions(+), 570 deletions(-)



commit 5a7d4c1f561d8ba4cfebdac287a2aad5111dfdf0
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 17:04:11 2001 +0000

    removed empty NOTES file


 0 files changed



commit 5c4a8ac23b751f5ea68a9b93cd7e983295ae3234
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 3 15:10:06 2001 +0000

    cleared NOTES, outdated


 NOTES |   24 ------------------------
 1 file changed, 24 deletions(-)



commit 0ef489c1da1f0a4a601501befebcf4fa8b831322
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 3 13:07:47 2001 +0000

    Added Sven's pkg-config additions to NEWS.


 NEWS |    2 ++
 1 file changed, 2 insertions(+)



commit d554f27fc6089fc0a1ca813c0e2134618015de2c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 3 12:50:31 2001 +0000

    Generated ChangeLog.
    Wrote NEWS.
    Made DFBInputEvent.key_unicode an __u32.


 ChangeLog          |  209 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 NEWS               |   43 ++++++++++
 include/directfb.h |    2 
 3 files changed, 253 insertions(+), 1 deletion(-)



commit 6fac0eb32e54aadc6f102bc934b1536537029c6e
Author: Sven Neumann <neo@directfb.org>
Date:   Thu May 3 11:57:22 2001 +0000

    added pkg-config files for the interfaces that get optionally installed
    so apps can test for their existence


 .cvsignore             |    2 ++
 Makefile.am            |   13 ++++++++++++-
 configure.in           |    6 ++++--
 directfb-avifile.pc.in |   11 +++++++++++
 directfb-swf.pc.in     |   11 +++++++++++
 5 files changed, 40 insertions(+), 3 deletions(-)



commit 2f738040b395392953a73fb594d4e703a1cc7cf6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 3 11:46:11 2001 +0000

    Added my framebuffer driver for all NeoMagic PCI/AGP chips.


 neofb-0.2.1-patch-2.4.3.bz2 |binary
 1 file changed



commit 111f4e7604b3a16cbba052cb4236021126b9eae7
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu May 3 11:27:03 2001 +0000

    Added IDirectFBInputDevice->GetButtonState() which returns the
    state of the specified button.
    Added DFBInputDeviceButtonState.


 include/directfb.h               |   18 +++++
 src/input/idirectfbinputdevice.c |  126 ++++++++++++++-------------------------
 2 files changed, 66 insertions(+), 78 deletions(-)



commit d99d7460d2c5fc0c09680b0a43115db73c87e886
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 2 11:17:32 2001 +0000

    allow to switch between FLAT_SHADED and WIRE_FRAME using Space


 df_knuckles.c |   71 ++++++++++++++++++++++++++++++++++++++++++++--------------
 1 file changed, 54 insertions(+), 17 deletions(-)



commit f97a8eeeb84247bbb93570695992c7b6349e915b
Author: Sven Neumann <neo@directfb.org>
Date:   Wed May 2 10:53:51 2001 +0000

    Introduced clip_triangle_precheck() that tests if a triangle needs to
    be drawn at all.
    
    Beautified line drawing examples in df_dok.


 examples/df_dok.c   |   26 ++++++++++++++------------
 src/core/gfxcard.c  |   20 +++++++++++---------
 src/misc/gfx_util.c |   13 +++++++++++++
 src/misc/gfx_util.h |    5 +++--
 4 files changed, 41 insertions(+), 23 deletions(-)



commit c7ae9484e54094ff1f65b2a3f100512f15d4b2a0
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 08:48:36 2001 +0000

    Implemented triangle filling in Matrox driver.
    Renamed utility macro SGN to SIGN.


 gfxdrivers/matrox/matrox.c       |   74 +++++++++++++++++++++++++++++++++++++++
 gfxdrivers/matrox/matrox_state.c |   13 ++++++
 gfxdrivers/matrox/regs.h         |    3 +
 src/gfx/generic/generic.c        |    4 +-
 src/misc/util.h                  |    2 -
 5 files changed, 93 insertions(+), 3 deletions(-)



commit 39c658fa5349f6b8abd427846b7d86a82d5f5df5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 06:02:48 2001 +0000

    yeah, rotating light!


 df_knuckles.c |   18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)



commit 5ad7c7d04d4327a2e62a378ce0878b21120b5338
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 05:41:38 2001 +0000

    golden skull ;)


 df_knuckles.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 03fe13cdbcecec872e32b9e5cd91fdbf8fcf4dea
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 05:14:58 2001 +0000

    Added new cool demo called df_knuckles, it's a port from Mark Vojkovich's
    skull demo for DGA and a good demonstration of triangles.
    
    Fixed CheckState in Matrox driver, it does not support all functions any more.
    Added rounding to fixed point triangle setup.


 configure.in                       |    1 
 examples/Makefile.am               |    2 
 examples/df_knuckles/.cvsignore    |    5 
 examples/df_knuckles/Makefile.am   |   28 
 examples/df_knuckles/df_knuckles.c |  321 ++++++
 examples/df_knuckles/matrix.c      |  179 +++
 examples/df_knuckles/matrix.h      |   58 +
 examples/df_knuckles/skull.h       | 1960 +++++++++++++++++++++++++++++++++++++
 gfxdrivers/matrox/matrox.c         |   16 
 src/gfx/generic/generic.c          |    2 
 10 files changed, 2563 insertions(+), 9 deletions(-)



commit 308945bb1963fb246afca5a0ba988f02823598b1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 03:37:46 2001 +0000

    implemented triangle filling in generic driver
    moved utility function sort_triangle from tdfx driver to gfx/util.h
    added triangles to df_dok


 examples/df_dok.c         |  104 +++++++++++++++++++++++++++++++++++-----------
 gfxdrivers/tdfx/tdfx.c    |   36 ---------------
 src/core/gfxcard.c        |   10 ++--
 src/gfx/generic/generic.c |   60 ++++++++++++++++++++++++++
 src/gfx/generic/generic.h |    1 
 src/gfx/util.h            |   35 +++++++++++++++
 6 files changed, 184 insertions(+), 62 deletions(-)



commit d12a1c2b800ddbaf7ac276a003d2ba2e79abcf44
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sun Apr 29 01:13:09 2001 +0000

    compile with "-g3" if "--enable-debug" is passed to configure


 configure.in |    1 +
 1 file changed, 1 insertion(+)



commit 2579d65400a613fb2427ff501f3bf2104247609d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 27 14:43:53 2001 +0000

    fixed accelerator ids


 neomagic.c |   10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)



commit f740f41821ff65005d28d6beb4fe9679d5f03c13
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Apr 26 23:36:52 2001 +0000

    Moved command-line parsing out of DirectFBCreate() into DirectFBInit().
    This means to inititalize DirectFB() there are now two calls necessary:
    
      DirectFBInit( &argc, &argv );
      DirectFBCreate( &dfb );
    
    This makes is possible to do further checks on the command-line before
    switching to graphics mode on DirectFBCreate.


 examples/df_andi.c           |    4 +++-
 examples/df_dok.c            |    4 +++-
 examples/df_fire.c           |    5 ++++-
 examples/df_joystick.c       |    5 ++++-
 examples/df_neo/df_neo.c     |    4 +++-
 examples/df_particle.c       |    5 ++++-
 examples/df_porter.c         |    4 +++-
 examples/df_stress.c         |    4 +++-
 examples/df_video.c          |    4 +++-
 examples/df_video_particle.c |    5 ++++-
 examples/df_window.c         |    4 +++-
 include/directfb.h           |   12 ++++++++++--
 src/directfb.c               |   32 +++++++++++++++++++++-----------
 13 files changed, 68 insertions(+), 24 deletions(-)



commit fa3249dc57c0f62584039241186f1b439d6a4d1b
Author: Michael Natterer <mitch@directfb.org>
Date:   Thu Apr 26 22:47:50 2001 +0000

    - If we need argv[1] as video source, check for it instead of simply
      crashing if it's not there.
    - Release the video provider so DMA from the tuner hardware doesn't
      trash framebuffer memory after the demo finished.


 df_video.c          |    7 +++++++
 df_video_particle.c |    6 ++++++
 df_window.c         |   14 +++++++++++++-
 3 files changed, 26 insertions(+), 1 deletion(-)



commit 893ee69e897a34752f89522555ef62edf958a7ee
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 26 21:05:26 2001 +0000

    FillRectangle! But only on Voodoo, yet.
    Accepts drawing flag DSDRAW_BLEND.


 gfxdrivers/tdfx/tdfx.c         |   94 +++++++++++++++++++++++++++++++++++++----
 include/directfb.h             |   26 +++++++++++
 src/core/gfxcard.c             |   23 ++++++++++
 src/core/gfxcard.h             |    4 +
 src/display/idirectfbsurface.c |   32 +++++++++++++
 5 files changed, 172 insertions(+), 7 deletions(-)



commit 7a42d0f386fcb4dcf7a94338a29c6b58cf675c41
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Apr 26 20:30:56 2001 +0000

    forgot to remove the free's here


 df_neo.c |    2 --
 1 file changed, 2 deletions(-)



commit 02f48e08c3890aba1d6a8d37022fbe18c7035b72
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 26 11:44:08 2001 +0000

    free interfaces if reference counter reaches zero,
    disabled in debug mode to enable the feature of DFB_DEAD


 examples/df_dok.c                             |    4 ++--
 examples/df_stress.c                          |    8 ++------
 interfaces/idirectfbimageprovider_gif.c       |    8 ++++++--
 interfaces/idirectfbimageprovider_jpeg.c      |    8 ++++++--
 interfaces/idirectfbimageprovider_png.c       |    8 ++++++--
 interfaces/idirectfbvideoprovider_avifile.cpp |    4 ++++
 interfaces/idirectfbvideoprovider_swf.c       |    4 ++++
 interfaces/idirectfbvideoprovider_v4l.c       |    4 ++++
 src/display/idirectfbdisplaylayer.c           |    4 ++++
 src/display/idirectfbsurface.c                |    4 ++++
 src/display/idirectfbsurface_layer.c          |    4 ++++
 src/display/idirectfbsurface_window.c         |    4 ++++
 src/idirectfb.c                               |    6 ++++++
 src/input/idirectfbinputbuffer.c              |    4 ++++
 src/input/idirectfbinputdevice.c              |    4 ++++
 src/media/idirectfbfont.c                     |    4 ++++
 src/windows/idirectfbwindow.c                 |    4 ++++
 17 files changed, 72 insertions(+), 14 deletions(-)



commit e478aa82f9489e94c1f63f6601b37d337f16c056
Author: Michael Natterer <mitch@directfb.org>
Date:   Thu Apr 26 00:11:18 2001 +0000

    Fixed the check if avifile-config was found.


 configure.in |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit 7b5b31e0a6884e22eb35136d3524b6fcf302ece1
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 25 21:10:23 2001 +0000

    removed unused files


 idirectfbvideoprovider.c |  175 -----------------------------------------------
 idirectfbvideoprovider.h |   38 ----------
 2 files changed, 213 deletions(-)



commit b2a15826add6eaeb04aec49aa3bc8856174fb4c7
Author: holger <holger>
Date:   Wed Apr 25 20:33:59 2001 +0000

    free interfaces if constuctor failed


 idirectfb.c |   27 ++++++++++++++++++++++++---
 1 file changed, 24 insertions(+), 3 deletions(-)



commit 0c9ee2a440c5383308bdf1eb3a7cea0f2f987918
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 25 18:01:29 2001 +0000

    fixed caps passed to IDirectFBSurface_Layer_Construct


 idirectfbdisplaylayer.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)



commit 473b007802afce63c0843004324e09d7a8df0855
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 24 13:34:54 2001 +0000

    Reset card state in suspend, some glitches still there.
    Generated changelog.


 ChangeLog       |  601 +++++++++++++++++++++++++++++++++++++++++++++++++++++++-
 src/idirectfb.c |    3 
 2 files changed, 598 insertions(+), 6 deletions(-)



commit 305a9fee889f178bfec52bcca5727bb6ab4f05eb
Author: Sven Neumann <neo@directfb.org>
Date:   Tue Apr 24 13:14:20 2001 +0000

    Added Shockwave Flash videoprovider hacked by Roh.
    
    Uses libflash which can be found repackaged at
    http://www.directfb.org/download/. There is no acceleration yet, we just
    tell libflash to draw into a DirectFB surface. Sound and interaction are
    also disabled.
    
    Try to build avifile videoprovider by default. Can be disabled by passing
    --disable-avifile to configure.


 README                                  |    5 
 configure.in                            |   19 +
 interfaces/Makefile.am                  |   16 +
 interfaces/idirectfbvideoprovider_swf.c |  477 ++++++++++++++++++++++++++++++++
 4 files changed, 512 insertions(+), 5 deletions(-)



commit af3abf37fe1212aa72ae3ce39b00d882a7cf69cb
Author: Sven Neumann <neo@directfb.org>
Date:   Mon Apr 23 17:04:36 2001 +0000

    Bumped version number to 0.9.1
    
    Added an avifile option to directfb-config that makes --libs output the
    suitable LDFLAGS so the avifile provider can be used with the linked
    application. Will need to figure out how to do this right in directfb.pc.


 configure.in           |    4 ++--
 directfb-config.in     |   18 +++++++++++++++---
 examples/Makefile.am   |   20 +++-----------------
 interfaces/Makefile.am |    2 +-
 4 files changed, 21 insertions(+), 23 deletions(-)



commit 16d699ca8a93a3fa62f98578bda4ff263c2551ed
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 20 19:15:54 2001 +0000

    Fixed the segfault that happens at exit in all applications using an
    IDirectFBDisplayLayer.
    
    more signed/unsigned cleanups, we need to check all code for that


 core/surfaces.h                 |    4 ++--
 core/windows.c                  |    2 +-
 core/windows.h                  |   31 ++++++++++++++++---------------
 display/idirectfbdisplaylayer.c |    9 ++++++---
 4 files changed, 25 insertions(+), 21 deletions(-)



commit 7c3725fa009725979049fe6a9dd08c8f1ea2eaa8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 20 18:52:18 2001 +0000

    signed/unsigned int cleanup


 include/directfb.h             |   22 +++++++++++-----------
 src/display/idirectfbsurface.c |    2 +-
 src/idirectfb.c                |    3 ++-
 src/windows/idirectfbwindow.c  |    7 ++++---
 4 files changed, 18 insertions(+), 16 deletions(-)



commit 70d33987eb1c84b799d19517a0d28a76caf21622
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 20 14:38:11 2001 +0000

    removed bogus test lines from driver


 tdfx.c |    3 ---
 1 file changed, 3 deletions(-)



commit 3b37fd329bc2750daaf3397de00651aefafb94f0
Author: Sven Neumann <neo@directfb.org>
Date:   Thu Apr 19 20:57:54 2001 +0000

    do not enable the cursor by default
    explicitely enabled the cursor in df_fire


 examples/df_fire.c |    1 +
 src/idirectfb.c    |    2 --
 2 files changed, 1 insertion(+), 2 deletions(-)



commit 963b4628d5030515b115ae8177adda2a2c311745
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Sat Apr 14 22:14:36 2001 +0000

    also support .asf


 idirectfbvideoprovider_avifile.cpp |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)



commit 0cae91379f36096825e8898c0ba4bd343178a4bf
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Fri Apr 13 07:07:52 2001 +0000

    Stop works now, actually doing a Pause (Stop crashes avifile).
    PlayTo no more stops the video before destination setup and
    checks if the video should be UnPaused, Started or left Playing.
    
    Works really fine to call PlayTo several times with different destinations.
    (Different surfaces on the fly not tested yet. Todo: Mutex PlayTo/DrawCallback)


 idirectfbvideoprovider_avifile.cpp |   25 +++++++++++++++++++++----
 1 file changed, 21 insertions(+), 4 deletions(-)



commit 5e37db8d246b7fce6248c8c7396c33c230276a23
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 12 21:06:14 2001 +0000

    V4L Videoprovider Probe now checks if the filename bgeins with "/dev/video",
    so you have to pass e.g. "/dev/video0" to the provider and not NULL.
    Removed video4linux from core.
    V4L Provider still needs these:
    1. Clean up code.
    2. Add grabbing support.
    3. Do proper surface listening (resize, destroy, ...).


 b/interfaces/idirectfbvideoprovider_v4l.c |  260 +++++++++++++++++++++++++-
 b/src/core/Makefile.am                    |    2 
 b/src/idirectfb.c                         |   17 -
 src/core/v4l.c                            |  289 ------------------------------
 src/core/v4l.h                            |   52 -----
 5 files changed, 253 insertions(+), 367 deletions(-)



commit 6ec4cbc0d37fc983148806b9cb82595286a7406b
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 12 20:59:43 2001 +0000

    compiles with newest avifile version now


 idirectfbvideoprovider_avifile.cpp |    9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)



commit 3cb8e1410dba23f0024ed0babbfe33b122cd034e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Thu Apr 12 15:48:29 2001 +0000

    oops, directfb.h said "SetColor(a,r,g,b)", it is "r, g, b, a"


 directfb.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)



commit c85266af87b82531cd926758a3535071e8798d48
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 11 01:47:47 2001 +0000

    -removed composed blitting flags (DECAL,MODULATE,...)
    -precheck if destination format is supported in jpeg provider,
    image loading needs to be cleaned up badly (src/misc/gfx_util.c, too).


 include/directfb.h                       |    9 +--------
 interfaces/idirectfbimageprovider_jpeg.c |   23 +++++++++++++++--------
 2 files changed, 16 insertions(+), 16 deletions(-)



commit 030db92769e5951ceb91303acd379e5ea1e5d8e6
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Wed Apr 11 00:44:41 2001 +0000

    implemented flipping of general purpose surfaces (no layer, no window)
    a) that are subsurfaces
    b) with specified flip region
    c) with DSFLIP_BLIT flag


 idirectfbsurface.c       |   23 +++++++++++++++++++----
 idirectfbsurface_layer.c |    4 +---
 2 files changed, 20 insertions(+), 7 deletions(-)



commit e0ebe46725106cf5d3567b1a6eb1ac4154d64ee5
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 23:48:23 2001 +0000

    fixed parsing of struct members and interface call parameters
    that have a type with spaces, e.g. "unsigned int".
    
    improved linking within types.html for struct members, e.g. flags


 gendoc.pl |   86 ++++++++++++++++++++++++++++++++++++--------------------------
 1 file changed, 51 insertions(+), 35 deletions(-)



commit 75c058b2fd90d1f1b259bb6961132bb08ebda3b2
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 22:44:45 2001 +0000

    added missing "void *callbackdata" to callbacks:
    DFBInputDeviceCallback and DFBVideoModeCallback


 examples/df_joystick.c |    5 +++--
 include/directfb.h     |   14 +++++++++-----
 src/idirectfb.c        |   12 +++++++-----
 3 files changed, 19 insertions(+), 12 deletions(-)



commit f7c86c9e818558f38c961f88a22c41e3cc137e76
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 16:32:27 2001 +0000

    removed clipping from software drivers blitting functions, gfxcard.c does this
    removed debugging sleep from df_window


 examples/df_window.c      |    2 --
 src/gfx/generic/generic.c |   12 ------------
 2 files changed, 14 deletions(-)



commit f24ad236aeb6ffb2603462862673d9f970a3c29e
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 14:04:29 2001 +0000

    added note about where to place this file


 fb.modes |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)



commit baf3d673f196c25239207117145a9e3ad442f9ad
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 13:27:36 2001 +0000

    added 768x576 mode (PAL), but at 75Hz


 fb.modes |   13 +++++++++++++
 1 file changed, 13 insertions(+)



commit 779997a21584eeb8dc86ead1d8017fa68367868c
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 13:00:53 2001 +0000

    added #warning to help people compile the avifile provider
    with a newer version of avifile


 idirectfbvideoprovider_avifile.cpp |    1 +
 1 file changed, 1 insertion(+)



commit 1a7f5c48ca04e6b581062f626c72315f8fdda9c8
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 12:58:00 2001 +0000

    standard files


 .cvsignore              |    6 ++++++
 inputdevices/.cvsignore |    6 ++++++
 2 files changed, 12 insertions(+)



commit 7f0e73d61230440c312aa80e686daf542911a18d
Author: Denis Oliver Kropp <dok@directfb.org>
Date:   Tue Apr 10 12:57:11 2001 +0000

    added missing files that got sorted out by .cvsignore


 Makefile.am              |   52 ++
 core.c                   |  170 ++++++++
 core.h                   |   56 ++
 coredefs.h               |   88 ++++
 fbdev.c                  |  688 +++++++++++++++++++++++++++++++++
 fbdev.h                  |   88 ++++
 fonts.c                  |  120 +++++
 fonts.h                  |   67 +++
 gfxcard.c                |  602 +++++++++++++++++++++++++++++
 gfxcard.h                |  192 +++++++++
 input.c                  |  265 ++++++++++++
 input.h                  |  119 +++++
 inputdevices/Makefile.am |   19 
 inputdevices/joystick.c  |  135 ++++++
 inputdevices/joystick.h  |   37 +
 inputdevices/keyboard.c  |  489 +++++++++++++++++++++++
 inputdevices/keyboard.h  |   37 +
 inputdevices/ps2mouse.c  |  215 ++++++++++
 inputdevices/ps2mouse.h  |   37 +
 layers.c                 |  317 +++++++++++++++
 layers.h                 |  136 ++++++
 sig.c                    |   70 +++
 sig.h                    |   33 +
 state.c                  |  115 +++++
 state.h                  |   75 +++
 surfacemanager.c         |  421 ++++++++++++++++++++
 surfacemanager.h         |   89 ++++
 surfaces.c               |  516 +++++++++++++++++++++++++
 surfaces.h               |  196 +++++++++
 v4l.c                    |  289 ++++++++++++++
 v4l.h                    |   52 ++
 vt.c                     |  125 ++++++
 vt.h                     |   47 ++
 windows.c                |  961 +++++++++++++++++++++++++++++++++++++++++++++++
 windows.h                |  220 ++++++++++
 35 files changed, 7138 insertions(+)



commit 3c0c679d473211afbe859ae84def8f1525fea1f2
Author: Sven Neumann <neo@directfb.org>
Date:   Fri Apr 6 20:34:30 2001 +0000

    Documented the release version number in the ChangeLog.


 ChangeLog |    8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)





 .cvsignore                                    |   19 
 AUTHORS                                       |    3 
 BUGS                                          |   28 
 COPYING                                       |  504 ++++++
 ChangeLog                                     |    3 
 Makefile.am                                   |   20 
 NOTES                                         |   24 
 README                                        |  140 +
 README.screenshots                            |   43 
 TODO                                          |    1 
 acconfig.h                                    |   16 
 autogen.sh                                    |  110 +
 configure.in                                  |  297 +++
 directfb-config.in                            |   91 +
 directfb.pc.in                                |   10 
 docs/.cvsignore                               |    3 
 docs/Makefile.am                              |   12 
 docs/html/.cvsignore                          |    1 
 docs/html/cimlogo.png                         |binary
 docs/html/directfb.png                        |binary
 examples/.cvsignore                           |   19 
 examples/Makefile.am                          |  104 +
 examples/colorkeyed.png                       |binary
 examples/convergence.png                      |binary
 examples/cursor.dat                           |binary
 examples/cursor.png                           |binary
 examples/cursor2.c                            |  352 ++++
 examples/cursor64x64.dat                      |binary
 examples/decker.ttf                           |binary
 examples/desktop.png                          |binary
 examples/destination_mask.png                 |binary
 examples/df_andi.c                            |  618 +++++++
 examples/df_dok.c                             |  689 ++++++++
 examples/df_dok.results                       |   56 
 examples/df_dok_benchmark                     |    8 
 examples/df_fire.c                            |  192 ++
 examples/df_joystick.c                        |  300 +++
 examples/df_neo/.cvsignore                    |    5 
 examples/df_neo/Makefile.am                   |   46 
 examples/df_neo/apple-red.png                 |binary
 examples/df_neo/background.jpg                |binary
 examples/df_neo/df_neo.c                      |  321 +++
 examples/df_neo/gnome-applets.png             |binary
 examples/df_neo/gnome-calendar.png            |binary
 examples/df_neo/gnome-foot.png                |binary
 examples/df_neo/gnome-gimp.png                |binary
 examples/df_neo/gnome-gmush.png               |binary
 examples/df_neo/gnome-gsame.png               |binary
 examples/df_neo/gnu-keys.png                  |binary
 examples/df_particle.c                        |  299 +++
 examples/df_porter.c                          |  142 +
 examples/df_stress.c                          |  167 +
 examples/df_video.c                           |  203 ++
 examples/df_video_particle.c                  |  386 ++++
 examples/df_window.c                          |  380 ++++
 examples/dfblogo.png                          |binary
 examples/font.data                            |binary
 examples/intro.png                            |binary
 examples/melted.png                           |binary
 examples/meter.png                            |binary
 examples/pngtest.png                          |binary
 examples/pngtest2.png                         |binary
 examples/shot.png                             |binary
 examples/tux.png                              |binary
 examples/wood_andi.jpg                        |binary
 fb.modes                                      |   75 
 gfxdrivers/.cvsignore                         |    6 
 gfxdrivers/Makefile.am                        |    3 
 gfxdrivers/ati128/.cvsignore                  |    6 
 gfxdrivers/ati128/Makefile.am                 |   26 
 gfxdrivers/ati128/ati128.c                    |  628 +++++++
 gfxdrivers/ati128/ati128.h                    |   39 
 gfxdrivers/ati128/ati128_state.c              |  228 ++
 gfxdrivers/ati128/ati128_state.h              |   40 
 gfxdrivers/ati128/mmio.h                      |  124 +
 gfxdrivers/ati128/regs.h                      |  828 +++++++++
 gfxdrivers/matrox/.cvsignore                  |    6 
 gfxdrivers/matrox/Makefile.am                 |   25 
 gfxdrivers/matrox/matrox.c                    |  427 +++++
 gfxdrivers/matrox/matrox.h                    |   57 
 gfxdrivers/matrox/matrox_state.c              |  396 ++++
 gfxdrivers/matrox/matrox_state.h              |   46 
 gfxdrivers/matrox/mmio.h                      |   97 +
 gfxdrivers/matrox/regs.h                      |  294 +++
 gfxdrivers/neomagic/.cvsignore                |    6 
 gfxdrivers/neomagic/Makefile.am               |   23 
 gfxdrivers/neomagic/neo2200.c                 |  434 +++++
 gfxdrivers/neomagic/neomagic.c                |  136 +
 gfxdrivers/neomagic/neomagic.h                |   94 +
 gfxdrivers/tdfx/.cvsignore                    |    6 
 gfxdrivers/tdfx/Makefile.am                   |   22 
 gfxdrivers/tdfx/tdfx.c                        |  706 ++++++++
 gfxdrivers/tdfx/tdfx.h                        |  243 ++
 include/.cvsignore                            |    3 
 include/Makefile.am                           |    8 
 include/directfb.h                            | 1886 ++++++++++++++++++++++
 include/directfb_internals.h                  |   49 
 include/directfb_version.h.in                 |   38 
 interfaces/.cvsignore                         |    6 
 interfaces/Makefile.am                        |   62 
 interfaces/idirectfbfont_ft2.c                |  268 +++
 interfaces/idirectfbimageprovider_gif.c       |  755 +++++++++
 interfaces/idirectfbimageprovider_jpeg.c      |  411 ++++
 interfaces/idirectfbimageprovider_png.c       |  381 ++++
 interfaces/idirectfbvideoprovider.c           |  175 ++
 interfaces/idirectfbvideoprovider.h           |   38 
 interfaces/idirectfbvideoprovider_avifile.cpp |  363 ++++
 interfaces/idirectfbvideoprovider_v4l.c       |  214 ++
 mkchlog                                       |   67 
 patches/.cvsignore                            |    2 
 patches/Makefile.am                           |    8 
 patches/README.atyfb_patch_2.4.0-andi         |   38 
 patches/aty128fb_patch_2.4.0-andi             |  206 ++
 patches/matroxfb-vsync-irq.patch              |  112 +
 src/.cvsignore                                |    6 
 src/Makefile.am                               |   40 
 src/directfb.c                                |  289 +++
 src/display/.cvsignore                        |    6 
 src/display/Makefile.am                       |   21 
 src/display/idirectfbdisplaylayer.c           |  464 +++++
 src/display/idirectfbdisplaylayer.h           |   43 
 src/display/idirectfbsurface.c                | 1046 ++++++++++++
 src/display/idirectfbsurface.h                |   65 
 src/display/idirectfbsurface_layer.c          |  219 ++
 src/display/idirectfbsurface_layer.h          |   47 
 src/display/idirectfbsurface_window.c         |  191 ++
 src/display/idirectfbsurface_window.h         |   46 
 src/export_list.sym                           |    9 
 src/gfx/.cvsignore                            |    6 
 src/gfx/Makefile.am                           |   21 
 src/gfx/convert.c                             |  180 ++
 src/gfx/convert.h                             |  170 ++
 src/gfx/generic/.cvsignore                    |    6 
 src/gfx/generic/Cacc_add_to_Dacc_MMX.s        |   38 
 src/gfx/generic/Dacc_modulate_argb_MMX.s      |   43 
 src/gfx/generic/Makefile.am                   |   32 
 src/gfx/generic/Sacc_add_to_Dacc_MMX.s        |   39 
 src/gfx/generic/Sacc_to_Dop_rgb16_MMX.s       |   62 
 src/gfx/generic/Sacc_to_Dop_rgb32_MMX.s       |   59 
 src/gfx/generic/Sop_argb_Sto_Dacc_MMX.s       |   59 
 src/gfx/generic/Sop_argb_to_Dacc_MMX.s        |   41 
 src/gfx/generic/Sop_rgb16_to_Dacc_MMX.s       |  131 +
 src/gfx/generic/Sop_rgb32_to_Dacc_MMX.s       |   44 
 src/gfx/generic/Xacc_blend_invsrcalpha_MMX.s  |   90 +
 src/gfx/generic/Xacc_blend_srcalpha_MMX.s     |   92 +
 src/gfx/generic/detect_MMX.s                  |   52 
 src/gfx/generic/generic.c                     | 2176 ++++++++++++++++++++++++++
 src/gfx/generic/generic.h                     |  163 +
 src/gfx/util.c                                |   84 +
 src/gfx/util.h                                |   32 
 src/idirectfb.c                               |  589 +++++++
 src/idirectfb.h                               |   47 
 src/input/.cvsignore                          |    6 
 src/input/Makefile.am                         |   17 
 src/input/idirectfbinputbuffer.c              |  281 +++
 src/input/idirectfbinputbuffer.h              |   40 
 src/input/idirectfbinputdevice.c              |  335 ++++
 src/input/idirectfbinputdevice.h              |   39 
 src/interface.c                               |  206 ++
 src/media/.cvsignore                          |    6 
 src/media/Makefile.am                         |   15 
 src/media/idirectfbfont.c                     |  224 ++
 src/media/idirectfbfont.h                     |   56 
 src/misc/.cvsignore                           |    6 
 src/misc/Makefile.am                          |   19 
 src/misc/conf.c                               |  442 +++++
 src/misc/conf.h                               |   91 +
 src/misc/gfx_util.c                           |  737 ++++++++
 src/misc/gfx_util.h                           |   55 
 src/misc/util.c                               |  186 ++
 src/misc/util.h                               |   58 
 src/windows/.cvsignore                        |    6 
 src/windows/Makefile.am                       |   15 
 src/windows/idirectfbwindow.c                 |  402 ++++
 src/windows/idirectfbwindow.h                 |   46 
 tools/.cvsignore                              |    6 
 tools/Makefile.am                             |   11 
 tools/README                                  |    6 
 tools/gendoc.pl                               |  499 +++++
 tools/raw16toraw24.c                          |   26 
 tools/raw32toraw24.c                          |   28 
 181 files changed, 26335 insertions(+)



