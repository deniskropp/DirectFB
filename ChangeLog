2003-01-10 16:20  neo

	* configure.in: Reverted my latest change since they need autoconf
	> 2.13.  Will instead move this code to DirectFB-extra and do it
	correctly there.

2003-01-09 17:46  neo

	* docs/directfbrc.5.in: Fixed a typo and separated the comon from
	the exotic pixel formats.

2003-01-08 16:47  neo

	* configure.in, tools/dfbsummon.c: AC_LANG_PUSH C++ before checking
	for libflash, AC_LANG_POP afterwards.

2003-01-04 22:25  andi

	* src/misc/: Makefile.am, memcpy.c, ppcasm_memcpy.S,
	ppcasm_memcpy.h, ppcasm_memcpy_cachable.S, ppcasm_string.S,
	ppcasm_string.h: - moved ppcasm_memcpy and ppcasm_memcpy_cachable
	into two seperate files - ppcasm_memcpy_cachable is only built on
	linux
	
	TODO: do not build ppcasm_memcpy_cachabe by defaut since this will
	create machine specific code.

2003-01-04 21:46  andi

	* src/misc/ppcasm_string.S: removed hardcoded CACHELINE_BYTES, uses
	values from <asm/cache.h> instead

2003-01-04 21:18  andi

	* configure.in: - dont call AC_PROG_CC twice

2003-01-04 21:10  andi

	* configure.in: - fix build problems with automake 1.5 when
	compiling assembler source - removed AM_PROG_CC_STDC macro which is
	obsolete, use AC_PROG_CC instead
	
	"This macro is a relic from the time Autoconf didn't offer such a
	feature.  AM_PROG_CC_STDC's logic has now been merged into
	Autoconf's AC_PROG_CC macro, therefore you should use the latter
	instead. Chances are you are already using AC_PROG_CC, so you can
	simply remove the AM_PROG_CC_STDC call and turn all occurrences of
	$am_cv_prog_cc_stdc into $ac_cv_prog_cc_stdc.  AM_PROG_CC_STDC will
	be marked as obsolete (in the Autoconf sense) in Automake 1.8."

2003-01-04 20:58  andi

	* src/core/fbdev/fbdev.c: - bugfix for ARGB primary. someone did
	copy&paste from RGB16 values...

2002-12-29 18:50  andi

	* src/core/fbdev/fbdev.c: fixed fix

2002-12-29 18:39  andi

	* src/core/fbdev/fbdev.c: fix handling of palette alpha values

2002-12-28 20:36  andi

	* src/gfx/generic/generic.c: bugfix for ARGB1555 pixelformat

2002-12-27 22:25  dok

	* src/core/fusion/: ref.c, ref.h: Removed some debug code.

2002-12-27 21:58  dok

	* src/gfx/generic/generic.c: Fixed 15bit color keyed blitting.

2002-12-27 20:41  andi

	* configure.in, src/misc/Makefile.am, src/misc/memcpy.c,
	src/misc/ppc_asm.h, src/misc/ppcasm_string.S,
	src/misc/ppcasm_string.h: integrated optimized ppc memcopy from
	xine
	
	this is evil and breaks at least compilation under OSX. should be
	disabled by default.

2002-12-27 20:39  dok

	* src/core/: input.h, layers.c, palette.h, surfaces.c, surfaces.h,
	windows.c: Added enums for indices of global reactions, removes
	some FIXMEs.

2002-12-27 18:50  dok

	* gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128_state.c,
	gfxdrivers/cyber5k/cyber5k_underlay.c, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/matrox_crtc2.c,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/neomagic/neo2200.c,
	gfxdrivers/savage/savage3d.c, gfxdrivers/savage/savage4.c,
	gfxdrivers/savage/savage_streams_old.c, gfxdrivers/tdfx/tdfx.c,
	include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/idirectfb.c, src/core/input.c, src/core/surfaces.c,
	src/core/fbdev/fbdev.c, src/gfx/convert.c, src/gfx/convert.h,
	src/gfx/generic/generic.c, src/misc/conf.c, src/misc/gfx_util.c,
	tools/dfbdump.c, tools/directfb-csource.c: Changed DSPF_RGB15 to
	DSPF_ARGB1555, untested.

2002-12-27 18:42  andi

	* src/core/sdl/primary.c: small compile fix (follow changes to
	layer naming)

2002-12-27 06:26  dok

	* TODO, src/idirectfb.c: SetVideoMode() resizes the window of
	windowed fullscreen applications, untested.

2002-12-27 04:39  dok

	* NEWS: Made summarize for upcoming 0.9.16 release.

2002-12-19 21:53  dok

	* gfxdrivers/ati128/ati128_overlay.c, gfxdrivers/cyber5k/cyber5k.c,
	gfxdrivers/cyber5k/cyber5k_underlay.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/matrox_crtc2.c,
	gfxdrivers/matrox/matrox_spic.c, gfxdrivers/neomagic/neo_overlay.c,
	gfxdrivers/savage/savage_streams_old.c, include/directfb.h,
	src/core/layers.c, src/core/layers.h, src/core/fbdev/fbdev.c,
	src/display/idirectfbdisplaylayer.c: Ville Syrjala moved the layer
	name into the layer description and removed
	IDirectFBDisplayLayer::GetName(). Thanks!

2002-12-19 20:07  dok

	* gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_crtc2.c, gfxdrivers/matrox/matrox_maven.c,
	gfxdrivers/matrox/matrox_maven.h, gfxdrivers/matrox/matrox_spic.c,
	gfxdrivers/matrox/regs.h, src/core/input.c, src/core/input.h,
	src/core/layers.c, src/core/windows.c: Applied patch from Ville
	Syrjala <syrjala@sci.fi> that adds TV-Out and sub picture layer
	support for G450 and possibly G550, too. Thanks!
	
	Fixed two bugs related to (de)initialization of additional display
	layers by slave applications.

2002-12-18 22:34  dok

	* src/core/windows.c: Focus the window under the cursor after
	abandoning a window with Meta-A.

2002-12-18 18:53  dok

	* src/core/fusion/shmalloc/shmalloc.c: Don't send SIGTRAP if shared
	memory limit would be exceeded, return NULL.

2002-12-17 21:55  dok

	* src/core/palette.c, src/core/surfaces.c, src/core/windows.c,
	src/core/fusion/object.c, src/core/fusion/object.h,
	tools/dfbdump.c: Added FusionObjectState enum and
	fusion_object_activate().

2002-12-17 20:53  dok

	* ChangeLog, src/core/gfxcard.c, src/core/gfxcard.h,
	src/core/fbdev/fbdev.c: Added dfb_gfxcard_lock() and
	dfb_gfxcard_unlock(bool invalidate_state).  It's used by
	dfb_fbdev_set_mode() to workaround accelerator register writes by
	the framebuffer driver during FBIOPUT_VSCREENINFO.

2002-12-17 20:51  dok

	* configure.in: Force SDL disabled if multi application core is
	enabled.

2002-12-16 15:13  dok

	* src/idirectfb.c: Removed unnecessary newline.

2002-12-16 13:24  dok

	* patches/: Makefile.am, README.fusion,
	fusion-full-linux-2.4.20-rc1.patch.bz2,
	fusion-full-linux-2.4.20.patch.bz2: Forgot to update this one, too.

2002-12-15 22:54  neo

	* configure.in: Only check for a working C++ compiler if the
	avifile provider is going to be built.

2002-12-15 14:59  andi

	* src/misc/mem.h: if PAGE_SIZE and _SC_PAGE_SIZE (for sysconf())
	are undefined, theni still guess page size.

2002-12-13 19:36  dok

	* docs/directfbrc.5.in, src/core/core.c, src/core/fbdev/fbdev.c,
	src/misc/conf.c, src/misc/conf.h: Added "block-all-signals".

2002-12-13 18:57  dok

	* src/misc/mem.h: Don't guess page size if PAGE_SIZE is not
	defined, use POSIX sysconf(3).

2002-12-13 18:24  dok

	* src/core/: input.c, layers.c, layers.h, fusion/property.c,
	fusion/property.h: In multi application core Ctrl-Alt-Break sends a
	SIGKILL to the process that has exclusive access to the primary
	layer. No need to login from network or kill everything if a
	fullscreen app hangs.

2002-12-13 17:48  dok

	* tools/: Makefile.am, fusion_bench.c: Added threaded mutex and
	spinlock benchmark.

2002-12-12 20:01  dok

	* src/core/system.c: Use first system found as a fallback if the
	requested system hasn't been found.

2002-12-12 19:43  dok

	* include/directfb.h: Added DFB_COLOR_EQUAL macro.

2002-12-12 17:41  dok

	* src/core/: system.c, fbdev/fbdev.c: Include strings.h.

2002-12-11 17:50  dok

	* gfxdrivers/: ati128/ati128.c, nvidia/nvidia.c, tdfx/tdfx.c: Added
	missing <linux/fb.h> includes for accelerator ids.  Removed ifdefs
	because configure already checks for the definition.

2002-12-11 17:45  dok

	* src/core/fusion/reactor.c: Added "\n" to debug message.

2002-12-10 20:03  dok

	* README: Added new cshortcut.

2002-12-10 20:02  dok

	* src/core/windows.c: Added <Meta>-P shortcut that enables the
	cursor and sets the opacity to 0xff.

2002-12-10 19:56  dok

	* src/windows/idirectfbwindow.c: (Temporarily) set
	DWET_POSITION_SIZE in window event flags to avoid endless waiting.

2002-12-10 19:10  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Check return value of WaitForData() to avoid endless looping on
	unexpected EOF.

2002-12-09 19:14  dok

	* src/core/fusion/fusion.c: Added a dfb_thread_testcancel().

2002-12-09 15:57  dok

	* src/misc/conf.c: Always default to fbdev system.

2002-12-06 20:17  neo

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	try to workaround a crash in the OverlayThread

2002-12-05 19:22  dok

	* src/core/windows.c: Don't set window->stack to NULL in
	window_remove().

2002-12-05 18:51  dok

	* src/core/fusion/fusion.c: Open fusion device in non-blocking mode
	and use select(), fixes blocking in valgrind.

2002-12-05 18:48  neo

	* Makefile.am, configure.in: Added configure option --without-tools
	that allows to disable the build of the tools. Useful for
	cross-compilation.

2002-12-05 17:43  dok

	* src/core/thread.c: Removed a bit debug.

2002-12-05 17:42  dok

	* src/core/: thread.c, fusion/fusion.c, fusion/shmalloc/shmalloc.c:
	Added some debug output.

2002-12-05 13:00  dok

	* gfxdrivers/matrox/matrox_crtc2.c: Some experimental code from
	Ville Syrjala to avoid tearing.

2002-12-05 13:00  dok

	* include/directfb.h, src/core/layers.c, src/core/layers.h,
	src/display/idirectfbdisplaylayer.c: Patch from Ville Syrjala adds
	IDirectFBDisplayLayer::GetName().

2002-12-05 12:57  dok

	* include/directfb.h, src/core/windows.c, src/core/windows.h,
	src/windows/idirectfbwindow.c: Added IDirectFBWindow::GrabKey() and
	UngrabKey() which take a key symbol and a modifier mask, useful for
	panels etc.

2002-12-03 21:14  dok

	* src/core/windows.c: Added all required locks that were missing
	because recursive locks were unsupported.

2002-12-03 20:20  dok

	* configure.in, src/core/coredefs.h,
	src/core/fusion/fusion_internal.h: Added configure option
	"--disable-text" which reduces the stripped library size by ~20k on
	my system by removing all init, debug or error messages.

2002-12-03 19:06  dok

	* src/: core/core.c, core/fonts.c, core/surfacemanager.c,
	misc/Makefile.am, misc/conf.c, misc/conf.h, misc/fbdebug.c,
	misc/fbdebug.h: Removed obsolete fbdebug code.

2002-12-02 19:26  dok

	* src/core/fusion/: fusion.c, fusion_internal.h, reactor.c: Fixed
	some error handling code that infinitly looped.  Fixed reactor
	related reinitialization bug.

2002-12-02 18:05  dok

	* src/core/fusion/fusion.c: Fixed two reinitialization bugs.

2002-11-29 21:09  dok

	* src/core/layers.c: Detach global reaction from layer background
	surface before unlinking it.

2002-11-29 21:02  dok

	* src/core/fbdev/: fbdev.c, vt.c, vt.h: Slave processes on a real
	VT have to detach the thread going to mmap the MMIO regions.

2002-11-29 20:20  dok

	* src/core/fbdev/fbdev.c: If graphics-vt is disabled (default) at
	least temporarily switch to KD_GRAPHICS during FBIO_PUTVSCREENINFO
	to avoid redraw (clear & text) of the text console when fullscreen
	apps start.

2002-11-29 19:57  dok

	* ChangeLog, src/core/core.c, src/core/fbdev/fbdev.c,
	src/core/fbdev/fbdev.h, src/core/fbdev/vt.c,
	src/core/fusion/shmalloc.h, src/core/fusion/shmalloc/shmalloc.c:
	Added RPC mechanism to let fbdev ioctls be executed by the master
	only.  DirectFB now only detaches from its tty if it's a real VT
	and only if vt switching is enabled. This looks like a clean and
	working solution.
	
	The only limitation left is that the master must not call DirectFB
	functions that do fbdev ioctls within a thread that was created by
	the application, but only if the application created any thread
	before DirectFB got initialized. And of course this only applies to
	master processes started from a real VT.
	
	Added fusion_is_shared(void*) which returns true if the pointer
	specified points to shared memory.

2002-11-29 13:40  dok

	* patches/: Makefile.am,
	vmwarefb-0.6.0-linux-2.4.19-pre8.patch.bz2,
	vmwarefb-0.6.0-linux-2.4.20.patch.bz2: Updated vmwarefb patch.

2002-11-29 13:23  dok

	* src/core/layers.c: Clear a layer (dfb_windowstack_repaint_all)
	after enabling it.

2002-11-27 20:48  dok

	* src/core/fbdev/vt.c: Added setsid() call, to slave init.

2002-11-27 18:20  dok

	* tools/dfbdump.c: Added output of stacking class.  Window order is
	now the real one.

2002-11-27 18:19  dok

	* src/core/windows.c: Fixed three bugs related to stacking class.

2002-11-27 02:42  dok

	* src/: directfb.c, core/core.c, core/thread.c: Moved
	dfb_system_lookup() call to dfb_core_init(), fixes fusion_bench
	segfault.  Wait for a thread's initialization to be completed after
	creating it.

2002-11-27 01:12  dok

	* src/core/: core.c, system.c, system.h, fbdev/fbdev.c, fbdev/vt.c:
	Detach slaves from their terminal, too. Disabling console
	acceleration (which resulted in a kernel side card programming) in
	slaves is not necessary anymore. Also fbdev ioctls are ensured to
	act directly on the global state instead of the tty bound one. Not
	all threads get detached yet, if the application created a thread
	before initializing DirectFB.

2002-11-26 23:49  dok

	* src/core/fonts.c: Modified the glyph surface width calculation to
	use 8192/font->height.

2002-11-25 16:23  dok

	* src/interface.c: Made dynamic code safe for binaries with
	statically linked in interfaces.

2002-11-22 22:36  dok

	* TODO, src/core/input.c, src/core/input.h, src/core/windows.c,
	src/core/windows.h: Input device listeners installed by the
	windowstack construction code are global reactions now. Additional
	layers can now be used in windowed mode even after the process that
	enabled the layer exits.  Remaining TODO is to auto-disable layers
	via reference counting.

2002-11-22 22:22  dok

	* src/core/fusion/reactor.c: Fixed warning.

2002-11-22 22:18  dok

	* TODO, src/core/input.c, src/core/layers.c, src/core/layers.h,
	src/core/palette.c, src/core/palette.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c, src/core/fbdev/fbdev.c,
	src/core/fusion/object.c, src/core/fusion/object.h,
	src/core/fusion/reactor.c, src/core/fusion/reactor.h,
	src/core/fusion/shmalloc/shmalloc.c, tools/fusion_bench.c:
	Implemented the ability to attach "global reactions" to a reactor. 
	A global reaction will always be called directly by
	reactor_dispatch().  Global reactions can be attached/detached by
	any process. Global reactions don't die if the process that
	attached it exits.  Made layer_surface_listener,
	layer_bgsurface_listener and surface_palette_listener global
	reactions.
	
	Removed layer palette workaround removal TODO.

2002-11-22 19:13  dok

	* TODO: Minor updates.

2002-11-22 12:26  neo

	* tools/: README, dfbg.c: Use DFBBoolean instead of defining true
	and false. Updated tools README.

2002-11-21 22:23  dok

	* src/core/fbdev/fbdev.c: Minor fix by Antonino.

2002-11-21 20:06  dok

	* src/core/fbdev/: fbdev.c, fbdev.h: Color adjustment support on
	primary layer (via gamma ramp in direct color mode) by Antonino
	Daplas <adaplas@pol.net>.

2002-11-21 19:21  dok

	* src/core/fonts.c: Check for reactions != NULL, fixes default
	font.

2002-11-21 16:50  neo

	* include/directfb.h, src/display/idirectfbsurface.c: Allow to
	unset a surface's font by calling SetFont() with a NULL.

2002-11-20 21:31  dok

	* tools/dfbdump.c: Dump windows of all layers.

2002-11-20 18:40  dok

	* src/core/fbdev/fbdev.c: Support direct color visual, thanks to
	Antonino Daplas <adaplas@pol.net>.

2002-11-20 18:38  dok

	* directfb-config.in: Forgot "-Wl,-udirectfb_fbdev".

2002-11-19 19:03  dok

	* src/core/: layers.c, windows.c: Some focus behaviour fixes,
	especially for non-cursor mode.  Link layer surface to layer while
	layer is enabled.

2002-11-19 17:41  dok

	* src/core/windows.c: Default background mode of new layers is
	DLBM_COLOR (0, 0, 0, 0) now.

2002-11-18 22:59  dok

	* include/directfb.h, src/windows/idirectfbwindow.c: Allow passing
	NULL to unbind a shape and release its surface.

2002-11-18 22:46  dok

	* include/directfb.h, src/windows/idirectfbwindow.c: Added
	IDirectFBWindow::SetCursorShape(), untested.

2002-11-18 21:54  dok

	* directfb-config.in: Added options "--input=foo,bar",
	"--graphics=foo,bar" etc. that will output all required flags for
	statically linking the specified drivers or modules.

2002-11-18 19:42  dok

	* gfxdrivers/matrox/matrox_crtc2.c, include/directfb.h,
	src/core/layers.c, src/core/layers.h, src/core/windows.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface_layer.c:
	IDirectFBDisplayLayer::WaitForSync() added by Ville Syrjala.

2002-11-14 23:36  dok

	* configure.in, include/directfb.h, src/core/fusion/reactor.c,
	src/windows/idirectfbwindow.c: Added
	IDirectFBWindow::SetColorKeyIndex().  Made
	IDirectFBWindow::SetColorKey() lookup the index if the format is
	indexed.  Fixed warnings.
	
	Bumped version number to 0.9.16.

2002-11-14 23:06  dok

	* tools/fusion_bench.c: No need to do DirectFBCreate(), just
	DirectFBInit() and fusion_init() ;)

2002-11-14 23:05  dok

	* src/misc/mem.c: Made memory allocation messages a HEAVYDEBUGMSG.

2002-11-14 20:56  dok

	* patches/: Makefile.am, matroxfb-32mb.diff.bz2: Patch for using
	the whole 32MB of Matrox G400 etc.

2002-11-14 19:56  dok

	* src/misc/colorhash.c: Divide squared alpha diff by 16 to have it
	less weighted in color decision.

2002-11-14 16:34  neo

	* src/misc/colorhash.c: a more reasonable algorithm to find a good
	color match

2002-11-14 04:55  dok

	* src/idirectfb.c: Don't do cursor magic if app is not running
	windowed.

2002-11-14 04:48  dok

	* src/idirectfb.c: Don't disable cursor on escape.

2002-11-14 04:27  dok

	* src/idirectfb.c: Pressing a button or a key while a windowed
	primary is focused disables the cursor to achieve a vmware-like
	grabbing for fullscreen apps running windowed that need raw mouse
	events (e.g. df_knuckles).  The cursor is released (shown) if Meta
	is pressed.

2002-11-14 02:25  dok

	* fb.modes: Added 640x400 mode.

2002-11-14 02:19  dok

	* src/core/gfxcard.c: Minor speed improvement.

2002-11-14 01:56  dok

	* fb.modes: Added 320x200 mode, fixed 320x240 mode.

2002-11-14 01:28  dok

	* src/core/gfxcard.c: Pre render glyphs before rendering string to
	avoid a rare deadlock.

2002-11-14 00:38  dok

	* src/core/surfacemanager.c, src/core/surfacemanager.h,
	tools/.cvsignore, tools/Makefile.am, tools/dfbsummon.c: Added
	dfbsummon, a surface manager debugging monitor.

2002-11-13 22:22  dok

	* TODO: Added some layer palette/surface related TODOs.

2002-11-13 22:13  dok

	* BUGS, src/core/layers.c, src/core/state.c, src/core/surfaces.c,
	src/core/surfaces.h: Fixed layer palette updates in multi app core
	(a bit workaroundish).

2002-11-13 20:17  dok

	* src/gfx/generic/generic.c: Commented out last change.

2002-11-13 17:59  dok

	* src/gfx/generic/generic.c: Correctly blit from LUT8 to LUT8 even
	if source and destination palette are different.

2002-11-13 02:26  dok

	* .cvsignore: Added *.diff.

2002-11-13 01:21  dok

	* ChangeLog: regenerated

2002-11-13 00:59  dok

	* README, patches/Makefile.am, patches/README.fusion,
	patches/fusion-full-linux-2.4.20-rc1.patch.bz2: Added Fusion patch
	again, we don't need an extra tar ball for it.

2002-11-13 00:26  dok

	* tools/: Makefile.am, README, ipc_cleanup: Good bye, ipc_cleanup,
	you've been a nice friend, but your time is over...

2002-11-13 00:23  dok

	* ChangeLog, NEWS: Updated for 0.9.15.

2002-11-12 23:56  dok

	* README: Moved description of Linux Fusion prior to how to build
	with multi app, because users maybe don't read further before doing
	that.

2002-11-12 23:46  dok

	* gfxdrivers/matrox/matrox_crtc2.c: Vsync fix from Ville Syrjala.

2002-11-12 23:19  dok

	* src/core/fusion/: lock.c, property.c, reactor.c, ref.c: Improved
	ioctl error handling (EINTR, EINVAL etc.).

2002-11-12 22:19  dok

	* src/core/fusion/: arena.c, fusion.c: Some bug fixes.

2002-11-12 21:48  dok

	* src/: core/core.c, core/gfxcard.c, core/input.c, core/layers.c,
	core/fbdev/fbdev.c, core/fusion/Makefile.am, core/fusion/arena.c,
	core/fusion/arena.h, core/fusion/fusion.c,
	core/fusion/fusion_internal.h, core/fusion/lock.c,
	core/fusion/reactor.c, core/fusion/util.c,
	core/fusion/shmalloc/shmalloc.c,
	core/fusion/shmalloc/shmalloc_internal.h, misc/colorhash.c: Rewrote
	FusionArena code using shmalloc and linked lists.
	
	No remaining bit of SysV IPC! There isn't even any SysV IPC header
	included.

2002-11-12 20:17  dok

	* tools/dfbg.c: Fixed DLBM_TILE : DLBM_IMAGE order.

2002-11-12 19:50  dok

	* src/core/layers.c: Check layer->shared->stack before repainting.

2002-11-12 16:11  neo

	* docs/dfbg.1.in, docs/directfb-csource.1.in, tools/dfbg.c: Added
	--color option to dfbg.

2002-11-12 15:22  neo

	* configure.in, docs/.cvsignore, docs/Makefile.am, docs/dfbg.1.in:
	Added a man-page for dfbg.

2002-11-12 15:08  neo

	* tools/dfbg.c: Added --tile command-line option to dfbg.

2002-11-12 03:42  dok

	* tools/: .cvsignore, Makefile.am, dfbg.c, ipc_cleanup: Added
	background configuration tool.
	
	Updated ipc_cleanup.

2002-11-11 18:33  dok

	* gfxdrivers/matrox/matrox_crtc2.c,
	patches/matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2,
	src/core/fbdev/fbdev.c: Updated vsync irq patch from Ville Syrjala.

2002-11-11 16:32  neo

	* src/misc/conf.c: check prog != NULL before calling strlen() on it

2002-11-11 16:01  dok

	* src/gfx/util.c: Made dfb_back_to_front_copy() thread safe as
	skirmish is now a recursive lock.

2002-11-11 16:00  neo

	* README, docs/directfbrc.5.in: Fixed some spelling errors and
	documented the new behaviour of 'no-hardware'.

2002-11-11 06:33  dok

	* src/core/windows.c: Use hardware key code for auto grabbing
	pressed keys (using the symbol was buggy because of modifiers being
	changed while a key is pressed).

2002-11-11 06:16  dok

	* src/core/fbdev/fbdev.c: Check return value of iopl() instead of
	segfaulting.

2002-11-11 04:58  dok

	* README, TODO, configure.in, src/core/coredefs.h,
	src/core/windows.c, src/core/fusion/arena.c,
	src/core/fusion/fusion.c, src/core/fusion/fusion_internal.h,
	src/core/fusion/lock.c, src/core/fusion/property.c,
	src/core/fusion/reactor.c, src/core/fusion/reactor.h,
	src/core/fusion/ref.c, src/misc/util.c, src/misc/util.h,
	tools/fusion_bench.c: Rewrote multi app reactor code, *much*
	simpler and cleaner now.  Improved performance and stability. No
	message queues anymore.
	
	Old version via message queue:
	
	reactor attach/detach		      ->     8.03 k/sec reactor
	attach/detach (2nd)	      ->   323.21 k/sec reactor dispatch   
			  ->   333.33 k/sec  (100% arrived)
	
	New version via Fusion Kernel Device:
	
	reactor attach/detach		      ->   375.09 k/sec reactor
	attach/detach (2nd)	      ->   403.88 k/sec reactor dispatch   
			  ->   754.15 k/sec  (100% arrived)
	
	Now the master is the only DirectFB application with more than one
	additional thread.
	
	Only one single SysV IPC resource is left (shm segment of arena). 
	Everything else is already handled by the Fusion Kernel Device.
	
	Support for multi app without kernel device is dropped.

2002-11-10 20:40  dok

	* src/core/thread.c: Don't block signals in DirectFB threads of
	slaves.

2002-11-09 02:20  dok

	* BUGS: df_dok related bugs are fixed.

2002-11-09 02:18  dok

	* src/core/fonts.c: 32 was the old value, not 16.

2002-11-09 00:15  dok

	* tools/dfb_static_build_example: If multiple arguments are passed,
	use the first one for output and others for input.

2002-11-08 23:57  dok

	* src/core/: fonts.c, fonts.h: Attach listener to glyph surfaces to
	have at least one listener attached.  Set glyph surface size back
	to the old value (maxadvance * 32).

2002-11-08 22:33  dok

	* src/misc/gfx_util.c: Fixed off-by-one bug in image loading code
	(multiplication by alpha).  Fixes broken color keyed blits in
	df_dok.

2002-11-08 22:09  dok

	* src/idirectfb.c: Fullscreen applications not calling
	SetVideoMode() and not setting the format in the surface
	description of the primary take care of the "pixelformat=" option.

2002-11-08 21:16  dok

	* src/idirectfb.c: Fullscreen applications that are started with
	the "mode=" option and don't call SetVideoMode() now switch to the
	mode specified with the option.

2002-11-08 19:20  dok

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Fixed
	FT2ImplKerningData struct. After adding "fixed_advance" to
	FT2ImplData FT2ImplKerningData didn't match FT2ImplData anymore.
	Now it's really derived from FT2ImplData.

2002-11-08 18:41  dok

	* src/: core/gfxcard.c, misc/conf.c: Implemented additional config
	file loading for each application.
	
	E.g. running "df_dok" or "/foo/bar/df_dok" will look for config
	files "/etc/directfbrc.df_dok" and "~/.directfbrc.df_dok".
	
	'no-hardware' now only disables acceleration, but driver is loaded
	and additional layers are used.

2002-11-08 00:41  dok

	* interfaces/IDirectFBFont/idirectfbfont_default.c: Check for desc
	!= NULL.

2002-11-07 23:17  dok

	* src/core/system.c: Check for NULL.

2002-11-07 23:00  dok

	* src/core/: core_system.h, system.c, system.h, thread.c,
	fbdev/fbdev.c, sdl/sdl.c: Added system hook ThreadInit() that is
	called at the beginning of new threads.  The fbdev system detaches
	the thread from the controlling tty.  Otherwise mode restoring done
	by input threads (if layer is orphaned) goes to the tty the app has
	been started from. The main thread has been detached eversince.

2002-11-07 22:40  dok

	* src/core/layers.c: Fix deadlock during lease of orphaned layer.

2002-11-07 13:38  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Adapted to changes
	in FreeType-2.1.3 to get optimal monochrome rendering.

2002-11-05 23:57  dok

	* src/: idirectfb.c, display/idirectfbsurface_window.c: Show window
	of windowed fullscreen apps on first Flip.

2002-11-05 23:49  dok

	* src/core/state.c: Commented out state locking in listeners to
	avoid a deadlock between state/reactor lock (locked in different
	order by two threads).

2002-11-05 18:10  dok

	* src/core/fusion/reactor.c: Interpret EINVAL like EIDRM in
	receiver.

2002-11-05 15:48  dok

	* src/core/: gfxcard.c, fusion/Makefile.am, fusion/lock.c,
	fusion/lock.h: Made skirmish recursive mutex in single app core.
	Multi app skirmish has to be made recursive, too.

2002-11-04 20:19  neo

	* src/core/windows.c: check if the window has a surface before
	trying to access its palette

2002-11-04 20:04  dok

	* src/core/fusion/fusion.c: devfs support

2002-11-04 18:40  dok

	* src/core/state.c: Added state locking to
	dfb_state_set_source/destination() and the installed listeners.
	References to the surfaces are now increased/decreased.  More
	stable now, but had to use Unix98 recursive mutex.

2002-11-04 17:42  dok

	* src/core/fusion/property.c, src/core/fusion/property.h,
	tools/fusion_bench.c: Use new in-kernel fusion property.

2002-11-02 06:20  dok

	* src/display/idirectfbsurface.c: dfb_surface_attach() was called
	too early.

2002-11-02 02:44  dok

	* src/core/fusion/: lock.c, lock.h: Use Fusion Kernel Device.

2002-11-02 00:06  dok

	* configure.in, include/directfb.h, include/directfb_keyboard.h,
	src/idirectfb.c, src/core/layers.c, src/core/windows.c,
	src/core/windows.h: Added DFBBoolean.
	
	DFBWindowEvent fields cx, cy, buttons, locks and modifiers are
	always set now (except for DWET_DESTROYED).
	
	API change ----------
	
	IDirectFB::CreateEventBuffer() no longer attaches input devices and
	doesn't take input capabilities.
	
	IDirectFB::CreateInputEventBuffer() implements the old behaviour
	with an additional argument "global". If global is DFB_FALSE events
	will only be delivered if this instance of IDirectFB has a focused
	primary (either running fullscreen or running in windowed mode with
	the window being focused).
	
	Version is 0.9.15 now.

2002-11-01 23:37  neo

	* TODO, src/core/layers.c, src/core/windows.c: Don't write out of
	bounds if the default cursor is loaded into a non-ARGB surface
	(--dfb:no-translucent-windows).
	
	Switch the display layer palette to the one of the focused window.
	Added TODO item since this needs more changes.

2002-11-01 22:38  neo

	* src/core/surfaces.c: notify listeners about a palette change in
	dfb_surface_set_palette()

2002-11-01 22:37  neo

	* src/core/palette.c: Use the size of the palette in
	dfb_palette_generate_rgb332_map() instead of assuming 256 entries.

2002-11-01 18:26  dok

	* src/core/: layers.c, windows.c, windows.h: Implemented implicit
	grabbing of keys when they are pressed.  Subsequent events of this
	key are sent to the owner.  Releasing a key ungrabs it. If a window
	is closed while grabbing a key, the window gets a pseudo release
	event. If fullscreen mode is entered all keys are flushed
	(ungrabbed sending release events).

2002-11-01 14:38  dok

	* tools/fusion_bench.c: Added threaded skirmish benchmark.

2002-10-30 20:45  dok

	* tools/fusion_bench.c: Number of reactor_dispatch() calls depends
	on single/multi app config.

2002-10-30 20:40  dok

	* tools/fusion_bench.c: oops

2002-10-30 20:39  dok

	* tools/fusion_bench.c: Added reactor_dispatch() benchmark.

2002-10-30 20:17  dok

	* tools/fusion_bench.c: Added reactor attach/detach benchmark.

2002-10-30 19:12  dok

	* src/core/fusion/ref.c: Forgot initialisation of waiting counter.

2002-10-30 18:57  dok

	* src/core/fusion/: ref.c, ref.h: Only call
	pthread_cond_broadcast() if someone is waiting.

2002-10-30 18:52  dok

	* src/core/fusion/ref.c: Added missing pthread_cond_init.

2002-10-30 18:38  dok

	* tools/: .cvsignore, Makefile.am, fusion_bench.c: Added Fusion
	benchmark application.

2002-10-30 15:25  dok

	* src/directfb.c: Use stderr for the banner, like all other
	messages.

2002-10-29 19:39  dok

	* src/core/fusion/ref.c: Don't interpret negative ref count as a
	negative errno until ref counter bug is fixed.

2002-10-29 16:10  dok

	* ChangeLog: last commit before 0.9.14 release

2002-10-29 15:54  neo

	* tools/README: added a note about dfbdump

2002-10-29 15:41  dok

	* ChangeLog, NEWS: updated

2002-10-29 15:40  dok

	* patches/: Makefile.am, README.fusion,
	fusion-all-linux-2.4.20-pre11.patch.bz2: Has an extra CVS module
	now.

2002-10-29 14:57  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c: Added support
	for DFDESC_FIXEDADVANCE.

2002-10-29 14:42  dok

	* include/directfb.h, interfaces/IDirectFBFont/idirectfbfont_ft2.c:
	Added DFDESC_FIXEDADVANCE as a workaround for using proportional
	fonts fixed.
	
	Added DFFA_NONE.

2002-10-28 20:50  neo

	* src/core/: fonts.c, gfxcard.c: Assure that glyphs with an empty
	bitmap are inserted into the glyph cache with zero width and
	height. Simplifies some checks performed when rendering.

2002-10-28 20:28  dok

	* src/core/fonts.c: Use larger glyph surfaces to reduce expensive
	switching (caused by reactor attach/detach).

2002-10-28 20:22  dok

	* src/core/: thread.c, thread.h, fusion/reactor.c: Use CoreThread
	with new type CTT_MESSAGING.

2002-10-28 20:19  neo

	* src/display/idirectfbsurface.c: indentation

2002-10-28 19:58  dok

	* src/core/gfxcard.c: Check x too in simple pre clipping of
	dfb_gfxcard_drawstring().

2002-10-28 19:27  neo

	* README: Added a description of the builtin "window manager".

2002-10-28 19:23  dok

	* configure.in: DFB_CFLAGS are behind CFLAGS again. Otherwise "-g
	-O2" may override the debugging/optimization options of DirectFB's
	configure script.

2002-10-28 18:43  dok

	* NEWS: Multi app related.

2002-10-28 18:36  dok

	* gfxdrivers/matrox/matrox_spic.c: SetOpacity() for sub picture
	layer fix by Ville Syrjala <syrjala@sci.fi>.

2002-10-28 18:22  andi

	* README: - added OpenBSD to the list of supported operating
	systems

2002-10-28 18:19  dok

	* README: The linux-fusion module doesn't only give performance,
	but also more stability.

2002-10-28 17:01  dok

	* src/core/fusion/object.c: Fixed fusion_object_destroy() for calls
	outside the object destructor.

2002-10-28 16:24  neo

	* src/core/sdl/Makefile.am: Added sdl.h to SOURCES.

2002-10-28 16:12  neo

	* src/misc/cpu_accel.c: added more ifdefs around MMX and SSE code

2002-10-28 14:31  neo

	* ChangeLog, NEWS: Updates.

2002-10-28 14:20  neo

	* configure.in, src/misc/memcpy.c: Check if binutils support SSE
	assembly and compile the SSE code conditionally.

2002-10-28 13:39  neo

	* configure.in: oops

2002-10-28 13:35  neo

	* configure.in, src/core/sdl/Makefile.am: Simplified the configure
	tests for MMX, fbdev and sdl.  Set SDL_CFLAGS and SDL_LIBS using
	$SDL_CONFIG so that people can specify which sdl-config to use. 
	Use SDL_CFLAGS and SDL_LIBS in the Makefile.

2002-10-28 13:07  neo

	* NEWS, README, README.screenshots, configure.in, directfb.pc.in,
	directfb.spec.in: Corrected spelling of frame buffer.

2002-10-28 12:56  neo

	* configure.in: moved some lines around

2002-10-28 12:32  neo

	* src/misc/memcpy.c: Don't build MMX code if MMX was disabled by
	configure.

2002-10-28 12:13  neo

	* src/misc/memcpy.c: Reformatted some comments; no changes.

2002-10-28 12:03  neo

	* docs/directfbrc.5.in, src/misc/conf.c: Document the new
	pixelformat parameter in directfbrc.

2002-10-28 11:37  neo

	* src/core/fbdev/fbdev.c: Fixed obvious typo which caused
	--dfb:depth to fail.

2002-10-27 19:17  neo

	* directfb.spec.in: Improvements to the spec file by Till Adam.

2002-10-27 17:56  neo

	* Makefile.am: Include the generated spec file in the tarball as
	well to make it possible to build RPMs directly from the tarball.

2002-10-27 14:19  neo

	* inputdrivers/ps2mouse/ps2mouse.c: code cleanup, no changes

2002-10-27 14:01  neo

	* README: Explain how to use the multi-application core.

2002-10-27 12:18  neo

	* configure.in: Removed cflags_set hack from configure.in. We don't
	need it any longer since we don't touch CFLAGS.

2002-10-27 12:12  neo

	* autogen.sh, configure.in, gfxdrivers/ati128/Makefile.am,
	gfxdrivers/cyber5k/Makefile.am, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/neomagic/Makefile.am, gfxdrivers/nvidia/Makefile.am,
	gfxdrivers/savage/Makefile.am, gfxdrivers/tdfx/Makefile.am,
	inputdrivers/dbox2remote/Makefile.am,
	inputdrivers/h3600_ts/Makefile.am,
	inputdrivers/joystick/Makefile.am,
	inputdrivers/keyboard/Makefile.am,
	inputdrivers/linux_input/Makefile.am,
	inputdrivers/lirc/Makefile.am, inputdrivers/ps2mouse/Makefile.am,
	inputdrivers/serialmouse/Makefile.am,
	inputdrivers/sonypi/Makefile.am,
	inputdrivers/ucb1x00_ts/Makefile.am,
	interfaces/IDirectFBFont/Makefile.am,
	interfaces/IDirectFBImageProvider/Makefile.am,
	interfaces/IDirectFBImageProvider/mpeg2/Makefile.am,
	interfaces/IDirectFBVideoProvider/Makefile.am, src/Makefile.am,
	src/core/Makefile.am, src/core/fbdev/Makefile.am,
	src/core/fusion/Makefile.am, src/core/fusion/shmalloc/Makefile.am,
	src/core/sdl/Makefile.am, src/display/Makefile.am,
	src/gfx/Makefile.am, src/gfx/generic/Makefile.am,
	src/input/Makefile.am, src/media/Makefile.am, src/misc/Makefile.am,
	src/windows/Makefile.am, tools/Makefile.am: Applied patches from
	Andreas Oberritter <obi@tuxbox.org>:
	
	Call libtoolize from autogen.sh since newer automake versions don't
	do this for us anymore.  Use AM_CFLAGS instead of CFLAGS, which is
	a user variable.  Check for C++ compiler in configure.

2002-10-27 11:58  neo

	* .cvsignore, Makefile.am, configure.in, directfb.spec.in: Added
	directfb.spec.in based on a spec file provided by Till Adam
	<till@adam-lilienthal.de>.

2002-10-26 21:21  andi

	* src/interface.c: - dont use RTLD_GLOBAL if it is undefined
	(compilation fix for OpenBSD)

2002-10-26 21:15  andi

	* src/core/core.c: - dont use RTLD_GLOBAL if it is undefined
	(compilation fix for OpenBSD)

2002-10-26 21:10  andi

	* README, configure.in: - fixed typo, mention OpenBSD - initial
	OpenBSD support (incomplete)

2002-10-26 20:20  neo

	* README: reformatted

2002-10-26 18:01  andi

	* README: - added section on supported operating systems

2002-10-26 14:58  andi

	* src/misc/util.c: - NetBSD compile fix: only use ENOTSUP if it is
	defined (missing in NetBSD)

2002-10-26 14:53  andi

	* configure.in: - added support for NetBSD (tested on NetBSD-1.6)

2002-10-25 19:14  dok

	* BUGS, src/idirectfb.c: The option "pixelformat=" does work with
	windowed fullscreen apps, too.	If ARGB is specified, the window
	will be alpha blended.

2002-10-25 18:30  dok

	* src/idirectfb.c: Windowed fullscreen apps can now be given a
	window size via the mode= option.

2002-10-25 16:51  dok

	* configure.in, gfxdrivers/Makefile.am,
	gfxdrivers/cyber5k/.cvsignore, gfxdrivers/cyber5k/Makefile.am,
	gfxdrivers/cyber5k/cyber5k.c, gfxdrivers/cyber5k/cyber5k.h,
	gfxdrivers/cyber5k/cyber5k_alpha.c,
	gfxdrivers/cyber5k/cyber5k_alpha.h,
	gfxdrivers/cyber5k/cyber5k_overlay.c,
	gfxdrivers/cyber5k/cyber5k_overlay.h,
	gfxdrivers/cyber5k/cyber5k_underlay.c, gfxdrivers/cyber5k/mmio.h,
	gfxdrivers/cyber5k/regs.h: Whuuuhuuu, Cyber Pro DirectFB driver
	release in 0.9.14 ;)

2002-10-25 16:25  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	Moved all static variables into instance struct to make GIF loader
	thread safe.

2002-10-25 15:52  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	Fixed evil bug: wrong parameter order to qsort resulted in unsorted
	color map in FindColorKey. Fixes color keying of a very few GIFs.

2002-10-25 15:12  dok

	* inputdrivers/linux_input/linux_input.c: Applied patch from
	Johannes Stezenbach <js@convergence.de> fixing some keys.

2002-10-24 13:32  neo

	* README: improved README

2002-10-23 18:59  neo

	* README: updates

2002-10-23 18:00  dok

	* src/core/: thread.c, thread.h, fusion/object.c: Use thread
	functions for bone collector loop.  Added thread type CTT_CLEANUP
	with priority -15.

2002-10-23 17:59  dok

	* patches/matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2: Update from
	Ville, return -EFAULT if argument is not a valid pointer.

2002-10-23 17:58  dok

	* gfxdrivers/matrox/matrox_bes.c: YUV 4:2:0 chroma plane setup fix
	from Ville Syrjala <syrjala@sci.fi>.

2002-10-23 17:23  dok

	* src/core/fusion/shmalloc/shmalloc.c: Use 0x20000000 instead of
	0x70000000 as the shared memory base address to avoid collision
	with stack on MIPS.

2002-10-23 16:56  neo

	* ChangeLog, src/idirectfb.c: Reverted my changes regarding the
	primary surface for NORMAL mode.  The old behaviour made more sense
	actually.

2002-10-23 15:12  dok

	* src/core/windows.c: Changed WM keys a bit: A (abandon)  - lower
	focused window to bottom S (show)     - raise focused window to top
	X (eXchange) - cycle through windows (not having DWOP_KEEP_STACKING
	set).

2002-10-23 14:49  dok

	* src/: core/fusion/reactor.c, misc/conf.c: Don't try to destroy
	dead reference.  Default to graphics-vt only if vt-switch is
	disabled.

2002-10-23 14:14  neo

	* configure.in, directfb-config.in, directfb.pc.in: Defined
	THREADFLAGS=-D_REENTRANT and added it to the cflags given by
	pkg-config and directfb-config.

2002-10-23 13:10  neo

	* configure.in: some cleanup

2002-10-23 12:55  neo

	* configure.in: beautified configure output

2002-10-23 12:02  neo

	* src/idirectfb.c: Creating a primary surface in normal mode will
	now result in a fullscreen window with options set to
	KEEP_POSITION, KEEP_SIZE and INDESTRUCTIBLE which is probably what
	people expect.

2002-10-23 11:50  neo

	* src/idirectfb.c: Initialize the primary width, height and bpp
	from the primary layer instead of using some arbitrary values.
	Ignore width and height from the surface description when creating
	a primary surface in NORMAL mode since we do that for the other
	modes as well.

2002-10-22 23:56  dok

	* src/core/: windows.c, windows.h: Windows can now be cycled via
	WM-S (to front, focus).  Pressing WM-X puts the focused window to
	the back.

2002-10-22 22:33  dok

	* tools/dfbdump.c: Null pad opacity.

2002-10-22 22:29  dok

	* docs/directfbrc.5.in, inputdrivers/keyboard/keyboard.c,
	src/misc/conf.c, src/misc/conf.h: Added "[no]capslock-meta"
	enabling mapping of CapsLock to Meta on keymap level.

2002-10-22 21:54  dok

	* src/core/windows.c: Ensure a focused window in
	dfb_window_set_opacity() only if window disappeared.

2002-10-22 21:48  dok

	* src/core/: input.c, fusion/lock.c: Use base level symbol if shift
	level symbol is null.  Fixed debug message new lines.

2002-10-22 19:36  dok

	* src/core/fbdev/fbdev.c: Add "0" argument to vsync ioctl.

2002-10-22 19:31  dok

	* src/core/layers.c: Don't detach bg image listener manually, keep
	the reaction in local memory.

2002-10-22 18:34  dok

	* src/: directfb.c, core/fusion/reactor.c: Fixed crash when a
	foreign reaction is removed.  Foreign reactions are now disabled
	during detach, but removed during the foreigners reaction loop. 
	Relase background image surface after setting it.

2002-10-22 18:08  dok

	* src/core/coredefs.h: Accidently committed signal change in
	DFB_ASSERT.

2002-10-22 18:07  neo

	* NEWS: some updated to the NEWS file

2002-10-22 18:00  dok

	* src/core/fbdev/vt.c: Reverted change that seems to break mode
	switching if started via suid root from console.

2002-10-22 17:56  dok

	* src/gfx/convert.c: Use LUT8 if depth is 8 (e.g. default mode or
	SetVideoMode()).

2002-10-22 17:34  dok

	* patches/: Makefile.am,
	matroxfb-vsync-c2vline-irq-patch-2.4.19.bz2,
	matroxfb-vsync-irq-patch-2.4.19.bz2: New vsync irq patch from Ville
	Syrjala <syrjala@sci.fi> with support for the second head.

2002-10-22 17:21  andi

	* configure.in: enable RGB332 support by default.

2002-10-22 17:12  neo

	* src/misc/conf.c: minor code cleanup

2002-10-22 17:08  andi

	* src/core/modules.h: declare ModuleDirectory as extern to fix
	linking problems on darwin

2002-10-22 16:37  neo

	* docs/directfbrc.5.in, src/misc/conf.c: Fixed --dfb-help output. 
	Documented the directfbrc parameter matrox-tv-standard.

2002-10-22 16:22  andi

	* configure.in: - fixes for automake 1.6x on non-linux platforms

2002-10-21 21:37  dok

	* inputdrivers/ps2mouse/ps2mouse.c, src/core/fbdev/vt.c,
	src/core/fusion/fusion.c, src/misc/conf.c: Use graphics-vt by
	default.  Use no-vt-switch by default if started without root
	privileges.  Open mouse device O_EXCL.	DirectFB now works while
	gpm is still running.

2002-10-21 20:31  dok

	* src/core/fusion/fusion.c: Fixed crash in debug mode after
	shutdown.

2002-10-21 17:57  dok

	* src/: core/coredefs.h, core/fusion/fusion.c,
	core/fusion/fusion_internal.h, input/idirectfbinputbuffer.c,
	windows/idirectfbwindow.c: Fixed memory corruption caused by a too
	early free.  Really use fusion_get_millis() now for debug output.

2002-10-20 15:11  andi

	* Makefile.am, configure.in, src/core/Makefile.am: - applied patch
	by Till Adam <till@adam-lilienthal.de> which fixes build   on MDK9.
	
	(This also fixes problems with autoconf-2.53 and 2.54)

2002-10-18 21:27  dok

	* src/: core/windows.c, core/fusion/reactor.c,
	display/idirectfbsurface_window.c: Fixed segfault in
	IDirectFBSurface_Window_Flip() if window is destroyed before its
	surface.  Removed unnecessary fusion_ref_zero_lock() in
	reactor_free().

2002-10-18 19:34  dok

	* src/idirectfb.c: For a windowed primary surface, accept setting
	of width and height in the surface description as a second way to
	set the size (first is SetVideoMode).

2002-10-18 17:49  dok

	* src/: core/coredefs.h, core/windows.c, core/fusion/fusion.c,
	core/fusion/fusion.h, core/fusion/reactor.c, core/fusion/reactor.h,
	display/idirectfbsurface.c, windows/idirectfbwindow.c: Assertion
	message shows pid and milli seconds now.
	
	Added more safety and debug output to window destruction code.
	
	Added fusion_get_millis(), debug messages of all fusionees have a
	synchronized milli second counter now.
	
	Added some safety and assertions to reactor code.

2002-10-17 10:55  neo

	* include/directfb.h, src/core/layers.c, src/core/windows.c,
	src/core/windows.h: Set the button mask in DWET_MOTION events.

2002-10-16 14:48  dok

	* patches/: Makefile.am, README.fusion: Added quick guide.

2002-10-16 14:43  dok

	* configure.in, patches/fusion-all-linux-2.4.20-pre11.patch.bz2,
	src/core/fusion/fusion.c, src/core/fusion/fusion_internal.h,
	src/core/fusion/object.c, src/core/fusion/ref.c,
	src/core/fusion/ref.h: Added experimental kernel device for a much
	better implementation of the fusion concepts. For now FusionRef is
	implemented in kernel space.  The old implementation using
	semaphores doesn't work properly because undo counters are hold per
	process id. But the reference should be valid for all threads
	(processes with the same fusion id).
	
	You have to apply the patch to test it, configure checks for
	linux/fusion.h and uses the old implementation if the header isn't
	found.
	
	The patch is here for quick testing. Will add a new cvs module with
	all new files directly checked in and a patch for the modified.
	
	The new implementation should be even faster as there is only one
	system call per fusion_ref_* user space library call.
	
	The undo stuff is working as supposed now (per fusion id), but
	fusion_ref_zero_lock() is not implemented in kernel space yet.

2002-10-16 13:43  dok

	* configure.in: No inlines if debug is enabled.

2002-10-15 23:05  dok

	* src/core/fusion/lock.c: Better error handling.

2002-10-15 21:42  andi

	* src/misc/conf.h: include missing signal.h, fixes compilation on
	freebsd 4.7

2002-10-15 20:30  dok

	* src/core/fusion/ref.c: Fixed blocking in fusion_ref_down() if
	reference counter is already zero.  Prints an error message and
	returns FUSION_BUG now.
	
	Improved debug and error output.

2002-10-15 18:55  dok

	* src/core/fusion/: ref.c, ref.h: Added magic value for debugging
	memory corruption related stuff.

2002-10-14 22:49  dok

	* interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.c: Decode first
	picture only.

2002-10-14 20:57  dok

	* interfaces/IDirectFBImageProvider/:
	idirectfbimageprovider_mpeg2.c, mpeg2/getbits.c, mpeg2/getblk.c,
	mpeg2/gethdr.c, mpeg2/getpic.c, mpeg2/getvlc.c, mpeg2/getvlc.h,
	mpeg2/global.h, mpeg2/idct.c, mpeg2/idctref.c, mpeg2/motion.c,
	mpeg2/mpeg2dec.c, mpeg2/mpeg2dec.h, mpeg2/recon.c, mpeg2/store.c,
	mpeg2/systems.c: Moved all global variables into instance struct. 
	Removed some more unneeded stuff, got MPEG2 code < 5000 lines of
	code.

2002-10-12 19:19  andi

	* inputdrivers/ucb1x00_ts/ucb1x00_ts.c: added filter for incoming
	events, much smoother now

2002-10-12 17:17  andi

	* configure.in, inputdrivers/Makefile.am,
	inputdrivers/ucb1x00_ts/.cvsignore,
	inputdrivers/ucb1x00_ts/Makefile.am,
	inputdrivers/ucb1x00_ts/ucb1x00_ts.c: added driver for ucb1x00
	based touchscreens (used in the "tuxscreen" device).
	
	TODO:	- do not hardcode touchscreen config (read from config
	file)	- filter incoming events, there is too much noise

2002-10-11 20:36  dok

	* interfaces/IDirectFBImageProvider/mpeg2/: getbits.c, getblk.c,
	gethdr.c, getpic.c, getvlc.c, global.h, idct.c, idctref.c,
	motion.c, mpeg2dec.c, recon.c, store.c, systems.c: Added prefix to
	all non-static methods.

2002-10-11 19:49  dok

	* interfaces/IDirectFBImageProvider/mpeg2/store.c: Fix crash due to
	static variables.

2002-10-11 18:02  dok

	* configure.in, interfaces/IDirectFBImageProvider/Makefile.am,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_mpeg2.c,
	interfaces/IDirectFBImageProvider/mpeg2/.cvsignore,
	interfaces/IDirectFBImageProvider/mpeg2/Makefile.am,
	interfaces/IDirectFBImageProvider/mpeg2/getbits.c,
	interfaces/IDirectFBImageProvider/mpeg2/getblk.c,
	interfaces/IDirectFBImageProvider/mpeg2/gethdr.c,
	interfaces/IDirectFBImageProvider/mpeg2/getpic.c,
	interfaces/IDirectFBImageProvider/mpeg2/getvlc.c,
	interfaces/IDirectFBImageProvider/mpeg2/getvlc.h,
	interfaces/IDirectFBImageProvider/mpeg2/global.h,
	interfaces/IDirectFBImageProvider/mpeg2/idct.c,
	interfaces/IDirectFBImageProvider/mpeg2/idctref.c,
	interfaces/IDirectFBImageProvider/mpeg2/motion.c,
	interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.c,
	interfaces/IDirectFBImageProvider/mpeg2/mpeg2dec.h,
	interfaces/IDirectFBImageProvider/mpeg2/recon.c,
	interfaces/IDirectFBImageProvider/mpeg2/store.c,
	interfaces/IDirectFBImageProvider/mpeg2/systems.c: Added MPEG2
	I-Frame image provider derived from mpeg2decode (mpeg.org).
	
	Need to move global variables into instance struct.

2002-10-11 18:00  dok

	* src/core/: input.c, fusion/reactor.c: Fixed keyboard handler for
	screen dump and sending SIGINT.  Fixed debug messages (newline).

2002-10-11 17:59  dok

	* src/core/windows.c: Added simple test if flipping (updating) a
	window is necessary.

2002-10-11 03:38  andi

	* inputdrivers/h3600_ts/h3600_ts.c: updated driver to compile again

2002-10-10 18:27  andi

	* src/core/fbdev/fbdev.c: if the video mode was tested/set
	successfully, check if there is enough video ram (this is for
	broken framebuffer drivers). maked DirectFB work of tuxscreen.

2002-10-10 18:01  dok

	* src/idirectfb.c: A '|' too much.

2002-10-10 18:00  dok

	* src/idirectfb.c: Fixed system back buffer fallback.

2002-10-10 15:40  dok

	* src/core/windows.c: Minor change in focus handling. Leaving a
	window unfocuses it.

2002-10-09 21:32  dok

	* src/core/windows.c: Return NULL in window_at_pointer() if cursor
	is disabled reulting in the top most window getting focus.

2002-10-09 20:28  neo

	* configure.in, tools/Makefile.am: Added -lm to the linker flags
	for libpng.  Don't install dfbdump.

2002-10-09 19:22  dok

	* src/windows/idirectfbwindow.c, tools/dfbdump.c: Fixed
	RequestFocus.  Added window opacity to dfbdump output.

2002-10-09 15:09  neo

	* src/core/palette.c: fixed typo in a comment

2002-10-08 21:38  dok

	* src/windows/idirectfbwindow.c: Invisible windows are not allowed
	to request the focus.

2002-10-08 19:38  dok

	* src/core/fusion/reactor.c: fixed bug message

2002-10-08 18:09  dok

	* src/core/fusion/ref.c: removed debug line

2002-10-08 18:02  dok

	* src/core/fusion/: arena.c, fusion_internal.h: Fixed joining, got
	broken an hour ago.  Added assertions.	Lock/unlock fix in arena
	code.

2002-10-08 17:02  dok

	* src/core/core.c: same for single app

2002-10-08 17:00  dok

	* src/core/: core.c, fusion/arena.c, fusion/arena.h, fusion/ref.c:
	Better error handling in init code.

2002-10-02 21:37  dok

	* TODO, src/idirectfb.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface_layer.c: Moved layer config stuff from
	IDirectFBDisplayLayer_Construct to IDirectFB.

2002-10-02 20:37  dok

	* TODO, src/directfb.c: Cleanup of DirectFBCreate.

2002-10-02 19:42  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/core/core.c, src/core/input.c,
	src/core/input.h, src/core/layers.c, src/core/palette.h,
	src/core/state.c, src/core/state.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c, src/core/windows.h,
	src/core/fbdev/fbdev.c, src/core/fusion/fusion_internal.h,
	src/core/fusion/lock.c, src/core/fusion/object.c,
	src/core/fusion/object.h, src/core/fusion/reactor.c,
	src/core/fusion/reactor.h, src/core/fusion/shmalloc/shmalloc.c,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/windows/idirectfbwindow.c: Speed up reactor_attach/detach by
	writing reaction information to a provided memory location which is
	also passed to reactor_detach.	Check depth specified in the
	configuration.

2002-10-02 16:48  dok

	* src/core/fusion/reactor.c: Don't detach reactor threads.

2002-09-30 19:09  dok

	* src/core/windows.h: arg, ref/unref typo

2002-09-27 20:31  dok

	* src/: idirectfb.c, input/idirectfbinputbuffer.c,
	input/idirectfbinputbuffer.h, input/idirectfbinputdevice.c,
	windows/idirectfbwindow.c: Event buffers created by
	"IDirectFB::CreateEventBuffer" will discard raw input events until
	the application is fullscreen or has a focused window (primary). 
	Buffers that always get input events can be created via
	IDirectFBInputDevice.

2002-09-27 19:23  dok

	* src/core/modules.c: oops

2002-09-27 19:02  dok

	* src/core/: core.c, core.h, modules.c: Removed more unused stuff.

2002-09-27 18:50  dok

	* src/core/layers.c: minor optimization

2002-09-27 17:52  dok

	* src/core/: layers.c, fusion/fusion.c: Fixed copy'n'paste error. 
	Don't print error message if opening /proc/... failed.

2002-09-27 16:16  dok

	* configure.in: Fixed MMX test.

2002-09-27 16:15  dok

	* src/gfx/generic/generic_mmx.c: minor fix

2002-09-27 15:54  dok

	* src/gfx/generic/: Cacc_add_to_Dacc_MMX.s,
	Dacc_modulate_argb_MMX.s, Makefile.am, Sacc_add_to_Dacc_MMX.s,
	Sacc_to_Dop_rgb16_MMX.s, Sacc_to_Dop_rgb32_MMX.s,
	Sop_argb_Sto_Dacc_MMX.s, Sop_argb_to_Dacc_MMX.s,
	Sop_rgb16_to_Dacc_MMX.s, Sop_rgb32_to_Dacc_MMX.s,
	Xacc_blend_invsrcalpha_MMX.s, Xacc_blend_srcalpha_MMX.s,
	generic_mmx.c: Assembler routines converted to inline assembler,
	thanks to Johannes Stezenbach <js@convergence.de>.

2002-09-27 14:51  dok

	* README: Added Billy Biggs <vektor@dumbterm.net>.

2002-09-27 14:50  dok

	* gfxdrivers/matrox/matrox_crtc2.c, include/directfb.h,
	src/core/layers.c, src/core/layers.h,
	src/display/idirectfbdisplaylayer.c: Applied patch from Billy Biggs
	<vektor@dumbterm.net> adding
	IDirectFBDisplayLayer::GetCurrentOutputField(), experimental and
	may change.

2002-09-27 14:37  dok

	* src/: core/coredefs.h, core/windows.c, core/windows.h,
	display/idirectfbsurface_window.c, windows/idirectfbwindow.c:
	Destroy windows only in IDIrectFBWindow::Destroy(), do unref
	otherwise.

2002-09-26 18:25  dok

	* src/core/core_system.h, src/core/input.c, src/core/modules.c,
	src/core/system.c, src/core/system.h, src/core/fusion/ref.c,
	src/core/fusion/ref.h, src/windows/idirectfbwindow.c,
	tools/dfbdump.c: Use new module handling for core systems.  Added
	fusion_ref_stat() for debugging.  dfbdump now displays the number
	of references in front.

2002-09-25 16:54  dok

	* src/core/gfxcard.c: Fixed multi app build.

2002-09-25 13:18  dok

	* gfxdrivers/ati128/ati128.c, gfxdrivers/matrox/matrox.c,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/nvidia/nvidia.c,
	gfxdrivers/savage/savage.c, gfxdrivers/tdfx/tdfx.c,
	inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c,
	inputdrivers/linux_input/linux_input.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	inputdrivers/sonypi/sonypi.c, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/graphics_driver.h, src/core/input.h,
	src/core/input_driver.h, src/core/sdl/sdlinput.c: Graphics drivers
	are handled via new module functions now.  Removed obsolete abi
	version stuff from graphics and input code.

2002-09-25 12:21  dok

	* src/core/windows.c: Added the ability to change a window's
	opacity by holding Alt while holding CapsLock or Meta moving the
	cursor on the x axis (for wheel less mice).

2002-09-24 19:38  dok

	* src/core/modules.c: Added another assertion.

2002-09-24 19:35  dok

	* src/core/: Makefile.am, coredefs.h, coretypes.h, input.c,
	input.h, input_driver.h, modules.c, modules.h: Added new module
	management functions featuring module references/unloading.  Input
	driver modules are already handled this way.

2002-09-23 17:22  dok

	* src/gfx/generic/generic.c: Implemented Bop_a8_Kto_Aop,
	Bop_a8_SKto_Aop, Sop_a8_Kto_Dacc, Sop_a8_SKto_Dacc and
	Sacc_to_Aop_a8.

2002-09-23 16:57  dok

	* configure.in, directfb-config.in, directfb.pc.in: Add "-ldl" and
	"-lpthread" or "-lc_r" conditionally.

2002-09-23 15:58  dok

	* tools/dfb_static_build_example: Updated static build script
	including support for sdl.  Uses pkg-config now to determine prefix
	and module directory.

2002-09-23 14:48  dok

	* configure.in: Added required quotes for test in case CFLAGS have
	been set.

2002-09-23 13:47  andi

	* configure.in: icheck for target host type before libdl and
	pthreads

2002-09-23 13:42  andi

	* configure.in: do not check for libdl on freebsd, check for
	phreads in libc_r on freebsd.

2002-09-22 00:12  andi

	* src/core/fusion/fusion_internal.h: FreeBSD sync: include
	<sys/param.h> before <sys/user.h>

2002-09-17 00:51  andi

	* src/core/fusion/fusion_internal.h: only include asm/page.h on
	linux

2002-09-17 00:35  andi

	* src/core/fusion/: Makefile.am, arena.c, fusion.c,
	fusion_shmalloc.c, lock.c, property.c, reactor.c, ref.c, util.c: do
	not build arena.c fusion.c lock.c util.c and fusion_shmalloc.c when
	compiling without single application core

2002-09-13 16:26  dok

	* src/core/palette.h: Fixed flag definitions.

2002-09-12 01:54  andi

	* Makefile.am, tools/raw32toraw24.c: build tools on non-linux
	platforms. do not use <asm/byteorder.h> in raw32toraw24.c

2002-09-12 01:29  andi

	* src/core/gfxcard.c: include <sys/types.h> because darwins
	<sys/mman.h> depends on it and doesnt include it by itself...

2002-09-12 01:26  andi

	* src/misc/: mem.h, memcpy.h, util.h: - added extern to declaration
	of dfb_memcpy() to avoid problems with	 non-gnu linkers.  - only
	include <asm/page.h> on linux, guess PAGE_SIZE = 4096 on other
	platforms   (bad) - only define MIN and MAX when undefined (fixes
	problem on darwin)

2002-09-12 01:14  andi

	* Makefile.am, configure.in, include/dfb_types.h,
	interfaces/IDirectFBVideoProvider/Makefile.am: only build
	gfxdrivers, tools, inputdrivers and v4l provider on linux

2002-09-11 17:58  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h: Avoid naming conflict of
	log2 with tgmath.

2002-09-11 15:08  dok

	* BUGS: updated

2002-09-11 14:39  dok

	* TODO, src/core/core.c, src/core/palette.c, src/misc/colorhash.c,
	src/misc/colorhash.h: Color hash is multi app ready now, palette
	seems broken though.

2002-09-11 13:05  dok

	* src/core/windows.c: Force window creation without alpha channel
	if "no-translucent-windows" option is used.

2002-09-11 12:47  dok

	* src/core/layers.c, src/core/layers.h, tools/.cvsignore,
	tools/Makefile.am, tools/dfbdump.c: Added debugging tool dumping
	information about existing windows and surfaces.

2002-09-11 12:29  dok

	* src/core/surfaces.c: Send CSNF_SIZEFORMAT notification.

2002-09-11 01:37  andi

	* configure.in, gfxdrivers/nvidia/nvidia.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, src/core/layers.c, src/gfx/generic/generic.c,
	tools/directfb-csource.c, tools/raw15toraw24.c,
	tools/raw16toraw24.c, tools/raw32toraw24.c: use AC_C_BIGENDIAN
	(AFAIK even works when cross-compiling with automake2.53) no longer
	include <endian.h> which seems to be linux specific, use #ifdef
	WORDS_BIGENDIAN instead of #if __BYTE_ORDER == __BIG_ENDIAN

2002-09-10 23:47  andi

	* include/dfb_types.h: oops

2002-09-10 23:42  andi

	* gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/mmio.h, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/mmio.h, gfxdrivers/neomagic/neo2200.c,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/neomagic/neomagic.h,
	gfxdrivers/nvidia/nvidia.c, gfxdrivers/nvidia/nvidia.h,
	gfxdrivers/savage/mmio.h, gfxdrivers/savage/savage.c,
	gfxdrivers/savage/savage2000.c, gfxdrivers/savage/savage3d.c,
	gfxdrivers/savage/savage4.c,
	gfxdrivers/savage/savage_streams_old.c, gfxdrivers/tdfx/tdfx.c,
	gfxdrivers/tdfx/tdfx.h, include/.cvsignore, include/Makefile.am,
	include/directfb.h, inputdrivers/linux_input/linux_input.c,
	src/core/coretypes.h, src/core/layers.h, src/core/windows.h,
	src/gfx/convert.h, src/gfx/generic/generic.c,
	src/gfx/generic/generic.h, src/misc/cpu_accel.h,
	src/misc/gfx_util.h, src/misc/memcpy.c, tools/raw32toraw24.c: do
	not include <asm/types.h> directly. added dfb_types.h which
	includes <asm/types.h> on linux and <sys/types.h> on other
	platforms

2002-09-10 22:31  andi

	* configure.in: added AC_CANONICAL_HOST and AC_CANONICAL_TARGET to
	avoid this problem with libtool on darwin
	
	ltconfig: you must specify a host type if you use `--no-verify' Try
	`ltconfig --help' for more information.  configure: error: libtool
	configure failed

2002-09-10 20:18  neo

	* gfxdrivers/savage/: savage.c, savage_streams_old.c:
	s/dfb_fbdev_wait_vsync/dfb_system_wait_vsync/ Include <linux/fb.h>
	in order to get FB_ACCEL_* defines.

2002-09-10 18:35  andi

	* gfxdrivers/neomagic/neo2200.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/nvidia/nvidia.c, gfxdrivers/savage/savage.c,
	gfxdrivers/savage/savage2000.c, gfxdrivers/savage/savage3d.c,
	gfxdrivers/savage/savage4.c,
	gfxdrivers/savage/savage_streams_old.c, gfxdrivers/tdfx/tdfx.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/interface.c,
	src/core/gfxcard.c, src/core/input.c, src/core/surfacemanager.c,
	src/core/surfaces.c, src/core/windows.c, src/core/fbdev/vt.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbpalette.c, src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbdatabuffer.c,
	src/media/idirectfbdatabuffer_file.c,
	src/media/idirectfbdatabuffer_memory.c,
	src/media/idirectfbdatabuffer_streamed.c,
	src/media/idirectfbfont.c, src/misc/conf.c,
	src/windows/idirectfbwindow.c: no longer include malloc.h (sync
	from my OSX tree)

2002-09-10 18:14  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/thread.c, src/core/thread.h: Use high priority for video
	threads, detach from surface correctly.

2002-09-10 17:41  andi

	* configure.in, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_bes.c, src/core/Makefile.am,
	src/core/gfxcard.h, src/core/fbdev/fbdev.h, src/core/fbdev/vt.c,
	src/misc/Makefile.am: support for building DirectFB without fbdev
	support. (first sync from my OSX tree)

2002-09-10 17:22  neo

	* src/core/surfaces.c: Assign new width, height and format before
	checking if a reallocation is necessary in dfb_surface_reformat().

2002-09-10 16:50  dok

	* TODO, src/core/sdl/sdlinput.c: Finished key translation.

2002-09-10 14:51  dok

	* TODO: Two 0.9.14 TODOs.

2002-09-09 19:30  dok

	* BUGS: color hash for multi app is broken

2002-09-09 19:01  dok

	* NEWS: minor clarification

2002-09-09 19:00  dok

	* ChangeLog, NEWS: update

2002-09-09 18:43  dok

	* TODO: updated

2002-09-09 18:25  dok

	* src/core/fusion/: property.c, reactor.c: debug output adjusted

2002-09-09 18:15  dok

	* src/core/: layers.c, fusion/property.c: Added orphan detection to
	FusionProperty.
	
	The window stack and video mode are now restored even if a
	fullscreen application simply exits or gets killed by any signal.

2002-09-09 16:26  dok

	* src/core/: layers.c, layers.h: Added function for retrieving the
	window pool from a layer.

2002-09-09 16:02  dok

	* src/core/fusion/: object.c, object.h: Added
	fusion_object_pool_enum() for enumeration of all objects.

2002-09-09 13:30  dok

	* gfxdrivers/matrox/matrox.c: Now half line, not half texture ;)

2002-09-09 13:21  dok

	* gfxdrivers/matrox/matrox.c: Half line adjustment for deinterlace
	blits.

2002-09-06 19:25  dok

	* src/display/idirectfbdisplaylayer.c: Fixed CreateWindow with
	DWDESC_SURFACE_CAPS.

2002-09-05 19:41  dok

	* src/core/palette.c: Made black RGB332 entry transparent for
	testing.

2002-09-05 19:29  dok

	* src/core/fbdev/: fbdev.c, fbdev.h: Reexported "dfb_fbdev" as a
	hot fix to have the Matrox driver compile again.

2002-09-05 19:00  dok

	* src/core/input.c: Changed LED behaviour.

2002-09-05 17:55  dok

	* src/core/windows.c: Added Meta (or Windows) key to wm hack.

2002-09-05 17:52  dok

	* src/core/: surfaces.c, fbdev/fbdev.c, sdl/primary.c: Don't
	generate RGB332 entries if palette already existed.  Generate
	RGB332 entries after creation of layer palettes.

2002-09-05 15:12  dok

	* include/directfb.h, src/directfb.c, src/idirectfb.c,
	src/core/palette.c, src/core/palette.h, src/core/surfaces.c,
	src/core/fbdev/fbdev.c, src/core/sdl/primary.c,
	src/display/idirectfbpalette.c, src/display/idirectfbsurface.c:
	Added IDirectFB::CreatePalette().  Added
	IDirectFBSurface::SetPalette().  Added
	IDirectFBPalette::GetCapabilities().  Added
	IDirectFBPalette::CreateCopy().

2002-09-05 14:07  dok

	* src/core/: layers.c, sdl/sdlinput.c: Fixed warning in "layers.c".
	 Small fix in SDL input driver.

2002-09-05 13:54  dok

	* configure.in: Fixed summary (SDL support yes/no).

2002-09-05 13:48  dok

	* AUTHORS, gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/matrox/regs.h: Another
	patch from Ville Syrjala <syrjala@sci.fi> adding planar YUV
	blitting.
	
	- DoBlit2D_Old(), DoBlit2d and DoBlitTMU() initiate the blits - The
	are called from Blit2D_Old(), Blit2D() and BlitTMU().  -
	StretchBlit() and Blit3D() simply call BlitTMU() with proper
	arguments.  - Clipping registers are updated for chroma planes
	also.  - Register programming is not done in validate_source() or
	validate_Source() anymore. All source related programming is done
	from the blit functions.  - I changed the code for all cards. Only
	tested on G400 as I've misplaced my G200 smewhere and I don't own
	any other cards.
	
	Added him to "helping developers" in AUTHORS.

2002-09-05 13:36  dok

	* docs/directfbrc.5.in, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_crtc2.c, gfxdrivers/matrox/matrox_maven.c,
	gfxdrivers/matrox/matrox_maven.h, gfxdrivers/matrox/matrox_spic.c,
	gfxdrivers/matrox/mmio.h, gfxdrivers/matrox/regs.h,
	src/misc/conf.c, src/misc/conf.h: Second head support via
	additional layers by Ville Syrjala <syrjala@sci.fi>.  New option
	"matrox-crtc2" to activate this.

2002-09-04 18:12  dok

	* src/gfx/: convert.h, generic/generic.c: This patch from Ville
	Syrjala <syrjala@sci.fi> adds YUV rectangle filling support for
	planar and non-planar formats.

2002-09-04 18:03  dok

	* ChangeLog, NEWS, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox.h: Millenium -> Millennium (thanks to
	Ville Syrjala <syrjala@sci.fi>).

2002-09-04 18:01  dok

	* TODO,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Added Matrox CLUT as a todo item.  Set DSCAPS_INTERLACED in the
	surface description of the v4l provider.

2002-09-03 13:37  neo

	* docs/directfbrc.5.in: Document the new system parameter.

2002-08-30 21:12  dok

	* src/: interface.c, core/gfxcard.c, core/input.c, core/system.c:
	Fixed crash with debug mode (with linked in modules).  Fixed multi
	app core system init.

2002-08-30 19:49  dok

	* configure.in, gfxdrivers/ati128/ati128.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/matrox_state.c,
	inputdrivers/keyboard/keyboard.c,
	inputdrivers/linux_input/linux_input.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/core/Makefile.am,
	src/core/core.c, src/core/core_system.h, src/core/coretypes.h,
	src/core/gfxcard.c, src/core/gfxcard.h, src/core/input.c,
	src/core/layers.c, src/core/layers.h, src/core/surfacemanager.c,
	src/core/surfaces.c, src/core/system.c, src/core/system.h,
	src/core/windows.c, src/core/fbdev/fbdev.c, src/core/fbdev/fbdev.h,
	src/core/fbdev/vt.h, src/core/sdl/.cvsignore,
	src/core/sdl/Makefile.am, src/core/sdl/primary.c,
	src/core/sdl/primary.h, src/core/sdl/sdl.c, src/core/sdl/sdl.h,
	src/core/sdl/sdlinput.c, src/display/idirectfbsurface_layer.c,
	src/misc/conf.c, src/misc/conf.h: Started abstraction of the "core
	system" featuring the "fbdev" system like before and a new
	experimental "sdl" system. Yepp, DirectFB running on SDL.
	
	Use "--dfb:system=sdl" to run applications under X.

2002-08-30 13:55  dok

	* inputdrivers/dbox2remote/dbox2remote.c: Fixed driver, compiles
	again.

2002-08-29 02:45  neo

	* gfxdrivers/nvidia/nvidia.c: Removed a spurious space that broke
	the build.

2002-08-28 23:34  andi

	* gfxdrivers/nvidia/: nvidia.c, nvidia.h: - fix for big endian
	hosts, driver should work now - wait for 4 instead of 3 fifo slots
	for line drawing ( this fixes crashing	 of df_dok on my Geforce
	2MX

2002-08-27 19:41  dok

	* src/: core/surfaces.c, display/idirectfbsurface.c, gfx/convert.c,
	gfx/convert.h, gfx/generic/generic.c, misc/conf.h, misc/gfx_util.c,
	windows/idirectfbwindow.c: Outlined some inlines.

2002-08-27 19:23  dok

	* src/core/palette.c: Added missing call to colorhash_detach().

2002-08-27 16:03  dok

	* configure.in, gfxdrivers/neomagic/neo2200.c, include/directfb.h,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_window.c: Added
	IDirectFBSurface::SetSrcColorKeyIndex() and SetDstColorKeyIndex().
	
	Added LUT8 and RGB332 acceleration to NeoMagic driver (now version
	0.3).
	
	Added referencing of the window to IDirectFBSurface_Window
	implementation.
	
	Increased version number to 0.9.14.

2002-08-27 00:28  neo

	* autogen.sh: Call 'libtoolize --version' instead of libtool.

2002-08-26 21:21  dok

	* include/directfb.h, src/core/windows.c,
	src/gfx/generic/generic.c: DSCAPS_SEPERATED -> DSCAPS_SEPARATED

2002-08-26 19:47  dok

	* src/core/windows.c: Use DSBLIT_DEINTERLACE if window surface has
	DSCAPS_INTERLACED.

2002-08-26 19:44  dok

	* gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_state.c, include/directfb.h,
	src/gfx/generic/generic.c: Added experimental blitting flag
	DSBLIT_DEINTERLACE and implemented it in the Matrox driver, not
	tested yet.

2002-08-26 19:13  dok

	* src/core/state.c: Added CSNF_FIELD as a notification causing the
	'source modified' bit to be set.

2002-08-26 17:42  dok

	* TODO: minor update

2002-08-23 20:26  dok

	* TODO: removed field switching todo

2002-08-23 20:26  dok

	* include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/layers.c, src/core/surfaces.c, src/core/surfaces.h,
	src/display/idirectfbsurface.c: Added IDirectFBSurface::SetField()
	which enables applications to manually control the deinterlacing of
	layer surfaces (with DLOP_DEINTERLACE enabled).

2002-08-23 20:00  dok

	* src/misc/mem.c: Keep alloc_list after debug outputting it to
	avoid crash by further deinits.

2002-08-23 17:24  dok

	* src/: core/input.c, core/layers.c, core/surfacemanager.c,
	core/fbdev/fbdev.c, misc/fbdebug.c, misc/fbdebug.h: fixed
	init/deinit related things

2002-08-23 16:06  dok

	* src/core/: gfxcard.c, input.c, fbdev/fbdev.c, fbdev/vt.c,
	fbdev/vt.h: Fixed two mem leaks (two unreachable blocks after
	exit).	Don't reload input and graphics modules.

2002-08-23 15:12  dok

	* src/core/fbdev/vt.c: Use shcalloc instead of shmalloc.

2002-08-23 14:43  dok

	* configure.in: Added "-g" to non-debug mode to have line numbers
	in gdb without enabling the DirectFB debugging code.

2002-08-23 14:24  dok

	* src/interface.c: Added missing closedir().

2002-08-23 00:40  dok

	* ChangeLog, NEWS: updated

2002-08-23 00:20  neo

	* NEWS, include/directfb.h: Updated NEWS.  Forced directfb.h into
	80 columns.

2002-08-23 00:19  dok

	* TODO: cheating ;)

2002-08-23 00:15  dok

	* src/core/gfxcard.c: Do a skirmish_prevail during shutdown if it's
	no emergency instead of the skirmish_swoop loop.

2002-08-23 00:05  dok

	* src/core/: coredefs.h, fusion/fusion_internal.h,
	fusion/reactor.c: Added "do { ... } while (0)" to debug macros.
	
	Don't print an error if message queue id is removed, but print a
	debug message.

2002-08-22 23:58  neo

	* gfxdrivers/savage/savage_streams_old.c, src/core/fbdev/fbdev.c,
	src/core/fbdev/fbdev.h: Made init_modes a static function again.
	
	Call the original InitLayer function and modify the configuration
	instead of doing the whole setup in savagePrimaryInitLayer().

2002-08-22 23:54  dok

	* src/core/: core.c, surfaces.c, surfaces.h, windows.c,
	fbdev/fbdev.c, fusion/reactor.c, fusion/ref.c: Shutdown input core
	before anything else to stop input threads early enough.
	
	Don't create a palette for non indexed surfaces by default.  Create
	it on demand during surface reformation.
	
	Fixed missing initialization of semop flags regarding global
	references.

2002-08-22 23:06  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	Made the GIF provider less verbose.

2002-08-22 22:42  neo

	* src/: core/palette.c, core/palette.h, misc/Makefile.am,
	misc/colorhash.c, misc/colorhash.h: Added a global (per process)
	color hash table to speedup palette lookups.

2002-08-22 21:03  dok

	* inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c,
	inputdrivers/linux_input/linux_input.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	inputdrivers/sonypi/sonypi.c, src/core/Makefile.am,
	src/core/coretypes.h, src/core/sig.c, src/core/sig.h,
	src/core/thread.c, src/core/thread.h: Added core functions for
	thread management to have input drivers pthread independent for
	easier porting.
	
	Input threads get a higher priority now.

2002-08-22 19:48  dok

	* src/core/fusion/: fusion_internal.h, property.c: Fixed dead lock
	in recently implemented FusionProperty (multi app).

2002-08-22 14:28  neo

	* gfxdrivers/savage/mmio.h, gfxdrivers/savage/savage.c,
	gfxdrivers/savage/savage4.c,
	gfxdrivers/savage/savage_streams_old.c, src/core/fbdev/fbdev.c,
	src/core/fbdev/fbdev.h: Applied a patch from Alex Song
	<alexsong@comports.com> that add flipping support to the secondary
	layer.
	
	Export former internal function init_modes() as
	dfb_fbdev_init_modes().

2002-08-20 21:55  dok

	* configure.in: Modules are installed to
	".../lib/directfb-0...-debug/" if debug is enabled to avoid dynamic
	linker errors.

2002-08-20 21:35  dok

	* TODO: minor update

2002-08-20 21:10  dok

	* src/: core/coredefs.h, core/fusion/fusion_internal.h, misc/mem.c:
	Added malloc/calloc/strdup debug output.  Beautified debug output
	and made fusion debug output like the core's DEBUGMSG.

2002-08-20 19:53  dok

	* interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	src/idirectfb.c, src/core/fonts.c, src/core/layers.c,
	src/core/surfaces.c, src/core/surfaces.h, src/core/windows.c,
	src/core/fbdev/fbdev.c: Surfaces can now be created (in core) using
	the palette of another surface.  Window surfaces are now created
	with the layer's palette (real reference).

2002-08-20 19:24  dok

	* src/core/windows.c: Removed locking recently added.

2002-08-20 19:15  dok

	* src/: idirectfb.c, core/palette.c, core/palette.h, core/state.c,
	core/surfaces.c, display/idirectfbpalette.c,
	display/idirectfbpalette.h, display/idirectfbsurface.c:
	IDirectFBPalette is now completely independent from surfaces. 
	Added palette notification for entry modifications and palette
	destruction.  Attach a palette listener to a surface's palette to
	notify surface listeners.

2002-08-20 18:10  dok

	* src/core/windows.c: Unref surface after linking it instead of
	unref during window destruction.

2002-08-20 18:04  dok

	* src/core/: gfxcard.c, gfxcard.h, palette.c, palette.h,
	surfaces.c, surfaces.h: CorePalette is a FusionObject now with its
	own pool.  Currently each surface creation causes the creation of a
	palette object, it's then linked to the surface object and
	unref'ed.

2002-08-19 20:21  neo

	* src/gfx/generic/generic.c: Indentation.

2002-08-19 18:23  dok

	* src/core/: layers.c, fusion/shmalloc.h: Provide shmalloc/shfree
	debugging for single app core.	Avoid calling shfree() with NULL.

2002-08-19 15:29  dok

	* src/core/: layers.c, surfacemanager.c, windows.c: Fixed cursor
	alpha blending.  Added 'CAUTION' messages to unimplemented cases of
	surface heap adjustment.  Added locking to window stack cursor
	handling.

2002-08-19 15:03  dok

	* TODO: removed obsolete entries, sorted entries by priority

2002-08-19 14:49  dok

	* include/directfb.h, src/core/windows.c,
	src/windows/idirectfbwindow.c: Added DWOP_ALPHACHANNEL to
	enable/disable per-pixel blending after creation.  Only supported
	by windows with the capability DWCAPS_ALPHACHANNEL, which have it
	enabled by default.

2002-08-19 13:35  neo

	* autogen.sh: Removed bashism (function keyword).

2002-08-16 20:40  dok

	* src/core/windows.c: minor simplification

2002-08-16 16:14  dok

	* include/directfb.h, src/idirectfb.c, src/core/layers.c,
	src/core/layers.h, src/core/surfacemanager.c, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c: Added DSCAPS_STATIC_ALLOC and
	DWDESC_SURFACE_CAPS.

2002-08-16 15:15  dok

	* src/core/fbdev/fbdev.c: Fixed bug introduced last night.

2002-08-16 14:15  dok

	* src/core/surfaces.c: Don't lock/unlock buffers during surface
	destruction.

2002-08-16 10:32  dok

	* src/core/: core.c, gfxcard.c, gfxcard.h, fbdev/fbdev.c,
	fbdev/fbdev.h: Framebuffer is now mapped by 'fbdev' instead of
	'gfxcard'.  Reordered initialization/shutdown/join/leave calls in
	'core'.

2002-08-16 05:45  dok

	* BUGS, src/idirectfb.c, src/core/fbdev/fbdev.c,
	src/core/fbdev/fbdev.h: EnumVideoModes handles bpp again.

2002-08-16 04:51  dok

	* BUGS, TODO, src/core/layers.c, src/core/fusion/property.c,
	src/core/fusion/property.h: Implemented FusionProperty in multi
	application mode (via three semaphores).  Implemented
	backup/restore of the layer configuration before/after excl.
	access.

2002-08-15 23:46  dok

	* src/display/idirectfbdisplaylayer.c: A bit work on cooperative
	levels.

2002-08-15 23:00  dok

	* src/core/surfacemanager.c: Avoid endless waiting during
	deallocation.

2002-08-15 20:53  dok

	* include/directfb.h, src/directfb.c: DirectFBError() and
	DirectFBErrorFatal() return the error code now for easier code
	(e.g. return DirectFBError(...)).

2002-08-13 21:10  dok

	* src/core/layers.c: Made debug message an error message
	(background surface vanished).

2002-08-13 19:49  dok

	* src/core/layers.c: Background image is now persistent
	(application can exit after setting it).

2002-08-13 19:08  dok

	* src/core/fusion/fusion_internal.h: Fusion debug messages are
	printed only if debugging is enabled at runtime.

2002-08-13 18:43  neo

	* patches/Makefile.am: Updated the Makefile accordingly.

2002-08-13 18:42  neo

	* patches/: README.savagefb, savagefb-0.4.0-linux-2.4.17.patch.bz2,
	savagefb-0.4.0-linux-2.4.19.patch.bz2: Updated savagefb-0.4.0 patch
	based on a patch from Alex Song.

2002-08-13 18:32  dok

	* gfxdrivers/neomagic/neo_overlay.c: Implemented ovlFlipBuffers().

2002-08-13 17:15  dok

	* TODO, src/core/gfxcard.c, src/core/layers.c, src/core/layers.h,
	src/core/state.c, src/core/state.h, src/core/surfacemanager.c,
	src/core/surfacemanager.h, src/core/windows.c, src/core/windows.h:
	CardState is a local resource now, using a mutex instead of a
	skirmish.  The state for window stack updates is now located in the
	local layer data.  Added deinitialization of the surface manager.
	
	No resource leak by starting/exitting a small application.

2002-08-13 13:56  neo

	* src/gfx/generic/generic.c: Implemented Sop_lut8_Sto_Dacc() and
	Sop_a8_Sto_Dacc().

2002-08-13 13:01  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p: more compile fixes

2002-08-13 01:58  neo

	* data/Makefile.am: cleanup

2002-08-12 22:42  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p: Hopefully compiles again.

2002-08-12 21:30  dok

	* TODO: Another TODO item: synchronous messages

2002-08-12 21:27  dok

	* TODO: Added TODO item for making CardState local only.

2002-08-12 21:11  dok

	* src/core/core.c: Don't install signal handler for slaves.

2002-08-12 20:59  dok

	* src/: core/layers.c, core/windows.c, core/windows.h,
	display/idirectfbsurface_window.c, windows/idirectfbwindow.c: Made
	CoreWindow a FusionObject.

2002-08-12 19:43  dok

	* src/core/: surfaces.c, fusion/fusion_shmalloc.c, fusion/object.c,
	fusion/object.h, fusion/shmalloc.h: Each object pool has a name
	now.
	
	Added shstrdup().

2002-08-12 18:41  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/idirectfb.c, src/core/coredefs.h, src/core/fonts.c,
	src/core/gfxcard.c, src/core/gfxcard.h, src/core/layers.c,
	src/core/state.c, src/core/surfacemanager.c,
	src/core/surfacemanager.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c, src/core/fbdev/fbdev.c,
	src/core/fusion/Makefile.am, src/core/fusion/fusion_internal.h,
	src/core/fusion/fusion_types.h, src/core/fusion/object.c,
	src/core/fusion/object.h, src/core/fusion/reactor.c,
	src/core/fusion/reactor.h, src/core/fusion/ref.c,
	src/display/idirectfbpalette.c, src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_window.c: Added FusionObject which is
	currently used for surfaces and will be used for windows (dynamic
	resource) or static resources like layers, input devices...
	
	Each FusionObject has a reference counter which is automatically
	decreased if the process dies that increased it. Added bone
	collector thread that checks for dead objects (zero reference) and
	calls the destructor (master only).
	
	Replaced dfb_surface_destroy() calls with dfb_surface_unref()
	calls.
	
	Each IDirectFBSurface instance increases the reference counter, so
	be careful to release all sub surfaces.

2002-08-12 16:44  dok

	* src/core/fusion/fusion.c: cleanup

2002-08-11 16:32  neo

	* src/gfx/generic/generic.c: Reverted my last change since the
	compiler seems to like the old code better.

2002-08-11 16:26  neo

	* src/gfx/generic/generic.c: Cleaned up
	Bop_a8_set_alphapixel_Aop_rgb24().

2002-08-11 15:30  neo

	* src/misc/: tree.c, tree.h: Removed unused locking code.

2002-08-11 14:52  neo

	* configure.in, src/gfx/generic/generic.c: Aligned configure
	output.  Don't use duffs device for
	Bop_a8_set_alphapixel_Aop_lut8().

2002-08-09 19:35  neo

	* src/gfx/generic/generic.c: A better implementation of
	Bop_a8_set_alphapixel_Aop_lut8(). Much slower but correct for AA
	glyphs and reasonably fast for monochrome ones.

2002-08-09 16:18  neo

	* src/gfx/generic/generic.c: Reuse Bop_a8_set_alphapixel_Aop_lut8()
	for RGB332; it's the same code.

2002-08-09 15:37  neo

	* src/: core/gfxcard.c, gfx/generic/generic.c: Set the color_index
	in the font_state as well.
	
	Added a simple implementation for Bop_a8_set_alphapixel_Aop_lut8().

2002-08-09 14:05  neo

	* docs/directfbrc.5.in: Document the disable-module directfbrc
	option.

2002-08-09 13:21  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: code cleanup

2002-08-09 12:37  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Introduced an enum for the stage to improve code readability. 
	Check if we reached our final stage in the inner loop of
	push_data_until_stage(). PNG images load again :-)

2002-08-09 11:46  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Check that png_ptr is not NULL before calling
	png_destroy_read_struct().

2002-08-08 22:02  neo

	* docs/directfb-csource.1.in, src/gfx/convert.h,
	tools/directfb-csource.c: Added inline function
	span_rgb32_to_rgb332().  Added support for RGB332 surfaces to
	directfb-csource.

2002-08-08 19:28  dok

	* src/core/fusion/: arena.c, reactor.c, ref.c, ref.h,
	shmalloc/shcalloc.c: Added a bool "global" to fusion_ref_up/down().
	A global reference is not bound to any fusionee (anonymous
	reference) and won't be automatically decreased if the fusionee
	that increased it dies. This will be useful for resource cleanup if
	a core object is linked to another one (e.g. surface linked to
	window).

2002-08-08 18:56  neo

	* gfxdrivers/savage/: savage3d.c, savage_streams_old.c: Removed
	unnecessary include of core/fbdev.h from savage3d.c.  Include
	core/fbdev/fbdev.h from savage_streams_old.c :-(

2002-08-08 18:41  dok

	* configure.in, gfxdrivers/matrox/matrox_bes.c,
	inputdrivers/keyboard/keyboard.c, src/directfb.c, src/idirectfb.c,
	src/core/Makefile.am, src/core/core.c, src/core/fbdev.c,
	src/core/fbdev.h, src/core/gfxcard.c, src/core/layers.c,
	src/core/sig.c, src/core/vt.c, src/core/vt.h, src/core/windows.c,
	src/core/fbdev/.cvsignore, src/core/fbdev/Makefile.am,
	src/core/fbdev/fbdev.c, src/core/fbdev/fbdev.h,
	src/core/fbdev/vt.c, src/core/fbdev/vt.h,
	src/display/idirectfbsurface_layer.c: Moved framebuffer device
	specific files to "src/core/fbdev/".  Only "gfxcard.c" still
	contains a bit fbdev code.
	
	Other files modified depend on the fbdev code which has to be
	fixed.

2002-08-08 18:00  dok

	* src/media/: idirectfbdatabuffer.c, idirectfbdatabuffer.h,
	idirectfbdatabuffer_file.c, idirectfbdatabuffer_memory.c,
	idirectfbdatabuffer_streamed.c, idirectfbimageprovider.c,
	idirectfbimageprovider.h: A filename is now contained in the common
	private data of data buffers.  It is set if the databuffer is
	created for a file. Image providers that do not support data
	streaming can use it as a fallback.

2002-08-08 17:32  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	minor cleanup

2002-08-08 17:14  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Abort data streaming if error is detected.

2002-08-08 17:06  dok

	* interfaces/IDirectFBImageProvider/: idirectfbimageprovider_gif.c,
	idirectfbimageprovider_jpeg.c, idirectfbimageprovider_png.c: Added
	DFB_UNIMPLEMENTED returning methods for SetRenderCallback(). 
	Forgot to add a "return" if no system memory could be allocated. 
	Started implementing the render callback for PNGs, not working yet.

2002-08-08 16:58  dok

	* src/media/idirectfbdatabuffer_streamed.c: signed/unsigned switch

2002-08-08 16:57  dok

	* src/media/idirectfbimageprovider.c: Added WaitForData() call
	before peeking 32 bytes.

2002-08-08 16:54  neo

	* tools/directfb-csource.c: Added another format conversion by
	reordering the switch statement :-) Put palette info into the
	DFBSurfaceDescription.

2002-08-08 16:42  dok

	* include/directfb.h, src/idirectfb.c: Added DSDESC_PALETTE which
	can be used to initialize the surface's palette.
	
	Added IDirectFBImageProvider::SetRenderCallback() that is not
	implemented yet.

2002-08-08 16:20  neo

	* tools/directfb-csource.c: the final touch

2002-08-08 14:02  neo

	* BUGS, ChangeLog, NEWS: Updated NEWS and ChangeLog.  Mention the
	current problem with EnumVideoModes() in BUGS.

2002-08-08 13:45  neo

	* tools/directfb-csource.c: Also dump the number of palette
	entries.

2002-08-08 13:19  neo

	* tools/directfb-csource.c: Dump palette from PNG file when the
	destination format is LUT8.

2002-08-08 12:16  neo

	* docs/directfb-csource.1.in, tools/directfb-csource.c: Allow to
	create LUT8 surfaces from indexed PNGs (need to add a way to dump
	the palette).

2002-08-08 10:50  neo

	* tools/directfb-csource.c: Align the pitch to multiples of 4.

2002-08-08 01:14  neo

	* tools/directfb-csource.c: Fixed loading of grayscale PNGs into A8
	and added support for loading RGB PNGs w/o alpha-channel into
	RGB24.

2002-08-08 00:23  neo

	* Makefile.am: Added two Makefile rules that might be useful to
	build only parts of the DirectFB package:   'html' creates the HTML
	docs   'directfb-csource' compiles the directfb-csource utility

2002-08-08 00:00  neo

	* configure.in, docs/.cvsignore, docs/Makefile.am,
	docs/directfb-csource.1.in: Added a man-page for directfb-csource.

2002-08-07 21:07  neo

	* README, src/gfx/convert.h: Added span_argb_to_a8().  Added Tim
	Janik to the list of contributors since I used some of his
	gdk-pixbuf-csource code for directfb-csource.

2002-08-07 20:57  neo

	* tools/: Makefile.am, directfb-csource.c: Allow to specify the
	destination format on the command-line.

2002-08-07 17:48  neo

	* configure.in, tools/.cvsignore, tools/Makefile.am, tools/README,
	tools/directfb-csource.c: Added directfb-csource, a tool that
	creates a C header file from a PNG image that can included in a
	DirectFB application.  Based on gdk-pixbuf-csource.

2002-08-06 21:12  dok

	* src/media/idirectfbdatabuffer_streamed.c: Forgot to lock/unlock
	during Flush().

2002-08-06 21:11  dok

	* src/media/idirectfbdatabuffer_streamed.c: Completely implemented
	streamed data buffer, completely untested.

2002-08-06 19:14  dok

	* src/: idirectfb.c, media/idirectfbdatabuffer_file.c,
	media/idirectfbdatabuffer_memory.c,
	media/idirectfbdatabuffer_streamed.c: cleanup

2002-08-06 18:25  dok

	* src/media/: idirectfbdatabuffer_file.c,
	idirectfbdatabuffer_memory.c: Return DFB_BUFFEREMPTY in PeekData()
	instead of blocking forever.

2002-08-06 18:02  dok

	* include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/idirectfb.c, src/media/Makefile.am,
	src/media/idirectfbdatabuffer.c,
	src/media/idirectfbdatabuffer_file.c,
	src/media/idirectfbdatabuffer_memory.c,
	src/media/idirectfbdatabuffer_streamed.c,
	src/media/idirectfbimageprovider.c,
	src/media/idirectfbimageprovider.h: Image providers now read data
	from an IDirectFBDataBuffer.  JPEG and GIF providers cannot fully
	handle streamed buffers yet.
	
	IDirectFB::CreateImageProvider() implicitly creates a data buffer
	now.
	
	Added IDirectFBDataBuffer::CreateImageProvider().

2002-08-06 15:27  neo

	* src/core/fbdev.c: typo

2002-08-06 14:24  neo

	* configure.in: Call AC_INIT() with a sane value.

2002-08-02 19:21  dok

	* src/core/surfaces.c: Don't reconfig front buffer if policy stays
	the same.

2002-08-02 15:16  dok

	* include/directfb.h, src/media/idirectfbdatabuffer.c,
	src/media/idirectfbdatabuffer_file.c,
	src/media/idirectfbdatabuffer_memory.c,
	src/media/idirectfbdatabuffer_streamed.c: Implemented
	IDirectFBDataBuffer_File::PeekData().  Made "offset" for PeekData()
	signed.

2002-08-02 14:53  dok

	* src/core/fbdev.c: Moved mode probing to primaryInitLayer().

2002-08-01 15:48  dok

	* include/directfb.h, src/idirectfb.c, src/gfx/generic/generic.c,
	src/media/Makefile.am, src/media/idirectfbdatabuffer.c,
	src/media/idirectfbdatabuffer.h,
	src/media/idirectfbdatabuffer_file.c,
	src/media/idirectfbdatabuffer_memory.c,
	src/media/idirectfbdatabuffer_streamed.c: Reject RGB332 in
	IDirectFB::CreateSurface() if it's not compiled in.
	
	Initial work on data abstraction for image providers, etc.

2002-08-01 15:36  dok

	* src/gfx/generic/generic.c: Fixed typo, fixes a crash when
	blitting from LUT to RGB.

2002-07-31 15:13  neo

	* patches/: Makefile.am, README.matroxfb-vsync-irq-patch,
	README.matroxfb-vsync-irq-patch-2.4.6: Removed the version number
	from the README file for the matroxfb-vsync-irq-patch.

2002-07-30 00:47  dok

	* include/directfb.h, src/display/idirectfbpalette.c: Added
	IDirectFBPalette::FindBestMatch().

2002-07-29 21:24  neo

	* interfaces/IDirectFBImageProvider/: idirectfbimageprovider_gif.c,
	idirectfbimageprovider_jpeg.c, idirectfbimageprovider_png.c:
	Removed unneeded calls to IDirectFBSurface::GetCapabilities from
	RenderTo() functions.

2002-07-29 19:24  dok

	* include/directfb.h: Typo.

2002-07-29 01:09  dok

	* configure.in, include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/core/fbdev.c, src/core/gfxcard.c, src/core/layers.c,
	src/core/palette.c, src/core/palette.h, src/core/surfaces.c,
	src/core/windows.c, src/display/idirectfbpalette.c,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/gfx/generic/generic.c, src/misc/conf.c, src/misc/conf.h,
	src/misc/gfx_util.c, src/misc/gfx_util.h, src/misc/util.h: Added
	configure option "--enable-profiling".
	
	Added "alpha present" bit to LUT8, because the LUT has alpha
	values.
	
	Added LUT8 support to image providers.
	
	Added option "pixelformat" which overrides "depth" for the default
	mode.  The value specified is e.g. "RGB332" or "LUT8".
	
	SetPalette() for display layers is now called by the core after
	setting a new configuration (for LUT8 only of course).
	
	Added dfb_palette_search() which (really slowly) looks for the best
	matching palette entry for a specific color.
	
	Generate a RGB332 like palette as default palette for LUT8.
	
	Allow other alpha supporting pixel formats than ARGB for alpha
	blended windows, too.
	
	IDirectFBSurface::Clear(), SetColor(), SetSrcColorKey() and
	SetDstColorKey() now lookup the right color index for indexed
	surfaces.
	
	Much more support for LUT8 in software driver.

2002-07-26 18:28  dok

	* BUGS, src/idirectfb.c, src/core/layers.c, src/core/layers.h,
	src/core/surfaces.h, src/core/windows.c, src/core/windows.h: Fixed
	centering of primary surface window.  Converted some unsigned ints
	to signed ones.

2002-07-26 17:32  dok

	* BUGS: two more bugs

2002-07-26 16:19  dok

	* include/directfb.h, src/core/state.h,
	src/display/idirectfbsurface.c, src/gfx/generic/generic.c: Added
	another bit to the pixel format definition indicating an indexed
	format.  Added DFB_PIXELFORMAT_IS_INDEXED(format).  Added
	IDirectFBSurface::SetColorIndex() for indexed pixel formats. 
	Enabled drawing functions for DSPF_LUT8 in the software driver.

2002-07-26 15:53  neo

	* include/directfb.h, src/directfb.c: Declared the return value of
	DirectFBCheckVersion() as const.  Assure that directfb.h fits into
	80 columns.

2002-07-26 12:59  neo

	* README: some smaller README updates

2002-07-26 12:49  neo

	* ChangeLog, NEWS: Updated ChangeLog and NEWS file.

2002-07-26 12:32  holger

	* include/directfb.h,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c: implemented direct
	glyph mapping without charmap, toggled by the DFFA_NOCHARMAP flag

2002-07-26 06:10  dok

	* src/core/gfxcard.h: Forgot to increase the ABI version.

2002-07-26 06:06  dok

	* gfxdrivers/matrox/matrox_bes.c, src/core/layers.c,
	src/core/layers.h: Added SetField() to layer driver API, removed
	surface listener stuff from Matrox driver and implemented
	SetField().

2002-07-25 17:33  holger

	* interfaces/IDirectFBFont/idirectfbfont_default.c: fixed nasty
	off-by-one bug

2002-07-25 16:54  dok

	* gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/neomagic/neo_overlay.c,
	gfxdrivers/savage/savage_streams_old.c, include/directfb.h,
	src/directfb.c, src/idirectfb.c, src/core/fbdev.c,
	src/core/input.c, src/core/input.h, src/core/layers.c,
	src/core/layers.h, src/display/idirectfbdisplaylayer.c,
	src/input/idirectfbinputdevice.c: Added DFBDisplayLayerTypeFlags
	for a basic classification of the layers' purpose a la
	DFBInputDeviceTypeFlags. Classification includes graphics, video,
	still picture and background usage.
	
	Added DFBDisplayLayerDescription containing capabilities and type
	for now.
	
	Display layer enumeration callback gets the layer's description
	now.
	
	Removed IDirectFBDisplayLayer::GetCapabilities() and added
	GetDescription().

2002-07-25 16:11  neo

	* src/core/windows.c: small cleanup

2002-07-25 15:35  neo

	* include/directfb.h, src/core/windows.c,
	src/windows/idirectfbwindow.c: Implemented input_only windows
	(windows w/o a surface).

2002-07-25 10:24  neo

	* include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c: Declared DFBRectangle and
	DFBRegion as const function parameters for all functions that don't
	change them. This documents the API better and keeps us from
	accidentally modifying the passed structs.

2002-07-24 21:12  neo

	* include/directfb.h, src/directfb.c: Declared name and value
	parameters of DirectFBSetOption as const.

2002-07-24 13:19  neo

	* AUTHORS: Updated email address.

2002-07-23 11:56  neo

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Applied a patch from Ville Syrjala <syrjala@sci.fi> that removes
	the unneeded call to dfb_surfacemanager_assure_system().

2002-07-19 02:57  dok

	* README, patches/Makefile.am,
	patches/matroxfb-vsync-irq-patch-2.4.19.bz2,
	patches/matroxfb-vsync-irq-patch-2.4.6.bz2: New patch for 2.4.19,
	thanks to Brian J. Murrell
	<a40e8119bbddbe7b3d281db117f19b32@interlinx.bc.ca>.

2002-07-18 19:52  dok

	* gfxdrivers/matrox/matrox_state.c, src/core/gfxcard.c: Applied
	patch from Ville Syrjala <syrjala@sci.fi> enabling acceleration for
	the second head of a dual head Matrox.

2002-07-17 17:17  neo

	* docs/directfbrc.5.in: spell checking

2002-07-17 17:04  neo

	* README: Replaced '\344' in Ville's name with a plain 'a' as he
	requested.

2002-07-17 16:23  dok

	* AUTHORS: Added Alex Song <alexsong@comports.com> to "Helping
	Developers" (Savage driver).

2002-07-17 16:09  neo

	* gfxdrivers/savage/: mmio.h, savage.c, savage.h, savage4.c,
	savage_streams_old.c, savage_streams_old.h: Applied a patch from
	Alex Song <alexsong@comports.com> that completes support for the
	old streams engine as found in the Savage4 family.

2002-07-17 16:00  neo

	* src/core/input.c: include <sys/time.h> for gettimeofday().

2002-07-17 15:52  neo

	* include/directfb.h, inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c,
	inputdrivers/linux_input/linux_input.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c, src/core/input.c: Made the
	core fill in the InputEvent's timestamp field if it hasn't been set
	by the inputdriver.
	
	Reviewed all inputdrivers once more and removed some calls to
	gettimeofday() since dfb_input_dispatch() takes care of this now.

2002-07-16 16:50  neo

	* inputdrivers/: joystick/joystick.c, linux_input/linux_input.c,
	ps2mouse/ps2mouse.c, serialmouse/serialmouse.c: Always set the
	flags field of the InputEvent before dispatching it.  This is
	needed since the core modifies it, so we can't reuse the flags next
	time we use the event struct.
	
	Also made sure that all inputdrivers either always or never set the
	timestamp.
	
	Don't set the DIEF_BUTTONS flag in the linux_input driver, it is
	set by the core when the buttons field is calculated by
	fixup_button_event().

2002-07-16 16:46  neo

	* src/core/input.c: Also call fixup_button_event() for events of
	type DIET_AXISMOTION.  Fixes the buttonmask for motion events
	(needs some fixes to the input drivers that I'll commit next).

2002-07-16 13:31  neo

	* src/gfx/generic/generic.c: converted a C++ style comment to /*
	... */

2002-07-15 15:05  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Applied patch from Mike Pieper <mike@pieper-family.de> fixing
	locking of the surface buffers.

2002-07-15 14:28  neo

	* src/core/: fbdev.c, layers.c, layers.h: Applied a patch from Alex
	Song that changes SetSrcColorKey() to accept r g b values instead
	of a 32bit key and sets the device pointer in
	dfb_layers_hook_primary() and dfb_layers_replace_primary().

2002-07-12 18:20  dok

	* src/gfx/generic/generic.c: Added support for interlaced surfaces
	with seperate field buffers to all drawing and blitting functions.

2002-07-12 15:41  dok

	* include/directfb.h, src/gfx/generic/generic.c: Added DSDRAW_XOR
	;)

2002-07-10 17:10  dok

	* src/core/: layers.c, layers.h: Added "dfb_layers_replace_primary"
	which acts like "dfb_layers_hook_primary", but replaces the
	complete function table allowing drivers to use the default methods
	for surface allocation by setting function pointers to NULL.

2002-07-10 15:40  dok

	* include/directfb.h: Added DLOP_OPACITY which enables usage of the
	global alpha factor specified by SetOpacity(). This way drivers
	have the chance to forbid opacity changes during usage of the alpha
	channel or color keying.

2002-07-10 12:35  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Automatic grabbing mode for grab-only devices or flipped surfaces
	by Mike Pieper <mike@pieper-family.de>.

2002-07-10 12:33  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Some cleanups by Ville Syrjala <syrjala@sci.fi>.

2002-07-09 16:33  holger

	* include/directfb_keyboard.h,
	inputdrivers/linux_input/linux_input.c: some more keydefinitions,
	use 16bit only for all keycodes

2002-07-09 13:23  holger

	* include/directfb_keyboard.h, src/input/idirectfbinputdevice.c: -
	DIKI_XXXX are now Unicode keys in the private area - fixed
	GetKeyState table lookup

2002-07-08 16:53  dok

	* include/directfb_keyboard.h: Reverted Holger's change, because it
	breaks IDirectFBInputDevice::GetKeyState() and other things.

2002-07-08 10:50  holger

	* include/directfb_keyboard.h,
	inputdrivers/linux_input/linux_input.c, src/core/input.c: Rewrote
	the linux input keyboard driver, key mapping is done via table
	lookup now. You can distinguish DIKI_XXX codes by testing
	(DFB_KEY_TYPE(key) == DIKT_IDENTIFIER). We still have to implement
	keymap handling...

2002-07-06 22:13  dok

	* src/gfx/generic/generic.c: 32bit destination color keying fills
	fixed by Ville Syrjala <syrjala@sci.fi>.

2002-07-05 18:08  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Another set of patches from Ville Syrj\344l\344 <syrjala@sci.fi>
	adding planar YUV support and some fixes to the grabbing code.
	Thanks.

2002-07-04 15:56  dok

	* src/core/windows.c: Reset source surface pointer in window stack
	rendering state after blitting.

2002-07-03 21:56  dok

	* gfxdrivers/matrox/matrox_bes.c, include/directfb.h,
	src/core/layers.c: Enhanced documentation of DFBResult and
	DFBDisplayLayerCapabilities.  Renamed DLCAPS_INTERLACED_VIDEO to
	DLCAPS_DEINTERLACING.  Renamed DLOP_INTERLACED_VIDEO to
	DLOP_DEINTERLACING.

2002-07-03 18:16  dok

	* include/directfb.h, src/core/fusion/reactor.c: Added new surface
	capability DSCAPS_SEPERATED for usage with DSCAPS_INTERLACED.
	
	Removed top level indention of directfb.h which looks strange but
	saves five characters that can be used for documentation of enum or
	struct entries.
	
	Minor documentation beautifications, started to write complete
	sentences with a capital letter at the beginning and a full stop at
	the end ;-P
	
	Removed "universe has collapsed..." print after "while(true)" loop.

2002-07-03 15:22  dok

	* src/core/fusion/reactor.c: Don't print an error message for
	EINTR.

2002-07-02 19:03  dok

	* include/directfb_internals.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/idirectfb.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbpalette.c, src/display/idirectfbsurface.c,
	src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/windows/idirectfbwindow.c: Added
	macro DFB_ALLOCATE_INTERFACE_DATA saving 4-6 lines per file.  Added
	freeing "thiz->priv" to DFB_DEALLOCATE_INTERFACE saving 2 lines per
	file.

2002-07-02 18:21  dok

	* src/core/fusion/shmalloc/shmalloc.c: Unlink shared memory file
	during shutdown.

2002-07-02 17:22  dok

	* src/core/fbdev.c: Debug version compile fixes.

2002-07-02 17:13  dok

	* src/core/fbdev.c: Small fix for compiling without rgb332.

2002-07-02 17:10  dok

	* src/core/fbdev.c: If no depth is specified use 16bit if supported
	or keep current.

2002-07-02 17:05  dok

	* gfxdrivers/matrox/matrox_bes.c, src/idirectfb.c,
	src/core/fbdev.c, src/core/fbdev.h, src/core/gfxcard.h,
	src/core/layers.c, src/core/layers.h, src/core/state.c,
	src/core/surfaces.c, src/core/surfaces.h,
	src/display/idirectfbpalette.c, src/gfx/convert.h: Added surface
	notification for palette updates.  Added display layer driver
	function "SetPalette" called by the surface listener of the display
	layer core listening to the layer's surface.

2002-07-02 16:36  dok

	* include/directfb.h: s/id/window_id/

2002-07-02 15:58  dok

	* TODO, gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/neomagic/neo_overlay.c,
	include/directfb.h, src/core/fbdev.c, src/core/layers.c,
	src/core/layers.h, src/core/windows.c, src/core/windows.h,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/windows/idirectfbwindow.c: Cleaned up vertical retrace handling
	by passing the flipping flags to the driver (with
	DSFLIP_WAITFORSYNC eventually set).

2002-07-02 11:45  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	More work on grabbing support by Ville Syrjala <syrjala@sci.fi>.

2002-07-01 18:46  neo

	* inputdrivers/linux_input/Makefile.am: Added input_fake.h to
	libdirectfb_linux_input_la_SOURCES.

2002-07-01 16:44  holger

	* inputdrivers/linux_input/: input_fake.h, linux_input.c: use
	<input_fake.h> for definitions missing in <linux/input.h>

2002-07-01 13:51  neo

	* src/: directfb.c, idirectfb.h, interface.c,
	interface_implementation.h: updated copyright headers

2002-07-01 00:06  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h, matrox_state.c: Use flags
	instead of booleans for each state entity.

2002-06-30 01:40  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	fixed a typo

2002-06-28 18:57  neo

	* include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c: Use
	one bit of DFBSurfacePixelFormat to indicate if the format has an
	alpha channel. Added new macro DFB_PIXEL_FORMAT_HAS_ALPHA().
	
	Use the new macro from the GIF ImageProvider.

2002-06-27 23:09  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	An own FrameThread implementation for each capturing method, thanks
	again.

2002-06-27 21:34  dok

	* README,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Video provider now detects system only surfaces and does grabbing.
	
	Thanks to Ville Syrj\344l\344 <syrjala@sci.fi>

2002-06-27 16:46  neo

	* src/misc/gfx_util.c: Nicer (and slightly faster) rounding code
	that yields the same result.

2002-06-27 12:41  neo

	* src/misc/gfx_util.c: A better fix for the rounding errors on
	scaling.

2002-06-27 01:04  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	Do the right thing when rendering to surfaces with alpha channel. 
	More code cleanup.

2002-06-26 20:34  dok

	* include/directfb.h, src/idirectfb.c, src/core/Makefile.am,
	src/core/coretypes.h, src/core/palette.c, src/core/palette.h,
	src/core/surfaces.c, src/core/surfaces.h,
	src/core/fusion/shmalloc.h, src/display/Makefile.am,
	src/display/idirectfbpalette.c, src/display/idirectfbpalette.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/gfx/generic/generic.c, src/misc/gfx_util.c, tools/gendoc.pl:
	Initial version of color lookup table support.
	
	Added DSPF_LUT8.
	
	Added IDirectFBSurface::GetPalette().
	
	Added IDirectFBPalette with - GetSize() - SetEntries() -
	GetEntries()
	
	Support by the software driver is in a very early stage.
	
	Played around with the method table grids of generated interface
	pages.

2002-06-26 19:46  neo

	* src/misc/gfx_util.c: Looks as if we had a rounding error in
	bilinear_make_fast_weights().  This change seems to fix it but it
	needs more testing.

2002-06-26 19:09  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	Added a function that searches for a color that is not in the
	colormap and tries to pick one that is far from all used colors.
	Use it to find a suitable colorkey to use for the transparent
	pixels.

2002-06-26 17:27  holger

	* configure.in, inputdrivers/Makefile.am: build linux_input driver
	only when ./configure was called with --enable-linux-input

2002-06-26 17:14  holger

	* configure.in: arrgh!

2002-06-26 17:07  holger

	* inputdrivers/: Makefile.am, linux_input/.cvsignore,
	linux_input/Makefile.am, linux_input/linux_input.c: - input driver
	for /dev/input/eventX devices - you have to explicitly disable old
	keyboard and mouse input drivers   using the disable-module option
	if you don't want to get these events twice...

2002-06-26 16:18  dok

	* tools/ipc_cleanup: Applied patch from Daniel Mack
	<daniel@convergence.de> to avoid usage information printed out.

2002-06-26 15:08  dok

	* acconfig.h, patches/vmwarefb-0.5.0-linux-2.4.19-pre8.patch.gz:
	reremoved

2002-06-26 14:29  holger

	* src/: core/core.c, misc/conf.c, misc/conf.h: You can disable
	modules now by specifying disable-module=<modulename>.	We need
	this for the generic linux /dev/input/eventX driver

2002-06-26 04:00  dok

	* src/display/idirectfbsurface_window.c: Handling DSFLIP_BLIT now.

2002-06-24 20:50  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	last try...

2002-06-24 19:56  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/surfacemanager.c: Trying to synchronize buffer
	deallocation and stopping of DMA.

2002-06-24 19:36  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Removed CSNF_VIDEO from flags causing the video to stop.

2002-06-24 19:22  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Use surface listener to stop DMA when surface is destroyed or
	resized.

2002-06-24 14:36  neo

	* configure.in: Use the values yes or no for $have_x86 in order to
	get $have_mmx defined correcly. Problem spotted by Wout Mertens
	<wmertens@cisco.com>.

2002-06-24 00:16  dok

	* src/windows/idirectfbwindow.c: Added sanity check to Resize().

2002-06-23 22:31  dok

	* include/directfb.h, src/gfx/generic/generic.c: Added
	pre/demultiplication to drawing functions.

2002-06-23 20:49  dok

	* src/core/fonts.c: Destroy state during destruction of font,
	otherwise listeners will crash.

2002-06-21 02:02  neo

	* tools/gendoc.pl: Updated the copyright notice added by gendoc.

2002-06-20 17:57  neo

	* directfb-internal.pc.in: Made DirectFB-Internal require the exact
	same version of DirectFB.

2002-06-20 17:30  dok

	* configure.in, include/directfb.h, src/core/layers.c,
	src/core/layers.h, src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c: Added
	IDirectFBDisplayLayer::GetWindow() returning an interface to an
	existing window identified by its window id.
	
	Increased version number to 0.9.13.

2002-06-19 23:06  neo

	* gfxdrivers/savage/Makefile.am: Added savage_bci.h to SOURCES.

2002-06-19 22:58  neo

	* ChangeLog, NEWS: Updated ChangeLog and NEWS for 0.9.12 release.

2002-06-19 22:26  neo

	* include/directfb.h, interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	src/core/fonts.c, src/core/gfxcard.c: Slightly improved description
	of IDirectFBFont API.
	
	Create glyph surfaces with with a height of ascender - descender
	instead of using font->height.
	
	Don't bail out if setting the encoding failed in the FreeType2 font
	provider. Users might want to use symbol fonts and should be
	allowed to do so (they just need to know what they're doing).

2002-06-19 21:49  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c: oops, one more
	place that needs to be adjusted

2002-06-19 21:41  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c: Corrected my
	last commit: Set height to 24 (vertical offset to next line).  Fix
	descender as well (it's supposed to be a negative value).

2002-06-19 21:37  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c: Set the font
	height to 24 for the default font. Font height is supposed to be
	the vertical advance to the next line.

2002-06-19 19:46  neo

	* README: Some smaller updates to the README.

2002-06-19 18:53  dok

	* README: Added Alex SONG <zzaleson@uqconnect.net>.

2002-06-19 18:40  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c, src/core/fonts.c,
	src/core/fonts.h, src/core/gfxcard.c: Removed global font_state and
	added state and pixel_format to the CoreFont.  Both are initialized
	to default values by dfb_font_create() but may be altered by the
	FontProvider. This gives the FontProviders control about glyph
	surface format and glyph blitting. This change makes it for example
	possible to write a FontProvider for ARGB fonts.

2002-06-19 16:20  neo

	* include/directfb_keyboard.h: added DIKS_EXIT and DIKS_SETUP

2002-06-19 14:51  neo

	* ChangeLog, NEWS: Updated ChangeLog. Started to summarize changes
	in 0.9.12.

2002-06-19 14:34  neo

	* gfxdrivers/savage/savage4.c: Applied a patch from Alex SONG
	<zzaleson@uqconnect.net> that fixes savage4SetState() for src
	colorkeying.

2002-06-19 14:13  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Only try to
	fallback to latin_1 encoding for FREETYPE_MINOR > 0 so we are
	backwards compatible with freetype-2.0.

2002-06-19 05:12  dok

	* BUGS: Removed two bugs ;)

2002-06-19 04:34  dok

	* gfxdrivers/matrox/: matrox.c, matrox_state.c: Use diffused alpha
	if source format is RGB32 to force the alpha values to 0xff.

2002-06-18 01:25  neo

	* src/gfx/generic/generic.c: Declared some local variables in inner
	loops as register variables.  Declared local variables in
	SET_ALPHA_PIXEL_ARGB as __u32;

2002-06-18 00:46  neo

	* src/gfx/generic/generic.c: Added macro
	SET_ALPHA_PIXEL_DUFFS_DEVICE() which implements Duff's device with
	a depth of 8. Use it for all but the RGB24
	Bop_a8_set_alphapixel_Aop_* functions.
	
	Undefined the SET_ALPHA_PIXEL_* macros after usage and removed lots
	of unneeded brackets.

2002-06-17 23:54  neo

	* src/gfx/generic/generic.c: More work on the
	Bop_a8_set_alphapixel_Aop_* functions. Use Cop instead of the color
	struct, cleanups.

2002-06-17 23:32  neo

	* src/gfx/generic/generic.c: Cleaned up
	Bop_a8_set_alphapixel_Aop_rgb[15|24|32], register variables
	locally. Gives 7% speedup in the 32bit case.

2002-06-17 21:30  dok

	* src/windows/idirectfbwindow.c: Wait for initial
	DWET_POSITION_SIZE event in IDirectFBWindow_Construct().

2002-06-17 19:49  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Only allocate
	memory for the kerning cache if the font has kerning information.

2002-06-17 19:30  dok

	* src/gfx/generic/generic.c: Fixed rendering pipeline setup for
	blended blitting for these cases: - destination blend is DSBF_ZERO,
	but source blend needs destination - destination blend is not
	DSBF_ONE and source blend needs destination

2002-06-17 18:07  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Select Unicode
	encoding for loaded face. If that fails, try Latin1.  If Latin1
	also fails, refuse to load the font.

2002-06-17 17:25  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: FT_Get_Char_Index()
	returns FT_UInt so use that instead of int.

2002-06-17 10:09  dok

	* TODO: vsync handling during flip operations needs a
	cleanup/rework

2002-06-17 08:53  dok

	* gfxdrivers/matrox/matrox_state.c: Fixed a bug in ALPHACTRL
	blitting setup, output alpha channel was wrong when blending was
	used with destination blend function DSPF_ZERO.
	
	Corrected ALPHACTRL drawing setup. Use diffused instead of texture
	alpha and select an alpha write mode other than FCOL. Doesn't fix a
	known bug but should be correct now for drawing with DSDRAW_BLEND
	to surfaces with an alphachannel.

2002-06-15 21:55  dok

	* src/idirectfb.c: Added 8 bit support to
	IDirectFB::SetVideoMode().

2002-06-14 16:49  dok

	* src/gfx/generic/generic.c: Brutally optimized A8 font rendering
	for RGB16 ;-)
	
	P3 800E, G450 SDRAM, no-hardware, gcc-3.1
	
	59 -> 67 MChars/sec (video memory) 275 -> 326 MChars/sec (system
	memory)
	
	Can be done for other formats as well.

2002-06-14 15:32  dok

	* include/directfb.h, src/gfx/generic/generic.c: Added
	DFB_NUM_PIXELFORMATS macro.  Use it for the generic driver's
	function tables.

2002-06-14 15:11  dok

	* src/: gfx/generic/generic.c, misc/gfx_util.c: Check source format
	in gAcquire().	Use ONCE in rgba_to_dst_format() to avoid tons of
	error messages during image loading to unsupported destination
	formats.

2002-06-14 14:58  dok

	* src/: core/coredefs.h, gfx/generic/generic.c: Implemented planar
	YUV blitting support in software driver.  Minor code cleanup,
	better support checks and cleanup fixes in gAcquire.  "ONCE"
	messages are independent of debug mode now.

2002-06-14 05:48  dok

	* inputdrivers/lirc/lirc.c: qsort needs an extra compare function
	getting two entries instead of a string and an entry, works now.

2002-06-14 02:31  dok

	* gfxdrivers/matrox/matrox_state.c: Don't use videoalpha mode if
	dst_blend is zero.

2002-06-13 19:14  dok

	* src/gfx/generic/: Xacc_blend_invsrcalpha_MMX.s,
	Xacc_blend_srcalpha_MMX.s: Fixed off by one bug in mmx version of
	Xacc_blend_invsrcalpha.  Minor optimization in setup code.

2002-06-13 17:45  dok

	* src/core/: core.c, sig.c: Fixed warnings if sighandler is
	disabled.

2002-06-13 17:06  dok

	* src/: core/coredefs.h, core/surfaces.c, core/windows.c,
	core/windows.h, core/fusion/reactor.c, windows/idirectfbwindow.c:
	Fixed concurrent destructions of windows.  Added some debug output.

2002-06-13 13:35  dok

	* src/misc/fbdebug.c: removed the voodoo1 workaround

2002-06-13 13:30  dok

	* src/misc/conf.h: removed obsolete FIXME

2002-06-12 19:53  neo

	* src/core/layers.c: Fixed parameters for SetConfiguration call in
	dfb_layers_resume().

2002-06-12 10:31  dok

	* gfxdrivers/matrox/matrox_bes.c: Implemented besFlipBuffers()
	which should have been implemented in 0.9.11 ;(

2002-06-11 14:18  neo

	* inputdrivers/lirc/lirc.c: Include directfb_keynames.h instead of
	defining our own array.  Sort the keynames array by names on first
	call of lirc_parse_line(), then use bsearch to lookup the name.

2002-06-10 22:18  dok

	* inputdrivers/keyboard/keyboard.c: Replace currency sign (0xa4) by
	euro currency sign (0x20ac).

2002-06-10 20:59  neo

	* include/directfb.h, src/display/idirectfbsurface.c,
	src/media/idirectfbfont.c: Use unsigned int for Unicode glyph
	indices.  Added DSFT_BOTTOM to DFBSurfaceTextFlags.  Fixed bug in
	IDirectFBFont::GetGlyphExtents.  Made
	IDirectFBFont::GetGlyphExtents() and IDirectFBFontGetKerning() fill
	in zero values if the glyph isn't found and return DFB_OK.

2002-06-10 20:12  dok

	* include/directfb.h: Added DIDID_ANY for devices not prefering a
	primary device id.

2002-06-10 20:08  dok

	* include/directfb.h: Added DIDTF_VIRTUAL for virtual input
	devices.

2002-06-10 19:43  neo

	* include/directfb.h, src/core/gfxcard.c, src/core/gfxcard.h,
	src/display/idirectfbsurface.c, src/media/idirectfbfont.c: Added
	IDirectFBFont::GetKerning() and IDirectFBFont::GetGlyphExtents(). 
	Added IDirectFBSurface::DrawGlyph().  This should enable users to
	implement their own simple text layout engine.

2002-06-10 15:04  neo

	* include/directfb.h: fixed typo in comment

2002-06-10 14:42  neo

	* configure.in: Made configure warnings more visible. Added extra
	warnings if PNG, JPEG or FreeType2 support is missing.

2002-06-10 12:11  dok

	* README: Added cross compiling notes by Scott A McConnell
	<samcconn@cotw.com>.

2002-06-10 11:04  dok

	* src/core/input.c: Fixed modifier mask problems that occured if
	the left and right version of a modifier were both pressed.

2002-06-10 10:06  dok

	* src/core/input.c: Check for FUSION_FAKE instead of DFB_MULTI,
	could have caused problems with multi application core when slaves
	need to fetch a keymap entry.

2002-06-10 09:13  dok

	* include/directfb.h: Added structs DFBPoint and DFBDimension that
	are not used yet by DirectFB but are already useful for
	applications and libraries.

2002-06-09 06:43  dok

	* src/idirectfb.c: Make sure DFB_IDNOTFOUND is returned if
	GetDisplayLayer() doesn't find the id.

2002-06-09 04:36  dok

	* include/directfb.h, src/core/input.c, src/core/windows.c,
	src/input/idirectfbinputdevice.c: Added a mask of currently pressed
	buttons to input and window events.

2002-06-07 21:12  neo

	* src/misc/utf8.h: oops

2002-06-07 20:23  neo

	* src/misc/utf8.h: fixed dfb_utf8_next_char() (spotted by Holger
	Waechtler)

2002-06-07 20:05  neo

	* src/misc/utf8.h: Added inline function dfb_utf8_prev_char().

2002-06-07 18:27  dok

	* src/core/sig.c: Use sigaction instead of signal.

2002-06-07 18:26  neo

	* README: updated copyright

2002-06-07 17:57  dok

	* README: Updated Joachim Steiger's e-mail address.

2002-06-07 17:00  neo

	* src/directfb.c: Updated copyright notice in banner.

2002-06-07 14:17  dok

	* include/: Makefile.am, directfb_keyboard.h: Generate
	DFBKeyIdentifierNames, too.

2002-06-07 12:54  dok

	* include/directfb.h, src/gfx/generic/generic.c: Added experimental
	blitting flags DSBLIT_SRC_PREMULTIPLY, DSBLIT_DST_PREMULTIPLY and
	DSBLIT_DEMULTIPLY which can be used for complex blending operations
	which distinguish between premultiplied and non-premultiplied alpha
	channels.

2002-06-06 18:59  neo

	* include/directfb.h: Forced comments into 80 columns.

2002-06-06 15:38  neo

	* include/directfb.h: Improved description of
	IDirectFBFont::GetHeight().

2002-06-06 13:40  neo

	* src/input/idirectfbinputdevice.c: Applied patch from Ville
	Syrjl <syrjala@sci.fi> that fixes IDirectFBInputDevice_GetXY().

2002-06-05 23:52  dok

	* inputdrivers/keyboard/keyboard.c: Added second windows key as
	META_R, made the menu key SUPER_R.

2002-06-05 17:16  neo

	* configure.in, include/directfb_keyboard.h,
	inputdrivers/keyboard/keyboard.c, src/core/input.c: Bumped version
	number to 0.9.12.  Added key identifiers for the remaining keys on
	a PC105 keyboard layout.

2002-06-05 04:37  dok

	* ChangeLog: Once more a fresh ChangeLog

2002-06-05 04:33  neo

	* tools/: Makefile.am, README: Added dfb_static_build_example and
	ipc_cleanup to EXTRA_DIST.  Explained their purpose in the README.

2002-06-05 04:20  dok

	* ChangeLog, mkchlog: Use hash table with predefined real names and
	e-mail addresses for short names.

2002-06-05 04:02  dok

	* fb.modes, patches/README.savagefb: Removed 32bit modes that were
	copies of the 16bit modes.  Fixed typo.

2002-06-05 03:47  dok

	* ChangeLog, NEWS, include/directfb_keyboard.h,
	inputdrivers/keyboard/keyboard.c: - Fixed keypad decimal with
	NumLock active.  - Updated NEWS and ChangeLog.

2002-06-05 02:27  dok

	* configure.in, include/.cvsignore, include/Makefile.am:
	'directfb_keynames.h' will be generated and installed for
	applications.  It's a mapping from a key symbol to its name.

2002-06-05 00:50  neo

	* README.screenshots, docs/directfbrc.5.in: Updated
	README.screenshots.  Added ppm(5) to SEE ALSO section in
	directfbrc(5).

2002-06-04 23:51  dok

	* docs/directfbrc.5.in, src/directfb.c, src/gfx/convert.h,
	src/misc/conf.c, src/misc/conf.h: Added option
	"screenshot-dir=<directory>" that enables PPM screen dumps when the
	<Print> key is pressed.

2002-06-04 21:30  neo

	* include/directfb_keyboard.h: slightly reordered key identifiers

2002-06-04 21:10  dok

	* src/core/input.c: Added Meta/Super/Hyper  key_id <-> key_symbol
	translation.

2002-06-04 21:06  neo

	* include/directfb_keyboard.h, inputdrivers/keyboard/keyboard.c,
	inputdrivers/lirc/lirc.c, src/core/input.c, src/core/windows.c:
	Renamed DIKS_*LOCK to DIKS_*_LOCK and DIKI_*LOCK to DIKI_*_LOCK. 
	Renamed DIKI_CTRL_* to DIKI_CONTROL_*.	Added left/right versions
	of DIKI_ALT, DIKI_META, DIKI_SUPER, DIKI_HYPER.

2002-06-04 20:40  neo

	* src/misc/: utf8.c, utf8.h: Cleaned up dfb_utf8_get_char(), make
	it use the dfb_utf8_skip table.  Declare the dfb_utf8_skip table as
	const.

2002-06-04 19:58  dok

	* include/directfb_keyboard.h, inputdrivers/keyboard/keyboard.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/input.c, src/core/windows.c, src/gfx/generic/generic.c:
	Added support for left/right shift/control via identifiers.  Added
	support for special pc105 keyboards (adding Meta and Super).  Fixed
	warning in v4l provider with gcc 3.1.  Removed commented out and
	finally obsolete line in generic driver.

2002-06-04 19:28  neo

	* include/directfb_keyboard.h: Added more dead keys as found in
	X11. Ordered dead keys alphabetically.

2002-06-04 18:37  dok

	* TODO: some day CLUT/ALUT support would be nice

2002-06-04 18:35  dok

	* TODO: Removed keycode TODO.

2002-06-04 10:30  dok

	* src/core/fbdev.c: Two minor changes that help a lot getting
	DirectFB running for everyone: - Always 8 bit modes to the mode
	list, too, depth of fb.modes is ignored anyway.  - Default to 16
	bit if no depth is specified and first mode in fb.modes is   8 bit
	while RGB332 support is not compiled in.
	
	The only way to have it not running now is to explicitly set "depth
	= 8" in the configuration without support for RGB332.

2002-06-04 09:50  dok

	* src/core/vt.c: #if 0'ed old code, added 40ms sleep after shutdown
	vt switch, too.

2002-06-04 09:16  dok

	* src/core/: Makefile.am, core.c, vt.c: Commented out 'normal'
	errors at startup, VT rewrite after release ;( Added time and date
	when core.c got built to initialization output.

2002-06-04 08:40  dok

	* gfxdrivers/matrox/matrox_state.c: Little tweak for format
	conversion blits (163 -> 192 MPixel/sec on G550).

2002-06-04 06:44  dok

	* include/directfb_keyboard.h, inputdrivers/keyboard/keyboard.c,
	src/directfb.c: - Added DIKS_BREAK.  - Ctrl+Alt+Break sends a
	SIGINT now (like Ctrl+Alt+BackSpace a while ago).

2002-06-04 02:09  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Return DFB_UNSUPPORTED in PlayTo if destination is double buffered.
	 Increase buffer's video instance locking counter, buffer is
	sticked to video memory then.

2002-06-03 22:04  neo

	* NEWS, interfaces/IDirectFBFont/idirectfbfont_ft2.c: Store cached
	kerning values as 16:15:1. Shouldn't be relevant but makes more
	sense.	Updated NEWS file.

2002-06-03 21:07  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/misc/memcpy.c: Fixed alpha channel detection in
	GetImageDescription, libpng seems to want pointers to width, height
	and bpp, too.
	
	Do some more cycles for memcpy test.

2002-06-03 20:06  neo

	* src/core/gfxcard.c: dfb_gfxcard_state_check(): Always check front
	and back buffer policies and set acceleration bits accordingly.

2002-06-03 13:39  neo

	* src/display/idirectfbsurface.c: Need to set SMF_COLOR not
	SMF_DRAWING_FLAGS to indicate the color change in
	IDirectFBSurface_Clear().

2002-06-03 12:32  neo

	* src/: display/idirectfbsurface.c, gfx/clip.c, gfx/clip.h: In
	IDirectFBSurface_Clear() pass a copy of data->area.current to
	dfb_gfxcard_fillrectangle() since the latter modifies the
	rectangle.
	
	Added more const statements to the internal clip API to make it
	easier to understand what the functions do.

2002-06-03 11:52  neo

	* src/misc/: util.c, util.h: Declared parameters that are not
	changed as const. Might help the compiler, definitely helps the
	developers.

2002-06-02 16:41  neo

	* src/core/gfxcard.c: Check the dimensions of the rectangle passed
	to dfb_gfxcard_tileblit().  If an invalid rectangle is passed,
	print a BUG warning and return instead of going into an endless
	loop.

2002-06-01 08:07  dok

	* include/directfb.h, src/display/idirectfbsurface.c: Added
	IDirectFBSurface::Clear(), see the documentation details.

2002-06-01 00:44  dok

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Reduced kerning
	cache size to 33% by adding ":20, :11 and :1" to the fields.

2002-06-01 00:09  dok

	* src/core/layers.c: fixed warning

2002-05-31 02:27  dok

	* src/core/: layers.c, surfaces.c, surfaces.h: Added function by
	Antonino Daplas, changing the buffermode of layers may work now,
	untested.

2002-05-30 17:06  dok

	* src/gfx/generic/generic.c: Sacc_to_Aop_rgb16 does aligned writes
	now, gives 1-3% on my Intel machine.  Please test "df_dok
	--fill-rect-blend", add "--dfb:no-mmx" on machines with MMX.  Also
	try the difference in system memory with "--system".

2002-05-30 13:14  dok

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Added caching of
	kerning values for characters from 32 to 127.
	
	The cache is about 100kb, but it gives a reasonable boost for font
	rendering in system memory or hardware accelerated. We could make
	it configurable.
	
	"df_dok --draw-string --system" went from ~305 KChars to ~358
	KChars on an Athlon 1.33GHz. I guess the boost will be even bigger
	on ARM 50MHz with a G200.
	
	Using A8 fonts, that look well now, on an Athlon 1.33GHz with a
	G550:
	
	Anti-aliased Text		       3.00 secs (  945.85
	KChars/sec)
	
	A bit smaller font and we have a million anti aliased characters
	per second ;)

2002-05-30 11:22  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h, matrox_state.c, regs.h:
	argb-font is no longer required on G400 and above!
	
	Fixed A8 font rendering by enabling "Inverted Decal information"
	for A8 ;) (by the time I get used to those lighting flow charts)
	
	If G200 is detected, argb-font is set automatically, there's no
	reason anymore to set it manually the configuration at all!
	
	Set proper minify/magnify threshold, irrelevant change, but be
	correct ;)
	
	Fixed log2 for values that are a power of two, didn't change
	anything though.

2002-05-30 07:24  dok

	* inputdrivers/keyboard/keyboard.c: Fixed Delete on keypad.

2002-05-29 22:12  dok

	* include/directfb.h, src/core/input.c, src/core/input.h,
	src/input/idirectfbinputdevice.c: Added
	IDirectFBInputDevice::GetKeymapEntry() which fetches a
	DFBInputDeviceKeymapEntry for a specific hardware keycode.

2002-05-29 13:37  neo

	* .cvsignore: Added autom4te.cache to .cvsignore (for
	automake-2.5x).

2002-05-29 13:19  neo

	* patches/: Makefile.am, README.savagefb,
	savagefb-0.4.0-linux-2.4.17.patch.bz2: Added 0.4.0 version of
	savagefb that is supposed to add acceleration for fills and blits.
	Unfortunately it doesn't yet work correctly. Don't use unless you
	want to work on it.

2002-05-29 05:54  dok

	* configure.in, gfxdrivers/Makefile.am,
	gfxdrivers/savage/.cvsignore, gfxdrivers/savage/Makefile.am,
	gfxdrivers/savage/mmio.h, gfxdrivers/savage/savage.c,
	gfxdrivers/savage/savage.h, gfxdrivers/savage/savage2000.c,
	gfxdrivers/savage/savage2000.h, gfxdrivers/savage/savage3d.c,
	gfxdrivers/savage/savage3d.h, gfxdrivers/savage/savage4.c,
	gfxdrivers/savage/savage4.h, gfxdrivers/savage/savage_bci.h,
	gfxdrivers/savage/savage_streams_old.c,
	gfxdrivers/savage/savage_streams_old.h: Savage driver release,
	untested for a long time.

2002-05-29 05:11  dok

	* src/core/input.c: Added prototypes.

2002-05-29 05:00  dok

	* src/core/input.c: Use shcalloc() for the keymap and retrieve all
	entries once during initialization if multi app core is used.

2002-05-29 01:48  dok

	* docs/html/Makefile.am, include/directfb.h,
	include/directfb_keyboard.h,
	inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	inputdrivers/sonypi/sonypi.c, src/core/input.c, src/core/input.h,
	src/core/input_driver.h, src/input/idirectfbinputdevice.c,
	tools/gendoc.pl: Added keymap support to input core.
	
	Added a driver function to retrieve a complete keymap entry for a
	keycode.
	
	Keyboard driver event thread is much simpler now, it passes the
	hardware keycode and if it has been pressed or released to the
	input core via dfb_input_dispatch() and the input core looks up
	symbol and identifier and handles modifier/lock masks. The keyboard
	driver then simply writes back the lock state to the LEDs.
	
	Added DFBInputDeviceKeymapEntry that will soon be useful with some
	API calls.

2002-05-28 19:52  neo

	* autogen.sh: oops, we need to call aclocal of course.

2002-05-28 19:46  neo

	* autogen.sh: Cleaned up autogen.sh and improved its output in case
	of problems.

2002-05-28 03:36  dok

	* directfb-config.in, src/core/input.c: Fixed directfb-config. 
	Converted debug printf to DEBUGMSG.

2002-05-28 03:06  neo

	* configure.in: Use the third argument of AC_DEFINE to pass
	descriptions for our defines.  Removed unneeded acconfig.h. Works
	without warnings with autoconf versions 2.13 and 2.53 now.

2002-05-28 01:39  dok

	* src/core/input.c: Last commit included key_id to key_symbol
	translation (id_to_symbol) and generic handling of modifier and
	lock mask.

2002-05-28 01:37  dok

	* include/directfb_keyboard.h, src/core/input.c: Added DIKS_BEGIN.
	
	Removed key pad identifiers that are physically the same key as the
	numbers.

2002-05-27 21:54  dok

	* inputdrivers/keyboard/keyboard.c: really fixed now

2002-05-27 21:48  dok

	* inputdrivers/keyboard/keyboard.c: Fixed PageUp/Down, Insert,
	Delete.

2002-05-27 21:26  dok

	* inputdrivers/keyboard/keyboard.c: Fixed backspace, why does the
	kernel return 0x7f for backspace?

2002-05-27 21:04  dok

	* include/directfb_keyboard.h: DFB_LOWER/UPPER_CASE was wrong

2002-05-27 19:42  neo

	* include/directfb_keyboard.h, inputdrivers/keyboard/keyboard.c,
	inputdrivers/lirc/lirc.c, src/core/input.c: Completed the PAGE_UP,
	PAGE_DOWN, ... changes.  Removed DIKS_KP_* symbols and NUMPAD
	DeviceKeyType. The numpad keys should return the same symbols as
	the 'normal' keys they respond to.

2002-05-27 19:10  neo

	* include/directfb_keyboard.h: PAGEUP -> PAGE_UP, PAGEDOWN ->
	PAGE_DOWN.  Same for VOLUME[UP|DOWN] and CHANNEL[UP|DOWN].

2002-05-27 19:00  dok

	* include/directfb_keyboard.h: fixed macro compilation

2002-05-27 18:58  dok

	* include/directfb_keyboard.h: Added DFB_LOWER_CASE and
	DFB_UPPER_CASE which can be wrapped around a symbol.

2002-05-27 17:51  dok

	* configure.in, directfb-internal.pc.in, directfb.pc.in,
	gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/ati128/ati128_state.c, gfxdrivers/ati128/ati128_state.h,
	gfxdrivers/ati128/mmio.h, gfxdrivers/ati128/regs.h,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/matrox/matrox_state.h, gfxdrivers/matrox/mmio.h,
	gfxdrivers/matrox/regs.h, gfxdrivers/neomagic/neo2200.c,
	gfxdrivers/neomagic/neo_overlay.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/neomagic/neomagic.h, gfxdrivers/nvidia/nvidia.c,
	gfxdrivers/nvidia/nvidia.h, gfxdrivers/tdfx/tdfx.c,
	gfxdrivers/tdfx/tdfx.h, include/Makefile.am, include/directfb.h,
	include/directfb_internals.h, include/directfb_keyboard.h,
	include/directfb_version.h.in,
	inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	inputdrivers/sonypi/sonypi.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/core.c, src/core/core.h, src/core/coredefs.h,
	src/core/coretypes.h, src/core/fbdev.c, src/core/fbdev.h,
	src/core/fonts.c, src/core/fonts.h, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/graphics_driver.h, src/core/input.c,
	src/core/input.h, src/core/input_driver.h, src/core/layers.c,
	src/core/layers.h, src/core/sig.c, src/core/sig.h,
	src/core/state.c, src/core/state.h, src/core/surfacemanager.c,
	src/core/surfacemanager.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/vt.c, src/core/vt.h,
	src/core/windows.c, src/core/windows.h, src/core/fusion/arena.c,
	src/core/fusion/arena.h, src/core/fusion/fusion.c,
	src/core/fusion/fusion.h, src/core/fusion/fusion_internal.h,
	src/core/fusion/fusion_shmalloc.c, src/core/fusion/fusion_types.h,
	src/core/fusion/list.c, src/core/fusion/list.h,
	src/core/fusion/lock.c, src/core/fusion/lock.h,
	src/core/fusion/property.c, src/core/fusion/property.h,
	src/core/fusion/reactor.c, src/core/fusion/reactor.h,
	src/core/fusion/ref.c, src/core/fusion/ref.h,
	src/core/fusion/shmalloc.h, src/core/fusion/util.c,
	src/core/fusion/shmalloc/mstats.c,
	src/core/fusion/shmalloc/shcalloc.c,
	src/core/fusion/shmalloc/shfree.c,
	src/core/fusion/shmalloc/shmalloc.c,
	src/core/fusion/shmalloc/shmalloc_internal.h,
	src/core/fusion/shmalloc/shmemalign.c,
	src/core/fusion/shmalloc/shrealloc.c,
	src/core/fusion/shmalloc/shvalloc.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbdisplaylayer.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_layer.h,
	src/display/idirectfbsurface_window.c,
	src/display/idirectfbsurface_window.h, src/gfx/clip.c,
	src/gfx/clip.h, src/gfx/convert.c, src/gfx/convert.h,
	src/gfx/util.c, src/gfx/util.h, src/gfx/generic/generic.c,
	src/gfx/generic/generic.h, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c,
	src/input/idirectfbinputdevice.h, src/media/idirectfbfont.c,
	src/media/idirectfbfont.h, src/media/idirectfbimageprovider.h,
	src/media/idirectfbvideoprovider.h, src/misc/conf.c,
	src/misc/conf.h, src/misc/cpu_accel.c, src/misc/cpu_accel.h,
	src/misc/fbdebug.c, src/misc/fbdebug.h, src/misc/gfx_util.c,
	src/misc/gfx_util.h, src/misc/mem.c, src/misc/mem.h,
	src/misc/memcpy.c, src/misc/memcpy.h, src/misc/tree.c,
	src/misc/tree.h, src/misc/utf8.c, src/misc/utf8.h, src/misc/util.c,
	src/misc/util.h, src/windows/idirectfbwindow.c,
	src/windows/idirectfbwindow.h, tools/gendoc.pl,
	tools/raw15toraw24.c, tools/raw16toraw24.c, tools/raw32toraw24.c:
	Adding sophisticated keycode/keysymbol handling to DirectFB for
	more sophisticated applications like XDirectFB and the new keymap
	stuff in GDK.  Writing input drivers for keyboards will also be
	easier.
	
	There are to types of key mappings, a basic one (the one before)
	which is suited for games and an advanced one for applications
	which need full coverage of the Unicode 3.x character space and the
	ability to query the keyboard layout.
	
	The DFBInputDeviceKeyIdentifier is now contained in "event.key_id"
	instead of "event.keycode". "event.key_code" is the hardware
	keycode which is usually not of interest.
	
	A new enum DFBInputDeviceKeySymbol is a super-set of the Unicode
	3.x character space which is compatible to Latin-1, so "key_ascii"
	has been removed in favor of "event.key_symbol".
	
	DirectFB header files (which include "directfb_keyboard.h" now) are
	installed to "$prefix/include/directfb/". Applications honoring the
	CFLAGS within the pkg-config file should have no problem with that.
	
	Updated all copyright headers.
	
	The keymap stuff is still work in progress, but the functionality
	to have all applications running again already exists.
	
	Short porting instructions: - Replace keycode by key_id and DIKC by
	DIKI   and/or	replace keycode by key_symbol and DIKC by DIKS -
	Note that the remote control keys have been removed from the  
	basic mapping to reduce overhead - Note that the cursor keys in the
	advanced mapping have a DIKS_CURSOR prefix - Note that the letters
	have DIKS_SMALL and DIKS_CAPITAL prefixes

2002-05-26 02:51  dok

	* README, src/core/fbdev.c: Applied patch from Antonino Daplas
	<adaplas@users.sourceforge.net> checking for CGA/MDA emulation
	before polling for the vertical retrace.

2002-05-24 13:22  neo

	* docs/directfbrc.5.in, gfxdrivers/ati128/ati128.c,
	gfxdrivers/ati128/ati128_state.h, gfxdrivers/ati128/regs.h,
	gfxdrivers/matrox/matrox.c, gfxdrivers/neomagic/neomagic.c,
	inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/joystick/joystick.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	src/core/coredefs.h, src/core/surfacemanager.c, src/core/vt.c,
	src/core/fusion/fusion_internal.h, src/misc/conf.c,
	src/misc/cpu_accel.c: More work on the man-page.
	
	Converted C++ style comments to classic C comments where
	appropriate.  Searching for '//' should now only show parts of the
	code that need to be reviewed.

2002-05-24 10:51  dok

	* docs/directfbrc.5.in: Splitted desktop-buffer-mode text moving
	parts of it to the different modes.

2002-05-24 10:35  dok

	* BUGS: Added planar pixel format blitting bug and G550 blending to
	ARGB bug.

2002-05-24 10:26  dok

	* configure.in, inputdrivers/sonypi/sonypi.c: Removed unnecessary
	AC_SUBST.  Changed z axis delta for Jogdial to 1.

2002-05-24 00:07  dok

	* docs/directfbrc.5.in: Added a text to desktop-buffer-mode.

2002-05-23 22:27  neo

	* docs/directfbrc.5.in: more work on the man-page

2002-05-23 17:25  neo

	* docs/directfbrc.5.in, src/directfb.c, src/core/core.c,
	src/core/coredefs.h, src/core/vt.c, src/core/windows.c,
	src/gfx/generic/generic.c, src/misc/conf.c, src/misc/conf.h:
	Declare boolean config variables as bool. Renamed some no-variables
	to their positive counterparts. Added the possibility to use no-
	with lots of config variables.
	
	Changed "no-window-opacity" option to "translucent-windows".
	
	Changed the man-page accordingly.

2002-05-23 16:22  neo

	* docs/directfbrc.5.in: described more parameters

2002-05-22 20:39  dok

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Use
	metrics->height.

2002-05-22 18:03  neo

	* include/directfb.h, interfaces/IDirectFBFont/idirectfbfont_ft2.c:
	Added index field to FontDescription that allows to control which
	face is loaded from a font file that provides a collection of
	faces.

2002-05-22 15:56  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c: Implemented font
	probing in the FT2 font provider.

2002-05-21 00:19  dok

	* TODO, include/directfb.h, src/core/windows.c, src/core/windows.h,
	src/windows/idirectfbwindow.c: Added
	IDirectFBWindow::EnableEvents(mask) and DisableEvents(mask).

2002-05-20 21:53  dok

	* TODO: Added reallocate_surface() todo.

2002-05-20 21:47  dok

	* src/core/layers.c: Support DLBM_BACKVIDEO in generic
	allocate_surface() for layers.

2002-05-19 12:02  dok

	* src/core/: input.c, windows.c: Set event class in
	dfb_window_dispatch() and dfb_input_dispatch() to be sure.

2002-05-19 11:50  dok

	* src/windows/idirectfbwindow.c: Fixed IDirectFBWindow::Close()
	sending no event that got broken during introduction of
	IDirectFBEventBuffer.

2002-05-19 03:20  dok

	* patches/: Makefile.am,
	vmwarefb-0.5.2-linux-2.4.19-pre8.patch.bz2,
	vmwarefb-0.6.0-linux-2.4.19-pre8.patch.bz2: Console acceleration,
	fixes coexistence with X, removed VGA cruft (not needed).
	
	You need to add "video=vmware:noaccel" to use DirectFB and do a
	Power OFF, it's a bug in VMware which is fixed in the VMware that
	is not yet released ;)

2002-05-19 02:19  dok

	* src/core/fbdev.c: Align system memory back buffer pitch.

2002-05-18 04:10  neo

	* docs/directfbrc.5.in: documented more options

2002-05-17 22:15  neo

	* configure.in: Define BINARY_VERSION as the earliest version that
	this release has binary compatibility with. Use BINARY_VERSION in
	MODULEDIR. Don't a version number in INTERNALINCLUDEDIR.

2002-05-17 20:36  neo

	* configure.in, docs/.cvsignore, docs/Makefile.am,
	docs/directfbrc.5.in: First draft for a directfbrc(5) man page.
	Work in progress...

2002-05-17 17:56  dok

	* patches/Makefile.am: s/gz/bz2/

2002-05-17 17:56  dok

	* patches/: Makefile.am,
	vmwarefb-0.5.2-linux-2.4.19-pre8.patch.bz2: newer version

2002-05-17 17:54  dok

	* src/core/gfxcard.h: Forgot to increase the graphics driver abi
	version.

2002-05-17 17:52  dok

	* include/directfb.h, src/core/layers.c, src/core/layers.h,
	src/display/idirectfbdisplaylayer.c: Added
	IDirectFBDisplayLayer::GetLevel() and SetLevel() which can be used
	to query/change the z order of display layers. Added DLCAPS_LEVELS.

2002-05-14 18:38  dok

	* patches/: Makefile.am, vmwarefb-0.5.0-linux-2.4.19-pre8.patch.gz:
	VMware SVGA framebuffer driver to have DirectFB running under X in
	a window ;) Or fullscreen with XDGA (nearly as fast as native).
	
	http://master.dyndns.tv/vmwarefb.png
	http://master.dyndns.tv/vmwaredfb.png

2002-05-12 00:49  dok

	* src/core/windows.c: If the desktop buffer mode is backsystem,
	create system only window surfaces.

2002-05-12 00:34  dok

	* src/core/fbdev.c: Use fix_screeninfo.line_length after setting
	the mode to get the byte pitch instead of using the virtual
	resolution which may differ.

2002-05-10 21:03  dok

	* README, configure.in: Append version number to directories (e.g.
	'/usr/local/lib/directfb-0.9.11').  Thanks to Fredrik Hallenberg
	<hallon@lysator.liu.se>, the Debian package maintainer of DirectFB.

2002-05-10 20:27  dok

	* src/core/layers.c: Avoid locks during emergency shutdown, just
	turn off layers.

2002-05-10 01:06  dok

	* src/core/fbdev.c: fixed segfault on startup when no fb device is
	available

2002-05-08 02:29  dok

	* TODO, configure.in, include/directfb.h, src/core/gfxcard.c,
	src/core/windows.c, src/core/windows.h,
	src/windows/idirectfbwindow.c: Added
	IDirectFBWindow::SetStackingClass(). The default stacking class
	DWSC_MIDDLE. There are DWSC_LOWER and DWSC_UPPER, too. A window
	cannot be outside of its stacking class, so DWSC_MIDDLE windows are
	always above DWSC_LOWER windows and so on...

2002-05-06 19:10  count

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	set _BSD_SOURCE when using dietlibc - required for
	<linux/videodev.h>

2002-05-06 18:36  count

	* src/core/fusion/property.h: added missing include - required to
	compile with dietlibc

2002-05-04 14:13  dok

	* src/core/: fonts.c, gfxcard.c: dfb_gfxcard_drawstring() uses an
	extra state now instead of modifying the original state. This gives
	more performance for hardware accelerated text.

2002-05-04 07:40  dok

	* src/core/: gfxcard.h, input.h, layers.c, layers.h,
	fusion/fusion_types.h, fusion/list.h, fusion/lock.h,
	fusion/property.h, fusion/ref.c, fusion/ref.h: Implemented
	FusionRef for single app core.	Fixed warnings from last checkin
	(when compiling with single app core).

2002-05-04 06:46  dok

	* src/core/layers.c: Workaround works better now, fullscreen apps
	are now usable with multi app core.

2002-05-04 06:10  dok

	* src/misc/conf.c: Added "dont-catch" to usage string.

2002-05-04 06:06  dok

	* TODO, src/core/core.c, src/core/fbdev.c, src/core/fbdev.h,
	src/core/gfxcard.c, src/core/gfxcard.h, src/core/input.c,
	src/core/input.h, src/core/layers.c, src/core/layers.h,
	src/core/sig.c, src/core/sig.h, src/core/surfacemanager.c,
	src/core/surfaces.h, src/core/vt.c, src/core/vt.h,
	src/core/fusion/arena.c, src/core/fusion/arena.h,
	src/core/fusion/list.c, src/core/fusion/reactor.c, src/misc/conf.c,
	src/misc/conf.h: Added option "dont-catch" followed by a comma
	seperated list of signals that won't be caught by DirectFB's signal
	handler.
	
	Removed all takeover/transfer stuff from arena.
	
	Added 'emergency' indicator to exit functions of arena.
	
	Added 'emergency' indicators to all deinit/leave functions.

2002-05-02 21:08  dok

	* src/core/fusion/: Makefile.am, fusion_shmalloc.c, shmalloc.h,
	shmalloc/Makefile.am, shmalloc/mstats.c, shmalloc/shbrk.c,
	shmalloc/shcalloc.c, shmalloc/shfree.c, shmalloc/shmalloc.c,
	shmalloc/shmalloc_internal.h, shmalloc/shmemalign.c,
	shmalloc/shrealloc.c, shmalloc/shvalloc.c: Made all shmalloc
	functions internal _fusion_shmalloc functions.	Added new public
	functions locking the heap and calling the internal functions. 
	Cleaned up initialization.

2002-04-28 22:18  dok

	* src/core/fbdev.c: Disable console acceleration when joining a
	session, the framebuffer configuration of fusionees attaching from
	another tty is different.
	
	A small "dfbd" running as root but with a user's group now makes it
	possible to run XDirectFB completely without root privileges.

2002-04-28 21:57  dok

	* src/core/fusion/shmalloc/shbrk.c: Do chmod after creation because
	of umask.

2002-04-28 21:31  dok

	* src/core/fusion/shmalloc/shbrk.c: Create shared memory with
	permissions 0660 instead of 0600.

2002-04-28 21:25  dok

	* src/core/gfxcard.c: Fixed thinko in recent addition.

2002-04-28 20:58  dok

	* src/: core/gfxcard.c, core/fusion/fusion_internal.h,
	core/fusion/util.c, misc/conf.c, misc/conf.h, misc/mem.h: New
	option "videoram-limit=<amount-in-kb>".  Moved PAGE_ALIGN macro to
	'misc/mem.h'.

2002-04-27 23:31  andi

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: devfs support for libmpeg3 provider (try to open /dev/sound/dsp )

2002-04-27 21:09  neo

	* README, configure.in: Allow to disable libmpeg3 and flash
	providers at configure time.  Updated README.

2002-04-27 20:35  dok

	* README: added a table of all vesa modes

2002-04-27 20:22  dok

	* BUGS, TODO: minor update

2002-04-27 20:07  andi

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: bugfix: set correct audio format on big endian machines

2002-04-27 16:55  andi

	* configure.in, interfaces/IDirectFBVideoProvider/Makefile.am:
	removed libmpeg3 build hack, since the latest versions build a
	shared library.

2002-04-26 04:29  dok

	* src/core/: fbdev.c, layers.c, layers.h: Added
	'dfb_layers_hook_primary()' that allows drivers to
	wrap/extend/replace the implementation of the primary layer. The
	driver can provide an alternative implementation for one or more
	functions of the primary layer and gets the original content of the
	function table to use existing functionality.  The alternation
	grade ranges from "i-can-set-the-opacity" to "what-is-fbdev".
	
	It's now allowed to return zero in LayerDataSize(),
	primaryLayerDataSize() does that now, it had pseudo data before.

2002-04-26 00:06  dok

	* patches/: Makefile.am,
	savagefb-0.3.2-linux-2.4.19-pre7.patch.bz2: Savage Framebuffer
	driver release.

2002-04-22 18:57  dok

	* ChangeLog, NEWS: released

2002-04-22 04:38  dok

	* src/core/windows.c: Toggle sign of Z axis when converted to wheel
	event.	Multiply wheel value by 7 instead 4 when changing a window
	opacity.
	
	My wheel mouse seems to always send Z axis values between 1 and -1.
	 Is it normal? Do all wheel mice behave the same way? Is my mouse
	ill? Why are 4 bit used (5 including sign) for this axis if it
	never moves more than 1 or -1? This is my first day with a wheel
	mouse and I have no clue. The mouse isn't running fast enough to
	have the wheel produce electricity.

2002-04-21 01:09  dok

	* include/directfb.h, tools/gendoc.pl: minor optical changes

2002-04-21 00:49  dok

	* src/core/: core.c, gfxcard.c, fusion/shmalloc/shbrk.c: some more
	NULL pointer checks

2002-04-20 23:31  dok

	* include/directfb.h: Finished documentational summary of
	IDirectFB.

2002-04-20 21:18  dok

	* include/directfb.h: Added information about the primary surface
	and the cooperative level.

2002-04-20 20:37  andi

	* src/gfx/generic/generic.c: align destination in color keyed
	blits, instead of source. this is much faster since the destination
	lies most likely in video ram.

2002-04-20 20:11  dok

	* include/directfb.h, tools/gendoc.pl: Enhanced reference manual
	generation, wrote initial summary for IDirectFB.

2002-04-20 17:12  andi

	* src/gfx/generic/generic.c: tweaked recent code a bit, which
	further improves performance on intel with mtrr, all other
	benchmarks showed no difference, thats why they are not listed.
	
	df_dok --stretch-blit --dfb:no-hardware
	
	old new code PII-350	 Matrox G400  MTRR on  : 61.46 MPixel/sec
	
	new new code PII-350	 Matrox G400  MTRR on  : 68.13 MPixel/sec

2002-04-20 16:30  andi

	* src/gfx/generic/generic.c: optimized 16Bit StretchBlit in generic
	driver, see below for results:
	
	df_dok --stretch-blit --dfb:no-hardware
	
	old code:
	
	PII-350     Matrox G400  MTRR on : 60.09 MPixel/sec PII-350    
	Matrox G400  MTRR off:	9.93 MPixel/sec PPC G4-500  ATI Rage 128   
	     : 13.20 MPixel/sec
	
	new code:
	
	PII-350     Matrox G400  MTRR on  : 61.46 MPixel/sec PII-350	
	Matrox G400  MTRR off : 19.73 MPixel/sec PPC G4-500  ATI Rage 128  
	       : 26.33 MPixel/sec

2002-04-20 09:45  dok

	* src/core/fusion/reactor.c: Set reaction list pointer to NULL when
	freeing an orphaned node.

2002-04-20 07:10  dok

	* src/core/windows.c: Focus handling fixes and improvements in case
	a window appears/disappears.  More code cleanup and documentation.

2002-04-20 05:49  dok

	* src/: core/windows.c, core/windows.h,
	display/idirectfbsurface_window.c, windows/idirectfbwindow.c:
	Window stack code cleanups.  Better stack locking.

2002-04-19 22:55  dok

	* TODO: Shared memory reinitialization has been done.

2002-04-19 19:38  dok

	* src/core/: layers.c, fusion/shmalloc/shbrk.c: Free shared layer
	driver data in dfb_layers_shutdown().
	
	Changed fs type from "shm" to "tmpfs".
	
	Added temporary workaround for partly implemented FusionProperty in
	multi application core.

2002-04-19 14:10  neo

	* src/core/layers.c: (dfb_layers_shutdown) return if no layersfield
	exists. Fixes the crash that occured when
	dfb_core_deinit_emergency() is called during initialization before
	dfb_layers_initialize() was called.

2002-04-19 01:49  dok

	* src/core/fusion/shmalloc/shbrk.c: Fixed a very stupid code block
	moving error.

2002-04-18 22:48  dok

	* src/core/: fbdev.c, layers.c, surfacemanager.c, windows.c,
	fusion/fusion.c, fusion/shmalloc/shbrk.c,
	fusion/shmalloc/shmalloc_internal.h: Added more cleanup code, less
	IPC resource leakage after shutdown.  Commented code in some
	functions.  Added more assertions.

2002-04-18 19:39  dok

	* README, src/core/fusion/arena.c, src/core/fusion/fusion.c,
	src/core/fusion/fusion_internal.h,
	src/core/fusion/shmalloc/shbrk.c,
	src/core/fusion/shmalloc/shmalloc.c,
	src/core/fusion/shmalloc/shmalloc_internal.h: Added tmpfs mount
	point detection from Sebastian Klemke <packet@convergence.de>.
	
	The shared memory area is now reinitialized during startup if it
	already existed, but with no DirectFB apps running.
	
	Removed some unused code.

2002-04-17 13:03  neo

	* include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/directfb.c, src/input/idirectfbinputbuffer.c,
	src/misc/gfx_util.c, src/misc/gfx_util.h: Changed internal
	functions dfb_copy_buffer_32() and dfb_scale_linear_32() to take
	the destination pitch instead of the difference between width and
	pitch.
	
	Added a destination rectangle to
	IDirectFBImageProvider::RenderTo().
	
	Added IDirectFBEventBuffer::HasEvent().

2002-04-17 07:10  dok

	* src/gfx/generic/generic.c: Added missing incrementing of source
	pointer when doing alignment for colorkeyed blits. Made the source
	pointer the preferred aligned one.

2002-04-17 06:00  dok

	* TODO: Added details about surface manager and multi app core.

2002-04-17 05:04  dok

	* src/core/: fbdev.c, layers.c, fusion/property.c,
	fusion/property.h: Compilation fixes for multi application core.
	
	Unimplemented multi app FusionProperty is currently mapped to
	FusionSkirmish, that is ok for non-fullscreen apps.

2002-04-17 04:34  dok

	* src/core/windows.c: Debug version compiles again.

2002-04-16 12:06  neo

	* include/directfb.h: purely cosmetic change (indentation)

2002-04-15 17:19  dok

	* src/misc/util.c: Set width and height to zero if one of them is
	zero or less in dfb_rectangle_intersect and
	dfb_rectangle_intersect_by_unsafe_region.
	
	Added some comments.

2002-04-15 17:16  dok

	* src/display/: idirectfbsurface.c, idirectfbsurface_layer.c,
	idirectfbsurface_window.c: Be more tolerant in GetSubSurface. Allow
	width or height to be less than or equal to zero. The created sub
	surface will never do drawing/blitting.

2002-04-15 17:14  dok

	* src/core/windows.c: Let CapsLock key events through.

2002-04-15 12:12  neo

	* interfaces/: IDirectFBImageProvider/idirectfbimageprovider_png.c,
	IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp: Added
	missing includes and changed include order.

2002-04-15 00:37  dok

	* inputdrivers/keyboard/keyboard.c: Do not flash LEDs when holding
	Lock keys. Toggle once the key gets down.

2002-04-14 23:22  dok

	* include/directfb.h: Forgot a bit in DWOP_ALL.

2002-04-14 23:11  dok

	* TODO, include/directfb.h, src/core/layers.c, src/core/windows.c,
	src/core/windows.h, src/display/idirectfbdisplaylayer.c,
	src/windows/idirectfbwindow.c: Added new window options to disable
	moving, resizing, stacking and destruction by wm hack.
	
	Added window option that turns the window into a passive output
	only window (DWOP_GHOST). It will never get the focus or any input
	events, clicks will go through. This is useful for status OSDs or
	subtitling via transparent windows.
	
	Added IDirectFBWindow::GetOptions().

2002-04-14 20:49  dok

	* TODO: Bye bye probe context and font module probing TODOs.

2002-04-14 20:46  dok

	* include/directfb_internals.h,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/idirectfb.c, src/interface.c, src/media/Makefile.am,
	src/media/idirectfbfont.h, src/media/idirectfbimageprovider.h,
	src/media/idirectfbvideoprovider.h: Added probe context structs for
	all interfaces loaded from modules.  All parameters are stored in
	this struct giving more extendability.
	
	Added default probing function 'DFBProbeInterface' that can be used
	for 'DFBGetInterface' as the 'probe' function.	It simply calls the
	implementation's Probe function with the given context.
	
	Reduced code size in IDirectFB, cleaned up and documented code.

2002-04-14 12:16  dok

	* src/display/idirectfbdisplaylayer.c: Added sanity checks.

2002-04-14 12:11  dok

	* include/directfb.h, inputdrivers/ps2mouse/ps2mouse.c,
	src/core/layers.c, src/core/layers.h, src/core/windows.c,
	src/core/windows.h, src/display/idirectfbdisplaylayer.c: Added
	IDirectFBDisplayLayer::SetCursorAcceleration a la
	XChangePointerControl.	Removed acceleration from PS/2 driver, new
	acceleration is done in window stack code. Reading from input
	devices directly will return unaccelerated movements.

2002-04-14 11:04  dok

	* include/directfb.h, src/input/idirectfbinputdevice.c: Added
	DIAI_LAST and DIBI_LAST.  Added more argument checking in
	IDirectFBInputDevice, use new constants for array sizes.

2002-04-14 03:04  dok

	* include/directfb_internals.h: Fixed debug enabled builds.

2002-04-14 00:22  dok

	* include/directfb_internals.h,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/windows/idirectfbwindow.c: Added
	DFB_DEALLOCATE_INTERFACE saving two lines of code in the Destruct
	method of each interface.
	
	Cleaned up deallocation of interfaces after Construct failed. 
	Currently Construct methods have to call DFB_DEALLOCATE_INTERFACE
	before returning an error.

2002-04-13 01:42  dok

	* TODO, gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_overlay.c, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox.h, gfxdrivers/matrox/matrox_bes.c,
	gfxdrivers/neomagic/neo2200.c, gfxdrivers/neomagic/neo_overlay.c,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/neomagic/neomagic.h,
	include/directfb.h, inputdrivers/ps2mouse/ps2mouse.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/Makefile.am, src/directfb.c, src/idirectfb.c, src/core/core.c,
	src/core/coredefs.h, src/core/coretypes.h, src/core/fbdev.c,
	src/core/fbdev.h, src/core/gfxcard.c, src/core/gfxcard.h,
	src/core/graphics_driver.h, src/core/layers.c, src/core/layers.h,
	src/core/surfacemanager.c, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c, src/core/windows.h,
	src/core/fusion/Makefile.am, src/core/fusion/property.c,
	src/core/fusion/property.h, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface_layer.c, src/gfx/convert.h,
	src/gfx/util.h, src/misc/conf.c, src/misc/conf.h: Reworked display
	layer driver handling.
	
	Core structure DisplayLayer is no longer exported.  Added
	structures for driver functions and information.  Drivers call
	'dfb_layers_register' during initialization.
	
	Generalized surface creation/reallocation of display layers. 
	Display layer drivers are cleaner now.
	
	Cleaned up layering code and added missing functions.
	
	Experimental mouse acceleration in PS/2 driver.
	
	Added options "mode=<width>x<height>" and "depth=<bpp>" which
	select the startup mode and bit depth.
	
	Bit depths of fb.modes entries are ignored now when looking for a
	requested mode. However, the default bit depth is the one of the
	first entry.
	
	Added new fusion primitive 'FusionProperty' which is a lock that
	automatically chooses between lock and try_lock behaviour.  Two
	different locking methods can be used for short locks, e.g.  window
	stack repaints, and long locks, e.g. exclusive layer access.  Both
	methods wait if the property is 'leased' and fail if the property
	is 'purchased'. There's no implementation for the multi app core
	yet.

2002-04-11 03:51  dok

	* src/core/surfaces.c: Added missing unlocks in
	dfb_surface_reformat_surface().
	
	Return success in dfb_surface_reallocate_buffer() if video instance
	reallocation failed but a system instance exists.
	
	Window resizing deadlocks seem to have gone.

2002-04-05 16:35  dok

	* src/core/fbdev.c: Small fix for multi app core compiling.

2002-03-26 10:38  dok

	* src/core/surfaces.c: Tweaked surface buffer locking again, fixes
	the slow software stretch blit after hardware blitting the same
	surface. So it wasn't the missing '-O3'.

2002-03-26 05:16  dok

	* src/core/vt.c: Added a 40ms sleep after switching VTs. It seems
	to fix mouse problems when starting applications from XFree. I know
	it's a hack, but it should go away after VT handling rewrite.

2002-03-26 05:03  dok

	* configure.in: Enable -O3 for debug mode, too. Stretched blits are
	REALLY slow without it (1-2 MPixel).

2002-03-26 04:28  dok

	* inputdrivers/keyboard/keyboard.c, src/core/vt.c: Moved a bit code
	from keyboard driver to vt handling where it belongs.

2002-03-25 20:56  neo

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c, src/core/fonts.h,
	src/core/gfxcard.c, src/media/idirectfbfont.c: Added support for
	vertical kerning.  Release the FreeType2 library when the last font
	provider is released.

2002-03-24 21:11  dok

	* src/: core/vt.c, gfx/generic/generic.c: Fixed software driver
	pixelformat tables (NULL padding).
	
	Commented out old code in dfb_vt_shutdown.

2002-03-24 14:46  dok

	* inputdrivers/: keyboard/keyboard.c, ps2mouse/ps2mouse.c: Do
	TIOCNOTTY on /dev/tty0 instead of file descriptor 0.  This way
	XDirectFB works when started from linux console, but I don't know
	why only XDirectFB failed. Don't know either what TIOCNOTTY is,
	neither TIOCSCTTY. Time for a VT/TTY handling rewrite in DirectFB.
	
	However, I added perror messages in case TIOCNOTTY or TIOCSCTTY
	fails.
	
	Strange result (df_window and XDirectFB show same behaviour now):
	
	from xterm:			  both ioctls fail from linux
	console:	       second ioctl fails from linux console (with
	strace): first ioctl fails
	
	Removed tcflush calls from PS/2 driver (inappropriate ioctl).

2002-03-23 05:18  dok

	* src/core/windows.c: Fixed a bug that may have caused broken
	pulldown menus in GTK!
	
	handle_enter_leave_focus() did not check if the pointer is grabbed.

2002-03-22 20:21  neo

	* interfaces/: IDirectFBFont/Makefile.am,
	IDirectFBImageProvider/Makefile.am,
	IDirectFBVideoProvider/Makefile.am: Removed -disable-static from
	LIBADDs.

2002-03-22 20:21  dok

	* README: Added Martin Mueller to "Thanks To" section.

2002-03-22 19:30  mm

	* gfxdrivers/neomagic/neo_overlay.c: 
	Added brightness control to neomagic video overlay

2002-03-21 23:03  dok

	* TODO: added two lines

2002-03-21 22:59  dok

	* src/: core/coredefs.h, core/layers.c, core/surfaces.c,
	core/windows.c, gfx/generic/generic.c, misc/util.c, misc/util.h:
	Fixed crashes that sometimes occur during window resizing when
	another thread is repainting the window stack.
	
	Print caution message after failing video instance reallocation
	only if there is no system instance. If there is a system instance
	mark it as valid.
	
	Removed redundant macro in 'layers.c'.
	
	Added same debug checks to gAcquire() as in
	dfb_gfxcard_state_acquire().
	
	Added dfb_get_millis() which returns the current time in milli
	seconds after DirectFB startup (after first call of the function
	actually).
	
	Added PID and milli seconds after DirectFB startup to debug
	messages.

2002-03-18 22:05  dok

	* inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	inputdrivers/sonypi/sonypi.c, src/core/sig.h: Added
	dfb_sig_block_all() which blocks all signals and should be called
	at the beginning of each input thread. Otherwise signals may arrive
	at the input thread which in turn (in signal handler) cancels all
	input threads (including itself) during emergency shutdown.

2002-03-17 07:25  dok

	* TODO: Added scrolling or panning for virtual window/layer sizes.

2002-03-17 07:03  dok

	* src/core/windows.c: Treat windows with color keying enabled as
	transparent, so the background gets cleared.

2002-03-17 06:32  dok

	* src/core/: gfxcard.h, surfaces.c, surfaces.h: Reading from a
	surface with auto video policy which is stored in video memory no
	longer pulls it into system memory.
	
	Changed surface reallocation behaviour. Surfaces already in video
	memory stay there after reallocation.

2002-03-17 02:41  dok

	* TODO: Removed color keyed window entry.

2002-03-17 02:40  dok

	* include/directfb.h, src/core/windows.c, src/core/windows.h,
	src/windows/idirectfbwindow.c: Added color keying for windows (e.g.
	for shaped windows).
	
	Added DFBWindowOptions having DWOP_COLORKEYING for now.  Added
	IDirectFBWindow::SetOptions and SetColorKey(r,g,b).

2002-03-17 02:34  dok

	* gfxdrivers/matrox/matrox_state.c: Removed debug printf I forgot.

2002-03-17 02:23  dok

	* gfxdrivers/matrox/matrox_state.c, src/gfx/generic/generic.c:
	Fixed colorkeying with simultaneous blending for ARGB surfaces in
	software and Matrox (G200+) driver.

2002-03-16 23:57  andi

	* README, patches/Makefile.am: - removed the paragraph from README
	mentioning the aty128fb and nvidia patches.  - removed neofb patch
	from Makefile.am

2002-03-15 18:20  dok

	* src/core/core.c: Deinitialize layers in emergency shutdown (e.g.
	segfault).

2002-03-14 02:57  andi

	* src/gfx/generic/generic.c: - use lookup tables to convert rgb332
	2/3bit color channels to precalculated 8bit values. now blending in
	rgb332 looks much better without affecting performance.

2002-03-12 00:54  dok

	* patches/: README.neofb, neofb-0.3.1-linux-2.4.18-pre6.patch.bz2:
	Finally neofb got itself into 2.4.19-pre3 ;)

2002-03-11 01:28  dok

	* src/core/: surfacemanager.c, surfaces.c: Sorry, the next time I
	will compile before committing.

2002-03-11 01:12  dok

	* src/core/fbdev.c: Removed to old lines that caused doubled and
	interlaced modes not work.

2002-03-10 07:02  dok

	* src/core/surfaces.h: Minor cleanup, converted defines to enums
	(CoreSurfaceHealth/Policy).

2002-03-09 02:51  dok

	* TODO: Removed one ;)

2002-03-09 02:49  dok

	* gfxdrivers/matrox/matrox_bes.c: Shift 8bit values to the right in
	RGB15 and RGB16.

2002-03-09 02:38  dok

	* gfxdrivers/matrox/matrox_bes.c: Implemented destination color
	keying.

2002-03-09 02:38  dok

	* gfxdrivers/ati128/ati128_overlay.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/regs.h,
	gfxdrivers/neomagic/neo_overlay.c, src/core/fbdev.c,
	src/core/layers.h, src/display/idirectfbdisplaylayer.c: Changed
	internal parameters.

2002-03-09 01:00  dok

	* gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/neomagic/neo_overlay.c,
	include/directfb.h, src/core/fbdev.c, src/core/layers.h,
	src/display/idirectfbdisplaylayer.c: Added destination colorkeying
	for display layers.  Not implemented by any driver yet.
	
	IDirectFBDisplayLayer::SetColorKey() is now called
	IDirectFBDisplayLayer::SetSrcColorKey().
	
	Added IDirectFBDisplayLayer::SetDstColorKey().
	
	DLOP_COLORKEYING is DLOP_SRC_COLORKEY now.  DLCAPS_COLORKEYING is
	DLCAPS_SRC_COLORKEY now.
	
	Added DLOP_DST_COLORKEY and DLCAPS_DST_COLORKEY.

2002-03-08 04:45  dok

	* ChangeLog, TODO: Added some more useful things needed before
	feature freeze.  Updated ChangeLog (no, it's not a release yet ;)

2002-03-08 03:59  dok

	* TODO: More important TODOs added for 1.0.

2002-03-08 02:41  dok

	* src/core/: surfaces.c, windows.c: Added window resizing wm hack,
	press 'CapsLock + Strg' to resize with the mouse.  Fixed a deadlock
	in dfb_surface_reformat.  Changed window stack update strategy when
	resizing, great thanks to Hallvar Helleseth <hallvar@ii.uib.no>.

2002-03-08 00:18  dok

	* configure.in, src/Makefile.am: Disable static libraries by
	default again, builds twice as fast.  Added AM_CONDITIONAL for
	static library stuff in src/Makefile.am.

2002-03-08 00:01  dok

	* src/: core/surfaces.c, core/windows.c,
	display/idirectfbsurface.c: Acquire locks for front and back buffer
	in dfb_surface_destroy before sending the destroy message and
	destroying it.
	
	Removed now obsoleted Unlock from IDirectFBSurface's surface
	listener.
	
	Made dfb_surface_reallocate_buffer use free/malloc again, realloc
	is too slow and the data will be foo anyway.
	
	Added 'CapsLock + D' which destroys the window under the cursor,
	this is the force version of 'CapsLock + C' (close).

2002-03-05 21:21  dok

	* gfxdrivers/neomagic/neo2200.c: Fixed CheckState, it was broken
	for unsupported drawing/blitting functions.  Reenabled workaround
	for blitting.

2002-03-05 20:50  dok

	* configure.in: Only check for libdl if shared libraries are
	enabled.  Show shared/static in summary.  Include "$LIBZ -lm" in
	libpng check.

2002-03-04 21:03  dok

	* src/core/windows.c: Check for empty region before calling
	update_region.	Empty region check at beginning of recursive
	update_region is a DFB_ASSERT now.

2002-03-04 20:37  dok

	* tools/gendoc.pl: Added union parsing (treated like structs).

2002-03-03 06:51  dok

	* configure.in, inputdrivers/Makefile.am,
	inputdrivers/sonypi/.cvsignore, inputdrivers/sonypi/Makefile.am,
	inputdrivers/sonypi/sonypi.c: Wrote SonyPI Jogdial driver. Sony
	users with a Jogdial can now use their jogdial as a wheel (Z axis)
	and middle mouse button.

2002-02-25 22:08  andi

	* patches/: Makefile.am, README.aty128fb-2.4.16_to_benh.patch,
	aty128fb-2.4.16_to_benh.patch.bz2: removed aty128fb patch (it is
	included in 2.4.18)

2002-02-25 15:53  neo

	* configure.in: fixes for autoconf-2.5

2002-02-25 05:21  dok

	* src/core/sig.c: Don't catch SIGPIPE.

2002-02-24 21:24  dok

	* configure.in, include/directfb.h, src/directfb.c,
	src/core/coredefs.h, src/core/layers.c, src/core/windows.c,
	src/core/windows.h, src/windows/idirectfbwindow.c: Added
	IDirectFBWindow::PutAtop and IDirectFBWindow::PutBelow that can be
	used to restack a window relative to another one.
	
	Added DFB_ASSERT which prints an error message and causes a SIGTRAP
	if debug is enabled during configure.
	
	Cleaned up window restacking code in core. Reduced code size.
	
	Version is 0.9.10 now.

2002-02-20 15:41  andi

	* configure.in, gfxdrivers/Makefile.am: only build neomagic driver
	on i386 platforms. (let me know if there is a neomagic chip in a
	non-i386 system somewhere on this planet)

2002-02-20 15:39  dok

	* ChangeLog, NEWS: Updated for 0.9.9.

2002-02-19 21:03  neo

	* README: some updates, could need more

2002-02-19 19:05  dok

	* src/core/core.c: And here the complete log entry:
	
	Applied patch from Enno Brehm <enno@convergence.de> that adds
	dlopen'ing of the main library with RTLD_GLOBAL.

2002-02-19 19:03  dok

	* src/core/core.c: main library with RTLD_GLOBAL.

2002-02-19 19:02  dok

	* README, configure.in, src/core/Makefile.am, src/core/core.c: [no
	log message]

2002-02-18 23:03  dok

	* src/core/layers.c: Reset display layer ID pool so the primary
	layer gets '0' even after reinitialization of DirectFB.

2002-02-18 22:24  dok

	* src/input/idirectfbinputbuffer.c: Forgot to add the new event
	class to two switches.

2002-02-18 22:10  dok

	* src/input/idirectfbinputbuffer.c: Forgot to assign function
	pointer.

2002-02-18 22:00  dok

	* include/directfb.h, src/input/idirectfbinputbuffer.c: Added new
	event class DFEC_USER and a struct DFBUserEvent containing an
	unsigned integer and a pointer.  Added
	IDirectFBEventBuffer::PostEvent which can be used for any event
	class.

2002-02-18 15:15  dok

	* include/directfb.h, src/idirectfb.c: Allow
	IDirectFB::CreateEventBuffer with DICAPS_NONE.

2002-02-15 14:35  neo

	* include/directfb.h: Even more keycodes for yet another remote
	control.

2002-02-15 13:23  dok

	* gfxdrivers/neomagic/: Makefile.am, neo2200.c, neo_overlay.c,
	neomagic.c, neomagic.h: Added NeoMagic YUV Overlay support ;)
	
	Added simple YUY2 -> YUY2 blitting for NeoMagic.

2002-02-14 17:38  dok

	* src/core/core.c, src/core/core.h, src/core/coredefs.h,
	src/core/coretypes.h, src/core/fbdev.c, src/core/layers.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/fusion/shmalloc/mstats.c,
	src/core/fusion/shmalloc/shcalloc.c,
	src/core/fusion/shmalloc/shfree.c,
	src/core/fusion/shmalloc/shmalloc_internal.h,
	src/core/fusion/shmalloc/shmemalign.c,
	src/core/fusion/shmalloc/shrealloc.c,
	src/core/fusion/shmalloc/shvalloc.c: More code beautification, more
	code documentation.  Simplified some parts.  Fixed setting primary
	layer's configuration that I broke last night.

2002-02-14 04:32  dok

	* gfxdrivers/ati128/ati128_overlay.c: Shrink SetConfiguration to 3
	lines here, too.

2002-02-14 04:27  dok

	* src/directfb.c, src/idirectfb.c, src/core/fbdev.c,
	src/core/layers.c, src/core/layers.h, src/core/surfaces.c,
	src/core/windows.c, gfxdrivers/matrox/matrox_bes.c,
	src/core/fusion/shmalloc.h, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface_layer.c: Added
	dfb_layer_set_configuration to simplify the driver's
	SetConfiguration.  Beautified code a bit. Removed all
	shfree/shmalloc hacks (use shrealloc now).

2002-02-14 01:07  dok

	* inputdrivers/keyboard/keyboard.c: Grey pad keys get through now
	even if NumLock is off (div, mul, etc.)

2002-02-13 17:42  dok

	* src/misc/conf.c: Made 'no-sighandler' and 'no-deinit-check'
	overrideable via 'sighandler' and 'deinit-check'.

2002-02-08 18:06  neo

	* include/directfb.h, inputdrivers/keyboard/keyboard.c: Removed
	special keycodes for the IPAQ and added some generic new ones. 
	Remapped IPAQ keys.

2002-02-06 12:18  neo

	* src/display/idirectfbsurface.c: (IDirectFBSurface_TileBlit):
	fixed tiled blitting for subsurfaces.

2002-02-06 07:20  dok

	* src/core/: core.c, gfxcard.c, vt.c: Call graphics driver deinit
	in signal handler again.  So overlays shouldn't stay visible after
	segfaulting now.

2002-02-04 14:54  dok

	* src/core/: surfaces.c, surfaces.h: Wait for idle accelerator if
	software wants to write into a surface that has been read by
	hardware (read access by hardware may not be completed).

2002-02-04 12:51  neo

	* Makefile.am: Removed directfb-avifile.pc and directfb-swf.pc from
	EXTRA_DIST.

2002-02-04 12:45  dok

	* src/core/input.h, src/core/windows.c, include/directfb.h,
	src/input/idirectfbinputdevice.c, inputdrivers/keyboard/keyboard.c:
	Applied patch from Till Adam <till@adam-lilienthal.de>.  - Adds
	DFBInputDeviceLockState (DILS_SCROLL, DILS_NUM, DILS_CAPS) - Adds
	IDirectFBInputDevice::GetLockState() - Adds locks to input and
	window events - Keyboard driver handles locks and LEDs

2002-02-02 01:57  dok

	* src/idirectfb.c: Check pixelformat in CreateSurface.

2002-02-01 04:00  dok

	* src/core/: gfxcard.c, input.c: Fixed segfaults in
	reinitialization.

2002-01-31 16:43  dok

	* src/core/fusion/shmalloc/shmalloc.c: Removed shmalloc debug
	printf.

2002-01-31 16:38  dok

	* src/core/fusion/: arena.c, fusion.c, list.c, lock.c, reactor.c,
	ref.c, ref.h, shmalloc.h, util.c: "ref_*" -> "fusion_ref_*" and
	code beautifications.

2002-01-29 18:08  dok

	* include/directfb_internals.h, src/directfb.c, src/idirectfb.c:
	Should have fixed DirectFBCreate after last IDirectFB::Release.

2002-01-29 17:58  dok

	* src/core/fusion/Makefile.am: Only include shmalloc sub library
	when building the multi app version.  Thanks to Till.

2002-01-29 16:41  dok

	* README, configure.in, src/core/fbdev.c, src/core/gfxcard.c,
	src/core/input.c, src/core/surfacemanager.c, src/core/surfaces.c,
	src/core/windows.c, src/core/fusion/Makefile.am,
	src/core/fusion/fusion.c, src/core/fusion/fusion_internal.h,
	src/core/fusion/reactor.c, src/core/fusion/shmalloc.c,
	src/core/fusion/shmalloc.h, src/core/fusion/shmalloc/.cvsignore,
	src/core/fusion/shmalloc/Makefile.am,
	src/core/fusion/shmalloc/TODO, src/core/fusion/shmalloc/mstats.c,
	src/core/fusion/shmalloc/shbrk.c,
	src/core/fusion/shmalloc/shcalloc.c,
	src/core/fusion/shmalloc/shfree.c,
	src/core/fusion/shmalloc/shmalloc.c,
	src/core/fusion/shmalloc/shmalloc_internal.h,
	src/core/fusion/shmalloc/shmemalign.c,
	src/core/fusion/shmalloc/shrealloc.c,
	src/core/fusion/shmalloc/shvalloc.c: Completely rewritten shmalloc
	stuff based on libc5's GNU malloc.  It now uses tmpfs (former
	shmfs) that needs to be mounted at /dev/shm:
	
	mount shm /dev/shm -tshm
	
	It uses open/mmap and ftruncate/mremap similar to brk ;)

2002-01-28 15:49  dok

	* interfaces/IDirectFBVideoProvider/Makefile.am: Builds with newest
	version libmpeg3 (1.5).

2002-01-27 21:20  neo

	* include/directfb.h: changed some comments to be (hopefully) more
	helpful

2002-01-27 17:31  dok

	* README, include/directfb.h, inputdrivers/keyboard/keyboard.c:
	IPAQ button support by Ara Hacopian <ahacop@anthrotronix.com>.

2002-01-25 01:38  dok

	* patches/: Makefile.am, neofb-0.3.1-linux-2.5.3-pre3.patch.bz2:
	neofb 0.3.1 is now in 2.5.3-pre4 ;)

2002-01-25 00:03  dok

	* Makefile.am: two variables removed

2002-01-24 22:15  dok

	* .cvsignore, Makefile.am, configure.in, directfb-avifile.pc.in,
	directfb-swf.pc.in: directfb-avifile linking hack is no longer
	needed due to recent changes in module loading.

2002-01-24 20:20  andi

	* gfxdrivers/ati128/mmio.h: use waitidle again on ppc

2002-01-23 17:09  dok

	* patches/: Makefile.am, README.neofb,
	neofb-0.3-linux-2.4.17.patch.bz2,
	neofb-0.3.1-linux-2.4.18-pre6.patch.bz2,
	neofb-0.3.1-linux-2.5.3-pre3.patch.bz2: New version, nothing
	important, just added module license (GPL of course).

2002-01-23 16:49  neo

	* src/misc/conf.c: oops, forgot to remove a debugging printf

2002-01-23 16:08  neo

	* acconfig.h, configure.in, src/misc/conf.c: Changed DirectFB
	command-line parsing: The only recognized options are --dfb-help
	and --dfb: follow by a comma-separated list of DirectFB options.
	The format of the options is the same as used in the directfbrc
	file.

2002-01-22 16:42  dok

	* tools/dfb_static_build_example: Set $PREFIX only if it's unset. 
	Take care of preset $CFLAGS.  Use $PREFIX consequently.

2002-01-22 15:48  dok

	* README, src/core/fbdev.c: Applied patch from Daniel Mack
	<daniel@convergence.de>.  The environment variable "FRAMEBUFFER" is
	used now if set.

2002-01-22 15:44  dok

	* README, gfxdrivers/ati128/ati128.c: Applied patch from Topi
	Kanerva <topi.kanerva@eke.fi>.	Under certain circumstances
	rectangles didn't get filled or drawn.

2002-01-22 10:22  dok

	* interfaces/IDirectFBVideoProvider/Makefile.am: Build libmpeg3
	provider using gcc, ld did not include our constructor.

2002-01-21 17:59  neo

	* src/idirectfb.c: Try to access files before creating a video or
	font provider for them.

2002-01-21 16:25  dok

	* tools/: raw15toraw24.c, raw16toraw24.c, raw32toraw24.c: No need
	for stdio.

2002-01-21 15:36  dok

	* gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/matrox/matrox_bes.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	src/core/core.c, src/core/fbdev.c, src/core/gfxcard.h,
	src/core/layers.h, src/core/vt.c: Replaced all "sprintf" calls with
	"snprintf" calls.

2002-01-21 13:11  neo

	* include/directfb.h, src/directfb.c, src/gfx/generic/generic.c,
	src/misc/conf.c, src/misc/conf.h: Don't parse --help out of the
	command-line arguments in order to allow applications to provide
	more useful help here.
	
	Added new function DirectFBUsageString() which returns a string
	describing the DirectFB command-line options.
	
	Output DirectFB usage information and quit if --dfb-help
	command-line option is given.

2002-01-21 11:25  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p: Added "static class Foo { public: Foo() {} } foo;" to have our C
	constructors included in the library.

2002-01-20 23:08  dok

	* src/interface.c: fixed segfault

2002-01-18 14:08  dok

	* src/windows/idirectfbwindow.c: Fixed initial DWET_POSITION_SIZE
	event.

2002-01-17 15:46  dok

	* configure.in, gfxdrivers/ati128/Makefile.am,
	gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_overlay.c, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/neomagic/Makefile.am,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/nvidia/Makefile.am,
	gfxdrivers/nvidia/nvidia.c, gfxdrivers/tdfx/Makefile.am,
	gfxdrivers/tdfx/tdfx.c, include/directfb_internals.h,
	inputdrivers/dbox2remote/Makefile.am,
	inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/Makefile.am,
	inputdrivers/h3600_ts/h3600_ts.c,
	inputdrivers/joystick/Makefile.am,
	inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/Makefile.am,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/Makefile.am,
	inputdrivers/lirc/lirc.c, inputdrivers/ps2mouse/Makefile.am,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/Makefile.am,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/Makefile.am, src/directfb.c, src/idirectfb.c, src/interface.c,
	src/interface_implementation.h, src/core/Makefile.am,
	src/core/core.c, src/core/coredefs.h, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/graphics_driver.h, src/core/input.c,
	src/core/input.h, src/core/input_driver.h,
	src/display/idirectfbsurface.c, tools/dfb_static_build_example,
	tools/ipc_cleanup: Added static linking support. Minor changes to
	driver and interface modules.
	
	An example of how to link static applications with choosable
	drivers and interfaces is the script 'dfb_static_build_example'.

2002-01-16 16:11  dok

	* patches/Makefile.am: updated EXTRA_DIST

2002-01-16 15:45  dok

	* gfxdrivers/: ati128/ati128_overlay.c, matrox/matrox_bes.c: two
	more includes

2002-01-16 15:42  dok

	* gfxdrivers/: ati128/ati128_overlay.c, matrox/matrox_bes.c: Fixed
	stoned '.c' includes.

2002-01-15 22:33  neo

	* include/directfb.h, src/directfb.c, src/core/windows.c,
	src/display/idirectfbdisplaylayer.c, src/misc/conf.c: Added new
	background mode DLBM_TILE that works similar to DLBM_IMAGE but
	tiles the background image instead of stretching it.  Added new
	--bg-tile command line option.

2002-01-15 19:08  dok

	* src/: Makefile.am, display/Makefile.am, gfx/Makefile.am,
	gfx/generic/Makefile.am, input/Makefile.am, misc/Makefile.am,
	core/fusion/Makefile.am, media/Makefile.am, windows/Makefile.am,
	core/Makefile.am: Use CFLAGS again.

2002-01-15 19:01  dok

	* configure.in, src/display/Makefile.am, src/Makefile.am,
	src/gfx/Makefile.am, src/gfx/generic/Makefile.am,
	src/input/Makefile.am, src/misc/Makefile.am,
	src/windows/Makefile.am, src/core/fusion/Makefile.am,
	src/media/Makefile.am, src/core/Makefile.am: Makefile.am cleanup

2002-01-14 15:09  neo

	* include/directfb.h, src/core/gfxcard.c, src/core/gfxcard.h,
	src/display/idirectfbsurface.c: Added IDirectFBSurface::TileBlit.
	Takes the same parameters like Blit but tiles the source to the
	whole destination surface. Set a clipping region if you want to
	tile only parts of the destination surface.

2002-01-14 12:01  dok

	* include/directfb.h, src/core/input.c, src/core/windows.c,
	src/input/idirectfbinputbuffer.c: once again, id is a reserved
	keyword in objective c

2002-01-14 10:49  dok

	* src/core/windows.h: include reactor.h

2002-01-14 10:42  dok

	* configure.in: Use another assembler source file for testing.

2002-01-14 06:53  dok

	* src/core/core.c: Do a normal shutdown in atexit handler, not just
	an emergency shutdown.

2002-01-14 06:10  dok

	* src/core/input.c: Put device id into event structure in
	dfb_input_dispatch.

2002-01-14 05:57  dok

	* src/gfx/generic/detect_MMX.s: not needed anymore

2002-01-14 05:57  dok

	* include/directfb.h, include/directfb_internals.h, src/directfb.c,
	src/idirectfb.c, src/idirectfb.h, src/core/state.c,
	src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbdisplaylayer.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_layer.h,
	src/display/idirectfbsurface_window.c,
	src/display/idirectfbsurface_window.h, src/gfx/generic/Makefile.am,
	src/gfx/generic/generic.c, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/windows/idirectfbwindow.c: Cleanup
	of interface functions, many functions have been made static.
	
	Removed intel_cpu_features by using the new dfb_mm_accel function.
	
	Added DFBDisplayLayerID, DFBWindowID and DFBInputDeviceID.
	
	Added GetID functions to IDirectFBDisplayLayer, IDirectFBWindow and
	IDirectFBInputDevice.
	
	IDirectFBInputBuffer is an IDirectFBEventBuffer now.  It handles
	events from input devices and windows.
	
	Removed WaitForEvent, GetEvent and PeekEvent from IDirectFBWindow. 
	Added CreateEventBuffer and AttachEventBuffer to IDirectFBWindow.
	
	DFBInputEvent and DFBWindowEvent contain the ID of the event
	source.
	
	Added DFBEventClass to determine the specific event, i.e.
	input/window.
	
	Added DFBEvent that is a union of DFBEventClass, DFBInputEvent and
	DFBWindowEvent. Each event structure has a DFBEventClass first.
	
	IDirectFBEventBuffer::GetEvent can be called with a DFBEvent
	pointer.  If a buffer is only used for one specific event class,
	the macro DFB_EVENT(e) can be used to pass DFBInputEvent or
	DFBWindowEvent directly.

2002-01-13 13:36  neo

	* directfb-avifile.pc.in: Removed useless stuff from
	directfb-avifile.pc.

2002-01-12 02:48  dok

	* acconfig.h, configure.in, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/tdfx/tdfx.c, include/directfb.h,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, src/core/core.c, src/core/surfacemanager.c,
	src/display/idirectfbsurface_window.c, src/gfx/convert.c,
	src/gfx/convert.h, src/gfx/generic/generic.c, src/misc/Makefile.am,
	src/misc/cpu_accel.c, src/misc/cpu_accel.h, src/misc/gfx_util.c,
	src/misc/mem.h, src/misc/memcpy.c, src/misc/memcpy.h: Added cpu
	detection code for MMX, 3DNOW, MMXEXT, SSE, SSE2 and ALTIVEC.
	
	Added fast memcpy routine 'dfb_memcpy' that uses MMX, MMXEXT or
	SSE.
	
	DICAPS_AXIS is now called DICAPS_AXES to have a plural as in
	DICAPS_BUTTONS or DICAPS_KEYS.
	
	Removed bogus flag DFXL_DRAWSTRING.
	
	Enabled dithering for Matrox cards, looks nice.

2002-01-11 22:31  andi

	* patches/README.aty128fb-2.4.16_to_benh.patch: added note that the
	patch is obsolete since it was merged in 2.4.18-pre3

2002-01-11 00:29  dok

	* gfxdrivers/matrox/matrox.c: As Hallvar pointed out, "G550" needed
	to be added to the device names, too.

2002-01-10 22:27  dok

	* gfxdrivers/matrox/matrox.c, include/directfb.h,
	inputdrivers/dbox2remote/dbox2remote.c, src/idirectfb.c,
	src/core/layers.c, src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c: It's now possible to specify
	the pixelformat for a window on creation.  For windows with an
	alphachannel only DSPF_ARGB is currently allowed.  For opaque
	windows even DSPF_ARGB is allowed, but it won't get blended to the
	background. Instead the data will just be copied or converted so it
	can act like a root window on transparent layers.
	
	Optimized graphics card state changes during window stack updates.
	
	Added a comment to dbox2 remote driver.
	
	Added "G550" to matrox driver name.

2002-01-10 16:36  dok

	* gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128_overlay.c,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox_bes.c,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/nvidia/nvidia.c,
	gfxdrivers/tdfx/tdfx.c, inputdrivers/dbox2remote/dbox2remote.c,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/core/core.c, src/core/core.h,
	src/core/fbdev.c, src/core/fbdev.h, src/core/fonts.c,
	src/core/fonts.h, src/core/gfxcard.c, src/core/gfxcard.h,
	src/core/input.c, src/core/input.h, src/core/layers.c,
	src/core/layers.h, src/core/sig.c, src/core/sig.h,
	src/core/state.c, src/core/state.h, src/core/surfacemanager.c,
	src/core/surfacemanager.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/vt.c, src/core/vt.h,
	src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c, src/gfx/clip.c,
	src/gfx/clip.h, src/gfx/convert.c, src/gfx/util.c, src/gfx/util.h,
	src/gfx/generic/generic.c, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputdevice.c, src/media/idirectfbfont.c,
	src/misc/conf.c, src/misc/conf.h, src/misc/gfx_util.c,
	src/misc/gfx_util.h, src/misc/tree.c, src/misc/tree.h,
	src/misc/utf8.c, src/misc/utf8.h, src/misc/util.c, src/misc/util.h,
	src/windows/idirectfbwindow.c: All global DirectFB symbols have the
	prefix "dfb_" now.

2002-01-09 15:56  dok

	* configure.in, src/gfx/generic/Makefile.am: Use
	"-fomit-frame-pointer" only for src/gfx/generic.

2002-01-08 16:52  neo

	* src/gfx/generic/generic.c: some code cleanup, no changes

2002-01-08 14:22  neo

	* src/gfx/generic/generic.c: us a saturating blend when compositing
	A8 surfaces with colorizing on ARGB surfaces

2002-01-07 18:31  dok

	* inputdrivers/ps2mouse/ps2mouse.c, src/idirectfb.c,
	src/core/core.c, src/core/core.h, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/input.c, src/core/input.h,
	src/core/layers.c, src/core/layers.h, src/core/surfacemanager.c,
	src/core/surfacemanager.h: Removed a totally dumb "static int" that
	got increased each OpenDevice and made the driver crash when
	OpenDevice gets called again after CloseDevice.
	
	Readded Suspend/Resume implementation.

2002-01-07 15:23  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/idirectfb.c: Pass the filename to the Probe function of image
	providers.

2002-01-07 15:07  neo

	* src/gfx/generic/generic.c:	* src/gfx/generic/generic.c
	(SET_ALPHA_PIXEL_ARGB): keep destination
		alpha when blending A8 with color modulation onto ARGB
	surfaces.

2002-01-07 13:11  dok

	* README: Added Hallvar Helleseth <hallvar@ii.uib.no> to Thanks To
	section.

2002-01-06 05:50  dok

	* gfxdrivers/ati128/: ati128.h, ati128_overlay.c, regs.h: Added
	YV12 and I420 support.

2002-01-06 02:16  dok

	* gfxdrivers/: ati128/Makefile.am, ati128/ati128.c,
	ati128/ati128.h, ati128/ati128_overlay.c, ati128/mmio.h,
	ati128/regs.h, matrox/mmio.h: Added ATI Overlay support. Only YUY2
	and UYVY yet.
	
	Fixed mmio in/out functions. We casted the base address to a non
	volatile pointer. That resulted in register polling loops that
	never returned.
	
	Maybe this fixes ATI idle waiting on PowerPC.

2002-01-05 00:33  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: Rewritten Libmpeg3 provider based on OpenQuicktime provider. 
	Supports all RGB and YUV formats and does audio playback.

2002-01-03 21:55  dok

	* src/core/surfaces.c: fixed minor bug introduced yesterday that
	made RGB15 unavailable

2002-01-03 19:58  dok

	* TODO: Removed CON2FBMAP todo. Added some others.

2002-01-03 19:45  dok

	* tools/.cvsignore: added raw15toraw24

2002-01-02 02:52  dok

	* gfxdrivers/matrox/matrox_bes.c: Fixed a width/pitch bug.

2002-01-02 02:26  dok

	* src/core/: surfacemanager.c, surfaces.c: Apply the plane
	multiplier to end result instead of height.

2002-01-02 01:38  dok

	* configure.in, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox.h, gfxdrivers/matrox/matrox_bes.c,
	gfxdrivers/matrox/regs.h, include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/idirectfb.c, src/core/fbdev.c, src/core/surfacemanager.c,
	src/core/surfaces.c, src/gfx/generic/generic.c, tools/gendoc.pl:
	Added "DFB_BYTES_PER_LINE(f,w)" which should be used instead of
	"DFB_BYTES_PER_PIXEL(f)*w", it adds support for formats with bytes
	per pixel not being a decimal, e.g. packed monochrome.
	
	Added support for planar pixel formats by adding more information
	to the pixel format constants with two new macros:
	"DFB_PLANAR_PIXELFORMAT(fmt)" and "DFB_PLANE_MULTIPLY(fmt,height)".
	 More details in the header and in the generated documentation.
	
	Added DSPF_I420 and DSPF_YV12, two planar YUV formats.
	
	I420: 8 bit Y plane followed by 8 bit 2x2 subsampled U and V
	planes.  YV12: 8 bit Y plane followed by 8 bit 2x2 subsampled V and
	U planes.
	
	Added I420 and YV12 support for Matrox BES.
	
	Enum entries in the generated documentation have the original order
	now.
	
	Increased version number, 0.9.8 and 0.9.9 are binary incompatible.

2002-01-01 18:41  dok

	* gfxdrivers/matrox/matrox_state.c: Only use the full color keying
	mask when in 8/16 bit mode.

2002-01-01 14:20  dok

	* src/: core/core.c, core/surfacemanager.c, misc/Makefile.am,
	misc/conf.c, misc/conf.h, misc/fbdebug.c, misc/fbdebug.h: New
	framebuffer based debugging method.  When compiled with debug
	enabled and started with "--fbdebug=<device>" graphical debugging
	output is done on this additional device. Currently only the
	surface manager uses this feature to show the video memory
	allocations for surfaces in a "defrag" like style.

2002-01-01 14:08  dok

	* patches/: README.neofb, README.neofb-0.2.1-patch-2.4.6: Updated
	README

2001-12-31 12:19  andi

	* tools/raw15toraw24.c: forgot to add the file.

2001-12-30 22:55  andi

	* README.screenshots,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/core/layers.c, src/gfx/generic/generic.c, tools/Makefile.am,
	tools/README, tools/raw16toraw24.c, tools/raw32toraw24.c: - do not
	rely on gcc to define __BIG_ENDIAN__ or __LITTLE_ENDIAN__   include
	<endian.h> and check __BYTE_ORDER. This resolves problem on  
	parisc, where gcc does not define __BIG_ENDIAN__ - added
	raw15toraw24 tool for making screenshots

2001-12-27 18:24  dok

	* patches/neofb-0.2.1-linux-2.4.10.patch.bz2,
	patches/neofb-0.2.1-patch-2.4.6.bz2,
	patches/neofb-0.3-linux-2.4.17.patch.bz2,
	gfxdrivers/neomagic/neomagic.c: New version of neofb, for Linux
	2.4.17.
	
	Added console acceleration for NeoMagic 2200 and above.  Added
	checking of maximum allowed dot clock.
	
	Changed accelerator IDs.

2001-12-19 17:49  dok

	* src/gfx/convert.h: The macro PIXEL_RGB332 should always be
	defined.

2001-12-19 02:34  dok

	* gfxdrivers/matrox/: matrox.c, matrox_state.c: Fixed color keying
	on older Matrox cards.
	
	Added RGB332 support for all Matrox cards, accelerated blended
	rectangles look very cool in 8bit.

2001-12-19 01:29  dok

	* src/: core/fbdev.c, directfb.c: After setting the video mode
	check the virtual resolution (matroxfb does not return an error but
	decreases the virtual resolution). Return an error if the virtual
	resolution does not match the requested one. Fixes segfault of
	double buffered fullscreen applications in high resolutions on
	older cards.
	
	Print a more descriptive error message if setting the desktop
	buffer mode failed. Not only missing virtual resolution support but
	also insufficient graphics memory can cause it. Also try a fallback
	to system memory back buffer mode.

2001-12-18 20:26  dok

	* src/: idirectfb.c, display/idirectfbsurface_window.c,
	windows/idirectfbwindow.c: It's now possible to start single
	buffered applications with "--force-windowed".	The implicitly
	created window is now centered on the screen.

2001-12-18 18:59  dok

	* README, src/core/vt.c, src/core/vt.h: The VT is now mapped to the
	specified framebuffer device.  Thanks to Jiri Svoboda
	<Jiri.Svoboda@seznam.cz>.

2001-12-18 13:55  dok

	* src/: core/gfxcard.c, gfx/Makefile.am, gfx/clip.c, gfx/clip.h,
	gfx/util.c, gfx/util.h, misc/gfx_util.c, misc/gfx_util.h: Moved all
	clipping functions to "src/gfx/clip.[ch]". Outlined
	'sort_triangle'.
	
	Fixed bug when all four edges of a rectangle are outside the clip. 
	Filled rectangles got discarded instead of filled.

2001-12-18 13:03  dok

	* src/gfx/generic/generic.c: fuction table cleanup

2001-12-18 11:25  holger

	* inputdrivers/ps2mouse/ps2mouse.c: dummy initialisation for IBM
	notebooks

2001-12-17 14:32  dok

	* README, inputdrivers/joystick/joystick.c: Applied patch from "W.
	Michael Petullo" <mike@flyn.org> that adds support for new-style
	device names '/dev/input/js*'.

2001-12-17 11:57  dok

	* src/: core/windows.c, misc/conf.c, misc/conf.h: New option
	"--disable-window-opacity" which forces window opacity to be 0 or
	255

2001-12-17 10:29  dok

	* src/: directfb.c, misc/conf.c, misc/conf.h: Added option
	"--[no-]cursor" to enable/disable showing the default cursor on
	startup. Default is to show the cursor.

2001-12-16 12:16  dok

	* TODO: Forgot to remove that preallocated surface memory thing.

2001-12-16 12:13  dok

	* include/directfb.h, src/idirectfb.c, src/core/gfxcard.h,
	src/core/surfaces.c, src/core/surfaces.h:
	'IDirectFB::CreateSurface' can now be used to create surfaces using
	a preallocated system memory buffer. Apps have to set
	'DSDESC_PREALLOCATED' and the appropriate fields in the surface
	description. The buffer won't be freed if the surface gets
	destructed.  The application has to use the 'Lock' method even to
	access the system memory buffer. Otherwise data coherency between
	system and video memory isn't guaranteed.

2001-12-16 11:23  dok

	* src/core/: fonts.c, gfxcard.h, surfaces.c, surfaces.h: Optimized
	usage of texture cache flushs and engine syncs, e.g. gfxcard_sync
	only gets called if the surface buffer that is to be accessed by
	software had been written to before by hardware.

2001-12-16 08:13  dok

	* README: Runs with Linux 2.2.x or higher. Linux 2.4.x is not
	required.

2001-12-14 20:04  holger

	* inputdrivers/dbox2remote/dbox2remote.c: changed keycode:
	DIKC_ESCAPE->DIKC_VENDOR

2001-12-14 14:15  dok

	* TODO: Removed swapping of left and right mouse button (done).

2001-12-14 12:18  dok

	* src/misc/conf.c: #if 0'ed the unused config_cleanup function as
	the config should go away if the app is completely terminated. In
	that case the memory is freed anyway.

2001-12-14 11:55  dok

	* src/: core/input.c, core/input.h, misc/conf.c, misc/conf.h: Added
	new option "--lefty" that enables swapping of left and right
	button.

2001-12-14 10:17  dok

	* TODO: Added some TODOs. We should really use this file ;)

2001-12-12 19:14  dok

	* src/core/gfxcard.c: i admit, this null pointer change wasn't
	redundant ;P

2001-12-12 18:51  holger

	* inputdrivers/ps2mouse/ps2mouse.c, src/core/input.c: fix USB
	problems when no PS/2 port is present, allow multiple mice

2001-12-12 02:49  dok

	* src/core/: gfxcard.c, state.h: more documentation on state
	handling

2001-12-11 22:06  dok

	* src/core/gfxcard.c: more documentation

2001-12-11 21:11  dok

	* src/core/gfxcard.c: documented gfxcard_check_state

2001-12-11 19:56  dok

	* inputdrivers/dbox2remote/dbox2remote.c: Chose this driver for a
	good example on writing input drivers.	Added comments documenting
	the driver API.

2001-12-11 13:06  holger

	* inputdrivers/ps2mouse/ps2mouse.c: indent cosmetic

2001-12-11 13:04  holger

	* inputdrivers/ps2mouse/ps2mouse.c: code compaction

2001-12-11 12:55  holger

	* inputdrivers/ps2mouse/ps2mouse.c: perform full initialisation on
	each device, this should get USB mices working on PC's, too

2001-12-10 20:01  dok

	* ChangeLog, NEWS: Updated for 0.9.8.

2001-12-10 19:55  dok

	* gfxdrivers/ati128/ati128.c, inputdrivers/ps2mouse/ps2mouse.c:
	Removed debug output in PS/2 driver.  ATI fake texture[tm] for
	blended rectangles is available again.

2001-12-10 00:34  andi

	* patches/: Makefile.am, README.aty128fb-2.4.12-benh.patch,
	README.aty128fb-2.4.16_to_benh.patch,
	aty128fb-2.4.12-benh.patch.bz2, aty128fb-2.4.16_to_benh.patch.bz2:
	new aty128fb patch for linux 2.4.16

2001-12-09 11:55  dok

	* include/directfb.h: s/leightweight/lightweight/

2001-12-09 11:54  dok

	* gfxdrivers/matrox/matrox.c: removed rounding factor when blitting
	non-scaled with tmu, very big fonts looked incorrect

2001-12-07 23:29  dok

	* include/directfb_internals.h, src/idirectfb.c: Use non-debug
	'free' for freeing interfaces after failing construction.

2001-12-07 18:49  dok

	* src/idirectfb.c: Use a double buffered window for a primary only
	if the primary should be a flipping surface.

2001-12-07 15:24  holger

	* inputdrivers/ps2mouse/ps2mouse.c: moved around tcflush() commands

2001-12-07 14:19  holger

	* src/core/gfxcard.c: optimize DDA for speed

2001-12-07 04:58  dok

	* src/core/core.c: typo in debug message

2001-12-07 04:38  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: compile fix

2001-12-07 02:33  dok

	* src/core/gfxcard.c: Triangle rasterizer (used when hardware no
	triangle filling or clipping) now uses hardware accelerated
	rectangle filling if available.

2001-12-07 02:04  dok

	* src/core/gfxcard.c: Moved the hw clipping check before
	gfxcard_state_check/acquire when it comes to triangle filling. I
	haven't tested it before but the wrong order should have caused
	deadlocks when hardware is able to fill triangles but has no hw
	clipping.

2001-12-06 22:22  holger

	* inputdrivers/ps2mouse/ps2mouse.c: fixed driver

2001-12-06 22:06  holger

	* src/core/gfxcard.c: new FillTriangle algorithm using DDA's

2001-12-06 17:45  dok

	* src/core/: gfxcard.c, gfxcard.h: Added gfxcard_reserve_memory
	that can be called at init time by drivers for special purposes,
	e.g. fake texture or command overflow buffer.

2001-12-06 17:07  neo

	* src/display/idirectfbsurface.c: initialize GetFont field in
	IDirectFBSurface (spotted by king@mizi.com)

2001-12-05 03:25  dok

	* src/core/windows.c: Don't generate window events from input when
	an app runs fullscreen.

2001-12-04 21:52  dok

	* AUTHORS, gfxdrivers/tdfx/tdfx.c: Applied patch from David Wood
	<DWood@daedalcorp.com>.  Added him to AUTHORS for the Voodoo
	driver.

2001-12-04 19:52  dok

	* gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/neomagic/neo2200.c, gfxdrivers/nvidia/nvidia.c,
	gfxdrivers/tdfx/tdfx.c, include/directfb.h,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/core/fbdev.c, src/core/gfxcard.c, src/core/surfacemanager.c,
	src/core/surfaces.c, src/display/idirectfbsurface.c,
	src/gfx/generic/generic.c, src/misc/gfx_util.c: Renamed
	'BYTES_PER_PIXEL' to 'DFB_BYTES_PER_PIXEL'.  Renamed
	'BITS_PER_PIXEL' to 'DFB_BITS_PER_PIXEL'.  Renamed
	'PIXELFORMAT_INDEX' to 'DFB_PIXELFORMAT_INDEX'.
	
	Added 'DFB_DRAWING_FUNCTION(a)' that replaces the magic 'accel &
	0xFFFF'.  Added 'DFB_BLITTING_FUNCTION(a)' that replaces the magic
	'accel & 0xFFFF0000'.

2001-12-04 18:43  dok

	* src/core/gfxcard.c: Division by zero fix.

2001-12-04 18:42  dok

	* src/: misc/mem.c, misc/mem.h, core/core.c: renamed dbg_*
	functions to dfb_dbg_*

2001-12-04 17:50  dok

	* src/: core/gfxcard.c, gfx/generic/generic.c,
	gfx/generic/generic.h: Applied patch from Holger Waechtler,
	gFillTriangle is removed and triangle filling/clipping is handled
	by 'gfxcard.c'. Triangles are filled by software if hardware/driver
	doesn't support triangles or doesn't support clipping.	In the
	final version of this function triangles will be filled via
	accelerated rectangles if hardware has no triangle or clipping
	support but filled rectangles.

2001-12-04 17:42  dok

	* src/core/fusion/reactor.c: commented out a debugging signal

2001-12-03 18:37  dok

	* src/gfx/generic/: Sacc_to_Dop_rgb16_MMX.s,
	Sacc_to_Dop_rgb32_MMX.s, Sop_argb_Sto_Dacc_MMX.s,
	Sop_argb_to_Dacc_MMX.s, Sop_rgb16_to_Dacc_MMX.s,
	Sop_rgb32_to_Dacc_MMX.s, Xacc_blend_invsrcalpha_MMX.s,
	Xacc_blend_srcalpha_MMX.s: optimized offset handling for file
	internal data

2001-12-03 15:04  dok

	* src/gfx/generic/: Cacc_add_to_Dacc_MMX.s,
	Dacc_modulate_argb_MMX.s, Sacc_add_to_Dacc_MMX.s,
	Sacc_to_Dop_rgb16_MMX.s, Sacc_to_Dop_rgb32_MMX.s,
	Sop_argb_Sto_Dacc_MMX.s, Sop_argb_to_Dacc_MMX.s,
	Sop_rgb16_to_Dacc_MMX.s, Sop_rgb32_to_Dacc_MMX.s,
	Xacc_blend_invsrcalpha_MMX.s, Xacc_blend_srcalpha_MMX.s,
	detect_MMX.s: Finally position independent code with real code
	sharing.  No patch needed to build with dietlibc.

2001-12-03 15:02  andi

	* src/core/fusion/: lock.c, ref.c: dont set the val field of semul
	at all when unsing the IPC_RMID semctl()

2001-12-03 05:04  andi

	* src/core/fusion/: fusion_types.h, lock.c, ref.c: in all SETVAL
	semctl()s, pass a union and set the val field instead of passing
	the value directly. this fixes multi appication core crashes on
	ppc. obviously this is the right way, however it worked too on i386
	before the change.

2001-12-03 05:03  dok

	* gfxdrivers/matrox/: matrox_bes.c, mmio.h: Matrox BES works again,
	writing to four dac registers subsequently didn't work after the
	base address got a local variable instead of a global.	Strange gcc
	or cache behaviour i guess.

2001-12-02 01:17  andi

	* src/core/windows.c: added "wm_hack" feature: press shift lock
	over a window and spin the mouse wheel to change the window
	opacity.

2001-11-30 20:03  dok

	* src/gfx/generic/generic.c: Made all 'Sop -> Aop' functions 'Bop
	-> Aop' (source aliasing removed).  This makes simple blitting 90%
	faster for very short scanlines, e.g. 2x200, because the
	"Sop_is_Bop" function is not needed.

2001-11-29 17:58  dok

	* src/gfx/generic/generic.c: Fixed segfault when rendering pipeline
	is empty, e.g. using DSDRAW_BLEND with SrcFunc DSBF_ZERO and
	DstFunc DSBF_ONE.

2001-11-29 17:51  dok

	* src/core/core.c: Check for NULL pointer.

2001-11-29 17:12  dok

	* src/core/core.c: Revived exit handler.

2001-11-29 15:28  andi

	* inputdrivers/Makefile.am: build fix

2001-11-29 15:19  andi

	* configure.in, inputdrivers/Makefile.am,
	inputdrivers/dbox2remote/.cvsignore,
	inputdrivers/dbox2remote/Makefile.am,
	inputdrivers/dbox2remote/dbox2remote.c: added remote control driver
	for dbox2

2001-11-28 18:56  dok

	* configure.in: Removed "-O3" from default flags. It's added when
	debug is disabled.  Added "-O0" to flags when debug is enabled.

2001-11-28 18:06  dok

	* src/core/fbdev.c: In RGB332: Have all colors but black a bit
	transparent. Black is totally transparent.

2001-11-28 17:43  dok

	* src/core/fbdev.c: hmm, transp is inverted alpha ;)

2001-11-28 16:58  dok

	* src/core/fbdev.c: In RGB332 mode initialize alpha values in
	palette.

2001-11-27 21:42  dok

	* src/core/: gfxcard.c, gfxcard.h: Physical address is 'unsigned
	long' now.

2001-11-27 14:19  dok

	* src/core/input.c: Create reactor before call to
	"driver->OpenDevice".

2001-11-27 01:22  andi

	* include/directfb.h, src/core/windows.c,
	src/gfx/generic/generic.c: added DWET_WHEEL window event. Focused
	windows now receive events if the mouse wheel is used.

2001-11-27 01:15  andi

	* inputdrivers/ps2mouse/ps2mouse.c: bugfixes: when using a imps2
	mice the packet array was accessed out of bounds added (__s8) cast
	to before assigning wheel motion data to dz.

2001-11-26 13:13  dok

	* src/interface.c: Use calloc and strdup instead of malloc/memset
	and malloc/strcpy.

2001-11-26 05:54  dok

	* src/windows/idirectfbwindow.c: Free pending events on destruction
	of IDirectFBWindow.

2001-11-26 05:48  dok

	* configure.in, directfb-internal.pc.in, src/core/coredefs.h,
	src/core/fusion/arena.h, src/core/fusion/fusion.h,
	src/core/fusion/fusion_types.h, src/core/fusion/list.h,
	src/core/fusion/lock.h, src/core/fusion/reactor.h,
	src/core/fusion/ref.h, src/core/fusion/shmalloc.h: Removed
	"#include <config.h>" from headers that get installed. 
	"-DDFB_DEBUG" and "-DFUSION_FAKE" are now command line arguments. 
	When debug is enabled "-DDFB_DEBUG" is contained in
	directfb-internal.pc.

2001-11-26 05:30  dok

	* include/directfb_internals.h, src/input/idirectfbinputbuffer.c:
	Use DFBCALLOC for DFB_ALLOCATE_INTERFACE only if not in debug mode,
	because interfaces are not freed intentionally in debug mode.
	
	Free pending events on destruction of IDirectFBInputBuffer.

2001-11-26 03:50  dok

	* src/core/state.h: Include SMF_SOURCE in SMF_ALL, could have
	caused blitting from the wrong source recently (longer for a very
	few drivers) when switching to another state.

2001-11-26 02:50  dok

	* configure.in, directfb-internal.pc.in: Add "-DFUSION_FAKE" to
	internal CFLAGS in package config file when compiling for single
	application core.

2001-11-26 01:04  dok

	* gfxdrivers/matrox/matrox.h, gfxdrivers/matrox/matrox_bes.c,
	gfxdrivers/matrox/mmio.h, src/idirectfb.c, src/core/gfxcard.c,
	src/core/layers.c, src/core/layers.h, src/core/surfaces.c,
	src/core/surfaces.h: Made additional layers available again, but
	for single app core only yet.  For a strange reason the Matrox BES
	doesn't get visible, until the old version has been used once.
	
	Readded 'surface_soft_lock' as a helper function that behaves like
	the one before.

2001-11-25 23:53  andi

	* src/core/fusion/fusion_internal.h: include string.h to avoid
	warnings with gcc-3.0

2001-11-25 22:38  dok

	* src/input/: idirectfbinputbuffer.c, idirectfbinputdevice.c: When
	an IDirectFBInputBuffer gets destructed it now detaches from all
	devices it was attached to. Not only the first one.

2001-11-25 19:54  dok

	* src/gfx/generic/generic.c: Device name is "Software Rasterizer"
	now, not "Generic".  Vendor string is "Generic" or "MMX" so it
	prints "MMX Software Rasterizer" or "Generic Software Rasterizer".

2001-11-25 04:32  dok

	* src/core/gfxcard.c: Print device name & vendor instead name of
	driver.

2001-11-25 03:23  dok

	* src/core/fbdev.c: Fixed "--fbdev=" option.

2001-11-21 20:28  andi

	* src/core/fusion/fusion_internal.h: #include <asm/page.h>, fixes
	compile error on ppc (PAGE_SIZE was not defined)

2001-11-20 23:05  andi

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c:
	use malloc() and free() instead of alloca().  this fixes a crash,
	when loading jpeg images that are larger than the surface rendered
	to.

2001-11-20 21:45  dok

	* README, inputdrivers/ps2mouse/ps2mouse.c: Added support for
	IMPS/2 by Jason Gaiser <jasno@san.rr.com>.

2001-11-20 15:46  dok

	* src/core/: reactor.c, reactor.h: These are in fusion now.

2001-11-20 13:59  dok

	* acconfig.h, configure.in, gfxdrivers/Makefile.am,
	gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_state.c, gfxdrivers/ati128/ati128_state.h,
	gfxdrivers/ati128/mmio.h, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox.h, gfxdrivers/matrox/matrox_bes.c,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/matrox/matrox_state.h,
	gfxdrivers/matrox/mmio.h, gfxdrivers/neomagic/neo2200.c,
	gfxdrivers/neomagic/neomagic.c, gfxdrivers/neomagic/neomagic.h,
	gfxdrivers/nvidia/nvidia.c, gfxdrivers/nvidia/nvidia.h,
	gfxdrivers/tdfx/tdfx.c, inputdrivers/Makefile.am,
	inputdrivers/h3600_ts/h3600_ts.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/lirc/lirc.c,
	inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/core/Makefile.am,
	src/core/core.c, src/core/core.h, src/core/coredefs.h,
	src/core/coretypes.h, src/core/fbdev.c, src/core/fbdev.h,
	src/core/fonts.c, src/core/fonts.h, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/input.c, src/core/input.h,
	src/core/layers.c, src/core/layers.h, src/core/reactor.c,
	src/core/reactor.h, src/core/state.c, src/core/state.h,
	src/core/surfacemanager.c, src/core/surfacemanager.h,
	src/core/surfaces.c, src/core/surfaces.h, src/core/vt.c,
	src/core/vt.h, src/core/windows.c, src/core/windows.h,
	src/core/fusion/.cvsignore, src/core/fusion/Makefile.am,
	src/core/fusion/arena.c, src/core/fusion/arena.h,
	src/core/fusion/fusion.c, src/core/fusion/fusion.h,
	src/core/fusion/fusion_internal.h, src/core/fusion/fusion_types.h,
	src/core/fusion/list.c, src/core/fusion/list.h,
	src/core/fusion/lock.c, src/core/fusion/lock.h,
	src/core/fusion/reactor.c, src/core/fusion/reactor.h,
	src/core/fusion/ref.c, src/core/fusion/ref.h,
	src/core/fusion/shmalloc.c, src/core/fusion/shmalloc.h,
	src/core/fusion/util.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c, src/gfx/util.c,
	src/gfx/generic/generic.c, src/gfx/generic/generic.h,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/misc/tree.c, src/misc/tree.h,
	src/windows/idirectfbwindow.c: Ok, here it comes, not yet complete
	and far from being finished.  Important things to do are resource
	cleanup (especially when apps get killed), safety, code cleanup and
	so on.	This tree can build both the single and multi app core, you
	can switch at configure time with "--enable-multi".  The single
	application version does not fully work like before yet, missing
	are Suspend/Resume and therefore VT switching during running.  Also
	support for additional display layers is disabled because there
	need to be some changes to the internal layer handling.
	
	There are also enhancements, e.g. abi version handling for drivers.
	 Graphics drivers are now ready for multi head support. Core code
	cleanup is in progress. 'gfxcard.[ch]' and 'input.[ch]' already
	have their private structures hidden.
	
	I am sorry for the changes to the graphics and input drivers, but
	it's much more clean now and drivers work with single and multi app
	core without rebuilding.
	
	You can checkout DirectFB at any time by specifying "-r
	DFB_BEFORE_MULTI".
	
	Any help in optimizing/finishing especially the src/core/fusion
	stuff is appreciated. Thank you!

2001-11-19 06:33  dok

	* fb.modes: Added 320x240 and 400x300 double scan modes.

2001-11-13 08:36  dok

	* AUTHORS, gfxdrivers/nvidia/nvidia.c: Simple blitting support for
	nVidia cards.  Thanks to Daniel Foesch <dfoesch@cs.nmsu.edu>.

2001-11-08 01:53  andi

	* src/core/fbdev.c: fixed initialization of the RGB332 palette,
	white looked a bit like light coffe before (yes, dok you were
	right, that notebook tft was not)

2001-11-06 00:29  andi

	* src/: core/gfxcard.c, gfx/generic/generic.c: - finished
	implementation of RGB332 support, still not optimized but complete.
	 - changed version number of generic driver to 0.5, didnt change
	that number for a _long_ time.

2001-11-05 22:01  dok

	* src/core/: fbdev.c, layers.c: Restore current mode when resuming.

2001-11-05 01:52  andi

	* src/gfx/generic/generic.c: implemented Sacc_to_Aop_rgb332(),
	Sop_rgb332_to_Dacc(), Sop_rgb332_Sto_Dacc()
	
	now blending in 8 bit works.

2001-11-03 06:06  dok

	* gfxdrivers/ati128/ati128.h, gfxdrivers/matrox/matrox.h,
	gfxdrivers/neomagic/neomagic.h, gfxdrivers/tdfx/tdfx.h,
	include/directfb_internals.h: Added includes for types used in
	these headers.

2001-11-03 05:49  dok

	* src/: idirectfb.h, core/core.h, core/coretypes.h, core/fbdev.h,
	core/fonts.h, core/gfxcard.h, core/input.h, core/layers.h,
	core/state.h, core/surfacemanager.h, core/vt.h,
	display/idirectfbdisplaylayer.h, display/idirectfbsurface.h,
	display/idirectfbsurface_layer.h,
	display/idirectfbsurface_window.h, gfx/convert.h,
	gfx/generic/generic.h, media/idirectfbfont.h, misc/gfx_util.h,
	misc/tree.h, misc/utf8.h, windows/idirectfbwindow.h: Fixed includes
	so that each header should compile on its own.	Moved forward
	declaration of 'InputDevice' to 'coretypes.h'.

2001-10-31 16:53  dok

	* interfaces/IDirectFBFont/idirectfbfont_default.c: Default font
	location had changed, did also change in code.

2001-10-30 04:32  andi

	* README: removed description of the examples.

2001-10-30 03:18  dok

	* configure.in, include/directfb.h, include/directfb_internals.h,
	src/directfb.c, src/idirectfb.c, src/interface.c,
	src/display/idirectfbsurface.c: Added OpenGL support via the new
	interface "IDirectFBGL".
	
	Added "IDirectFBSurface::GetGL", it will return the new interface
	if it has been installed (DirectFBGL).
	
	A call to "IDirectFBGL::MakeCurrent" sets the current OpenGL
	context.
	
	Added an optional "Allocate" function to interface implementations,
	the creator of the interface no longer needs to know its content.
	
	Activated DWCAPS_DOUBLEBUFFER for windows that got created
	implicitly by creating a primary surface in non-exclusive mode.
	
	The mouse cursor is now activated by default.
	
	Increased version number to "0.9.8".

2001-10-30 02:27  andi

	* Makefile.am, configure.in, data/.cvsignore, data/Makefile.am,
	data/cursor.dat, data/font.data: - removed examples, moved them to
	DirectFB-examples.

2001-10-30 00:07  andi

	* src/gfx/generic/generic.c: implemented Sop_rgb332_SKto_Aop() for
	stretched color keyed blits.

2001-10-28 22:29  dok

	* src/core/: coretypes.h, reactor.h, surfaces.h: fixed some
	includes

2001-10-28 20:06  dok

	* src/display/idirectfbsurface.h: Fixed typo in comment.

2001-10-28 20:05  dok

	* src/idirectfb.c: removed obsolete code

2001-10-26 14:39  dok

	* ChangeLog, NEWS: Updated for 0.9.7

2001-10-25 17:17  dok

	* src/display/idirectfbsurface.c: Removed commented out code, wrote
	an explanation instead why the state isn't modified.

2001-10-25 16:33  dok

	* include/directfb.h, src/display/idirectfbsurface.c,
	src/display/idirectfbsurface.h, src/gfx/convert.h: Important API
	change:
	
	IDirectFBSurface::SetSrcColorKey has to be called on the source
	now, when blitting to a surface which has source color keying
	enabled.
	
	For IDirectFBSurface::SetSrcColorKey and
	IDirectFBSurface::SetDstColorKey: The color key is now specified by
	three values each 8bit: r, g and b.  They will be converted to the
	pixelformat of the surface automatically.

2001-10-22 19:53  andi

	* patches/Makefile.am: forgot to change filenames.

2001-10-22 19:52  andi

	* patches/: README.aty128fb-2.4.6-benh-andi.patch,
	aty128fb-2.4.6-benh-andi.patch.bz2: [no log message]

2001-10-22 19:52  andi

	* patches/: README.aty128fb-2.4.12-benh.patch,
	aty128fb-2.4.12-benh.patch.bz2: updated aty128fb framebuffer driver
	patch.
	
	the patch was tested with kernel versions from 2.4.7 - 2.4.12. It
	may work with older versions too.

2001-10-21 17:50  dok

	* configure.in, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/matrox/regs.h, include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/surfaces.h, src/gfx/generic/generic.c: Added DSPF_UYVY and
	clarified description of both YUV formats.
	
	Added surface capability DSCAPS_INTERLACED which indicates that the
	surface contains interlaced video data (two fields of half the
	height of the surface are stored interleaved line by line). This
	capability will be set by drivers when a layer is configured with
	DLOP_INTERLACED enabled. Video providers are then able to notify
	the layer driver about field changes (for software driven field
	changes).
	
	Added surface notifications CSNF_SET_EVEN and CSNF_SET_ODD
	(internal), drivers can listen to them to support (de)interlacing
	with software driven field changes.
	
	Added DVCAPS_INTERLACED to indicate that a video provider supports
	notification of field changes if the destination has
	DSCAPS_INTERLACED set.
	
	V4L provider supports (de)interlacing and both YUV formats.
	
	Added support for (de)interlaced video with the Matrox Backend
	Scaler.
	
	Added support for YUY2 as a blitting source on the G200.
	
	Added support for YUY2 and UYVY as a blitting source on the G400.
	
	Made some features available on the G100, stretched blits and
	format conversion are now available, but for 15/16 bit sources
	only. Colorizing is available, too.  Blending could be available,
	but only in stipple mode and no ARGB32;-(
	
	Added support for deinterlacing in df_layer, also demonstrating how
	to test layer configurations. Will fallback to UYVY or even take
	the current format.
	
	AviFile provider returns an error if support for YUY2 or UYVY is
	not available.
	
	Increased version number to 0.9.7.

2001-10-21 01:41  andi

	* src/gfx/generic/generic.c: optimized RGB15 and RGB16 color keyed
	blit (doubled performance on some cpus)
	
	df_dok benchmarks (MPixel/s):
	
	Apple PowerBook G3 400Mhz: 15.2  -> 30.8
	
	Sony Vaio PIII 700 Mhz: 69.5 -> 112.9
	
	PowerPC 823 66 Mhz: 2.65 -> 3.49

2001-10-21 00:35  dok

	* gfxdrivers/matrox/matrox.c: 5 lines added to have G100 support as
	well ;)

2001-10-20 17:01  andi

	* src/core/fbdev.c: - dont call fbdev_set_gamma_ramp() when using
	RGB332 - allow RGB15 mode on fbdev drivers that report to use one
	bit for alpha

2001-10-20 10:52  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	It's now possible to use the V4L Provider on YUV surfaces.

2001-10-20 10:02  dok

	* src/core/: fbdev.c, fbdev.h: Added support for the following
	fb.modes options:
	
	'gsync true'   - Sync On Green enabled 'csync high'   - Composite
	Sync high 'extsync true' - External Sync

2001-10-20 09:47  dok

	* src/idirectfb.c: When reading the first 32 byte of a file in
	CreateImageProvider, open the file/device O_NONBLOCK! With a BTTV
	and DFBSee trying to create an image provider for /dev/video the
	read never returned.

2001-10-20 08:49  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h, matrox_bes.c,
	matrox_state.c: Added acceleration for older Matrox cards (Mystique
	and Millenium I & II).	Tested on a Mystique with SGRAM
	
	Supported are: - Solid rectangle/triangle filling - Solid
	line/rectangle drawing - Blitting with or without source color
	keying
	
	Mystique seems to has a texture mapping unit, but I didn't get it
	working correctly, scaled images looked tiled/interleaved, but it
	was slower than software anyway, so it propably wouldn't trade off.
	
	Fixed BCOL setting (colorkey mask), all 32 bit must be filled for
	these cards.
	
	Added second simple blitting function 'matroxBlit2D_Old', because
	BitBlt programming is too different between new and old cards.
	
	Source and destination surface offset handling is totally
	different, too.
	
	Cleaned up CheckState functions, optimized invalidation rules in
	SetState.  (Don't know why source registers had been invalidated on
	destination changes).
	
	Tested on a Mystique with SGRAM on an Athlon 1.33GHz: - Rectangle
	Filling 823 MPixel/sec - Blitting 46 MPixel/sec (software was about
	30)
	
	Without "--matrox-sgram" feature: - Rectangle Filling 94 MPixel/sec
	!

2001-10-19 23:12  dok

	* src/misc/conf.c: changed the default background color to a more
	"cooler" blue

2001-10-19 23:07  dok

	* src/: core/fbdev.c, misc/conf.c, misc/conf.h: Added option
	"--fbdev=<device>" which lets you specify another device than
	"/dev/fb0".

2001-10-19 22:50  dok

	* inputdrivers/keyboard/keyboard.c, src/directfb.c,
	src/core/core.c, src/core/vt.c, src/core/vt.h: Renamed global
	symbol "vt" to "core_vt".

2001-10-19 22:30  dok

	* include/directfb.h, tools/gendoc.pl: Each interface con now have
	a long description, put it above DEFINE_INTERFACE.  Description of
	structs is now put into types page.
	
	Added some text for IDirectFB.

2001-10-15 04:29  dok

	* src/core/windows.c: After a window gets closed make sure another
	window gets the focus if any.

2001-10-15 02:55  dok

	* inputdrivers/keyboard/keyboard.c: Reenabled changing of
	controlling tty when vt switching is used.  This is needed,
	otherwise mode switching ioctls have no effect.

2001-10-12 14:24  dok

	* gfxdrivers/matrox/matrox_state.c: Use video alpha method when
	modifying destinations alpha channel.  Text and blended blits look
	much better now when done on a window with alpha.

2001-10-12 02:03  dok

	* inputdrivers/keyboard/keyboard.c, src/core/fbdev.c,
	src/core/fbdev.h: Several enhancements make DirectFB now really
	usable with "--no-vt-switch", with this option you are able to run
	DirectFB programs without super user privileges. You need
	read/write access to /dev/fb and you should start it from the
	console, i.e. not within X.
	
	DirectFB now restores the palette during deinitialization. 
	DirectFB now turns cursor and blanking back on.  DirectFB now
	restores the terminal attributes like local echo.

2001-10-10 15:21  dok

	* gfxdrivers/matrox/matrox.c: Added checks for supported source
	formats.

2001-10-09 10:49  dok

	* gfxdrivers/matrox/matrox.c: Better check for
	supported/unsupported pixelformats.

2001-10-08 09:08  dok

	* interfaces/IDirectFBFont/idirectfbfont_ft2.c, src/core/gfxcard.c,
	src/gfx/generic/generic.c: Source surfaces are now locked before
	destination surfaces.  Commented out error message of FreeType2
	Font loader when the file could not be opened.

2001-10-07 05:55  dok

	* patches/neofb-0.2.1-linux-2.4.10.patch.bz2: Ready for 2.4.10
	neofb.

2001-10-07 05:07  andi

	* src/gfx/generic/generic.c: fixed warning

2001-10-07 05:01  andi

	* acconfig.h, configure.in, include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	src/core/fbdev.c, src/gfx/convert.h, src/gfx/generic/generic.c,
	src/misc/gfx_util.c: added 8bit RGB332 pixelformat. This is usefull
	to test DirectFB on old unix workstations which had 8-bit
	framebuffers on board (sparc,pa-risc,mips) Implementation in not
	complete yet.
	
	If you want RGB332 for any reason, you have to enable it at compile
	time using  ./configure  --enable-rgb332

2001-10-05 21:27  andi

	* src/: gfx/generic/generic.c, core/layers.c: fixed gcc-3.0
	warnings.

2001-10-05 15:17  dok

	* src/core/fbdev.c: Do a more verbose error message if no supported
	modes were found in /etc/fb.modes and the current mode is not
	supported, too.  Pixelformat of current mode is printed in this
	case.

2001-10-03 00:07  dok

	* ChangeLog, NEWS: R34D7 4 D4 R3L3453

2001-10-03 00:04  dok

	* gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/regs.h,
	include/directfb.h, src/core/layers.h,
	src/display/idirectfbdisplaylayer.c: Added
	'IDirectFBDisplayLayer::Set/GetColorAdjustment()' along with four
	capability flags for each adjustment (brightness, contrast, hue,
	saturation).
	
	Implemented color adjustment for Matrox BES (brightness and
	contrast supported in YUV only).

2001-10-02 22:10  dok

	* configure.in, docs/.cvsignore, docs/Makefile.am,
	docs/html/.cvsignore, docs/html/Makefile.am, tools/gendoc.pl: Fixed
	documentation generation according to distcheck's complains.

2001-10-02 17:38  dok

	* ChangeLog, NEWS: Updated ChangeLog and summarized changes since
	0.9.5 in NEWS.	Changed version number to 0.9.6 by previous commit.

2001-10-02 17:35  dok

	* .cvsignore, configure.in, src/core/fbdev.c: We now accept
	compatible pixelformats, e.g. IPAQ's RGB format is compatible with
	RGB16.
	
	Added evil workaround for automake using non substituted @AS@ like
	a gcc.
	
	Added stamp-h1 to .cvsignore

2001-09-27 05:56  dok

	* src/core/windows.c: Check enter/leave and focus after ungrabbing
	pointer.

2001-09-26 19:56  dok

	* inputdrivers/h3600_ts/h3600_ts.c: Eek, broke button
	press/release, fixed ;)

2001-09-26 19:51  dok

	* inputdrivers/h3600_ts/h3600_ts.c: If there is no pressure, the
	x/y fields seem to be invalid.	Check them only if there is
	pressure.

2001-09-26 19:31  dok

	* src/core/windows.c: Fixed handling of absolute axis coordinates
	in window stack cursor handling.

2001-09-26 18:47  dok

	* configure.in, include/directfb.h, inputdrivers/Makefile.am,
	inputdrivers/h3600_ts/.cvsignore,
	inputdrivers/h3600_ts/Makefile.am,
	inputdrivers/h3600_ts/h3600_ts.c: Added untested H3600 Touchscreen
	driver.
	
	Fixed definition of DFXL_ALL (DFXL_FILLTRIANGLE was missing).

2001-09-23 06:33  dok

	* include/directfb_internals.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/core/gfxcard.c, src/core/gfxcard.h, src/core/state.h,
	src/core/surfacemanager.c, src/core/surfacemanager.h,
	src/core/surfaces.c, src/core/surfaces.h, src/core/windows.c,
	src/gfx/generic/generic.c: Use 'DFBCALLOC' in
	'DFB_ALLOCATE_INTERFACE', forgot that one.
	
	Fixed small event dispatching bug in window stack, a button event
	was sent to the focused window even if it's not under the cursor
	and doesn't grab the pointer.
	
	When CapsLock is hold down you can raise the window under the
	cursor with a click.
	
	The following changes fix problems related to heavy threading, e.g.
	more than 50 threads on my machine actively using DirectFB:
	
	Added 'surfacemanager_lock/unlock()' and divided surface manager
	functions into two groups: functions doing the lock themselves and
	functions that can only be called between lock/unlock. Functions
	doing the lock themself must not be called between lock/unlock.
	
	Added 'state_lock/unlock(state)' that are called in
	drawing/blitting functions from 'gfxcard.c'. Merged
	'card->source_locked' and 'source_locked (generic.c)' into new
	'state->source_locked'.
	
	Added 'buffer->video.locked' so the surface manager does not try to
	kick out surface buffers that are currently locked, which could end
	up in a dead lock.

2001-09-21 23:34  dok

	* src/: core/core.c, core/input.c, core/vt.c, misc/mem.c,
	misc/mem.h: Fixed "Could not disallocate VT" problem, exit handler
	calls normal deinit function now instead of the emergency deinit.
	Additionally input devices are deinitialized from emergency deinit.
	
	Fixed problem with malloc/free debugging that occured when exit
	handler for memory leak checking was called before exit handler of
	the core.  Memory leak checking is now called at the end of the
	core exit handler if debugging is enabled.

2001-09-21 17:19  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Fixed segfault when loading big PNGs, seems that there was a
	problem with alloca. However it works with malloc, but maybe the
	problem is that libpng has a bug that does no harm when using
	malloc, because of other address ranges.
	
	Also switched to 'png_read_image()' to have deinterlacing handled
	automatically.

2001-09-21 02:37  dok

	* src/core/surfacemanager.c: Fixed surface manager bug. When
	surface gets kicked out of video memory, make sure that the system
	memory instance of the buffer is up to date.  This fixes "missing
	font letters" for example.

2001-09-18 23:54  dok

	* include/directfb.h, src/directfb.c, src/core/windows.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/windows/idirectfbwindow.c: Added result 'DFB_DESTROYED' which
	is currently returned by 'IDirectFBWindow' and 'IDirectFBSurface'
	if the window or surface has been destroyed.
	
	Added window event type 'DWET_DESTROYED' and changed meaning of
	'DWET_CLOSE'.  -	  DWET_CLOSE	      = 0x00000004,  /*
	window got closed by window -					   
		 manager or the application -				   
			 itself */ +	      DWET_CLOSE	  =
	0x00000004,  /* closing this window has been +			   
				  requested only */ +	      
	DWET_DESTROYED	    = 0x00000008,  /* window got destroyed by
	global +					       
	deinitialization function or the +				   
		      application itself */
	
	Added 'IDirectFBWindow::Close()' that puts a 'DWET_CLOSE' event
	into the window's event queue. The event dispatcher thread can then
	decide to close it.
	
	Added 'IDirectFBWindow::Destroy()' which actually destroys the
	window after sending a 'DWET_DESTROYED' event, so the event
	dispatcher thread can notice and release any interfaces belonging
	to it.
	
	After a window has been destroyed by 'IDirectFBWindow::Destroy()'
	most functions of 'IDirectFBWindow' will return 'DFB_DESTROYED'.
	
	There is no need to destroy windows explicitly with this new
	function if no threads are doing 'WaitForEvent()'. If an
	'IDirectFBWindow' has no more references after 'Release()' the
	window gets destroyed implicitly if it hasn't been destroyed
	before.
	
	If you hold down 'CapsLock' over a window (as if you want to move
	it) and press the key 'C' a 'DWET_CLOSE' will be sent to the
	window.

2001-09-16 11:46  dok

	* gfxdrivers/matrox/Makefile.am, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_bes.c, gfxdrivers/matrox/mmio.h,
	gfxdrivers/matrox/regs.h, include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, src/core/gfxcard.c, src/gfx/generic/generic.c: Matrox Backend
	Scaler support added.  YUY2 added.
	
	With a matrox try: df_layer <any.avi>

2001-09-14 01:49  dok

	* src/core/: fbdev.c, layers.h: Forgot to set DLCAPS_SURFACE for
	primary layer (fbdev).	Just changed the name of a function
	parameter in 'layers.h'.

2001-09-14 01:39  dok

	* include/directfb.h, src/idirectfb.c, src/core/surfaces.c,
	src/core/windows.c, src/core/windows.h,
	src/display/idirectfbsurface_window.c: Added new window capability,
	from the header:
	
	DWCAPS_DOUBLEBUFFER ... /* The window's surface is double	   
			 buffered. This is very useful			   
	      to avoid visibility of content			       
	that is still in preparation.				  Normally
	a window's content can				   get visible
	before an update if				there is another
	reason causing				   a window stack repaint.
	*/
	
	Use 'alloca()' in 'IDirectFB::CreateImageProvider()' instead of
	'malloc()', return appropriate error if file could not be opened.

2001-09-07 02:04  andi

	* gfxdrivers/ati128/ati128.c: in driver_deinit() card is set a
	state, where the aty128fb driver should never hang.

2001-09-07 01:15  dok

	* src/core/vt.c: The file descriptor of the allocated VT is now
	closed before deallocation.  Added error checking to deallocation
	code.

2001-09-07 00:48  dok

	* src/core/core.c: Call 'sched_yield()' after mutex lock failed. 
	Call graphics card driver deinit in emergency deinit.

2001-09-06 22:31  dok

	* ChangeLog, NEWS: Wrote a summary of changes after 0.9.4.

2001-09-04 18:50  dok

	* include/directfb.h, src/idirectfb.c: Added a return value type
	for enumeration callbacks: DFBEnumerationResult.  There are two
	possible values: DFENUM_OK and DFENUM_CANCEL.

2001-09-03 03:15  dok

	* src/core/fbdev.c: Accept interlaced and double scan modes,
	320x200 looks really cool in some way.
	
	Here is a 320x200 entry for fb.modes:
	
	mode "320x200-70"     geometry 320 200 320 200 16     timings 79440
	16 16 20 4 48 1     double true endmode

2001-09-03 00:58  neo

	* src/directfb.c: Don't use the ERRORMSG() macro in
	DirectFBCreate() to bail out in case of dfb_config == NULL because
	ERRORMSG() uses dfb_config->quiet.

2001-08-30 09:28  dok

	* include/directfb.h, src/idirectfb.c: Added the field
	"video_memory" to "DFBCardCapabilities" which specifies the amount
	of video memory in bytes.

2001-08-30 09:19  dok

	* src/core/: windows.c, windows.h: It's now possible to move the
	window under the cursor by holding down CapsLock.  Should this be
	optional as it renders the key useless for windowed apps?

2001-08-30 08:54  dok

	* src/core/core.c: Check for "card != NULL" and "vt != NULL" in
	emergency shutdown which can happen before these are initialized.

2001-08-27 05:04  dok

	* gfxdrivers/matrox/matrox_state.c: fill all 32 bit of FCOL

2001-08-23 22:48  dok

	* src/core/input.c: Reverted last patch that disabled deinit/init
	during suspend/resume.

2001-08-21 04:37  dok

	* interfaces/IDirectFBVideoProvider/:
	idirectfbvideoprovider_avifile.cpp,
	idirectfbvideoprovider_libmpeg3.c, idirectfbvideoprovider_swf.c:
	Release destination surface in destruct method if still playing.

2001-08-20 21:28  dok

	* src/core/input.c: dont deinit/init input drivers during
	suspend/resume

2001-08-20 18:06  dok

	* include/directfb.h, interfaces/IDirectFBFont/idirectfbfont_ft2.c:
	Added DFDESC_WIDTH and the appropriate field in the description to
	specify font widths differing from the height, e.g. for non-square
	pixels.

2001-08-17 12:09  dok

	* src/windows/idirectfbwindow.c: detach from reactor AFTER
	'window_remove()' so we get the DWET_CLOSE event

2001-08-17 07:22  dok

	* src/core/core.c: In 'core_deinit_emergency()', e.g. when a signal
	is caught, try to prohibit graphics hardware access by doing a
	'gfxcard_sync()' and a 'pthread_mutex_trylock()' on 'card->lock' up
	to 100 times, this may fail if the current thread locked it itself.
	
	Fixes corruption of X when moving the mouse cursor during a crash.

2001-08-16 23:32  dok

	* src/gfx/generic/generic.c: When blitting with blending don't read
	the destination and don't add it to the source if DSBF_ZERO is set
	as the destination blend function.  Some comments added in gAcquire
	for better getting-into-the-code-again :)

2001-08-16 02:13  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	The transparent color index did not always refer to a unique color
	in the color table, i.e. it's just the index that makes the pixels
	transparent.  Current version uses an artificial colorkey and
	preserves non-transparent pixels from being the same color as the
	key, at least for RGB565.  Not the best solution yet though.

2001-08-12 03:20  dok

	* include/directfb.h: DFBFontDescription's field 'attributes' was
	not of type 'DFBFontAttributes'.

2001-08-11 19:30  dok

	* src/: core/fonts.c, display/idirectfbsurface_layer.c,
	display/idirectfbsurface_window.c: Fixed segfault in
	'fonts_destruct()' that occurs if no glyph has been loaded at all
	(check for font->glyph_infos != NULL).
	
	Added unlocking and font releasing to destruct functions of Window
	and Layer implementation of IDirectFBSurface, too.

2001-08-11 04:10  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Added cleanup handler that stops capturing.  This handler gets
	called by core_deinit() and core_deinit_emergency().  The only way
	to keep it capturing is to kill it with signal 9 or disable signal
	handling.

2001-08-11 03:53  dok

	* src/core/sig.h: sig_remove_handlers was an implicit declaration,
	added it to the header

2001-08-11 03:45  dok

	* src/core/core.c: remove signal handlers in deinitialization,
	fixes the following bug message:
	
	(!) --->  CAUGHT SIGNAL 2  <---  (!?!)	*** BUG ALERT [vt_close()
	multiple times] *** vt.c (77)

2001-08-10 01:00  dok

	* include/directfb.h,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c:
	Added 'IDirectFBImageProvider->GetImageDescription' which fills out
	a 'DFBImageDescription', it contains a 'DFBImageCapabilities' field
	with the flags 'DICAPS_ALPHACHANNEL' and 'DICAPS_COLORKEY' for now.
	 Additionally the Image Description contains the colorkey if
	DICAPS_COLORKEY is set, e.g. when loading a transparent GIF.
	
	The GIF loader no longer generates an alphachannel from the
	colorkey, because it turned the transparent color into black.
	
	If you want to have transparent GIFs, use colorkeying which is way
	faster anyway.
	
	TODO: Turn 'IDirectFBSurface->SetSrcColorKey()' into a pixelformat
	independent function that is called on the source for keyed
	blitting to a destination, currently the colorkey of the source is
	set at the destination in the source's pixelformat.

2001-08-08 01:44  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h, matrox_state.c,
	matrox_state.h: - Major cleanup.  - Blending state fixes.

2001-08-07 00:54  neo

	* include/directfb.h: added more info to the header file (and thus
	to the generated documentation)

2001-08-06 13:58  andi

	* src/core/vt.c: compile fix for mips, alpha and sparc
	architectures. SIGUNUSED is not defined in asm/signal.h on these
	platforms.

2001-08-05 21:37  dok

	* inputdrivers/lirc/lirc.c: Added character keys, only keys not in
	the list are F1 - F12, should we add them, too?

2001-08-05 21:29  dok

	* configure.in, inputdrivers/Makefile.am,
	inputdrivers/lirc/.cvsignore, inputdrivers/lirc/Makefile.am,
	inputdrivers/lirc/lirc.c: Added fiorst version of a LIRC input
	driver.
	
	Simply name your keys (in the lirc config file) like the DirectFB
	keycode enum does without the "DIKC_" prefix, e.g. "OK", "MENU" or
	"VOLUMEUP".

2001-08-01 20:39  dok

	* gfxdrivers/matrox/matrox_state.c: use surface width instead of
	pitch for texture width

2001-07-31 18:24  andi

	* gfxdrivers/matrox/matrox.c: fixed small render bug in
	StretchBlit()

2001-07-28 21:28  dok

	* configure.in: handle case where $target is not set at all (tested
	for "NONE" before)

2001-07-28 09:03  dok

	* src/misc/mem.c: Memory debugging is thread safe now.	Instead of
	exitting send SIGTRAP to ourself, when inconsistency is detected.

2001-07-26 04:52  dok

	* inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/interface.c, src/core/core.c,
	src/core/core.h, src/core/coretypes.h, src/core/fbdev.c,
	src/core/fbdev.h, src/core/fonts.c, src/core/gfxcard.c,
	src/core/gfxcard.h, src/core/input.c, src/core/input.h,
	src/core/layers.c, src/core/layers.h, src/core/reactor.c,
	src/core/surfacemanager.c, src/core/surfacemanager.h,
	src/core/surfaces.c, src/core/surfaces.h, src/core/vt.c,
	src/core/windows.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/misc/Makefile.am, src/misc/conf.c,
	src/misc/gfx_util.c, src/misc/mem.c, src/misc/mem.h,
	src/misc/tree.c, src/misc/util.h, src/windows/idirectfbwindow.c:
	New memory allocation debugging code that prints out a list of
	unfreed areas with function name it was allocated in, file and line
	number.
	
	Deinitialization code cleaned up and reactivated.
	
	Much code cleanup (file internal functions made static and moved to
	the bottom).

2001-07-25 22:22  dok

	* inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/idirectfb.c, src/interface.c, src/core/core.c,
	src/core/fbdev.c, src/core/fonts.c, src/core/gfxcard.c,
	src/core/input.c, src/core/reactor.c, src/core/surfacemanager.c,
	src/core/surfaces.c, src/core/vt.c, src/core/windows.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/misc/conf.c, src/misc/gfx_util.c,
	src/misc/tree.c, src/misc/util.h, src/windows/idirectfbwindow.c: If
	debug mode is enabled all 'malloc()', 'calloc()', 'realloc()' cause
	a debug message with size, function name, file, and line number. 
	Replaced some 'malloc()'/'free()' pairs by 'alloca()'.
	
	After DirectFBInit/DirectFBCreate about 1500 bytes where allocated
	;-) Rest of the initial memory size relies to
	libc/libdl/libpthread.

2001-07-25 18:36  dok

	* src/display/idirectfbsurface.c: Return DFB_INVARG if text is NULL
	in DrawString.	Unlock the surface in IDirectFBSurface_Destruct if
	it's locked.

2001-07-24 18:29  neo

	* include/directfb.h, inputdrivers/keyboard/keyboard.c: Unified
	types used for key_ascii and key_unicode.  Please note that no
	inputdriver sets the unicode field at the moment.

2001-07-24 16:43  dok

	* src/core/: gfxcard.c, surfaces.c, surfaces.h: Added internal
	surface locking flag CSLF_FORCE, that forces 'surface_hard_lock()'
	to try a video instance.  'gfxcard_state_acquire()' uses the flag
	for the destination surface if the graphics operation is blitting.

2001-07-23 22:48  andi

	* src/directfb.c: bugfix: removed free()s after provider->Release()
	is called. This fixes segmentation fault when using a background
	image.

2001-07-23 20:03  dok

	* src/core/: input.c, surfaces.c: The pitch for system memory
	surface buffers is now aligned to a multpiple of 4 bytes.
	
	Do not set SCHED_RR for input threads, use normal scheduling now,
	highest priority there is ok.

2001-07-23 17:20  andi

	* src/core/fbdev.c: rewrote gamma initialization code, should work
	in all depths now.

2001-07-22 06:45  dok

	* include/directfb.h, inputdrivers/ps2mouse/ps2mouse.c,
	src/core/input.c: New input event field "timestamp" which can be
	set by the driver.  I also added the flag "DIEF_TIMESTAMP", PS2
	driver makes already usage of it.  I reenabled setting high
	priority for input threads.

2001-07-21 06:34  dok

	* src/: idirectfb.c, core/fbdev.c, core/fbdev.h, core/gfxcard.c:
	renamed global variable "display" to "fbdev"

2001-07-20 00:55  dok

	* gfxdrivers/nvidia/.cvsignore: ignore file

2001-07-20 00:54  dok

	* configure.in, gfxdrivers/Makefile.am,
	gfxdrivers/nvidia/Makefile.am, gfxdrivers/nvidia/nvidia.c,
	gfxdrivers/nvidia/nvidia.h: First version of nVidia RIVA
	TNT/TNT2/GeForce driver.  Accelerates FillRectangle, DrawRectangle,
	DrawLine, FillTriangle without blending, no blitting support at
	all.
	
	Tested on GeForce 256 SDRAM doing 830 MPixels/sec in FillRectangle.

2001-07-19 14:09  neo

	* patches/Makefile.am: adapted Makefile to file changes

2001-07-18 19:22  andi

	* patches/: aty128fb-2.4.6-benh-andi.patch,
	aty128fb-2.4.6-benh-andi.patch.bz2: ok, i will compress it...

2001-07-18 19:10  andi

	* patches/: README.aty128fb-2.4.6-benh-andi.patch,
	README.aty128fb-fixes-patch-2.4.6, aty128fb-2.4.6-benh-andi.patch,
	aty128fb-fixes-patch-2.4.6.bz2: made a new aty128fb patch based on
	the driver in benh's tree

2001-07-18 15:19  andi

	* src/core/fbdev.c: initialize palette/gamma during initialization.
	this fixes the "strage-color-effect" in ati framebuffer drivers
	without the patch in DirectFB/patches. A new patch that fixes only
	the remaining problems is underway.

2001-07-18 14:18  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: fixed typos

2001-07-17 14:15  dok

	* gfxdrivers/ati128/ati128.c: only check source format if source
	exists

2001-07-17 14:06  dok

	* gfxdrivers/ati128/ati128.c: check source and destination format
	in CheckState, hopefully rejecting surfaces with width < 8 or
	height < 8 now.

2001-07-17 00:45  neo

	* interfaces/: IDirectFBFont/idirectfbfont_ft2.c,
	IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	IDirectFBImageProvider/idirectfbimageprovider_png.c,
	IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cpp,
	IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c,
	IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c: use
	INTERFACE_GET_DATA macro (reduced codesize by 182 lines / 0.5%)

2001-07-17 00:01  neo

	* src/: input/idirectfbinputbuffer.c, windows/idirectfbwindow.c:
	(IDirectFB[InputBuffer|Window]->WaitForEventWithTimeout) Try to
	lock the events_mutex and check if there are events. If no events
	are pending, get current time before locking the mutex. This way
	the time it takes to aquire the mutex is taken into account for the
	timeout.

2001-07-16 20:49  neo

	* NEWS, configure.in, include/directfb.h, src/idirectfb.c: Added
	IDirectFB->CreateInputBuffer() that allows to easily create input
	buffers for specific events.
	
	Use the new function in a number of demos.
	
	Bumped version number to 0.9.5.

2001-07-16 18:21  neo

	* src/core/windows.c: Attach all inputdevices to the window stack,
	not only those of type DIDTF_KEYBOARD and DIDTF_MOUSE. Let's see if
	this is a good idea...

2001-07-16 17:41  neo

	* tools/gendoc.pl: do not sort struct entries alphabetically, keep
	them in the original order

2001-07-15 02:22  dok

	* src/core/: gfxcard.c, gfxcard.h: Forced CCF_CLIPPING to
	0x00000001, was 0 before (first enum value).  No hardware clipping
	has been used while this bug existed.

2001-07-13 15:51  dok

	* src/core/vt.c: define SI_KERNEL for glibc 2.1.x

2001-07-11 20:45  dok

	* src/core/fbdev.c: Fixed a bug in 'primaryFlipBuffers()' that
	caused windowstack updates that are done on the whole windowstack
	not to get visible when buffer mode is DLBM_BACKSYSTEM. (e.g.
	df_window with software driver)

2001-07-11 01:07  dok

	* src/core/fbdev.c: If a mode has been set by 'fbdev_set_mode()'
	and the detected pixelformat is DSPF_RGB15, set mode->bpp to 15. 
	If mode->bpp would be 16 bit, we won't find the mode afterwards,
	because we will search for a 15 bit mode if the current pixelformat
	is DSPF_RGB15.
	
	Fixes bogus "Setting primary layer buffer mode failed!" problems.

2001-07-10 03:05  dok

	* include/directfb.h, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c:
	Added 'IDirectFBInputDevice->AttachInputBuffer()'.  You are now
	able to receive events from multiple input devices with one buffer,
	nice with 'WaitForEvent()'.
	
	CAUTION: Releasing an IDirectFBInputBuffer does only detach from
	the device it was created from, following input events will cause a
	crash! Will be fixed soon.

2001-07-08 15:47  dok

	* patches/Makefile.am, patches/README.aty128fb-fixes-patch-2.4.6,
	patches/README.atyfb_patch_2.4.0-andi,
	patches/README.matroxfb-vsync-irq-patch-2.4.6,
	patches/README.neofb-0.2.1-patch-2.4.6,
	patches/aty128fb-fixes-patch-2.4.6.bz2,
	patches/aty128fb_patch_2.4.0-andi,
	patches/matroxfb-vsync-irq-patch-2.4.6.bz2,
	patches/matroxfb-vsync-irq.patch, src/core/fbdev.c,
	patches/neofb-0.2.1-patch-2.4.3.bz2,
	patches/neofb-0.2.1-patch-2.4.6.bz2: Call 'surface_flip_buffers()'
	after panning instead of before.  Do a 'gfxcard_sync()' before
	FBIO_WAITFORVSYNC, actually a hack to reduce the time between
	vertical retrace interrupt and pan, as panning does a
	'gfxcard_sync()', too.
	
	Updated all patches for 2.4.6, made usage of new kernel macros like
	'interruptible_sleep_on()' in Matrox patch.

2001-07-08 11:00  dok

	* configure.in, directfb-internal.pc.in,
	gfxdrivers/ati128/Makefile.am, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/neomagic/Makefile.am, gfxdrivers/tdfx/Makefile.am,
	inputdrivers/joystick/Makefile.am,
	inputdrivers/keyboard/Makefile.am,
	inputdrivers/ps2mouse/Makefile.am,
	inputdrivers/serialmouse/Makefile.am,
	interfaces/IDirectFBFont/Makefile.am,
	interfaces/IDirectFBImageProvider/Makefile.am,
	interfaces/IDirectFBVideoProvider/Makefile.am, src/Makefile.am,
	src/interface.c, src/core/Makefile.am, src/core/gfxcard.c,
	src/core/input.c: Renamed LIBDIR to MODULEDIR and exported it in
	the pkgconfig file.  This is the base directory for installed
	modules ("$exec_prefix/lib/directfb"). When installing a graphics
	driver "/gfxdrivers" has to be added to that directory.
	
	To query: "pkg-config --variable=moduledir directfb-internal"

2001-07-08 09:35  dok

	* .cvsignore, Makefile.am, configure.in, directfb-internal.pc.in,
	include/Makefile.am, src/Makefile.am, src/core/Makefile.am,
	src/display/Makefile.am, src/gfx/Makefile.am,
	src/input/Makefile.am, src/media/Makefile.am, src/misc/Makefile.am,
	src/windows/Makefile.am: Internal headers (all except "directfb.h")
	are now installed to "$prefix/include/directfb-internal". Files
	from "include", that are "directfb_internals.h" and
	"directfb-version.h", will be installed directly into this
	directory along with "idirectfb.h" from "src". Other headers from
	"src" will be in the same subdirectory as in the "src" tree. This
	way the '#include's are the same whether a module is built within
	or outside of the DirectFB source tree. First step to make it
	easier to write third party DirectFB modules in a seperate package.
	
	There is a new pkgconfig file "directfb-internal.pc" which will
	tell the third party configure script where the internal headers
	are installed to. It will output
	"$prefix/include/directfb-internal" when pkgconfig is called with
	"--cflags".
	
	Next thing to do is version checking on modules, because it
	probably will crash when using a module compiled with 0.9.4 is used
	with 0.9.5.

2001-07-06 18:13  dok

	* ChangeLog, NEWS: Added summary of changes between 0.9.3 and 0.9.4
	to NEWS.  Generated ChangeLog, maybe Mitch can generate the better
	one with LDAP support.

2001-07-05 15:19  dok

	* src/gfx/generic/: Sacc_to_Dop_rgb16_MMX.s,
	Sacc_to_Dop_rgb32_MMX.s, generic.c: Removed 'Dop' as it was always
	set to 'Aop', besides the two filenames above all functions are
	called '... to_Aop()' now. Also made 'RUN_PIPELINE()' do a "do {
	(*funcs++)(); } while (*funcs);" instead of "while (*funcs) {
	(*funcs++)(); }".
	
	These gave up to 70% boost for drawing solid lines and rectangles
	on a P3 800.

2001-07-04 12:20  dok

	* TODO: First entry in our TODO file ;)

2001-07-03 14:11  neo

	* include/directfb.h: reordered Cursor interface declarations to
	get nicer documentation

2001-07-02 21:37  neo

	* src/gfx/generic/generic.c: implemented
	Sop_a8_set_alphapixel_Dop_a8 (untested)

2001-07-02 18:07  dok

	* src/display/idirectfbdisplaylayer.c: Do not return 'DFB_INVARG'
	in 'SetBackgroundMode()' on success, could irritate someone ;)

2001-07-02 14:04  dok

	* interfaces/IDirectFBVideoProvider/:
	idirectfbvideoprovider_avifile.cpp,
	idirectfbvideoprovider_libmpeg3.c: compile, compile

2001-07-02 13:59  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c:
	compile with recent changes to sub surface handling

2001-07-02 13:25  dok

	* src/core/windows.c: killed one obsolete parameter and 4 FIXMEs
	regarding proper setting of it ;)

2001-07-02 13:12  dok

	* src/core/windows.c: initial support for axis motion events with
	absolute values

2001-07-02 10:38  dok

	* include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/core/surfaces.h,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/misc/util.c, src/misc/util.h,
	src/windows/idirectfbwindow.c: Fixed a very bad bug, don't use
	'realloc()' on structures containing data you already installed
	listeners for with a pointer to it as the context ;-) Interface
	constructors no longer use 'realloc()' for 'thiz->priv' to store
	their extra data, they do the (bigger) 'malloc()' themselves before
	calling the parent constructor. Each interface constructor should
	check for 'thiz->priv == NULL', if this is the case they should do
	the 'malloc()' and then call the parent constructor if one exists. 
	This fixes nearly every possible bug, because listener functions
	wrote into memory where there shouldn't.
	
	New result code 'DFB_INVAREA' that is returned if a surface has no
	valid area or a region or rectangle specified does not match, e.g.
	SetClip returns it if the clipping region specified does not
	intersect with the current (sub) area.	It is also returned by the
	drawing and blitting functions if the source or the destination has
	a current (sub) area of size 0x0. That can happen if the surface is
	a sub surface, e.g. at x = 900 and y = 600, and the surface gets
	resized to something below that.
	
	Enhanced sub surface handling, there are three rectangles along
	with an IDirectFBSurface, these are "wanted", "granted" and
	"current". The first one is the rectangle passed to
	'GetSubSurface()', it doesn't matter if it's too large or has
	negative starting coordinates as long as it intersects with the
	"granted" rectangle of the parent. The "wanted" rectangle should be
	seen as the origin for operations on that surface. Non sub surfaces
	have a "wanted" rectangle of '{ 0, 0, width, height }'. The second
	one, "granted", is the intersection of the "wanted" rectangle and
	the "granted" one of the parent. If they do not intersect
	'DFB_INVAREA' is returned. For non sub surfaces its the same as the
	"wanted" rectangle, because it's the rectangle describing the whole
	surface. The "wanted" and "granted" are calculated just once at
	creation, the "current" rectangle is the intersection of the
	"granted" rectangle and the surface extents.  'SetClip()' and many
	other functions are limited by that one.  This way sub surface area
	information is preserved during surface resizing, e.g.	when
	resizing a window. Calling 'SetClip()' with NULL causes the
	clipping region to exactly cover the "current" rectangle, also the
	flag 'clip_set' is cleared causing the clipping region to be set to
	the new "current" after resizing. If 'SetClip()' is called with a
	clipping region specified, an intersection is done with the
	"wanted" rectangle that is then stored in 'clip_wanted' and
	'clip_set' is set. However, if there is no intersection
	'DFB_INVARG' is returned, otherwise another intersection is made
	with the "current" rectangle and gets applied to the surface's
	state. Each resize, after the "current" rectangle is updated, the
	clipping region is set to NULL or 'clip_wanted' depending on
	'clip_set'.  This way even clipping regions are restored or
	extended automatically.  It's now possible to create a fullscreen
	primary and call 'SetVideoMode()' with different resolutions or
	pixelformats several times without the need for "updating" the
	primary surface by recreating it ;)
	
	So '->req_rect' is now replaced by '->area.wanted' and
	'->clip_rect' is replaced by '->area.current' for the most cases.
	
	'IDirectFBSurface->Lock()' now adds the "current" rectangle's
	offset to the base address, so applications should use
	'GetVisibleRectangle()' before writing into a locked sub surface to
	get the offset from the "wanted" rectangle and the limits.  If
	there is no "current" rectangle 'DFB_INVAREA' is returned.
	
	Added 'region_rectangle_intersect()' and did some minor
	optimizations.

2001-07-02 04:24  dok

	* src/: idirectfb.c, core/fbdev.c: SetVideoMode keeps current
	buffer mode, this prevents an already created flipping primary
	surface from turning into a non flipping one.
	
	Fixed 'primarySetConfiguration()' and 'primaryTestConfiguration()'
	for 15 bit modes, they were broken since layer API changes last
	week.
	
	If 'fbdev_set_mode()' no longer overwrites the primary layer's
	surface format with DSPF_UNKNOWN in case of an error in
	'fbdev_get_pixelformat()'.  It also restores the video mode before
	returning DFB_UNSUPPORTED.

2001-07-02 01:31  dok

	* src/: core/coredefs.h, core/state.c, display/idirectfbsurface.c,
	windows/idirectfbwindow.c: Added macro 'CAUTION' to "coredefs.h"
	that should be used when unimplemented features or unsolved
	problems have a serious impact on further execution, e.g. crashes
	or wrong behaviour.
	
	Added surface resize handling code in 'IDirectFBSurface_listener'. 
	If the surface is a sub surface it's area will become the
	intersection of the old area and the new surface extents. Prints
	caution message if there is no intersection or the clipping
	rectangle is out of bounds.
	
	Disabled code in 'IDirectFBWindow->Resize()' that is unneeded now,
	because surface resizing is now handled in
	'IDirectFBSurface_listener'.
	
	Removed 'memcmp()' in 'IDirectFBSurface->SetClip()', it's always
	marked as modified now, I hope some benchmarking will show which
	way is the best, but this mostly depends on how often 'SetClip()'
	is called with the same clip.
	
	Fixed typo or braino in listener attached by
	'state_set_destination()'.
	
	Changes above not fully tested, will test GDK backend soon.

2001-07-01 22:21  dok

	* src/: directfb.c, core/vt.c, misc/conf.c, misc/conf.h: VT
	switching by pressing Ctrl+Alt+<F?> is now disabled by default,
	because it makes debugging impossible with only one machine (you
	cannot switch back to the console where you started gdb until you
	kill the program). The code is very experimental and sometimes it
	hangs during 'input_resume()'.
	
	Added option "--[no-]vt-switching" and wrote a better description
	for the similar looking option "--no-vt-switch", maybe we should
	rename that old one.

2001-06-30 16:05  dok

	* include/directfb.h, include/directfb_internals.h, src/directfb.c,
	src/idirectfb.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/windows/idirectfbwindow.c: Added
	internal macro 'INTERFACE_GET_DATA(i)' which checks the 'thiz'
	pointer, declares 'i_data *data', checks 'thiz->data' and writes it
	into 'data'.  About 200 code lines less now ;)
	
	Added result code 'DFB_THIZNULL' and 'DFB_IDNOTFOUND' (returned by
	'GetInputDevice' and 'GetDisplayLayer').
	
	Added 'DirectFBErrorString(result)' which returns a description
	string for the result, internally used by 'DirectFBError(msg,
	result)'.
	
	Added some more argument checks.

2001-06-30 13:11  dok

	* src/display/idirectfbdisplaylayer.c: in CreateWindow: return
	DFB_INVARG if height == 0 or width == 0

2001-06-28 23:19  neo

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: ooops, forgot to register the GetCapabilities method...

2001-06-28 12:58  neo

	* src/core/layers.c: don't try to set opacity on unexistant
	cursor_window

2001-06-28 02:50  dok

	* src/core/layers.c: call window_repaint() on the cursor window in
	layer_cursor_load_default (fixes the bug that the cursor is
	invisible after enable until it is moved or the window stack gets
	repainted)
	
	do window_set_opacity() after window_init()

2001-06-28 02:01  dok

	* src/: core/core.c, misc/conf.c, misc/conf.h: added option
	"--[no-]sync" that enables/disables a call to "sync()" in
	"core_init()", default is no
	
	I will write a "sync" in my rc.

2001-06-28 01:20  dok

	* src/core/: sig.c, vt.c: sig.c: - signal handler does a kill with
	the received signal instead of SIGHUP
	
	vt.c: - if the signal source is not the kernel, call the previously
	installed   signal handler for that signal (does not seem to work
	for Kaffe) - use other signals than SIGUSR1 and SIGUSR2 that does
	not collide with   Kaffe's garbage collector, a bit dirty
	(SIGUNUSED+10/11), but works

2001-06-28 00:53  neo

	* include/directfb.h: removed a trailing comma from an enum

2001-06-27 22:22  dok

	* include/directfb.h: fixed description of SetSrcColorKey added
	initial API support for streamed video providers

2001-06-27 19:52  dok

	* src/core/fbdev.c: also did the same mode checking fix for the
	current mode (e.g. with vesafb)

2001-06-27 19:49  neo

	* include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	Renamed color to saturation in DFBColorAdjustment and friends.

2001-06-27 19:20  dok

	* src/core/fbdev.c: flickering in windowstack fixed, got broken
	tonight

2001-06-27 19:11  dok

	* src/core/fbdev.c: fixed bug that caused an error "Could not set
	default mode!" if the first entry in fb.modes doesn't have 15, 16,
	24 or 32 bit

2001-06-27 19:09  dok

	* src/core/: gfxcard.h, input.h, layers.h, reactor.h: applied patch
	from Joachim "roh" Steiger that adds missing pthread includes

2001-06-27 15:59  dok

	* configure.in: should be 0.9.4 after recent API changes

2001-06-27 15:58  dok

	* include/directfb.h, src/directfb.c, src/idirectfb.c,
	src/core/fbdev.c, src/core/layers.h, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface_layer.c, src/misc/conf.h: Changed
	Display Layer Configuration API: - DFBDisplayLayerCapabilities
	extended now including color keying and other - removed
	DFBDisplayLayerModeFlags, added DFBDisplayLayerOptions instead -
	added IDirectFBDisplayLayer-> Get/Set/TestConfiguration that take
	the new   DFBDisplayLayerConfig for almost all settings like pixel
	resolution, pixel   format, DFBDisplayLayerOptions and more -
	TestConfiguration takes an additional DFBDisplayLayerConfigFlags to
	  optionally write back the settings that failed - removed GetSize,
	SetBufferMode and SetMode - added SetColorKey and SetScreenLocation
	
	Followed API changes in IDirectFB, IDirectFBDislayLayer,
	IDirectFBSurface_Layer and some demos.	Cleaned 'fbdev.c' (that
	handles the primary layer) to follow internal display layer driver
	API changes.

2001-06-27 15:32  neo

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	check return values of new ioctl calls

2001-06-27 13:04  neo

	* include/directfb.h,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	tools/gendoc.pl: Extended IDirectFBVideoProvider API:  
	IDirectFBVideoProvider->GetCapabilities()  retrieves info about the
	provider   IDirectFBVideoProvider->GetColorAdjustment()  
	IDirectFBVideoProvider->SetColorAdjustment()  get and set values to
							adjust the video
	colors
	
	The DFBColorAdjustment maps directly to the Video4Linux API. We
	might want to change it to take floating point values instead of
	__u16 ?!
	
	Output useful error message if doc generator dies.

2001-06-26 19:21  dok

	* src/core/sig.c: don't catch SIGPOLL (a.k.a. SIGIO)

2001-06-25 17:38  neo

	* include/directfb.h, src/directfb.c, src/core/layers.c,
	src/core/layers.h, src/core/windows.c, src/core/windows.h,
	src/display/idirectfbdisplaylayer.c: Reenabled key events for
	windows (we lost them while adding support for console switching).
	
	Changed cursor handling: Cursor can be enabled/disabled and opacity
	can be set independently. Also cursor appears centered now.
	
	Process key events in df_window: Cursor keys move active window.

2001-06-24 22:45  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	fixed transparency problems for large palettes (transparent index >
	127)

2001-06-23 15:05  dok

	* gfxdrivers/matrox/matrox_state.c, include/directfb_internals.h,
	src/directfb.c, src/core/reactor.c, src/core/reactor.h,
	src/core/sig.c, src/core/surfacemanager.c, src/core/vt.c,
	src/core/vt.h, inputdrivers/keyboard/keyboard.c: Added console
	switching support during runtime!!!
	
	Experimental but working... use Ctrl+Alt + (F1 - F12) ;) Had to add
	much code to src/core/vt.c that does the biggest part of the job
	(reentrant signal handler ;-) Added VT_ACTIVATE code to the global
	keyboard handler in src/directfb.c, which handled
	Ctrl+Alt+Backspace so far.  Also modified the keyboard driver,
	because vt switching code in src/core/vt.c already had to open the
	target tty.
	
	Turn on debugging during configure if you have problems with
	switching and mail the output to the developers list.
	
	Other fixes and additions:
	
	Another 'mga_waitfifo()' call corrected (10 -> 12).
	
	Fixed bug in 'surfacemanager_suspend()' that broke some surfaces,
	e.g. fonts. It did not assure a valid system memory instance.  It
	still does not care about video only surfaces.
	
	Fixed 'reactor_dispatch()', RS_REMOVE was not handled.
	
	Added RS_DROP that tells 'reactor_dispatch()' not to do any further
	dispatching of the event.
	
	Do a 'kill (0, SIGHUP)' in signal handler instead of 'exit()',
	after all our handlers are removed, of course ;-)

2001-06-23 05:49  dok

	* README: Require working frame buffer device, not only compiled
	in.  Fixed a typo.

2001-06-22 22:25  neo

	* src/core/fbdev.c: fixed a bug in the fb switching code that made
	RGB32 modes fail

2001-06-22 21:34  neo

	* src/misc/gfx_util.c: fixed another bug in copy_buffer_32().

2001-06-22 21:29  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	src/misc/gfx_util.c: Fixed a stupid bug in copy_buffer_32.
	
	The PNG provider ponly writes directly to destination surface if
	format == ARGB, not if bpp == 4.
	
	The GIF provider did not take destination pitch into account.

2001-06-22 21:05  neo

	* src/misc/gfx_util.c: optimzed copy_buffer_32()

2001-06-22 19:44  neo

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	src/misc/gfx_util.c, src/misc/gfx_util.h: Added alpha transparency
	support to GIF ImageProvider.
	
	Fixed alpha handling in scale_linear_32 and copy_buffer_32: If the
	destination format does not support alpha, blend the image data
	over a black background since most images have undefined color
	values in the transparent areas.

2001-06-22 05:19  dok

	* src/: idirectfb.c, misc/conf.c, misc/conf.h: Added option
	"force-windowed" which makes SetCooperativeLevel return
	DFB_ACCESSDENIED for other levels than DFSCL_NORMAL.
	
	df_andi, df_particle and pss don't abort anymore if setting the
	cooperative level fails.
	
	Check for 'argc <= 1' instead of 'argc == 1' in df_dok, because
	'main()' can be called with argc set to 0 ;-)
	
	Moved global variables of df_window into the main function, removed
	layer enumeration that did not make any sense because the
	IDirectFBDisplayLayer has only been constructed for the primary
	layer, and that is DLID_PRIMARY just passed to GetDisplayLayer.

2001-06-22 01:24  dok

	* configure.in: initialize AVIFILE to "no"

2001-06-21 23:17  dok

	* configure.in: first check $target for system type, if $target ==
	"NONE" check $host

2001-06-21 22:47  dok

	* interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c:
	hopefully fixed the alphachannel bug from gif loading (internal
	buffer was not set to '0xFF000000 | color')

2001-06-21 20:36  dok

	* gfxdrivers/matrox/: matrox.c, mmio.h: Use mga_in32 in
	mga_waitfifo rather than mga_in8.  Added mga_waitfifo(1) in
	FlushTextureCache (I forgot).  Problems with G200@ARM are gone now.

2001-06-21 14:43  neo

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	: forgot this one when changing the headers

2001-06-21 14:39  neo

	* gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128_state.c,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/neomagic/neo2200.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/tdfx/tdfx.c, inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/idirectfb.c, src/interface.c,
	src/core/Makefile.am, src/core/core.c, src/core/core.h,
	src/core/coredefs.h, src/core/coretypes.h, src/core/fbdev.c,
	src/core/fbdev.h, src/core/fonts.c, src/core/fonts.h,
	src/core/gfxcard.c, src/core/gfxcard.h, src/core/input.c,
	src/core/input.h, src/core/layers.c, src/core/layers.h,
	src/core/reactor.c, src/core/reactor.h, src/core/sig.c,
	src/core/state.c, src/core/state.h, src/core/surfacemanager.c,
	src/core/surfacemanager.h, src/core/surfaces.c,
	src/core/surfaces.h, src/core/vt.c, src/core/windows.c,
	src/core/windows.h, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbdisplaylayer.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_layer.h,
	src/display/idirectfbsurface_window.c,
	src/display/idirectfbsurface_window.h, src/gfx/util.c,
	src/gfx/generic/generic.c, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputdevice.c, src/media/idirectfbfont.c,
	src/media/idirectfbfont.h, src/misc/conf.c, src/misc/conf.h,
	src/misc/gfx_util.c, src/misc/gfx_util.h, src/misc/tree.c,
	src/misc/tree.h, src/misc/utf8.c, src/misc/utf8.h,
	src/windows/idirectfbwindow.c, src/windows/idirectfbwindow.h: Great
	Header Cleanup (TM): collected typedefs in core/coretypes.h removed
	inclusion of headers from most headers

2001-06-21 11:02  dok

	* gfxdrivers/matrox/: matrox.c, matrox_state.c: check for surfaces
	bigger than 2048x2048 apply mask 0x7fff to pitch before setting it

2001-06-21 10:26  dok

	* gfxdrivers/matrox/matrox_state.c: DIFFUSEDALPHA for BLIT_NOFX was
	wrong, ALPHACTRL programmed to 1 for BLIT_NOFX

2001-06-20 18:05  neo

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p: fixed a braino and some compiler warnings

2001-06-20 16:50  neo

	* configure.in, src/gfx/generic/Makefile.am: Removed
	-fexpensive-optimization from compiler flags since -O2 already has
	this. Added -fomit-frame-pointer unless debugging is turned on.

2001-06-19 19:22  neo

	* src/misc/utf8.c: optimized utf8_get_char() for the default case
	(7bit ASCII)

2001-06-19 19:02  neo

	* src/misc/tree.c: Reduced size of fast_keys array to 96 by
	skipping the first 32 entries (not used for glyphs in 7bit ASCII).

2001-06-19 16:52  dok

	* src/core/fbdev.c: fixed 'read_modes()' and 'fbdev_set_mode()' for
	mode testing, 'fbdev_get_pixelformat()' fails on some framebuffer
	drivers that do not fill out fbdev_var_screeninfo in
	FB_ACTIVATE_TEST mode.

2001-06-19 16:15  dok

	* src/core/windows.c: don't process click events either (if cursor
	is disabled)

2001-06-19 16:11  dok

	* src/core/windows.c: do not process mouse events if cursor is
	invisible

2001-06-18 19:24  neo

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p: Install a KillHandler for AviPlay and delete the object on
	interface destruction. Fixes the segfault in
	IDirectVideoProvider_AviFile_Destruct().

2001-06-18 13:53  neo

	* configure.in: forgot to remove debugging output

2001-06-18 13:47  neo

	* configure.in: Rewrote handling of CFLAGS and CXXFLAGS so we
	respect the values that have been set before configure is run.

2001-06-18 11:33  neo

	* src/: core/gfxcard.c, misc/tree.c: Removed the utf8 optimizations
	(only call utf8_* funcs if c & 0x08) since they give no measurable
	speed improvement (0.0 - 0.05 %)  and may cause trouble for badly
	encoded strings.
	
	Do not insert values for fast keys into the binary tree. Free all
	values in the fast_keys array on tree destruction.

2001-06-18 08:23  dok

	* include/directfb.h,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	src/core/gfxcard.c, src/core/gfxcard.h,
	src/display/idirectfbsurface.c: Default font loader did not set
	'data->surface'.  'gfxcard_draw_line()' is now
	'gfxcard_draw_lines()'.  Added 'IDirectFBSurface->DrawLines()'. 
	df_dok uses 'DrawLines()' now for 10 lines each, added 'myrand()'
	that speeds up the benchmarks a bit, too.

2001-06-18 06:39  dok

	* src/core/: fonts.c, fonts.h, gfxcard.c: Killed a modulo, a
	division, an array lookup and an 'if' for each glyph in
	gfxcard_drawstring:
	
	CoreGlyphData->start now is the starting x coordinate within its
	surface.  Added CoreGlyphData->surface that holds the surface the
	glyph is in.
	
	Again, 395 -> 410 KChars/sec here.

2001-06-18 06:12  dok

	* src/: core/gfxcard.c, misc/tree.c: Only call 'utf8_get(&c)' if 'c
	& 0x80'.  Added 128 "fast keys" to tree code, it's an array of
	values for a faster lookup of keys 0 - 127.
	
	These two optimizations should increase DrawString performance on
	slow machines (even on my Celeron 533 with Matrox G400: 374 -> 395
	KChars/sec).

2001-06-18 03:59  dok

	* src/directfb.c: Respective error message in DirectFBError for
	DFB_MISSINGIMAGE.  (did a commit on 'idirectfb.c' last time instead
	of 'directfb.c')

2001-06-18 03:56  dok

	* include/directfb.h, src/display/idirectfbdisplaylayer.c:
	SetBackgroundMode returns DFB_MISSINGIMAGE if DLBM_IMAGE has been
	set without a background image being set before.

2001-06-18 03:17  dok

	* configure.in, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/matrox/regs.h,
	src/core/gfxcard.h, src/core/surfaces.c: Do not use "-g" as
	default, add "-g3" to CXXFLAGS if in debug mode.
	
	Added new function GfxCard->FlushTextureCache: after the video
	memory has been written to by the CPU (e.g. modification of a
	texture) make sure the accelerator won't use cached texture data.
	This new function is called each surface_unlock (we should check if
	it was a soft lock to video memory).
	
	Implemented FlushTextureCache in Matrox driver, because font
	problems are solved if any TEXORGn register is written to. Maybe
	this is just a coincidence, but it works ;-)

2001-06-16 19:13  dok

	* src/core/: windows.c, windows.h: The long awaited killer feature:
	cursor movements are clipped by the desktop ;-)
	
	CoreWindowStack has a DFBRegion called "cursor_region", so we can
	add things like window clipped cursor during grab easily.

2001-06-16 18:13  dok

	* include/directfb.h: Replaced all identifiers "id", for Objective
	C and maybe other languages.

2001-06-16 14:04  dok

	* include/directfb.h, src/windows/idirectfbwindow.c: Applied patch
	from Till Adam <till@adam-lilienthal.de> that adds the
	IDirectFBWindow->WaitForEventWithTimeout that I forgot.

2001-06-14 18:37  mitch

	* ChangeLog: Updated ChangeLog.

2001-06-14 17:19  dok

	* NEWS: updated

2001-06-14 03:40  andi

	* tools/raw32toraw24.c: compile fix for big endian machines

2001-06-13 22:20  mitch

	* src/core/input.c: Re-enabled and fixed two lines which
	close/reopen the input devices on Suspend()/Resume().

2001-06-13 17:26  neo

	* include/directfb.h, src/core/input.c: Added DIDID_REMOTE to the
	list of predefined device IDs.	Uniquify device IDs.

2001-06-13 08:13  dok

	* gfxdrivers/matrox/: matrox.c, matrox.h, matrox_state.c: - log2
	had to return ret, always - optimized TMU calculations, better
	rounding, looks always good now

2001-06-12 23:11  neo

	* configure.in: include Video4Linux video provider in the configure
	result list

2001-06-12 23:01  dok

	* interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	call v4l_stop() in v4l_deinit() to eventually stop the v4l thread

2001-06-12 22:50  neo

	* configure.in: use correct variables for configure result list

2001-06-12 22:45  neo

	* README: describe how to configure a serial mouse for DirectFB

2001-06-12 22:44  dok

	* configure.in: use $JPEG and $PNG

2001-06-12 22:29  dok

	* configure.in: do not print "on" for MMX support

2001-06-12 22:18  dok

	* configure.in: Prints summary of build options and built
	providers/drivers.

2001-06-12 20:24  dok

	* README: added Joachim Steiger to "thanks to"

2001-06-12 20:11  neo

	* configure.in, gfxdrivers/Makefile.am: Check for <linux/fb.h>
	Check which gfxdrivers can be compiled by looking at <linux/fb.h>.

2001-06-12 20:00  dok

	* NEWS: fixed typo added note about conditional build of providers

2001-06-12 19:58  dok

	* NEWS: updated

2001-06-12 19:24  neo

	* README: update

2001-06-12 19:23  neo

	* README, configure.in, include/directfb.h,
	interfaces/IDirectFBFont/Makefile.am,
	interfaces/IDirectFBImageProvider/Makefile.am: Even more remote
	control keycodes.
	
	Allow conditional build of gif, jpeg and png image providers. 
	Allow conditional build of freetype font provider.  We strongly
	suggest you don't disable the build of these modules since the
	example code and most DirectFB apps depend on them.

2001-06-12 16:40  neo

	* include/directfb.h: added a few more remote control keycodes we
	might need

2001-06-12 15:05  neo

	* src/: core/fonts.c, misc/tree.c, misc/tree.h: Added tree_lock()
	and tree_unlock() to allow to use the tree in a thread-safe way.
	fonts_get_glyph_data() locks and unlocks the tree so it can be
	called from multiple threads. Unfortunately this brings down
	performance a little.

2001-06-12 13:17  neo

	* inputdrivers/serialmouse/serialmouse.c: include <sys/time.h> and
	<sys/types.h> for select()

2001-06-11 22:53  dok

	* include/directfb_version.h.in,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	tools/gendoc.pl: fixed license, oops

2001-06-11 20:36  neo

	* inputdrivers/serialmouse/serialmouse.c: The old implementation of
	the MouseMan protocol definitely did not work, this one might do
	the trick...

2001-06-11 20:17  neo

	* include/directfb.h, inputdrivers/keyboard/keyboard.c,
	inputdrivers/serialmouse/serialmouse.c: Replaced old remote control
	keycodes with new unified keycodes.  Removed special handling for
	remote control from keyboard driver.  Decreased wait cycles in
	initialization of serial mouse driver.

2001-06-11 17:43  dok

	* src/: idirectfb.c, core/layers.c, core/windows.c, core/windows.h,
	windows/idirectfbwindow.c: split up window_create and added
	window_init that has to be called after window_create. i split it
	up because the code in window_init generates events, but the
	reactor can only be attached to after window_create.  this fixes
	the missing initial DWET_POSITION_SIZE event.

2001-06-11 12:26  neo

	* src/core/windows.c: Fixed a bug in window_request_focus() where
	the wrong window was emitting the DWET_LOSTFOCUS event.
	
	Rewrote large parts of df_window to make it behave more like a
	windowing system as you know it. You can specify a video file on
	the command line to bring some live into the second window.

2001-06-11 04:59  dok

	* gfxdrivers/matrox/matrox.c: ifdef for FB_ACCEL_MATROX_MGAG400

2001-06-11 04:57  dok

	* src/core/sig.c: Removed signal handler for SIGSTKFLT as it is not
	available on all architectures.

2001-06-10 23:25  dok

	* README: Added "Thanks to" section

2001-06-09 17:18  dok

	* src/core/: surfaces.c, windows.c: Finished update_region for
	windowstack repaints.  Nothing will be drawn that is not visible
	after all.  Every further windowstack optimizations have to be made
	in other functions like window_move (blitting within same surface,
	actually from front to back buffer, but that is default ;-)
	
	Fixed segfault in surface_destroy (many demos crashed at the end),
	df_porter did not run at all, because surface_destroy was called
	from font managering system.

2001-06-09 17:03  dok

	* .cvsignore: added ltconfig
	
	any volunteer to fix DirectFB for the new autotools?

2001-06-09 17:03  dok

	* src/windows/idirectfbwindow.c: df_fire: use DirectFBSetOption to
	force a systemonly surface for the fire window (actually for all
	windows) instead of implicitly forcing it by setting the desktop
	buffer mode to backsystem.
	
	IDirectFBWindow: detach from reactor before destroying the window,
	return RS_REMOVE when DWET_CLOSE is received in reaction function.

2001-06-09 01:31  dok

	* src/core/windows.c: rewrote windowstack_repaint, no performance
	gain yet, but this recursive function is designed to just pass the
	rectangles that are not covered by the opaque window of the
	iteration level (make update_region calls in all 16 different
	cases).

2001-06-09 00:32  dok

	* include/directfb.h, src/directfb.c, src/export_list.sym,
	src/misc/conf.c, src/misc/conf.h: Applied patch submitted by Till
	Adam <till@adam-lilienthal.de> with a check if DirectFBSetOption
	has been called before DirectFBCreate.	Also added function to
	directfb.h.

2001-06-08 20:44  dok

	* include/directfb.h, src/directfb.c,
	src/input/idirectfbinputbuffer.c: Added
	IDirectFBInputBuffer->WaitForEventWithTimeout (secs, nano_secs).

2001-06-08 17:48  neo

	* inputdrivers/serialmouse/serialmouse.c: fixed(?) handling of
	middle mouse button for MS3 protocol

2001-06-08 15:37  neo

	* inputdrivers/serialmouse/serialmouse.c: We now support the
	following serial mice:
	
	  "MS"		   two buttons MS protocol
	  "MS3" 	   MS with ugly 3-button extension
	  "MouseMan"	   referred to as MS + Logitech extension in
	mouse(4)
	  "MouseSystems"   most commonly used serial mouse protocol
	nowadays
	
	All this is highly experimental and needs more testing.

2001-06-08 14:06  neo

	* inputdrivers/: ps2mouse/ps2mouse.c, serialmouse/serialmouse.c:
	Small code cleanup in ps2mouse inputdriver.
	
	Added support for MS 3 button mouse protocol (this protocol sucks!)
	to the serial mouse inputdriver. Put "mouse-protocol=ms3" into your
	directfbrc.

2001-06-08 13:30  dok

	* src/core/windows.c: typo fixed

2001-06-08 10:50  dok

	* src/interface.c: Print init type message if an interface
	implementation is loaded.

2001-06-08 10:28  dok

	* src/: core/windows.c, core/windows.h, windows/idirectfbwindow.c,
	windows/idirectfbwindow.h: moved window event buffer into interface
	using pthread conditions windowing events are dispatched through
	reactors now (~100 lines stripped from core ;-)

2001-06-07 23:46  dok

	* src/input/idirectfbinputbuffer.c: use pthread conditions

2001-06-07 22:39  dok

	* gfxdrivers/matrox/matrox_state.c: fixed bug when blitting from
	32bit without blending, e.g. --blit-convert in df_dok

2001-06-07 22:06  dok

	* inputdrivers/: joystick/joystick.c, keyboard/keyboard.c,
	ps2mouse/ps2mouse.c, serialmouse/serialmouse.c: follow changes

2001-06-07 22:04  dok

	* include/directfb.h, src/core/input.h, src/core/windows.c: API
	Change: The Input Device ID no longer contains the type of input
	device.
	
	Added DFBInputDeviceTypeFlags to DFBInputDeviceDescription that
	contains the type of the input device specified by one or more of
	the following flags:
	
	DIDTF_KEYBOARD	    = 0x00000001,  /* can act as a keyboard */
	DIDTF_MOUSE	    = 0x00000002,  /* can be used as a mouse */
	DIDTF_JOYSTICK	    = 0x00000004,  /* can be used as a joystick */
	DIDTF_REMOTE	    = 0x00000008   /* device is a remote control */
	
	Something like
	
	...	  DIDID_TYPE(id) == DIDT_MOUSE
	
	should be replaced by
	
	...	  desc.type & DIDTF_MOUSE

2001-06-07 19:01  dok

	* inputdrivers/joystick/joystick.c,
	inputdrivers/keyboard/keyboard.c, inputdrivers/ps2mouse/ps2mouse.c,
	inputdrivers/serialmouse/serialmouse.c, src/core/input.h:
	InputDevice info.driver_name/vendor are now pointers

2001-06-07 18:00  neo

	* inputdrivers/serialmouse/Makefile.am: s/msmouse/serialmouse/

2001-06-07 17:17  neo

	* NEWS, README, configure.in, inputdrivers/Makefile.am,
	inputdrivers/serialmouse/.cvsignore,
	inputdrivers/serialmouse/Makefile.am,
	inputdrivers/serialmouse/serialmouse.c: Renamed msmouse inputdriver
	to serialmouse since this beast will support other more serial
	mouse protocols in the future.

2001-06-07 17:06  neo

	* NEWS, src/misc/conf.c, src/misc/conf.h: Added config option
	"mouse-protocol" (for serial mouse only). You need to specify the
	protocol type if you want to use a serial mouse.  At the moment
	only "ms" (2-button) is supported. I will add more serial mouse
	protocols later.
	
	Check if a mouse is attached to the serial port.

2001-06-07 02:09  mitch

	* ChangeLog: Updated ChangeLog.

2001-06-07 01:49  dok

	*
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c,
	src/directfb.c, src/core/fbdev.c, src/core/reactor.h,
	src/core/state.c, src/core/surfacemanager.c, src/core/surfaces.c,
	src/core/surfaces.h, src/core/windows.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c:
	surface listener ported to reactors

2001-06-06 23:40  neo

	* configure.in, inputdrivers/Makefile.am: added MS Serial Mouse
	inputdevice, disabled at the moment

2001-06-06 21:36  dok

	* inputdrivers/joystick/Makefile.am,
	inputdrivers/joystick/joystick.c, inputdrivers/joystick/joystick.h,
	inputdrivers/keyboard/Makefile.am,
	inputdrivers/keyboard/keyboard.c, inputdrivers/keyboard/keyboard.h,
	inputdrivers/ps2mouse/Makefile.am,
	inputdrivers/ps2mouse/ps2mouse.c, inputdrivers/ps2mouse/ps2mouse.h,
	src/directfb.c, src/core/Makefile.am, src/core/input.c,
	src/core/input.h, src/core/reactor.c, src/core/reactor.h,
	src/core/windows.c, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c,
	src/input/idirectfbinputdevice.h: added common event dispatching
	code in reactor.[ch] all input event listener handling and event
	dispatching done through reactors input driver code cleanup removed
	unneeded input driver headers

2001-06-06 21:36  neo

	* interfaces/IDirectFBFont/idirectfbfont_default.c: forgot to
	change config -> dfb_config here

2001-06-06 21:27  neo

	* gfxdrivers/matrox/matrox_state.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/tdfx/tdfx.c, inputdrivers/keyboard/keyboard.c,
	inputdrivers/ps2mouse/ps2mouse.c, src/directfb.c, src/core/core.c,
	src/core/coredefs.h, src/core/fbdev.c, src/core/fonts.c,
	src/core/gfxcard.c, src/core/vt.c, src/core/windows.c,
	src/misc/conf.c, src/misc/conf.h: renamed global variable config to
	dfb_config

2001-06-06 20:59  neo

	* inputdrivers/ps2mouse/ps2mouse.c: removed some unused includes

2001-06-06 19:38  neo

	* NEWS: updated NEWS

2001-06-06 18:19  neo

	* configure.in, interfaces/.cvsignore, interfaces/Makefile.am,
	interfaces/idirectfbfont_default.c, interfaces/idirectfbfont_ft2.c,
	interfaces/idirectfbimageprovider_gif.c,
	interfaces/idirectfbimageprovider_jpeg.c,
	interfaces/idirectfbimageprovider_png.c,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_libmpeg3.c,
	interfaces/idirectfbvideoprovider_swf.c,
	interfaces/idirectfbvideoprovider_v4l.c,
	interfaces/IDirectFBFont/.cvsignore,
	interfaces/IDirectFBFont/Makefile.am,
	interfaces/IDirectFBFont/idirectfbfont_default.c,
	interfaces/IDirectFBFont/idirectfbfont_ft2.c,
	interfaces/IDirectFBImageProvider/.cvsignore,
	interfaces/IDirectFBImageProvider/Makefile.am,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_gif.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_jpeg.c,
	interfaces/IDirectFBImageProvider/idirectfbimageprovider_png.c,
	interfaces/IDirectFBVideoProvider/.cvsignore,
	interfaces/IDirectFBVideoProvider/Makefile.am,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_avifile.cp
	p,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_libmpeg3.c
	, interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_swf.c,
	interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c:
	restructured interfaces directory

2001-06-06 17:50  neo

	* src/gfx/generic/: generic.c, generic.h: Tweaked
	Sop_a8_set_alphapixel_Dop_rgb* functions as suggested by Fefe. 
	Speeds up DrawString by several percents.

2001-06-06 17:32  dok

	* Makefile.am, configure.in, inputdrivers/.cvsignore,
	inputdrivers/Makefile.am, inputdrivers/joystick/.cvsignore,
	inputdrivers/joystick/Makefile.am,
	inputdrivers/joystick/joystick.c, inputdrivers/joystick/joystick.h,
	inputdrivers/keyboard/.cvsignore,
	inputdrivers/keyboard/Makefile.am,
	inputdrivers/keyboard/keyboard.c, inputdrivers/keyboard/keyboard.h,
	inputdrivers/ps2mouse/.cvsignore,
	inputdrivers/ps2mouse/Makefile.am,
	inputdrivers/ps2mouse/ps2mouse.c, inputdrivers/ps2mouse/ps2mouse.h,
	src/core/Makefile.am, src/core/core.c, src/core/input.c,
	src/core/input.h: inputdrivers modularized

2001-06-06 16:15  neo

	* src/: core/fbdev.c, core/fonts.c, core/gfxcard.c, core/input.c,
	core/surfacemanager.c, core/surfaces.c, core/windows.c,
	display/idirectfbdisplaylayer.c, display/idirectfbsurface.c,
	input/idirectfbinputbuffer.c, input/idirectfbinputdevice.c,
	media/idirectfbfont.c, windows/idirectfbwindow.c: use calloc()
	instead of malloc();memset()

2001-06-06 16:02  neo

	* interfaces/: idirectfbfont_default.c, idirectfbfont_ft2.c,
	idirectfbimageprovider_gif.c, idirectfbimageprovider_jpeg.c,
	idirectfbimageprovider_png.c, idirectfbvideoprovider_avifile.cpp,
	idirectfbvideoprovider_libmpeg3.c, idirectfbvideoprovider_v4l.c:
	use calloc() instead of malloc();memset();

2001-06-06 15:57  dok

	* include/directfb_internals.h, src/core/core.c, src/core/core.h,
	src/core/gfxcard.c: started to begin using calloc ;-) added
	core_load_modules( dir, callback, ctx ), a common function for
	loading modules in a directory, callback can return one of the
	following values: MODULE_LOADED_CONTINUE, MODULE_LOADED_STOP,
	MODULE_REJECTED made usage of the new function in gfxcard.c for
	driver loading

2001-06-06 13:28  neo

	* NEWS: I managed to put even more typos in here...

2001-06-06 02:26  dok

	* NEWS: s/Joachim/Johhanes/
	
	Sorry.

2001-06-06 01:58  dok

	* src/core/: surfacemanager.c, surfaces.c, windows.c: set alpha
	value in state only if it's not the desired opacity removed comment
	from surfacemanager deallocate and allocate video buffers until
	proper reallocation method is present

2001-06-05 21:12  dok

	* include/directfb_internals.h,
	interfaces/idirectfbvideoprovider_v4l.c, src/directfb.c,
	src/idirectfb.c: enhanced the suspend/resume hack added
	DFBAddSuspendResumeFunc and DFBRemoveSuspendResumeFunc registered
	functions are called in IDirectFB->Suspend/Resume V4l Provider
	closes video device in suspend and reopens it in resume

2001-06-05 20:57  neo

	* NEWS, configure.in: bumped version number to 0.9.3

2001-06-05 20:22  neo

	* include/directfb.h, src/media/idirectfbfont.c, src/misc/util.c,
	src/misc/util.h, tools/gendoc.pl: New internal function
	rectangle_union.
	
	New API function Font->GetStringExtends which allows to retrieve
	the logical and ink extents of a given string. Refer to the
	documentation in directfb.h.
	
	Modified gendoc.pl so it translates empty comment lines into
	paragraphs.

2001-06-05 18:57  dok

	* src/core/core.c: disabled normal deinit code, mutex locking in
	exit handlers is evil! we have to rewrite all this deinit shit.

2001-06-05 17:48  dok

	* src/core/windows.c: send DWET_CLOSE event before destroying
	window how can we make sure that another thread that hangs on the
	mutex lock gets the event BEFORE destroying the window? maybe we
	should tear the event buffer off the window structure.

2001-06-04 17:02  dok

	* interfaces/Makefile.am: fixed make clean ;)

2001-06-04 15:39  dok

	* patches/matroxfb-vsync-irq.patch: patched the patch, ioctl should
	return -EINTR and not -ERESTARTSYS
	
	from linux/errno.h
	
	#ifdef __KERNEL__
	
	/* Should never be seen by user programs */ #define ERESTARTSYS 512
	...

2001-06-04 11:57  dok

	* src/core/gfxcard.c: check for row_width > 0 before modulo

2001-06-02 20:14  neo

	* interfaces/idirectfbimageprovider_png.c: applied a patch provided
	by Johannes Zellner <johannes@zellner.org> that adds support for
	loading interlaced PNGs

2001-06-01 13:51  neo

	* tools/: Makefile.am, raw16toraw24.c, raw32toraw24.c: fixed
	compiler warnings in tools compile (but do not install) tools

2001-05-31 11:39  neo

	* include/directfb.h, interfaces/idirectfbfont_ft2.c,
	src/gfx/convert.h: added support for loading fonts w/o antialiasing
	(DFFA_MONOCHROME) added span_a1_to_a8 and span_a1_to_argb functions

2001-05-29 17:10  dok

	* src/gfx/generic/generic.c: turn off console blanking do (w&1)
	instead of w -= 2 in loop

2001-05-29 16:20  neo

	* include/directfb.h, interfaces/idirectfbfont_ft2.c,
	src/core/gfxcard.c, src/display/idirectfbsurface.c: Allow to
	specify font attributes (DFFA_NOKERNING, DFFA_NOHINTING) when
	calling FontCreate() to control how fonts are loaded and layouted.
	
	Added new function IDirectFBSurface->GetFont().

2001-05-29 15:00  neo

	* interfaces/idirectfbfont_ft2.c: check elapsed time more often
	when running stretch-blit benchmark

2001-05-29 14:30  dok

	* src/gfx/generic/generic.c: same optimizations for
	Sop_rgb15_to_Dacc

2001-05-29 14:18  dok

	* src/gfx/generic/generic.c: Sop_rgb16_to_Dacc does aligned 32bit
	reads now! Performance of FillRectangle(blend) went from 1.73 to
	3.09 without MMX!
	
	Andi: Please test it on PowerPC!

2001-05-29 13:35  dok

	* src/directfb.c: print banner in DirectFBCreate instead of
	DirectFBInit

2001-05-28 21:21  dok

	* interfaces/Makefile.am, src/interface.c: interface modules are
	now installed into subdirectories depending on the type, e.g.
	/usr/local/lib/directfb/interfaces/IDirectFBFont/libidirectfbfont_f
	t2.so

2001-05-28 21:15  andi

	* src/gfx/generic/generic.c: fixes for C versions of
	Sacc_add_to_Dacc_C() and Cacc_add_to_Dacc_C(), this fixes the
	"falling corpse"-bug in ClanBomber on non-mmx machines.

2001-05-28 20:04  dok

	* configure.in: yet another started thing ;-)
	
	will be a 3d space shooter

2001-05-28 18:53  andi

	* src/core/vt.c: VT_ACTIVATE and VT_WAITACTIVE system calls are
	repeated if interrupted.

2001-05-27 23:47  dok

	* src/gfx/generic/generic.c: fixed bug in gAcquire: src colorkey
	was not set when using src colorkeying and at least one of
	DSBLIT_BLEND_ALPHACHANNEL, DSBLIT_BLEND_COLORALPHA and
	DSBLIT_COLORIZE.
	
	Andi: Does this fix falling corpse parts on PowerPC?

2001-05-27 23:31  dok

	* src/display/idirectfbsurface.c: check for source != NULL in Blit
	and StretchBlit

2001-05-27 22:05  dok

	* interfaces/Makefile.am: Added "idirectfbvideoprovider_libmpeg3.c"
	to EXTRA_DIST

2001-05-27 08:23  dok

	* include/directfb.h, tools/gendoc.pl: Added a parsing feature: The
	description of interface functions is now split up into two parts
	devided by the first blank line.  The first part is the headline
	and is printed in the interface overview and in the page of the
	funtion itself. The detailed information about the parameters and
	possible error values is only in the functions page.
	
	We can now write very long and good descriptions for the functions
	without bloating the index pages.

2001-05-26 17:48  dok

	* include/directfb.h, src/idirectfb.c: added
	IDirectFB->WaitForSync, blocks until next vertical retrace

2001-05-23 21:42  dok

	* NEWS: grammatical clarification

2001-05-23 21:04  andi

	* NEWS: updated NEWS

2001-05-23 20:53  andi

	* ChangeLog, NEWS: updated ChangeLog and NEWS

2001-05-23 17:17  neo

	* interfaces/idirectfbimageprovider_jpeg.c: got it wrong last time,
	hopefully works now

2001-05-23 16:51  neo

	* interfaces/idirectfbvideoprovider_libmpeg3.c: Loop MPEG so it
	behaves like the AVI provider.	Timing is still badly broken if you
	use Stop() or SeekTo().

2001-05-23 16:13  neo

	* interfaces/idirectfbimageprovider_jpeg.c: tried to fix image
	loading in 24bpp (can't test)

2001-05-23 13:09  andi

	* interfaces/idirectfbimageprovider_jpeg.c: support von 15bpp in
	jpeg provider

2001-05-23 02:49  neo

	* src/gfx/generic/generic.c: removed a spurious comment

2001-05-23 01:46  dok

	* src/gfx/generic/generic.c: tweaked Cop_to_Dop_24 72.78 -> 73.30

2001-05-23 00:55  dok

	* src/gfx/generic/generic.c: Removed #ifdef, no unroll anymore,
	fastest result ever seen! 121 MPixel/sec (Celeron 533), routine
	before had 119 MPixel.

2001-05-22 23:50  neo

	* src/gfx/generic/generic.h: the rest of my optimizations that were
	not committed before

2001-05-22 23:39  andi

	* src/gfx/generic/generic.c: added fefes code for non-i386
	platforms, great improvement on my powerbook, use old code on i386

2001-05-22 21:36  andi

	* src/gfx/generic/generic.h: commited svens new
	SET_ALPHA_PIXEL_RGB16 and _RGB15 macros, performance improvements
	in DrawString() on i386 and powerpc

2001-05-22 18:19  neo

	* autogen.sh: forgot to remove some lines we don't need here

2001-05-22 18:16  neo

	* autogen.sh: allow for automake 1.4-p1 and similar version numbers

2001-05-22 07:33  dok

	* include/directfb.h, src/idirectfb.c: Added IDirectFB->WaitIdle()
	that waits for the graphics card being idle.
	
	df_dok calls WaitIdle before and after each benchmark.	Now we see
	the real performance of the Savage3D.  Besides that e.g. the
	blitting benchmark takes 9 seconds instead of 3 seconds defined in
	df_dok.c because it takes the hardware 6 additional seconds to
	complete all the buffered instructions. In this time (6 seconds!)
	the application can use the CPU for other things ;-)

2001-05-22 05:43  dok

	* src/core/gfxcard.c: Do gfxcard_sync() in gfxcard_deinit(), fixes
	X crashes with Savage being busy during switch back to X.

2001-05-22 01:49  dok

	* interfaces/idirectfbvideoprovider_libmpeg3.c: follow API change

2001-05-22 01:48  dok

	* gfxdrivers/ati128/ati128.c: missed one default label in
	pixelformat switch

2001-05-22 01:43  dok

	* interfaces/Makefile.am: added "-f" to rm ;)

2001-05-22 01:21  dok

	* gfxdrivers/ati128/ati128_state.c, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/neomagic/neo2200.c,
	gfxdrivers/tdfx/tdfx.c, include/directfb.h,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_swf.c, src/directfb.c,
	src/idirectfb.c, src/interface.c, src/core/core.c,
	src/core/fbdev.c, src/core/gfxcard.c, src/core/surfaces.c,
	src/core/surfaces.h, src/display/idirectfbsurface.c,
	src/gfx/generic/generic.c: FIXME hunting: - Added error code
	DFB_MISSINGFONT, returned by DrawString.  - DFBGetInterface checks
	filename length before checking the extension - Wrote more details
	for FIXME about primary surface recreation.  -
	fbdev_get_pixelformat now checks all channel's length and offset -
	gfxcard_check_state now rechecks if src/dst blend function changed
	- do at least clip_triangle_precheck for hardware without clipping
	support - if surface_reformat fails, restore values and already
	reformatted buffers - replaced hardcoded "7" with blitting flags in
	"Dacc_modulation[7] = ..."
	
	Other fixes: - bug messages in all drivers when an unexpected
	pixelformat is found - made avifile provider compile again with
	version from download/contrib - follow surface description API
	change in avifile and swf provider - some type fixes (unsigned int
	was used instead of the actual type) - fixed bug in gAcquire that
	caused DSBLIT_BLEND_COLORALPHA to be ignored   when the source
	pixelformat is DSPF_A8 and DSBLIT_BLEND_ALPHACHANNEL and/or  
	DSBLIT_COLORIZE has been set

2001-05-21 22:12  andi

	* include/directfb.h, interfaces/idirectfbfont_default.c,
	interfaces/idirectfbimageprovider_gif.c,
	interfaces/idirectfbimageprovider_jpeg.c,
	interfaces/idirectfbimageprovider_png.c,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_v4l.c, src/directfb.c,
	src/idirectfb.c, src/core/fonts.c, src/core/windows.c: - API
	Change:   removed bpp field from surface description, removed
	DSCAPS_ALPHA,	added pixelformat field instead.  - removed window
	stack repaint when new window is created (makes no sense   since
	opacity for new windows is 0) - added support for 15bpp in v4l
	provider - v4l provider support for devfs (/dev/v4l/video*)

2001-05-21 19:51  dok

	* src/directfb.c: You can use "Ctrl+Alt+Backspace" to exit DirectFB
	by killing it with SIGINT.

2001-05-20 23:45  neo

	* src/gfx/generic/generic.c: After my latest optimizations, line
	drawing was wrong under some circumstances. Fixed it without
	hurting the performance.

2001-05-20 22:12  dok

	* src/idirectfb.c: in CreateFont: allow desc == NULL if filename ==
	NULL for default

2001-05-19 22:46  neo

	* README, configure.in: bumped version number to 0.9.2 and updated
	README

2001-05-19 21:30  neo

	* NEWS: updated NEWS

2001-05-19 20:44  neo

	* include/directfb.h, src/core/gfxcard.c, src/core/gfxcard.h,
	src/display/idirectfbsurface.c, src/media/idirectfbfont.c: Changed
	GetStringWidth() and DrawString() methods so they take an
	additional parameter "bytes" that specifies the number of bytes to
	interpret from the passed string. Pass -1 if you intend to use the
	complete NULL-terminated string.
	
	This has several advantages: Line-breaking algorithms can be
	implemented without copying the string and not NULL-terminated
	character arrays can be drawn. Unfortunately this changes the API
	once again.

2001-05-19 19:46  neo

	* interfaces/Makefile.am, interfaces/idirectfbfont_default.c,
	src/idirectfb.c, src/core/fonts.c, src/media/Makefile.am: - readded
	src/media/Makefile.am (forgot this one on my last commit) - added
	interfaces/idirectfbfont_default.c (this used to be the default
	font implementation in the core) - removed default font code from
	the core - changed interface loader so you get the default font if
	you call CreateFont() with a NULL filename

2001-05-19 19:24  neo

	* configure.in, include/directfb.h, interfaces/idirectfbfont_ft2.c,
	src/Makefile.am, src/idirectfb.h, src/core/core.c,
	src/core/fonts.c, src/core/fonts.h, src/display/idirectfbsurface.c,
	src/display/idirectfbsurface.h, src/media/.cvsignore,
	src/media/idirectfbfont.c, src/media/idirectfbfont.h: - readded
	src/media directory to provide default font methods - changed
	IDirectFBSurface struct to take a pointer to an IDirectFBFont -
	made IDirectFBSurface call AddRef and Release on the font it owns -
	made DrawString method use GetStringWidth method as provided by
	IDirectFBFont - ditched default font completely; will add it back
	as a font interface

2001-05-18 18:44  andi

	* src/gfx/generic/generic.c: renamed _noMMX functions to _C

2001-05-18 18:19  andi

	* src/gfx/generic/generic.h: replaced SET_ALPHA_PIXEL_RGB32 with
	fefe's code. DrawString() performance in 32bit is more than twice
	as high than before (i386). no performance improvement on powerpc,
	dont know why. other platforms not tested yet.

2001-05-18 17:33  dok

	* interfaces/idirectfbvideoprovider_libmpeg3.c: Fixed SeekTo
	(seconds*rate, not seconds/rate).  Implemented GetLength and
	GetPos.

2001-05-18 16:43  dok

	* interfaces/idirectfbvideoprovider_libmpeg3.c: #include
	<libmpeg3.h> instead of "libmpeg3.h"

2001-05-17 16:11  andi

	* src/gfx/generic/generic.c: Cop_to_Dop_16() uses 32-bit writes to
	the framebuffer. Makes no difference on i386, but ~30% performace
	increase on ppc.

2001-05-16 22:01  dok

	* configure.in, interfaces/Makefile.am,
	interfaces/idirectfbvideoprovider_libmpeg3.c: Added libmpeg3
	videoprovider, thanks to Kim JeongHoe for the source.
	
	To compile with libmpeg3 video provider use:
	
	./configure --with-libmpeg3=<path>

2001-05-16 00:44  neo

	* interfaces/idirectfbfont_ft2.c: removed gprint

2001-05-15 22:01  andi

	* interfaces/idirectfbfont_ft2.c: allow use of kerning on non-i386
	machines, seems to work on my powerpc again.

2001-05-15 22:01  neo

	* configure.in: forgot to remove src/media from here

2001-05-15 20:41  neo

	* interfaces/idirectfbfont_ft2.c, src/Makefile.am, src/idirectfb.c,
	src/idirectfb.h, src/core/fonts.h, src/display/idirectfbsurface.c,
	src/media/.cvsignore, src/media/Makefile.am,
	src/media/idirectfbfont.c, src/media/idirectfbfont.h: Removed
	media/idirectfbfont.[ch] and implemented it all in the interface. 
	Call FT_Done_Face() on freetype face object on font destruction.

2001-05-15 19:17  dok

	* src/core/gfxcard.c: simple precheck clips text examining
	y(+height), clip y1/y2

2001-05-15 18:53  dok

	* src/core/gfxcard.c: set state->source to NULL before returning

2001-05-15 17:42  neo

	* src/: display/idirectfbsurface.c, media/idirectfbfont.c,
	misc/utf8.c: avoid endless looping on invalid UTF8 strings

2001-05-15 16:48  neo

	* src/media/idirectfbfont.c: fixed braino in GetStringWidth() func

2001-05-15 16:46  neo

	* src/misc/tree.c: indentation

2001-05-15 16:45  neo

	* interfaces/idirectfbfont_ft2.c, src/media/idirectfbfont.c,
	src/misc/tree.c: - do not try to free NULL pointer in tree.c - some
	minor cleanups

2001-05-15 16:32  andi

	* BUGS, src/display/idirectfbsurface.c: - replaced ceil() calls in
	idirectfbsurface.c with ICEIL(), compiles on arm and ppc again.
	(without libm)
	
	- removed resolved BUGS from BUGS

2001-05-15 15:42  neo

	* interfaces/idirectfbfont_ft2.c: added sanity checks so we never
	draw outside the surface boundaries corrected handling of face
	metrics

2001-05-15 03:48  neo

	* include/directfb.h, interfaces/idirectfbfont_ft2.c,
	src/core/fonts.c, src/core/fonts.h, src/core/gfxcard.c,
	src/display/idirectfbsurface.c, src/media/idirectfbfont.c,
	src/misc/Makefile.am, src/misc/tree.c, src/misc/tree.h,
	src/misc/utf8.c, src/misc/utf8.h, src/misc/util.c: Rewrote a good
	part of the font code:
	
	- surface->DrawString() now takes UTF-8 strings.  - Fonts do not
	need to be loaded completely any longer. The core keeps an array of
	surfaces that grows when new glyphs are loaded. Information about
	the glyphs is kept in a balanced binary tree using the Unicode
	index of the glyph as the key.	- Kerning tables are not any longer
	in the core font struct. We now use a callback from the core to the
	font provider and it can choose not to implement it all.
	
	Things left to do: - Add some checks so we don't crash on very
	large fonts.  - Let the font provider specify the surface format
	and blitting flags.  - Hook into font destruction and release the
	FT2 face.  - Add DrawGlyph method to surface so we can use it from
	the GDK backend or from a Pango module.

2001-05-14 23:28  neo

	* configure.in, src/gfx/generic/Makefile.am: don't use
	-fomit-frame-pointer if compiling with --enable-debug

2001-05-14 22:02  andi

	* configure.in, src/misc/gfx_util.c, src/misc/util.h: - implemented
	ceil and floor functions IFLOOR() and ICEIL(), to get rid of   libm
	- added -lm to Makefiles of examples that need libm.

2001-05-11 21:07  neo

	* src/gfx/generic/generic.c: optimized gDrawLine() further  -->  5%
	speedup

2001-05-11 20:46  neo

	* src/gfx/generic/: Makefile.am, generic.c: some optimizations on
	Drawline() --> about 10% faster

2001-05-11 15:14  neo

	* src/media/idirectfbfont.h: removed leftover declaration of
	IDirectFBFont_Construct_TTF()

2001-05-10 14:37  neo

	* src/misc/conf.c: Changed help string so it mentions that these
	are DirectFB options and not app-specific. We need to change
	command-line parsing somehow since it can not be that
	DirectFBInit() exits the app if --help is found without giving the
	application a chance to output its help.

2001-05-09 20:26  andi

	* interfaces/idirectfbvideoprovider_avifile.cpp: applied patch from
	<js@convergence.de>
	
	- videos with few IFrames no longer rewind if using fast forward in
	dfbsee

2001-05-09 19:05  andi

	* src/core/vt.c: vt.c opens /dev/tty0 or /dev/vc/0 (for devfs)
	instead of /dev/console, this makes DirectFB work on machines with
	serial console.

2001-05-09 17:41  dok

	* src/directfb.c: Print error message if DirectFBInit has been
	forgotten.

2001-05-07 22:07  andi

	* gfxdrivers/ati128/ati128_state.c, gfxdrivers/matrox/matrox.c,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/tdfx/tdfx.c,
	src/interface.c, src/core/fonts.c, src/core/gfxcard.c,
	src/core/input.c, src/core/surfacemanager.c, src/core/surfaces.c,
	src/core/windows.c, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c, src/gfx/convert.h,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/misc/gfx_util.c, src/misc/util.c,
	src/windows/idirectfbwindow.c: fixed warnings that occured when
	compiling with gcc-3.0 ("deprecated use of label at end of compound
	statement" and "undefined reference to memset")

2001-05-07 19:57  andi

	* include/directfb.h,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_swf.c,
	interfaces/idirectfbvideoprovider_v4l.c: applied patch from
	Johannes Stezenbach <js@convergence.de> which adds the following
	functions.
	
	- IDirectFBVideoProvider::GetPos():    get current position in the
	stream - IDirectFBVideoProvider::GetLength(): get length in seconds
	
	the functions are currently implemented in the avifile provider
	only, v4l and swf providers return DFB_UNIMPLEMENTED.

2001-05-03 23:47  neo

	* ChangeLog, patches/Makefile.am: Made 0.9.1 release

2001-05-03 21:17  neo

	* src/: core/gfxcard.c, misc/gfx_util.c: Changed
	clip_triangle_precheck() so it drops triangles that need to be
	clipped. This is a temporary workaround for the lack of proper
	clipping code and keeps us from trying to draw beyond the surface
	borders.
	
	Corrected scaling factor in df_knuckles.

2001-05-03 19:23  mitch

	* ChangeLog: Regenerated ChangeLog with a nicer script.

2001-05-03 19:04  neo

	* NOTES: removed empty NOTES file

2001-05-03 17:10  dok

	* NOTES: cleared NOTES, outdated

2001-05-03 15:07  dok

	* NEWS: Added Sven's pkg-config additions to NEWS.

2001-05-03 14:50  dok

	* ChangeLog, NEWS, include/directfb.h: Generated ChangeLog.  Wrote
	NEWS.  Made DFBInputEvent.key_unicode an __u32.

2001-05-03 13:57  neo

	* .cvsignore, Makefile.am, configure.in, directfb-avifile.pc.in,
	directfb-swf.pc.in: added pkg-config files for the interfaces that
	get optionally installed so apps can test for their existence

2001-05-03 13:46  dok

	* patches/neofb-0.2.1-patch-2.4.3.bz2: Added my framebuffer driver
	for all NeoMagic PCI/AGP chips.

2001-05-03 13:27  dok

	* include/directfb.h, src/input/idirectfbinputdevice.c: Added
	IDirectFBInputDevice->GetButtonState() which returns the state of
	the specified button.  Added DFBInputDeviceButtonState.

2001-05-02 12:53  neo

	* src/: core/gfxcard.c, misc/gfx_util.c, misc/gfx_util.h:
	Introduced clip_triangle_precheck() that tests if a triangle needs
	to be drawn at all.
	
	Beautified line drawing examples in df_dok.

2001-04-29 10:48  dok

	* src/gfx/generic/generic.c, src/misc/util.h,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox_state.c,
	gfxdrivers/matrox/regs.h: Implemented triangle filling in Matrox
	driver.  Renamed utility macro SGN to SIGN.

2001-04-29 07:14  dok

	* configure.in, gfxdrivers/matrox/matrox.c,
	src/gfx/generic/generic.c: Added new cool demo called df_knuckles,
	it's a port from Mark Vojkovich's skull demo for DGA and a good
	demonstration of triangles.
	
	Fixed CheckState in Matrox driver, it does not support all
	functions any more.  Added rounding to fixed point triangle setup.

2001-04-29 05:37  dok

	* gfxdrivers/tdfx/tdfx.c, src/core/gfxcard.c, src/gfx/util.h,
	src/gfx/generic/generic.c, src/gfx/generic/generic.h: implemented
	triangle filling in generic driver moved utility function
	sort_triangle from tdfx driver to gfx/util.h added triangles to
	df_dok

2001-04-29 03:13  dok

	* configure.in: compile with "-g3" if "--enable-debug" is passed to
	configure

2001-04-27 16:43  dok

	* gfxdrivers/neomagic/neomagic.c: fixed accelerator ids

2001-04-27 01:36  neo

	* include/directfb.h, src/directfb.c: Moved command-line parsing
	out of DirectFBCreate() into DirectFBInit().  This means to
	inititalize DirectFB() there are now two calls necessary:
	
	  DirectFBInit( &argc, &argv );
	  DirectFBCreate( &dfb );
	
	This makes is possible to do further checks on the command-line
	before switching to graphics mode on DirectFBCreate.

2001-04-26 23:05  dok

	* gfxdrivers/tdfx/tdfx.c, include/directfb.h, src/core/gfxcard.c,
	src/core/gfxcard.h, src/display/idirectfbsurface.c: FillRectangle!
	But only on Voodoo, yet.  Accepts drawing flag DSDRAW_BLEND.

2001-04-26 13:44  dok

	* interfaces/idirectfbimageprovider_gif.c,
	interfaces/idirectfbimageprovider_jpeg.c,
	interfaces/idirectfbimageprovider_png.c,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_swf.c,
	interfaces/idirectfbvideoprovider_v4l.c, src/idirectfb.c,
	src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbsurface.c,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_window.c,
	src/input/idirectfbinputbuffer.c, src/input/idirectfbinputdevice.c,
	src/media/idirectfbfont.c, src/windows/idirectfbwindow.c: free
	interfaces if reference counter reaches zero, disabled in debug
	mode to enable the feature of DFB_DEAD

2001-04-26 02:11  mitch

	* configure.in: Fixed the check if avifile-config was found.

2001-04-25 23:10  dok

	* interfaces/: idirectfbvideoprovider.c, idirectfbvideoprovider.h:
	removed unused files

2001-04-25 22:33  holger

	* src/idirectfb.c: free interfaces if constuctor failed

2001-04-25 20:01  dok

	* src/display/idirectfbdisplaylayer.c: fixed caps passed to
	IDirectFBSurface_Layer_Construct

2001-04-24 15:34  dok

	* ChangeLog, src/idirectfb.c: Reset card state in suspend, some
	glitches still there.  Generated changelog.

2001-04-24 15:14  neo

	* README, configure.in, interfaces/Makefile.am,
	interfaces/idirectfbvideoprovider_swf.c: Added Shockwave Flash
	videoprovider hacked by Roh.
	
	Uses libflash which can be found repackaged at
	http://www.directfb.org/download/. There is no acceleration yet, we
	just tell libflash to draw into a DirectFB surface. Sound and
	interaction are also disabled.
	
	Try to build avifile videoprovider by default. Can be disabled by
	passing --disable-avifile to configure.

2001-04-23 19:04  neo

	* configure.in, directfb-config.in, interfaces/Makefile.am: Bumped
	version number to 0.9.1
	
	Added an avifile option to directfb-config that makes --libs output
	the suitable LDFLAGS so the avifile provider can be used with the
	linked application. Will need to figure out how to do this right in
	directfb.pc.

2001-04-20 21:15  dok

	* src/: core/surfaces.h, core/windows.c, core/windows.h,
	display/idirectfbdisplaylayer.c: Fixed the segfault that happens at
	exit in all applications using an IDirectFBDisplayLayer.
	
	more signed/unsigned cleanups, we need to check all code for that

2001-04-20 20:52  dok

	* include/directfb.h, src/idirectfb.c,
	src/display/idirectfbsurface.c, src/windows/idirectfbwindow.c:
	signed/unsigned int cleanup

2001-04-20 16:38  dok

	* gfxdrivers/tdfx/tdfx.c: removed bogus test lines from driver

2001-04-19 22:57  neo

	* src/idirectfb.c: do not enable the cursor by default explicitely
	enabled the cursor in df_fire

2001-04-15 00:14  dok

	* interfaces/idirectfbvideoprovider_avifile.cpp: also support .asf

2001-04-13 09:07  dok

	* interfaces/idirectfbvideoprovider_avifile.cpp: Stop works now,
	actually doing a Pause (Stop crashes avifile).	PlayTo no more
	stops the video before destination setup and checks if the video
	should be UnPaused, Started or left Playing.
	
	Works really fine to call PlayTo several times with different
	destinations.  (Different surfaces on the fly not tested yet. Todo:
	Mutex PlayTo/DrawCallback)

2001-04-12 23:06  dok

	* interfaces/idirectfbvideoprovider_v4l.c, src/idirectfb.c,
	src/core/Makefile.am, src/core/v4l.c, src/core/v4l.h: V4L
	Videoprovider Probe now checks if the filename bgeins with
	"/dev/video", so you have to pass e.g. "/dev/video0" to the
	provider and not NULL.	Removed video4linux from core.	V4L
	Provider still needs these: 1. Clean up code.  2. Add grabbing
	support.  3. Do proper surface listening (resize, destroy, ...).

2001-04-12 22:59  dok

	* interfaces/idirectfbvideoprovider_avifile.cpp: compiles with
	newest avifile version now

2001-04-12 17:48  dok

	* include/directfb.h: oops, directfb.h said "SetColor(a,r,g,b)", it
	is "r, g, b, a"

2001-04-11 03:47  dok

	* include/directfb.h, interfaces/idirectfbimageprovider_jpeg.c:
	-removed composed blitting flags (DECAL,MODULATE,...) -precheck if
	destination format is supported in jpeg provider, image loading
	needs to be cleaned up badly (src/misc/gfx_util.c, too).

2001-04-11 02:44  dok

	* src/display/: idirectfbsurface.c, idirectfbsurface_layer.c:
	implemented flipping of general purpose surfaces (no layer, no
	window) a) that are subsurfaces b) with specified flip region c)
	with DSFLIP_BLIT flag

2001-04-11 01:48  dok

	* tools/gendoc.pl: fixed parsing of struct members and interface
	call parameters that have a type with spaces, e.g. "unsigned int".
	
	improved linking within types.html for struct members, e.g. flags

2001-04-11 00:44  dok

	* include/directfb.h, src/idirectfb.c: added missing "void
	*callbackdata" to callbacks: DFBInputDeviceCallback and
	DFBVideoModeCallback

2001-04-10 18:32  dok

	* src/gfx/generic/generic.c: removed clipping from software drivers
	blitting functions, gfxcard.c does this removed debugging sleep
	from df_window

2001-04-10 16:04  dok

	* fb.modes: added note about where to place this file

2001-04-10 15:27  dok

	* fb.modes: added 768x576 mode (PAL), but at 75Hz

2001-04-10 15:00  dok

	* interfaces/idirectfbvideoprovider_avifile.cpp: added #warning to
	help people compile the avifile provider with a newer version of
	avifile

2001-04-10 14:58  dok

	* src/core/.cvsignore: standard files

2001-04-10 14:57  dok

	* src/core/: Makefile.am, core.c, core.h, coredefs.h, fbdev.c,
	fbdev.h, fonts.c, fonts.h, gfxcard.c, gfxcard.h, input.c, input.h,
	layers.c, layers.h, sig.c, sig.h, state.c, state.h,
	surfacemanager.c, surfacemanager.h, surfaces.c, surfaces.h, v4l.c,
	v4l.h, vt.c, vt.h, windows.c, windows.h: added missing files that
	got sorted out by .cvsignore

2001-04-06 22:34  neo

	* ChangeLog: Documented the release version number in the
	ChangeLog.

2001-04-06 22:18  mitch

	* .cvsignore, AUTHORS, BUGS, COPYING, ChangeLog, Makefile.am, NEWS,
	NOTES, README, README.screenshots, TODO, acconfig.h, autogen.sh,
	configure.in, directfb-config.in, directfb.pc.in, fb.modes,
	mkchlog, docs/.cvsignore, docs/Makefile.am, docs/html/.cvsignore,
	docs/html/cimlogo.png, docs/html/directfb.png, src/.cvsignore,
	src/Makefile.am, src/directfb.c, src/export_list.sym,
	src/idirectfb.c, src/idirectfb.h, src/interface.c,
	src/gfx/.cvsignore, src/gfx/Makefile.am, src/gfx/convert.c,
	src/gfx/convert.h, src/gfx/util.c, src/gfx/util.h,
	src/gfx/generic/.cvsignore, src/gfx/generic/Cacc_add_to_Dacc_MMX.s,
	src/gfx/generic/Dacc_modulate_argb_MMX.s,
	src/gfx/generic/Makefile.am,
	src/gfx/generic/Sacc_add_to_Dacc_MMX.s,
	src/gfx/generic/Sacc_to_Dop_rgb16_MMX.s,
	src/gfx/generic/Sacc_to_Dop_rgb32_MMX.s,
	src/gfx/generic/Sop_argb_Sto_Dacc_MMX.s,
	src/gfx/generic/Sop_argb_to_Dacc_MMX.s,
	src/gfx/generic/Sop_rgb16_to_Dacc_MMX.s,
	src/gfx/generic/Sop_rgb32_to_Dacc_MMX.s,
	src/gfx/generic/Xacc_blend_invsrcalpha_MMX.s,
	src/gfx/generic/Xacc_blend_srcalpha_MMX.s,
	src/gfx/generic/detect_MMX.s, src/display/.cvsignore,
	src/display/Makefile.am, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbdisplaylayer.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_layer.h,
	src/display/idirectfbsurface_window.c,
	src/display/idirectfbsurface_window.h, src/gfx/generic/generic.c,
	src/gfx/generic/generic.h, src/input/.cvsignore,
	src/input/Makefile.am, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c,
	src/input/idirectfbinputdevice.h, src/media/.cvsignore,
	src/media/Makefile.am, src/media/idirectfbfont.c,
	src/media/idirectfbfont.h, src/misc/.cvsignore,
	src/misc/Makefile.am, src/misc/conf.c, src/misc/conf.h,
	src/misc/gfx_util.c, src/misc/gfx_util.h, src/misc/util.c,
	src/misc/util.h, src/windows/.cvsignore, src/windows/Makefile.am,
	src/windows/idirectfbwindow.c, src/windows/idirectfbwindow.h,
	gfxdrivers/.cvsignore, gfxdrivers/Makefile.am,
	gfxdrivers/ati128/.cvsignore, gfxdrivers/ati128/Makefile.am,
	gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_state.c, gfxdrivers/ati128/ati128_state.h,
	gfxdrivers/ati128/mmio.h, gfxdrivers/ati128/regs.h,
	gfxdrivers/matrox/.cvsignore, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/matrox/matrox_state.h,
	gfxdrivers/matrox/mmio.h, gfxdrivers/matrox/regs.h,
	gfxdrivers/neomagic/.cvsignore, gfxdrivers/neomagic/Makefile.am,
	gfxdrivers/neomagic/neo2200.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/neomagic/neomagic.h, gfxdrivers/tdfx/.cvsignore,
	gfxdrivers/tdfx/Makefile.am, gfxdrivers/tdfx/tdfx.c,
	gfxdrivers/tdfx/tdfx.h, include/.cvsignore, include/Makefile.am,
	include/directfb.h, include/directfb_internals.h,
	include/directfb_version.h.in, interfaces/.cvsignore,
	interfaces/Makefile.am, interfaces/idirectfbfont_ft2.c,
	interfaces/idirectfbimageprovider_gif.c,
	interfaces/idirectfbimageprovider_jpeg.c,
	interfaces/idirectfbimageprovider_png.c,
	interfaces/idirectfbvideoprovider.c,
	interfaces/idirectfbvideoprovider.h,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_v4l.c, patches/.cvsignore,
	patches/Makefile.am, patches/README.atyfb_patch_2.4.0-andi,
	patches/aty128fb_patch_2.4.0-andi,
	patches/matroxfb-vsync-irq.patch, tools/.cvsignore,
	tools/Makefile.am, tools/README, tools/gendoc.pl,
	tools/raw16toraw24.c, tools/raw32toraw24.c: Initial revision

2001-04-06 22:18  mitch

	* .cvsignore, AUTHORS, BUGS, COPYING, ChangeLog, Makefile.am, NEWS,
	NOTES, README, README.screenshots, TODO, acconfig.h, autogen.sh,
	configure.in, directfb-config.in, directfb.pc.in, fb.modes,
	mkchlog, docs/.cvsignore, docs/Makefile.am, docs/html/.cvsignore,
	docs/html/cimlogo.png, docs/html/directfb.png, src/.cvsignore,
	src/Makefile.am, src/directfb.c, src/export_list.sym,
	src/idirectfb.c, src/idirectfb.h, src/interface.c,
	src/gfx/.cvsignore, src/gfx/Makefile.am, src/gfx/convert.c,
	src/gfx/convert.h, src/gfx/util.c, src/gfx/util.h,
	src/gfx/generic/.cvsignore, src/gfx/generic/Cacc_add_to_Dacc_MMX.s,
	src/gfx/generic/Dacc_modulate_argb_MMX.s,
	src/gfx/generic/Makefile.am,
	src/gfx/generic/Sacc_add_to_Dacc_MMX.s,
	src/gfx/generic/Sacc_to_Dop_rgb16_MMX.s,
	src/gfx/generic/Sacc_to_Dop_rgb32_MMX.s,
	src/gfx/generic/Sop_argb_Sto_Dacc_MMX.s,
	src/gfx/generic/Sop_argb_to_Dacc_MMX.s,
	src/gfx/generic/Sop_rgb16_to_Dacc_MMX.s,
	src/gfx/generic/Sop_rgb32_to_Dacc_MMX.s,
	src/gfx/generic/Xacc_blend_invsrcalpha_MMX.s,
	src/gfx/generic/Xacc_blend_srcalpha_MMX.s,
	src/gfx/generic/detect_MMX.s, src/display/.cvsignore,
	src/display/Makefile.am, src/display/idirectfbdisplaylayer.c,
	src/display/idirectfbdisplaylayer.h,
	src/display/idirectfbsurface.c, src/display/idirectfbsurface.h,
	src/display/idirectfbsurface_layer.c,
	src/display/idirectfbsurface_layer.h,
	src/display/idirectfbsurface_window.c,
	src/display/idirectfbsurface_window.h, src/gfx/generic/generic.c,
	src/gfx/generic/generic.h, src/input/.cvsignore,
	src/input/Makefile.am, src/input/idirectfbinputbuffer.c,
	src/input/idirectfbinputbuffer.h, src/input/idirectfbinputdevice.c,
	src/input/idirectfbinputdevice.h, src/media/.cvsignore,
	src/media/Makefile.am, src/media/idirectfbfont.c,
	src/media/idirectfbfont.h, src/misc/.cvsignore,
	src/misc/Makefile.am, src/misc/conf.c, src/misc/conf.h,
	src/misc/gfx_util.c, src/misc/gfx_util.h, src/misc/util.c,
	src/misc/util.h, src/windows/.cvsignore, src/windows/Makefile.am,
	src/windows/idirectfbwindow.c, src/windows/idirectfbwindow.h,
	gfxdrivers/.cvsignore, gfxdrivers/Makefile.am,
	gfxdrivers/ati128/.cvsignore, gfxdrivers/ati128/Makefile.am,
	gfxdrivers/ati128/ati128.c, gfxdrivers/ati128/ati128.h,
	gfxdrivers/ati128/ati128_state.c, gfxdrivers/ati128/ati128_state.h,
	gfxdrivers/ati128/mmio.h, gfxdrivers/ati128/regs.h,
	gfxdrivers/matrox/.cvsignore, gfxdrivers/matrox/Makefile.am,
	gfxdrivers/matrox/matrox.c, gfxdrivers/matrox/matrox.h,
	gfxdrivers/matrox/matrox_state.c, gfxdrivers/matrox/matrox_state.h,
	gfxdrivers/matrox/mmio.h, gfxdrivers/matrox/regs.h,
	gfxdrivers/neomagic/.cvsignore, gfxdrivers/neomagic/Makefile.am,
	gfxdrivers/neomagic/neo2200.c, gfxdrivers/neomagic/neomagic.c,
	gfxdrivers/neomagic/neomagic.h, gfxdrivers/tdfx/.cvsignore,
	gfxdrivers/tdfx/Makefile.am, gfxdrivers/tdfx/tdfx.c,
	gfxdrivers/tdfx/tdfx.h, include/.cvsignore, include/Makefile.am,
	include/directfb.h, include/directfb_internals.h,
	include/directfb_version.h.in, interfaces/.cvsignore,
	interfaces/Makefile.am, interfaces/idirectfbfont_ft2.c,
	interfaces/idirectfbimageprovider_gif.c,
	interfaces/idirectfbimageprovider_jpeg.c,
	interfaces/idirectfbimageprovider_png.c,
	interfaces/idirectfbvideoprovider.c,
	interfaces/idirectfbvideoprovider.h,
	interfaces/idirectfbvideoprovider_avifile.cpp,
	interfaces/idirectfbvideoprovider_v4l.c, patches/.cvsignore,
	patches/Makefile.am, patches/README.atyfb_patch_2.4.0-andi,
	patches/aty128fb_patch_2.4.0-andi,
	patches/matroxfb-vsync-irq.patch, tools/.cvsignore,
	tools/Makefile.am, tools/README, tools/gendoc.pl,
	tools/raw16toraw24.c, tools/raw32toraw24.c: 2001-04-06	Michael
	Natterer  <mitch@convergence.de>
	
		* initial CVS import.

